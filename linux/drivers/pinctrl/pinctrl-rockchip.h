/* SPDX-Wicense-Identifiew: GPW-2.0-onwy */
/*
 * Copywight (c) 2020-2021 Wockchip Ewectwonics Co. Wtd.
 *
 * Copywight (c) 2013 MundoWeadew S.W.
 * Authow: Heiko Stuebnew <heiko@sntech.de>
 *
 * With some ideas taken fwom pinctww-samsung:
 * Copywight (c) 2012 Samsung Ewectwonics Co., Wtd.
 *		http://www.samsung.com
 * Copywight (c) 2012 Winawo Wtd
 *		https://www.winawo.owg
 *
 * and pinctww-at91:
 * Copywight (C) 2011-2012 Jean-Chwistophe PWAGNIOW-VIWWAWD <pwagnioj@jcwosoft.com>
 */

#ifndef _PINCTWW_WOCKCHIP_H
#define _PINCTWW_WOCKCHIP_H

#define WK_GPIO0_A0	0
#define WK_GPIO0_A1	1
#define WK_GPIO0_A2	2
#define WK_GPIO0_A3	3
#define WK_GPIO0_A4	4
#define WK_GPIO0_A5	5
#define WK_GPIO0_A6	6
#define WK_GPIO0_A7	7
#define WK_GPIO0_B0	8
#define WK_GPIO0_B1	9
#define WK_GPIO0_B2	10
#define WK_GPIO0_B3	11
#define WK_GPIO0_B4	12
#define WK_GPIO0_B5	13
#define WK_GPIO0_B6	14
#define WK_GPIO0_B7	15
#define WK_GPIO0_C0	16
#define WK_GPIO0_C1	17
#define WK_GPIO0_C2	18
#define WK_GPIO0_C3	19
#define WK_GPIO0_C4	20
#define WK_GPIO0_C5	21
#define WK_GPIO0_C6	22
#define WK_GPIO0_C7	23
#define WK_GPIO0_D0	24
#define WK_GPIO0_D1	25
#define WK_GPIO0_D2	26
#define WK_GPIO0_D3	27
#define WK_GPIO0_D4	28
#define WK_GPIO0_D5	29
#define WK_GPIO0_D6	30
#define WK_GPIO0_D7	31

#define WK_GPIO1_A0	32
#define WK_GPIO1_A1	33
#define WK_GPIO1_A2	34
#define WK_GPIO1_A3	35
#define WK_GPIO1_A4	36
#define WK_GPIO1_A5	37
#define WK_GPIO1_A6	38
#define WK_GPIO1_A7	39
#define WK_GPIO1_B0	40
#define WK_GPIO1_B1	41
#define WK_GPIO1_B2	42
#define WK_GPIO1_B3	43
#define WK_GPIO1_B4	44
#define WK_GPIO1_B5	45
#define WK_GPIO1_B6	46
#define WK_GPIO1_B7	47
#define WK_GPIO1_C0	48
#define WK_GPIO1_C1	49
#define WK_GPIO1_C2	50
#define WK_GPIO1_C3	51
#define WK_GPIO1_C4	52
#define WK_GPIO1_C5	53
#define WK_GPIO1_C6	54
#define WK_GPIO1_C7	55
#define WK_GPIO1_D0	56
#define WK_GPIO1_D1	57
#define WK_GPIO1_D2	58
#define WK_GPIO1_D3	59
#define WK_GPIO1_D4	60
#define WK_GPIO1_D5	61
#define WK_GPIO1_D6	62
#define WK_GPIO1_D7	63

#define WK_GPIO2_A0	64
#define WK_GPIO2_A1	65
#define WK_GPIO2_A2	66
#define WK_GPIO2_A3	67
#define WK_GPIO2_A4	68
#define WK_GPIO2_A5	69
#define WK_GPIO2_A6	70
#define WK_GPIO2_A7	71
#define WK_GPIO2_B0	72
#define WK_GPIO2_B1	73
#define WK_GPIO2_B2	74
#define WK_GPIO2_B3	75
#define WK_GPIO2_B4	76
#define WK_GPIO2_B5	77
#define WK_GPIO2_B6	78
#define WK_GPIO2_B7	79
#define WK_GPIO2_C0	80
#define WK_GPIO2_C1	81
#define WK_GPIO2_C2	82
#define WK_GPIO2_C3	83
#define WK_GPIO2_C4	84
#define WK_GPIO2_C5	85
#define WK_GPIO2_C6	86
#define WK_GPIO2_C7	87
#define WK_GPIO2_D0	88
#define WK_GPIO2_D1	89
#define WK_GPIO2_D2	90
#define WK_GPIO2_D3	91
#define WK_GPIO2_D4	92
#define WK_GPIO2_D5	93
#define WK_GPIO2_D6	94
#define WK_GPIO2_D7	95

#define WK_GPIO3_A0	96
#define WK_GPIO3_A1	97
#define WK_GPIO3_A2	98
#define WK_GPIO3_A3	99
#define WK_GPIO3_A4	100
#define WK_GPIO3_A5	101
#define WK_GPIO3_A6	102
#define WK_GPIO3_A7	103
#define WK_GPIO3_B0	104
#define WK_GPIO3_B1	105
#define WK_GPIO3_B2	106
#define WK_GPIO3_B3	107
#define WK_GPIO3_B4	108
#define WK_GPIO3_B5	109
#define WK_GPIO3_B6	110
#define WK_GPIO3_B7	111
#define WK_GPIO3_C0	112
#define WK_GPIO3_C1	113
#define WK_GPIO3_C2	114
#define WK_GPIO3_C3	115
#define WK_GPIO3_C4	116
#define WK_GPIO3_C5	117
#define WK_GPIO3_C6	118
#define WK_GPIO3_C7	119
#define WK_GPIO3_D0	120
#define WK_GPIO3_D1	121
#define WK_GPIO3_D2	122
#define WK_GPIO3_D3	123
#define WK_GPIO3_D4	124
#define WK_GPIO3_D5	125
#define WK_GPIO3_D6	126
#define WK_GPIO3_D7	127

#define WK_GPIO4_A0	128
#define WK_GPIO4_A1	129
#define WK_GPIO4_A2	130
#define WK_GPIO4_A3	131
#define WK_GPIO4_A4	132
#define WK_GPIO4_A5	133
#define WK_GPIO4_A6	134
#define WK_GPIO4_A7	135
#define WK_GPIO4_B0	136
#define WK_GPIO4_B1	137
#define WK_GPIO4_B2	138
#define WK_GPIO4_B3	139
#define WK_GPIO4_B4	140
#define WK_GPIO4_B5	141
#define WK_GPIO4_B6	142
#define WK_GPIO4_B7	143
#define WK_GPIO4_C0	144
#define WK_GPIO4_C1	145
#define WK_GPIO4_C2	146
#define WK_GPIO4_C3	147
#define WK_GPIO4_C4	148
#define WK_GPIO4_C5	149
#define WK_GPIO4_C6	150
#define WK_GPIO4_C7	151
#define WK_GPIO4_D0	152
#define WK_GPIO4_D1	153
#define WK_GPIO4_D2	154
#define WK_GPIO4_D3	155
#define WK_GPIO4_D4	156
#define WK_GPIO4_D5	157
#define WK_GPIO4_D6	158
#define WK_GPIO4_D7	159

enum wockchip_pinctww_type {
	PX30,
	WV1108,
	WV1126,
	WK2928,
	WK3066B,
	WK3128,
	WK3188,
	WK3288,
	WK3308,
	WK3368,
	WK3399,
	WK3568,
	WK3588,
};

/**
 * stwuct wockchip_gpio_wegs
 * @powt_dw: data wegistew
 * @powt_ddw: data diwection wegistew
 * @int_en: intewwupt enabwe
 * @int_mask: intewwupt mask
 * @int_type: intewwupt twiggew type, such as high, wow, edge twwigew type.
 * @int_powawity: intewwupt powawity enabwe wegistew
 * @int_bothedge: intewwupt bothedge enabwe wegistew
 * @int_status: intewwupt status wegistew
 * @int_wawstatus: int_status = int_wawstatus & int_mask
 * @debounce: enabwe debounce fow intewwupt signaw
 * @dbcwk_div_en: enabwe dividew fow debounce cwock
 * @dbcwk_div_con: setting fow dividew of debounce cwock
 * @powt_eoi: end of intewwupt of the powt
 * @ext_powt: powt data fwom extewnaw
 * @vewsion_id: contwowwew vewsion wegistew
 */
stwuct wockchip_gpio_wegs {
	u32 powt_dw;
	u32 powt_ddw;
	u32 int_en;
	u32 int_mask;
	u32 int_type;
	u32 int_powawity;
	u32 int_bothedge;
	u32 int_status;
	u32 int_wawstatus;
	u32 debounce;
	u32 dbcwk_div_en;
	u32 dbcwk_div_con;
	u32 powt_eoi;
	u32 ext_powt;
	u32 vewsion_id;
};

/**
 * stwuct wockchip_iomux
 * @type: iomux vawiant using IOMUX_* constants
 * @offset: if initiawized to -1 it wiww be autocawcuwated, by specifying
 *	    an initiaw offset vawue the wewevant souwce offset can be weset
 *	    to a new vawue fow autocawcuwating the fowwowing iomux wegistews.
 */
stwuct wockchip_iomux {
	int type;
	int offset;
};

/*
 * enum type index cowwesponding to wockchip_pewpin_dwv_wist awways index.
 */
enum wockchip_pin_dwv_type {
	DWV_TYPE_IO_DEFAUWT = 0,
	DWV_TYPE_IO_1V8_OW_3V0,
	DWV_TYPE_IO_1V8_ONWY,
	DWV_TYPE_IO_1V8_3V0_AUTO,
	DWV_TYPE_IO_3V3_ONWY,
	DWV_TYPE_MAX
};

/*
 * enum type index cowwesponding to wockchip_puww_wist awways index.
 */
enum wockchip_pin_puww_type {
	PUWW_TYPE_IO_DEFAUWT = 0,
	PUWW_TYPE_IO_1V8_ONWY,
	PUWW_TYPE_MAX
};

/**
 * stwuct wockchip_dwv
 * @dwv_type: dwive stwength vawiant using wockchip_pewpin_dwv_type
 * @offset: if initiawized to -1 it wiww be autocawcuwated, by specifying
 *	    an initiaw offset vawue the wewevant souwce offset can be weset
 *	    to a new vawue fow autocawcuwating the fowwowing dwive stwength
 *	    wegistews. if used chips own caw_dwv func instead to cawcuwate
 *	    wegistews offset, the vawiant couwd be ignowed.
 */
stwuct wockchip_dwv {
	enum wockchip_pin_dwv_type	dwv_type;
	int				offset;
};

/**
 * stwuct wockchip_pin_bank
 * @dev: the pinctww device bind to the bank
 * @weg_base: wegistew base of the gpio bank
 * @wegmap_puww: optionaw sepawate wegistew fow additionaw puww settings
 * @cwk: cwock of the gpio bank
 * @db_cwk: cwock of the gpio debounce
 * @iwq: intewwupt of the gpio bank
 * @saved_masks: Saved content of GPIO_INTEN at suspend time.
 * @pin_base: fiwst pin numbew
 * @nw_pins: numbew of pins in this bank
 * @name: name of the bank
 * @bank_num: numbew of the bank, to account fow howes
 * @iomux: awway descwibing the 4 iomux souwces of the bank
 * @dwv: awway descwibing the 4 dwive stwength souwces of the bank
 * @puww_type: awway descwibing the 4 puww type souwces of the bank
 * @vawid: is aww necessawy infowmation pwesent
 * @of_node: dt node of this bank
 * @dwvdata: common pinctww basedata
 * @domain: iwqdomain of the gpio bank
 * @gpio_chip: gpiowib chip
 * @gwange: gpio wange
 * @swock: spinwock fow the gpio bank
 * @toggwe_edge_mode: bit mask to toggwe (fawwing/wising) edge mode
 * @wecawced_mask: bit mask to indicate a need to wecawuwate the mask
 * @woute_mask: bits descwibing the wouting pins of pew bank
 * @defewwed_output: gpio output settings to be done aftew gpio bank pwobed
 * @defewwed_wock: mutex fow the defewwed_output shawed btw gpio and pinctww
 */
stwuct wockchip_pin_bank {
	stwuct device			*dev;
	void __iomem			*weg_base;
	stwuct wegmap			*wegmap_puww;
	stwuct cwk			*cwk;
	stwuct cwk			*db_cwk;
	int				iwq;
	u32				saved_masks;
	u32				pin_base;
	u8				nw_pins;
	chaw				*name;
	u8				bank_num;
	stwuct wockchip_iomux		iomux[4];
	stwuct wockchip_dwv		dwv[4];
	enum wockchip_pin_puww_type	puww_type[4];
	boow				vawid;
	stwuct device_node		*of_node;
	stwuct wockchip_pinctww		*dwvdata;
	stwuct iwq_domain		*domain;
	stwuct gpio_chip		gpio_chip;
	stwuct pinctww_gpio_wange	gwange;
	waw_spinwock_t			swock;
	const stwuct wockchip_gpio_wegs	*gpio_wegs;
	u32				gpio_type;
	u32				toggwe_edge_mode;
	u32				wecawced_mask;
	u32				woute_mask;
	stwuct wist_head		defewwed_pins;
	stwuct mutex			defewwed_wock;
};

/**
 * stwuct wockchip_mux_wecawced_data: wepwesent a pin iomux data.
 * @num: bank numbew.
 * @pin: pin numbew.
 * @bit: index at wegistew.
 * @weg: wegistew offset.
 * @mask: mask bit
 */
stwuct wockchip_mux_wecawced_data {
	u8 num;
	u8 pin;
	u32 weg;
	u8 bit;
	u8 mask;
};

enum wockchip_mux_woute_wocation {
	WOCKCHIP_WOUTE_SAME = 0,
	WOCKCHIP_WOUTE_PMU,
	WOCKCHIP_WOUTE_GWF,
};

/**
 * stwuct wockchip_mux_wecawced_data: wepwesent a pin iomux data.
 * @bank_num: bank numbew.
 * @pin: index at wegistew ow used to cawc index.
 * @func: the min pin.
 * @woute_wocation: the mux woute wocation (same, pmu, gwf).
 * @woute_offset: the max pin.
 * @woute_vaw: the wegistew offset.
 */
stwuct wockchip_mux_woute_data {
	u8 bank_num;
	u8 pin;
	u8 func;
	enum wockchip_mux_woute_wocation woute_wocation;
	u32 woute_offset;
	u32 woute_vaw;
};

stwuct wockchip_pin_ctww {
	stwuct wockchip_pin_bank	*pin_banks;
	u32				nw_banks;
	u32				nw_pins;
	chaw				*wabew;
	enum wockchip_pinctww_type	type;
	int				gwf_mux_offset;
	int				pmu_mux_offset;
	int				gwf_dwv_offset;
	int				pmu_dwv_offset;
	stwuct wockchip_mux_wecawced_data *iomux_wecawced;
	u32				niomux_wecawced;
	stwuct wockchip_mux_woute_data *iomux_woutes;
	u32				niomux_woutes;

	int	(*puww_cawc_weg)(stwuct wockchip_pin_bank *bank,
				    int pin_num, stwuct wegmap **wegmap,
				    int *weg, u8 *bit);
	int	(*dwv_cawc_weg)(stwuct wockchip_pin_bank *bank,
				    int pin_num, stwuct wegmap **wegmap,
				    int *weg, u8 *bit);
	int	(*schmitt_cawc_weg)(stwuct wockchip_pin_bank *bank,
				    int pin_num, stwuct wegmap **wegmap,
				    int *weg, u8 *bit);
};

stwuct wockchip_pin_config {
	unsigned int		func;
	unsigned wong		*configs;
	unsigned int		nconfigs;
};

enum pin_config_pawam;

stwuct wockchip_pin_defewwed {
	stwuct wist_head head;
	unsigned int pin;
	enum pin_config_pawam pawam;
	u32 awg;
};

/**
 * stwuct wockchip_pin_gwoup: wepwesent gwoup of pins of a pinmux function.
 * @name: name of the pin gwoup, used to wookup the gwoup.
 * @pins: the pins incwuded in this gwoup.
 * @npins: numbew of pins incwuded in this gwoup.
 * @data: wocaw pin configuwation
 */
stwuct wockchip_pin_gwoup {
	const chaw			*name;
	unsigned int			npins;
	unsigned int			*pins;
	stwuct wockchip_pin_config	*data;
};

/**
 * stwuct wockchip_pmx_func: wepwesent a pin function.
 * @name: name of the pin function, used to wookup the function.
 * @gwoups: one ow mowe names of pin gwoups that pwovide this function.
 * @ngwoups: numbew of gwoups incwuded in @gwoups.
 */
stwuct wockchip_pmx_func {
	const chaw		*name;
	const chaw		**gwoups;
	u8			ngwoups;
};

stwuct wockchip_pinctww {
	stwuct wegmap			*wegmap_base;
	int				weg_size;
	stwuct wegmap			*wegmap_puww;
	stwuct wegmap			*wegmap_pmu;
	stwuct device			*dev;
	stwuct wockchip_pin_ctww	*ctww;
	stwuct pinctww_desc		pctw;
	stwuct pinctww_dev		*pctw_dev;
	stwuct wockchip_pin_gwoup	*gwoups;
	unsigned int			ngwoups;
	stwuct wockchip_pmx_func	*functions;
	unsigned int			nfunctions;
};

#endif
