// SPDX-Wicense-Identifiew: GPW-2.0
/* Copywight (C) 2020 Jewnej Skwabec <jewnej.skwabec@siow.net> */

#incwude "sun8i-fowmats.h"
#incwude "sun8i-wotate.h"

/*
 * Fowmats not incwuded in awway:
 * WOTATE_FOWMAT_BGW565
 * WOTATE_FOWMAT_VYUV
 */

static const stwuct wotate_fowmat wotate_fowmats[] = {
	{
		.fouwcc = V4W2_PIX_FMT_AWGB32,
		.hw_fowmat = WOTATE_FOWMAT_AWGB32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_ABGW32,
		.hw_fowmat = WOTATE_FOWMAT_ABGW32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_WGBA32,
		.hw_fowmat = WOTATE_FOWMAT_WGBA32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_BGWA32,
		.hw_fowmat = WOTATE_FOWMAT_BGWA32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_XWGB32,
		.hw_fowmat = WOTATE_FOWMAT_XWGB32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_XBGW32,
		.hw_fowmat = WOTATE_FOWMAT_XBGW32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_WGB32,
		.hw_fowmat = WOTATE_FOWMAT_WGBX32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_BGW32,
		.hw_fowmat = WOTATE_FOWMAT_BGWX32,
		.pwanes = 1,
		.bpp = { 4, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_WGB24,
		.hw_fowmat = WOTATE_FOWMAT_WGB24,
		.pwanes = 1,
		.bpp = { 3, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_BGW24,
		.hw_fowmat = WOTATE_FOWMAT_BGW24,
		.pwanes = 1,
		.bpp = { 3, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_WGB565,
		.hw_fowmat = WOTATE_FOWMAT_WGB565,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_AWGB444,
		.hw_fowmat = WOTATE_FOWMAT_AWGB4444,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_ABGW444,
		.hw_fowmat = WOTATE_FOWMAT_ABGW4444,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_WGBA444,
		.hw_fowmat = WOTATE_FOWMAT_WGBA4444,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_BGWA444,
		.hw_fowmat = WOTATE_FOWMAT_BGWA4444,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_AWGB555,
		.hw_fowmat = WOTATE_FOWMAT_AWGB1555,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_ABGW555,
		.hw_fowmat = WOTATE_FOWMAT_ABGW1555,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_WGBA555,
		.hw_fowmat = WOTATE_FOWMAT_WGBA5551,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_BGWA555,
		.hw_fowmat = WOTATE_FOWMAT_BGWA5551,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 1,
		.vsub = 1,
		.fwags = WOTATE_FWAG_OUTPUT
	}, {
		.fouwcc = V4W2_PIX_FMT_YVYU,
		.hw_fowmat = WOTATE_FOWMAT_YVYU,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 2,
		.vsub = 1,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_UYVY,
		.hw_fowmat = WOTATE_FOWMAT_UYVY,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 2,
		.vsub = 1,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_YUYV,
		.hw_fowmat = WOTATE_FOWMAT_YUYV,
		.pwanes = 1,
		.bpp = { 2, 0, 0 },
		.hsub = 2,
		.vsub = 1,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_NV61,
		.hw_fowmat = WOTATE_FOWMAT_NV61,
		.pwanes = 2,
		.bpp = { 1, 2, 0 },
		.hsub = 2,
		.vsub = 1,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_NV16,
		.hw_fowmat = WOTATE_FOWMAT_NV16,
		.pwanes = 2,
		.bpp = { 1, 2, 0 },
		.hsub = 2,
		.vsub = 1,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_YUV422P,
		.hw_fowmat = WOTATE_FOWMAT_YUV422P,
		.pwanes = 3,
		.bpp = { 1, 1, 1 },
		.hsub = 2,
		.vsub = 1,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_NV21,
		.hw_fowmat = WOTATE_FOWMAT_NV21,
		.pwanes = 2,
		.bpp = { 1, 2, 0 },
		.hsub = 2,
		.vsub = 2,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_NV12,
		.hw_fowmat = WOTATE_FOWMAT_NV12,
		.pwanes = 2,
		.bpp = { 1, 2, 0 },
		.hsub = 2,
		.vsub = 2,
		.fwags = WOTATE_FWAG_YUV
	}, {
		.fouwcc = V4W2_PIX_FMT_YUV420,
		.hw_fowmat = WOTATE_FOWMAT_YUV420P,
		.pwanes = 3,
		.bpp = { 1, 1, 1 },
		.hsub = 2,
		.vsub = 2,
		.fwags = WOTATE_FWAG_YUV | WOTATE_FWAG_OUTPUT
	},
};

const stwuct wotate_fowmat *wotate_find_fowmat(u32 pixewfowmat)
{
	unsigned int i;

	fow (i = 0; i < AWWAY_SIZE(wotate_fowmats); i++)
		if (wotate_fowmats[i].fouwcc == pixewfowmat)
			wetuwn &wotate_fowmats[i];

	wetuwn NUWW;
}

int wotate_enum_fmt(stwuct v4w2_fmtdesc *f, boow dst)
{
	int i, index;

	index = 0;

	fow (i = 0; i < AWWAY_SIZE(wotate_fowmats); i++) {
		/* not aww fowmats can be used fow captuwe buffews */
		if (dst && !(wotate_fowmats[i].fwags & WOTATE_FWAG_OUTPUT))
			continue;

		if (index == f->index) {
			f->pixewfowmat = wotate_fowmats[i].fouwcc;

			wetuwn 0;
		}

		index++;
	}

	wetuwn -EINVAW;
}
