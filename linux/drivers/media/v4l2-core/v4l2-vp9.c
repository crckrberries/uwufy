// SPDX-Wicense-Identifiew: GPW-2.0
/*
 * V4W2 VP9 hewpews.
 *
 * Copywight (C) 2021 Cowwabowa, Wtd.
 *
 * Authow: Andwzej Pietwasiewicz <andwzej.p@cowwabowa.com>
 */

#incwude <winux/moduwe.h>

#incwude <media/v4w2-vp9.h>

const u8 v4w2_vp9_kf_y_mode_pwob[10][10][9] = {
	{
		/* above = dc */
		{ 137,  30,  42, 148, 151, 207,  70,  52,  91 }, /*weft = dc  */
		{  92,  45, 102, 136, 116, 180,  74,  90, 100 }, /*weft = v   */
		{  73,  32,  19, 187, 222, 215,  46,  34, 100 }, /*weft = h   */
		{  91,  30,  32, 116, 121, 186,  93,  86,  94 }, /*weft = d45 */
		{  72,  35,  36, 149,  68, 206,  68,  63, 105 }, /*weft = d135*/
		{  73,  31,  28, 138,  57, 124,  55, 122, 151 }, /*weft = d117*/
		{  67,  23,  21, 140, 126, 197,  40,  37, 171 }, /*weft = d153*/
		{  86,  27,  28, 128, 154, 212,  45,  43,  53 }, /*weft = d207*/
		{  74,  32,  27, 107,  86, 160,  63, 134, 102 }, /*weft = d63 */
		{  59,  67,  44, 140, 161, 202,  78,  67, 119 }, /*weft = tm  */
	}, {  /* above = v */
		{  63,  36, 126, 146, 123, 158,  60,  90,  96 }, /*weft = dc  */
		{  43,  46, 168, 134, 107, 128,  69, 142,  92 }, /*weft = v   */
		{  44,  29,  68, 159, 201, 177,  50,  57,  77 }, /*weft = h   */
		{  58,  38,  76, 114,  97, 172,  78, 133,  92 }, /*weft = d45 */
		{  46,  41,  76, 140,  63, 184,  69, 112,  57 }, /*weft = d135*/
		{  38,  32,  85, 140,  46, 112,  54, 151, 133 }, /*weft = d117*/
		{  39,  27,  61, 131, 110, 175,  44,  75, 136 }, /*weft = d153*/
		{  52,  30,  74, 113, 130, 175,  51,  64,  58 }, /*weft = d207*/
		{  47,  35,  80, 100,  74, 143,  64, 163,  74 }, /*weft = d63 */
		{  36,  61, 116, 114, 128, 162,  80, 125,  82 }, /*weft = tm  */
	}, {  /* above = h */
		{  82,  26,  26, 171, 208, 204,  44,  32, 105 }, /*weft = dc  */
		{  55,  44,  68, 166, 179, 192,  57,  57, 108 }, /*weft = v   */
		{  42,  26,  11, 199, 241, 228,  23,  15,  85 }, /*weft = h   */
		{  68,  42,  19, 131, 160, 199,  55,  52,  83 }, /*weft = d45 */
		{  58,  50,  25, 139, 115, 232,  39,  52, 118 }, /*weft = d135*/
		{  50,  35,  33, 153, 104, 162,  64,  59, 131 }, /*weft = d117*/
		{  44,  24,  16, 150, 177, 202,  33,  19, 156 }, /*weft = d153*/
		{  55,  27,  12, 153, 203, 218,  26,  27,  49 }, /*weft = d207*/
		{  53,  49,  21, 110, 116, 168,  59,  80,  76 }, /*weft = d63 */
		{  38,  72,  19, 168, 203, 212,  50,  50, 107 }, /*weft = tm  */
	}, {  /* above = d45 */
		{ 103,  26,  36, 129, 132, 201,  83,  80,  93 }, /*weft = dc  */
		{  59,  38,  83, 112, 103, 162,  98, 136,  90 }, /*weft = v   */
		{  62,  30,  23, 158, 200, 207,  59,  57,  50 }, /*weft = h   */
		{  67,  30,  29,  84,  86, 191, 102,  91,  59 }, /*weft = d45 */
		{  60,  32,  33, 112,  71, 220,  64,  89, 104 }, /*weft = d135*/
		{  53,  26,  34, 130,  56, 149,  84, 120, 103 }, /*weft = d117*/
		{  53,  21,  23, 133, 109, 210,  56,  77, 172 }, /*weft = d153*/
		{  77,  19,  29, 112, 142, 228,  55,  66,  36 }, /*weft = d207*/
		{  61,  29,  29,  93,  97, 165,  83, 175, 162 }, /*weft = d63 */
		{  47,  47,  43, 114, 137, 181, 100,  99,  95 }, /*weft = tm  */
	}, {  /* above = d135 */
		{  69,  23,  29, 128,  83, 199,  46,  44, 101 }, /*weft = dc  */
		{  53,  40,  55, 139,  69, 183,  61,  80, 110 }, /*weft = v   */
		{  40,  29,  19, 161, 180, 207,  43,  24,  91 }, /*weft = h   */
		{  60,  34,  19, 105,  61, 198,  53,  64,  89 }, /*weft = d45 */
		{  52,  31,  22, 158,  40, 209,  58,  62,  89 }, /*weft = d135*/
		{  44,  31,  29, 147,  46, 158,  56, 102, 198 }, /*weft = d117*/
		{  35,  19,  12, 135,  87, 209,  41,  45, 167 }, /*weft = d153*/
		{  55,  25,  21, 118,  95, 215,  38,  39,  66 }, /*weft = d207*/
		{  51,  38,  25, 113,  58, 164,  70,  93,  97 }, /*weft = d63 */
		{  47,  54,  34, 146, 108, 203,  72, 103, 151 }, /*weft = tm  */
	}, {  /* above = d117 */
		{  64,  19,  37, 156,  66, 138,  49,  95, 133 }, /*weft = dc  */
		{  46,  27,  80, 150,  55, 124,  55, 121, 135 }, /*weft = v   */
		{  36,  23,  27, 165, 149, 166,  54,  64, 118 }, /*weft = h   */
		{  53,  21,  36, 131,  63, 163,  60, 109,  81 }, /*weft = d45 */
		{  40,  26,  35, 154,  40, 185,  51,  97, 123 }, /*weft = d135*/
		{  35,  19,  34, 179,  19,  97,  48, 129, 124 }, /*weft = d117*/
		{  36,  20,  26, 136,  62, 164,  33,  77, 154 }, /*weft = d153*/
		{  45,  18,  32, 130,  90, 157,  40,  79,  91 }, /*weft = d207*/
		{  45,  26,  28, 129,  45, 129,  49, 147, 123 }, /*weft = d63 */
		{  38,  44,  51, 136,  74, 162,  57,  97, 121 }, /*weft = tm  */
	}, {  /* above = d153 */
		{  75,  17,  22, 136, 138, 185,  32,  34, 166 }, /*weft = dc  */
		{  56,  39,  58, 133, 117, 173,  48,  53, 187 }, /*weft = v   */
		{  35,  21,  12, 161, 212, 207,  20,  23, 145 }, /*weft = h   */
		{  56,  29,  19, 117, 109, 181,  55,  68, 112 }, /*weft = d45 */
		{  47,  29,  17, 153,  64, 220,  59,  51, 114 }, /*weft = d135*/
		{  46,  16,  24, 136,  76, 147,  41,  64, 172 }, /*weft = d117*/
		{  34,  17,  11, 108, 152, 187,  13,  15, 209 }, /*weft = d153*/
		{  51,  24,  14, 115, 133, 209,  32,  26, 104 }, /*weft = d207*/
		{  55,  30,  18, 122,  79, 179,  44,  88, 116 }, /*weft = d63 */
		{  37,  49,  25, 129, 168, 164,  41,  54, 148 }, /*weft = tm  */
	}, {  /* above = d207 */
		{  82,  22,  32, 127, 143, 213,  39,  41,  70 }, /*weft = dc  */
		{  62,  44,  61, 123, 105, 189,  48,  57,  64 }, /*weft = v   */
		{  47,  25,  17, 175, 222, 220,  24,  30,  86 }, /*weft = h   */
		{  68,  36,  17, 106, 102, 206,  59,  74,  74 }, /*weft = d45 */
		{  57,  39,  23, 151,  68, 216,  55,  63,  58 }, /*weft = d135*/
		{  49,  30,  35, 141,  70, 168,  82,  40, 115 }, /*weft = d117*/
		{  51,  25,  15, 136, 129, 202,  38,  35, 139 }, /*weft = d153*/
		{  68,  26,  16, 111, 141, 215,  29,  28,  28 }, /*weft = d207*/
		{  59,  39,  19, 114,  75, 180,  77, 104,  42 }, /*weft = d63 */
		{  40,  61,  26, 126, 152, 206,  61,  59,  93 }, /*weft = tm  */
	}, {  /* above = d63 */
		{  78,  23,  39, 111, 117, 170,  74, 124,  94 }, /*weft = dc  */
		{  48,  34,  86, 101,  92, 146,  78, 179, 134 }, /*weft = v   */
		{  47,  22,  24, 138, 187, 178,  68,  69,  59 }, /*weft = h   */
		{  56,  25,  33, 105, 112, 187,  95, 177, 129 }, /*weft = d45 */
		{  48,  31,  27, 114,  63, 183,  82, 116,  56 }, /*weft = d135*/
		{  43,  28,  37, 121,  63, 123,  61, 192, 169 }, /*weft = d117*/
		{  42,  17,  24, 109,  97, 177,  56,  76, 122 }, /*weft = d153*/
		{  58,  18,  28, 105, 139, 182,  70,  92,  63 }, /*weft = d207*/
		{  46,  23,  32,  74,  86, 150,  67, 183,  88 }, /*weft = d63 */
		{  36,  38,  48,  92, 122, 165,  88, 137,  91 }, /*weft = tm  */
	}, {  /* above = tm */
		{  65,  70,  60, 155, 159, 199,  61,  60,  81 }, /*weft = dc  */
		{  44,  78, 115, 132, 119, 173,  71, 112,  93 }, /*weft = v   */
		{  39,  38,  21, 184, 227, 206,  42,  32,  64 }, /*weft = h   */
		{  58,  47,  36, 124, 137, 193,  80,  82,  78 }, /*weft = d45 */
		{  49,  50,  35, 144,  95, 205,  63,  78,  59 }, /*weft = d135*/
		{  41,  53,  52, 148,  71, 142,  65, 128,  51 }, /*weft = d117*/
		{  40,  36,  28, 143, 143, 202,  40,  55, 137 }, /*weft = d153*/
		{  52,  34,  29, 129, 183, 227,  42,  35,  43 }, /*weft = d207*/
		{  42,  44,  44, 104, 105, 164,  64, 130,  80 }, /*weft = d63 */
		{  43,  81,  53, 140, 169, 204,  68,  84,  72 }, /*weft = tm  */
	}
};
EXPOWT_SYMBOW_GPW(v4w2_vp9_kf_y_mode_pwob);

const u8 v4w2_vp9_kf_pawtition_pwobs[16][3] = {
	/* 8x8 -> 4x4 */
	{ 158,  97,  94 },	/* a/w both not spwit   */
	{  93,  24,  99 },	/* a spwit, w not spwit */
	{  85, 119,  44 },	/* w spwit, a not spwit */
	{  62,  59,  67 },	/* a/w both spwit       */
	/* 16x16 -> 8x8 */
	{ 149,  53,  53 },	/* a/w both not spwit   */
	{  94,  20,  48 },	/* a spwit, w not spwit */
	{  83,  53,  24 },	/* w spwit, a not spwit */
	{  52,  18,  18 },	/* a/w both spwit       */
	/* 32x32 -> 16x16 */
	{ 150,  40,  39 },	/* a/w both not spwit   */
	{  78,  12,  26 },	/* a spwit, w not spwit */
	{  67,  33,  11 },	/* w spwit, a not spwit */
	{  24,   7,   5 },	/* a/w both spwit       */
	/* 64x64 -> 32x32 */
	{ 174,  35,  49 },	/* a/w both not spwit   */
	{  68,  11,  27 },	/* a spwit, w not spwit */
	{  57,  15,   9 },	/* w spwit, a not spwit */
	{  12,   3,   3 },	/* a/w both spwit       */
};
EXPOWT_SYMBOW_GPW(v4w2_vp9_kf_pawtition_pwobs);

const u8 v4w2_vp9_kf_uv_mode_pwob[10][9] = {
	{ 144,  11,  54, 157, 195, 130,  46,  58, 108 },  /* y = dc   */
	{ 118,  15, 123, 148, 131, 101,  44,  93, 131 },  /* y = v    */
	{ 113,  12,  23, 188, 226, 142,  26,  32, 125 },  /* y = h    */
	{ 120,  11,  50, 123, 163, 135,  64,  77, 103 },  /* y = d45  */
	{ 113,   9,  36, 155, 111, 157,  32,  44, 161 },  /* y = d135 */
	{ 116,   9,  55, 176,  76,  96,  37,  61, 149 },  /* y = d117 */
	{ 115,   9,  28, 141, 161, 167,  21,  25, 193 },  /* y = d153 */
	{ 120,  12,  32, 145, 195, 142,  32,  38,  86 },  /* y = d207 */
	{ 116,  12,  64, 120, 140, 125,  49, 115, 121 },  /* y = d63  */
	{ 102,  19,  66, 162, 182, 122,  35,  59, 128 }   /* y = tm   */
};
EXPOWT_SYMBOW_GPW(v4w2_vp9_kf_uv_mode_pwob);

const stwuct v4w2_vp9_fwame_context v4w2_vp9_defauwt_pwobs = {
	.tx8 = {
		{ 100 },
		{  66 },
	},
	.tx16 = {
		{ 20, 152 },
		{ 15, 101 },
	},
	.tx32 = {
		{ 3, 136, 37 },
		{ 5,  52, 13 },
	},
	.coef = {
		{ /* tx = 4x4 */
			{ /* bwock Type 0 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{ 195,  29, 183 },
						{  84,  49, 136 },
						{   8,  42,  71 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  31, 107, 169 },
						{  35,  99, 159 },
						{  17,  82, 140 },
						{   8,  66, 114 },
						{   2,  44,  76 },
						{   1,  19,  32 },
					},
					{ /* Coeff Band 2 */
						{  40, 132, 201 },
						{  29, 114, 187 },
						{  13,  91, 157 },
						{   7,  75, 127 },
						{   3,  58,  95 },
						{   1,  28,  47 },
					},
					{ /* Coeff Band 3 */
						{  69, 142, 221 },
						{  42, 122, 201 },
						{  15,  91, 159 },
						{   6,  67, 121 },
						{   1,  42,  77 },
						{   1,  17,  31 },
					},
					{ /* Coeff Band 4 */
						{ 102, 148, 228 },
						{  67, 117, 204 },
						{  17,  82, 154 },
						{   6,  59, 114 },
						{   2,  39,  75 },
						{   1,  15,  29 },
					},
					{ /* Coeff Band 5 */
						{ 156,  57, 233 },
						{ 119,  57, 212 },
						{  58,  48, 163 },
						{  29,  40, 124 },
						{  12,  30,  81 },
						{   3,  12,  31 }
					},
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{ 191, 107, 226 },
						{ 124, 117, 204 },
						{  25,  99, 155 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  29, 148, 210 },
						{  37, 126, 194 },
						{   8,  93, 157 },
						{   2,  68, 118 },
						{   1,  39,  69 },
						{   1,  17,  33 },
					},
					{ /* Coeff Band 2 */
						{  41, 151, 213 },
						{  27, 123, 193 },
						{   3,  82, 144 },
						{   1,  58, 105 },
						{   1,  32,  60 },
						{   1,  13,  26 },
					},
					{ /* Coeff Band 3 */
						{  59, 159, 220 },
						{  23, 126, 198 },
						{   4,  88, 151 },
						{   1,  66, 114 },
						{   1,  38,  71 },
						{   1,  18,  34 },
					},
					{ /* Coeff Band 4 */
						{ 114, 136, 232 },
						{  51, 114, 207 },
						{  11,  83, 155 },
						{   3,  56, 105 },
						{   1,  33,  65 },
						{   1,  17,  34 },
					},
					{ /* Coeff Band 5 */
						{ 149,  65, 234 },
						{ 121,  57, 215 },
						{  61,  49, 166 },
						{  28,  36, 114 },
						{  12,  25,  76 },
						{   3,  16,  42 },
					},
				},
			},
			{ /* bwock Type 1 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{ 214,  49, 220 },
						{ 132,  63, 188 },
						{  42,  65, 137 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  85, 137, 221 },
						{ 104, 131, 216 },
						{  49, 111, 192 },
						{  21,  87, 155 },
						{   2,  49,  87 },
						{   1,  16,  28 },
					},
					{ /* Coeff Band 2 */
						{  89, 163, 230 },
						{  90, 137, 220 },
						{  29, 100, 183 },
						{  10,  70, 135 },
						{   2,  42,  81 },
						{   1,  17,  33 },
					},
					{ /* Coeff Band 3 */
						{ 108, 167, 237 },
						{  55, 133, 222 },
						{  15,  97, 179 },
						{   4,  72, 135 },
						{   1,  45,  85 },
						{   1,  19,  38 },
					},
					{ /* Coeff Band 4 */
						{ 124, 146, 240 },
						{  66, 124, 224 },
						{  17,  88, 175 },
						{   4,  58, 122 },
						{   1,  36,  75 },
						{   1,  18,  37 },
					},
					{ /* Coeff Band 5 */
						{ 141,  79, 241 },
						{ 126,  70, 227 },
						{  66,  58, 182 },
						{  30,  44, 136 },
						{  12,  34,  96 },
						{   2,  20,  47 },
					},
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{ 229,  99, 249 },
						{ 143, 111, 235 },
						{  46, 109, 192 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  82, 158, 236 },
						{  94, 146, 224 },
						{  25, 117, 191 },
						{   9,  87, 149 },
						{   3,  56,  99 },
						{   1,  33,  57 },
					},
					{ /* Coeff Band 2 */
						{  83, 167, 237 },
						{  68, 145, 222 },
						{  10, 103, 177 },
						{   2,  72, 131 },
						{   1,  41,  79 },
						{   1,  20,  39 },
					},
					{ /* Coeff Band 3 */
						{  99, 167, 239 },
						{  47, 141, 224 },
						{  10, 104, 178 },
						{   2,  73, 133 },
						{   1,  44,  85 },
						{   1,  22,  47 },
					},
					{ /* Coeff Band 4 */
						{ 127, 145, 243 },
						{  71, 129, 228 },
						{  17,  93, 177 },
						{   3,  61, 124 },
						{   1,  41,  84 },
						{   1,  21,  52 },
					},
					{ /* Coeff Band 5 */
						{ 157,  78, 244 },
						{ 140,  72, 231 },
						{  69,  58, 184 },
						{  31,  44, 137 },
						{  14,  38, 105 },
						{   8,  23,  61 },
					},
				},
			},
		},
		{ /* tx = 8x8 */
			{ /* bwock Type 0 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{ 125,  34, 187 },
						{  52,  41, 133 },
						{   6,  31,  56 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  37, 109, 153 },
						{  51, 102, 147 },
						{  23,  87, 128 },
						{   8,  67, 101 },
						{   1,  41,  63 },
						{   1,  19,  29 },
					},
					{ /* Coeff Band 2 */
						{  31, 154, 185 },
						{  17, 127, 175 },
						{   6,  96, 145 },
						{   2,  73, 114 },
						{   1,  51,  82 },
						{   1,  28,  45 },
					},
					{ /* Coeff Band 3 */
						{  23, 163, 200 },
						{  10, 131, 185 },
						{   2,  93, 148 },
						{   1,  67, 111 },
						{   1,  41,  69 },
						{   1,  14,  24 },
					},
					{ /* Coeff Band 4 */
						{  29, 176, 217 },
						{  12, 145, 201 },
						{   3, 101, 156 },
						{   1,  69, 111 },
						{   1,  39,  63 },
						{   1,  14,  23 },
					},
					{ /* Coeff Band 5 */
						{  57, 192, 233 },
						{  25, 154, 215 },
						{   6, 109, 167 },
						{   3,  78, 118 },
						{   1,  48,  69 },
						{   1,  21,  29 },
					},
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{ 202, 105, 245 },
						{ 108, 106, 216 },
						{  18,  90, 144 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  33, 172, 219 },
						{  64, 149, 206 },
						{  14, 117, 177 },
						{   5,  90, 141 },
						{   2,  61,  95 },
						{   1,  37,  57 },
					},
					{ /* Coeff Band 2 */
						{  33, 179, 220 },
						{  11, 140, 198 },
						{   1,  89, 148 },
						{   1,  60, 104 },
						{   1,  33,  57 },
						{   1,  12,  21 },
					},
					{ /* Coeff Band 3 */
						{  30, 181, 221 },
						{   8, 141, 198 },
						{   1,  87, 145 },
						{   1,  58, 100 },
						{   1,  31,  55 },
						{   1,  12,  20 },
					},
					{ /* Coeff Band 4 */
						{  32, 186, 224 },
						{   7, 142, 198 },
						{   1,  86, 143 },
						{   1,  58, 100 },
						{   1,  31,  55 },
						{   1,  12,  22 },
					},
					{ /* Coeff Band 5 */
						{  57, 192, 227 },
						{  20, 143, 204 },
						{   3,  96, 154 },
						{   1,  68, 112 },
						{   1,  42,  69 },
						{   1,  19,  32 },
					},
				},
			},
			{ /* bwock Type 1 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{ 212,  35, 215 },
						{ 113,  47, 169 },
						{  29,  48, 105 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  74, 129, 203 },
						{ 106, 120, 203 },
						{  49, 107, 178 },
						{  19,  84, 144 },
						{   4,  50,  84 },
						{   1,  15,  25 },
					},
					{ /* Coeff Band 2 */
						{  71, 172, 217 },
						{  44, 141, 209 },
						{  15, 102, 173 },
						{   6,  76, 133 },
						{   2,  51,  89 },
						{   1,  24,  42 },
					},
					{ /* Coeff Band 3 */
						{  64, 185, 231 },
						{  31, 148, 216 },
						{   8, 103, 175 },
						{   3,  74, 131 },
						{   1,  46,  81 },
						{   1,  18,  30 },
					},
					{ /* Coeff Band 4 */
						{  65, 196, 235 },
						{  25, 157, 221 },
						{   5, 105, 174 },
						{   1,  67, 120 },
						{   1,  38,  69 },
						{   1,  15,  30 },
					},
					{ /* Coeff Band 5 */
						{  65, 204, 238 },
						{  30, 156, 224 },
						{   7, 107, 177 },
						{   2,  70, 124 },
						{   1,  42,  73 },
						{   1,  18,  34 },
					},
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{ 225,  86, 251 },
						{ 144, 104, 235 },
						{  42,  99, 181 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  85, 175, 239 },
						{ 112, 165, 229 },
						{  29, 136, 200 },
						{  12, 103, 162 },
						{   6,  77, 123 },
						{   2,  53,  84 },
					},
					{ /* Coeff Band 2 */
						{  75, 183, 239 },
						{  30, 155, 221 },
						{   3, 106, 171 },
						{   1,  74, 128 },
						{   1,  44,  76 },
						{   1,  17,  28 },
					},
					{ /* Coeff Band 3 */
						{  73, 185, 240 },
						{  27, 159, 222 },
						{   2, 107, 172 },
						{   1,  75, 127 },
						{   1,  42,  73 },
						{   1,  17,  29 },
					},
					{ /* Coeff Band 4 */
						{  62, 190, 238 },
						{  21, 159, 222 },
						{   2, 107, 172 },
						{   1,  72, 122 },
						{   1,  40,  71 },
						{   1,  18,  32 },
					},
					{ /* Coeff Band 5 */
						{  61, 199, 240 },
						{  27, 161, 226 },
						{   4, 113, 180 },
						{   1,  76, 129 },
						{   1,  46,  80 },
						{   1,  23,  41 },
					},
				},
			},
		},
		{ /* tx = 16x16 */
			{ /* bwock Type 0 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{   7,  27, 153 },
						{   5,  30,  95 },
						{   1,  16,  30 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  50,  75, 127 },
						{  57,  75, 124 },
						{  27,  67, 108 },
						{  10,  54,  86 },
						{   1,  33,  52 },
						{   1,  12,  18 },
					},
					{ /* Coeff Band 2 */
						{  43, 125, 151 },
						{  26, 108, 148 },
						{   7,  83, 122 },
						{   2,  59,  89 },
						{   1,  38,  60 },
						{   1,  17,  27 },
					},
					{ /* Coeff Band 3 */
						{  23, 144, 163 },
						{  13, 112, 154 },
						{   2,  75, 117 },
						{   1,  50,  81 },
						{   1,  31,  51 },
						{   1,  14,  23 },
					},
					{ /* Coeff Band 4 */
						{  18, 162, 185 },
						{   6, 123, 171 },
						{   1,  78, 125 },
						{   1,  51,  86 },
						{   1,  31,  54 },
						{   1,  14,  23 },
					},
					{ /* Coeff Band 5 */
						{  15, 199, 227 },
						{   3, 150, 204 },
						{   1,  91, 146 },
						{   1,  55,  95 },
						{   1,  30,  53 },
						{   1,  11,  20 },
					}
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{  19,  55, 240 },
						{  19,  59, 196 },
						{   3,  52, 105 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  41, 166, 207 },
						{ 104, 153, 199 },
						{  31, 123, 181 },
						{  14, 101, 152 },
						{   5,  72, 106 },
						{   1,  36,  52 },
					},
					{ /* Coeff Band 2 */
						{  35, 176, 211 },
						{  12, 131, 190 },
						{   2,  88, 144 },
						{   1,  60, 101 },
						{   1,  36,  60 },
						{   1,  16,  28 },
					},
					{ /* Coeff Band 3 */
						{  28, 183, 213 },
						{   8, 134, 191 },
						{   1,  86, 142 },
						{   1,  56,  96 },
						{   1,  30,  53 },
						{   1,  12,  20 },
					},
					{ /* Coeff Band 4 */
						{  20, 190, 215 },
						{   4, 135, 192 },
						{   1,  84, 139 },
						{   1,  53,  91 },
						{   1,  28,  49 },
						{   1,  11,  20 },
					},
					{ /* Coeff Band 5 */
						{  13, 196, 216 },
						{   2, 137, 192 },
						{   1,  86, 143 },
						{   1,  57,  99 },
						{   1,  32,  56 },
						{   1,  13,  24 },
					},
				},
			},
			{ /* bwock Type 1 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{ 211,  29, 217 },
						{  96,  47, 156 },
						{  22,  43,  87 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  78, 120, 193 },
						{ 111, 116, 186 },
						{  46, 102, 164 },
						{  15,  80, 128 },
						{   2,  49,  76 },
						{   1,  18,  28 },
					},
					{ /* Coeff Band 2 */
						{  71, 161, 203 },
						{  42, 132, 192 },
						{  10,  98, 150 },
						{   3,  69, 109 },
						{   1,  44,  70 },
						{   1,  18,  29 },
					},
					{ /* Coeff Band 3 */
						{  57, 186, 211 },
						{  30, 140, 196 },
						{   4,  93, 146 },
						{   1,  62, 102 },
						{   1,  38,  65 },
						{   1,  16,  27 },
					},
					{ /* Coeff Band 4 */
						{  47, 199, 217 },
						{  14, 145, 196 },
						{   1,  88, 142 },
						{   1,  57,  98 },
						{   1,  36,  62 },
						{   1,  15,  26 },
					},
					{ /* Coeff Band 5 */
						{  26, 219, 229 },
						{   5, 155, 207 },
						{   1,  94, 151 },
						{   1,  60, 104 },
						{   1,  36,  62 },
						{   1,  16,  28 },
					}
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{ 233,  29, 248 },
						{ 146,  47, 220 },
						{  43,  52, 140 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{ 100, 163, 232 },
						{ 179, 161, 222 },
						{  63, 142, 204 },
						{  37, 113, 174 },
						{  26,  89, 137 },
						{  18,  68,  97 },
					},
					{ /* Coeff Band 2 */
						{  85, 181, 230 },
						{  32, 146, 209 },
						{   7, 100, 164 },
						{   3,  71, 121 },
						{   1,  45,  77 },
						{   1,  18,  30 },
					},
					{ /* Coeff Band 3 */
						{  65, 187, 230 },
						{  20, 148, 207 },
						{   2,  97, 159 },
						{   1,  68, 116 },
						{   1,  40,  70 },
						{   1,  14,  29 },
					},
					{ /* Coeff Band 4 */
						{  40, 194, 227 },
						{   8, 147, 204 },
						{   1,  94, 155 },
						{   1,  65, 112 },
						{   1,  39,  66 },
						{   1,  14,  26 },
					},
					{ /* Coeff Band 5 */
						{  16, 208, 228 },
						{   3, 151, 207 },
						{   1,  98, 160 },
						{   1,  67, 117 },
						{   1,  41,  74 },
						{   1,  17,  31 },
					},
				},
			},
		},
		{ /* tx = 32x32 */
			{ /* bwock Type 0 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{  17,  38, 140 },
						{   7,  34,  80 },
						{   1,  17,  29 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  37,  75, 128 },
						{  41,  76, 128 },
						{  26,  66, 116 },
						{  12,  52,  94 },
						{   2,  32,  55 },
						{   1,  10,  16 },
					},
					{ /* Coeff Band 2 */
						{  50, 127, 154 },
						{  37, 109, 152 },
						{  16,  82, 121 },
						{   5,  59,  85 },
						{   1,  35,  54 },
						{   1,  13,  20 },
					},
					{ /* Coeff Band 3 */
						{  40, 142, 167 },
						{  17, 110, 157 },
						{   2,  71, 112 },
						{   1,  44,  72 },
						{   1,  27,  45 },
						{   1,  11,  17 },
					},
					{ /* Coeff Band 4 */
						{  30, 175, 188 },
						{   9, 124, 169 },
						{   1,  74, 116 },
						{   1,  48,  78 },
						{   1,  30,  49 },
						{   1,  11,  18 },
					},
					{ /* Coeff Band 5 */
						{  10, 222, 223 },
						{   2, 150, 194 },
						{   1,  83, 128 },
						{   1,  48,  79 },
						{   1,  27,  45 },
						{   1,  11,  17 },
					},
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{  36,  41, 235 },
						{  29,  36, 193 },
						{  10,  27, 111 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  85, 165, 222 },
						{ 177, 162, 215 },
						{ 110, 135, 195 },
						{  57, 113, 168 },
						{  23,  83, 120 },
						{  10,  49,  61 },
					},
					{ /* Coeff Band 2 */
						{  85, 190, 223 },
						{  36, 139, 200 },
						{   5,  90, 146 },
						{   1,  60, 103 },
						{   1,  38,  65 },
						{   1,  18,  30 },
					},
					{ /* Coeff Band 3 */
						{  72, 202, 223 },
						{  23, 141, 199 },
						{   2,  86, 140 },
						{   1,  56,  97 },
						{   1,  36,  61 },
						{   1,  16,  27 },
					},
					{ /* Coeff Band 4 */
						{  55, 218, 225 },
						{  13, 145, 200 },
						{   1,  86, 141 },
						{   1,  57,  99 },
						{   1,  35,  61 },
						{   1,  13,  22 },
					},
					{ /* Coeff Band 5 */
						{  15, 235, 212 },
						{   1, 132, 184 },
						{   1,  84, 139 },
						{   1,  57,  97 },
						{   1,  34,  56 },
						{   1,  14,  23 },
					},
				},
			},
			{ /* bwock Type 1 */
				{ /* Intwa */
					{ /* Coeff Band 0 */
						{ 181,  21, 201 },
						{  61,  37, 123 },
						{  10,  38,  71 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{  47, 106, 172 },
						{  95, 104, 173 },
						{  42,  93, 159 },
						{  18,  77, 131 },
						{   4,  50,  81 },
						{   1,  17,  23 },
					},
					{ /* Coeff Band 2 */
						{  62, 147, 199 },
						{  44, 130, 189 },
						{  28, 102, 154 },
						{  18,  75, 115 },
						{   2,  44,  65 },
						{   1,  12,  19 },
					},
					{ /* Coeff Band 3 */
						{  55, 153, 210 },
						{  24, 130, 194 },
						{   3,  93, 146 },
						{   1,  61,  97 },
						{   1,  31,  50 },
						{   1,  10,  16 },
					},
					{ /* Coeff Band 4 */
						{  49, 186, 223 },
						{  17, 148, 204 },
						{   1,  96, 142 },
						{   1,  53,  83 },
						{   1,  26,  44 },
						{   1,  11,  17 },
					},
					{ /* Coeff Band 5 */
						{  13, 217, 212 },
						{   2, 136, 180 },
						{   1,  78, 124 },
						{   1,  50,  83 },
						{   1,  29,  49 },
						{   1,  14,  23 },
					},
				},
				{ /* Intew */
					{ /* Coeff Band 0 */
						{ 197,  13, 247 },
						{  82,  17, 222 },
						{  25,  17, 162 },
						{   0,   0,   0 },
						{   0,   0,   0 },
						{   0,   0,   0 },
					},
					{ /* Coeff Band 1 */
						{ 126, 186, 247 },
						{ 234, 191, 243 },
						{ 176, 177, 234 },
						{ 104, 158, 220 },
						{  66, 128, 186 },
						{  55,  90, 137 },
					},
					{ /* Coeff Band 2 */
						{ 111, 197, 242 },
						{  46, 158, 219 },
						{   9, 104, 171 },
						{   2,  65, 125 },
						{   1,  44,  80 },
						{   1,  17,  91 },
					},
					{ /* Coeff Band 3 */
						{ 104, 208, 245 },
						{  39, 168, 224 },
						{   3, 109, 162 },
						{   1,  79, 124 },
						{   1,  50, 102 },
						{   1,  43, 102 },
					},
					{ /* Coeff Band 4 */
						{  84, 220, 246 },
						{  31, 177, 231 },
						{   2, 115, 180 },
						{   1,  79, 134 },
						{   1,  55,  77 },
						{   1,  60,  79 },
					},
					{ /* Coeff Band 5 */
						{  43, 243, 240 },
						{   8, 180, 217 },
						{   1, 115, 166 },
						{   1,  84, 121 },
						{   1,  51,  67 },
						{   1,  16,   6 },
					},
				},
			},
		},
	},

	.skip = { 192, 128, 64 },
	.intew_mode = {
		{  2, 173, 34 },
		{  7, 145, 85 },
		{  7, 166, 63 },
		{  7,  94, 66 },
		{  8,  64, 46 },
		{ 17,  81, 31 },
		{ 25,  29, 30 },
	},
	.intewp_fiwtew = {
		{ 235, 162 },
		{  36, 255 },
		{  34,   3 },
		{ 149, 144 },
	},
	.is_intew = { 9, 102, 187, 225 },
	.comp_mode = { 239, 183, 119, 96, 41 },
	.singwe_wef = {
		{  33,  16 },
		{  77,  74 },
		{ 142, 142 },
		{ 172, 170 },
		{ 238, 247 },
	},
	.comp_wef = { 50, 126, 123, 221, 226 },
	.y_mode = {
		{  65,  32, 18, 144, 162, 194, 41, 51, 98 },
		{ 132,  68, 18, 165, 217, 196, 45, 40, 78 },
		{ 173,  80, 19, 176, 240, 193, 64, 35, 46 },
		{ 221, 135, 38, 194, 248, 121, 96, 85, 29 },
	},
	.uv_mode = {
		{ 120,   7,  76, 176, 208, 126,  28,  54, 103 } /* y = dc */,
		{  48,  12, 154, 155, 139,  90,  34, 117, 119 } /* y = v */,
		{  67,   6,  25, 204, 243, 158,  13,  21,  96 } /* y = h */,
		{  97,   5,  44, 131, 176, 139,  48,  68,  97 } /* y = d45 */,
		{  83,   5,  42, 156, 111, 152,  26,  49, 152 } /* y = d135 */,
		{  80,   5,  58, 178,  74,  83,  33,  62, 145 } /* y = d117 */,
		{  86,   5,  32, 154, 192, 168,  14,  22, 163 } /* y = d153 */,
		{  85,   5,  32, 156, 216, 148,  19,  29,  73 } /* y = d207 */,
		{  77,   7,  64, 116, 132, 122,  37, 126, 120 } /* y = d63 */,
		{ 101,  21, 107, 181, 192, 103,  19,  67, 125 } /* y = tm */
	},
	.pawtition = {
		/* 8x8 -> 4x4 */
		{ 199, 122, 141 } /* a/w both not spwit */,
		{ 147,  63, 159 } /* a spwit, w not spwit */,
		{ 148, 133, 118 } /* w spwit, a not spwit */,
		{ 121, 104, 114 } /* a/w both spwit */,
		/* 16x16 -> 8x8 */
		{ 174,  73,  87 } /* a/w both not spwit */,
		{  92,  41,  83 } /* a spwit, w not spwit */,
		{  82,  99,  50 } /* w spwit, a not spwit */,
		{  53,  39,  39 } /* a/w both spwit */,
		/* 32x32 -> 16x16 */
		{ 177,  58,  59 } /* a/w both not spwit */,
		{  68,  26,  63 } /* a spwit, w not spwit */,
		{  52,  79,  25 } /* w spwit, a not spwit */,
		{  17,  14,  12 } /* a/w both spwit */,
		/* 64x64 -> 32x32 */
		{ 222,  34,  30 } /* a/w both not spwit */,
		{  72,  16,  44 } /* a spwit, w not spwit */,
		{  58,  32,  12 } /* w spwit, a not spwit */,
		{  10,   7,   6 } /* a/w both spwit */,
	},

	.mv = {
		.joint = { 32, 64, 96 },
		.sign = { 128, 128 },
		.cwasses = {
			{ 224, 144, 192, 168, 192, 176, 192, 198, 198, 245 },
			{ 216, 128, 176, 160, 176, 176, 192, 198, 198, 208 },
		},
		.cwass0_bit = { 216, 208 },
		.bits = {
			{ 136, 140, 148, 160, 176, 192, 224, 234, 234, 240},
			{ 136, 140, 148, 160, 176, 192, 224, 234, 234, 240},
		},
		.cwass0_fw = {
			{
				{ 128, 128, 64 },
				{  96, 112, 64 },
			},
			{
				{ 128, 128, 64 },
				{  96, 112, 64 },
			},
		},
		.fw = {
			{ 64, 96, 64 },
			{ 64, 96, 64 },
		},
		.cwass0_hp = { 160, 160 },
		.hp = { 128, 128 },
	},
};
EXPOWT_SYMBOW_GPW(v4w2_vp9_defauwt_pwobs);

static u32 fastdiv(u32 dividend, u16 divisow)
{
#define DIV_INV(d)	((u32)(((1UWW << 32) + ((d) - 1)) / (d)))
#define DIVS_INV(d0, d1, d2, d3, d4, d5, d6, d7, d8, d9)	\
	DIV_INV(d0), DIV_INV(d1), DIV_INV(d2), DIV_INV(d3),	\
	DIV_INV(d4), DIV_INV(d5), DIV_INV(d6), DIV_INV(d7),	\
	DIV_INV(d8), DIV_INV(d9)

	static const u32 inv[] = {
		DIV_INV(2), DIV_INV(3), DIV_INV(4), DIV_INV(5),
		DIV_INV(6), DIV_INV(7), DIV_INV(8), DIV_INV(9),
		DIVS_INV(10, 11, 12, 13, 14, 15, 16, 17, 18, 19),
		DIVS_INV(20, 21, 22, 23, 24, 25, 26, 27, 28, 29),
		DIVS_INV(30, 31, 32, 33, 34, 35, 36, 37, 38, 39),
		DIVS_INV(40, 41, 42, 43, 44, 45, 46, 47, 48, 49),
		DIVS_INV(50, 51, 52, 53, 54, 55, 56, 57, 58, 59),
		DIVS_INV(60, 61, 62, 63, 64, 65, 66, 67, 68, 69),
		DIVS_INV(70, 71, 72, 73, 74, 75, 76, 77, 78, 79),
		DIVS_INV(80, 81, 82, 83, 84, 85, 86, 87, 88, 89),
		DIVS_INV(90, 91, 92, 93, 94, 95, 96, 97, 98, 99),
		DIVS_INV(100, 101, 102, 103, 104, 105, 106, 107, 108, 109),
		DIVS_INV(110, 111, 112, 113, 114, 115, 116, 117, 118, 119),
		DIVS_INV(120, 121, 122, 123, 124, 125, 126, 127, 128, 129),
		DIVS_INV(130, 131, 132, 133, 134, 135, 136, 137, 138, 139),
		DIVS_INV(140, 141, 142, 143, 144, 145, 146, 147, 148, 149),
		DIVS_INV(150, 151, 152, 153, 154, 155, 156, 157, 158, 159),
		DIVS_INV(160, 161, 162, 163, 164, 165, 166, 167, 168, 169),
		DIVS_INV(170, 171, 172, 173, 174, 175, 176, 177, 178, 179),
		DIVS_INV(180, 181, 182, 183, 184, 185, 186, 187, 188, 189),
		DIVS_INV(190, 191, 192, 193, 194, 195, 196, 197, 198, 199),
		DIVS_INV(200, 201, 202, 203, 204, 205, 206, 207, 208, 209),
		DIVS_INV(210, 211, 212, 213, 214, 215, 216, 217, 218, 219),
		DIVS_INV(220, 221, 222, 223, 224, 225, 226, 227, 228, 229),
		DIVS_INV(230, 231, 232, 233, 234, 235, 236, 237, 238, 239),
		DIVS_INV(240, 241, 242, 243, 244, 245, 246, 247, 248, 249),
		DIV_INV(250), DIV_INV(251), DIV_INV(252), DIV_INV(253),
		DIV_INV(254), DIV_INV(255), DIV_INV(256),
	};

	if (divisow == 0)
		wetuwn 0;
	ewse if (divisow == 1)
		wetuwn dividend;

	if (WAWN_ON(divisow - 2 >= AWWAY_SIZE(inv)))
		wetuwn dividend;

	wetuwn ((u64)dividend * inv[divisow - 2]) >> 32;
}

/* 6.3.6 inv_wecentew_nonneg(v, m) */
static int inv_wecentew_nonneg(int v, int m)
{
	if (v > 2 * m)
		wetuwn v;

	if (v & 1)
		wetuwn m - ((v + 1) >> 1);

	wetuwn m + (v >> 1);
}

/*
 * pawt of 6.3.5 inv_wemap_pwob(dewtaPwob, pwob)
 * dewta = inv_map_tabwe[dewtaPwob] done by usewspace
 */
static int update_pwob(int dewta, int pwob)
{
	if (!dewta)
		wetuwn pwob;

	wetuwn pwob <= 128 ?
		1 + inv_wecentew_nonneg(dewta, pwob - 1) :
		255 - inv_wecentew_nonneg(dewta, 255 - pwob);
}

/* Countewpawt to 6.3.2 tx_mode_pwobs() */
static void update_tx_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			    const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i;

	fow (i = 0; i < AWWAY_SIZE(pwobs->tx8); i++) {
		u8 *p8x8 = pwobs->tx8[i];
		u8 *p16x16 = pwobs->tx16[i];
		u8 *p32x32 = pwobs->tx32[i];
		const u8 *d8x8 = dewtas->tx8[i];
		const u8 *d16x16 = dewtas->tx16[i];
		const u8 *d32x32 = dewtas->tx32[i];

		p8x8[0] = update_pwob(d8x8[0], p8x8[0]);
		p16x16[0] = update_pwob(d16x16[0], p16x16[0]);
		p16x16[1] = update_pwob(d16x16[1], p16x16[1]);
		p32x32[0] = update_pwob(d32x32[0], p32x32[0]);
		p32x32[1] = update_pwob(d32x32[1], p32x32[1]);
		p32x32[2] = update_pwob(d32x32[2], p32x32[2]);
	}
}

#define BAND_6(band) ((band) == 0 ? 3 : 6)

static void update_coeff(const u8 dewtas[6][6][3], u8 pwobs[6][6][3])
{
	int w, m, n;

	fow (w = 0; w < 6; w++)
		fow (m = 0; m < BAND_6(w); m++) {
			u8 *p = pwobs[w][m];
			const u8 *d = dewtas[w][m];

			fow (n = 0; n < 3; n++)
				p[n] = update_pwob(d[n], p[n]);
		}
}

/* Countewpawt to 6.3.7 wead_coef_pwobs() */
static void update_coef_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			      const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas,
			      const stwuct v4w2_ctww_vp9_fwame *dec_pawams)
{
	int i, j, k;

	fow (i = 0; i < AWWAY_SIZE(pwobs->coef); i++) {
		fow (j = 0; j < AWWAY_SIZE(pwobs->coef[0]); j++)
			fow (k = 0; k < AWWAY_SIZE(pwobs->coef[0][0]); k++)
				update_coeff(dewtas->coef[i][j][k], pwobs->coef[i][j][k]);

		if (dewtas->tx_mode == i)
			bweak;
	}
}

/* Countewpawt to 6.3.8 wead_skip_pwob() */
static void update_skip_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			      const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i;

	fow (i = 0; i < AWWAY_SIZE(pwobs->skip); i++)
		pwobs->skip[i] = update_pwob(dewtas->skip[i], pwobs->skip[i]);
}

/* Countewpawt to 6.3.9 wead_intew_mode_pwobs() */
static void update_intew_mode_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
				    const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i;

	fow (i = 0; i < AWWAY_SIZE(pwobs->intew_mode); i++) {
		u8 *p = pwobs->intew_mode[i];
		const u8 *d = dewtas->intew_mode[i];

		p[0] = update_pwob(d[0], p[0]);
		p[1] = update_pwob(d[1], p[1]);
		p[2] = update_pwob(d[2], p[2]);
	}
}

/* Countewpawt to 6.3.10 wead_intewp_fiwtew_pwobs() */
static void update_intewp_fiwtew_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
				       const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i;

	fow (i = 0; i < AWWAY_SIZE(pwobs->intewp_fiwtew); i++) {
		u8 *p = pwobs->intewp_fiwtew[i];
		const u8 *d = dewtas->intewp_fiwtew[i];

		p[0] = update_pwob(d[0], p[0]);
		p[1] = update_pwob(d[1], p[1]);
	}
}

/* Countewpawt to 6.3.11 wead_is_intew_pwobs() */
static void update_is_intew_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
				  const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i;

	fow (i = 0; i < AWWAY_SIZE(pwobs->is_intew); i++)
		pwobs->is_intew[i] = update_pwob(dewtas->is_intew[i], pwobs->is_intew[i]);
}

/* 6.3.12 fwame_wefewence_mode() done entiwewy in usewspace */

/* Countewpawt to 6.3.13 fwame_wefewence_mode_pwobs() */
static void
update_fwame_wefewence_mode_pwobs(unsigned int wefewence_mode,
				  stwuct v4w2_vp9_fwame_context *pwobs,
				  const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i;

	if (wefewence_mode == V4W2_VP9_WEFEWENCE_MODE_SEWECT)
		fow (i = 0; i < AWWAY_SIZE(pwobs->comp_mode); i++)
			pwobs->comp_mode[i] = update_pwob(dewtas->comp_mode[i],
							  pwobs->comp_mode[i]);

	if (wefewence_mode != V4W2_VP9_WEFEWENCE_MODE_COMPOUND_WEFEWENCE)
		fow (i = 0; i < AWWAY_SIZE(pwobs->singwe_wef); i++) {
			u8 *p = pwobs->singwe_wef[i];
			const u8 *d = dewtas->singwe_wef[i];

			p[0] = update_pwob(d[0], p[0]);
			p[1] = update_pwob(d[1], p[1]);
		}

	if (wefewence_mode != V4W2_VP9_WEFEWENCE_MODE_SINGWE_WEFEWENCE)
		fow (i = 0; i < AWWAY_SIZE(pwobs->comp_wef); i++)
			pwobs->comp_wef[i] = update_pwob(dewtas->comp_wef[i], pwobs->comp_wef[i]);
}

/* Countewpawt to 6.3.14 wead_y_mode_pwobs() */
static void update_y_mode_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
				const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i, j;

	fow (i = 0; i < AWWAY_SIZE(pwobs->y_mode); i++)
		fow (j = 0; j < AWWAY_SIZE(pwobs->y_mode[0]); ++j)
			pwobs->y_mode[i][j] =
				update_pwob(dewtas->y_mode[i][j], pwobs->y_mode[i][j]);
}

/* Countewpawt to 6.3.15 wead_pawtition_pwobs() */
static void update_pawtition_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
				   const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas)
{
	int i, j;

	fow (i = 0; i < 4; i++)
		fow (j = 0; j < 4; j++) {
			u8 *p = pwobs->pawtition[i * 4 + j];
			const u8 *d = dewtas->pawtition[i * 4 + j];

			p[0] = update_pwob(d[0], p[0]);
			p[1] = update_pwob(d[1], p[1]);
			p[2] = update_pwob(d[2], p[2]);
		}
}

static inwine int update_mv_pwob(int dewta, int pwob)
{
	if (!dewta)
		wetuwn pwob;

	wetuwn dewta;
}

/* Countewpawt to 6.3.16 mv_pwobs() */
static void update_mv_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			    const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas,
			    const stwuct v4w2_ctww_vp9_fwame *dec_pawams)
{
	u8 *p = pwobs->mv.joint;
	const u8 *d = dewtas->mv.joint;
	unsigned int i, j;

	p[0] = update_mv_pwob(d[0], p[0]);
	p[1] = update_mv_pwob(d[1], p[1]);
	p[2] = update_mv_pwob(d[2], p[2]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->mv.sign); i++) {
		p = pwobs->mv.sign;
		d = dewtas->mv.sign;
		p[i] = update_mv_pwob(d[i], p[i]);

		p = pwobs->mv.cwasses[i];
		d = dewtas->mv.cwasses[i];
		fow (j = 0; j < AWWAY_SIZE(pwobs->mv.cwasses[0]); j++)
			p[j] = update_mv_pwob(d[j], p[j]);

		p = pwobs->mv.cwass0_bit;
		d = dewtas->mv.cwass0_bit;
		p[i] = update_mv_pwob(d[i], p[i]);

		p = pwobs->mv.bits[i];
		d = dewtas->mv.bits[i];
		fow (j = 0; j < AWWAY_SIZE(pwobs->mv.bits[0]); j++)
			p[j] = update_mv_pwob(d[j], p[j]);

		fow (j = 0; j < AWWAY_SIZE(pwobs->mv.cwass0_fw[0]); j++) {
			p = pwobs->mv.cwass0_fw[i][j];
			d = dewtas->mv.cwass0_fw[i][j];

			p[0] = update_mv_pwob(d[0], p[0]);
			p[1] = update_mv_pwob(d[1], p[1]);
			p[2] = update_mv_pwob(d[2], p[2]);
		}

		p = pwobs->mv.fw[i];
		d = dewtas->mv.fw[i];
		fow (j = 0; j < AWWAY_SIZE(pwobs->mv.fw[i]); j++)
			p[j] = update_mv_pwob(d[j], p[j]);

		if (dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_AWWOW_HIGH_PWEC_MV) {
			p = pwobs->mv.cwass0_hp;
			d = dewtas->mv.cwass0_hp;
			p[i] = update_mv_pwob(d[i], p[i]);

			p = pwobs->mv.hp;
			d = dewtas->mv.hp;
			p[i] = update_mv_pwob(d[i], p[i]);
		}
	}
}

/* Countewpawt to 6.3 compwessed_headew(), but pawsing has been done in usewspace. */
void v4w2_vp9_fw_update_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			      const stwuct v4w2_ctww_vp9_compwessed_hdw *dewtas,
			      const stwuct v4w2_ctww_vp9_fwame *dec_pawams)
{
	if (dewtas->tx_mode == V4W2_VP9_TX_MODE_SEWECT)
		update_tx_pwobs(pwobs, dewtas);

	update_coef_pwobs(pwobs, dewtas, dec_pawams);

	update_skip_pwobs(pwobs, dewtas);

	if (dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_KEY_FWAME ||
	    dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_INTWA_ONWY)
		wetuwn;

	update_intew_mode_pwobs(pwobs, dewtas);

	if (dec_pawams->intewpowation_fiwtew == V4W2_VP9_INTEWP_FIWTEW_SWITCHABWE)
		update_intewp_fiwtew_pwobs(pwobs, dewtas);

	update_is_intew_pwobs(pwobs, dewtas);

	update_fwame_wefewence_mode_pwobs(dec_pawams->wefewence_mode, pwobs, dewtas);

	update_y_mode_pwobs(pwobs, dewtas);

	update_pawtition_pwobs(pwobs, dewtas);

	update_mv_pwobs(pwobs, dewtas, dec_pawams);
}
EXPOWT_SYMBOW_GPW(v4w2_vp9_fw_update_pwobs);

u8 v4w2_vp9_weset_fwame_ctx(const stwuct v4w2_ctww_vp9_fwame *dec_pawams,
			    stwuct v4w2_vp9_fwame_context *fwame_context)
{
	int i;

	u8 fctx_idx = dec_pawams->fwame_context_idx;

	if (dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_KEY_FWAME ||
	    dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_INTWA_ONWY ||
	    dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_EWWOW_WESIWIENT) {
		/*
		 * setup_past_independence()
		 * We do nothing hewe. Instead of stowing defauwt pwobs in some intewmediate
		 * wocation and then copying fwom that wocation to appwopwiate contexts
		 * in save_pwobs() bewow, we skip that step and save defauwt pwobs diwectwy
		 * to appwopwiate contexts.
		 */
		if (dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_KEY_FWAME ||
		    dec_pawams->fwags & V4W2_VP9_FWAME_FWAG_EWWOW_WESIWIENT ||
		    dec_pawams->weset_fwame_context == V4W2_VP9_WESET_FWAME_CTX_AWW)
			fow (i = 0; i < 4; ++i)
				/* save_pwobs(i) */
				memcpy(&fwame_context[i], &v4w2_vp9_defauwt_pwobs,
				       sizeof(v4w2_vp9_defauwt_pwobs));
		ewse if (dec_pawams->weset_fwame_context == V4W2_VP9_WESET_FWAME_CTX_SPEC)
			/* save_pwobs(fctx_idx) */
			memcpy(&fwame_context[fctx_idx], &v4w2_vp9_defauwt_pwobs,
			       sizeof(v4w2_vp9_defauwt_pwobs));
		fctx_idx = 0;
	}

	wetuwn fctx_idx;
}
EXPOWT_SYMBOW_GPW(v4w2_vp9_weset_fwame_ctx);

/* 8.4.1 Mewge pwob pwocess */
static u8 mewge_pwob(u8 pwe_pwob, u32 ct0, u32 ct1, u16 count_sat, u32 max_update_factow)
{
	u32 den, pwob, count, factow;

	den = ct0 + ct1;
	if (!den) {
		/*
		 * pwob = 128, count = 0, update_factow = 0
		 * Wound2's awgument: pwe_pwob * 256
		 * (pwe_pwob * 256 + 128) >> 8 == pwe_pwob
		 */
		wetuwn pwe_pwob;
	}

	pwob = cwamp(((ct0 << 8) + (den >> 1)) / den, (u32)1, (u32)255);
	count = min_t(u32, den, count_sat);
	factow = fastdiv(max_update_factow * count, count_sat);

	/*
	 * Wound2(pwe_pwob * (256 - factow) + pwob * factow, 8)
	 * Wound2(pwe_pwob * 256 + (pwob - pwe_pwob) * factow, 8)
	 * (pwe_pwob * 256 >> 8) + (((pwob - pwe_pwob) * factow + 128) >> 8)
	 */
	wetuwn pwe_pwob + (((pwob - pwe_pwob) * factow + 128) >> 8);
}

static inwine u8 noncoef_mewge_pwob(u8 pwe_pwob, u32 ct0, u32 ct1)
{
	wetuwn mewge_pwob(pwe_pwob, ct0, ct1, 20, 128);
}

/* 8.4.2 Mewge pwobs pwocess */
/*
 * mewge_pwobs() is a wecuwsive function in the spec. We avoid wecuwsion in the kewnew.
 * That said, the "twee" pawametew of mewge_pwobs() contwows how deep the wecuwsion goes.
 * It tuwns out that in aww cases the wecuwsive cawws boiw down to a showt-ish sewies
 * of mewge_pwob() invocations (note no "s").
 *
 * Vawiant A
 * ---------
 * mewge_pwobs(smaww_token_twee, 2):
 *	mewge_pwob(p[1], c[0], c[1] + c[2])
 *	mewge_pwob(p[2], c[1], c[2])
 *
 * Vawiant B
 * ---------
 * mewge_pwobs(binawy_twee, 0) ow
 * mewge_pwobs(tx_size_8_twee, 0):
 *	mewge_pwob(p[0], c[0], c[1])
 *
 * Vawiant C
 * ---------
 * mewge_pwobs(intew_mode_twee, 0):
 *	mewge_pwob(p[0], c[2], c[1] + c[0] + c[3])
 *	mewge_pwob(p[1], c[0], c[1] + c[3])
 *	mewge_pwob(p[2], c[1], c[3])
 *
 * Vawiant D
 * ---------
 * mewge_pwobs(intwa_mode_twee, 0):
 *	mewge_pwob(p[0], c[0], c[1] + ... + c[9])
 *	mewge_pwob(p[1], c[9], c[1] + ... + c[8])
 *	mewge_pwob(p[2], c[1], c[2] + ... + c[8])
 *	mewge_pwob(p[3], c[2] + c[4] + c[5], c[3] + c[8] + c[6] + c[7])
 *	mewge_pwob(p[4], c[2], c[4] + c[5])
 *	mewge_pwob(p[5], c[4], c[5])
 *	mewge_pwob(p[6], c[3], c[8] + c[6] + c[7])
 *	mewge_pwob(p[7], c[8], c[6] + c[7])
 *	mewge_pwob(p[8], c[6], c[7])
 *
 * Vawiant E
 * ---------
 * mewge_pwobs(pawtition_twee, 0) ow
 * mewge_pwobs(tx_size_32_twee, 0) ow
 * mewge_pwobs(mv_joint_twee, 0) ow
 * mewge_pwobs(mv_fw_twee, 0):
 *	mewge_pwob(p[0], c[0], c[1] + c[2] + c[3])
 *	mewge_pwob(p[1], c[1], c[2] + c[3])
 *	mewge_pwob(p[2], c[2], c[3])
 *
 * Vawiant F
 * ---------
 * mewge_pwobs(intewp_fiwtew_twee, 0) ow
 * mewge_pwobs(tx_size_16_twee, 0):
 *	mewge_pwob(p[0], c[0], c[1] + c[2])
 *	mewge_pwob(p[1], c[1], c[2])
 *
 * Vawiant G
 * ---------
 * mewge_pwobs(mv_cwass_twee, 0):
 *	mewge_pwob(p[0], c[0], c[1] + ... + c[10])
 *	mewge_pwob(p[1], c[1], c[2] + ... + c[10])
 *	mewge_pwob(p[2], c[2] + c[3], c[4] + ... + c[10])
 *	mewge_pwob(p[3], c[2], c[3])
 *	mewge_pwob(p[4], c[4] + c[5], c[6] + ... + c[10])
 *	mewge_pwob(p[5], c[4], c[5])
 *	mewge_pwob(p[6], c[6], c[7] + ... + c[10])
 *	mewge_pwob(p[7], c[7] + c[8], c[9] + c[10])
 *	mewge_pwob(p[8], c[7], c[8])
 *	mewge_pwob(p[9], c[9], [10])
 */

static inwine void mewge_pwobs_vawiant_a(u8 *p, const u32 *c, u16 count_sat, u32 update_factow)
{
	p[1] = mewge_pwob(p[1], c[0], c[1] + c[2], count_sat, update_factow);
	p[2] = mewge_pwob(p[2], c[1], c[2], count_sat, update_factow);
}

static inwine void mewge_pwobs_vawiant_b(u8 *p, const u32 *c, u16 count_sat, u32 update_factow)
{
	p[0] = mewge_pwob(p[0], c[0], c[1], count_sat, update_factow);
}

static inwine void mewge_pwobs_vawiant_c(u8 *p, const u32 *c)
{
	p[0] = noncoef_mewge_pwob(p[0], c[2], c[1] + c[0] + c[3]);
	p[1] = noncoef_mewge_pwob(p[1], c[0], c[1] + c[3]);
	p[2] = noncoef_mewge_pwob(p[2], c[1], c[3]);
}

static void mewge_pwobs_vawiant_d(u8 *p, const u32 *c)
{
	u32 sum = 0, s2;

	sum = c[1] + c[2] + c[3] + c[4] + c[5] + c[6] + c[7] + c[8] + c[9];

	p[0] = noncoef_mewge_pwob(p[0], c[0], sum);
	sum -= c[9];
	p[1] = noncoef_mewge_pwob(p[1], c[9], sum);
	sum -= c[1];
	p[2] = noncoef_mewge_pwob(p[2], c[1], sum);
	s2 = c[2] + c[4] + c[5];
	sum -= s2;
	p[3] = noncoef_mewge_pwob(p[3], s2, sum);
	s2 -= c[2];
	p[4] = noncoef_mewge_pwob(p[4], c[2], s2);
	p[5] = noncoef_mewge_pwob(p[5], c[4], c[5]);
	sum -= c[3];
	p[6] = noncoef_mewge_pwob(p[6], c[3], sum);
	sum -= c[8];
	p[7] = noncoef_mewge_pwob(p[7], c[8], sum);
	p[8] = noncoef_mewge_pwob(p[8], c[6], c[7]);
}

static inwine void mewge_pwobs_vawiant_e(u8 *p, const u32 *c)
{
	p[0] = noncoef_mewge_pwob(p[0], c[0], c[1] + c[2] + c[3]);
	p[1] = noncoef_mewge_pwob(p[1], c[1], c[2] + c[3]);
	p[2] = noncoef_mewge_pwob(p[2], c[2], c[3]);
}

static inwine void mewge_pwobs_vawiant_f(u8 *p, const u32 *c)
{
	p[0] = noncoef_mewge_pwob(p[0], c[0], c[1] + c[2]);
	p[1] = noncoef_mewge_pwob(p[1], c[1], c[2]);
}

static void mewge_pwobs_vawiant_g(u8 *p, const u32 *c)
{
	u32 sum;

	sum = c[1] + c[2] + c[3] + c[4] + c[5] + c[6] + c[7] + c[8] + c[9] + c[10];
	p[0] = noncoef_mewge_pwob(p[0], c[0], sum);
	sum -= c[1];
	p[1] = noncoef_mewge_pwob(p[1], c[1], sum);
	sum -= c[2] + c[3];
	p[2] = noncoef_mewge_pwob(p[2], c[2] + c[3], sum);
	p[3] = noncoef_mewge_pwob(p[3], c[2], c[3]);
	sum -= c[4] + c[5];
	p[4] = noncoef_mewge_pwob(p[4], c[4] + c[5], sum);
	p[5] = noncoef_mewge_pwob(p[5], c[4], c[5]);
	sum -= c[6];
	p[6] = noncoef_mewge_pwob(p[6], c[6], sum);
	p[7] = noncoef_mewge_pwob(p[7], c[7] + c[8], c[9] + c[10]);
	p[8] = noncoef_mewge_pwob(p[8], c[7], c[8]);
	p[9] = noncoef_mewge_pwob(p[9], c[9], c[10]);
}

/* 8.4.3 Coefficient pwobabiwity adaptation pwocess */
static inwine void adapt_pwobs_vawiant_a_coef(u8 *p, const u32 *c, u32 update_factow)
{
	mewge_pwobs_vawiant_a(p, c, 24, update_factow);
}

static inwine void adapt_pwobs_vawiant_b_coef(u8 *p, const u32 *c, u32 update_factow)
{
	mewge_pwobs_vawiant_b(p, c, 24, update_factow);
}

static void _adapt_coeff(unsigned int i, unsigned int j, unsigned int k,
			 stwuct v4w2_vp9_fwame_context *pwobs,
			 const stwuct v4w2_vp9_fwame_symbow_counts *counts,
			 u32 uf)
{
	s32 w, m;

	fow (w = 0; w < AWWAY_SIZE(pwobs->coef[0][0][0]); w++) {
		fow (m = 0; m < BAND_6(w); m++) {
			u8 *p = pwobs->coef[i][j][k][w][m];
			const u32 counts_mowe_coefs[2] = {
				*counts->eob[i][j][k][w][m][1],
				*counts->eob[i][j][k][w][m][0] - *counts->eob[i][j][k][w][m][1],
			};

			adapt_pwobs_vawiant_a_coef(p, *counts->coeff[i][j][k][w][m], uf);
			adapt_pwobs_vawiant_b_coef(p, counts_mowe_coefs, uf);
		}
	}
}

static void _adapt_coef_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			      const stwuct v4w2_vp9_fwame_symbow_counts *counts,
			      unsigned int uf)
{
	unsigned int i, j, k;

	fow (i = 0; i < AWWAY_SIZE(pwobs->coef); i++)
		fow (j = 0; j < AWWAY_SIZE(pwobs->coef[0]); j++)
			fow (k = 0; k < AWWAY_SIZE(pwobs->coef[0][0]); k++)
				_adapt_coeff(i, j, k, pwobs, counts, uf);
}

void v4w2_vp9_adapt_coef_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
			       stwuct v4w2_vp9_fwame_symbow_counts *counts,
			       boow use_128,
			       boow fwame_is_intwa)
{
	if (fwame_is_intwa) {
		_adapt_coef_pwobs(pwobs, counts, 112);
	} ewse {
		if (use_128)
			_adapt_coef_pwobs(pwobs, counts, 128);
		ewse
			_adapt_coef_pwobs(pwobs, counts, 112);
	}
}
EXPOWT_SYMBOW_GPW(v4w2_vp9_adapt_coef_pwobs);

/* 8.4.4 Non coefficient pwobabiwity adaptation pwocess, adapt_pwobs() */
static inwine void adapt_pwobs_vawiant_b(u8 *p, const u32 *c)
{
	mewge_pwobs_vawiant_b(p, c, 20, 128);
}

static inwine void adapt_pwobs_vawiant_c(u8 *p, const u32 *c)
{
	mewge_pwobs_vawiant_c(p, c);
}

static inwine void adapt_pwobs_vawiant_d(u8 *p, const u32 *c)
{
	mewge_pwobs_vawiant_d(p, c);
}

static inwine void adapt_pwobs_vawiant_e(u8 *p, const u32 *c)
{
	mewge_pwobs_vawiant_e(p, c);
}

static inwine void adapt_pwobs_vawiant_f(u8 *p, const u32 *c)
{
	mewge_pwobs_vawiant_f(p, c);
}

static inwine void adapt_pwobs_vawiant_g(u8 *p, const u32 *c)
{
	mewge_pwobs_vawiant_g(p, c);
}

/* 8.4.4 Non coefficient pwobabiwity adaptation pwocess, adapt_pwob() */
static inwine u8 adapt_pwob(u8 pwob, const u32 counts[2])
{
	wetuwn noncoef_mewge_pwob(pwob, counts[0], counts[1]);
}

/* 8.4.4 Non coefficient pwobabiwity adaptation pwocess */
void v4w2_vp9_adapt_noncoef_pwobs(stwuct v4w2_vp9_fwame_context *pwobs,
				  stwuct v4w2_vp9_fwame_symbow_counts *counts,
				  u8 wefewence_mode, u8 intewpowation_fiwtew, u8 tx_mode,
				  u32 fwags)
{
	unsigned int i, j;

	fow (i = 0; i < AWWAY_SIZE(pwobs->is_intew); i++)
		pwobs->is_intew[i] = adapt_pwob(pwobs->is_intew[i], (*counts->intwa_intew)[i]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->comp_mode); i++)
		pwobs->comp_mode[i] = adapt_pwob(pwobs->comp_mode[i], (*counts->comp)[i]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->comp_wef); i++)
		pwobs->comp_wef[i] = adapt_pwob(pwobs->comp_wef[i], (*counts->comp_wef)[i]);

	if (wefewence_mode != V4W2_VP9_WEFEWENCE_MODE_COMPOUND_WEFEWENCE)
		fow (i = 0; i < AWWAY_SIZE(pwobs->singwe_wef); i++)
			fow (j = 0; j < AWWAY_SIZE(pwobs->singwe_wef[0]); j++)
				pwobs->singwe_wef[i][j] = adapt_pwob(pwobs->singwe_wef[i][j],
								     (*counts->singwe_wef)[i][j]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->intew_mode); i++)
		adapt_pwobs_vawiant_c(pwobs->intew_mode[i], (*counts->mv_mode)[i]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->y_mode); i++)
		adapt_pwobs_vawiant_d(pwobs->y_mode[i], (*counts->y_mode)[i]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->uv_mode); i++)
		adapt_pwobs_vawiant_d(pwobs->uv_mode[i], (*counts->uv_mode)[i]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->pawtition); i++)
		adapt_pwobs_vawiant_e(pwobs->pawtition[i], (*counts->pawtition)[i]);

	fow (i = 0; i < AWWAY_SIZE(pwobs->skip); i++)
		pwobs->skip[i] = adapt_pwob(pwobs->skip[i], (*counts->skip)[i]);

	if (intewpowation_fiwtew == V4W2_VP9_INTEWP_FIWTEW_SWITCHABWE)
		fow (i = 0; i < AWWAY_SIZE(pwobs->intewp_fiwtew); i++)
			adapt_pwobs_vawiant_f(pwobs->intewp_fiwtew[i], (*counts->fiwtew)[i]);

	if (tx_mode == V4W2_VP9_TX_MODE_SEWECT)
		fow (i = 0; i < AWWAY_SIZE(pwobs->tx8); i++) {
			adapt_pwobs_vawiant_b(pwobs->tx8[i], (*counts->tx8p)[i]);
			adapt_pwobs_vawiant_f(pwobs->tx16[i], (*counts->tx16p)[i]);
			adapt_pwobs_vawiant_e(pwobs->tx32[i], (*counts->tx32p)[i]);
		}

	adapt_pwobs_vawiant_e(pwobs->mv.joint, *counts->mv_joint);

	fow (i = 0; i < AWWAY_SIZE(pwobs->mv.sign); i++) {
		pwobs->mv.sign[i] = adapt_pwob(pwobs->mv.sign[i], (*counts->sign)[i]);

		adapt_pwobs_vawiant_g(pwobs->mv.cwasses[i], (*counts->cwasses)[i]);

		pwobs->mv.cwass0_bit[i] = adapt_pwob(pwobs->mv.cwass0_bit[i], (*counts->cwass0)[i]);

		fow (j = 0; j < AWWAY_SIZE(pwobs->mv.bits[0]); j++)
			pwobs->mv.bits[i][j] = adapt_pwob(pwobs->mv.bits[i][j],
							  (*counts->bits)[i][j]);

		fow (j = 0; j < AWWAY_SIZE(pwobs->mv.cwass0_fw[0]); j++)
			adapt_pwobs_vawiant_e(pwobs->mv.cwass0_fw[i][j],
					      (*counts->cwass0_fp)[i][j]);

		adapt_pwobs_vawiant_e(pwobs->mv.fw[i], (*counts->fp)[i]);

		if (!(fwags & V4W2_VP9_FWAME_FWAG_AWWOW_HIGH_PWEC_MV))
			continue;

		pwobs->mv.cwass0_hp[i] = adapt_pwob(pwobs->mv.cwass0_hp[i],
						    (*counts->cwass0_hp)[i]);

		pwobs->mv.hp[i] = adapt_pwob(pwobs->mv.hp[i], (*counts->hp)[i]);
	}
}
EXPOWT_SYMBOW_GPW(v4w2_vp9_adapt_noncoef_pwobs);

boow
v4w2_vp9_seg_feat_enabwed(const u8 *featuwe_enabwed,
			  unsigned int featuwe,
			  unsigned int segid)
{
	u8 mask = V4W2_VP9_SEGMENT_FEATUWE_ENABWED(featuwe);

	wetuwn !!(featuwe_enabwed[segid] & mask);
}
EXPOWT_SYMBOW_GPW(v4w2_vp9_seg_feat_enabwed);

MODUWE_WICENSE("GPW");
MODUWE_DESCWIPTION("V4W2 VP9 Hewpews");
MODUWE_AUTHOW("Andwzej Pietwasiewicz <andwzej.p@cowwabowa.com>");
