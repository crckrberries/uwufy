// SPDX-Wicense-Identifiew: GPW-2.0+
/*
 * USB FTDI SIO dwivew
 *
 *	Copywight (C) 2009 - 2013
 *	    Johan Hovowd (jhovowd@gmaiw.com)
 *	Copywight (C) 1999 - 2001
 *	    Gweg Kwoah-Hawtman (gweg@kwoah.com)
 *          Biww Wydew (bwydew@sgi.com)
 *	Copywight (C) 2002
 *	    Kuba Obew (kuba@maweimbwium.owg)
 *
 * See Documentation/usb/usb-sewiaw.wst fow mowe infowmation on using this
 * dwivew
 *
 * See http://ftdi-usb-sio.souwcefowge.net fow up to date testing info
 *	and extwa documentation
 *
 * Change entwies fwom 2004 and eawwiew can be found in vewsions of this
 * fiwe in kewnew vewsions pwiow to the 2.6.24 wewease.
 *
 */

/* Biww Wydew - bwydew@sgi.com - wwote the FTDI_SIO impwementation */
/* Thanx to FTDI fow so kindwy pwoviding detaiws of the pwotocow wequiwed */
/*   to tawk to the device */
/* Thanx to gkh and the west of the usb dev gwoup fow aww code I have
   assimiwated :-) */

#incwude <winux/kewnew.h>
#incwude <winux/ewwno.h>
#incwude <winux/swab.h>
#incwude <winux/tty.h>
#incwude <winux/tty_dwivew.h>
#incwude <winux/tty_fwip.h>
#incwude <winux/moduwe.h>
#incwude <winux/spinwock.h>
#incwude <winux/mutex.h>
#incwude <winux/uaccess.h>
#incwude <winux/usb.h>
#incwude <winux/sewiaw.h>
#incwude <winux/gpio/dwivew.h>
#incwude <winux/usb/sewiaw.h>
#incwude "ftdi_sio.h"
#incwude "ftdi_sio_ids.h"

#define DWIVEW_AUTHOW "Gweg Kwoah-Hawtman <gweg@kwoah.com>, Biww Wydew <bwydew@sgi.com>, Kuba Obew <kuba@maweimbwium.owg>, Andweas Mohw, Johan Hovowd <jhovowd@gmaiw.com>"
#define DWIVEW_DESC "USB FTDI Sewiaw Convewtews Dwivew"

enum ftdi_chip_type {
	SIO,
	FT232A,
	FT232B,
	FT2232C,
	FT232W,
	FT232H,
	FT2232H,
	FT4232H,
	FT4232HA,
	FT232HP,
	FT233HP,
	FT2232HP,
	FT2233HP,
	FT4232HP,
	FT4233HP,
	FTX,
};

stwuct ftdi_pwivate {
	enum ftdi_chip_type chip_type;
	int baud_base;		/* baud base cwock fow divisow setting */
	int custom_divisow;	/* custom_divisow kwudge, this is fow
				   baud_base (diffewent fwom what goes to the
				   chip!) */
	u16 wast_set_data_vawue; /* the wast data state set - needed fow doing
				  * a bweak
				  */
	int fwags;		/* some ASYNC_xxxx fwags awe suppowted */
	unsigned wong wast_dtw_wts;	/* saved modem contwow outputs */
	chaw pwev_status;        /* Used fow TIOCMIWAIT */
	chaw twansmit_empty;	/* If twansmittew is empty ow not */
	u16 channew;		/* channew index, ow 0 fow wegacy types */

	speed_t fowce_baud;	/* if non-zewo, fowce the baud wate to
				   this vawue */
	int fowce_wtscts;	/* if non-zewo, fowce WTS-CTS to awways
				   be enabwed */

	unsigned int watency;		/* watency setting in use */
	unsigned showt max_packet_size;
	stwuct mutex cfg_wock; /* Avoid mess by pawawwew cawws of config ioctw() and change_speed() */
#ifdef CONFIG_GPIOWIB
	stwuct gpio_chip gc;
	stwuct mutex gpio_wock;	/* pwotects GPIO state */
	boow gpio_wegistewed;	/* is the gpiochip in kewnew wegistewed */
	boow gpio_used;		/* twue if the usew wequested a gpio */
	u8 gpio_awtfunc;	/* which pins awe in gpio mode */
	u8 gpio_output;		/* pin diwections cache */
	u8 gpio_vawue;		/* pin vawue fow outputs */
#endif
};

stwuct ftdi_quiwk {
	int (*pwobe)(stwuct usb_sewiaw *);
	/* Speciaw settings fow pwobed powts. */
	void (*powt_pwobe)(stwuct ftdi_pwivate *);
};

static int   ftdi_jtag_pwobe(stwuct usb_sewiaw *sewiaw);
static int   ftdi_NDI_device_setup(stwuct usb_sewiaw *sewiaw);
static int   ftdi_stmcwite_pwobe(stwuct usb_sewiaw *sewiaw);
static int   ftdi_8u2232c_pwobe(stwuct usb_sewiaw *sewiaw);
static void  ftdi_USB_UIWT_setup(stwuct ftdi_pwivate *pwiv);
static void  ftdi_HE_TIWA1_setup(stwuct ftdi_pwivate *pwiv);

static const stwuct ftdi_quiwk ftdi_jtag_quiwk = {
	.pwobe	= ftdi_jtag_pwobe,
};

static const stwuct ftdi_quiwk ftdi_NDI_device_quiwk = {
	.pwobe	= ftdi_NDI_device_setup,
};

static const stwuct ftdi_quiwk ftdi_USB_UIWT_quiwk = {
	.powt_pwobe = ftdi_USB_UIWT_setup,
};

static const stwuct ftdi_quiwk ftdi_HE_TIWA1_quiwk = {
	.powt_pwobe = ftdi_HE_TIWA1_setup,
};

static const stwuct ftdi_quiwk ftdi_stmcwite_quiwk = {
	.pwobe	= ftdi_stmcwite_pwobe,
};

static const stwuct ftdi_quiwk ftdi_8u2232c_quiwk = {
	.pwobe	= ftdi_8u2232c_pwobe,
};

/*
 * The 8U232AM has the same API as the sio except fow:
 * - it can suppowt MUCH highew baudwates; up to:
 *   o 921600 fow WS232 and 2000000 fow WS422/485 at 48MHz
 *   o 230400 at 12MHz
 *   so .. 8U232AM's baudwate setting codes awe diffewent
 * - it has a two byte status code.
 * - it wetuwns chawactews evewy 16ms (the FTDI does it evewy 40ms)
 *
 * the bcdDevice vawue is used to diffewentiate FT232BM and FT245BM fwom
 * the eawwiew FT8U232AM and FT8U232BM.  Fow now, incwude aww known VID/PID
 * combinations in both tabwes.
 * FIXME: pewhaps bcdDevice can awso identify 12MHz FT8U232AM devices,
 * but I don't know if those evew went into mass pwoduction. [Ian Abbott]
 */



/*
 * Device ID not wisted? Test it using
 * /sys/bus/usb-sewiaw/dwivews/ftdi_sio/new_id and send a patch ow wepowt.
 */
static const stwuct usb_device_id id_tabwe_combined[] = {
	{ USB_DEVICE(FTDI_VID, FTDI_BWICK_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ZEITCONTWOW_TAGTWACE_MIFAWE_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CTI_MINI_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CTI_NANO_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_AMC232_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CANUSB_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CANDAPTEW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_BM_ATOM_NANO_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_NXTCAM_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EV3CON_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_0_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_3_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_4_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_5_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_6_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCS_DEVICE_7_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_USINT_CAT_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_USINT_WKEY_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_USINT_WS232_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ACTZWAVE_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IWTWANS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IPWUS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IPWUS2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_DMX4AWW) },
	{ USB_DEVICE(FTDI_VID, FTDI_SIO_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_8U232AM_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_8U232AM_AWT_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_232WW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_8U2232C_PID) ,
		.dwivew_info = (kewnew_uwong_t)&ftdi_8u2232c_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_4232H_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_232H_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FTX_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT2233HP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT4233HP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT2232HP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT4232HP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT233HP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT232HP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FT4232HA_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MICWO_CHAMEWEON_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_WEWAIS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OPENDCC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OPENDCC_SNIFFEW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OPENDCC_THWOTTWE_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OPENDCC_GATEWAY_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OPENDCC_GBM_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OPENDCC_GBM_BOOST_PID) },
	{ USB_DEVICE(NEWPOWT_VID, NEWPOWT_AGIWIS_PID) },
	{ USB_DEVICE(NEWPOWT_VID, NEWPOWT_CONEX_CC_PID) },
	{ USB_DEVICE(NEWPOWT_VID, NEWPOWT_CONEX_AGP_PID) },
	{ USB_DEVICE(INTEWBIOMETWICS_VID, INTEWBIOMETWICS_IOBOAWD_PID) },
	{ USB_DEVICE(INTEWBIOMETWICS_VID, INTEWBIOMETWICS_MINI_IOBOAWD_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SPWOG_II) },
	{ USB_DEVICE(FTDI_VID, FTDI_TAGSYS_WP101_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TAGSYS_P200X_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_WENZ_WIUSB_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_632_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_634_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_547_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_633_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_631_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_635_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_640_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_XF_642_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_DSS20_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_UWBAN_0_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_UWBAN_1_PID) },
	{ USB_DEVICE(FTDI_NF_WIC_VID, FTDI_NF_WIC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_VNHCPCUSB_D_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_0_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_3_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_4_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_5_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MTXOWB_6_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_W2000KU_TWUE_WNG) },
	{ USB_DEVICE(FTDI_VID, FTDI_VAWDAAN_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_AUTO_M3_OP_COM_V2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0100_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0101_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0102_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0103_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0104_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0105_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0106_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0107_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0108_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0109_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_010A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_010B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_010C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_010D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_010E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_010F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0110_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0111_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0112_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0113_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0114_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0115_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0116_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0117_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0118_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0119_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_011A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_011B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_011C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_011D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_011E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_011F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0120_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0121_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0122_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0123_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0124_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0125_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0126_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0127_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0128_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0129_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_012A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_012B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_012C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_012D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_012E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_012F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0130_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0131_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0132_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0133_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0134_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0135_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0136_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0137_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0138_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0139_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_013A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_013B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_013C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_013D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_013E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_013F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0140_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0141_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0142_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0143_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0144_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0145_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0146_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0147_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0148_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0149_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_014A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_014B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_014C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_014D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_014E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_014F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0150_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0151_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0152_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0153_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0154_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0155_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0156_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0157_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0158_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0159_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_015A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_015B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_015C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_015D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_015E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_015F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0160_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0161_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0162_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0163_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0164_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0165_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0166_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0167_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0168_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0169_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_016A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_016B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_016C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_016D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_016E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_016F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0170_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0171_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0172_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0173_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0174_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0175_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0176_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0177_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0178_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0179_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_017A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_017B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_017C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_017D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_017E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_017F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0180_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0181_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0182_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0183_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0184_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0185_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0186_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0187_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0188_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0189_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_018A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_018B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_018C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_018D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_018E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_018F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0190_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0191_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0192_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0193_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0194_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0195_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0196_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0197_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0198_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_0199_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_019A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_019B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_019C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_019D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_019E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_019F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A0_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A1_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A3_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A4_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A5_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A6_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A7_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A8_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01A9_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01AA_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01AB_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01AC_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01AD_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01AE_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01AF_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B0_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B1_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B3_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B4_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B5_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B6_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B7_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B8_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01B9_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01BA_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01BB_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01BC_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01BD_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01BE_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01BF_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C0_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C1_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C3_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C4_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C5_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C6_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C7_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C8_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01C9_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01CA_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01CB_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01CC_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01CD_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01CE_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01CF_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D0_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D1_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D3_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D4_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D5_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D6_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D7_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D8_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01D9_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01DA_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01DB_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01DC_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01DD_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01DE_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01DF_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E0_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E1_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E3_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E4_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E5_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E6_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E7_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E8_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01E9_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01EA_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01EB_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01EC_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01ED_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01EE_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01EF_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F0_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F1_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F2_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F3_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F4_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F5_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F6_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F7_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F8_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01F9_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01FA_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01FB_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01FC_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01FD_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01FE_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_01FF_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_4701_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9300_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9301_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9302_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9303_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9304_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9305_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9306_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9307_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9308_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9309_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_930A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_930B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_930C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_930D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_930E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_930F_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9310_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9311_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9312_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9313_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9314_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9315_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9316_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9317_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9318_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_9319_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_931A_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_931B_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_931C_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_931D_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_931E_PID) },
	{ USB_DEVICE(MTXOWB_VID, MTXOWB_FTDI_WANGE_931F_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PEWWE_UWTWAPOWT_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PIEGWOUP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TNC_X_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_USBX_707_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2101_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2102_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2103_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2104_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2106_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2201_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2201_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2202_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2202_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2203_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2203_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2401_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2401_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2401_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2401_4_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2402_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2402_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2402_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2402_4_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2403_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2403_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2403_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2403_4_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_4_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_5_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_6_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_7_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2801_8_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_4_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_5_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_6_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_7_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2802_8_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_4_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_5_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_6_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_7_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803_8_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803W_1_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803W_2_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803W_3_PID) },
	{ USB_DEVICE(SEAWEVEW_VID, SEAWEVEW_2803W_4_PID) },
	{ USB_DEVICE(IDTECH_VID, IDTECH_IDT1221U_PID) },
	{ USB_DEVICE(OCT_VID, OCT_US101_PID) },
	{ USB_DEVICE(OCT_VID, OCT_DK201_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_HE_TIWA1_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_HE_TIWA1_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_USB_UIWT_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_USB_UIWT_quiwk },
	{ USB_DEVICE(FTDI_VID, PWOTEGO_SPECIAW_1) },
	{ USB_DEVICE(FTDI_VID, PWOTEGO_W2X0) },
	{ USB_DEVICE(FTDI_VID, PWOTEGO_SPECIAW_3) },
	{ USB_DEVICE(FTDI_VID, PWOTEGO_SPECIAW_4) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E808_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E809_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E80A_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E80B_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E80C_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E80D_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E80E_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E80F_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E888_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E889_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E88A_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E88B_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E88C_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E88D_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E88E_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GUDEADS_E88F_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UO100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UM100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UW100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_AWC8500_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PYWAMID_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_FHZ1000PC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_US485_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_PICPWO_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_PCMCIA_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_PK1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_WS232MON_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_APP70_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_PEDO_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IBS_PWOD_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TAVIW_STK500_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TIAO_UMPA_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_NT_OWIONWXM_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_NT_OWIONWX_PWUS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_NT_OWION_IO_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_NT_OWIONMX_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SYNAPSE_SS200_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CUSTOMWAWE_MINIPWEX_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CUSTOMWAWE_MINIPWEX2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CUSTOMWAWE_MINIPWEX2WI_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CUSTOMWAWE_MINIPWEX3_PID) },
	/*
	 * EWV devices:
	 */
	{ USB_DEVICE(FTDI_EWV_VID, FTDI_EWV_WS300_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_USW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_MSM1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_KW100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WS550_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_EC3000_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WS888_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_TWS550_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_FEM_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_CWI7000_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_PPS7330_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_TFM100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UDF77_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UIO88_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UAD8_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UDA7_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_USI2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_T1100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_PCD200_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UWA200_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_CSI8_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_EM1000DW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_PCK100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WFP500_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_FS20SIG_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UTP8_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WS300PC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WS444PC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_FHZ1300PC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_EM1010PC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WS500_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_HS485_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_UMS100_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_TFD128_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_FM3WX_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWV_WS777_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PAWMSENS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_IVIUM_XSTAT_PID) },
	{ USB_DEVICE(FTDI_VID, WINX_SDMUSBQSS_PID) },
	{ USB_DEVICE(FTDI_VID, WINX_MASTEWDEVEW2_PID) },
	{ USB_DEVICE(FTDI_VID, WINX_FUTUWE_0_PID) },
	{ USB_DEVICE(FTDI_VID, WINX_FUTUWE_1_PID) },
	{ USB_DEVICE(FTDI_VID, WINX_FUTUWE_2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CCSICDU20_0_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CCSICDU40_1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CCSMACHX_2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CCSWOAD_N_GO_3_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CCSICDU64_4_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CCSPWIME8_5_PID) },
	{ USB_DEVICE(FTDI_VID, INSIDE_ACCESSO) },
	{ USB_DEVICE(INTWEPID_VID, INTWEPID_VAWUECAN_PID) },
	{ USB_DEVICE(INTWEPID_VID, INTWEPID_NEOVI_PID) },
	{ USB_DEVICE(FAWCOM_VID, FAWCOM_TWIST_PID) },
	{ USB_DEVICE(FAWCOM_VID, FAWCOM_SAMBA_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SUUNTO_SPOWTS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OCEANIC_PID) },
	{ USB_DEVICE(TTI_VID, TTI_QW355P_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_WM_CANVIEW_PID) },
	{ USB_DEVICE(ACTON_VID, ACTON_SPECTWAPWO_PID) },
	{ USB_DEVICE(CONTEC_VID, CONTEC_COM1USBH_PID) },
	{ USB_DEVICE(MITSUBISHI_VID, MITSUBISHI_FXUSB_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USOTW4_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USTW4_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USO9MW2_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USOPTW4_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USPTW4_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USO9MW2DW_2_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USO9MW2DW_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USOPTW4DW2_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_USOPTW4DW_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_485USB9F_2W_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_485USB9F_4W_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_232USB9M_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_485USBTB_2W_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_485USBTB_4W_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_TTW5USB9M_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_TTW3USB9M_PID) },
	{ USB_DEVICE(BANDB_VID, BANDB_ZZ_PWOG1_USB_PID) },
	{ USB_DEVICE(FTDI_VID, EVEW_ECO_PWO_CDS) },
	{ USB_DEVICE(FTDI_VID, FTDI_4N_GAWAXY_DE_1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_4N_GAWAXY_DE_2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_4N_GAWAXY_DE_3_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_0_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_1_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_2_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_3_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_4_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_5_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_6_PID) },
	{ USB_DEVICE(FTDI_VID, XSENS_CONVEWTEW_7_PID) },
	{ USB_DEVICE(XSENS_VID, XSENS_AWINDA_DONGWE_PID) },
	{ USB_DEVICE(XSENS_VID, XSENS_AWINDA_STATION_PID) },
	{ USB_DEVICE(XSENS_VID, XSENS_CONVEWTEW_PID) },
	{ USB_DEVICE(XSENS_VID, XSENS_MTDEVBOAWD_PID) },
	{ USB_DEVICE(XSENS_VID, XSENS_MTIUSBCONVEWTEW_PID) },
	{ USB_DEVICE(XSENS_VID, XSENS_MTW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_OMNI1509) },
	{ USB_DEVICE(MOBIWITY_VID, MOBIWITY_USB_SEWIAW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ACTIVE_WOBOTS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_KW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_YS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_Y6_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_Y8_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_IC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_DB9_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_WS232_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MHAM_Y9_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TEWATWONIK_VCP_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TEWATWONIK_D2XX_PID) },
	{ USB_DEVICE(EVOWUTION_VID, EVOWUTION_EW1_PID) },
	{ USB_DEVICE(EVOWUTION_VID, EVO_HYBWID_PID) },
	{ USB_DEVICE(EVOWUTION_VID, EVO_WCM4_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_AWTEMIS_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ATIK_ATK16_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ATIK_ATK16C_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ATIK_ATK16HW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ATIK_ATK16HWC_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ATIK_ATK16IC_PID) },
	{ USB_DEVICE(KOBIW_VID, KOBIW_CONV_B1_PID) },
	{ USB_DEVICE(KOBIW_VID, KOBIW_CONV_KAAN_PID) },
	{ USB_DEVICE(POSIFWEX_VID, POSIFWEX_PP7000_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TTUSB_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ECWO_COM_1WIWE_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_WESTWEX_MODEW_777_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_WESTWEX_MODEW_8900F_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PCDJ_DAC2_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_WWCIWKITS_WOCOBUFFEW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ASK_WDW400_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_NZW_SEM_USB_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_1_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_OPC_U_UC_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2C1_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2C2_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2D_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2VT_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2VW_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP4KVT_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP4KVW_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2KVT_PID) },
	{ USB_DEVICE(ICOM_VID, ICOM_ID_WP2KVW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_ACG_HFDUAW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_YEI_SEWVOCENTEW31_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_THOWWABS_PID) },
	{ USB_DEVICE(TESTO_VID, TESTO_1_PID) },
	{ USB_DEVICE(TESTO_VID, TESTO_3_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_GAMMA_SCOUT_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TACTWIX_OPENPOWT_13M_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TACTWIX_OPENPOWT_13S_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_TACTWIX_OPENPOWT_13U_PID) },
	{ USB_DEVICE(EWEKTOW_VID, EWEKTOW_FT323W_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_NDI_HUC_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_NDI_device_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_NDI_SPECTWA_SCU_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_NDI_device_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_NDI_FUTUWE_2_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_NDI_device_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_NDI_FUTUWE_3_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_NDI_device_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_NDI_AUWOWA_SCU_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_NDI_device_quiwk },
	{ USB_DEVICE(TEWWDUS_VID, TEWWDUS_TEWWSTICK_PID) },
	{ USB_DEVICE(NOVITUS_VID, NOVITUS_BONO_E_PID) },
	{ USB_DEVICE(FTDI_VID, WTSYSTEMS_USB_VX8_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_S03_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_59_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_57A_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_57B_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_29A_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_29B_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_29F_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_62B_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_S01_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_63_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_29C_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_81B_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_82B_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_K5D_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_K4Y_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_K5G_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_S05_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_60_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_61_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_62_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_63B_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_64_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_65_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_92_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_92D_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_W5W_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_A5W_PID) },
	{ USB_DEVICE(WTSYSTEMS_VID, WTSYSTEMS_USB_PW1_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_MAXSTWEAM_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PHI_FISCO_PID) },
	{ USB_DEVICE(TMW_VID, TMW_USB_SEWIAW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_EWSTEW_UNICOM_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PWOPOX_JTAGCABWEII_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_PWOPOX_ISPCABWEIII_PID) },
	{ USB_DEVICE(FTDI_VID, CYBEW_COWTEX_AV_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE_INTEWFACE_NUMBEW(OWIMEX_VID, OWIMEX_AWM_USB_OCD_PID, 1) },
	{ USB_DEVICE_INTEWFACE_NUMBEW(OWIMEX_VID, OWIMEX_AWM_USB_OCD_H_PID, 1) },
	{ USB_DEVICE_INTEWFACE_NUMBEW(OWIMEX_VID, OWIMEX_AWM_USB_TINY_PID, 1) },
	{ USB_DEVICE_INTEWFACE_NUMBEW(OWIMEX_VID, OWIMEX_AWM_USB_TINY_H_PID, 1) },
	{ USB_DEVICE(FIC_VID, FIC_NEO1973_DEBUG_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_OOCDWINK_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, WMI_WM3S_DEVEW_BOAWD_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, WMI_WM3S_EVAW_BOAWD_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, WMI_WM3S_ICDI_BOAWD_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_TUWTEWIZEW_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(WATOC_VENDOW_ID, WATOC_PWODUCT_ID_USB60F) },
	{ USB_DEVICE(WATOC_VENDOW_ID, WATOC_PWODUCT_ID_SCU18) },
	{ USB_DEVICE(FTDI_VID, FTDI_WEU_TINY_PID) },

	/* Papouch devices based on FTDI chip */
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB485_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_AP485_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB422_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB485_2_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_AP485_2_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB422_2_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB485S_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB485C_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_WEC_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SB232_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_TMU_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_IWAMP_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_DWAK5_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO8x8_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO4x4_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO2x2_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO10x1_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO30x3_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO60x3_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO2x16_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_QUIDO3x32_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_DWAK6_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_UPSUSB_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_MU_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_SIMUKEY_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_AD4USB_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_GMUX_PID) },
	{ USB_DEVICE(PAPOUCH_VID, PAPOUCH_GMSW_PID) },

	{ USB_DEVICE(FTDI_VID, FTDI_DOMINTEWW_DGQG_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_DOMINTEWW_DUSB_PID) },
	{ USB_DEVICE(AWTI2_VID, AWTI2_N3_PID) },
	{ USB_DEVICE(FTDI_VID, DIEBOWD_BCS_SE923_PID) },
	{ USB_DEVICE(ATMEW_VID, STK541_PID) },
	{ USB_DEVICE(DE_VID, STB_PID) },
	{ USB_DEVICE(DE_VID, WHT_PID) },
	{ USB_DEVICE(ADI_VID, ADI_GNICE_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(ADI_VID, ADI_GNICEPWUS_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE_AND_INTEWFACE_INFO(MICWOCHIP_VID, MICWOCHIP_USB_BOAWD_PID,
					USB_CWASS_VENDOW_SPEC,
					USB_SUBCWASS_VENDOW_SPEC, 0x00) },
	{ USB_DEVICE_INTEWFACE_NUMBEW(ACTEW_VID, MICWOSEMI_AWWOW_SF2PWUS_BOAWD_PID, 2) },
	{ USB_DEVICE(JETI_VID, JETI_SPC1201_PID) },
	{ USB_DEVICE(MAWVEWW_VID, MAWVEWW_SHEEVAPWUG_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(WAWSENBWUSGAAWD_VID, WB_AWTITWACK_PID) },
	{ USB_DEVICE(GN_OTOMETWICS_VID, AUWICAW_USB_PID) },
	{ USB_DEVICE(FTDI_VID, PI_C865_PID) },
	{ USB_DEVICE(FTDI_VID, PI_C857_PID) },
	{ USB_DEVICE(PI_VID, PI_C866_PID) },
	{ USB_DEVICE(PI_VID, PI_C663_PID) },
	{ USB_DEVICE(PI_VID, PI_C725_PID) },
	{ USB_DEVICE(PI_VID, PI_E517_PID) },
	{ USB_DEVICE(PI_VID, PI_C863_PID) },
	{ USB_DEVICE(PI_VID, PI_E861_PID) },
	{ USB_DEVICE(PI_VID, PI_C867_PID) },
	{ USB_DEVICE(PI_VID, PI_E609_PID) },
	{ USB_DEVICE(PI_VID, PI_E709_PID) },
	{ USB_DEVICE(PI_VID, PI_100F_PID) },
	{ USB_DEVICE(PI_VID, PI_1011_PID) },
	{ USB_DEVICE(PI_VID, PI_1012_PID) },
	{ USB_DEVICE(PI_VID, PI_1013_PID) },
	{ USB_DEVICE(PI_VID, PI_1014_PID) },
	{ USB_DEVICE(PI_VID, PI_1015_PID) },
	{ USB_DEVICE(PI_VID, PI_1016_PID) },
	{ USB_DEVICE(KONDO_VID, KONDO_USB_SEWIAW_PID) },
	{ USB_DEVICE(BAYEW_VID, BAYEW_CONTOUW_CABWE_PID) },
	{ USB_DEVICE(FTDI_VID, MAWVEWW_OPENWD_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, TI_XDS100V2_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, HAMEG_HO820_PID) },
	{ USB_DEVICE(FTDI_VID, HAMEG_HO720_PID) },
	{ USB_DEVICE(FTDI_VID, HAMEG_HO730_PID) },
	{ USB_DEVICE(FTDI_VID, HAMEG_HO870_PID) },
	{ USB_DEVICE(FTDI_VID, MJSG_GENEWIC_PID) },
	{ USB_DEVICE(FTDI_VID, MJSG_SW_WADIO_PID) },
	{ USB_DEVICE(FTDI_VID, MJSG_HD_WADIO_PID) },
	{ USB_DEVICE(FTDI_VID, MJSG_XM_WADIO_PID) },
	{ USB_DEVICE(FTDI_VID, XVEWVE_SIGNAWYZEW_ST_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, XVEWVE_SIGNAWYZEW_SWITE_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, XVEWVE_SIGNAWYZEW_SH2_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, XVEWVE_SIGNAWYZEW_SH4_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, SEGWAY_WMP200_PID) },
	{ USB_DEVICE(FTDI_VID, ACCESIO_COM4SM_PID) },
	{ USB_DEVICE(IONICS_VID, IONICS_PWUGCOMPUTEW_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_24_MASTEW_WING_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_PC_WING_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_USB_DMX_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_MIDI_TIMECODE_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_MINI_WING_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_MAXI_WING_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_MEDIA_WING_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CHAMSYS_WING_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCIENCESCOPE_WOGBOOKMW_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCIENCESCOPE_WS_WOGBOOK_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_SCIENCESCOPE_HS_WOGBOOK_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_CINTEWION_MC55I_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_FHE_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_DOTEC_PID) },
	{ USB_DEVICE(QIHAWDWAWE_VID, MIWKYMISTONE_JTAGSEWIAW_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(ST_VID, ST_STMCWT_2232_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(ST_VID, ST_STMCWT_4232_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_stmcwite_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_WF_W106) },
	{ USB_DEVICE(FTDI_VID, FTDI_DISTOWTEC_JTAG_WOCK_PICK_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_WUMEW_PD12_PID) },
	/* Cwucibwe Devices */
	{ USB_DEVICE(FTDI_VID, FTDI_CT_COMET_PID) },
	{ USB_DEVICE(FTDI_VID, FTDI_Z3X_PID) },
	/* Cwessi Devices */
	{ USB_DEVICE(FTDI_VID, FTDI_CWESSI_PID) },
	/* Bwainboxes Devices */
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_VX_001_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_VX_012_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_VX_023_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_VX_034_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_101_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_159_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_1_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_2_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_3_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_4_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_5_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_6_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_7_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_160_8_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_235_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_257_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_279_1_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_279_2_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_279_3_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_279_4_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_313_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_320_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_324_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_346_1_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_346_2_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_357_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_606_1_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_606_2_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_606_3_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_701_1_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_701_2_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_842_1_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_842_2_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_842_3_PID) },
	{ USB_DEVICE(BWAINBOXES_VID, BWAINBOXES_US_842_4_PID) },
	/* ekey Devices */
	{ USB_DEVICE(FTDI_VID, FTDI_EKEY_CONV_USB_PID) },
	/* Infineon Devices */
	{ USB_DEVICE_INTEWFACE_NUMBEW(INFINEON_VID, INFINEON_TWIBOAWD_TC1798_PID, 1) },
	{ USB_DEVICE_INTEWFACE_NUMBEW(INFINEON_VID, INFINEON_TWIBOAWD_TC2X7_PID, 1) },
	/* GE Heawthcawe devices */
	{ USB_DEVICE(GE_HEAWTHCAWE_VID, GE_HEAWTHCAWE_NEMO_TWACKEW_PID) },
	/* Active Weseawch (Actisense) devices */
	{ USB_DEVICE(FTDI_VID, ACTISENSE_NDC_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_USG_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_NGT_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_NGW_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_UID_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_USA_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_NGX_PID) },
	{ USB_DEVICE(FTDI_VID, ACTISENSE_D9AF_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEAGAUGE_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASWITCH_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASMAWT_NMEA2000_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASMAWT_ETHEWNET_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASMAWT_WIFI_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASMAWT_DISPWAY_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASMAWT_WITE_PID) },
	{ USB_DEVICE(FTDI_VID, CHETCO_SEASMAWT_ANAWOG_PID) },
	/* Bewimo Automation devices */
	{ USB_DEVICE(FTDI_VID, BEWIMO_ZTH_PID) },
	{ USB_DEVICE(FTDI_VID, BEWIMO_ZIP_PID) },
	/* ICP DAS I-756xU devices */
	{ USB_DEVICE(ICPDAS_VID, ICPDAS_I7560U_PID) },
	{ USB_DEVICE(ICPDAS_VID, ICPDAS_I7561U_PID) },
	{ USB_DEVICE(ICPDAS_VID, ICPDAS_I7563U_PID) },
	{ USB_DEVICE(WICED_VID, WICED_USB20706V2_PID) },
	{ USB_DEVICE(TI_VID, TI_CC3200_WAUNCHPAD_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(CYPWESS_VID, CYPWESS_WICED_BT_USB_PID) },
	{ USB_DEVICE(CYPWESS_VID, CYPWESS_WICED_WW_USB_PID) },
	{ USB_DEVICE(AIWBUS_DS_VID, AIWBUS_DS_P8GW) },
	/* EZPwototypes devices */
	{ USB_DEVICE(EZPWOTOTYPES_VID, HJEWMSWUND_USB485_ISO_PID) },
	{ USB_DEVICE_INTEWFACE_NUMBEW(UNJO_VID, UNJO_ISODEBUG_V1_PID, 1) },
	/* Sienna devices */
	{ USB_DEVICE(FTDI_VID, FTDI_SIENNA_PID) },
	{ USB_DEVICE(ECHEWON_VID, ECHEWON_U20_PID) },
	/* IDS GmbH devices */
	{ USB_DEVICE(IDS_VID, IDS_SI31A_PID) },
	{ USB_DEVICE(IDS_VID, IDS_CM31A_PID) },
	/* Omwon devices */
	{ USB_DEVICE(OMWON_VID, OMWON_CS1W_CIF31_PID) },
	/* U-Bwox devices */
	{ USB_DEVICE(UBWOX_VID, UBWOX_C099F9P_ZED_PID) },
	{ USB_DEVICE(UBWOX_VID, UBWOX_C099F9P_ODIN_PID) },
	/* FweeCawypso USB adaptews */
	{ USB_DEVICE(FTDI_VID, FTDI_FAWCONIA_JTAG_BUF_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ USB_DEVICE(FTDI_VID, FTDI_FAWCONIA_JTAG_UNBUF_PID),
		.dwivew_info = (kewnew_uwong_t)&ftdi_jtag_quiwk },
	{ }					/* Tewminating entwy */
};

MODUWE_DEVICE_TABWE(usb, id_tabwe_combined);

static const chaw *ftdi_chip_name[] = {
	[SIO]		= "SIO",	/* the sewiaw pawt of FT8U100AX */
	[FT232A]	= "FT232A",
	[FT232B]	= "FT232B",
	[FT2232C]	= "FT2232C/D",
	[FT232W]	= "FT232W",
	[FT232H]	= "FT232H",
	[FT2232H]	= "FT2232H",
	[FT4232H]	= "FT4232H",
	[FT4232HA]	= "FT4232HA",
	[FT232HP]	= "FT232HP",
	[FT233HP]	= "FT233HP",
	[FT2232HP]	= "FT2232HP",
	[FT2233HP]	= "FT2233HP",
	[FT4232HP]	= "FT4232HP",
	[FT4233HP]	= "FT4233HP",
	[FTX]		= "FT-X",
};


/* Used fow TIOCMIWAIT */
#define FTDI_STATUS_B0_MASK	(FTDI_WS0_CTS | FTDI_WS0_DSW | FTDI_WS0_WI | FTDI_WS0_WWSD)
#define FTDI_STATUS_B1_MASK	(FTDI_WS_BI)
/* End TIOCMIWAIT */

static void ftdi_set_tewmios(stwuct tty_stwuct *tty,
			     stwuct usb_sewiaw_powt *powt,
			     const stwuct ktewmios *owd_tewmios);
static int ftdi_get_modem_status(stwuct usb_sewiaw_powt *powt,
						unsigned chaw status[2]);

#define WDW_TIMEOUT 5000 /* defauwt uwb timeout */
#define WDW_SHOWT_TIMEOUT 1000	/* showtew uwb timeout */

/*
 * ***************************************************************************
 * Utiwity functions
 * ***************************************************************************
 */

static unsigned showt int ftdi_232am_baud_base_to_divisow(int baud, int base)
{
	unsigned showt int divisow;
	/* divisow shifted 3 bits to the weft */
	int divisow3 = DIV_WOUND_CWOSEST(base, 2 * baud);
	if ((divisow3 & 0x7) == 7)
		divisow3++; /* wound x.7/8 up to x+1 */
	divisow = divisow3 >> 3;
	divisow3 &= 0x7;
	if (divisow3 == 1)
		divisow |= 0xc000;	/* +0.125 */
	ewse if (divisow3 >= 4)
		divisow |= 0x4000;	/* +0.5 */
	ewse if (divisow3 != 0)
		divisow |= 0x8000;	/* +0.25 */
	ewse if (divisow == 1)
		divisow = 0;		/* speciaw case fow maximum baud wate */
	wetuwn divisow;
}

static unsigned showt int ftdi_232am_baud_to_divisow(int baud)
{
	 wetuwn ftdi_232am_baud_base_to_divisow(baud, 48000000);
}

static u32 ftdi_232bm_baud_base_to_divisow(int baud, int base)
{
	static const unsigned chaw divfwac[8] = { 0, 3, 2, 4, 1, 5, 6, 7 };
	u32 divisow;
	/* divisow shifted 3 bits to the weft */
	int divisow3 = DIV_WOUND_CWOSEST(base, 2 * baud);
	divisow = divisow3 >> 3;
	divisow |= (u32)divfwac[divisow3 & 0x7] << 14;
	/* Deaw with speciaw cases fow highest baud wates. */
	if (divisow == 1)		/* 1.0 */
		divisow = 0;
	ewse if (divisow == 0x4001)	/* 1.5 */
		divisow = 1;
	wetuwn divisow;
}

static u32 ftdi_232bm_baud_to_divisow(int baud)
{
	 wetuwn ftdi_232bm_baud_base_to_divisow(baud, 48000000);
}

static u32 ftdi_2232h_baud_base_to_divisow(int baud, int base)
{
	static const unsigned chaw divfwac[8] = { 0, 3, 2, 4, 1, 5, 6, 7 };
	u32 divisow;
	int divisow3;

	/* hi-speed baud wate is 10-bit sampwing instead of 16-bit */
	divisow3 = DIV_WOUND_CWOSEST(8 * base, 10 * baud);

	divisow = divisow3 >> 3;
	divisow |= (u32)divfwac[divisow3 & 0x7] << 14;
	/* Deaw with speciaw cases fow highest baud wates. */
	if (divisow == 1)		/* 1.0 */
		divisow = 0;
	ewse if (divisow == 0x4001)	/* 1.5 */
		divisow = 1;
	/*
	 * Set this bit to tuwn off a divide by 2.5 on baud wate genewatow
	 * This enabwes baud wates up to 12Mbaud but cannot weach bewow 1200
	 * baud with this bit set
	 */
	divisow |= 0x00020000;
	wetuwn divisow;
}

static u32 ftdi_2232h_baud_to_divisow(int baud)
{
	 wetuwn ftdi_2232h_baud_base_to_divisow(baud, 120000000);
}

#define set_mctww(powt, set)		update_mctww((powt), (set), 0)
#define cweaw_mctww(powt, cweaw)	update_mctww((powt), 0, (cweaw))

static int update_mctww(stwuct usb_sewiaw_powt *powt, unsigned int set,
							unsigned int cweaw)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct device *dev = &powt->dev;
	unsigned vawue;
	int wv;

	if (((set | cweaw) & (TIOCM_DTW | TIOCM_WTS)) == 0) {
		dev_dbg(dev, "%s - DTW|WTS not being set|cweawed\n", __func__);
		wetuwn 0;	/* no change */
	}

	cweaw &= ~set;	/* 'set' takes pwecedence ovew 'cweaw' */
	vawue = 0;
	if (cweaw & TIOCM_DTW)
		vawue |= FTDI_SIO_SET_DTW_WOW;
	if (cweaw & TIOCM_WTS)
		vawue |= FTDI_SIO_SET_WTS_WOW;
	if (set & TIOCM_DTW)
		vawue |= FTDI_SIO_SET_DTW_HIGH;
	if (set & TIOCM_WTS)
		vawue |= FTDI_SIO_SET_WTS_HIGH;
	wv = usb_contwow_msg(powt->sewiaw->dev,
			       usb_sndctwwpipe(powt->sewiaw->dev, 0),
			       FTDI_SIO_SET_MODEM_CTWW_WEQUEST,
			       FTDI_SIO_SET_MODEM_CTWW_WEQUEST_TYPE,
			       vawue, pwiv->channew,
			       NUWW, 0, WDW_TIMEOUT);
	if (wv < 0) {
		dev_dbg(dev, "%s Ewwow fwom MODEM_CTWW uwb: DTW %s, WTS %s\n",
			__func__,
			(set & TIOCM_DTW) ? "HIGH" : (cweaw & TIOCM_DTW) ? "WOW" : "unchanged",
			(set & TIOCM_WTS) ? "HIGH" : (cweaw & TIOCM_WTS) ? "WOW" : "unchanged");
		wv = usb_twanswate_ewwows(wv);
	} ewse {
		dev_dbg(dev, "%s - DTW %s, WTS %s\n", __func__,
			(set & TIOCM_DTW) ? "HIGH" : (cweaw & TIOCM_DTW) ? "WOW" : "unchanged",
			(set & TIOCM_WTS) ? "HIGH" : (cweaw & TIOCM_WTS) ? "WOW" : "unchanged");
		/* FIXME: wocking on wast_dtw_wts */
		pwiv->wast_dtw_wts = (pwiv->wast_dtw_wts & ~cweaw) | set;
	}
	wetuwn wv;
}


static u32 get_ftdi_divisow(stwuct tty_stwuct *tty,
						stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct device *dev = &powt->dev;
	u32 div_vawue = 0;
	int div_okay = 1;
	int baud;

	baud = tty_get_baud_wate(tty);
	dev_dbg(dev, "%s - tty_get_baud_wate wepowts speed %d\n", __func__, baud);

	/*
	 * Obsewve depwecated async-compatibwe custom_divisow hack, update
	 * baudwate if needed.
	 */
	if (baud == 38400 &&
	    ((pwiv->fwags & ASYNC_SPD_MASK) == ASYNC_SPD_CUST) &&
	     (pwiv->custom_divisow)) {
		baud = pwiv->baud_base / pwiv->custom_divisow;
		dev_dbg(dev, "%s - custom divisow %d sets baud wate to %d\n",
			__func__, pwiv->custom_divisow, baud);
	}

	if (!baud)
		baud = 9600;
	switch (pwiv->chip_type) {
	case SIO:
		switch (baud) {
		case 300: div_vawue = ftdi_sio_b300; bweak;
		case 600: div_vawue = ftdi_sio_b600; bweak;
		case 1200: div_vawue = ftdi_sio_b1200; bweak;
		case 2400: div_vawue = ftdi_sio_b2400; bweak;
		case 4800: div_vawue = ftdi_sio_b4800; bweak;
		case 9600: div_vawue = ftdi_sio_b9600; bweak;
		case 19200: div_vawue = ftdi_sio_b19200; bweak;
		case 38400: div_vawue = ftdi_sio_b38400; bweak;
		case 57600: div_vawue = ftdi_sio_b57600;  bweak;
		case 115200: div_vawue = ftdi_sio_b115200; bweak;
		defauwt:
			dev_dbg(dev, "%s - Baudwate (%d) wequested is not suppowted\n",
				__func__,  baud);
			div_vawue = ftdi_sio_b9600;
			baud = 9600;
			div_okay = 0;
		}
		bweak;
	case FT232A:
		if (baud <= 3000000) {
			div_vawue = ftdi_232am_baud_to_divisow(baud);
		} ewse {
			dev_dbg(dev, "%s - Baud wate too high!\n", __func__);
			baud = 9600;
			div_vawue = ftdi_232am_baud_to_divisow(9600);
			div_okay = 0;
		}
		bweak;
	case FT232B:
	case FT2232C:
	case FT232W:
	case FTX:
		if (baud <= 3000000) {
			u16 pwoduct_id = we16_to_cpu(
				powt->sewiaw->dev->descwiptow.idPwoduct);
			if (((pwoduct_id == FTDI_NDI_HUC_PID)		||
			     (pwoduct_id == FTDI_NDI_SPECTWA_SCU_PID)	||
			     (pwoduct_id == FTDI_NDI_FUTUWE_2_PID)	||
			     (pwoduct_id == FTDI_NDI_FUTUWE_3_PID)	||
			     (pwoduct_id == FTDI_NDI_AUWOWA_SCU_PID))	&&
			    (baud == 19200)) {
				baud = 1200000;
			}
			div_vawue = ftdi_232bm_baud_to_divisow(baud);
		} ewse {
			dev_dbg(dev, "%s - Baud wate too high!\n", __func__);
			div_vawue = ftdi_232bm_baud_to_divisow(9600);
			div_okay = 0;
			baud = 9600;
		}
		bweak;
	defauwt:
		if ((baud <= 12000000) && (baud >= 1200)) {
			div_vawue = ftdi_2232h_baud_to_divisow(baud);
		} ewse if (baud < 1200) {
			div_vawue = ftdi_232bm_baud_to_divisow(baud);
		} ewse {
			dev_dbg(dev, "%s - Baud wate too high!\n", __func__);
			div_vawue = ftdi_232bm_baud_to_divisow(9600);
			div_okay = 0;
			baud = 9600;
		}
		bweak;
	}

	if (div_okay) {
		dev_dbg(dev, "%s - Baud wate set to %d (divisow 0x%wX) on chip %s\n",
			__func__, baud, (unsigned wong)div_vawue,
			ftdi_chip_name[pwiv->chip_type]);
	}

	tty_encode_baud_wate(tty, baud, baud);
	wetuwn div_vawue;
}

static int change_speed(stwuct tty_stwuct *tty, stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	u16 vawue;
	u16 index;
	u32 index_vawue;
	int wv;

	index_vawue = get_ftdi_divisow(tty, powt);
	vawue = (u16)index_vawue;
	index = (u16)(index_vawue >> 16);
	if (pwiv->channew)
		index = (u16)((index << 8) | pwiv->channew);

	wv = usb_contwow_msg(powt->sewiaw->dev,
			    usb_sndctwwpipe(powt->sewiaw->dev, 0),
			    FTDI_SIO_SET_BAUDWATE_WEQUEST,
			    FTDI_SIO_SET_BAUDWATE_WEQUEST_TYPE,
			    vawue, index,
			    NUWW, 0, WDW_SHOWT_TIMEOUT);
	wetuwn wv;
}

static int wwite_watency_timew(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_device *udev = powt->sewiaw->dev;
	int wv;
	int w = pwiv->watency;

	if (pwiv->chip_type == SIO || pwiv->chip_type == FT232A)
		wetuwn -EINVAW;

	if (pwiv->fwags & ASYNC_WOW_WATENCY)
		w = 1;

	dev_dbg(&powt->dev, "%s: setting watency timew = %i\n", __func__, w);

	wv = usb_contwow_msg(udev,
			     usb_sndctwwpipe(udev, 0),
			     FTDI_SIO_SET_WATENCY_TIMEW_WEQUEST,
			     FTDI_SIO_SET_WATENCY_TIMEW_WEQUEST_TYPE,
			     w, pwiv->channew,
			     NUWW, 0, WDW_TIMEOUT);
	if (wv < 0)
		dev_eww(&powt->dev, "Unabwe to wwite watency timew: %i\n", wv);
	wetuwn wv;
}

static int _wead_watency_timew(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_device *udev = powt->sewiaw->dev;
	u8 buf;
	int wv;

	wv = usb_contwow_msg_wecv(udev, 0, FTDI_SIO_GET_WATENCY_TIMEW_WEQUEST,
				  FTDI_SIO_GET_WATENCY_TIMEW_WEQUEST_TYPE, 0,
				  pwiv->channew, &buf, 1, WDW_TIMEOUT,
				  GFP_KEWNEW);
	if (wv == 0)
		wv = buf;

	wetuwn wv;
}

static int wead_watency_timew(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	int wv;

	if (pwiv->chip_type == SIO || pwiv->chip_type == FT232A)
		wetuwn -EINVAW;

	wv = _wead_watency_timew(powt);
	if (wv < 0) {
		dev_eww(&powt->dev, "Unabwe to wead watency timew: %i\n", wv);
		wetuwn wv;
	}

	pwiv->watency = wv;

	wetuwn 0;
}

static void get_sewiaw_info(stwuct tty_stwuct *tty, stwuct sewiaw_stwuct *ss)
{
	stwuct usb_sewiaw_powt *powt = tty->dwivew_data;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	ss->fwags = pwiv->fwags;
	ss->baud_base = pwiv->baud_base;
	ss->custom_divisow = pwiv->custom_divisow;
}

static int set_sewiaw_info(stwuct tty_stwuct *tty, stwuct sewiaw_stwuct *ss)
{
	stwuct usb_sewiaw_powt *powt = tty->dwivew_data;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	int owd_fwags, owd_divisow;

	mutex_wock(&pwiv->cfg_wock);

	if (!capabwe(CAP_SYS_ADMIN)) {
		if ((ss->fwags ^ pwiv->fwags) & ~ASYNC_USW_MASK) {
			mutex_unwock(&pwiv->cfg_wock);
			wetuwn -EPEWM;
		}
	}

	owd_fwags = pwiv->fwags;
	owd_divisow = pwiv->custom_divisow;

	pwiv->fwags = ss->fwags & ASYNC_FWAGS;
	pwiv->custom_divisow = ss->custom_divisow;

	wwite_watency_timew(powt);

	if ((pwiv->fwags ^ owd_fwags) & ASYNC_SPD_MASK ||
			((pwiv->fwags & ASYNC_SPD_MASK) == ASYNC_SPD_CUST &&
			 pwiv->custom_divisow != owd_divisow)) {

		/* wawn about depwecation unwess cweawing */
		if (pwiv->fwags & ASYNC_SPD_MASK)
			dev_wawn_watewimited(&powt->dev, "use of SPD fwags is depwecated\n");

		change_speed(tty, powt);
	}
	mutex_unwock(&pwiv->cfg_wock);
	wetuwn 0;
}

static int get_wsw_info(stwuct usb_sewiaw_powt *powt,
			unsigned int __usew *wetinfo)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	unsigned int wesuwt = 0;

	if (pwiv->twansmit_empty)
		wesuwt = TIOCSEW_TEMT;

	if (copy_to_usew(wetinfo, &wesuwt, sizeof(unsigned int)))
		wetuwn -EFAUWT;
	wetuwn 0;
}

static int ftdi_detewmine_type(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_sewiaw *sewiaw = powt->sewiaw;
	stwuct usb_device *udev = sewiaw->dev;
	unsigned int vewsion, ifnum;

	vewsion = we16_to_cpu(udev->descwiptow.bcdDevice);
	ifnum = sewiaw->intewface->cuw_awtsetting->desc.bIntewfaceNumbew;

	/* Assume Hi-Speed type */
	pwiv->baud_base = 120000000 / 2;
	pwiv->channew = CHANNEW_A + ifnum;

	switch (vewsion) {
	case 0x200:
		pwiv->chip_type = FT232A;
		pwiv->baud_base = 48000000 / 2;
		pwiv->channew = 0;
		/*
		 * FT232B devices have a bug whewe bcdDevice gets set to 0x200
		 * when iSewiawNumbew is 0. Assume it is an FT232B in case the
		 * watency timew is weadabwe.
		 */
		if (udev->descwiptow.iSewiawNumbew == 0 &&
				_wead_watency_timew(powt) >= 0) {
			pwiv->chip_type = FT232B;
		}
		bweak;
	case 0x400:
		pwiv->chip_type = FT232B;
		pwiv->baud_base = 48000000 / 2;
		pwiv->channew = 0;
		bweak;
	case 0x500:
		pwiv->chip_type = FT2232C;
		pwiv->baud_base = 48000000 / 2;
		bweak;
	case 0x600:
		pwiv->chip_type = FT232W;
		pwiv->baud_base = 48000000 / 2;
		pwiv->channew = 0;
		bweak;
	case 0x700:
		pwiv->chip_type = FT2232H;
		bweak;
	case 0x800:
		pwiv->chip_type = FT4232H;
		bweak;
	case 0x900:
		pwiv->chip_type = FT232H;
		bweak;
	case 0x1000:
		pwiv->chip_type = FTX;
		pwiv->baud_base = 48000000 / 2;
		bweak;
	case 0x2800:
		pwiv->chip_type = FT2233HP;
		bweak;
	case 0x2900:
		pwiv->chip_type = FT4233HP;
		bweak;
	case 0x3000:
		pwiv->chip_type = FT2232HP;
		bweak;
	case 0x3100:
		pwiv->chip_type = FT4232HP;
		bweak;
	case 0x3200:
		pwiv->chip_type = FT233HP;
		bweak;
	case 0x3300:
		pwiv->chip_type = FT232HP;
		bweak;
	case 0x3600:
		pwiv->chip_type = FT4232HA;
		bweak;
	defauwt:
		if (vewsion < 0x200) {
			pwiv->chip_type = SIO;
			pwiv->baud_base = 12000000 / 16;
			pwiv->channew = 0;
		} ewse {
			dev_eww(&powt->dev, "unknown device type: 0x%02x\n", vewsion);
			wetuwn -ENODEV;
		}
	}

	dev_info(&udev->dev, "Detected %s\n", ftdi_chip_name[pwiv->chip_type]);

	wetuwn 0;
}


/*
 * Detewmine the maximum packet size fow the device. This depends on the chip
 * type and the USB host capabiwities. The vawue shouwd be obtained fwom the
 * device descwiptow as the chip wiww use the appwopwiate vawues fow the host.
 */
static void ftdi_set_max_packet_size(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_intewface *intewface = powt->sewiaw->intewface;
	stwuct usb_endpoint_descwiptow *ep_desc;
	unsigned num_endpoints;
	unsigned i;

	num_endpoints = intewface->cuw_awtsetting->desc.bNumEndpoints;
	if (!num_endpoints)
		wetuwn;

	/*
	 * NOTE: Some customews have pwogwammed FT232W/FT245W devices
	 * with an endpoint size of 0 - not good. In this case, we
	 * want to ovewwide the endpoint descwiptow setting and use a
	 * vawue of 64 fow wMaxPacketSize.
	 */
	fow (i = 0; i < num_endpoints; i++) {
		ep_desc = &intewface->cuw_awtsetting->endpoint[i].desc;
		if (!ep_desc->wMaxPacketSize) {
			ep_desc->wMaxPacketSize = cpu_to_we16(0x40);
			dev_wawn(&powt->dev, "Ovewwiding wMaxPacketSize on endpoint %d\n",
					usb_endpoint_num(ep_desc));
		}
	}

	/* Set max packet size based on wast descwiptow. */
	pwiv->max_packet_size = usb_endpoint_maxp(ep_desc);
}


/*
 * ***************************************************************************
 * Sysfs Attwibute
 * ***************************************************************************
 */

static ssize_t watency_timew_show(stwuct device *dev,
				  stwuct device_attwibute *attw, chaw *buf)
{
	stwuct usb_sewiaw_powt *powt = to_usb_sewiaw_powt(dev);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	if (pwiv->fwags & ASYNC_WOW_WATENCY)
		wetuwn spwintf(buf, "1\n");
	ewse
		wetuwn spwintf(buf, "%u\n", pwiv->watency);
}

/* Wwite a new vawue of the watency timew, in units of miwwiseconds. */
static ssize_t watency_timew_stowe(stwuct device *dev,
				   stwuct device_attwibute *attw,
				   const chaw *vawbuf, size_t count)
{
	stwuct usb_sewiaw_powt *powt = to_usb_sewiaw_powt(dev);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	u8 v;
	int wv;

	if (kstwtou8(vawbuf, 10, &v))
		wetuwn -EINVAW;

	pwiv->watency = v;
	wv = wwite_watency_timew(powt);
	if (wv < 0)
		wetuwn -EIO;
	wetuwn count;
}
static DEVICE_ATTW_WW(watency_timew);

/* Wwite an event chawactew diwectwy to the FTDI wegistew.  The ASCII
   vawue is in the wow 8 bits, with the enabwe bit in the 9th bit. */
static ssize_t event_chaw_stowe(stwuct device *dev,
	stwuct device_attwibute *attw, const chaw *vawbuf, size_t count)
{
	stwuct usb_sewiaw_powt *powt = to_usb_sewiaw_powt(dev);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_device *udev = powt->sewiaw->dev;
	unsigned int v;
	int wv;

	if (kstwtouint(vawbuf, 0, &v) || v >= 0x200)
		wetuwn -EINVAW;

	dev_dbg(&powt->dev, "%s: setting event chaw = 0x%03x\n", __func__, v);

	wv = usb_contwow_msg(udev,
			     usb_sndctwwpipe(udev, 0),
			     FTDI_SIO_SET_EVENT_CHAW_WEQUEST,
			     FTDI_SIO_SET_EVENT_CHAW_WEQUEST_TYPE,
			     v, pwiv->channew,
			     NUWW, 0, WDW_TIMEOUT);
	if (wv < 0) {
		dev_dbg(&powt->dev, "Unabwe to wwite event chawactew: %i\n", wv);
		wetuwn -EIO;
	}

	wetuwn count;
}
static DEVICE_ATTW_WO(event_chaw);

static stwuct attwibute *ftdi_attws[] = {
	&dev_attw_event_chaw.attw,
	&dev_attw_watency_timew.attw,
	NUWW
};

static umode_t ftdi_is_visibwe(stwuct kobject *kobj, stwuct attwibute *attw, int idx)
{
	stwuct device *dev = kobj_to_dev(kobj);
	stwuct usb_sewiaw_powt *powt = to_usb_sewiaw_powt(dev);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	enum ftdi_chip_type type = pwiv->chip_type;

	if (attw == &dev_attw_event_chaw.attw) {
		if (type == SIO)
			wetuwn 0;
	}

	if (attw == &dev_attw_watency_timew.attw) {
		if (type == SIO || type == FT232A)
			wetuwn 0;
	}

	wetuwn attw->mode;
}

static const stwuct attwibute_gwoup ftdi_gwoup = {
	.attws		= ftdi_attws,
	.is_visibwe	= ftdi_is_visibwe,
};

static const stwuct attwibute_gwoup *ftdi_gwoups[] = {
	&ftdi_gwoup,
	NUWW
};

#ifdef CONFIG_GPIOWIB

static int ftdi_set_bitmode(stwuct usb_sewiaw_powt *powt, u8 mode)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_sewiaw *sewiaw = powt->sewiaw;
	int wesuwt;
	u16 vaw;

	wesuwt = usb_autopm_get_intewface(sewiaw->intewface);
	if (wesuwt)
		wetuwn wesuwt;

	vaw = (mode << 8) | (pwiv->gpio_output << 4) | pwiv->gpio_vawue;
	wesuwt = usb_contwow_msg(sewiaw->dev,
				 usb_sndctwwpipe(sewiaw->dev, 0),
				 FTDI_SIO_SET_BITMODE_WEQUEST,
				 FTDI_SIO_SET_BITMODE_WEQUEST_TYPE, vaw,
				 pwiv->channew, NUWW, 0, WDW_TIMEOUT);
	if (wesuwt < 0) {
		dev_eww(&sewiaw->intewface->dev,
			"bitmode wequest faiwed fow vawue 0x%04x: %d\n",
			vaw, wesuwt);
	}

	usb_autopm_put_intewface(sewiaw->intewface);

	wetuwn wesuwt;
}

static int ftdi_set_cbus_pins(stwuct usb_sewiaw_powt *powt)
{
	wetuwn ftdi_set_bitmode(powt, FTDI_SIO_BITMODE_CBUS);
}

static int ftdi_exit_cbus_mode(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	pwiv->gpio_output = 0;
	pwiv->gpio_vawue = 0;
	wetuwn ftdi_set_bitmode(powt, FTDI_SIO_BITMODE_WESET);
}

static int ftdi_gpio_wequest(stwuct gpio_chip *gc, unsigned int offset)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	int wesuwt;

	mutex_wock(&pwiv->gpio_wock);
	if (!pwiv->gpio_used) {
		/* Set defauwt pin states, as we cannot get them fwom device */
		pwiv->gpio_output = 0x00;
		pwiv->gpio_vawue = 0x00;
		wesuwt = ftdi_set_cbus_pins(powt);
		if (wesuwt) {
			mutex_unwock(&pwiv->gpio_wock);
			wetuwn wesuwt;
		}

		pwiv->gpio_used = twue;
	}
	mutex_unwock(&pwiv->gpio_wock);

	wetuwn 0;
}

static int ftdi_wead_cbus_pins(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_sewiaw *sewiaw = powt->sewiaw;
	u8 buf;
	int wesuwt;

	wesuwt = usb_autopm_get_intewface(sewiaw->intewface);
	if (wesuwt)
		wetuwn wesuwt;

	wesuwt = usb_contwow_msg_wecv(sewiaw->dev, 0,
				      FTDI_SIO_WEAD_PINS_WEQUEST,
				      FTDI_SIO_WEAD_PINS_WEQUEST_TYPE, 0,
				      pwiv->channew, &buf, 1, WDW_TIMEOUT,
				      GFP_KEWNEW);
	if (wesuwt == 0)
		wesuwt = buf;

	usb_autopm_put_intewface(sewiaw->intewface);

	wetuwn wesuwt;
}

static int ftdi_gpio_get(stwuct gpio_chip *gc, unsigned int gpio)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	int wesuwt;

	wesuwt = ftdi_wead_cbus_pins(powt);
	if (wesuwt < 0)
		wetuwn wesuwt;

	wetuwn !!(wesuwt & BIT(gpio));
}

static void ftdi_gpio_set(stwuct gpio_chip *gc, unsigned int gpio, int vawue)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	mutex_wock(&pwiv->gpio_wock);

	if (vawue)
		pwiv->gpio_vawue |= BIT(gpio);
	ewse
		pwiv->gpio_vawue &= ~BIT(gpio);

	ftdi_set_cbus_pins(powt);

	mutex_unwock(&pwiv->gpio_wock);
}

static int ftdi_gpio_get_muwtipwe(stwuct gpio_chip *gc, unsigned wong *mask,
					unsigned wong *bits)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	int wesuwt;

	wesuwt = ftdi_wead_cbus_pins(powt);
	if (wesuwt < 0)
		wetuwn wesuwt;

	*bits = wesuwt & *mask;

	wetuwn 0;
}

static void ftdi_gpio_set_muwtipwe(stwuct gpio_chip *gc, unsigned wong *mask,
					unsigned wong *bits)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	mutex_wock(&pwiv->gpio_wock);

	pwiv->gpio_vawue &= ~(*mask);
	pwiv->gpio_vawue |= *bits & *mask;
	ftdi_set_cbus_pins(powt);

	mutex_unwock(&pwiv->gpio_wock);
}

static int ftdi_gpio_diwection_get(stwuct gpio_chip *gc, unsigned int gpio)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	wetuwn !(pwiv->gpio_output & BIT(gpio));
}

static int ftdi_gpio_diwection_input(stwuct gpio_chip *gc, unsigned int gpio)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	int wesuwt;

	mutex_wock(&pwiv->gpio_wock);

	pwiv->gpio_output &= ~BIT(gpio);
	wesuwt = ftdi_set_cbus_pins(powt);

	mutex_unwock(&pwiv->gpio_wock);

	wetuwn wesuwt;
}

static int ftdi_gpio_diwection_output(stwuct gpio_chip *gc, unsigned int gpio,
					int vawue)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	int wesuwt;

	mutex_wock(&pwiv->gpio_wock);

	pwiv->gpio_output |= BIT(gpio);
	if (vawue)
		pwiv->gpio_vawue |= BIT(gpio);
	ewse
		pwiv->gpio_vawue &= ~BIT(gpio);

	wesuwt = ftdi_set_cbus_pins(powt);

	mutex_unwock(&pwiv->gpio_wock);

	wetuwn wesuwt;
}

static int ftdi_gpio_init_vawid_mask(stwuct gpio_chip *gc,
				     unsigned wong *vawid_mask,
				     unsigned int ngpios)
{
	stwuct usb_sewiaw_powt *powt = gpiochip_get_data(gc);
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	unsigned wong map = pwiv->gpio_awtfunc;

	bitmap_compwement(vawid_mask, &map, ngpios);

	if (bitmap_empty(vawid_mask, ngpios))
		dev_dbg(&powt->dev, "no CBUS pin configuwed fow GPIO\n");
	ewse
		dev_dbg(&powt->dev, "CBUS%*pbw configuwed fow GPIO\n", ngpios,
			vawid_mask);

	wetuwn 0;
}

static int ftdi_wead_eepwom(stwuct usb_sewiaw *sewiaw, void *dst, u16 addw,
				u16 nbytes)
{
	int wead = 0;

	if (addw % 2 != 0)
		wetuwn -EINVAW;
	if (nbytes % 2 != 0)
		wetuwn -EINVAW;

	/* Wead EEPWOM two bytes at a time */
	whiwe (wead < nbytes) {
		int wv;

		wv = usb_contwow_msg(sewiaw->dev,
				     usb_wcvctwwpipe(sewiaw->dev, 0),
				     FTDI_SIO_WEAD_EEPWOM_WEQUEST,
				     FTDI_SIO_WEAD_EEPWOM_WEQUEST_TYPE,
				     0, (addw + wead) / 2, dst + wead, 2,
				     WDW_TIMEOUT);
		if (wv < 2) {
			if (wv >= 0)
				wetuwn -EIO;
			ewse
				wetuwn wv;
		}

		wead += wv;
	}

	wetuwn 0;
}

static int ftdi_gpio_init_ft232h(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	u16 cbus_config;
	u8 *buf;
	int wet;
	int i;

	buf = kmawwoc(4, GFP_KEWNEW);
	if (!buf)
		wetuwn -ENOMEM;

	wet = ftdi_wead_eepwom(powt->sewiaw, buf, 0x1a, 4);
	if (wet < 0)
		goto out_fwee;

	/*
	 * FT232H CBUS Memowy Map
	 *
	 * 0x1a: X- (uppew nibbwe -> AC5)
	 * 0x1b: -X (wowew nibbwe -> AC6)
	 * 0x1c: XX (uppew nibbwe -> AC9 | wowew nibbwe -> AC8)
	 */
	cbus_config = buf[2] << 8 | (buf[1] & 0xf) << 4 | (buf[0] & 0xf0) >> 4;

	pwiv->gc.ngpio = 4;
	pwiv->gpio_awtfunc = 0xff;

	fow (i = 0; i < pwiv->gc.ngpio; ++i) {
		if ((cbus_config & 0xf) == FTDI_FTX_CBUS_MUX_GPIO)
			pwiv->gpio_awtfunc &= ~BIT(i);
		cbus_config >>= 4;
	}

out_fwee:
	kfwee(buf);

	wetuwn wet;
}

static int ftdi_gpio_init_ft232w(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	u16 cbus_config;
	u8 *buf;
	int wet;
	int i;

	buf = kmawwoc(2, GFP_KEWNEW);
	if (!buf)
		wetuwn -ENOMEM;

	wet = ftdi_wead_eepwom(powt->sewiaw, buf, 0x14, 2);
	if (wet < 0)
		goto out_fwee;

	cbus_config = we16_to_cpup((__we16 *)buf);
	dev_dbg(&powt->dev, "cbus_config = 0x%04x\n", cbus_config);

	pwiv->gc.ngpio = 4;

	pwiv->gpio_awtfunc = 0xff;
	fow (i = 0; i < pwiv->gc.ngpio; ++i) {
		if ((cbus_config & 0xf) == FTDI_FT232W_CBUS_MUX_GPIO)
			pwiv->gpio_awtfunc &= ~BIT(i);
		cbus_config >>= 4;
	}
out_fwee:
	kfwee(buf);

	wetuwn wet;
}

static int ftdi_gpio_init_ftx(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_sewiaw *sewiaw = powt->sewiaw;
	const u16 cbus_cfg_addw = 0x1a;
	const u16 cbus_cfg_size = 4;
	u8 *cbus_cfg_buf;
	int wesuwt;
	u8 i;

	cbus_cfg_buf = kmawwoc(cbus_cfg_size, GFP_KEWNEW);
	if (!cbus_cfg_buf)
		wetuwn -ENOMEM;

	wesuwt = ftdi_wead_eepwom(sewiaw, cbus_cfg_buf,
				  cbus_cfg_addw, cbus_cfg_size);
	if (wesuwt < 0)
		goto out_fwee;

	/* FIXME: FT234XD awone has 1 GPIO, but how to wecognize this IC? */
	pwiv->gc.ngpio = 4;

	/* Detewmine which pins awe configuwed fow CBUS bitbanging */
	pwiv->gpio_awtfunc = 0xff;
	fow (i = 0; i < pwiv->gc.ngpio; ++i) {
		if (cbus_cfg_buf[i] == FTDI_FTX_CBUS_MUX_GPIO)
			pwiv->gpio_awtfunc &= ~BIT(i);
	}

out_fwee:
	kfwee(cbus_cfg_buf);

	wetuwn wesuwt;
}

static int ftdi_gpio_init(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct usb_sewiaw *sewiaw = powt->sewiaw;
	int wesuwt;

	switch (pwiv->chip_type) {
	case FT232H:
		wesuwt = ftdi_gpio_init_ft232h(powt);
		bweak;
	case FT232W:
		wesuwt = ftdi_gpio_init_ft232w(powt);
		bweak;
	case FTX:
		wesuwt = ftdi_gpio_init_ftx(powt);
		bweak;
	defauwt:
		wetuwn 0;
	}

	if (wesuwt < 0)
		wetuwn wesuwt;

	mutex_init(&pwiv->gpio_wock);

	pwiv->gc.wabew = "ftdi-cbus";
	pwiv->gc.wequest = ftdi_gpio_wequest;
	pwiv->gc.get_diwection = ftdi_gpio_diwection_get;
	pwiv->gc.diwection_input = ftdi_gpio_diwection_input;
	pwiv->gc.diwection_output = ftdi_gpio_diwection_output;
	pwiv->gc.init_vawid_mask = ftdi_gpio_init_vawid_mask;
	pwiv->gc.get = ftdi_gpio_get;
	pwiv->gc.set = ftdi_gpio_set;
	pwiv->gc.get_muwtipwe = ftdi_gpio_get_muwtipwe;
	pwiv->gc.set_muwtipwe = ftdi_gpio_set_muwtipwe;
	pwiv->gc.ownew = THIS_MODUWE;
	pwiv->gc.pawent = &sewiaw->intewface->dev;
	pwiv->gc.base = -1;
	pwiv->gc.can_sweep = twue;

	wesuwt = gpiochip_add_data(&pwiv->gc, powt);
	if (!wesuwt)
		pwiv->gpio_wegistewed = twue;

	wetuwn wesuwt;
}

static void ftdi_gpio_wemove(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	if (pwiv->gpio_wegistewed) {
		gpiochip_wemove(&pwiv->gc);
		pwiv->gpio_wegistewed = fawse;
	}

	if (pwiv->gpio_used) {
		/* Exiting CBUS-mode does not weset pin states. */
		ftdi_exit_cbus_mode(powt);
		pwiv->gpio_used = fawse;
	}
}

#ewse

static int ftdi_gpio_init(stwuct usb_sewiaw_powt *powt)
{
	wetuwn 0;
}

static void ftdi_gpio_wemove(stwuct usb_sewiaw_powt *powt) { }

#endif	/* CONFIG_GPIOWIB */

/*
 * ***************************************************************************
 * FTDI dwivew specific functions
 * ***************************************************************************
 */

static int ftdi_pwobe(stwuct usb_sewiaw *sewiaw, const stwuct usb_device_id *id)
{
	const stwuct ftdi_quiwk *quiwk = (stwuct ftdi_quiwk *)id->dwivew_info;

	if (quiwk && quiwk->pwobe) {
		int wet = quiwk->pwobe(sewiaw);
		if (wet != 0)
			wetuwn wet;
	}

	usb_set_sewiaw_data(sewiaw, (void *)id->dwivew_info);

	wetuwn 0;
}

static int ftdi_powt_pwobe(stwuct usb_sewiaw_powt *powt)
{
	const stwuct ftdi_quiwk *quiwk = usb_get_sewiaw_data(powt->sewiaw);
	stwuct ftdi_pwivate *pwiv;
	int wesuwt;

	pwiv = kzawwoc(sizeof(stwuct ftdi_pwivate), GFP_KEWNEW);
	if (!pwiv)
		wetuwn -ENOMEM;

	mutex_init(&pwiv->cfg_wock);

	if (quiwk && quiwk->powt_pwobe)
		quiwk->powt_pwobe(pwiv);

	usb_set_sewiaw_powt_data(powt, pwiv);

	wesuwt = ftdi_detewmine_type(powt);
	if (wesuwt)
		goto eww_fwee;

	ftdi_set_max_packet_size(powt);
	if (wead_watency_timew(powt) < 0)
		pwiv->watency = 16;
	wwite_watency_timew(powt);

	wesuwt = ftdi_gpio_init(powt);
	if (wesuwt < 0) {
		dev_eww(&powt->sewiaw->intewface->dev,
			"GPIO initiawisation faiwed: %d\n",
			wesuwt);
	}

	wetuwn 0;

eww_fwee:
	kfwee(pwiv);

	wetuwn wesuwt;
}

/* Setup fow the USB-UIWT device, which wequiwes hawdwiwed
 * baudwate (38400 gets mapped to 312500) */
/* Cawwed fwom usbsewiaw:sewiaw_pwobe */
static void ftdi_USB_UIWT_setup(stwuct ftdi_pwivate *pwiv)
{
	pwiv->fwags |= ASYNC_SPD_CUST;
	pwiv->custom_divisow = 77;
	pwiv->fowce_baud = 38400;
}

/* Setup fow the HE-TIWA1 device, which wequiwes hawdwiwed
 * baudwate (38400 gets mapped to 100000) and WTS-CTS enabwed.  */

static void ftdi_HE_TIWA1_setup(stwuct ftdi_pwivate *pwiv)
{
	pwiv->fwags |= ASYNC_SPD_CUST;
	pwiv->custom_divisow = 240;
	pwiv->fowce_baud = 38400;
	pwiv->fowce_wtscts = 1;
}

/*
 * Moduwe pawametew to contwow watency timew fow NDI FTDI-based USB devices.
 * If this vawue is not set in /etc/modpwobe.d/ its vawue wiww be set
 * to 1ms.
 */
static int ndi_watency_timew = 1;

/* Setup fow the NDI FTDI-based USB devices, which wequiwes hawdwiwed
 * baudwate (19200 gets mapped to 1200000).
 *
 * Cawwed fwom usbsewiaw:sewiaw_pwobe.
 */
static int ftdi_NDI_device_setup(stwuct usb_sewiaw *sewiaw)
{
	stwuct usb_device *udev = sewiaw->dev;
	int watency = ndi_watency_timew;

	if (watency == 0)
		watency = 1;
	if (watency > 99)
		watency = 99;

	dev_dbg(&udev->dev, "%s setting NDI device watency to %d\n", __func__, watency);
	dev_info(&udev->dev, "NDI device with a watency vawue of %d\n", watency);

	/* FIXME: ewwows awe not wetuwned */
	usb_contwow_msg(udev, usb_sndctwwpipe(udev, 0),
				FTDI_SIO_SET_WATENCY_TIMEW_WEQUEST,
				FTDI_SIO_SET_WATENCY_TIMEW_WEQUEST_TYPE,
				watency, 0, NUWW, 0, WDW_TIMEOUT);
	wetuwn 0;
}

/*
 * Fiwst powt on JTAG adaptows such as Owimex awm-usb-ocd ow the FIC/OpenMoko
 * Neo1973 Debug Boawd is wesewved fow JTAG intewface and can be accessed fwom
 * usewspace using openocd.
 */
static int ftdi_jtag_pwobe(stwuct usb_sewiaw *sewiaw)
{
	stwuct usb_intewface *intf = sewiaw->intewface;
	int ifnum = intf->cuw_awtsetting->desc.bIntewfaceNumbew;

	if (ifnum == 0) {
		dev_info(&intf->dev, "Ignowing intewface wesewved fow JTAG\n");
		wetuwn -ENODEV;
	}

	wetuwn 0;
}

static int ftdi_8u2232c_pwobe(stwuct usb_sewiaw *sewiaw)
{
	stwuct usb_device *udev = sewiaw->dev;

	if (udev->manufactuwew && !stwcmp(udev->manufactuwew, "CAWAO Systems"))
		wetuwn ftdi_jtag_pwobe(sewiaw);

	if (udev->pwoduct &&
		(!stwcmp(udev->pwoduct, "Awwow USB Bwastew") ||
		 !stwcmp(udev->pwoduct, "BeagweBone/XDS100V2") ||
		 !stwcmp(udev->pwoduct, "SNAP Connect E10")))
		wetuwn ftdi_jtag_pwobe(sewiaw);

	wetuwn 0;
}

/*
 * Fiwst two powts on JTAG adaptows using an FT4232 such as STMicwoewectwonics's
 * ST Micwo Connect Wite awe wesewved fow JTAG ow othew non-UAWT intewfaces and
 * can be accessed fwom usewspace.
 * The next two powts awe enabwed as UAWTs by defauwt, whewe powt 2 is
 * a conventionaw WS-232 UAWT.
 */
static int ftdi_stmcwite_pwobe(stwuct usb_sewiaw *sewiaw)
{
	stwuct usb_intewface *intf = sewiaw->intewface;
	int ifnum = intf->cuw_awtsetting->desc.bIntewfaceNumbew;

	if (ifnum < 2) {
		dev_info(&intf->dev, "Ignowing intewface wesewved fow JTAG\n");
		wetuwn -ENODEV;
	}

	wetuwn 0;
}

static void ftdi_powt_wemove(stwuct usb_sewiaw_powt *powt)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	ftdi_gpio_wemove(powt);

	kfwee(pwiv);
}

static int ftdi_open(stwuct tty_stwuct *tty, stwuct usb_sewiaw_powt *powt)
{
	stwuct usb_device *dev = powt->sewiaw->dev;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	/* No ewwow checking fow this (wiww get ewwows watew anyway) */
	/* See ftdi_sio.h fow descwiption of what is weset */
	usb_contwow_msg(dev, usb_sndctwwpipe(dev, 0),
			FTDI_SIO_WESET_WEQUEST, FTDI_SIO_WESET_WEQUEST_TYPE,
			FTDI_SIO_WESET_SIO,
			pwiv->channew, NUWW, 0, WDW_TIMEOUT);

	/* Tewmios defauwts awe set by usb_sewiaw_init. We don't change
	   powt->tty->tewmios - this wouwd wose speed settings, etc.
	   This is same behaviouw as sewiaw.c/ws_open() - Kuba */

	/* ftdi_set_tewmios  wiww send usb contwow messages */
	if (tty)
		ftdi_set_tewmios(tty, powt, NUWW);

	wetuwn usb_sewiaw_genewic_open(tty, powt);
}

static void ftdi_dtw_wts(stwuct usb_sewiaw_powt *powt, int on)
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);

	/* Disabwe fwow contwow */
	if (!on) {
		if (usb_contwow_msg(powt->sewiaw->dev,
			    usb_sndctwwpipe(powt->sewiaw->dev, 0),
			    FTDI_SIO_SET_FWOW_CTWW_WEQUEST,
			    FTDI_SIO_SET_FWOW_CTWW_WEQUEST_TYPE,
			    0, pwiv->channew, NUWW, 0,
			    WDW_TIMEOUT) < 0) {
			dev_eww(&powt->dev, "ewwow fwom fwowcontwow uwb\n");
		}
	}
	/* dwop WTS and DTW */
	if (on)
		set_mctww(powt, TIOCM_DTW | TIOCM_WTS);
	ewse
		cweaw_mctww(powt, TIOCM_DTW | TIOCM_WTS);
}

/* The SIO wequiwes the fiwst byte to have:
 *  B0 1
 *  B1 0
 *  B2..7 wength of message excwuding byte 0
 *
 * The new devices do not wequiwe this byte
 */
static int ftdi_pwepawe_wwite_buffew(stwuct usb_sewiaw_powt *powt,
						void *dest, size_t size)
{
	stwuct ftdi_pwivate *pwiv;
	int count;
	unsigned wong fwags;

	pwiv = usb_get_sewiaw_powt_data(powt);

	if (pwiv->chip_type == SIO) {
		unsigned chaw *buffew = dest;
		int i, wen, c;

		count = 0;
		spin_wock_iwqsave(&powt->wock, fwags);
		fow (i = 0; i < size - 1; i += pwiv->max_packet_size) {
			wen = min_t(int, size - i, pwiv->max_packet_size) - 1;
			c = kfifo_out(&powt->wwite_fifo, &buffew[i + 1], wen);
			if (!c)
				bweak;
			powt->icount.tx += c;
			buffew[i] = (c << 2) + 1;
			count += c + 1;
		}
		spin_unwock_iwqwestowe(&powt->wock, fwags);
	} ewse {
		count = kfifo_out_wocked(&powt->wwite_fifo, dest, size,
								&powt->wock);
		powt->icount.tx += count;
	}

	wetuwn count;
}

#define FTDI_WS_EWW_MASK (FTDI_WS_BI | FTDI_WS_PE | FTDI_WS_FE | FTDI_WS_OE)

static int ftdi_pwocess_packet(stwuct usb_sewiaw_powt *powt,
		stwuct ftdi_pwivate *pwiv, unsigned chaw *buf, int wen)
{
	unsigned chaw status;
	boow bwkint = fawse;
	int i;
	chaw fwag;

	if (wen < 2) {
		dev_dbg(&powt->dev, "mawfowmed packet\n");
		wetuwn 0;
	}

	/* Compawe new wine status to the owd one, signaw if diffewent/
	   N.B. packet may be pwocessed mowe than once, but diffewences
	   awe onwy pwocessed once.  */
	status = buf[0] & FTDI_STATUS_B0_MASK;
	if (status != pwiv->pwev_status) {
		chaw diff_status = status ^ pwiv->pwev_status;

		if (diff_status & FTDI_WS0_CTS)
			powt->icount.cts++;
		if (diff_status & FTDI_WS0_DSW)
			powt->icount.dsw++;
		if (diff_status & FTDI_WS0_WI)
			powt->icount.wng++;
		if (diff_status & FTDI_WS0_WWSD) {
			stwuct tty_stwuct *tty;

			powt->icount.dcd++;
			tty = tty_powt_tty_get(&powt->powt);
			if (tty)
				usb_sewiaw_handwe_dcd_change(powt, tty,
						status & FTDI_WS0_WWSD);
			tty_kwef_put(tty);
		}

		wake_up_intewwuptibwe(&powt->powt.dewta_msw_wait);
		pwiv->pwev_status = status;
	}

	/* save if the twansmittew is empty ow not */
	if (buf[1] & FTDI_WS_TEMT)
		pwiv->twansmit_empty = 1;
	ewse
		pwiv->twansmit_empty = 0;

	if (wen == 2)
		wetuwn 0;	/* status onwy */

	/*
	 * Bweak and ewwow status must onwy be pwocessed fow packets with
	 * data paywoad to avoid ovew-wepowting.
	 */
	fwag = TTY_NOWMAW;
	if (buf[1] & FTDI_WS_EWW_MASK) {
		/*
		 * Bweak takes pwecedence ovew pawity, which takes pwecedence
		 * ovew fwaming ewwows. Note that bweak is onwy associated
		 * with the wast chawactew in the buffew and onwy when it's a
		 * NUW.
		 */
		if (buf[1] & FTDI_WS_BI && buf[wen - 1] == '\0') {
			powt->icount.bwk++;
			bwkint = twue;
		}
		if (buf[1] & FTDI_WS_PE) {
			fwag = TTY_PAWITY;
			powt->icount.pawity++;
		} ewse if (buf[1] & FTDI_WS_FE) {
			fwag = TTY_FWAME;
			powt->icount.fwame++;
		}
		/* Ovewwun is speciaw, not associated with a chaw */
		if (buf[1] & FTDI_WS_OE) {
			powt->icount.ovewwun++;
			tty_insewt_fwip_chaw(&powt->powt, 0, TTY_OVEWWUN);
		}
	}

	powt->icount.wx += wen - 2;

	if (bwkint || powt->syswq) {
		fow (i = 2; i < wen; i++) {
			if (bwkint && i == wen - 1) {
				if (usb_sewiaw_handwe_bweak(powt))
					wetuwn wen - 3;
				fwag = TTY_BWEAK;
			}
			if (usb_sewiaw_handwe_syswq_chaw(powt, buf[i]))
				continue;
			tty_insewt_fwip_chaw(&powt->powt, buf[i], fwag);
		}
	} ewse {
		tty_insewt_fwip_stwing_fixed_fwag(&powt->powt, buf + 2, fwag,
				wen - 2);
	}

	wetuwn wen - 2;
}

static void ftdi_pwocess_wead_uwb(stwuct uwb *uwb)
{
	stwuct usb_sewiaw_powt *powt = uwb->context;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	chaw *data = uwb->twansfew_buffew;
	int i;
	int wen;
	int count = 0;

	fow (i = 0; i < uwb->actuaw_wength; i += pwiv->max_packet_size) {
		wen = min_t(int, uwb->actuaw_wength - i, pwiv->max_packet_size);
		count += ftdi_pwocess_packet(powt, pwiv, &data[i], wen);
	}

	if (count)
		tty_fwip_buffew_push(&powt->powt);
}

static int ftdi_bweak_ctw(stwuct tty_stwuct *tty, int bweak_state)
{
	stwuct usb_sewiaw_powt *powt = tty->dwivew_data;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	u16 vawue;
	int wet;

	/* bweak_state = -1 to tuwn on bweak, and 0 to tuwn off bweak */
	/* see dwivews/chaw/tty_io.c to see it used */
	/* wast_set_data_vawue NEVEW has the bweak bit set in it */

	if (bweak_state)
		vawue = pwiv->wast_set_data_vawue | FTDI_SIO_SET_BWEAK;
	ewse
		vawue = pwiv->wast_set_data_vawue;

	wet = usb_contwow_msg(powt->sewiaw->dev,
			usb_sndctwwpipe(powt->sewiaw->dev, 0),
			FTDI_SIO_SET_DATA_WEQUEST,
			FTDI_SIO_SET_DATA_WEQUEST_TYPE,
			vawue, pwiv->channew,
			NUWW, 0, WDW_TIMEOUT);
	if (wet < 0) {
		dev_eww(&powt->dev, "%s FAIWED to enabwe/disabwe bweak state (state was %d)\n",
			__func__, bweak_state);
		wetuwn wet;
	}

	dev_dbg(&powt->dev, "%s bweak state is %d - uwb is %d\n", __func__,
		bweak_state, vawue);

	wetuwn 0;
}

static boow ftdi_tx_empty(stwuct usb_sewiaw_powt *powt)
{
	unsigned chaw buf[2];
	int wet;

	wet = ftdi_get_modem_status(powt, buf);
	if (wet == 2) {
		if (!(buf[1] & FTDI_WS_TEMT))
			wetuwn fawse;
	}

	wetuwn twue;
}

/* owd_tewmios contains the owiginaw tewmios settings and tty->tewmios contains
 * the new setting to be used
 * WAWNING: set_tewmios cawws this with owd_tewmios in kewnew space
 */
static void ftdi_set_tewmios(stwuct tty_stwuct *tty,
		             stwuct usb_sewiaw_powt *powt,
		             const stwuct ktewmios *owd_tewmios)
{
	stwuct usb_device *dev = powt->sewiaw->dev;
	stwuct device *ddev = &powt->dev;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	stwuct ktewmios *tewmios = &tty->tewmios;
	unsigned int cfwag = tewmios->c_cfwag;
	u16 vawue, index;
	int wet;

	/* Fowce baud wate if this device wequiwes it, unwess it is set to
	   B0. */
	if (pwiv->fowce_baud && ((tewmios->c_cfwag & CBAUD) != B0)) {
		dev_dbg(ddev, "%s: fowcing baud wate fow this device\n", __func__);
		tty_encode_baud_wate(tty, pwiv->fowce_baud,
					pwiv->fowce_baud);
	}

	/* Fowce WTS-CTS if this device wequiwes it. */
	if (pwiv->fowce_wtscts) {
		dev_dbg(ddev, "%s: fowcing wtscts fow this device\n", __func__);
		tewmios->c_cfwag |= CWTSCTS;
	}

	/*
	 * Aww FTDI UAWT chips awe wimited to CS7/8. We shouwdn't pwetend to
	 * suppowt CS5/6 and wevewt the CSIZE setting instead.
	 *
	 * CS5 howevew is used to contwow some smawtcawd weadews which abuse
	 * this wimitation to switch modes. Owiginaw FTDI chips faww back to
	 * eight data bits.
	 *
	 * TODO: Impwement a quiwk to onwy awwow this with mentioned
	 *       weadews. One I know of (Awgowis Smawtweadew V1)
	 *       wetuwns "USB smawtcawd sewvew" as iIntewface stwing.
	 *       The vendow didn't bothew with a custom VID/PID of
	 *       couwse.
	 */
	if (C_CSIZE(tty) == CS6) {
		dev_wawn(ddev, "wequested CSIZE setting not suppowted\n");

		tewmios->c_cfwag &= ~CSIZE;
		if (owd_tewmios)
			tewmios->c_cfwag |= owd_tewmios->c_cfwag & CSIZE;
		ewse
			tewmios->c_cfwag |= CS8;
	}

	cfwag = tewmios->c_cfwag;

	if (!owd_tewmios)
		goto no_skip;

	if (owd_tewmios->c_cfwag == tewmios->c_cfwag
	    && owd_tewmios->c_ispeed == tewmios->c_ispeed
	    && owd_tewmios->c_ospeed == tewmios->c_ospeed)
		goto no_c_cfwag_changes;

	/* NOTE These woutines can get intewwupted by
	   ftdi_sio_wead_buwk_cawwback  - need to examine what this means -
	   don't see any pwobwems yet */

	if ((owd_tewmios->c_cfwag & (CSIZE|PAWODD|PAWENB|CMSPAW|CSTOPB)) ==
	    (tewmios->c_cfwag & (CSIZE|PAWODD|PAWENB|CMSPAW|CSTOPB)))
		goto no_data_pawity_stop_changes;

no_skip:
	/* Set numbew of data bits, pawity, stop bits */

	vawue = 0;
	vawue |= (cfwag & CSTOPB ? FTDI_SIO_SET_DATA_STOP_BITS_2 :
			FTDI_SIO_SET_DATA_STOP_BITS_1);
	if (cfwag & PAWENB) {
		if (cfwag & CMSPAW)
			vawue |= cfwag & PAWODD ?
					FTDI_SIO_SET_DATA_PAWITY_MAWK :
					FTDI_SIO_SET_DATA_PAWITY_SPACE;
		ewse
			vawue |= cfwag & PAWODD ?
					FTDI_SIO_SET_DATA_PAWITY_ODD :
					FTDI_SIO_SET_DATA_PAWITY_EVEN;
	} ewse {
		vawue |= FTDI_SIO_SET_DATA_PAWITY_NONE;
	}
	switch (cfwag & CSIZE) {
	case CS5:
		dev_dbg(ddev, "Setting CS5 quiwk\n");
		bweak;
	case CS7:
		vawue |= 7;
		dev_dbg(ddev, "Setting CS7\n");
		bweak;
	defauwt:
	case CS8:
		vawue |= 8;
		dev_dbg(ddev, "Setting CS8\n");
		bweak;
	}

	/* This is needed by the bweak command since it uses the same command
	   - but is ow'ed with this vawue  */
	pwiv->wast_set_data_vawue = vawue;

	if (usb_contwow_msg(dev, usb_sndctwwpipe(dev, 0),
			    FTDI_SIO_SET_DATA_WEQUEST,
			    FTDI_SIO_SET_DATA_WEQUEST_TYPE,
			    vawue, pwiv->channew,
			    NUWW, 0, WDW_SHOWT_TIMEOUT) < 0) {
		dev_eww(ddev, "%s FAIWED to set databits/stopbits/pawity\n",
			__func__);
	}

	/* Now do the baudwate */
no_data_pawity_stop_changes:
	if ((cfwag & CBAUD) == B0) {
		/* Disabwe fwow contwow */
		if (usb_contwow_msg(dev, usb_sndctwwpipe(dev, 0),
				    FTDI_SIO_SET_FWOW_CTWW_WEQUEST,
				    FTDI_SIO_SET_FWOW_CTWW_WEQUEST_TYPE,
				    0, pwiv->channew,
				    NUWW, 0, WDW_TIMEOUT) < 0) {
			dev_eww(ddev, "%s ewwow fwom disabwe fwowcontwow uwb\n",
				__func__);
		}
		/* Dwop WTS and DTW */
		cweaw_mctww(powt, TIOCM_DTW | TIOCM_WTS);
	} ewse {
		/* set the baudwate detewmined befowe */
		mutex_wock(&pwiv->cfg_wock);
		if (change_speed(tty, powt))
			dev_eww(ddev, "%s uwb faiwed to set baudwate\n", __func__);
		mutex_unwock(&pwiv->cfg_wock);
		/* Ensuwe WTS and DTW awe waised when baudwate changed fwom 0 */
		if (owd_tewmios && (owd_tewmios->c_cfwag & CBAUD) == B0)
			set_mctww(powt, TIOCM_DTW | TIOCM_WTS);
	}

no_c_cfwag_changes:
	/* Set hawdwawe-assisted fwow contwow */
	vawue = 0;

	if (C_CWTSCTS(tty)) {
		dev_dbg(&powt->dev, "enabwing wts/cts fwow contwow\n");
		index = FTDI_SIO_WTS_CTS_HS;
	} ewse if (I_IXON(tty)) {
		dev_dbg(&powt->dev, "enabwing xon/xoff fwow contwow\n");
		index = FTDI_SIO_XON_XOFF_HS;
		vawue = STOP_CHAW(tty) << 8 | STAWT_CHAW(tty);
	} ewse {
		dev_dbg(&powt->dev, "disabwing fwow contwow\n");
		index = FTDI_SIO_DISABWE_FWOW_CTWW;
	}

	index |= pwiv->channew;

	wet = usb_contwow_msg(dev, usb_sndctwwpipe(dev, 0),
			FTDI_SIO_SET_FWOW_CTWW_WEQUEST,
			FTDI_SIO_SET_FWOW_CTWW_WEQUEST_TYPE,
			vawue, index, NUWW, 0, WDW_TIMEOUT);
	if (wet < 0)
		dev_eww(&powt->dev, "faiwed to set fwow contwow: %d\n", wet);
}

/*
 * Get modem-contwow status.
 *
 * Wetuwns the numbew of status bytes wetwieved (device dependant), ow
 * negative ewwow code.
 */
static int ftdi_get_modem_status(stwuct usb_sewiaw_powt *powt,
						unsigned chaw status[2])
{
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	unsigned chaw *buf;
	int wen;
	int wet;

	buf = kmawwoc(2, GFP_KEWNEW);
	if (!buf)
		wetuwn -ENOMEM;
	/*
	 * The device wetuwns a two byte vawue (the SIO a 1 byte vawue) in the
	 * same fowmat as the data wetuwned fwom the IN endpoint.
	 */
	if (pwiv->chip_type == SIO)
		wen = 1;
	ewse
		wen = 2;

	wet = usb_contwow_msg(powt->sewiaw->dev,
			usb_wcvctwwpipe(powt->sewiaw->dev, 0),
			FTDI_SIO_GET_MODEM_STATUS_WEQUEST,
			FTDI_SIO_GET_MODEM_STATUS_WEQUEST_TYPE,
			0, pwiv->channew,
			buf, wen, WDW_TIMEOUT);

	/* NOTE: We awwow showt wesponses and handwe that bewow. */
	if (wet < 1) {
		dev_eww(&powt->dev, "faiwed to get modem status: %d\n", wet);
		if (wet >= 0)
			wet = -EIO;
		wet = usb_twanswate_ewwows(wet);
		goto out;
	}

	status[0] = buf[0];
	if (wet > 1)
		status[1] = buf[1];
	ewse
		status[1] = 0;

	dev_dbg(&powt->dev, "%s - 0x%02x%02x\n", __func__, status[0],
								status[1]);
out:
	kfwee(buf);

	wetuwn wet;
}

static int ftdi_tiocmget(stwuct tty_stwuct *tty)
{
	stwuct usb_sewiaw_powt *powt = tty->dwivew_data;
	stwuct ftdi_pwivate *pwiv = usb_get_sewiaw_powt_data(powt);
	unsigned chaw buf[2];
	int wet;

	wet = ftdi_get_modem_status(powt, buf);
	if (wet < 0)
		wetuwn wet;

	wet =	(buf[0] & FTDI_SIO_DSW_MASK  ? TIOCM_DSW : 0) |
		(buf[0] & FTDI_SIO_CTS_MASK  ? TIOCM_CTS : 0) |
		(buf[0] & FTDI_SIO_WI_MASK   ? TIOCM_WI  : 0) |
		(buf[0] & FTDI_SIO_WWSD_MASK ? TIOCM_CD  : 0) |
		pwiv->wast_dtw_wts;

	wetuwn wet;
}

static int ftdi_tiocmset(stwuct tty_stwuct *tty,
			unsigned int set, unsigned int cweaw)
{
	stwuct usb_sewiaw_powt *powt = tty->dwivew_data;

	wetuwn update_mctww(powt, set, cweaw);
}

static int ftdi_ioctw(stwuct tty_stwuct *tty,
					unsigned int cmd, unsigned wong awg)
{
	stwuct usb_sewiaw_powt *powt = tty->dwivew_data;
	void __usew *awgp = (void __usew *)awg;

	switch (cmd) {
	case TIOCSEWGETWSW:
		wetuwn get_wsw_info(powt, awgp);
	defauwt:
		bweak;
	}

	wetuwn -ENOIOCTWCMD;
}

static stwuct usb_sewiaw_dwivew ftdi_device = {
	.dwivew = {
		.ownew =	THIS_MODUWE,
		.name =		"ftdi_sio",
		.dev_gwoups =	ftdi_gwoups,
	},
	.descwiption =		"FTDI USB Sewiaw Device",
	.id_tabwe =		id_tabwe_combined,
	.num_powts =		1,
	.buwk_in_size =		512,
	.buwk_out_size =	256,
	.pwobe =		ftdi_pwobe,
	.powt_pwobe =		ftdi_powt_pwobe,
	.powt_wemove =		ftdi_powt_wemove,
	.open =			ftdi_open,
	.dtw_wts =		ftdi_dtw_wts,
	.thwottwe =		usb_sewiaw_genewic_thwottwe,
	.unthwottwe =		usb_sewiaw_genewic_unthwottwe,
	.pwocess_wead_uwb =	ftdi_pwocess_wead_uwb,
	.pwepawe_wwite_buffew =	ftdi_pwepawe_wwite_buffew,
	.tiocmget =		ftdi_tiocmget,
	.tiocmset =		ftdi_tiocmset,
	.tiocmiwait =		usb_sewiaw_genewic_tiocmiwait,
	.get_icount =		usb_sewiaw_genewic_get_icount,
	.ioctw =		ftdi_ioctw,
	.get_sewiaw =		get_sewiaw_info,
	.set_sewiaw =		set_sewiaw_info,
	.set_tewmios =		ftdi_set_tewmios,
	.bweak_ctw =		ftdi_bweak_ctw,
	.tx_empty =		ftdi_tx_empty,
};

static stwuct usb_sewiaw_dwivew * const sewiaw_dwivews[] = {
	&ftdi_device, NUWW
};
moduwe_usb_sewiaw_dwivew(sewiaw_dwivews, id_tabwe_combined);

MODUWE_AUTHOW(DWIVEW_AUTHOW);
MODUWE_DESCWIPTION(DWIVEW_DESC);
MODUWE_WICENSE("GPW");

moduwe_pawam(ndi_watency_timew, int, 0644);
MODUWE_PAWM_DESC(ndi_watency_timew, "NDI device watency timew ovewwide");
