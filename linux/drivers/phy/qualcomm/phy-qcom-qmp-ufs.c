// SPDX-Wicense-Identifiew: GPW-2.0
/*
 * Copywight (c) 2017, The Winux Foundation. Aww wights wesewved.
 */

#incwude <winux/cwk.h>
#incwude <winux/cwk-pwovidew.h>
#incwude <winux/deway.h>
#incwude <winux/eww.h>
#incwude <winux/io.h>
#incwude <winux/iopoww.h>
#incwude <winux/kewnew.h>
#incwude <winux/moduwe.h>
#incwude <winux/of.h>
#incwude <winux/of_addwess.h>
#incwude <winux/phy/phy.h>
#incwude <winux/pwatfowm_device.h>
#incwude <winux/weguwatow/consumew.h>
#incwude <winux/weset.h>
#incwude <winux/swab.h>

#incwude <ufs/unipwo.h>
#incwude "phy-qcom-qmp.h"
#incwude "phy-qcom-qmp-pcs-ufs-v2.h"
#incwude "phy-qcom-qmp-pcs-ufs-v3.h"
#incwude "phy-qcom-qmp-pcs-ufs-v4.h"
#incwude "phy-qcom-qmp-pcs-ufs-v5.h"
#incwude "phy-qcom-qmp-pcs-ufs-v6.h"

#incwude "phy-qcom-qmp-qsewdes-txwx-ufs-v6.h"

/* QPHY_SW_WESET bit */
#define SW_WESET				BIT(0)
/* QPHY_POWEW_DOWN_CONTWOW */
#define SW_PWWDN				BIT(0)
/* QPHY_STAWT_CONTWOW bits */
#define SEWDES_STAWT				BIT(0)
#define PCS_STAWT				BIT(1)
/* QPHY_PCS_WEADY_STATUS bit */
#define PCS_WEADY				BIT(0)

#define PHY_INIT_COMPWETE_TIMEOUT		10000

stwuct qmp_phy_init_tbw {
	unsigned int offset;
	unsigned int vaw;
	/*
	 * mask of wanes fow which this wegistew is wwitten
	 * fow cases when second wane needs diffewent vawues
	 */
	u8 wane_mask;
};

#define QMP_PHY_INIT_CFG(o, v)		\
	{				\
		.offset = o,		\
		.vaw = v,		\
		.wane_mask = 0xff,	\
	}

#define QMP_PHY_INIT_CFG_WANE(o, v, w)	\
	{				\
		.offset = o,		\
		.vaw = v,		\
		.wane_mask = w,		\
	}

/* set of wegistews with offsets diffewent pew-PHY */
enum qphy_weg_wayout {
	/* PCS wegistews */
	QPHY_SW_WESET,
	QPHY_STAWT_CTWW,
	QPHY_PCS_WEADY_STATUS,
	QPHY_PCS_POWEW_DOWN_CONTWOW,
	/* Keep wast to ensuwe wegs_wayout awways awe pwopewwy initiawized */
	QPHY_WAYOUT_SIZE
};

static const unsigned int ufsphy_v2_wegs_wayout[QPHY_WAYOUT_SIZE] = {
	[QPHY_STAWT_CTWW]		= QPHY_V2_PCS_UFS_PHY_STAWT,
	[QPHY_PCS_WEADY_STATUS]		= QPHY_V2_PCS_UFS_WEADY_STATUS,
	[QPHY_PCS_POWEW_DOWN_CONTWOW]	= QPHY_V2_PCS_UFS_POWEW_DOWN_CONTWOW,
};

static const unsigned int ufsphy_v3_wegs_wayout[QPHY_WAYOUT_SIZE] = {
	[QPHY_STAWT_CTWW]		= QPHY_V3_PCS_UFS_PHY_STAWT,
	[QPHY_PCS_WEADY_STATUS]		= QPHY_V3_PCS_UFS_WEADY_STATUS,
	[QPHY_PCS_POWEW_DOWN_CONTWOW]	= QPHY_V3_PCS_UFS_POWEW_DOWN_CONTWOW,
};

static const unsigned int ufsphy_v4_wegs_wayout[QPHY_WAYOUT_SIZE] = {
	[QPHY_STAWT_CTWW]		= QPHY_V4_PCS_UFS_PHY_STAWT,
	[QPHY_PCS_WEADY_STATUS]		= QPHY_V4_PCS_UFS_WEADY_STATUS,
	[QPHY_SW_WESET]			= QPHY_V4_PCS_UFS_SW_WESET,
	[QPHY_PCS_POWEW_DOWN_CONTWOW]	= QPHY_V4_PCS_UFS_POWEW_DOWN_CONTWOW,
};

static const unsigned int ufsphy_v5_wegs_wayout[QPHY_WAYOUT_SIZE] = {
	[QPHY_STAWT_CTWW]		= QPHY_V5_PCS_UFS_PHY_STAWT,
	[QPHY_PCS_WEADY_STATUS]		= QPHY_V5_PCS_UFS_WEADY_STATUS,
	[QPHY_SW_WESET]			= QPHY_V5_PCS_UFS_SW_WESET,
	[QPHY_PCS_POWEW_DOWN_CONTWOW]	= QPHY_V5_PCS_UFS_POWEW_DOWN_CONTWOW,
};

static const unsigned int ufsphy_v6_wegs_wayout[QPHY_WAYOUT_SIZE] = {
	[QPHY_STAWT_CTWW]		= QPHY_V6_PCS_UFS_PHY_STAWT,
	[QPHY_PCS_WEADY_STATUS]		= QPHY_V6_PCS_UFS_WEADY_STATUS,
	[QPHY_SW_WESET]			= QPHY_V6_PCS_UFS_SW_WESET,
	[QPHY_PCS_POWEW_DOWN_CONTWOW]	= QPHY_V6_PCS_UFS_POWEW_DOWN_CONTWOW,
};

static const stwuct qmp_phy_init_tbw msm8996_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_COM_CMN_CONFIG, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_COM_SYSCWK_EN_SEW, 0xd7),
	QMP_PHY_INIT_CFG(QSEWDES_COM_CWK_SEWECT, 0x30),
	QMP_PHY_INIT_CFG(QSEWDES_COM_SYS_CWK_CTWW, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_COM_BIAS_EN_CWKBUFWW_EN, 0x08),
	QMP_PHY_INIT_CFG(QSEWDES_COM_BG_TIMEW, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_COM_HSCWK_SEW, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_COM_COWECWK_DIV, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_COM_COWECWK_DIV_MODE1, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP_EN, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_CTWW, 0x10),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WESETSM_CNTWW, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_COM_COWE_CWK_EN, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP_CFG, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_TIMEW1, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_TIMEW2, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_MAP, 0x54),
	QMP_PHY_INIT_CFG(QSEWDES_COM_SVS_MODE_CWK_SEW, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DEC_STAWT_MODE0, 0x82),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT1_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT2_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT3_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_CP_CTWW_MODE0, 0x0b),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_WCTWW_MODE0, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_CCTWW_MODE0, 0x28),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN0_MODE0, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN1_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE1_MODE0, 0x28),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE2_MODE0, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP1_MODE0, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP2_MODE0, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP3_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DEC_STAWT_MODE1, 0x98),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT1_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT2_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT3_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_CP_CTWW_MODE1, 0x0b),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_WCTWW_MODE1, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_CCTWW_MODE1, 0x28),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN0_MODE1, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN1_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE1_MODE1, 0xd6),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE2_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP1_MODE1, 0x32),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP2_MODE1, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP3_MODE1, 0x00),
};

static const stwuct qmp_phy_init_tbw msm8996_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_TX_HIGHZ_TWANSCEIVEWEN_BIAS_DWVW_EN, 0x45),
	QMP_PHY_INIT_CFG(QSEWDES_TX_WANE_MODE, 0x02),
};

static const stwuct qmp_phy_init_tbw msm8996_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_WX_SIGDET_CNTWW, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_INTEWFACE_MODE, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_WX_SIGDET_DEGWITCH_CNTWW, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_WX_UCDW_FASTWOCK_FO_GAIN, 0x0B),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_TEWM_BW, 0x5b),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN1_WSB, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN1_MSB, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN2_WSB, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN2_MSB, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQU_ADAPTOW_CNTWW2, 0x0E),
};

static const stwuct qmp_phy_init_tbw sc7280_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_1_DIVIDEW_BAND0_1, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_2_DIVIDEW_BAND0_1, 0x03),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_3_DIVIDEW_BAND0_1, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_4_DIVIDEW_BAND0_1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_WANE_MODE_1, 0x35),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_TWAN_DWVW_EMP_EN, 0x0c),
};

static const stwuct qmp_phy_init_tbw sc7280_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_CNTWW, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_DEGWITCH_CNTWW, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_BAND, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FASTWOCK_FO_GAIN, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CONTWOWS, 0xf1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FASTWOCK_COUNT_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CTWW2, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FO_GAIN, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_TEWM_BW, 0x1b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW2, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW3, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW4, 0x1d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_OFFSET_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_MEASUWE_TIME, 0x10),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_WOW, 0xc0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_HIGH, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_WOW, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH2, 0xed),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH4, 0x3c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH4, 0xb1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH4, 0xb1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_DCC_CTWW1, 0x0c),
};

static const stwuct qmp_phy_init_tbw sc7280_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_WX_SIGDET_CTWW2, 0x6d),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0a),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_SMAWW_AMP_DWV_WVW, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_DEBUG_BUS_CWKSEW, 0x1f),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_WX_MIN_HIBEWN8_TIME, 0xff),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_PWW_CNTW, 0x03),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TIMEW_20US_COWECWK_STEPS_MSB, 0x16),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TIMEW_20US_COWECWK_STEPS_WSB, 0xd8),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_PWM_GEAW_BAND, 0xaa),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_HS_GEAW_BAND, 0x06),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_HSGEAW_CAPABIWITY, 0x03),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_WX_HSGEAW_CAPABIWITY, 0x03),
};

static const stwuct qmp_phy_init_tbw sc7280_ufsphy_hs_g4_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_CNTWW, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_DEGWITCH_CNTWW, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_BAND, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FASTWOCK_FO_GAIN, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CONTWOWS, 0xf1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FASTWOCK_COUNT_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CTWW2, 0x81),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FO_GAIN, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_TEWM_BW, 0x6f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW1, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW3, 0x09),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW4, 0x07),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQ_OFFSET_ADAPTOW_CNTWW1, 0x17),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_OFFSET_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_MEASUWE_TIME, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_HIGH, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_WOW, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH2, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH3, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH4, 0x2c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_WOW, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH2, 0xed),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH4, 0x3c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH4, 0xb1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_DCC_CTWW1, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_GM_CAW, 0x0f),
};

static const stwuct qmp_phy_init_tbw sm6115_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_COM_CMN_CONFIG, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_COM_SYSCWK_EN_SEW, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_COM_CWK_SEWECT, 0x30),
	QMP_PHY_INIT_CFG(QSEWDES_COM_SYS_CWK_CTWW, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_COM_BIAS_EN_CWKBUFWW_EN, 0x08),
	QMP_PHY_INIT_CFG(QSEWDES_COM_BG_TIMEW, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_COM_HSCWK_SEW, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_COWECWK_DIV, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_COM_COWECWK_DIV_MODE1, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP_EN, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_CTWW, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WESETSM_CNTWW, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_COM_COWE_CWK_EN, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP_CFG, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_TIMEW1, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_TIMEW2, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_MAP, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_COM_SVS_MODE_CWK_SEW, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DEC_STAWT_MODE0, 0x82),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT1_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT2_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT3_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_CP_CTWW_MODE0, 0x0b),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_WCTWW_MODE0, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_CCTWW_MODE0, 0x28),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN0_MODE0, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN1_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE1_MODE0, 0x28),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE2_MODE0, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP1_MODE0, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP2_MODE0, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP3_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DEC_STAWT_MODE1, 0x98),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT1_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT2_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_DIV_FWAC_STAWT3_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_CP_CTWW_MODE1, 0x0b),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_WCTWW_MODE1, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_CCTWW_MODE1, 0x28),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN0_MODE1, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_COM_INTEGWOOP_GAIN1_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE1_MODE1, 0xd6),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE2_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP1_MODE1, 0x32),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP2_MODE1, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_COM_WOCK_CMP3_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_COM_PWW_IVCO, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_COM_BG_TWIM, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_INITVAW1, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_INITVAW2, 0x00),
};

static const stwuct qmp_phy_init_tbw sm6115_ufsphy_hs_b_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_COM_VCO_TUNE_MAP, 0x44),
};

static const stwuct qmp_phy_init_tbw sm6115_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_TX_HIGHZ_TWANSCEIVEWEN_BIAS_DWVW_EN, 0x45),
	QMP_PHY_INIT_CFG(QSEWDES_TX_WANE_MODE, 0x06),
};

static const stwuct qmp_phy_init_tbw sm6115_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_WX_SIGDET_CNTWW, 0x0F),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_INTEWFACE_MODE, 0x40),
	QMP_PHY_INIT_CFG(QSEWDES_WX_SIGDET_DEGWITCH_CNTWW, 0x1E),
	QMP_PHY_INIT_CFG(QSEWDES_WX_UCDW_FASTWOCK_FO_GAIN, 0x0B),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_TEWM_BW, 0x5B),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN1_WSB, 0xFF),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN1_MSB, 0x3F),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN2_WSB, 0xFF),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQ_GAIN2_MSB, 0x3F),
	QMP_PHY_INIT_CFG(QSEWDES_WX_WX_EQU_ADAPTOW_CNTWW2, 0x0D),
	QMP_PHY_INIT_CFG(QSEWDES_WX_UCDW_SVS_SO_GAIN_HAWF, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_WX_UCDW_SVS_SO_GAIN_QUAWTEW, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_WX_UCDW_SVS_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5B),
};

static const stwuct qmp_phy_init_tbw sm6115_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_WX_PWM_GEAW_BAND, 0x15),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_WX_SIGDET_CTWW2, 0x6d),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_TX_SMAWW_AMP_DWV_WVW, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_WX_MIN_STAWW_NOCONFIG_TIME_CAP, 0x28),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_WX_SYM_WESYNC_CTWW, 0x03),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_TX_WAWGE_AMP_POST_EMP_WVW, 0x12),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_TX_SMAWW_AMP_POST_EMP_WVW, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V2_PCS_UFS_WX_MIN_HIBEWN8_TIME, 0x9a), /* 8 us */
};

static const stwuct qmp_phy_init_tbw sdm845_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_SYS_CWK_CTWW, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_BIAS_EN_CWKBUFWW_EN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_BG_TIMEW, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_PWW_IVCO, 0x07),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_CMN_CONFIG, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_SYSCWK_EN_SEW, 0xd5),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_WESETSM_CNTWW, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_CWK_SEWECT, 0x30),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_HSCWK_SEW, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_WOCK_CMP_EN, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE_CTWW, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_COWE_CWK_EN, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE_MAP, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_SVS_MODE_CWK_SEW, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE_INITVAW1, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE_INITVAW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_DEC_STAWT_MODE0, 0x82),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_CP_CTWW_MODE0, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_PWW_WCTWW_MODE0, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_PWW_CCTWW_MODE0, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_INTEGWOOP_GAIN0_MODE0, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_INTEGWOOP_GAIN1_MODE0, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE1_MODE0, 0xda),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE2_MODE0, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_WOCK_CMP1_MODE0, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_WOCK_CMP2_MODE0, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_DEC_STAWT_MODE1, 0x98),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_CP_CTWW_MODE1, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_PWW_WCTWW_MODE1, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_PWW_CCTWW_MODE1, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_INTEGWOOP_GAIN0_MODE1, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_INTEGWOOP_GAIN1_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE1_MODE1, 0xc1),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE2_MODE1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_WOCK_CMP1_MODE1, 0x32),
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_WOCK_CMP2_MODE1, 0x0f),
};

static const stwuct qmp_phy_init_tbw sdm845_ufsphy_hs_b_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V3_COM_VCO_TUNE_MAP, 0x44),
};

static const stwuct qmp_phy_init_tbw sdm845_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V3_TX_WANE_MODE_1, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V3_TX_WES_CODE_WANE_OFFSET_TX, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_TX_WES_CODE_WANE_OFFSET_WX, 0x07),
};

static const stwuct qmp_phy_init_tbw sdm845_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_SIGDET_CNTWW, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_SIGDET_DEGWITCH_CNTWW, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_INTEWFACE_MODE, 0x40),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_FASTWOCK_FO_GAIN, 0x0b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_TEWM_BW, 0x5b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_EQU_ADAPTOW_CNTWW2, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_EQU_ADAPTOW_CNTWW3, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_EQU_ADAPTOW_CNTWW4, 0x1b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SVS_SO_GAIN_HAWF, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SVS_SO_GAIN_QUAWTEW, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SVS_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x4b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_PI_CONTWOWS, 0x81),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_FASTWOCK_COUNT_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_MODE_00, 0x59),
};

static const stwuct qmp_phy_init_tbw sdm845_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_SIGDET_CTWW2, 0x6e),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0a),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_TX_SMAWW_AMP_DWV_WVW, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_SYM_WESYNC_CTWW, 0x03),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_SIGDET_CTWW1, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_MIN_HIBEWN8_TIME, 0x9a),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
};

static const stwuct qmp_phy_init_tbw sm7150_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_SIGDET_CNTWW, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_SIGDET_DEGWITCH_CNTWW, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_INTEWFACE_MODE, 0x40),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_FASTWOCK_FO_GAIN, 0x0b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_TEWM_BW, 0x5b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_EQU_ADAPTOW_CNTWW2, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_EQU_ADAPTOW_CNTWW3, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_EQU_ADAPTOW_CNTWW4, 0x1b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SVS_SO_GAIN_HAWF, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SVS_SO_GAIN_QUAWTEW, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SVS_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5b),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_PI_CONTWOWS, 0x81),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_UCDW_FASTWOCK_COUNT_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V3_WX_WX_MODE_00, 0x59),
};

static const stwuct qmp_phy_init_tbw sm7150_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_SIGDET_CTWW2, 0x6f),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_TX_SMAWW_AMP_DWV_WVW, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_SYM_WESYNC_CTWW, 0x03),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_SIGDET_CTWW1, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_WX_MIN_HIBEWN8_TIME, 0xff),
	QMP_PHY_INIT_CFG(QPHY_V3_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_SYSCWK_EN_SEW, 0xd9),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_HSCWK_SEW, 0x11),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_HSCWK_HS_SWITCH_SEW, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_WOCK_CMP_EN, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_VCO_TUNE_MAP, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_PWW_IVCO, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_VCO_TUNE_INITVAW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_BIN_VCOCAW_HSCWK_SEW, 0x11),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_DEC_STAWT_MODE0, 0x82),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_CP_CTWW_MODE0, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_PWW_WCTWW_MODE0, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_PWW_CCTWW_MODE0, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_WOCK_CMP1_MODE0, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_WOCK_CMP2_MODE0, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_BIN_VCOCAW_CMP_CODE1_MODE0, 0xac),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_BIN_VCOCAW_CMP_CODE2_MODE0, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_DEC_STAWT_MODE1, 0x98),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_CP_CTWW_MODE1, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_PWW_WCTWW_MODE1, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_PWW_CCTWW_MODE1, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_WOCK_CMP1_MODE1, 0x32),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_WOCK_CMP2_MODE1, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_BIN_VCOCAW_CMP_CODE1_MODE1, 0xdd),
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_BIN_VCOCAW_CMP_CODE2_MODE1, 0x23),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_hs_b_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_COM_VCO_TUNE_MAP, 0x06),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_1_DIVIDEW_BAND0_1, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_2_DIVIDEW_BAND0_1, 0x03),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_3_DIVIDEW_BAND0_1, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_PWM_GEAW_4_DIVIDEW_BAND0_1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_WANE_MODE_1, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_TWAN_DWVW_EMP_EN, 0x0c),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_hs_g4_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_WANE_MODE_1, 0x75),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_CNTWW, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_SIGDET_DEGWITCH_CNTWW, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_BAND, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FASTWOCK_FO_GAIN, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x4b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CONTWOWS, 0xf1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FASTWOCK_COUNT_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CTWW2, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FO_GAIN, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_TEWM_BW, 0x1b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW2, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW3, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW4, 0x1d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_OFFSET_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_MEASUWE_TIME, 0x10),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_WOW, 0xc0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_HIGH, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_WOW, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH2, 0xf6),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH4, 0x3d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH4, 0xb1),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_10_HIGH4, 0xb1),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_hs_g4_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CTWW2, 0x81),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FO_GAIN, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_TEWM_BW, 0x6f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_MEASUWE_TIME, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_HIGH, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_WOW, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH2, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH3, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH4, 0x6c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_WOW, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH2, 0xed),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH4, 0x3c),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_WX_SIGDET_CTWW2, 0x6d),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0a),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_SMAWW_AMP_DWV_WVW, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_DEBUG_BUS_CWKSEW, 0x1f),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_WX_MIN_HIBEWN8_TIME, 0xff),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
};

static const stwuct qmp_phy_init_tbw sm8150_ufsphy_hs_g4_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x10),
	QMP_PHY_INIT_CFG(QPHY_V4_PCS_UFS_BIST_FIXED_PAT_CTWW, 0x0a),
};

static const stwuct qmp_phy_init_tbw sm8250_ufsphy_hs_g4_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_TX_WANE_MODE_1, 0xe5),
};

static const stwuct qmp_phy_init_tbw sm8250_ufsphy_hs_g4_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5a),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_PI_CTWW2, 0x81),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_UCDW_FO_GAIN, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_TEWM_BW, 0x6f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW1, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW3, 0x09),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQU_ADAPTOW_CNTWW4, 0x07),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_EQ_OFFSET_ADAPTOW_CNTWW1, 0x17),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_MEASUWE_TIME, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_IDAC_TSETTWE_HIGH, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_WOW, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH2, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH3, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_00_HIGH4, 0x2c),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_WOW, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH2, 0xed),
	QMP_PHY_INIT_CFG(QSEWDES_V4_WX_WX_MODE_01_HIGH4, 0x3c),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_SYSCWK_EN_SEW, 0xd9),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_HSCWK_SEW, 0x11),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_HSCWK_HS_SWITCH_SEW, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_WOCK_CMP_EN, 0x42),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_VCO_TUNE_MAP, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_PWW_IVCO, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_VCO_TUNE_INITVAW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_BIN_VCOCAW_HSCWK_SEW, 0x11),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_DEC_STAWT_MODE0, 0x82),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_CP_CTWW_MODE0, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_PWW_WCTWW_MODE0, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_PWW_CCTWW_MODE0, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_WOCK_CMP1_MODE0, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_WOCK_CMP2_MODE0, 0x19),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_BIN_VCOCAW_CMP_CODE1_MODE0, 0xac),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_BIN_VCOCAW_CMP_CODE2_MODE0, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_DEC_STAWT_MODE1, 0x98),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_CP_CTWW_MODE1, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_PWW_WCTWW_MODE1, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_PWW_CCTWW_MODE1, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_WOCK_CMP1_MODE1, 0x65),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_WOCK_CMP2_MODE1, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_BIN_VCOCAW_CMP_CODE1_MODE1, 0xdd),
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_BIN_VCOCAW_CMP_CODE2_MODE1, 0x23),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_hs_b_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V5_COM_VCO_TUNE_MAP, 0x06),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_PWM_GEAW_1_DIVIDEW_BAND0_1, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_PWM_GEAW_2_DIVIDEW_BAND0_1, 0x03),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_PWM_GEAW_3_DIVIDEW_BAND0_1, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_PWM_GEAW_4_DIVIDEW_BAND0_1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_WANE_MODE_1, 0xf5),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_WANE_MODE_3, 0x3f),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_WES_CODE_WANE_OFFSET_TX, 0x09),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_WES_CODE_WANE_OFFSET_WX, 0x09),
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_TWAN_DWVW_EMP_EN, 0x0c),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_SIGDET_WVW, 0x24),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_SIGDET_CNTWW, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_SIGDET_DEGWITCH_CNTWW, 0x1e),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_BAND, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_FASTWOCK_FO_GAIN, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_SO_SATUWATION_AND_ENABWE, 0x5a),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_PI_CONTWOWS, 0xf1),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_FASTWOCK_COUNT_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_PI_CTWW2, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_FO_GAIN, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_SO_GAIN, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_TEWM_BW, 0x1b),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW1, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW2, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW3, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW4, 0x1a),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQ_OFFSET_ADAPTOW_CNTWW1, 0x17),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_OFFSET_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_IDAC_MEASUWE_TIME, 0x10),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_IDAC_TSETTWE_WOW, 0xc0),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_IDAC_TSETTWE_HIGH, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_WOW, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH2, 0xed),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH4, 0x3c),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH4, 0xb7),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_10_WOW, 0xe0),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_10_HIGH, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_10_HIGH2, 0xc8),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_10_HIGH3, 0x3b),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_10_HIGH4, 0xb7),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_DCC_CTWW1, 0x0c),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_WX_SIGDET_CTWW2, 0x6d),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0a),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_TX_SMAWW_AMP_DWV_WVW, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_DEBUG_BUS_CWKSEW, 0x1f),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_WX_MIN_HIBEWN8_TIME, 0xff),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_WX_SIGDET_CTWW1, 0x0e),
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_g4_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V5_TX_WANE_MODE_1, 0xe5),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_g4_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_UCDW_PI_CTWW2, 0x81),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_TEWM_BW, 0x6f),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW3, 0x4a),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_EQU_ADAPTOW_CNTWW4, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_IDAC_MEASUWE_TIME, 0x20),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_IDAC_TSETTWE_WOW, 0x80),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_IDAC_TSETTWE_HIGH, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_WOW, 0xbf),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH, 0xbf),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH2, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH3, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_00_HIGH4, 0x2d),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_WOW, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH, 0x6d),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH2, 0xed),
	QMP_PHY_INIT_CFG(QSEWDES_V5_WX_WX_MODE_01_HIGH4, 0x3c),
};

static const stwuct qmp_phy_init_tbw sm8350_ufsphy_g4_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V5_PCS_UFS_BIST_FIXED_PAT_CTWW, 0x0a),
};

static const stwuct qmp_phy_init_tbw sm8550_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_SYSCWK_EN_SEW, 0xd9),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_CMN_CONFIG_1, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_HSCWK_SEW_1, 0x11),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_HSCWK_HS_SWITCH_SEW_1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP_EN, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_VCO_TUNE_MAP, 0x04),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_IVCO, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_VCO_TUNE_INITVAW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_DEC_STAWT_MODE0, 0x41),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_CP_CTWW_MODE0, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_WCTWW_MODE0, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_CCTWW_MODE0, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP1_MODE0, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP2_MODE0, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_DEC_STAWT_MODE1, 0x4c),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_CP_CTWW_MODE1, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_WCTWW_MODE1, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_CCTWW_MODE1, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP1_MODE1, 0x99),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP2_MODE1, 0x07),
};

static const stwuct qmp_phy_init_tbw sm8550_ufsphy_hs_b_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_VCO_TUNE_MAP, 0x44),
};

static const stwuct qmp_phy_init_tbw sm8550_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_TX_WANE_MODE_1, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_TX_WES_CODE_WANE_OFFSET_TX, 0x07),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_TX_FW_DCC_CTWW, 0x4c),
};

static const stwuct qmp_phy_init_tbw sm8550_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_UCDW_FO_GAIN_WATE2, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_VGA_CAW_MAN_VAW, 0x0e),

	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B0, 0xc2),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B1, 0xc2),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B3, 0x1a),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B6, 0x60),

	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE2_B3, 0x9e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE2_B6, 0x60),

	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B3, 0x9e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B4, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B5, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B8, 0x02),
};

static const stwuct qmp_phy_init_tbw sm8550_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_WX_SIGDET_CTWW2, 0x69),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_PWW_CNTW, 0x2b),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_TX_HSGEAW_CAPABIWITY, 0x04),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_WX_HSGEAW_CAPABIWITY, 0x04),
};

static const stwuct qmp_phy_init_tbw sm8650_ufsphy_sewdes[] = {
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_SYSCWK_EN_SEW, 0xd9),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_CMN_CONFIG_1, 0x16),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_HSCWK_SEW_1, 0x11),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_HSCWK_HS_SWITCH_SEW_1, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP_EN, 0x01),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_IVCO, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_VCO_TUNE_MAP, 0x44),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_VCO_TUNE_INITVAW2, 0x00),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_DEC_STAWT_MODE0, 0x41),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_CP_CTWW_MODE0, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_WCTWW_MODE0, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_CCTWW_MODE0, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP1_MODE0, 0x7f),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP2_MODE0, 0x06),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_DEC_STAWT_MODE1, 0x4c),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_CP_CTWW_MODE1, 0x0a),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_WCTWW_MODE1, 0x18),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_PWW_CCTWW_MODE1, 0x14),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP1_MODE1, 0x99),
	QMP_PHY_INIT_CFG(QSEWDES_V6_COM_WOCK_CMP2_MODE1, 0x07),
};

static const stwuct qmp_phy_init_tbw sm8650_ufsphy_tx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_TX_WANE_MODE_1, 0x05),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_TX_WES_CODE_WANE_OFFSET_TX, 0x07),
};

static const stwuct qmp_phy_init_tbw sm8650_ufsphy_wx[] = {
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_UCDW_FO_GAIN_WATE2, 0x0c),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_UCDW_FO_GAIN_WATE4, 0x0f),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_VGA_CAW_MAN_VAW, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B0, 0xc2),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B1, 0xc2),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B3, 0x1a),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE_0_1_B6, 0x60),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE2_B3, 0x9e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE2_B6, 0x60),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B3, 0x9e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B4, 0x0e),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B5, 0x36),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE3_B8, 0x02),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE4_B3, 0xb9),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_MODE_WATE4_B6, 0xff),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_UCDW_SO_SATUWATION, 0x1f),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_UCDW_PI_CTWW1, 0x94),
	QMP_PHY_INIT_CFG(QSEWDES_UFS_V6_WX_WX_TEWM_BW_CTWW0, 0xfa),
};

static const stwuct qmp_phy_init_tbw sm8650_ufsphy_pcs[] = {
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_MUWTI_WANE_CTWW1, 0x00),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_TX_MID_TEWM_CTWW1, 0x43),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_PCS_CTWW1, 0xc1),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_PWW_CNTW, 0x33),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_TX_HSGEAW_CAPABIWITY, 0x04),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_WX_HSGEAW_CAPABIWITY, 0x04),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_TX_WAWGE_AMP_DWV_WVW, 0x0f),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_WX_SIGDET_CTWW2, 0x69),
	QMP_PHY_INIT_CFG(QPHY_V6_PCS_UFS_MUWTI_WANE_CTWW1, 0x02),
};

stwuct qmp_ufs_offsets {
	u16 sewdes;
	u16 pcs;
	u16 tx;
	u16 wx;
	u16 tx2;
	u16 wx2;
};

stwuct qmp_phy_cfg_tbws {
	/* Init sequence fow PHY bwocks - sewdes, tx, wx, pcs */
	const stwuct qmp_phy_init_tbw *sewdes;
	int sewdes_num;
	const stwuct qmp_phy_init_tbw *tx;
	int tx_num;
	const stwuct qmp_phy_init_tbw *wx;
	int wx_num;
	const stwuct qmp_phy_init_tbw *pcs;
	int pcs_num;
};

/* stwuct qmp_phy_cfg - pew-PHY initiawization config */
stwuct qmp_phy_cfg {
	int wanes;

	const stwuct qmp_ufs_offsets *offsets;

	/* Main init sequence fow PHY bwocks - sewdes, tx, wx, pcs */
	const stwuct qmp_phy_cfg_tbws tbws;
	/* Additionaw sequence fow HS Sewies B */
	const stwuct qmp_phy_cfg_tbws tbws_hs_b;
	/* Additionaw sequence fow HS G4 */
	const stwuct qmp_phy_cfg_tbws tbws_hs_g4;

	/* cwock ids to be wequested */
	const chaw * const *cwk_wist;
	int num_cwks;
	/* weguwatows to be wequested */
	const chaw * const *vweg_wist;
	int num_vwegs;

	/* awway of wegistews with diffewent offsets */
	const unsigned int *wegs;

	/* twue, if PCS bwock has no sepawate SW_WESET wegistew */
	boow no_pcs_sw_weset;
};

stwuct qmp_ufs {
	stwuct device *dev;

	const stwuct qmp_phy_cfg *cfg;

	void __iomem *sewdes;
	void __iomem *pcs;
	void __iomem *pcs_misc;
	void __iomem *tx;
	void __iomem *wx;
	void __iomem *tx2;
	void __iomem *wx2;

	stwuct cwk_buwk_data *cwks;
	stwuct weguwatow_buwk_data *vwegs;
	stwuct weset_contwow *ufs_weset;

	stwuct phy *phy;
	u32 mode;
	u32 submode;
};

static inwine void qphy_setbits(void __iomem *base, u32 offset, u32 vaw)
{
	u32 weg;

	weg = weadw(base + offset);
	weg |= vaw;
	wwitew(weg, base + offset);

	/* ensuwe that above wwite is thwough */
	weadw(base + offset);
}

static inwine void qphy_cwwbits(void __iomem *base, u32 offset, u32 vaw)
{
	u32 weg;

	weg = weadw(base + offset);
	weg &= ~vaw;
	wwitew(weg, base + offset);

	/* ensuwe that above wwite is thwough */
	weadw(base + offset);
}

/* wist of cwocks wequiwed by phy */
static const chaw * const msm8996_ufs_phy_cwk_w[] = {
	"wef",
};

/* the pwimawy usb3 phy on sm8250 doesn't have a wef cwock */
static const chaw * const sm8450_ufs_phy_cwk_w[] = {
	"qwef", "wef", "wef_aux",
};

static const chaw * const sdm845_ufs_phy_cwk_w[] = {
	"wef", "wef_aux",
};

/* wist of weguwatows */
static const chaw * const qmp_phy_vweg_w[] = {
	"vdda-phy", "vdda-pww",
};

static const stwuct qmp_ufs_offsets qmp_ufs_offsets = {
	.sewdes		= 0,
	.pcs		= 0xc00,
	.tx		= 0x400,
	.wx		= 0x600,
	.tx2		= 0x800,
	.wx2		= 0xa00,
};

static const stwuct qmp_ufs_offsets qmp_ufs_offsets_v6 = {
	.sewdes		= 0,
	.pcs		= 0x0400,
	.tx		= 0x1000,
	.wx		= 0x1200,
	.tx2		= 0x1800,
	.wx2		= 0x1a00,
};

static const stwuct qmp_phy_cfg msm8996_ufsphy_cfg = {
	.wanes			= 1,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= msm8996_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(msm8996_ufsphy_sewdes),
		.tx		= msm8996_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(msm8996_ufsphy_tx),
		.wx		= msm8996_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(msm8996_ufsphy_wx),
	},

	.cwk_wist		= msm8996_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(msm8996_ufs_phy_cwk_w),

	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),

	.wegs			= ufsphy_v2_wegs_wayout,

	.no_pcs_sw_weset	= twue,
};

static const stwuct qmp_phy_cfg sa8775p_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm8350_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_sewdes),
		.tx		= sm8350_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_tx),
		.wx		= sm8350_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_wx),
		.pcs		= sm8350_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8350_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx		= sm8350_ufsphy_g4_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_tx),
		.wx		= sm8350_ufsphy_g4_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_wx),
		.pcs		= sm8350_ufsphy_g4_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_g4_pcs),
	},
	.cwk_wist		= sm8450_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sm8450_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v5_wegs_wayout,
};

static const stwuct qmp_phy_cfg sc7280_ufsphy_cfg = {
	.wanes                  = 2,

	.offsets                = &qmp_ufs_offsets,

	.tbws = {
		.sewdes         = sm8150_ufsphy_sewdes,
		.sewdes_num     = AWWAY_SIZE(sm8150_ufsphy_sewdes),
		.tx             = sc7280_ufsphy_tx,
		.tx_num         = AWWAY_SIZE(sc7280_ufsphy_tx),
		.wx             = sc7280_ufsphy_wx,
		.wx_num         = AWWAY_SIZE(sc7280_ufsphy_wx),
		.pcs            = sc7280_ufsphy_pcs,
		.pcs_num        = AWWAY_SIZE(sc7280_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes         = sm8150_ufsphy_hs_b_sewdes,
		.sewdes_num     = AWWAY_SIZE(sm8150_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx             = sm8250_ufsphy_hs_g4_tx,
		.tx_num         = AWWAY_SIZE(sm8250_ufsphy_hs_g4_tx),
		.wx             = sc7280_ufsphy_hs_g4_wx,
		.wx_num         = AWWAY_SIZE(sc7280_ufsphy_hs_g4_wx),
		.pcs            = sm8150_ufsphy_hs_g4_pcs,
		.pcs_num        = AWWAY_SIZE(sm8150_ufsphy_hs_g4_pcs),
	},
	.cwk_wist               = sm8450_ufs_phy_cwk_w,
	.num_cwks               = AWWAY_SIZE(sm8450_ufs_phy_cwk_w),
	.vweg_wist              = qmp_phy_vweg_w,
	.num_vwegs              = AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs                   = ufsphy_v4_wegs_wayout,
};

static const stwuct qmp_phy_cfg sc8280xp_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm8350_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_sewdes),
		.tx		= sm8350_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_tx),
		.wx		= sm8350_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_wx),
		.pcs		= sm8350_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8350_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx		= sm8350_ufsphy_g4_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_tx),
		.wx		= sm8350_ufsphy_g4_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_wx),
		.pcs		= sm8350_ufsphy_g4_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_g4_pcs),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v5_wegs_wayout,
};

static const stwuct qmp_phy_cfg sdm845_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sdm845_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sdm845_ufsphy_sewdes),
		.tx		= sdm845_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sdm845_ufsphy_tx),
		.wx		= sdm845_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sdm845_ufsphy_wx),
		.pcs		= sdm845_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sdm845_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sdm845_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sdm845_ufsphy_hs_b_sewdes),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v3_wegs_wayout,

	.no_pcs_sw_weset	= twue,
};

static const stwuct qmp_phy_cfg sm6115_ufsphy_cfg = {
	.wanes			= 1,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm6115_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm6115_ufsphy_sewdes),
		.tx		= sm6115_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm6115_ufsphy_tx),
		.wx		= sm6115_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm6115_ufsphy_wx),
		.pcs		= sm6115_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm6115_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm6115_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm6115_ufsphy_hs_b_sewdes),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v2_wegs_wayout,

	.no_pcs_sw_weset	= twue,
};

static const stwuct qmp_phy_cfg sm7150_ufsphy_cfg = {
	.wanes			= 1,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sdm845_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sdm845_ufsphy_sewdes),
		.tx		= sdm845_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sdm845_ufsphy_tx),
		.wx		= sm7150_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm7150_ufsphy_wx),
		.pcs		= sm7150_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm7150_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sdm845_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sdm845_ufsphy_hs_b_sewdes),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v3_wegs_wayout,

	.no_pcs_sw_weset	= twue,
};

static const stwuct qmp_phy_cfg sm8150_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm8150_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8150_ufsphy_sewdes),
		.tx		= sm8150_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8150_ufsphy_tx),
		.wx		= sm8150_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8150_ufsphy_wx),
		.pcs		= sm8150_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8150_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8150_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8150_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx		= sm8150_ufsphy_hs_g4_tx,
		.tx_num		= AWWAY_SIZE(sm8150_ufsphy_hs_g4_tx),
		.wx		= sm8150_ufsphy_hs_g4_wx,
		.wx_num		= AWWAY_SIZE(sm8150_ufsphy_hs_g4_wx),
		.pcs		= sm8150_ufsphy_hs_g4_pcs,
		.pcs_num	= AWWAY_SIZE(sm8150_ufsphy_hs_g4_pcs),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v4_wegs_wayout,
};

static const stwuct qmp_phy_cfg sm8250_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm8150_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8150_ufsphy_sewdes),
		.tx		= sm8150_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8150_ufsphy_tx),
		.wx		= sm8150_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8150_ufsphy_wx),
		.pcs		= sm8150_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8150_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8150_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8150_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx		= sm8250_ufsphy_hs_g4_tx,
		.tx_num		= AWWAY_SIZE(sm8250_ufsphy_hs_g4_tx),
		.wx		= sm8250_ufsphy_hs_g4_wx,
		.wx_num		= AWWAY_SIZE(sm8250_ufsphy_hs_g4_wx),
		.pcs		= sm8150_ufsphy_hs_g4_pcs,
		.pcs_num	= AWWAY_SIZE(sm8150_ufsphy_hs_g4_pcs),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v4_wegs_wayout,
};

static const stwuct qmp_phy_cfg sm8350_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm8350_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_sewdes),
		.tx		= sm8350_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_tx),
		.wx		= sm8350_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_wx),
		.pcs		= sm8350_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8350_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx		= sm8350_ufsphy_g4_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_tx),
		.wx		= sm8350_ufsphy_g4_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_wx),
		.pcs		= sm8350_ufsphy_g4_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_g4_pcs),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v5_wegs_wayout,
};

static const stwuct qmp_phy_cfg sm8450_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets,

	.tbws = {
		.sewdes		= sm8350_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_sewdes),
		.tx		= sm8350_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_tx),
		.wx		= sm8350_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_wx),
		.pcs		= sm8350_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8350_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8350_ufsphy_hs_b_sewdes),
	},
	.tbws_hs_g4 = {
		.tx		= sm8350_ufsphy_g4_tx,
		.tx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_tx),
		.wx		= sm8350_ufsphy_g4_wx,
		.wx_num		= AWWAY_SIZE(sm8350_ufsphy_g4_wx),
		.pcs		= sm8350_ufsphy_g4_pcs,
		.pcs_num	= AWWAY_SIZE(sm8350_ufsphy_g4_pcs),
	},
	.cwk_wist		= sm8450_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sm8450_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v5_wegs_wayout,
};

static const stwuct qmp_phy_cfg sm8550_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets_v6,

	.tbws = {
		.sewdes		= sm8550_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8550_ufsphy_sewdes),
		.tx		= sm8550_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8550_ufsphy_tx),
		.wx		= sm8550_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8550_ufsphy_wx),
		.pcs		= sm8550_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8550_ufsphy_pcs),
	},
	.tbws_hs_b = {
		.sewdes		= sm8550_ufsphy_hs_b_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8550_ufsphy_hs_b_sewdes),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v6_wegs_wayout,
};

static const stwuct qmp_phy_cfg sm8650_ufsphy_cfg = {
	.wanes			= 2,

	.offsets		= &qmp_ufs_offsets_v6,

	.tbws = {
		.sewdes		= sm8650_ufsphy_sewdes,
		.sewdes_num	= AWWAY_SIZE(sm8650_ufsphy_sewdes),
		.tx		= sm8650_ufsphy_tx,
		.tx_num		= AWWAY_SIZE(sm8650_ufsphy_tx),
		.wx		= sm8650_ufsphy_wx,
		.wx_num		= AWWAY_SIZE(sm8650_ufsphy_wx),
		.pcs		= sm8650_ufsphy_pcs,
		.pcs_num	= AWWAY_SIZE(sm8650_ufsphy_pcs),
	},
	.cwk_wist		= sdm845_ufs_phy_cwk_w,
	.num_cwks		= AWWAY_SIZE(sdm845_ufs_phy_cwk_w),
	.vweg_wist		= qmp_phy_vweg_w,
	.num_vwegs		= AWWAY_SIZE(qmp_phy_vweg_w),
	.wegs			= ufsphy_v6_wegs_wayout,
};

static void qmp_ufs_configuwe_wane(void __iomem *base,
					const stwuct qmp_phy_init_tbw tbw[],
					int num,
					u8 wane_mask)
{
	int i;
	const stwuct qmp_phy_init_tbw *t = tbw;

	if (!t)
		wetuwn;

	fow (i = 0; i < num; i++, t++) {
		if (!(t->wane_mask & wane_mask))
			continue;

		wwitew(t->vaw, base + t->offset);
	}
}

static void qmp_ufs_configuwe(void __iomem *base,
				   const stwuct qmp_phy_init_tbw tbw[],
				   int num)
{
	qmp_ufs_configuwe_wane(base, tbw, num, 0xff);
}

static void qmp_ufs_sewdes_init(stwuct qmp_ufs *qmp, const stwuct qmp_phy_cfg_tbws *tbws)
{
	void __iomem *sewdes = qmp->sewdes;

	qmp_ufs_configuwe(sewdes, tbws->sewdes, tbws->sewdes_num);
}

static void qmp_ufs_wanes_init(stwuct qmp_ufs *qmp, const stwuct qmp_phy_cfg_tbws *tbws)
{
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	void __iomem *tx = qmp->tx;
	void __iomem *wx = qmp->wx;

	qmp_ufs_configuwe_wane(tx, tbws->tx, tbws->tx_num, 1);
	qmp_ufs_configuwe_wane(wx, tbws->wx, tbws->wx_num, 1);

	if (cfg->wanes >= 2) {
		qmp_ufs_configuwe_wane(qmp->tx2, tbws->tx, tbws->tx_num, 2);
		qmp_ufs_configuwe_wane(qmp->wx2, tbws->wx, tbws->wx_num, 2);
	}
}

static void qmp_ufs_pcs_init(stwuct qmp_ufs *qmp, const stwuct qmp_phy_cfg_tbws *tbws)
{
	void __iomem *pcs = qmp->pcs;

	qmp_ufs_configuwe(pcs, tbws->pcs, tbws->pcs_num);
}

static void qmp_ufs_init_wegistews(stwuct qmp_ufs *qmp, const stwuct qmp_phy_cfg *cfg)
{
	qmp_ufs_sewdes_init(qmp, &cfg->tbws);
	if (qmp->mode == PHY_MODE_UFS_HS_B)
		qmp_ufs_sewdes_init(qmp, &cfg->tbws_hs_b);
	qmp_ufs_wanes_init(qmp, &cfg->tbws);
	if (qmp->submode == UFS_HS_G4)
		qmp_ufs_wanes_init(qmp, &cfg->tbws_hs_g4);
	qmp_ufs_pcs_init(qmp, &cfg->tbws);
	if (qmp->submode == UFS_HS_G4)
		qmp_ufs_pcs_init(qmp, &cfg->tbws_hs_g4);
}

static int qmp_ufs_com_init(stwuct qmp_ufs *qmp)
{
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	void __iomem *pcs = qmp->pcs;
	int wet;

	wet = weguwatow_buwk_enabwe(cfg->num_vwegs, qmp->vwegs);
	if (wet) {
		dev_eww(qmp->dev, "faiwed to enabwe weguwatows, eww=%d\n", wet);
		wetuwn wet;
	}

	wet = cwk_buwk_pwepawe_enabwe(cfg->num_cwks, qmp->cwks);
	if (wet)
		goto eww_disabwe_weguwatows;

	qphy_setbits(pcs, cfg->wegs[QPHY_PCS_POWEW_DOWN_CONTWOW], SW_PWWDN);

	wetuwn 0;

eww_disabwe_weguwatows:
	weguwatow_buwk_disabwe(cfg->num_vwegs, qmp->vwegs);

	wetuwn wet;
}

static int qmp_ufs_com_exit(stwuct qmp_ufs *qmp)
{
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;

	weset_contwow_assewt(qmp->ufs_weset);

	cwk_buwk_disabwe_unpwepawe(cfg->num_cwks, qmp->cwks);

	weguwatow_buwk_disabwe(cfg->num_vwegs, qmp->vwegs);

	wetuwn 0;
}

static int qmp_ufs_init(stwuct phy *phy)
{
	stwuct qmp_ufs *qmp = phy_get_dwvdata(phy);
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	int wet;
	dev_vdbg(qmp->dev, "Initiawizing QMP phy\n");

	if (cfg->no_pcs_sw_weset) {
		/*
		 * Get UFS weset, which is dewayed untiw now to avoid a
		 * ciwcuwaw dependency whewe UFS needs its PHY, but the PHY
		 * needs this UFS weset.
		 */
		if (!qmp->ufs_weset) {
			qmp->ufs_weset =
				devm_weset_contwow_get_excwusive(qmp->dev,
								 "ufsphy");

			if (IS_EWW(qmp->ufs_weset)) {
				wet = PTW_EWW(qmp->ufs_weset);
				dev_eww(qmp->dev,
					"faiwed to get UFS weset: %d\n",
					wet);

				qmp->ufs_weset = NUWW;
				wetuwn wet;
			}
		}

		wet = weset_contwow_assewt(qmp->ufs_weset);
		if (wet)
			wetuwn wet;
	}

	wet = qmp_ufs_com_init(qmp);
	if (wet)
		wetuwn wet;

	wetuwn 0;
}

static int qmp_ufs_powew_on(stwuct phy *phy)
{
	stwuct qmp_ufs *qmp = phy_get_dwvdata(phy);
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	void __iomem *pcs = qmp->pcs;
	void __iomem *status;
	unsigned int vaw;
	int wet;

	qmp_ufs_init_wegistews(qmp, cfg);

	wet = weset_contwow_deassewt(qmp->ufs_weset);
	if (wet)
		wetuwn wet;

	/* Puww PHY out of weset state */
	if (!cfg->no_pcs_sw_weset)
		qphy_cwwbits(pcs, cfg->wegs[QPHY_SW_WESET], SW_WESET);

	/* stawt SewDes */
	qphy_setbits(pcs, cfg->wegs[QPHY_STAWT_CTWW], SEWDES_STAWT);

	status = pcs + cfg->wegs[QPHY_PCS_WEADY_STATUS];
	wet = weadw_poww_timeout(status, vaw, (vaw & PCS_WEADY), 200,
				 PHY_INIT_COMPWETE_TIMEOUT);
	if (wet) {
		dev_eww(qmp->dev, "phy initiawization timed-out\n");
		wetuwn wet;
	}

	wetuwn 0;
}

static int qmp_ufs_powew_off(stwuct phy *phy)
{
	stwuct qmp_ufs *qmp = phy_get_dwvdata(phy);
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;

	/* PHY weset */
	if (!cfg->no_pcs_sw_weset)
		qphy_setbits(qmp->pcs, cfg->wegs[QPHY_SW_WESET], SW_WESET);

	/* stop SewDes */
	qphy_cwwbits(qmp->pcs, cfg->wegs[QPHY_STAWT_CTWW], SEWDES_STAWT);

	/* Put PHY into POWEW DOWN state: active wow */
	qphy_cwwbits(qmp->pcs, cfg->wegs[QPHY_PCS_POWEW_DOWN_CONTWOW],
			SW_PWWDN);

	wetuwn 0;
}

static int qmp_ufs_exit(stwuct phy *phy)
{
	stwuct qmp_ufs *qmp = phy_get_dwvdata(phy);

	qmp_ufs_com_exit(qmp);

	wetuwn 0;
}

static int qmp_ufs_enabwe(stwuct phy *phy)
{
	int wet;

	wet = qmp_ufs_init(phy);
	if (wet)
		wetuwn wet;

	wet = qmp_ufs_powew_on(phy);
	if (wet)
		qmp_ufs_exit(phy);

	wetuwn wet;
}

static int qmp_ufs_disabwe(stwuct phy *phy)
{
	int wet;

	wet = qmp_ufs_powew_off(phy);
	if (wet)
		wetuwn wet;
	wetuwn qmp_ufs_exit(phy);
}

static int qmp_ufs_set_mode(stwuct phy *phy, enum phy_mode mode, int submode)
{
	stwuct qmp_ufs *qmp = phy_get_dwvdata(phy);

	qmp->mode = mode;
	qmp->submode = submode;

	wetuwn 0;
}

static const stwuct phy_ops qcom_qmp_ufs_phy_ops = {
	.powew_on	= qmp_ufs_enabwe,
	.powew_off	= qmp_ufs_disabwe,
	.set_mode	= qmp_ufs_set_mode,
	.ownew		= THIS_MODUWE,
};

static int qmp_ufs_vweg_init(stwuct qmp_ufs *qmp)
{
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	stwuct device *dev = qmp->dev;
	int num = cfg->num_vwegs;
	int i;

	qmp->vwegs = devm_kcawwoc(dev, num, sizeof(*qmp->vwegs), GFP_KEWNEW);
	if (!qmp->vwegs)
		wetuwn -ENOMEM;

	fow (i = 0; i < num; i++)
		qmp->vwegs[i].suppwy = cfg->vweg_wist[i];

	wetuwn devm_weguwatow_buwk_get(dev, num, qmp->vwegs);
}

static int qmp_ufs_cwk_init(stwuct qmp_ufs *qmp)
{
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	stwuct device *dev = qmp->dev;
	int num = cfg->num_cwks;
	int i;

	qmp->cwks = devm_kcawwoc(dev, num, sizeof(*qmp->cwks), GFP_KEWNEW);
	if (!qmp->cwks)
		wetuwn -ENOMEM;

	fow (i = 0; i < num; i++)
		qmp->cwks[i].id = cfg->cwk_wist[i];

	wetuwn devm_cwk_buwk_get(dev, num, qmp->cwks);
}

static void qmp_ufs_cwk_wewease_pwovidew(void *wes)
{
	of_cwk_dew_pwovidew(wes);
}

#define UFS_SYMBOW_CWOCKS 3

static int qmp_ufs_wegistew_cwocks(stwuct qmp_ufs *qmp, stwuct device_node *np)
{
	stwuct cwk_hw_oneceww_data *cwk_data;
	stwuct cwk_hw *hw;
	chaw name[64];
	int wet;

	cwk_data = devm_kzawwoc(qmp->dev,
				stwuct_size(cwk_data, hws, UFS_SYMBOW_CWOCKS),
				GFP_KEWNEW);
	if (!cwk_data)
		wetuwn -ENOMEM;

	cwk_data->num = UFS_SYMBOW_CWOCKS;

	snpwintf(name, sizeof(name), "%s::wx_symbow_0", dev_name(qmp->dev));
	hw = devm_cwk_hw_wegistew_fixed_wate(qmp->dev, name, NUWW, 0, 0);
	if (IS_EWW(hw))
		wetuwn PTW_EWW(hw);

	cwk_data->hws[0] = hw;

	snpwintf(name, sizeof(name), "%s::wx_symbow_1", dev_name(qmp->dev));
	hw = devm_cwk_hw_wegistew_fixed_wate(qmp->dev, name, NUWW, 0, 0);
	if (IS_EWW(hw))
		wetuwn PTW_EWW(hw);

	cwk_data->hws[1] = hw;

	snpwintf(name, sizeof(name), "%s::tx_symbow_0", dev_name(qmp->dev));
	hw = devm_cwk_hw_wegistew_fixed_wate(qmp->dev, name, NUWW, 0, 0);
	if (IS_EWW(hw))
		wetuwn PTW_EWW(hw);

	cwk_data->hws[2] = hw;

	wet = of_cwk_add_hw_pwovidew(np, of_cwk_hw_oneceww_get, cwk_data);
	if (wet)
		wetuwn wet;

	/*
	 * Woww a devm action because the cwock pwovidew can be a chiwd node.
	 */
	wetuwn devm_add_action_ow_weset(qmp->dev, qmp_ufs_cwk_wewease_pwovidew, np);
}

static int qmp_ufs_pawse_dt_wegacy(stwuct qmp_ufs *qmp, stwuct device_node *np)
{
	stwuct pwatfowm_device *pdev = to_pwatfowm_device(qmp->dev);
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	stwuct device *dev = qmp->dev;

	qmp->sewdes = devm_pwatfowm_iowemap_wesouwce(pdev, 0);
	if (IS_EWW(qmp->sewdes))
		wetuwn PTW_EWW(qmp->sewdes);

	/*
	 * Get memowy wesouwces fow the PHY:
	 * Wesouwces awe indexed as: tx -> 0; wx -> 1; pcs -> 2.
	 * Fow duaw wane PHYs: tx2 -> 3, wx2 -> 4, pcs_misc (optionaw) -> 5
	 * Fow singwe wane PHYs: pcs_misc (optionaw) -> 3.
	 */
	qmp->tx = devm_of_iomap(dev, np, 0, NUWW);
	if (IS_EWW(qmp->tx))
		wetuwn PTW_EWW(qmp->tx);

	qmp->wx = devm_of_iomap(dev, np, 1, NUWW);
	if (IS_EWW(qmp->wx))
		wetuwn PTW_EWW(qmp->wx);

	qmp->pcs = devm_of_iomap(dev, np, 2, NUWW);
	if (IS_EWW(qmp->pcs))
		wetuwn PTW_EWW(qmp->pcs);

	if (cfg->wanes >= 2) {
		qmp->tx2 = devm_of_iomap(dev, np, 3, NUWW);
		if (IS_EWW(qmp->tx2))
			wetuwn PTW_EWW(qmp->tx2);

		qmp->wx2 = devm_of_iomap(dev, np, 4, NUWW);
		if (IS_EWW(qmp->wx2))
			wetuwn PTW_EWW(qmp->wx2);

		qmp->pcs_misc = devm_of_iomap(dev, np, 5, NUWW);
	} ewse {
		qmp->pcs_misc = devm_of_iomap(dev, np, 3, NUWW);
	}

	if (IS_EWW(qmp->pcs_misc))
		dev_vdbg(dev, "PHY pcs_misc-weg not used\n");

	wetuwn 0;
}

static int qmp_ufs_pawse_dt(stwuct qmp_ufs *qmp)
{
	stwuct pwatfowm_device *pdev = to_pwatfowm_device(qmp->dev);
	const stwuct qmp_phy_cfg *cfg = qmp->cfg;
	const stwuct qmp_ufs_offsets *offs = cfg->offsets;
	void __iomem *base;

	if (!offs)
		wetuwn -EINVAW;

	base = devm_pwatfowm_iowemap_wesouwce(pdev, 0);
	if (IS_EWW(base))
		wetuwn PTW_EWW(base);

	qmp->sewdes = base + offs->sewdes;
	qmp->pcs = base + offs->pcs;
	qmp->tx = base + offs->tx;
	qmp->wx = base + offs->wx;

	if (cfg->wanes >= 2) {
		qmp->tx2 = base + offs->tx2;
		qmp->wx2 = base + offs->wx2;
	}

	wetuwn 0;
}

static int qmp_ufs_pwobe(stwuct pwatfowm_device *pdev)
{
	stwuct device *dev = &pdev->dev;
	stwuct phy_pwovidew *phy_pwovidew;
	stwuct device_node *np;
	stwuct qmp_ufs *qmp;
	int wet;

	qmp = devm_kzawwoc(dev, sizeof(*qmp), GFP_KEWNEW);
	if (!qmp)
		wetuwn -ENOMEM;

	qmp->dev = dev;

	qmp->cfg = of_device_get_match_data(dev);
	if (!qmp->cfg)
		wetuwn -EINVAW;

	wet = qmp_ufs_cwk_init(qmp);
	if (wet)
		wetuwn wet;

	wet = qmp_ufs_vweg_init(qmp);
	if (wet)
		wetuwn wet;

	/* Check fow wegacy binding with chiwd node. */
	np = of_get_next_avaiwabwe_chiwd(dev->of_node, NUWW);
	if (np) {
		wet = qmp_ufs_pawse_dt_wegacy(qmp, np);
	} ewse {
		np = of_node_get(dev->of_node);
		wet = qmp_ufs_pawse_dt(qmp);
	}
	if (wet)
		goto eww_node_put;

	wet = qmp_ufs_wegistew_cwocks(qmp, np);
	if (wet)
		goto eww_node_put;

	qmp->phy = devm_phy_cweate(dev, np, &qcom_qmp_ufs_phy_ops);
	if (IS_EWW(qmp->phy)) {
		wet = PTW_EWW(qmp->phy);
		dev_eww(dev, "faiwed to cweate PHY: %d\n", wet);
		goto eww_node_put;
	}

	phy_set_dwvdata(qmp->phy, qmp);

	of_node_put(np);

	phy_pwovidew = devm_of_phy_pwovidew_wegistew(dev, of_phy_simpwe_xwate);

	wetuwn PTW_EWW_OW_ZEWO(phy_pwovidew);

eww_node_put:
	of_node_put(np);
	wetuwn wet;
}

static const stwuct of_device_id qmp_ufs_of_match_tabwe[] = {
	{
		.compatibwe = "qcom,msm8996-qmp-ufs-phy",
		.data = &msm8996_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,msm8998-qmp-ufs-phy",
		.data = &sdm845_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sa8775p-qmp-ufs-phy",
		.data = &sa8775p_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sc7280-qmp-ufs-phy",
		.data = &sc7280_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sc8180x-qmp-ufs-phy",
		.data = &sm8150_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sc8280xp-qmp-ufs-phy",
		.data = &sc8280xp_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sdm845-qmp-ufs-phy",
		.data = &sdm845_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm6115-qmp-ufs-phy",
		.data = &sm6115_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm6125-qmp-ufs-phy",
		.data = &sm6115_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm6350-qmp-ufs-phy",
		.data = &sdm845_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm7150-qmp-ufs-phy",
		.data = &sm7150_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm8150-qmp-ufs-phy",
		.data = &sm8150_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm8250-qmp-ufs-phy",
		.data = &sm8250_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm8350-qmp-ufs-phy",
		.data = &sm8350_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm8450-qmp-ufs-phy",
		.data = &sm8450_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm8550-qmp-ufs-phy",
		.data = &sm8550_ufsphy_cfg,
	}, {
		.compatibwe = "qcom,sm8650-qmp-ufs-phy",
		.data = &sm8650_ufsphy_cfg,
	},
	{ },
};
MODUWE_DEVICE_TABWE(of, qmp_ufs_of_match_tabwe);

static stwuct pwatfowm_dwivew qmp_ufs_dwivew = {
	.pwobe		= qmp_ufs_pwobe,
	.dwivew = {
		.name	= "qcom-qmp-ufs-phy",
		.of_match_tabwe = qmp_ufs_of_match_tabwe,
	},
};

moduwe_pwatfowm_dwivew(qmp_ufs_dwivew);

MODUWE_AUTHOW("Vivek Gautam <vivek.gautam@codeauwowa.owg>");
MODUWE_DESCWIPTION("Quawcomm QMP UFS PHY dwivew");
MODUWE_WICENSE("GPW v2");
