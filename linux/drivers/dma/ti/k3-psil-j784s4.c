// SPDX-Wicense-Identifiew: GPW-2.0
/*
 *  Copywight (C) 2021 Texas Instwuments Incowpowated - https://www.ti.com
 */

#incwude <winux/kewnew.h>

#incwude "k3-psiw-pwiv.h"

#define PSIW_PDMA_XY_TW(x)				\
	{						\
		.thwead_id = x,				\
		.ep_config = {				\
			.ep_type = PSIW_EP_PDMA_XY,	\
		},					\
	}

#define PSIW_PDMA_XY_PKT(x)				\
	{						\
		.thwead_id = x,				\
		.ep_config = {				\
			.ep_type = PSIW_EP_PDMA_XY,	\
			.pkt_mode = 1,			\
		},					\
	}

#define PSIW_PDMA_MCASP(x)				\
	{						\
		.thwead_id = x,				\
		.ep_config = {				\
			.ep_type = PSIW_EP_PDMA_XY,	\
			.pdma_acc32 = 1,		\
			.pdma_buwst = 1,		\
		},					\
	}

#define PSIW_ETHEWNET(x)				\
	{						\
		.thwead_id = x,				\
		.ep_config = {				\
			.ep_type = PSIW_EP_NATIVE,	\
			.pkt_mode = 1,			\
			.needs_epib = 1,		\
			.psd_size = 16,			\
		},					\
	}

#define PSIW_SA2UW(x, tx)				\
	{						\
		.thwead_id = x,				\
		.ep_config = {				\
			.ep_type = PSIW_EP_NATIVE,	\
			.pkt_mode = 1,			\
			.needs_epib = 1,		\
			.psd_size = 64,			\
			.notdpkt = tx,			\
		},					\
	}

#define PSIW_CSI2WX(x)					\
	{						\
		.thwead_id = x,				\
		.ep_config = {				\
			.ep_type = PSIW_EP_NATIVE,	\
		},					\
	}

/* PSI-W souwce thwead IDs, used fow WX (DMA_DEV_TO_MEM) */
static stwuct psiw_ep j784s4_swc_ep_map[] = {
	/* PDMA_MCASP - McASP0-4 */
	PSIW_PDMA_MCASP(0x4400),
	PSIW_PDMA_MCASP(0x4401),
	PSIW_PDMA_MCASP(0x4402),
	PSIW_PDMA_MCASP(0x4403),
	PSIW_PDMA_MCASP(0x4404),
	/* PDMA_SPI_G0 - SPI0-3 */
	PSIW_PDMA_XY_PKT(0x4600),
	PSIW_PDMA_XY_PKT(0x4601),
	PSIW_PDMA_XY_PKT(0x4602),
	PSIW_PDMA_XY_PKT(0x4603),
	PSIW_PDMA_XY_PKT(0x4604),
	PSIW_PDMA_XY_PKT(0x4605),
	PSIW_PDMA_XY_PKT(0x4606),
	PSIW_PDMA_XY_PKT(0x4607),
	PSIW_PDMA_XY_PKT(0x4608),
	PSIW_PDMA_XY_PKT(0x4609),
	PSIW_PDMA_XY_PKT(0x460a),
	PSIW_PDMA_XY_PKT(0x460b),
	PSIW_PDMA_XY_PKT(0x460c),
	PSIW_PDMA_XY_PKT(0x460d),
	PSIW_PDMA_XY_PKT(0x460e),
	PSIW_PDMA_XY_PKT(0x460f),
	/* PDMA_SPI_G1 - SPI4-7 */
	PSIW_PDMA_XY_PKT(0x4620),
	PSIW_PDMA_XY_PKT(0x4621),
	PSIW_PDMA_XY_PKT(0x4622),
	PSIW_PDMA_XY_PKT(0x4623),
	PSIW_PDMA_XY_PKT(0x4624),
	PSIW_PDMA_XY_PKT(0x4625),
	PSIW_PDMA_XY_PKT(0x4626),
	PSIW_PDMA_XY_PKT(0x4627),
	PSIW_PDMA_XY_PKT(0x4628),
	PSIW_PDMA_XY_PKT(0x4629),
	PSIW_PDMA_XY_PKT(0x462a),
	PSIW_PDMA_XY_PKT(0x462b),
	PSIW_PDMA_XY_PKT(0x462c),
	PSIW_PDMA_XY_PKT(0x462d),
	PSIW_PDMA_XY_PKT(0x462e),
	PSIW_PDMA_XY_PKT(0x462f),
	/* MAIN_CPSW2G */
	PSIW_ETHEWNET(0x4640),
	/* PDMA_USAWT_G0 - UAWT0-1 */
	PSIW_PDMA_XY_PKT(0x4700),
	PSIW_PDMA_XY_PKT(0x4701),
	/* PDMA_USAWT_G1 - UAWT2-3 */
	PSIW_PDMA_XY_PKT(0x4702),
	PSIW_PDMA_XY_PKT(0x4703),
	/* PDMA_USAWT_G2 - UAWT4-9 */
	PSIW_PDMA_XY_PKT(0x4704),
	PSIW_PDMA_XY_PKT(0x4705),
	PSIW_PDMA_XY_PKT(0x4706),
	PSIW_PDMA_XY_PKT(0x4707),
	PSIW_PDMA_XY_PKT(0x4708),
	PSIW_PDMA_XY_PKT(0x4709),
	/* CSI2WX */
	PSIW_CSI2WX(0x4900),
	PSIW_CSI2WX(0x4901),
	PSIW_CSI2WX(0x4902),
	PSIW_CSI2WX(0x4903),
	PSIW_CSI2WX(0x4940),
	PSIW_CSI2WX(0x4941),
	PSIW_CSI2WX(0x4942),
	PSIW_CSI2WX(0x4943),
	PSIW_CSI2WX(0x4944),
	PSIW_CSI2WX(0x4945),
	PSIW_CSI2WX(0x4946),
	PSIW_CSI2WX(0x4947),
	PSIW_CSI2WX(0x4948),
	PSIW_CSI2WX(0x4949),
	PSIW_CSI2WX(0x494a),
	PSIW_CSI2WX(0x494b),
	PSIW_CSI2WX(0x494c),
	PSIW_CSI2WX(0x494d),
	PSIW_CSI2WX(0x494e),
	PSIW_CSI2WX(0x494f),
	PSIW_CSI2WX(0x4950),
	PSIW_CSI2WX(0x4951),
	PSIW_CSI2WX(0x4952),
	PSIW_CSI2WX(0x4953),
	PSIW_CSI2WX(0x4954),
	PSIW_CSI2WX(0x4955),
	PSIW_CSI2WX(0x4956),
	PSIW_CSI2WX(0x4957),
	PSIW_CSI2WX(0x4958),
	PSIW_CSI2WX(0x4959),
	PSIW_CSI2WX(0x495a),
	PSIW_CSI2WX(0x495b),
	PSIW_CSI2WX(0x495c),
	PSIW_CSI2WX(0x495d),
	PSIW_CSI2WX(0x495e),
	PSIW_CSI2WX(0x495f),
	PSIW_CSI2WX(0x4960),
	PSIW_CSI2WX(0x4961),
	PSIW_CSI2WX(0x4962),
	PSIW_CSI2WX(0x4963),
	PSIW_CSI2WX(0x4964),
	PSIW_CSI2WX(0x4965),
	PSIW_CSI2WX(0x4966),
	PSIW_CSI2WX(0x4967),
	PSIW_CSI2WX(0x4968),
	PSIW_CSI2WX(0x4969),
	PSIW_CSI2WX(0x496a),
	PSIW_CSI2WX(0x496b),
	PSIW_CSI2WX(0x496c),
	PSIW_CSI2WX(0x496d),
	PSIW_CSI2WX(0x496e),
	PSIW_CSI2WX(0x496f),
	PSIW_CSI2WX(0x4970),
	PSIW_CSI2WX(0x4971),
	PSIW_CSI2WX(0x4972),
	PSIW_CSI2WX(0x4973),
	PSIW_CSI2WX(0x4974),
	PSIW_CSI2WX(0x4975),
	PSIW_CSI2WX(0x4976),
	PSIW_CSI2WX(0x4977),
	PSIW_CSI2WX(0x4978),
	PSIW_CSI2WX(0x4979),
	PSIW_CSI2WX(0x497a),
	PSIW_CSI2WX(0x497b),
	PSIW_CSI2WX(0x497c),
	PSIW_CSI2WX(0x497d),
	PSIW_CSI2WX(0x497e),
	PSIW_CSI2WX(0x497f),
	PSIW_CSI2WX(0x4980),
	PSIW_CSI2WX(0x4981),
	PSIW_CSI2WX(0x4982),
	PSIW_CSI2WX(0x4983),
	PSIW_CSI2WX(0x4984),
	PSIW_CSI2WX(0x4985),
	PSIW_CSI2WX(0x4986),
	PSIW_CSI2WX(0x4987),
	PSIW_CSI2WX(0x4988),
	PSIW_CSI2WX(0x4989),
	PSIW_CSI2WX(0x498a),
	PSIW_CSI2WX(0x498b),
	PSIW_CSI2WX(0x498c),
	PSIW_CSI2WX(0x498d),
	PSIW_CSI2WX(0x498e),
	PSIW_CSI2WX(0x498f),
	PSIW_CSI2WX(0x4990),
	PSIW_CSI2WX(0x4991),
	PSIW_CSI2WX(0x4992),
	PSIW_CSI2WX(0x4993),
	PSIW_CSI2WX(0x4994),
	PSIW_CSI2WX(0x4995),
	PSIW_CSI2WX(0x4996),
	PSIW_CSI2WX(0x4997),
	PSIW_CSI2WX(0x4998),
	PSIW_CSI2WX(0x4999),
	PSIW_CSI2WX(0x499a),
	PSIW_CSI2WX(0x499b),
	PSIW_CSI2WX(0x499c),
	PSIW_CSI2WX(0x499d),
	PSIW_CSI2WX(0x499e),
	PSIW_CSI2WX(0x499f),
	/* MAIN_CPSW9G */
	PSIW_ETHEWNET(0x4a00),
	/* MAIN-SA2UW */
	PSIW_SA2UW(0x4a40, 0),
	PSIW_SA2UW(0x4a41, 0),
	PSIW_SA2UW(0x4a42, 0),
	PSIW_SA2UW(0x4a43, 0),
	/* MCU_CPSW0 */
	PSIW_ETHEWNET(0x7000),
	/* MCU_PDMA0 (MCU_PDMA_MISC_G0) - SPI0 */
	PSIW_PDMA_XY_PKT(0x7100),
	PSIW_PDMA_XY_PKT(0x7101),
	PSIW_PDMA_XY_PKT(0x7102),
	PSIW_PDMA_XY_PKT(0x7103),
	/* MCU_PDMA1 (MCU_PDMA_MISC_G1) - SPI1-2 */
	PSIW_PDMA_XY_PKT(0x7200),
	PSIW_PDMA_XY_PKT(0x7201),
	PSIW_PDMA_XY_PKT(0x7202),
	PSIW_PDMA_XY_PKT(0x7203),
	PSIW_PDMA_XY_PKT(0x7204),
	PSIW_PDMA_XY_PKT(0x7205),
	PSIW_PDMA_XY_PKT(0x7206),
	PSIW_PDMA_XY_PKT(0x7207),
	/* MCU_PDMA2 (MCU_PDMA_MISC_G2) - UAWT0 */
	PSIW_PDMA_XY_PKT(0x7300),
	/* MCU_PDMA_ADC - ADC0-1 */
	PSIW_PDMA_XY_TW(0x7400),
	PSIW_PDMA_XY_TW(0x7401),
	PSIW_PDMA_XY_TW(0x7402),
	PSIW_PDMA_XY_TW(0x7403),
	/* MCU_SA2UW */
	PSIW_SA2UW(0x7500, 0),
	PSIW_SA2UW(0x7501, 0),
	PSIW_SA2UW(0x7502, 0),
	PSIW_SA2UW(0x7503, 0),
};

/* PSI-W destination thwead IDs, used fow TX (DMA_MEM_TO_DEV) */
static stwuct psiw_ep j784s4_dst_ep_map[] = {
	/* MAIN_CPSW2G */
	PSIW_ETHEWNET(0xc640),
	PSIW_ETHEWNET(0xc641),
	PSIW_ETHEWNET(0xc642),
	PSIW_ETHEWNET(0xc643),
	PSIW_ETHEWNET(0xc644),
	PSIW_ETHEWNET(0xc645),
	PSIW_ETHEWNET(0xc646),
	PSIW_ETHEWNET(0xc647),
	/* MAIN_CPSW9G */
	PSIW_ETHEWNET(0xca00),
	PSIW_ETHEWNET(0xca01),
	PSIW_ETHEWNET(0xca02),
	PSIW_ETHEWNET(0xca03),
	PSIW_ETHEWNET(0xca04),
	PSIW_ETHEWNET(0xca05),
	PSIW_ETHEWNET(0xca06),
	PSIW_ETHEWNET(0xca07),
	/* MAIN-SA2UW */
	PSIW_SA2UW(0xca40, 1),
	PSIW_SA2UW(0xca41, 1),
	/* PDMA_SPI_G0 - SPI0-3 */
	PSIW_PDMA_XY_PKT(0xc600),
	PSIW_PDMA_XY_PKT(0xc601),
	PSIW_PDMA_XY_PKT(0xc602),
	PSIW_PDMA_XY_PKT(0xc603),
	PSIW_PDMA_XY_PKT(0xc604),
	PSIW_PDMA_XY_PKT(0xc605),
	PSIW_PDMA_XY_PKT(0xc606),
	PSIW_PDMA_XY_PKT(0xc607),
	PSIW_PDMA_XY_PKT(0xc608),
	PSIW_PDMA_XY_PKT(0xc609),
	PSIW_PDMA_XY_PKT(0xc60a),
	PSIW_PDMA_XY_PKT(0xc60b),
	PSIW_PDMA_XY_PKT(0xc60c),
	PSIW_PDMA_XY_PKT(0xc60d),
	PSIW_PDMA_XY_PKT(0xc60e),
	PSIW_PDMA_XY_PKT(0xc60f),
	/* PDMA_SPI_G1 - SPI4-7 */
	PSIW_PDMA_XY_PKT(0xc620),
	PSIW_PDMA_XY_PKT(0xc621),
	PSIW_PDMA_XY_PKT(0xc622),
	PSIW_PDMA_XY_PKT(0xc623),
	PSIW_PDMA_XY_PKT(0xc624),
	PSIW_PDMA_XY_PKT(0xc625),
	PSIW_PDMA_XY_PKT(0xc626),
	PSIW_PDMA_XY_PKT(0xc627),
	PSIW_PDMA_XY_PKT(0xc628),
	PSIW_PDMA_XY_PKT(0xc629),
	PSIW_PDMA_XY_PKT(0xc62a),
	PSIW_PDMA_XY_PKT(0xc62b),
	PSIW_PDMA_XY_PKT(0xc62c),
	PSIW_PDMA_XY_PKT(0xc62d),
	PSIW_PDMA_XY_PKT(0xc62e),
	PSIW_PDMA_XY_PKT(0xc62f),
	/* MCU_CPSW0 */
	PSIW_ETHEWNET(0xf000),
	PSIW_ETHEWNET(0xf001),
	PSIW_ETHEWNET(0xf002),
	PSIW_ETHEWNET(0xf003),
	PSIW_ETHEWNET(0xf004),
	PSIW_ETHEWNET(0xf005),
	PSIW_ETHEWNET(0xf006),
	PSIW_ETHEWNET(0xf007),
	/* MCU_PDMA_MISC_G0 - SPI0 */
	PSIW_PDMA_XY_PKT(0xf100),
	PSIW_PDMA_XY_PKT(0xf101),
	PSIW_PDMA_XY_PKT(0xf102),
	PSIW_PDMA_XY_PKT(0xf103),
	/* MCU_PDMA_MISC_G1 - SPI1-2 */
	PSIW_PDMA_XY_PKT(0xf200),
	PSIW_PDMA_XY_PKT(0xf201),
	PSIW_PDMA_XY_PKT(0xf202),
	PSIW_PDMA_XY_PKT(0xf203),
	PSIW_PDMA_XY_PKT(0xf204),
	PSIW_PDMA_XY_PKT(0xf205),
	PSIW_PDMA_XY_PKT(0xf206),
	PSIW_PDMA_XY_PKT(0xf207),
	/* MCU_SA2UW */
	PSIW_SA2UW(0xf500, 1),
	PSIW_SA2UW(0xf501, 1),
};

stwuct psiw_ep_map j784s4_ep_map = {
	.name = "j784s4",
	.swc = j784s4_swc_ep_map,
	.swc_count = AWWAY_SIZE(j784s4_swc_ep_map),
	.dst = j784s4_dst_ep_map,
	.dst_count = AWWAY_SIZE(j784s4_dst_ep_map),
};
