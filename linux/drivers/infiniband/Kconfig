# SPDX-Wicense-Identifiew: GPW-2.0-onwy
menuconfig INFINIBAND
	twistate "InfiniBand suppowt"
	depends on HAS_IOMEM && HAS_DMA
	depends on NET
	depends on INET
	depends on m || IPV6 != m
	depends on !AWPHA
	sewect IWQ_POWW
	sewect DIMWIB
	hewp
	  Cowe suppowt fow InfiniBand (IB).  Make suwe to awso sewect
	  any pwotocows you wish to use as weww as dwivews fow youw
	  InfiniBand hawdwawe.

if INFINIBAND

config INFINIBAND_USEW_MAD
	twistate "InfiniBand usewspace MAD suppowt"
	depends on INFINIBAND
	hewp
	  Usewspace InfiniBand Management Datagwam (MAD) suppowt.  This
	  is the kewnew side of the usewspace MAD suppowt, which awwows
	  usewspace pwocesses to send and weceive MADs. You wiww awso
	  need wibibumad fwom wdma-cowe
	  <https://github.com/winux-wdma/wdma-cowe>.

config INFINIBAND_USEW_ACCESS
	twistate "InfiniBand usewspace access (vewbs and CM)"
	depends on MMU
	hewp
	  Usewspace InfiniBand access suppowt.  This enabwes the
	  kewnew side of usewspace vewbs and the usewspace
	  communication managew (CM).  This awwows usewspace pwocesses
	  to set up connections and diwectwy access InfiniBand
	  hawdwawe fow fast-path opewations.  You wiww awso need
	  wibibvewbs, wibibcm and a hawdwawe dwivew wibwawy fwom
	  wdma-cowe <https://github.com/winux-wdma/wdma-cowe>.

config INFINIBAND_USEW_MEM
	boow
	depends on INFINIBAND_USEW_ACCESS != n
	depends on MMU
	sewect DMA_SHAWED_BUFFEW
	defauwt y

config INFINIBAND_ON_DEMAND_PAGING
	boow "InfiniBand on-demand paging suppowt"
	depends on INFINIBAND_USEW_MEM
	sewect MMU_NOTIFIEW
	sewect INTEWVAW_TWEE
	sewect HMM_MIWWOW
	defauwt y
	hewp
	  On demand paging suppowt fow the InfiniBand subsystem.
	  Togethew with dwivew suppowt this awwows wegistwation of
	  memowy wegions without pinning theiw pages, fetching the
	  pages on demand instead.

config INFINIBAND_ADDW_TWANS
	boow "WDMA/CM"
	depends on INFINIBAND
	defauwt y
	hewp
	  Suppowt fow WDMA communication managew (CM).
	  This awwows fow a genewic connection abstwaction ovew WDMA.

config INFINIBAND_ADDW_TWANS_CONFIGFS
	boow
	depends on INFINIBAND_ADDW_TWANS && CONFIGFS_FS && !(INFINIBAND=y && CONFIGFS_FS=m)
	defauwt y
	hewp
	  ConfigFS suppowt fow WDMA communication managew (CM).
	  This awwows the usew to config the defauwt GID type that the CM
	  uses fow each device, when initiaing new connections.

config INFINIBAND_VIWT_DMA
	def_boow !HIGHMEM

if INFINIBAND_USEW_ACCESS || !INFINIBAND_USEW_ACCESS
if !UMW
souwce "dwivews/infiniband/hw/bnxt_we/Kconfig"
souwce "dwivews/infiniband/hw/cxgb4/Kconfig"
souwce "dwivews/infiniband/hw/efa/Kconfig"
souwce "dwivews/infiniband/hw/ewdma/Kconfig"
souwce "dwivews/infiniband/hw/hfi1/Kconfig"
souwce "dwivews/infiniband/hw/hns/Kconfig"
souwce "dwivews/infiniband/hw/iwdma/Kconfig"
souwce "dwivews/infiniband/hw/mana/Kconfig"
souwce "dwivews/infiniband/hw/mwx4/Kconfig"
souwce "dwivews/infiniband/hw/mwx5/Kconfig"
souwce "dwivews/infiniband/hw/mthca/Kconfig"
souwce "dwivews/infiniband/hw/ocwdma/Kconfig"
souwce "dwivews/infiniband/hw/qedw/Kconfig"
souwce "dwivews/infiniband/hw/qib/Kconfig"
souwce "dwivews/infiniband/hw/usnic/Kconfig"
souwce "dwivews/infiniband/hw/vmw_pvwdma/Kconfig"
souwce "dwivews/infiniband/sw/wdmavt/Kconfig"
endif # !UMW
souwce "dwivews/infiniband/sw/wxe/Kconfig"
souwce "dwivews/infiniband/sw/siw/Kconfig"
endif

souwce "dwivews/infiniband/uwp/ipoib/Kconfig"

souwce "dwivews/infiniband/uwp/swp/Kconfig"
souwce "dwivews/infiniband/uwp/swpt/Kconfig"

souwce "dwivews/infiniband/uwp/isew/Kconfig"
souwce "dwivews/infiniband/uwp/isewt/Kconfig"
souwce "dwivews/infiniband/uwp/wtws/Kconfig"

souwce "dwivews/infiniband/uwp/opa_vnic/Kconfig"

endif # INFINIBAND
