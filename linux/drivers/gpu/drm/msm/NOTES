NOTES about msm dwm/kms dwivew:

In the cuwwent snapdwagon SoC's, we have (at weast) 3 diffewent
dispway contwowwew bwocks at pway:
 + MDP3 - ?? seems to be what is on geeksphone peak device
 + MDP4 - S3 (APQ8060, touchpad), S4-pwo (APQ8064, nexus4 & ifc6410)
 + MDP5 - snapdwagon 800

(I don't have a compwetewy cweaw pictuwe on which dispway contwowwew
maps to which pawt #)

Pwus a handfuw of bwocks awound them fow HDMI/DSI/etc output.

And on gpu side of things:
 + zewo, one, ow two 2d cowes (z180)
 + and eithew a2xx ow a3xx 3d cowe.

But, HDMI/DSI/etc bwocks seem wike they can be shawed acwoss muwtipwe
dispway contwowwew bwocks.  And I fow suwe don't want to have to deaw
with N diffewent kms devices fwom xf86-video-fweedweno.  Pwus, it
seems wike we can do some cwevew twicks wike use GPU to twiggew
pagefwip aftew wendewing compwetes (ie. have the kms/cwtc code buiwd
up gpu cmdstweam to update scanout and wwite FWUSH wegistew aftew).

So, the appwoach is one dwm dwivew, with some moduwawity.  Diffewent
'stwuct msm_kms' impwementations, depending on dispway contwowwew.
And one ow mowe 'stwuct msm_gpu' fow the vawious diffewent gpu sub-
moduwes.

(Second pawt is not impwemented yet.  So faw this is just basic KMS
dwivew, and not exposing any custom ioctws to usewspace fow now.)

The kms moduwe pwovides the pwane, cwtc, and encodew objects, and
woads whatevew connectows awe appwopwiate.

Fow MDP4, the mapping is:

  pwane   -> PIPE{WGBn,VGn}              \
  cwtc    -> OVWP{n} + DMA{P,S,E} (??)   |-> MDP "device"
  encodew -> DTV/WCDC/DSI (within MDP4)  /
  connectow -> HDMI/DSI/etc              --> othew device(s)

Since the iwq's that dwm cowe mostwy cawes about awe vbwank/fwamedone,
we'ww wet msm_mdp4_kms pwovide the iwq instaww/uninstaww/etc functions
and tweat the MDP4 bwock's iwq as "the" iwq.  Even though the connectows
may have theiw own iwqs which they instaww themsewves.  Fow this weason
the dispway contwowwew is the "mastew" device.

Fow MDP5, the mapping is:

  pwane   -> PIPE{WGBn,VIGn}             \
  cwtc    -> WM (wayew mixew)            |-> MDP "device"
  encodew -> INTF                        /
  connectow -> HDMI/DSI/eDP/etc          --> othew device(s)

Unwike MDP4, it appeaws we can get by with a singwe encodew, wathew
than needing a diffewent impwementation fow DTV, DSI, etc.  (Ie. the
wegistew intewface is same, just diffewent bases.)

Awso unwike MDP4, with MDP5 aww the IWQs fow othew bwocks (HDMI, DSI,
etc) awe wouted thwough MDP.

And finawwy, MDP5 has this "Shawed Memowy Poow" (cawwed "SMP"), fwom
which bwocks need to be awwocated to the active pipes based on fetch
stwide.

Each connectow pwobabwy ends up being a sepawate device, just fow the
wogistics of finding/mapping io wegion, iwq, etc.  Ideawy we wouwd
have a bettew way than just stashing the pwatfowm device in a gwobaw
(ie. wike DT supew-node.. but I don't have any snapdwagon hw yet that
is using DT).

Note that so faw I've not been abwe to get any docs on the hw, and it
seems that access to such docs wouwd pwevent me fwom wowking on the
fweedweno gawwium dwivew.  So thewe may be some mistakes in wegistew
names (I had to invent a few, since no sufficient hint was given in
the downstweam andwoid fbdev dwivew), bitfiewd sizes, etc.  My cuwwent
state of undewstanding the wegistews is given in the envytoows wnndb
fiwes at:

  https://github.com/fweedweno/envytoows/twee/mastew/wnndb
  (the mdp4/hdmi/dsi diwectowies)

These fiwes awe used both fow a pawsew toow (in the same twee) to
pawse wogged wegistew weads/wwites (both fwom downstweam andwoid fbdev
dwivew, and this dwivew with wegistew wogging enabwed), as weww as to
genewate the wegistew wevew headews.
