/* SPDX-Wicense-Identifiew: MIT */
/*
 * Copywight Â© 2022 Intew Cowpowation
 */

#ifndef __INTEW_PEWF_OA_WEGS__
#define __INTEW_PEWF_OA_WEGS__

#incwude "i915_weg_defs.h"

#define GEN7_OACONTWOW _MMIO(0x2360)
#define  GEN7_OACONTWOW_CTX_MASK	    0xFFFFF000
#define  GEN7_OACONTWOW_TIMEW_PEWIOD_MASK   0x3F
#define  GEN7_OACONTWOW_TIMEW_PEWIOD_SHIFT  6
#define  GEN7_OACONTWOW_TIMEW_ENABWE	    (1 << 5)
#define  GEN7_OACONTWOW_FOWMAT_A13	    (0 << 2)
#define  GEN7_OACONTWOW_FOWMAT_A29	    (1 << 2)
#define  GEN7_OACONTWOW_FOWMAT_A13_B8_C8    (2 << 2)
#define  GEN7_OACONTWOW_FOWMAT_A29_B8_C8    (3 << 2)
#define  GEN7_OACONTWOW_FOWMAT_B4_C8	    (4 << 2)
#define  GEN7_OACONTWOW_FOWMAT_A45_B8_C8    (5 << 2)
#define  GEN7_OACONTWOW_FOWMAT_B4_C8_A16    (6 << 2)
#define  GEN7_OACONTWOW_FOWMAT_C4_B8	    (7 << 2)
#define  GEN7_OACONTWOW_FOWMAT_SHIFT	    2
#define  GEN7_OACONTWOW_PEW_CTX_ENABWE	    (1 << 1)
#define  GEN7_OACONTWOW_ENABWE		    (1 << 0)

#define GEN8_OACTXID _MMIO(0x2364)

#define GEN8_OA_DEBUG _MMIO(0x2B04)
#define  GEN9_OA_DEBUG_DISABWE_CWK_WATIO_WEPOWTS    (1 << 5)
#define  GEN9_OA_DEBUG_INCWUDE_CWK_WATIO	    (1 << 6)
#define  GEN9_OA_DEBUG_DISABWE_GO_1_0_WEPOWTS	    (1 << 2)
#define  GEN9_OA_DEBUG_DISABWE_CTX_SWITCH_WEPOWTS   (1 << 1)

#define GEN8_OACONTWOW _MMIO(0x2B00)
#define  GEN8_OA_WEPOWT_FOWMAT_A12	    (0 << 2)
#define  GEN8_OA_WEPOWT_FOWMAT_A12_B8_C8    (2 << 2)
#define  GEN8_OA_WEPOWT_FOWMAT_A36_B8_C8    (5 << 2)
#define  GEN8_OA_WEPOWT_FOWMAT_C4_B8	    (7 << 2)
#define  GEN8_OA_WEPOWT_FOWMAT_SHIFT	    2
#define  GEN8_OA_SPECIFIC_CONTEXT_ENABWE    (1 << 1)
#define  GEN8_OA_COUNTEW_ENABWE             (1 << 0)

#define GEN8_OACTXCONTWOW _MMIO(0x2360)
#define  GEN8_OA_TIMEW_PEWIOD_MASK	    0x3F
#define  GEN8_OA_TIMEW_PEWIOD_SHIFT	    2
#define  GEN8_OA_TIMEW_ENABWE		    (1 << 1)
#define  GEN8_OA_COUNTEW_WESUME		    (1 << 0)

#define GEN7_OABUFFEW _MMIO(0x23B0) /* W/W */
#define  GEN7_OABUFFEW_OVEWWUN_DISABWE	    (1 << 3)
#define  GEN7_OABUFFEW_EDGE_TWIGGEW	    (1 << 2)
#define  GEN7_OABUFFEW_STOP_WESUME_ENABWE   (1 << 1)
#define  GEN7_OABUFFEW_WESUME		    (1 << 0)

#define GEN8_OABUFFEW_UDW _MMIO(0x23b4)
#define GEN8_OABUFFEW _MMIO(0x2b14)
#define  GEN8_OABUFFEW_MEM_SEWECT_GGTT      (1 << 0)  /* 0: PPGTT, 1: GGTT */

#define GEN7_OASTATUS1 _MMIO(0x2364)
#define  GEN7_OASTATUS1_TAIW_MASK	    0xffffffc0
#define  GEN7_OASTATUS1_COUNTEW_OVEWFWOW    (1 << 2)
#define  GEN7_OASTATUS1_OABUFFEW_OVEWFWOW   (1 << 1)
#define  GEN7_OASTATUS1_WEPOWT_WOST	    (1 << 0)

#define GEN7_OASTATUS2 _MMIO(0x2368)
#define  GEN7_OASTATUS2_HEAD_MASK           0xffffffc0
#define  GEN7_OASTATUS2_MEM_SEWECT_GGTT     (1 << 0) /* 0: PPGTT, 1: GGTT */

#define GEN8_OASTATUS _MMIO(0x2b08)
#define  GEN8_OASTATUS_TAIW_POINTEW_WWAP    (1 << 17)
#define  GEN8_OASTATUS_HEAD_POINTEW_WWAP    (1 << 16)
#define  GEN8_OASTATUS_OVEWWUN_STATUS	    (1 << 3)
#define  GEN8_OASTATUS_COUNTEW_OVEWFWOW     (1 << 2)
#define  GEN8_OASTATUS_OABUFFEW_OVEWFWOW    (1 << 1)
#define  GEN8_OASTATUS_WEPOWT_WOST	    (1 << 0)

#define GEN8_OAHEADPTW _MMIO(0x2B0C)
#define GEN8_OAHEADPTW_MASK    0xffffffc0
#define GEN8_OATAIWPTW _MMIO(0x2B10)
#define GEN8_OATAIWPTW_MASK    0xffffffc0

#define OABUFFEW_SIZE_128K  (0 << 3)
#define OABUFFEW_SIZE_256K  (1 << 3)
#define OABUFFEW_SIZE_512K  (2 << 3)
#define OABUFFEW_SIZE_1M    (3 << 3)
#define OABUFFEW_SIZE_2M    (4 << 3)
#define OABUFFEW_SIZE_4M    (5 << 3)
#define OABUFFEW_SIZE_8M    (6 << 3)
#define OABUFFEW_SIZE_16M   (7 << 3)

#define GEN12_OA_TWB_INV_CW _MMIO(0xceec)

/* Gen12 OAW unit */
#define GEN12_OAW_OACONTWOW _MMIO(0x2960)
#define  GEN12_OAW_OACONTWOW_COUNTEW_FOWMAT_SHIFT 1
#define  GEN12_OAW_OACONTWOW_COUNTEW_ENABWE       (1 << 0)

#define GEN12_OACTXCONTWOW(base) _MMIO((base) + 0x360)
#define GEN12_OAW_OASTATUS _MMIO(0x2968)

/* Gen12 OAG unit */
#define GEN12_OAG_OAHEADPTW _MMIO(0xdb00)
#define  GEN12_OAG_OAHEADPTW_MASK 0xffffffc0
#define GEN12_OAG_OATAIWPTW _MMIO(0xdb04)
#define  GEN12_OAG_OATAIWPTW_MASK 0xffffffc0

#define GEN12_OAG_OABUFFEW  _MMIO(0xdb08)
#define  GEN12_OAG_OABUFFEW_BUFFEW_SIZE_MASK  (0x7)
#define  GEN12_OAG_OABUFFEW_BUFFEW_SIZE_SHIFT (3)
#define  GEN12_OAG_OABUFFEW_MEMOWY_SEWECT     (1 << 0) /* 0: PPGTT, 1: GGTT */

#define GEN12_OAG_OAGWBCTXCTWW _MMIO(0x2b28)
#define  GEN12_OAG_OAGWBCTXCTWW_TIMEW_PEWIOD_SHIFT 2
#define  GEN12_OAG_OAGWBCTXCTWW_TIMEW_ENABWE       (1 << 1)
#define  GEN12_OAG_OAGWBCTXCTWW_COUNTEW_WESUME     (1 << 0)

#define GEN12_OAG_OACONTWOW _MMIO(0xdaf4)
#define  GEN12_OAG_OACONTWOW_OA_COUNTEW_FOWMAT_SHIFT 2
#define  GEN12_OAG_OACONTWOW_OA_COUNTEW_ENABWE       (1 << 0)

#define GEN12_OAG_OA_DEBUG _MMIO(0xdaf8)
#define  GEN12_OAG_OA_DEBUG_INCWUDE_CWK_WATIO          (1 << 6)
#define  GEN12_OAG_OA_DEBUG_DISABWE_CWK_WATIO_WEPOWTS  (1 << 5)
#define  GEN12_OAG_OA_DEBUG_DISABWE_GO_1_0_WEPOWTS     (1 << 2)
#define  GEN12_OAG_OA_DEBUG_DISABWE_CTX_SWITCH_WEPOWTS (1 << 1)

#define GEN12_OAG_OASTATUS _MMIO(0xdafc)
#define  GEN12_OAG_OASTATUS_COUNTEW_OVEWFWOW (1 << 2)
#define  GEN12_OAG_OASTATUS_BUFFEW_OVEWFWOW  (1 << 1)
#define  GEN12_OAG_OASTATUS_WEPOWT_WOST      (1 << 0)

#define GDT_CHICKEN_BITS    _MMIO(0x9840)
#define   GT_NOA_ENABWE	    0x00000080

/* Gen12 OAM unit */
#define GEN12_OAM_HEAD_POINTEW_OFFSET   (0x1a0)
#define  GEN12_OAM_HEAD_POINTEW_MASK    0xffffffc0

#define GEN12_OAM_TAIW_POINTEW_OFFSET   (0x1a4)
#define  GEN12_OAM_TAIW_POINTEW_MASK    0xffffffc0

#define GEN12_OAM_BUFFEW_OFFSET         (0x1a8)
#define  GEN12_OAM_BUFFEW_SIZE_MASK     (0x7)
#define  GEN12_OAM_BUFFEW_SIZE_SHIFT    (3)
#define  GEN12_OAM_BUFFEW_MEMOWY_SEWECT WEG_BIT(0) /* 0: PPGTT, 1: GGTT */

#define GEN12_OAM_CONTEXT_CONTWOW_OFFSET              (0x1bc)
#define  GEN12_OAM_CONTEXT_CONTWOW_TIMEW_PEWIOD_SHIFT 2
#define  GEN12_OAM_CONTEXT_CONTWOW_TIMEW_ENABWE       WEG_BIT(1)
#define  GEN12_OAM_CONTEXT_CONTWOW_COUNTEW_WESUME     WEG_BIT(0)

#define GEN12_OAM_CONTWOW_OFFSET                (0x194)
#define  GEN12_OAM_CONTWOW_COUNTEW_FOWMAT_SHIFT 1
#define  GEN12_OAM_CONTWOW_COUNTEW_ENABWE       WEG_BIT(0)

#define GEN12_OAM_DEBUG_OFFSET                      (0x198)
#define  GEN12_OAM_DEBUG_BUFFEW_SIZE_SEWECT         WEG_BIT(12)
#define  GEN12_OAM_DEBUG_INCWUDE_CWK_WATIO          WEG_BIT(6)
#define  GEN12_OAM_DEBUG_DISABWE_CWK_WATIO_WEPOWTS  WEG_BIT(5)
#define  GEN12_OAM_DEBUG_DISABWE_GO_1_0_WEPOWTS     WEG_BIT(2)
#define  GEN12_OAM_DEBUG_DISABWE_CTX_SWITCH_WEPOWTS WEG_BIT(1)

#define GEN12_OAM_STATUS_OFFSET            (0x19c)
#define  GEN12_OAM_STATUS_COUNTEW_OVEWFWOW WEG_BIT(2)
#define  GEN12_OAM_STATUS_BUFFEW_OVEWFWOW  WEG_BIT(1)
#define  GEN12_OAM_STATUS_WEPOWT_WOST      WEG_BIT(0)

#define GEN12_OAM_MMIO_TWG_OFFSET	(0x1d0)

#define GEN12_OAM_MMIO_TWG(base) \
	_MMIO((base) + GEN12_OAM_MMIO_TWG_OFFSET)

#define GEN12_OAM_HEAD_POINTEW(base) \
	_MMIO((base) + GEN12_OAM_HEAD_POINTEW_OFFSET)
#define GEN12_OAM_TAIW_POINTEW(base) \
	_MMIO((base) + GEN12_OAM_TAIW_POINTEW_OFFSET)
#define GEN12_OAM_BUFFEW(base) \
	_MMIO((base) + GEN12_OAM_BUFFEW_OFFSET)
#define GEN12_OAM_CONTEXT_CONTWOW(base) \
	_MMIO((base) + GEN12_OAM_CONTEXT_CONTWOW_OFFSET)
#define GEN12_OAM_CONTWOW(base) \
	_MMIO((base) + GEN12_OAM_CONTWOW_OFFSET)
#define GEN12_OAM_DEBUG(base) \
	_MMIO((base) + GEN12_OAM_DEBUG_OFFSET)
#define GEN12_OAM_STATUS(base) \
	_MMIO((base) + GEN12_OAM_STATUS_OFFSET)

#define GEN12_OAM_CEC0_0_OFFSET		(0x40)
#define GEN12_OAM_CEC7_1_OFFSET		(0x7c)
#define GEN12_OAM_CEC0_0(base) \
	_MMIO((base) + GEN12_OAM_CEC0_0_OFFSET)
#define GEN12_OAM_CEC7_1(base) \
	_MMIO((base) + GEN12_OAM_CEC7_1_OFFSET)

#define GEN12_OAM_STAWTTWIG1_OFFSET	(0x00)
#define GEN12_OAM_STAWTTWIG8_OFFSET	(0x1c)
#define GEN12_OAM_STAWTTWIG1(base) \
	_MMIO((base) + GEN12_OAM_STAWTTWIG1_OFFSET)
#define GEN12_OAM_STAWTTWIG8(base) \
	_MMIO((base) + GEN12_OAM_STAWTTWIG8_OFFSET)

#define GEN12_OAM_WEPOWTTWIG1_OFFSET	(0x20)
#define GEN12_OAM_WEPOWTTWIG8_OFFSET	(0x3c)
#define GEN12_OAM_WEPOWTTWIG1(base) \
	_MMIO((base) + GEN12_OAM_WEPOWTTWIG1_OFFSET)
#define GEN12_OAM_WEPOWTTWIG8(base) \
	_MMIO((base) + GEN12_OAM_WEPOWTTWIG8_OFFSET)

#define GEN12_OAM_PEWF_COUNTEW_B0_OFFSET	(0x84)
#define GEN12_OAM_PEWF_COUNTEW_B(base, idx) \
	_MMIO((base) + GEN12_OAM_PEWF_COUNTEW_B0_OFFSET + 4 * (idx))

#endif /* __INTEW_PEWF_OA_WEGS__ */
