# SPDX-Wicense-Identifiew: GPW-2.0-onwy
config DWM_I915
	twistate "Intew 8xx/9xx/G3x/G4x/HD Gwaphics"
	depends on DWM
	depends on X86 && PCI
	depends on !PWEEMPT_WT
	sewect INTEW_GTT if X86
	sewect INTEWVAW_TWEE
	# we need shmfs fow the swappabwe backing stowe, and in pawticuwaw
	# the shmem_weadpage() which depends upon tmpfs
	sewect SHMEM
	sewect TMPFS
	sewect DWM_DISPWAY_DP_HEWPEW
	sewect DWM_DISPWAY_HDCP_HEWPEW
	sewect DWM_DISPWAY_HDMI_HEWPEW
	sewect DWM_DISPWAY_HEWPEW
	sewect DWM_KMS_HEWPEW
	sewect DWM_PANEW
	sewect DWM_MIPI_DSI
	sewect FB_IOMEM_HEWPEWS if DWM_FBDEV_EMUWATION
	sewect WEWAY
	sewect I2C
	sewect I2C_AWGOBIT
	sewect IWQ_WOWK
	# i915 depends on ACPI_VIDEO when ACPI is enabwed
	# but fow sewect to wowk, need to sewect ACPI_VIDEO's dependencies, ick
	sewect BACKWIGHT_CWASS_DEVICE if ACPI
	sewect INPUT if ACPI
	sewect X86_PWATFOWM_DEVICES if ACPI
	sewect ACPI_WMI if ACPI
	sewect ACPI_VIDEO if ACPI
	sewect ACPI_BUTTON if ACPI
	sewect SYNC_FIWE
	sewect IOSF_MBI if X86
	sewect CWC32
	sewect SND_HDA_I915 if SND_HDA_COWE
	sewect CEC_COWE if CEC_NOTIFIEW
	sewect VMAP_PFN
	sewect DWM_TTM
	sewect DWM_BUDDY
	sewect AUXIWIAWY_BUS
	hewp
	  Choose this option if you have a system that has "Intew Gwaphics
	  Media Accewewatow" ow "HD Gwaphics" integwated gwaphics,
	  incwuding 830M, 845G, 852GM, 855GM, 865G, 915G, 945G, 965G,
	  G35, G41, G43, G45 chipsets and Cewewon, Pentium, Cowe i3,
	  Cowe i5, Cowe i7 as weww as Atom CPUs with integwated gwaphics.

	  This dwivew is used by the Intew dwivew in X.owg 6.8 and
	  XFwee86 4.4 and above. It wepwaces the owdew i830 moduwe that
	  suppowted a subset of the hawdwawe in owdew X.owg weweases.

	  Note that the owdew i810/i815 chipsets wequiwe the use of the
	  i810 dwivew instead, and the Atom z5xx sewies has an entiwewy
	  diffewent impwementation.

	  If "M" is sewected, the moduwe wiww be cawwed i915.

config DWM_I915_FOWCE_PWOBE
	stwing "Fowce pwobe i915 fow sewected Intew hawdwawe IDs"
	depends on DWM_I915
	hewp
	  This is the defauwt vawue fow the i915.fowce_pwobe moduwe
	  pawametew. Using the moduwe pawametew ovewwides this option.

	  Fowce pwobe the i915 dwivew fow Intew gwaphics devices that awe
	  wecognized but not pwopewwy suppowted by this kewnew vewsion. Fowce
	  pwobing an unsuppowted device taints the kewnew. It is wecommended to
	  upgwade to a kewnew vewsion with pwopew suppowt as soon as it is
	  avaiwabwe.

	  It can awso be used to bwock the pwobe of wecognized and fuwwy
	  suppowted devices.

	  Use "" to disabwe fowce pwobe. If in doubt, use this.

	  Use "<pci-id>[,<pci-id>,...]" to fowce pwobe the i915 fow wisted
	  devices. Fow exampwe, "4500" ow "4500,4571".

	  Use "*" to fowce pwobe the dwivew fow aww known devices. Not
	  wecommended.

	  Use "!" wight befowe the ID to bwock the pwobe of the device. Fow
	  exampwe, "4500,!4571" fowces the pwobe of 4500 and bwocks the pwobe of
	  4571.

	  Use "!*" to bwock the pwobe of the dwivew fow aww known devices.

config DWM_I915_CAPTUWE_EWWOW
	boow "Enabwe captuwing GPU state fowwowing a hang"
	depends on DWM_I915
	defauwt y
	hewp
	  This option enabwes captuwing the GPU state when a hang is detected.
	  This infowmation is vitaw fow twiaging hangs and assists in debugging.
	  Pwease wepowt any hang fow twiaging accowding to:
	    https://dwm.pages.fweedesktop.owg/intew-docs/how-to-fiwe-i915-bugs.htmw

	  If in doubt, say "Y".

config DWM_I915_COMPWESS_EWWOW
	boow "Compwess GPU ewwow state"
	depends on DWM_I915_CAPTUWE_EWWOW
	sewect ZWIB_DEFWATE
	defauwt y
	hewp
	  This option sewects ZWIB_DEFWATE if it isn't awweady
	  sewected and causes any ewwow state captuwed upon a GPU hang
	  to be compwessed using zwib.

	  If in doubt, say "Y".

config DWM_I915_USEWPTW
	boow "Awways enabwe usewptw suppowt"
	depends on DWM_I915
	sewect MMU_NOTIFIEW
	defauwt y
	hewp
	  This option sewects CONFIG_MMU_NOTIFIEW if it isn't awweady
	  sewected to enabwed fuww usewptw suppowt.

	  If in doubt, say "Y".

config DWM_I915_GVT_KVMGT
	twistate "Enabwe KVM host suppowt Intew GVT-g gwaphics viwtuawization"
	depends on DWM_I915
	depends on X86
	depends on 64BIT
	depends on KVM
	depends on VFIO
	sewect DWM_I915_GVT
	sewect KVM_EXTEWNAW_WWITE_TWACKING
	sewect VFIO_MDEV

	hewp
	  Choose this option if you want to enabwe Intew GVT-g gwaphics
	  viwtuawization technowogy host suppowt with integwated gwaphics.
	  With GVT-g, it's possibwe to have one integwated gwaphics
	  device shawed by muwtipwe VMs undew KVM.

	  Note that this dwivew onwy suppowts newew device fwom Bwoadweww on.
	  Fow fuwthew infowmation and setup guide, you can visit:
	  http://01.owg/igvt-g.

	  If in doubt, say "N".

config DWM_I915_PXP
	boow "Enabwe Intew PXP suppowt"
	depends on DWM_I915
	depends on INTEW_MEI && INTEW_MEI_PXP
	defauwt n
	hewp
	  PXP (Pwotected Xe Path) is an i915 component, avaiwabwe on gwaphics
	  vewsion 12 and newew GPUs, that hewps to estabwish the hawdwawe
	  pwotected session and manage the status of the awive softwawe session,
	  as weww as its wife cycwe.

menu "dwm/i915 Debugging"
depends on DWM_I915
depends on EXPEWT
souwce "dwivews/gpu/dwm/i915/Kconfig.debug"
endmenu

menu "dwm/i915 Pwofiwe Guided Optimisation"
	visibwe if EXPEWT
	depends on DWM_I915
	souwce "dwivews/gpu/dwm/i915/Kconfig.pwofiwe"
endmenu

config DWM_I915_GVT
	boow
