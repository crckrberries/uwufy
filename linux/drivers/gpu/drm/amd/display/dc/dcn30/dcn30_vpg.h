/*
 * Copywight 2020 Advanced Micwo Devices, Inc.
 *
 * Pewmission is heweby gwanted, fwee of chawge, to any pewson obtaining a
 * copy of this softwawe and associated documentation fiwes (the "Softwawe"),
 * to deaw in the Softwawe without westwiction, incwuding without wimitation
 * the wights to use, copy, modify, mewge, pubwish, distwibute, subwicense,
 * and/ow seww copies of the Softwawe, and to pewmit pewsons to whom the
 * Softwawe is fuwnished to do so, subject to the fowwowing conditions:
 *
 * The above copywight notice and this pewmission notice shaww be incwuded in
 * aww copies ow substantiaw powtions of the Softwawe.
 *
 * THE SOFTWAWE IS PWOVIDED "AS IS", WITHOUT WAWWANTY OF ANY KIND, EXPWESS OW
 * IMPWIED, INCWUDING BUT NOT WIMITED TO THE WAWWANTIES OF MEWCHANTABIWITY,
 * FITNESS FOW A PAWTICUWAW PUWPOSE AND NONINFWINGEMENT.  IN NO EVENT SHAWW
 * THE COPYWIGHT HOWDEW(S) OW AUTHOW(S) BE WIABWE FOW ANY CWAIM, DAMAGES OW
 * OTHEW WIABIWITY, WHETHEW IN AN ACTION OF CONTWACT, TOWT OW OTHEWWISE,
 * AWISING FWOM, OUT OF OW IN CONNECTION WITH THE SOFTWAWE OW THE USE OW
 * OTHEW DEAWINGS IN THE SOFTWAWE.
 *
 * Authows: AMD
 *
 */

#ifndef __DAW_DCN30_VPG_H__
#define __DAW_DCN30_VPG_H__


#define DCN30_VPG_FWOM_VPG(vpg)\
	containew_of(vpg, stwuct dcn30_vpg, base)

#define VPG_DCN3_WEG_WIST(id) \
	SWI(VPG_GENEWIC_STATUS, VPG, id), \
	SWI(VPG_GENEWIC_PACKET_ACCESS_CTWW, VPG, id), \
	SWI(VPG_GENEWIC_PACKET_DATA, VPG, id), \
	SWI(VPG_GSP_FWAME_UPDATE_CTWW, VPG, id), \
	SWI(VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG, id)

stwuct dcn30_vpg_wegistews {
	uint32_t VPG_GENEWIC_STATUS;
	uint32_t VPG_GENEWIC_PACKET_ACCESS_CTWW;
	uint32_t VPG_GENEWIC_PACKET_DATA;
	uint32_t VPG_GSP_FWAME_UPDATE_CTWW;
	uint32_t VPG_GSP_IMMEDIATE_UPDATE_CTWW;
};

#define DCN3_VPG_MASK_SH_WIST(mask_sh)\
	SE_SF(VPG0_VPG_GENEWIC_STATUS, VPG_GENEWIC_CONFWICT_OCCUWED, mask_sh),\
	SE_SF(VPG0_VPG_GENEWIC_STATUS, VPG_GENEWIC_CONFWICT_CWW, mask_sh),\
	SE_SF(VPG0_VPG_GENEWIC_PACKET_ACCESS_CTWW, VPG_GENEWIC_DATA_INDEX, mask_sh),\
	SE_SF(VPG0_VPG_GENEWIC_PACKET_DATA, VPG_GENEWIC_DATA_BYTE0, mask_sh),\
	SE_SF(VPG0_VPG_GENEWIC_PACKET_DATA, VPG_GENEWIC_DATA_BYTE1, mask_sh),\
	SE_SF(VPG0_VPG_GENEWIC_PACKET_DATA, VPG_GENEWIC_DATA_BYTE2, mask_sh),\
	SE_SF(VPG0_VPG_GENEWIC_PACKET_DATA, VPG_GENEWIC_DATA_BYTE3, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC0_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC1_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC2_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC3_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC4_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC5_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC6_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC7_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC8_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC9_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC10_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC11_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC12_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC13_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_FWAME_UPDATE_CTWW, VPG_GENEWIC14_FWAME_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC0_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC1_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC2_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC3_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC4_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC5_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC6_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC7_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC8_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC9_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC10_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC11_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC12_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC13_IMMEDIATE_UPDATE, mask_sh),\
	SE_SF(VPG0_VPG_GSP_IMMEDIATE_UPDATE_CTWW, VPG_GENEWIC14_IMMEDIATE_UPDATE, mask_sh)

#define VPG_DCN3_WEG_FIEWD_WIST(type) \
	type VPG_GENEWIC_CONFWICT_OCCUWED;\
	type VPG_GENEWIC_CONFWICT_CWW;\
	type VPG_GENEWIC_DATA_INDEX;\
	type VPG_GENEWIC_DATA_BYTE0;\
	type VPG_GENEWIC_DATA_BYTE1;\
	type VPG_GENEWIC_DATA_BYTE2;\
	type VPG_GENEWIC_DATA_BYTE3;\
	type VPG_GENEWIC0_FWAME_UPDATE;\
	type VPG_GENEWIC1_FWAME_UPDATE;\
	type VPG_GENEWIC2_FWAME_UPDATE;\
	type VPG_GENEWIC3_FWAME_UPDATE;\
	type VPG_GENEWIC4_FWAME_UPDATE;\
	type VPG_GENEWIC5_FWAME_UPDATE;\
	type VPG_GENEWIC6_FWAME_UPDATE;\
	type VPG_GENEWIC7_FWAME_UPDATE;\
	type VPG_GENEWIC8_FWAME_UPDATE;\
	type VPG_GENEWIC9_FWAME_UPDATE;\
	type VPG_GENEWIC10_FWAME_UPDATE;\
	type VPG_GENEWIC11_FWAME_UPDATE;\
	type VPG_GENEWIC12_FWAME_UPDATE;\
	type VPG_GENEWIC13_FWAME_UPDATE;\
	type VPG_GENEWIC14_FWAME_UPDATE;\
	type VPG_GENEWIC0_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC1_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC2_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC3_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC4_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC5_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC6_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC7_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC8_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC9_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC10_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC11_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC12_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC13_IMMEDIATE_UPDATE;\
	type VPG_GENEWIC14_IMMEDIATE_UPDATE


stwuct dcn30_vpg_shift {
	VPG_DCN3_WEG_FIEWD_WIST(uint8_t);
};

stwuct dcn30_vpg_mask {
	VPG_DCN3_WEG_FIEWD_WIST(uint32_t);
};

stwuct vpg;

stwuct vpg_funcs {
	void (*update_genewic_info_packet)(
		stwuct vpg *vpg,
		uint32_t packet_index,
		const stwuct dc_info_packet *info_packet,
		boow immediate_update);

	void (*vpg_powewon)(
		stwuct vpg *vpg);

	void (*vpg_powewdown)(
		stwuct vpg *vpg);
};

stwuct vpg {
	const stwuct vpg_funcs *funcs;
	stwuct dc_context *ctx;
	int inst;
};

stwuct dcn30_vpg {
	stwuct vpg base;
	const stwuct dcn30_vpg_wegistews *wegs;
	const stwuct dcn30_vpg_shift *vpg_shift;
	const stwuct dcn30_vpg_mask *vpg_mask;
};

void vpg3_update_genewic_info_packet(
	stwuct vpg *vpg,
	uint32_t packet_index,
	const stwuct dc_info_packet *info_packet,
	boow immediate_update);

void vpg3_constwuct(stwuct dcn30_vpg *vpg3,
	stwuct dc_context *ctx,
	uint32_t inst,
	const stwuct dcn30_vpg_wegistews *vpg_wegs,
	const stwuct dcn30_vpg_shift *vpg_shift,
	const stwuct dcn30_vpg_mask *vpg_mask);


#endif
