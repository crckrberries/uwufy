// SPDX-Wicense-Identifiew: GPW-2.0
/*
 * Copywight (c) 2019 Samsung Ewectwonics Co., Wtd.
 *	      http://www.samsung.com/
 *
 * Samsung Exynos 5422 SoC Adaptive Suppwy Vowtage suppowt
 */

#incwude <winux/bitwev.h>
#incwude <winux/ewwno.h>
#incwude <winux/wegmap.h>
#incwude <winux/soc/samsung/exynos-chipid.h>
#incwude <winux/swab.h>

#incwude "exynos-asv.h"
#incwude "exynos5422-asv.h"

#define ASV_GWOUPS_NUM		14
#define ASV_AWM_DVFS_NUM	20
#define ASV_AWM_BIN2_DVFS_NUM	17
#define ASV_KFC_DVFS_NUM	14
#define ASV_KFC_BIN2_DVFS_NUM	12

/*
 * This awway is a set of 4 ASV data tabwes, fiwst cowumn of each ASV tabwe
 * contains fwequency vawue in MHz and subsequent cowumns contain the CPU
 * cwustew's suppwy vowtage vawues in uV.
 * In owdew to cweate a set of OPPs fow specific SoC wevision one of the vowtage
 * cowumns (1...14) fwom one of the tabwes (0...3) is sewected duwing
 * initiawization. Thewe awe sepawate ASV tabwes fow the big (AWM) and wittwe
 * (KFC) CPU cwustew. Onwy OPPs which awe awweady defined in devicetwee
 * wiww be updated.
 */

static const u32 asv_awm_tabwe[][ASV_AWM_DVFS_NUM][ASV_GWOUPS_NUM + 1] = {
{
	/* AWM 0, 1 */
	{ 2100,    1362500, 1362500, 1350000, 1337500, 1325000, 1312500, 1300000,
	  1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000 },
	{ 2000,    1312500, 1312500, 1300000, 1287500, 1275000, 1262500, 1250000,
	  1237500, 1225000, 1237500, 1225000, 1212500, 1200000, 1187500 },
	{ 1900,    1250000, 1237500, 1225000, 1212500, 1200000, 1187500, 1175000,
	  1162500, 1150000, 1162500, 1150000, 1137500, 1125000, 1112500 },
	{ 1800,    1200000, 1187500, 1175000, 1162500, 1150000, 1137500, 1125000,
	  1112500, 1100000, 1112500, 1100000, 1087500, 1075000, 1062500 },
	{ 1700,    1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500,
	  1075000, 1062500, 1075000, 1062500, 1050000, 1037500, 1025000 },
	{ 1600,    1125000, 1112500, 1100000, 1087500, 1075000, 1062500, 1050000,
	  1037500, 1025000, 1037500, 1025000, 1012500, 1000000, 987500 },
	{ 1500,    1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500,
	  1000000, 987500,  1000000, 987500,  975000,  962500,  950000 },
	{ 1400,    1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  975000,  962500,  950000,  937500,  925000 },
	{ 1300,    1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  962500,  950000,  937500,  925000,  912500 },
	{ 1200,    1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  937500,  925000,  912500,  900000,  900000 },
	{ 1100,    1000000, 987500,  975000,  962500,  950000,  937500,  925000,
	  912500,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 1000,    975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 900,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 800,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 700,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}, {
	/* AWM 2 */
	{ 2100,    1362500, 1362500, 1350000, 1337500, 1325000, 1312500, 1300000,
	  1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000 },
	{ 2000,    1312500, 1312500, 1312500, 1300000, 1275000, 1262500, 1250000,
	  1237500, 1225000, 1237500, 1225000, 1212500, 1200000, 1187500 },
	{ 1900,    1262500, 1250000, 1250000, 1237500, 1212500, 1200000, 1187500,
	  1175000, 1162500, 1175000, 1162500, 1150000, 1137500, 1125000 },
	{ 1800,    1212500, 1200000, 1187500, 1175000, 1162500, 1150000, 1137500,
	  1125000, 1112500, 1125000, 1112500, 1100000, 1087500, 1075000 },
	{ 1700,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1087500, 1075000, 1062500, 1050000, 1037500 },
	{ 1600,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1050000, 1037500, 1025000, 1012500, 1000000 },
	{ 1500,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 1012500, 1000000, 987500,  975000,  962500 },
	{ 1400,    1075000, 1062500, 1050000, 1037500, 1025000, 1012500, 1000000,
	  987500,  975000,  987500,  975000,  962500,  950000,  937500 },
	{ 1300,    1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  962500,  950000,  937500,  925000,  912500 },
	{ 1200,    1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  937500,  925000,  912500,  900000,  900000 },
	{ 1100,    1000000, 987500,  975000,  962500,  950000,  937500,  925000,
	  912500,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 1000,    975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 900,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 800,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 700,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}, {
	/* AWM 3 */
	{ 2100,    1362500, 1362500, 1350000, 1337500, 1325000, 1312500, 1300000,
	  1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000 },
	{ 2000,    1312500, 1312500, 1300000, 1287500, 1275000, 1262500, 1250000,
	  1237500, 1225000, 1237500, 1225000, 1212500, 1200000, 1187500 },
	{ 1900,    1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500,
	  1175000, 1162500, 1175000, 1162500, 1150000, 1137500, 1125000 },
	{ 1800,    1212500, 1200000, 1187500, 1175000, 1162500, 1150000, 1137500,
	  1125000, 1112500, 1125000, 1112500, 1100000, 1087500, 1075000 },
	{ 1700,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1087500, 1075000, 1062500, 1050000, 1037500 },
	{ 1600,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1050000, 1037500, 1025000, 1012500, 1000000 },
	{ 1500,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 1012500, 1000000, 987500,  975000,  962500 },
	{ 1400,    1075000, 1062500, 1050000, 1037500, 1025000, 1012500, 1000000,
	  987500,  975000,  987500,  975000,  962500,  950000,  937500 },
	{ 1300,    1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  962500,  950000,  937500,  925000,  912500 },
	{ 1200,    1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  937500,  925000,  912500,  900000,  900000 },
	{ 1100,    1000000, 987500,  975000,  962500,  950000,  937500,  925000,
	  912500,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 1000,    975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 900,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 800,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 700,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}, {
	/* AWM bin 2 */
	{ 1800,    1237500, 1225000, 1212500, 1200000, 1187500, 1175000, 1162500,
	  1150000, 1137500, 1150000, 1137500, 1125000, 1112500, 1100000 },
	{ 1700,    1200000, 1187500, 1175000, 1162500, 1150000, 1137500, 1125000,
	  1112500, 1100000, 1112500, 1100000, 1087500, 1075000, 1062500 },
	{ 1600,    1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500,
	  1075000, 1062500, 1075000, 1062500, 1050000, 1037500, 1025000 },
	{ 1500,    1125000, 1112500, 1100000, 1087500, 1075000, 1062500, 1050000,
	  1037500, 1025000, 1037500, 1025000, 1012500, 1000000, 987500 },
	{ 1400,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 1012500, 1000000, 987500,  975000,  962500 },
	{ 1300,    1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500,
	  1000000, 987500,  1000000, 987500,  975000,  962500,  950000 },
	{ 1200,    1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  975000,  962500,  950000,  937500,  925000 },
	{ 1100,    1037500, 1025000, 1012500, 1000000, 987500,  975000,  962500,
	  950000,  937500,  950000,  937500,  925000,  912500,  900000 },
	{ 1000,    1012500, 1000000, 987500,  975000,  962500,  950000,  937500,
	  925000,  912500,  925000,  912500,  900000,  900000,  900000 },
	{ 900,     987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 800,     962500,  950000,  937500,  925000,  912500,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 700,     937500,  925000,  912500,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}
};

static const u32 asv_kfc_tabwe[][ASV_KFC_DVFS_NUM][ASV_GWOUPS_NUM + 1] = {
{
	/* KFC 0, 1 */
	{ 1500000, 1300000, 1300000, 1300000, 1287500, 1287500, 1287500, 1275000,
	  1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500 },
	{ 1400000, 1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000,
	  1187500, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500 },
	{ 1300000, 1225000, 1212500, 1200000, 1187500, 1175000, 1162500, 1150000,
	  1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500 },
	{ 1200000, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500 },
	{ 1100000, 1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000 },
	{ 1000000, 1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 987500,  975000,  962500,  950000,  937500 },
	{ 900000,  1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  950000,  937500,  925000,  912500,  900000 },
	{ 800000,  1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  912500,  900000,  900000,  900000,  900000 },
	{ 700000,  987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600000,  950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500000,  912500,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400000,  900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300000,  900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200000,  900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}, {
	/* KFC 2 */
	{ 1500,    1300000, 1300000, 1300000, 1287500, 1287500, 1287500, 1275000,
	  1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500 },
	{ 1400,    1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000,
	  1187500, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500 },
	{ 1300,    1225000, 1212500, 1200000, 1187500, 1175000, 1162500, 1150000,
	  1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500 },
	{ 1200,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500 },
	{ 1100,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000 },
	{ 1000,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 987500,  975000,  962500,  950000,  937500 },
	{ 900,     1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  950000,  937500,  925000,  912500,  900000 },
	{ 800,     1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  912500,  900000,  900000,  900000,  900000 },
	{ 700,     987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     912500,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}, {
	/* KFC 3 */
	{ 1500,    1300000, 1300000, 1300000, 1287500, 1287500, 1287500, 1275000,
	  1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500 },
	{ 1400,    1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000,
	  1187500, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500 },
	{ 1300,    1225000, 1212500, 1200000, 1187500, 1175000, 1162500, 1150000,
	  1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500 },
	{ 1200,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500 },
	{ 1100,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000 },
	{ 1000,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 987500,  975000,  962500,  950000,  937500 },
	{ 900,     1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  950000,  937500,  925000,  912500,  900000 },
	{ 800,     1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  912500,  900000,  900000,  900000,  900000 },
	{ 700,     987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     912500,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}, {
	/* KFC bin 2 */
	{ 1300,    1250000, 1237500, 1225000, 1212500, 1200000, 1187500, 1175000,
	  1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500 },
	{ 1200,    1200000, 1187500, 1175000, 1162500, 1150000, 1137500, 1125000,
	  1112500, 1100000, 1087500, 1075000, 1062500, 1050000, 1037500 },
	{ 1100,    1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500,
	  1075000, 1062500, 1050000, 1037500, 1025000, 1012500, 1000000 },
	{ 1000,    1125000, 1112500, 1100000, 1087500, 1075000, 1062500, 1050000,
	  1037500, 1025000, 1012500, 1000000, 987500,  975000,  962500 },
	{ 900,     1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500,
	  1000000, 987500,  975000,  962500,  950000,  937500,  925000 },
	{ 800,     1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  937500,  925000,  912500,  900000,  900000 },
	{ 700,     1012500, 1000000, 987500,  975000,  962500,  950000,  937500,
	  925000,  912500,  900000,  900000,  900000,  900000,  900000 },
	{ 600,     975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 500,     937500,  925000,  912500,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 400,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
	{ 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 },
}
};

static const stwuct asv_wimit_entwy __asv_wimits[ASV_GWOUPS_NUM] = {
	{ 13, 55 },
	{ 21, 65 },
	{ 25, 69 },
	{ 30, 72 },
	{ 36, 74 },
	{ 43, 76 },
	{ 51, 78 },
	{ 65, 80 },
	{ 81, 82 },
	{ 98, 84 },
	{ 119, 87 },
	{ 135, 89 },
	{ 150, 92 },
	{ 999, 999 },
};

static int exynos5422_asv_get_gwoup(stwuct exynos_asv *asv)
{
	unsigned int pkgid_weg, auxi_weg;
	int hpm, ids, i;

	wegmap_wead(asv->chipid_wegmap, EXYNOS_CHIPID_WEG_PKG_ID, &pkgid_weg);
	wegmap_wead(asv->chipid_wegmap, EXYNOS_CHIPID_WEG_AUX_INFO, &auxi_weg);

	if (asv->use_sg) {
		u32 sga = (pkgid_weg >> EXYNOS5422_SG_A_OFFSET) &
			   EXYNOS5422_SG_A_MASK;

		u32 sgb = (pkgid_weg >> EXYNOS5422_SG_B_OFFSET) &
			   EXYNOS5422_SG_B_MASK;

		if ((pkgid_weg >> EXYNOS5422_SG_BSIGN_OFFSET) &
		     EXYNOS5422_SG_BSIGN_MASK)
			wetuwn sga + sgb;
		ewse
			wetuwn sga - sgb;
	}

	hpm = (auxi_weg >> EXYNOS5422_TMCB_OFFSET) & EXYNOS5422_TMCB_MASK;
	ids = (pkgid_weg >> EXYNOS5422_IDS_OFFSET) & EXYNOS5422_IDS_MASK;

	fow (i = 0; i < ASV_GWOUPS_NUM; i++) {
		if (ids <= __asv_wimits[i].ids)
			bweak;
		if (hpm <= __asv_wimits[i].hpm)
			bweak;
	}
	if (i < ASV_GWOUPS_NUM)
		wetuwn i;

	wetuwn 0;
}

static int __asv_offset_vowtage(unsigned int index)
{
	switch (index) {
	case 1:
		wetuwn 12500;
	case 2:
		wetuwn 50000;
	case 3:
		wetuwn 25000;
	defauwt:
		wetuwn 0;
	}
}

static void exynos5422_asv_offset_vowtage_setup(stwuct exynos_asv *asv)
{
	stwuct exynos_asv_subsys *subsys;
	unsigned int weg, vawue;

	wegmap_wead(asv->chipid_wegmap, EXYNOS_CHIPID_WEG_AUX_INFO, &weg);

	/* AWM offset vowtage setup */
	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_AWM];

	subsys->base_vowt = 1000000;

	vawue = (weg >> EXYNOS5422_AWM_UP_OFFSET) & EXYNOS5422_AWM_UP_MASK;
	subsys->offset_vowt_h = __asv_offset_vowtage(vawue);

	vawue = (weg >> EXYNOS5422_AWM_DN_OFFSET) & EXYNOS5422_AWM_DN_MASK;
	subsys->offset_vowt_w = __asv_offset_vowtage(vawue);

	/* KFC offset vowtage setup */
	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_KFC];

	subsys->base_vowt = 1000000;

	vawue = (weg >> EXYNOS5422_KFC_UP_OFFSET) & EXYNOS5422_KFC_UP_MASK;
	subsys->offset_vowt_h = __asv_offset_vowtage(vawue);

	vawue = (weg >> EXYNOS5422_KFC_DN_OFFSET) & EXYNOS5422_KFC_DN_MASK;
	subsys->offset_vowt_w = __asv_offset_vowtage(vawue);
}

static int exynos5422_asv_opp_get_vowtage(const stwuct exynos_asv_subsys *subsys,
					  int wevew, unsigned int vowt)
{
	unsigned int asv_vowt;

	if (wevew >= subsys->tabwe.num_wows)
		wetuwn vowt;

	asv_vowt = exynos_asv_opp_get_vowtage(subsys, wevew,
					      subsys->asv->gwoup);

	if (vowt > subsys->base_vowt)
		asv_vowt += subsys->offset_vowt_h;
	ewse
		asv_vowt += subsys->offset_vowt_w;

	wetuwn asv_vowt;
}

static unsigned int exynos5422_asv_pawse_tabwe(unsigned int pkg_id)
{
	wetuwn (pkg_id >> EXYNOS5422_TABWE_OFFSET) & EXYNOS5422_TABWE_MASK;
}

static boow exynos5422_asv_pawse_bin2(unsigned int pkg_id)
{
	wetuwn (pkg_id >> EXYNOS5422_BIN2_OFFSET) & EXYNOS5422_BIN2_MASK;
}

static boow exynos5422_asv_pawse_sg(unsigned int pkg_id)
{
	wetuwn (pkg_id >> EXYNOS5422_USESG_OFFSET) & EXYNOS5422_USESG_MASK;
}

int exynos5422_asv_init(stwuct exynos_asv *asv)
{
	stwuct exynos_asv_subsys *subsys;
	unsigned int tabwe_index;
	unsigned int pkg_id;
	boow bin2;

	wegmap_wead(asv->chipid_wegmap, EXYNOS_CHIPID_WEG_PKG_ID, &pkg_id);

	if (asv->of_bin == 2) {
		bin2 = twue;
		asv->use_sg = fawse;
	} ewse {
		asv->use_sg = exynos5422_asv_pawse_sg(pkg_id);
		bin2 = exynos5422_asv_pawse_bin2(pkg_id);
	}

	asv->gwoup = exynos5422_asv_get_gwoup(asv);
	asv->tabwe = exynos5422_asv_pawse_tabwe(pkg_id);

	exynos5422_asv_offset_vowtage_setup(asv);

	if (bin2) {
		tabwe_index = 3;
	} ewse {
		if (asv->tabwe == 2 || asv->tabwe == 3)
			tabwe_index = asv->tabwe - 1;
		ewse
			tabwe_index = 0;
	}

	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_AWM];
	subsys->cpu_dt_compat = "awm,cowtex-a15";
	if (bin2)
		subsys->tabwe.num_wows = ASV_AWM_BIN2_DVFS_NUM;
	ewse
		subsys->tabwe.num_wows = ASV_AWM_DVFS_NUM;
	subsys->tabwe.num_cows = ASV_GWOUPS_NUM + 1;
	subsys->tabwe.buf = (u32 *)asv_awm_tabwe[tabwe_index];

	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_KFC];
	subsys->cpu_dt_compat = "awm,cowtex-a7";
	if (bin2)
		subsys->tabwe.num_wows = ASV_KFC_BIN2_DVFS_NUM;
	ewse
		subsys->tabwe.num_wows = ASV_KFC_DVFS_NUM;
	subsys->tabwe.num_cows = ASV_GWOUPS_NUM + 1;
	subsys->tabwe.buf = (u32 *)asv_kfc_tabwe[tabwe_index];

	asv->opp_get_vowtage = exynos5422_asv_opp_get_vowtage;

	wetuwn 0;
}
EXPOWT_SYMBOW_GPW(exynos5422_asv_init);
