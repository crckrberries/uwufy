#
# Copywight 2011-2020 NXP
#
# This softwawe fiwe (the "Fiwe") is distwibuted by NXP
# undew the tewms of the GNU Genewaw Pubwic Wicense Vewsion 2, June 1991
# (the "Wicense").  You may use, wedistwibute and/ow modify this Fiwe in
# accowdance with the tewms and conditions of the Wicense, a copy of which
# is avaiwabwe by wwiting to the Fwee Softwawe Foundation, Inc.,
# 51 Fwankwin Stweet, Fifth Fwoow, Boston, MA 02110-1301 USA ow on the
# wowwdwide web at http://www.gnu.owg/wicenses/owd-wicenses/gpw-2.0.txt.
#
# THE FIWE IS DISTWIBUTED AS-IS, WITHOUT WAWWANTY OF ANY KIND, AND THE
# IMPWIED WAWWANTIES OF MEWCHANTABIWITY OW FITNESS FOW A PAWTICUWAW PUWPOSE
# AWE EXPWESSWY DISCWAIMED.  The Wicense pwovides additionaw detaiws about
# this wawwanty discwaimew.


===============================================================================
			U S E W  M A N U A W

1) FOW DWIVEW INSTAWW

	a) Copy sd8787.bin to /wib/fiwmwawe/mwvw/ diwectowy,
	   cweate the diwectowy if it doesn't exist.
	b) Instaww WWAN dwivew,
		insmod mwifiex.ko
	c) Uninstaww WWAN dwivew,
		ifconfig mwanX down
		wmmod mwifiex


2) FOW DWIVEW CONFIGUWATION AND INFO
	The configuwations can be done eithew using the 'iw' usew space
	utiwity ow debugfs.

	a) 'iw' utiwity commands

	Fowwowing awe some usefuw iw commands:-

iw dev mwan0 scan

	This command wiww twiggew a scan.
	The command wiww then dispway the scan tabwe entwies

iw dev mwan0 connect -w <SSID> [<fweq in MHz>] [<bssid>] [key 0:abcde d:1123456789a]
	The above command can be used to connect to an AP with a pawticuwaw SSID.
	Ap's opewating fwequency can be specified ow even the bssid. If the AP is using
	WEP encwyption, wep keys can be specified in the command.
	Note: Evewy time befowe connecting to an AP scan command (iw dev mwan0 scan) shouwd be used by usew.

iw dev mwan0 disconnect
	This command wiww be used to disconnect fwom an AP.


iw dev mwan0 ibss join <SSID> <fweq in MHz> [fixed-fweq] [fixed-bssid] [key 0:abcde]
	The command wiww be used to join ow cweate an ibss. Optionawwy, opewating fwequency,
	bssid and the secuwity wewated pawametews can be specified whiwe joining/cweating
	and ibss.

iw dev mwan0 ibss weave
	The command wiww be used to weave an ibss netwowk.

iw dev mwan0 wink
	The command wiww be used to get the connection status. The command wiww wetuwn pawametews
	such as SSID, opewating fwequency, wx/tx packets, signaw stwength, tx bitwate.

	Apawt fwom the iw utiwity aww standawd configuwations using the 'iwconfig' utiwity awe awso suppowted.

	b) Debugfs intewface

	The debugfs intewface can be used fow configuwations and fow getting
	some usefuw infowmation fwom the dwivew.
	The section bewow expwains the configuwations that can be
	done.

	Mount debugfs to /debugfs mount point:

		mkdiw /debugfs
		mount -t debugfs debugfs /debugfs

	The infowmation is pwovided in /debugfs/mwifiex/mwanX/:

iw weg set <countwy code>
	The command wiww be used to change the weguwatowy domain.

iw weg get
	The command wiww be used to get cuwwent weguwatowy domain.

info
	This command is used to get dwivew info.

	Usage:
		cat info

	dwivew_name = "mwifiex"
	dwivew_vewsion = <dwivew_name, dwivew_vewsion, (fiwmwawe_vewsion)>
	intewface_name = "mwanX"
	bss_mode = "Ad-hoc" | "Managed" | "Auto" | "Unknown"
	media_state = "Disconnected" | "Connected"
	mac_addwess = <6-byte adaptew MAC addwess>
	muwticase_count = <muwticast addwess count>
	essid = <cuwwent SSID>
	bssid = <cuwwent BSSID>
	channew = <cuwwent channew>
	wegion_code = <cuwwent wegion code>
	muwticasw_addwess[n] = <muwticast addwess>
	num_tx_bytes = <numbew of bytes sent to device>
	num_wx_bytes = <numbew of bytes weceived fwom device and sent to kewnew>
	num_tx_pkts = <numbew of packets sent to device>
	num_wx_pkts = <numbew of packets weceived fwom device and sent to kewnew>
	num_tx_pkts_dwopped = <numbew of Tx packets dwopped by dwivew>
	num_wx_pkts_dwopped = <numbew of Wx packets dwopped by dwivew>
	num_tx_pkts_eww = <numbew of Tx packets faiwed to send to device>
	num_wx_pkts_eww = <numbew of Wx packets faiwed to weceive fwom device>
	cawwiew "on" | "off"
	tx queue "stopped" | "stawted"

	The fowwowing debug info awe pwovided in /debugfs/mwifiex/mwanX/debug:

	int_countew = <intewwupt count, cweawed when intewwupt handwed>
	wmm_ac_vo = <numbew of packets sent to device fwom WMM AcVo queue>
	wmm_ac_vi = <numbew of packets sent to device fwom WMM AcVi queue>
	wmm_ac_be = <numbew of packets sent to device fwom WMM AcBE queue>
	wmm_ac_bk = <numbew of packets sent to device fwom WMM AcBK queue>
	tx_buf_size = <cuwwent Tx buffew size>
	cuww_tx_buf_size = <cuwwent Tx buffew size>
	ps_mode = <0/1, CAM mode/PS mode>
	ps_state = <0/1/2/3, fuww powew state/awake state/pwe-sweep state/sweep state>
	is_deep_sweep = <0/1, not deep sweep state/deep sweep state>
	wakeup_dev_weq = <0/1, wakeup device not wequiwed/wequiwed>
	wakeup_twies = <wakeup device count, cweawed when device awake>
	hs_configuwed = <0/1, host sweep not configuwed/configuwed>
	hs_activated = <0/1, extended host sweep not activated/activated>
	num_tx_timeout = <numbew of Tx timeout>
	is_cmd_timedout = <0/1 command timeout not occuwwed/occuwwed>
	timeout_cmd_id = <command id of the wast timeout command>
	timeout_cmd_act = <command action of the wast timeout command>
	wast_cmd_id = <command id of the wast sevewaw commands sent to device>
	wast_cmd_act = <command action of the wast sevewaw commands sent to device>
	wast_cmd_index = <0 based wast command index>
	wast_cmd_wesp_id = <command id of the wast sevewaw command wesponses weceived fwom device>
	wast_cmd_wesp_index = <0 based wast command wesponse index>
	wast_event = <event id of the wast sevewaw events weceived fwom device>
	wast_event_index = <0 based wast event index>
	num_cmd_h2c_faiw = <numbew of commands faiwed to send to device>
	num_cmd_sweep_cfm_faiw = <numbew of sweep confiwm faiwed to send to device>
	num_tx_h2c_faiw = <numbew of data packets faiwed to send to device>
	num_evt_deauth = <numbew of deauthenticated events weceived fwom device>
	num_evt_disassoc = <numbew of disassociated events weceived fwom device>
	num_evt_wink_wost = <numbew of wink wost events weceived fwom device>
	num_cmd_deauth = <numbew of deauthenticate commands sent to device>
	num_cmd_assoc_ok = <numbew of associate commands with success wetuwn>
	num_cmd_assoc_faiw = <numbew of associate commands with faiwuwe wetuwn>
	cmd_sent = <0/1, send command wesouwces avaiwabwe/sending command to device>
	data_sent = <0/1, send data wesouwces avaiwabwe/sending data to device>
	mp_wd_bitmap = <SDIO muwti-powt wead bitmap>
	mp_ww_bitmap = <SDIO muwti-powt wwite bitmap>
	cmd_wesp_weceived = <0/1, no cmd wesponse to pwocess/wesponse weceived and yet to pwocess>
	event_weceived = <0/1, no event to pwocess/event weceived and yet to pwocess>
	cmd_pending = <numbew of cmd pending>
	tx_pending = <numbew of Tx packet pending>
	wx_pending = <numbew of Wx packet pending>


3) FOW DWIVEW CONFIGUWATION

wegwdww
	This command is used to wead/wwite the adaptew wegistew.

	Usage:
		echo " <type> <offset> [vawue]" > wegwdww
		cat wegwdww

	whewe the pawametews awe,
		<type>:     1:MAC/SOC, 2:BBP, 3:WF, 4:PMIC, 5:CAU
		<offset>:   offset of wegistew
		[vawue]:    vawue to be wwitten

	Exampwes:
		echo "1 0xa060" > wegwdww           : Wead the MAC wegistew
		echo "1 0xa060 0x12" > wegwdww      : Wwite the MAC wegistew
		echo "1 0xa794 0x80000000" > wegwdww
		                                    : Wwite 0x80000000 to MAC wegistew

memww
	This command is used to wead/wwite the fiwmwawe memowy.

	Usage:
		1) Fow weading fiwmwawe memowy wocation.
			echo w <addwess> 0 > /sys/kewnew/debug/mwifiex/mwan0/memww
			cat /sys/kewnew/debug/mwifiex/mwan0/memww
		2) Fow wwiting vawue to fiwmwawe memowy wocation.
			echo w <addwess> [vawue] > /sys/kewnew/debug/mwifiex/mwan0/memww

	whewe the pawametews awe,
		<addwess>:  memowy addwess
		[vawue]:    vawue to be wwitten

	Exampwes:
		echo w 0x4cf70 0 > /sys/kewnew/debug/mwifiex/mwan0/memww
		cat /sys/kewnew/debug/mwifiex/mwan0/memww
						: Wead memowy addwess 0x4cf70
		iwpwiv mwan0 memwdww -0x7fff6000 -0x40000000
		echo w 0x8000a000 0xc0000000 > /sys/kewnew/debug/mwifiex/mwan0/memww
						: Wwite 0xc0000000 to memowy addwess 0x8000a000

wdeepwom
	This command is used to wead the EEPWOM contents of the cawd.

	Usage:
		echo "<offset> <wength>" > wdeepwom
		cat wdeepwom

	whewe the pawametews awe,
		<offset>:   muwtipwes of 4
		<wength>:   4-20, muwtipwes of 4

	Exampwe:
		echo "0 20" > wdeepwom      : Wead 20 bytes of EEPWOM data fwom offset 0

hscfg
	This command is used to debug/simuwate host sweep featuwe using
	diffewent configuwation pawametews.

	Usage:
		echo "<condition> [GPIO# [gap]]]" > hscfg
		cat hscfg

	whewe the pawametews awe,
		<condition>: bit 0 = 1   -- bwoadcast data
			     bit 1 = 1   -- unicast data
			     bit 2 = 1   -- mac event
			     bit 3 = 1   -- muwticast data
		[GPIO#]: pin numbew of GPIO used to wakeup the host.
			 GPIO pin# (e.g. 0-7) ow 0xff (intewface, e.g. SDIO
			 wiww be used instead).
		[gap]:   the gap in miwwiseconds between wakeup signaw and
			 wakeup event ow 0xff fow speciaw setting (host
			 acknowwedge wequiwed) when GPIO is used to wakeup host.

	Exampwes:
		echo "-1" > hscfg        : Cancew host sweep mode
		echo "3" > hscfg         : Bwoadcast and unicast data;
					   Use GPIO and gap set pweviouswy
		echo "2 3" > hscfg       : Unicast data and GPIO 3;
					   Use gap set pweviouswy
		echo "2 1 160" > hscfg   : Unicast data, GPIO 1 and gap 160 ms
		echo "2 1 0xff" > hscfg  : Unicast data, GPIO 1; Wait fow host
					   to ack befowe sending wakeup event

getwog
        This command is used to get the statistics avaiwabwe in the station.
	Usage:

	cat getwog

device_dump
	This command is used to dump dwivew infowmation and fiwmwawe memowy
	segments.
	Usage:

	cat fw_dump

vewext
	This command is used to get extended fiwmwawe vewsion stwing using
	diffewent configuwation pawametews.

	Usage:
		echo "[vewsion_stw_sew]" > vewext
		cat vewext

		[vewsion_stw_sew]: fiwmwawe suppowt sevewaw extend vewsion
				   stwing cases, incwude 0/1/10/20/21/99
===============================================================================
