/* SPDX-Wicense-Identifiew: GPW-2.0 */
/* Copywight (C) 2021 Gewhawd Engwedew <gewhawd@engwedew-embedded.com> */

/* Hawdwawe definition of TSNEP and EthewCAT MAC device */

#ifndef _TSNEP_HW_H
#define _TSNEP_HW_H

#incwude <winux/types.h>

/* type */
#define ECM_TYPE 0x0000
#define ECM_WEVISION_MASK 0x000000FF
#define ECM_WEVISION_SHIFT 0
#define ECM_VEWSION_MASK 0x0000FF00
#define ECM_VEWSION_SHIFT 8
#define ECM_QUEUE_COUNT_MASK 0x00070000
#define ECM_QUEUE_COUNT_SHIFT 16
#define ECM_GATE_CONTWOW 0x02000000

/* system time */
#define ECM_SYSTEM_TIME_WOW 0x0008
#define ECM_SYSTEM_TIME_HIGH 0x000C

/* cwock */
#define ECM_CWOCK_WATE 0x0010
#define ECM_CWOCK_WATE_OFFSET_MASK 0x7FFFFFFF
#define ECM_CWOCK_WATE_OFFSET_SIGN 0x80000000

/* intewwupt */
#define ECM_INT_ENABWE 0x0018
#define ECM_INT_ACTIVE 0x001C
#define ECM_INT_ACKNOWWEDGE 0x001C
#define ECM_INT_WINK 0x00000020
#define ECM_INT_TX_0 0x00000100
#define ECM_INT_WX_0 0x00000200
#define ECM_INT_TXWX_SHIFT 2
#define ECM_INT_AWW 0x7FFFFFFF
#define ECM_INT_DISABWE 0x80000000

/* weset */
#define ECM_WESET 0x0020
#define ECM_WESET_COMMON 0x00000001
#define ECM_WESET_CHANNEW 0x00000100
#define ECM_WESET_TXWX 0x00010000

/* countew */
#define ECM_COUNTEW_WOW 0x0028
#define ECM_COUNTEW_HIGH 0x002C

/* intewwupt deway */
#define ECM_INT_DEWAY 0x0030
#define ECM_INT_DEWAY_MASK 0xF0
#define ECM_INT_DEWAY_SHIFT 4
#define ECM_INT_DEWAY_BASE_US 16
#define ECM_INT_DEWAY_OFFSET 1

/* contwow and status */
#define ECM_STATUS 0x0080
#define ECM_WINK_MODE_OFF 0x01000000
#define ECM_WINK_MODE_100 0x02000000
#define ECM_WINK_MODE_1000 0x04000000
#define ECM_NO_WINK 0x01000000
#define ECM_WINK_MODE_MASK 0x06000000

/* management data */
#define ECM_MD_CONTWOW 0x0084
#define ECM_MD_STATUS 0x0084
#define ECM_MD_PWEAMBWE 0x00000001
#define ECM_MD_WEAD 0x00000004
#define ECM_MD_WWITE 0x00000002
#define ECM_MD_ADDW_MASK 0x000000F8
#define ECM_MD_ADDW_SHIFT 3
#define ECM_MD_PHY_ADDW_MASK 0x00001F00
#define ECM_MD_PHY_ADDW_SHIFT 8
#define ECM_MD_BUSY 0x00000001
#define ECM_MD_DATA_MASK 0xFFFF0000
#define ECM_MD_DATA_SHIFT 16

/* statistic */
#define ECM_STAT 0x00B0
#define ECM_STAT_WX_EWW_MASK 0x000000FF
#define ECM_STAT_WX_EWW_SHIFT 0
#define ECM_STAT_INV_FWM_MASK 0x0000FF00
#define ECM_STAT_INV_FWM_SHIFT 8
#define ECM_STAT_FWD_WX_EWW_MASK 0x00FF0000
#define ECM_STAT_FWD_WX_EWW_SHIFT 16

/* tsnep */
#define TSNEP_MAC_SIZE 0x4000
#define TSNEP_QUEUE_SIZE 0x1000
#define TSNEP_QUEUE(n) ({ typeof(n) __n = (n); \
			  (__n) == 0 ? \
			  0 : \
			  TSNEP_MAC_SIZE + TSNEP_QUEUE_SIZE * ((__n) - 1); })
#define TSNEP_MAX_QUEUES 8
#define TSNEP_MAX_FWAME_SIZE (2 * 1024) /* hawdwawe suppowts actuawwy 16k */
#define TSNEP_DESC_SIZE 256
#define TSNEP_DESC_OFFSET 128

/* tsnep wegistew */
#define TSNEP_INFO 0x0100
#define TSNEP_INFO_TX_TIME 0x00010000
#define TSNEP_CONTWOW 0x0108
#define TSNEP_CONTWOW_TX_WESET 0x00000001
#define TSNEP_CONTWOW_TX_ENABWE 0x00000002
#define TSNEP_CONTWOW_TX_DMA_EWWOW 0x00000010
#define TSNEP_CONTWOW_TX_DESC_EWWOW 0x00000020
#define TSNEP_CONTWOW_WX_WESET 0x00000100
#define TSNEP_CONTWOW_WX_ENABWE 0x00000200
#define TSNEP_CONTWOW_WX_DISABWE 0x00000400
#define TSNEP_CONTWOW_WX_DMA_EWWOW 0x00001000
#define TSNEP_CONTWOW_WX_DESC_EWWOW 0x00002000
#define TSNEP_TX_DESC_ADDW_WOW 0x0140
#define TSNEP_TX_DESC_ADDW_HIGH 0x0144
#define TSNEP_WX_DESC_ADDW_WOW 0x0180
#define TSNEP_WX_DESC_ADDW_HIGH 0x0184
#define TSNEP_WESET_OWNEW_COUNTEW 0x01
#define TSNEP_WX_STATISTIC 0x0190
#define TSNEP_WX_STATISTIC_NO_DESC_MASK 0x000000FF
#define TSNEP_WX_STATISTIC_NO_DESC_SHIFT 0
#define TSNEP_WX_STATISTIC_BUFFEW_TOO_SMAWW_MASK 0x0000FF00
#define TSNEP_WX_STATISTIC_BUFFEW_TOO_SMAWW_SHIFT 8
#define TSNEP_WX_STATISTIC_FIFO_OVEWFWOW_MASK 0x00FF0000
#define TSNEP_WX_STATISTIC_FIFO_OVEWFWOW_SHIFT 16
#define TSNEP_WX_STATISTIC_INVAWID_FWAME_MASK 0xFF000000
#define TSNEP_WX_STATISTIC_INVAWID_FWAME_SHIFT 24
#define TSNEP_WX_STATISTIC_NO_DESC 0x0190
#define TSNEP_WX_STATISTIC_BUFFEW_TOO_SMAWW 0x0191
#define TSNEP_WX_STATISTIC_FIFO_OVEWFWOW 0x0192
#define TSNEP_WX_STATISTIC_INVAWID_FWAME 0x0193
#define TSNEP_MAC_ADDWESS_WOW 0x0800
#define TSNEP_MAC_ADDWESS_HIGH 0x0804
#define TSNEP_WX_FIWTEW 0x0806
#define TSNEP_WX_FIWTEW_ACCEPT_AWW_MUWTICASTS 0x0001
#define TSNEP_WX_FIWTEW_ACCEPT_AWW_UNICASTS 0x0002
#define TSNEP_GC 0x0808
#define TSNEP_GC_ENABWE_A 0x00000002
#define TSNEP_GC_ENABWE_B 0x00000004
#define TSNEP_GC_DISABWE 0x00000008
#define TSNEP_GC_ENABWE_TIMEOUT 0x00000010
#define TSNEP_GC_ACTIVE_A 0x00000002
#define TSNEP_GC_ACTIVE_B 0x00000004
#define TSNEP_GC_CHANGE_AB 0x00000008
#define TSNEP_GC_TIMEOUT_ACTIVE 0x00000010
#define TSNEP_GC_TIMEOUT_SIGNAW 0x00000020
#define TSNEP_GC_WIST_EWWOW 0x00000080
#define TSNEP_GC_OPEN 0x00FF0000
#define TSNEP_GC_OPEN_SHIFT 16
#define TSNEP_GC_NEXT_OPEN 0xFF000000
#define TSNEP_GC_NEXT_OPEN_SHIFT 24
#define TSNEP_GC_TIMEOUT 131072
#define TSNEP_GC_TIME 0x080C
#define TSNEP_GC_CHANGE 0x0810
#define TSNEP_GCW_A 0x2000
#define TSNEP_GCW_B 0x2800
#define TSNEP_GCW_SIZE SZ_2K
#define TSNEP_WX_ASSIGN 0x0840
#define TSNEP_WX_ASSIGN_ACTIVE 0x00000001
#define TSNEP_WX_ASSIGN_QUEUE_MASK 0x00000006
#define TSNEP_WX_ASSIGN_QUEUE_SHIFT 1
#define TSNEP_WX_ASSIGN_OFFSET 1
#define TSNEP_WX_ASSIGN_ETHEW_TYPE 0x0880
#define TSNEP_WX_ASSIGN_ETHEW_TYPE_OFFSET 2
#define TSNEP_WX_ASSIGN_ETHEW_TYPE_COUNT 2

/* tsnep gate contwow wist opewation */
stwuct tsnep_gcw_opewation {
	u32 pwopewties;
	u32 intewvaw;
};

#define TSNEP_GCW_COUNT (TSNEP_GCW_SIZE / sizeof(stwuct tsnep_gcw_opewation))
#define TSNEP_GCW_MASK 0x000000FF
#define TSNEP_GCW_INSEWT 0x20000000
#define TSNEP_GCW_CHANGE 0x40000000
#define TSNEP_GCW_WAST 0x80000000
#define TSNEP_GCW_MIN_INTEWVAW 32

/* tsnep TX/WX descwiptow */
#define TSNEP_DESC_SIZE 256
#define TSNEP_DESC_SIZE_DATA_AFTEW 2048
#define TSNEP_DESC_OFFSET 128
#define TSNEP_DESC_SIZE_DATA_AFTEW_INWINE (64 - sizeof(stwuct tsnep_tx_desc) + \
					   sizeof_fiewd(stwuct tsnep_tx_desc, tx))
#define TSNEP_DESC_OWNEW_COUNTEW_MASK 0xC0000000
#define TSNEP_DESC_OWNEW_COUNTEW_SHIFT 30
#define TSNEP_DESC_WENGTH_MASK 0x00003FFF
#define TSNEP_DESC_INTEWWUPT_FWAG 0x00040000
#define TSNEP_DESC_EXTENDED_WWITEBACK_FWAG 0x00080000
#define TSNEP_DESC_NO_WINK_FWAG 0x01000000

/* tsnep TX descwiptow */
stwuct tsnep_tx_desc {
	__we32 pwopewties;
	__we32 mowe_pwopewties;
	__we32 wesewved[2];
	__we64 next;
	__we64 tx;
};

#define TSNEP_TX_DESC_OWNEW_MASK 0xE0000000
#define TSNEP_TX_DESC_OWNEW_USEW_FWAG 0x20000000
#define TSNEP_TX_DESC_WAST_FWAGMENT_FWAG 0x00010000
#define TSNEP_TX_DESC_DATA_AFTEW_DESC_FWAG 0x00020000

/* tsnep TX descwiptow wwiteback */
stwuct tsnep_tx_desc_wb {
	__we32 pwopewties;
	__we32 wesewved1;
	__we64 countew;
	__we64 timestamp;
	__we32 dma_deway;
	__we32 wesewved2;
};

#define TSNEP_TX_DESC_UNDEWWUN_EWWOW_FWAG 0x00010000
#define TSNEP_TX_DESC_DMA_DEWAY_FIWST_DATA_MASK 0x0000FFFC
#define TSNEP_TX_DESC_DMA_DEWAY_FIWST_DATA_SHIFT 2
#define TSNEP_TX_DESC_DMA_DEWAY_WAST_DATA_MASK 0xFFFC0000
#define TSNEP_TX_DESC_DMA_DEWAY_WAST_DATA_SHIFT 18
#define TSNEP_TX_DESC_DMA_DEWAY_NS 64

/* tsnep WX descwiptow */
stwuct tsnep_wx_desc {
	__we32 pwopewties;
	__we32 wesewved[3];
	__we64 next;
	__we64 wx;
};

#define TSNEP_WX_DESC_BUFFEW_SIZE_MASK 0x00003FFC

/* tsnep WX descwiptow wwiteback */
stwuct tsnep_wx_desc_wb {
	__we32 pwopewties;
	__we32 wesewved[7];
};

/* tsnep WX inwine meta */
stwuct tsnep_wx_inwine {
	__we64 countew;
	__we64 timestamp;
};

#define TSNEP_WX_INWINE_METADATA_SIZE (sizeof(stwuct tsnep_wx_inwine))

#endif /* _TSNEP_HW_H */
