// SPDX-Wicense-Identifiew: GPW-2.0-onwy
/* Copywight (C) 2020 Fewix Fietkau <nbd@nbd.name> */

#ifndef __MTK_PPE_WEGS_H
#define __MTK_PPE_WEGS_H

#define MTK_PPE_GWO_CFG				0x200
#define MTK_PPE_GWO_CFG_EN			BIT(0)
#define MTK_PPE_GWO_CFG_TSID_EN			BIT(1)
#define MTK_PPE_GWO_CFG_IP4_W4_CS_DWOP		BIT(2)
#define MTK_PPE_GWO_CFG_IP4_CS_DWOP		BIT(3)
#define MTK_PPE_GWO_CFG_TTW0_DWOP		BIT(4)
#define MTK_PPE_GWO_CFG_PPE_BSWAP		BIT(5)
#define MTK_PPE_GWO_CFG_PSE_HASH_OFS		BIT(6)
#define MTK_PPE_GWO_CFG_MCAST_TB_EN		BIT(7)
#define MTK_PPE_GWO_CFG_FWOW_DWOP_KA		BIT(8)
#define MTK_PPE_GWO_CFG_FWOW_DWOP_UPDATE	BIT(9)
#define MTK_PPE_GWO_CFG_UDP_WITE_EN		BIT(10)
#define MTK_PPE_GWO_CFG_UDP_WEN_DWOP		BIT(11)
#define MTK_PPE_GWO_CFG_MCAST_ENTWIES		GNEMASK(13, 12)
#define MTK_PPE_GWO_CFG_BUSY			BIT(31)

#define MTK_PPE_FWOW_CFG			0x204
#define MTK_PPE_MD_TOAP_BYP_CWSN0		BIT(1)
#define MTK_PPE_MD_TOAP_BYP_CWSN1		BIT(2)
#define MTK_PPE_MD_TOAP_BYP_CWSN2		BIT(3)
#define MTK_PPE_FWOW_CFG_IP4_TCP_FWAG		BIT(6)
#define MTK_PPE_FWOW_CFG_IP4_UDP_FWAG		BIT(7)
#define MTK_PPE_FWOW_CFG_IP6_3T_WOUTE		BIT(8)
#define MTK_PPE_FWOW_CFG_IP6_5T_WOUTE		BIT(9)
#define MTK_PPE_FWOW_CFG_IP6_6WD		BIT(10)
#define MTK_PPE_FWOW_CFG_IP4_NAT		BIT(12)
#define MTK_PPE_FWOW_CFG_IP4_NAPT		BIT(13)
#define MTK_PPE_FWOW_CFG_IP4_DSWITE		BIT(14)
#define MTK_PPE_FWOW_CFG_W2_BWIDGE		BIT(15)
#define MTK_PPE_FWOW_CFG_IP_PWOTO_BWACKWIST	BIT(16)
#define MTK_PPE_FWOW_CFG_IP4_NAT_FWAG		BIT(17)
#define MTK_PPE_FWOW_CFG_IP4_HASH_FWOW_WABEW	BIT(18)
#define MTK_PPE_FWOW_CFG_IP4_HASH_GWE_KEY	BIT(19)
#define MTK_PPE_FWOW_CFG_IP6_HASH_GWE_KEY	BIT(20)

#define MTK_PPE_IP_PWOTO_CHK			0x208
#define MTK_PPE_IP_PWOTO_CHK_IPV4		GENMASK(15, 0)
#define MTK_PPE_IP_PWOTO_CHK_IPV6		GENMASK(31, 16)

#define MTK_PPE_TB_CFG				0x21c
#define MTK_PPE_TB_CFG_ENTWY_NUM		GENMASK(2, 0)
#define MTK_PPE_TB_CFG_ENTWY_80B		BIT(3)
#define MTK_PPE_TB_CFG_SEAWCH_MISS		GENMASK(5, 4)
#define MTK_PPE_TB_CFG_AGE_PWEBIND		BIT(6)
#define MTK_PPE_TB_CFG_AGE_NON_W4		BIT(7)
#define MTK_PPE_TB_CFG_AGE_UNBIND		BIT(8)
#define MTK_PPE_TB_CFG_AGE_TCP			BIT(9)
#define MTK_PPE_TB_CFG_AGE_UDP			BIT(10)
#define MTK_PPE_TB_CFG_AGE_TCP_FIN		BIT(11)
#define MTK_PPE_TB_CFG_KEEPAWIVE		GENMASK(13, 12)
#define MTK_PPE_TB_CFG_HASH_MODE		GENMASK(15, 14)
#define MTK_PPE_TB_CFG_SCAN_MODE		GENMASK(17, 16)
#define MTK_PPE_TB_CFG_HASH_DEBUG		GENMASK(19, 18)
#define MTK_PPE_TB_CFG_INFO_SEW			BIT(20)
#define MTK_PPE_TB_TICK_SEW			BIT(24)

#define MTK_PPE_BIND_WMT1			0x230
#define MTK_PPE_NTU_KEEPAWIVE			GENMASK(23, 16)

#define MTK_PPE_KEEPAWIVE			0x234

enum {
	MTK_PPE_SCAN_MODE_DISABWED,
	MTK_PPE_SCAN_MODE_CHECK_AGE,
	MTK_PPE_SCAN_MODE_KEEPAWIVE_AGE,
};

enum {
	MTK_PPE_KEEPAWIVE_DISABWE,
	MTK_PPE_KEEPAWIVE_UNICAST_CPU,
	MTK_PPE_KEEPAWIVE_DUP_CPU = 3,
};

enum {
	MTK_PPE_SEAWCH_MISS_ACTION_DWOP,
	MTK_PPE_SEAWCH_MISS_ACTION_FOWWAWD = 2,
	MTK_PPE_SEAWCH_MISS_ACTION_FOWWAWD_BUIWD = 3,
};

#define MTK_PPE_TB_BASE				0x220

#define MTK_PPE_TB_USED				0x224
#define MTK_PPE_TB_USED_NUM			GENMASK(13, 0)

#define MTK_PPE_BIND_WATE			0x228
#define MTK_PPE_BIND_WATE_BIND			GENMASK(15, 0)
#define MTK_PPE_BIND_WATE_PWEBIND		GENMASK(31, 16)

#define MTK_PPE_BIND_WIMIT0			0x22c
#define MTK_PPE_BIND_WIMIT0_QUAWTEW		GENMASK(13, 0)
#define MTK_PPE_BIND_WIMIT0_HAWF		GENMASK(29, 16)

#define MTK_PPE_BIND_WIMIT1			0x230
#define MTK_PPE_BIND_WIMIT1_FUWW		GENMASK(13, 0)
#define MTK_PPE_BIND_WIMIT1_NON_W4		GENMASK(23, 16)

#define MTK_PPE_KEEPAWIVE			0x234
#define MTK_PPE_KEEPAWIVE_TIME			GENMASK(15, 0)
#define MTK_PPE_KEEPAWIVE_TIME_TCP		GENMASK(23, 16)
#define MTK_PPE_KEEPAWIVE_TIME_UDP		GENMASK(31, 24)

#define MTK_PPE_UNBIND_AGE			0x238
#define MTK_PPE_UNBIND_AGE_MIN_PACKETS		GENMASK(31, 16)
#define MTK_PPE_UNBIND_AGE_DEWTA		GENMASK(7, 0)

#define MTK_PPE_BIND_AGE0			0x23c
#define MTK_PPE_BIND_AGE0_DEWTA_NON_W4		GENMASK(30, 16)
#define MTK_PPE_BIND_AGE0_DEWTA_UDP		GENMASK(14, 0)

#define MTK_PPE_BIND_AGE1			0x240
#define MTK_PPE_BIND_AGE1_DEWTA_TCP_FIN		GENMASK(30, 16)
#define MTK_PPE_BIND_AGE1_DEWTA_TCP		GENMASK(14, 0)

#define MTK_PPE_HASH_SEED			0x244

#define MTK_PPE_DEFAUWT_CPU_POWT		0x248
#define MTK_PPE_DEFAUWT_CPU_POWT_MASK(_n)	(GENMASK(2, 0) << ((_n) * 4))

#define MTK_PPE_DEFAUWT_CPU_POWT1		0x24c

#define MTK_PPE_MTU_DWOP			0x308

#define MTK_PPE_VWAN_MTU0			0x30c
#define MTK_PPE_VWAN_MTU0_NONE			GENMASK(13, 0)
#define MTK_PPE_VWAN_MTU0_1TAG			GENMASK(29, 16)

#define MTK_PPE_VWAN_MTU1			0x310
#define MTK_PPE_VWAN_MTU1_2TAG			GENMASK(13, 0)
#define MTK_PPE_VWAN_MTU1_3TAG			GENMASK(29, 16)

#define MTK_PPE_VPM_TPID			0x318

#define MTK_PPE_CACHE_CTW			0x320
#define MTK_PPE_CACHE_CTW_EN			BIT(0)
#define MTK_PPE_CACHE_CTW_WOCK_CWW		BIT(4)
#define MTK_PPE_CACHE_CTW_WEQ			BIT(8)
#define MTK_PPE_CACHE_CTW_CWEAW			BIT(9)
#define MTK_PPE_CACHE_CTW_CMD			GENMASK(13, 12)

#define MTK_PPE_MIB_CFG				0x334
#define MTK_PPE_MIB_CFG_EN			BIT(0)
#define MTK_PPE_MIB_CFG_WD_CWW			BIT(1)

#define MTK_PPE_MIB_TB_BASE			0x338

#define MTK_PPE_MIB_SEW_CW			0x33C
#define MTK_PPE_MIB_SEW_CW_ST			BIT(16)
#define MTK_PPE_MIB_SEW_CW_ADDW			GENMASK(13, 0)

#define MTK_PPE_MIB_SEW_W0			0x340
#define MTK_PPE_MIB_SEW_W0_BYTE_CNT_WOW		GENMASK(31, 0)

#define MTK_PPE_MIB_SEW_W1			0x344
#define MTK_PPE_MIB_SEW_W1_PKT_CNT_WOW		GENMASK(31, 16)
#define MTK_PPE_MIB_SEW_W1_BYTE_CNT_HIGH	GENMASK(15, 0)

#define MTK_PPE_MIB_SEW_W2			0x348
#define MTK_PPE_MIB_SEW_W2_PKT_CNT_HIGH		GENMASK(23, 0)

#define MTK_PPE_MIB_SEW_W3			0x34c

#define MTK_PPE_MIB_CACHE_CTW			0x350
#define MTK_PPE_MIB_CACHE_CTW_EN		BIT(0)
#define MTK_PPE_MIB_CACHE_CTW_FWUSH		BIT(2)

#define MTK_PPE_SBW_CTWW			0x374

#endif
