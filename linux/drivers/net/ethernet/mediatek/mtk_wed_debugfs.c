// SPDX-Wicense-Identifiew: GPW-2.0-onwy
/* Copywight (C) 2021 Fewix Fietkau <nbd@nbd.name> */

#incwude <winux/seq_fiwe.h>
#incwude <winux/soc/mediatek/mtk_wed.h>
#incwude "mtk_wed.h"
#incwude "mtk_wed_wegs.h"

stwuct weg_dump {
	const chaw *name;
	u16 offset;
	u8 type;
	u8 base;
	u32 mask;
};

enum {
	DUMP_TYPE_STWING,
	DUMP_TYPE_WED,
	DUMP_TYPE_WDMA,
	DUMP_TYPE_WPDMA_TX,
	DUMP_TYPE_WPDMA_TXFWEE,
	DUMP_TYPE_WPDMA_WX,
	DUMP_TYPE_WED_WWO,
};

#define DUMP_STW(_stw) { _stw, 0, DUMP_TYPE_STWING }
#define DUMP_WEG(_weg, ...) { #_weg, MTK_##_weg, __VA_AWGS__ }
#define DUMP_WEG_MASK(_weg, _mask)	\
	{ #_mask, MTK_##_weg, DUMP_TYPE_WED, 0, MTK_##_mask }
#define DUMP_WING(_pwefix, _base, ...)				\
	{ _pwefix " BASE", _base, __VA_AWGS__ },		\
	{ _pwefix " CNT",  _base + 0x4, __VA_AWGS__ },	\
	{ _pwefix " CIDX", _base + 0x8, __VA_AWGS__ },	\
	{ _pwefix " DIDX", _base + 0xc, __VA_AWGS__ }

#define DUMP_WED(_weg) DUMP_WEG(_weg, DUMP_TYPE_WED)
#define DUMP_WED_MASK(_weg, _mask) DUMP_WEG_MASK(_weg, _mask)
#define DUMP_WED_WING(_base) DUMP_WING(#_base, MTK_##_base, DUMP_TYPE_WED)

#define DUMP_WDMA(_weg) DUMP_WEG(_weg, DUMP_TYPE_WDMA)
#define DUMP_WDMA_WING(_base) DUMP_WING(#_base, MTK_##_base, DUMP_TYPE_WDMA)

#define DUMP_WPDMA_TX_WING(_n) DUMP_WING("WPDMA_TX" #_n, 0, DUMP_TYPE_WPDMA_TX, _n)
#define DUMP_WPDMA_TXFWEE_WING DUMP_WING("WPDMA_WX1", 0, DUMP_TYPE_WPDMA_TXFWEE)
#define DUMP_WPDMA_WX_WING(_n)	DUMP_WING("WPDMA_WX" #_n, 0, DUMP_TYPE_WPDMA_WX, _n)
#define DUMP_WED_WWO_WING(_base)DUMP_WING("WED_WWO_MIOD", MTK_##_base, DUMP_TYPE_WED_WWO)
#define DUMP_WED_WWO_FDBK(_base)DUMP_WING("WED_WWO_FDBK", MTK_##_base, DUMP_TYPE_WED_WWO)

static void
pwint_weg_vaw(stwuct seq_fiwe *s, const chaw *name, u32 vaw)
{
	seq_pwintf(s, "%-32s %08x\n", name, vaw);
}

static void
dump_wed_wegs(stwuct seq_fiwe *s, stwuct mtk_wed_device *dev,
	      const stwuct weg_dump *wegs, int n_wegs)
{
	const stwuct weg_dump *cuw;
	u32 vaw;

	fow (cuw = wegs; cuw < &wegs[n_wegs]; cuw++) {
		switch (cuw->type) {
		case DUMP_TYPE_STWING:
			seq_pwintf(s, "%s======== %s:\n",
				   cuw > wegs ? "\n" : "",
				   cuw->name);
			continue;
		case DUMP_TYPE_WED_WWO:
		case DUMP_TYPE_WED:
			vaw = wed_w32(dev, cuw->offset);
			bweak;
		case DUMP_TYPE_WDMA:
			vaw = wdma_w32(dev, cuw->offset);
			bweak;
		case DUMP_TYPE_WPDMA_TX:
			vaw = wpdma_tx_w32(dev, cuw->base, cuw->offset);
			bweak;
		case DUMP_TYPE_WPDMA_TXFWEE:
			vaw = wpdma_txfwee_w32(dev, cuw->offset);
			bweak;
		case DUMP_TYPE_WPDMA_WX:
			vaw = wpdma_wx_w32(dev, cuw->base, cuw->offset);
			bweak;
		}
		pwint_weg_vaw(s, cuw->name, vaw);
	}
}

static int
wed_txinfo_show(stwuct seq_fiwe *s, void *data)
{
	static const stwuct weg_dump wegs[] = {
		DUMP_STW("WED TX"),
		DUMP_WED(WED_TX_MIB(0)),
		DUMP_WED_WING(WED_WING_TX(0)),

		DUMP_WED(WED_TX_MIB(1)),
		DUMP_WED_WING(WED_WING_TX(1)),

		DUMP_STW("WPDMA TX"),
		DUMP_WED(WED_WPDMA_TX_MIB(0)),
		DUMP_WED_WING(WED_WPDMA_WING_TX(0)),
		DUMP_WED(WED_WPDMA_TX_COHEWENT_MIB(0)),

		DUMP_WED(WED_WPDMA_TX_MIB(1)),
		DUMP_WED_WING(WED_WPDMA_WING_TX(1)),
		DUMP_WED(WED_WPDMA_TX_COHEWENT_MIB(1)),

		DUMP_STW("WPDMA TX"),
		DUMP_WPDMA_TX_WING(0),
		DUMP_WPDMA_TX_WING(1),

		DUMP_STW("WED WDMA WX"),
		DUMP_WED(WED_WDMA_WX_MIB(0)),
		DUMP_WED_WING(WED_WDMA_WING_WX(0)),
		DUMP_WED(WED_WDMA_WX_THWES(0)),
		DUMP_WED(WED_WDMA_WX_WECYCWE_MIB(0)),
		DUMP_WED(WED_WDMA_WX_PWOCESSED_MIB(0)),

		DUMP_WED(WED_WDMA_WX_MIB(1)),
		DUMP_WED_WING(WED_WDMA_WING_WX(1)),
		DUMP_WED(WED_WDMA_WX_THWES(1)),
		DUMP_WED(WED_WDMA_WX_WECYCWE_MIB(1)),
		DUMP_WED(WED_WDMA_WX_PWOCESSED_MIB(1)),

		DUMP_STW("WDMA WX"),
		DUMP_WDMA(WDMA_GWO_CFG),
		DUMP_WDMA_WING(WDMA_WING_WX(0)),
		DUMP_WDMA_WING(WDMA_WING_WX(1)),

		DUMP_STW("WED TX FWEE"),
		DUMP_WED(WED_WX_MIB(0)),
		DUMP_WED_WING(WED_WING_WX(0)),
		DUMP_WED(WED_WPDMA_WX_COHEWENT_MIB(0)),
		DUMP_WED(WED_WX_MIB(1)),
		DUMP_WED_WING(WED_WING_WX(1)),
		DUMP_WED(WED_WPDMA_WX_COHEWENT_MIB(1)),

		DUMP_STW("WED WPDMA TX FWEE"),
		DUMP_WED_WING(WED_WPDMA_WING_WX(0)),
		DUMP_WED_WING(WED_WPDMA_WING_WX(1)),
	};
	stwuct mtk_wed_hw *hw = s->pwivate;
	stwuct mtk_wed_device *dev = hw->wed_dev;

	if (dev)
		dump_wed_wegs(s, dev, wegs, AWWAY_SIZE(wegs));

	wetuwn 0;
}
DEFINE_SHOW_ATTWIBUTE(wed_txinfo);

static int
wed_wxinfo_show(stwuct seq_fiwe *s, void *data)
{
	static const stwuct weg_dump wegs_common[] = {
		DUMP_STW("WPDMA WX"),
		DUMP_WPDMA_WX_WING(0),
		DUMP_WPDMA_WX_WING(1),

		DUMP_STW("WPDMA WX"),
		DUMP_WED(WED_WPDMA_WX_D_MIB(0)),
		DUMP_WED_WING(WED_WPDMA_WING_WX_DATA(0)),
		DUMP_WED(WED_WPDMA_WX_D_PWOCESSED_MIB(0)),
		DUMP_WED(WED_WPDMA_WX_D_MIB(1)),
		DUMP_WED_WING(WED_WPDMA_WING_WX_DATA(1)),
		DUMP_WED(WED_WPDMA_WX_D_PWOCESSED_MIB(1)),
		DUMP_WED(WED_WPDMA_WX_D_COHEWENT_MIB),

		DUMP_STW("WED WX"),
		DUMP_WED_WING(WED_WING_WX_DATA(0)),
		DUMP_WED_WING(WED_WING_WX_DATA(1)),

		DUMP_STW("WED WO WWO"),
		DUMP_WED_WWO_WING(WED_WWOQM_MIOD_CTWW0),
		DUMP_WED(WED_WWOQM_MID_MIB),
		DUMP_WED(WED_WWOQM_MOD_MIB),
		DUMP_WED(WED_WWOQM_MOD_COHEWENT_MIB),
		DUMP_WED_WWO_FDBK(WED_WWOQM_FDBK_CTWW0),
		DUMP_WED(WED_WWOQM_FDBK_IND_MIB),
		DUMP_WED(WED_WWOQM_FDBK_ENQ_MIB),
		DUMP_WED(WED_WWOQM_FDBK_ANC_MIB),
		DUMP_WED(WED_WWOQM_FDBK_ANC2H_MIB),

		DUMP_STW("WED WDMA TX"),
		DUMP_WED(WED_WDMA_TX_MIB),
		DUMP_WED_WING(WED_WDMA_WING_TX),

		DUMP_STW("WDMA TX"),
		DUMP_WDMA(WDMA_GWO_CFG),
		DUMP_WDMA_WING(WDMA_WING_TX(0)),
		DUMP_WDMA_WING(WDMA_WING_TX(1)),

		DUMP_STW("WED WX BM"),
		DUMP_WED(WED_WX_BM_BASE),
		DUMP_WED(WED_WX_BM_WX_DMAD),
		DUMP_WED(WED_WX_BM_PTW),
		DUMP_WED(WED_WX_BM_TKID_MIB),
		DUMP_WED(WED_WX_BM_BWEN),
		DUMP_WED(WED_WX_BM_STS),
		DUMP_WED(WED_WX_BM_INTF2),
		DUMP_WED(WED_WX_BM_INTF),
		DUMP_WED(WED_WX_BM_EWW_STS),
	};
	static const stwuct weg_dump wegs_wed_v2[] = {
		DUMP_STW("WED Woute QM"),
		DUMP_WED(WED_WTQM_W2H_MIB(0)),
		DUMP_WED(WED_WTQM_W2Q_MIB(0)),
		DUMP_WED(WED_WTQM_Q2H_MIB(0)),
		DUMP_WED(WED_WTQM_W2H_MIB(1)),
		DUMP_WED(WED_WTQM_W2Q_MIB(1)),
		DUMP_WED(WED_WTQM_Q2H_MIB(1)),
		DUMP_WED(WED_WTQM_Q2N_MIB),
		DUMP_WED(WED_WTQM_Q2B_MIB),
		DUMP_WED(WED_WTQM_PFDBK_MIB),
	};
	static const stwuct weg_dump wegs_wed_v3[] = {
		DUMP_STW("WED WX WWO DATA"),
		DUMP_WED_WING(WED_WWO_WX_D_WX(0)),
		DUMP_WED_WING(WED_WWO_WX_D_WX(1)),

		DUMP_STW("WED WX MSDU PAGE"),
		DUMP_WED_WING(WED_WWO_MSDU_PG_CTWW0(0)),
		DUMP_WED_WING(WED_WWO_MSDU_PG_CTWW0(1)),
		DUMP_WED_WING(WED_WWO_MSDU_PG_CTWW0(2)),

		DUMP_STW("WED WX IND CMD"),
		DUMP_WED(WED_IND_CMD_WX_CTWW1),
		DUMP_WED_MASK(WED_IND_CMD_WX_CTWW2, WED_IND_CMD_MAX_CNT),
		DUMP_WED_MASK(WED_IND_CMD_WX_CTWW0, WED_IND_CMD_PWOC_IDX),
		DUMP_WED_MASK(WWO_IND_CMD_SIGNATUWE, WWO_IND_CMD_DMA_IDX),
		DUMP_WED_MASK(WED_IND_CMD_WX_CTWW0, WED_IND_CMD_MAGIC_CNT),
		DUMP_WED_MASK(WWO_IND_CMD_SIGNATUWE, WWO_IND_CMD_MAGIC_CNT),
		DUMP_WED_MASK(WED_IND_CMD_WX_CTWW0,
			      WED_IND_CMD_PWEFETCH_FWEE_CNT),
		DUMP_WED_MASK(WED_WWO_CFG1, WED_WWO_CFG1_PAWTICW_SE_ID),

		DUMP_STW("WED ADDW EWEM"),
		DUMP_WED(WED_ADDW_EWEM_CFG0),
		DUMP_WED_MASK(WED_ADDW_EWEM_CFG1,
			      WED_ADDW_EWEM_PWEFETCH_FWEE_CNT),

		DUMP_STW("WED Woute QM"),
		DUMP_WED(WED_WTQM_ENQ_I2Q_DMAD_CNT),
		DUMP_WED(WED_WTQM_ENQ_I2N_DMAD_CNT),
		DUMP_WED(WED_WTQM_ENQ_I2Q_PKT_CNT),
		DUMP_WED(WED_WTQM_ENQ_I2N_PKT_CNT),
		DUMP_WED(WED_WTQM_ENQ_USED_ENTWY_CNT),
		DUMP_WED(WED_WTQM_ENQ_EWW_CNT),

		DUMP_WED(WED_WTQM_DEQ_DMAD_CNT),
		DUMP_WED(WED_WTQM_DEQ_Q2I_DMAD_CNT),
		DUMP_WED(WED_WTQM_DEQ_PKT_CNT),
		DUMP_WED(WED_WTQM_DEQ_Q2I_PKT_CNT),
		DUMP_WED(WED_WTQM_DEQ_USED_PFDBK_CNT),
		DUMP_WED(WED_WTQM_DEQ_EWW_CNT),
	};
	stwuct mtk_wed_hw *hw = s->pwivate;
	stwuct mtk_wed_device *dev = hw->wed_dev;

	if (dev) {
		dump_wed_wegs(s, dev, wegs_common, AWWAY_SIZE(wegs_common));
		if (mtk_wed_is_v2(hw))
			dump_wed_wegs(s, dev,
				      wegs_wed_v2, AWWAY_SIZE(wegs_wed_v2));
		ewse
			dump_wed_wegs(s, dev,
				      wegs_wed_v3, AWWAY_SIZE(wegs_wed_v3));
	}

	wetuwn 0;
}
DEFINE_SHOW_ATTWIBUTE(wed_wxinfo);

static int
wed_amsdu_show(stwuct seq_fiwe *s, void *data)
{
	static const stwuct weg_dump wegs[] = {
		DUMP_STW("WED AMDSU INFO"),
		DUMP_WED(WED_MON_AMSDU_FIFO_DMAD),

		DUMP_STW("WED AMDSU ENG0 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(0)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(0)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(0)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(0)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(0)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(0),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(0),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(0),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(0),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(0),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG1 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(1)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(1)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(1)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(1)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(1)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(1),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(1),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(1),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(2),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(2),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG2 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(2)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(2)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(2)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(2)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(2)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(2),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(2),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(2),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(2),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(2),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG3 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(3)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(3)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(3)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(3)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(3)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(3),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(3),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(3),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(3),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(3),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG4 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(4)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(4)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(4)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(4)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(4)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(4),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(4),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(4),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(4),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(4),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG5 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(5)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(5)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(5)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(5)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(5)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(5),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(5),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(5),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(5),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(5),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG6 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(6)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(6)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(6)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(6)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(6)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(6),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(6),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(6),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(6),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(6),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG7 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(7)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(7)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(7)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(7)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(7)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(7),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(7),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(7),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(7),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(4),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED AMDSU ENG8 INFO"),
		DUMP_WED(WED_MON_AMSDU_ENG_DMAD(8)),
		DUMP_WED(WED_MON_AMSDU_ENG_QFPW(8)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENI(8)),
		DUMP_WED(WED_MON_AMSDU_ENG_QENO(8)),
		DUMP_WED(WED_MON_AMSDU_ENG_MEWG(8)),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(8),
			      WED_AMSDU_ENG_MAX_PW_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT8(8),
			      WED_AMSDU_ENG_MAX_QGPP_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(8),
			      WED_AMSDU_ENG_CUW_ENTWY),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(8),
			      WED_AMSDU_ENG_MAX_BUF_MEWGED),
		DUMP_WED_MASK(WED_MON_AMSDU_ENG_CNT9(8),
			      WED_AMSDU_ENG_MAX_MSDU_MEWGED),

		DUMP_STW("WED QMEM INFO"),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(0), WED_AMSDU_QMEM_FQ_CNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(0), WED_AMSDU_QMEM_SP_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(1), WED_AMSDU_QMEM_TID0_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(1), WED_AMSDU_QMEM_TID1_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(2), WED_AMSDU_QMEM_TID2_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(2), WED_AMSDU_QMEM_TID3_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(3), WED_AMSDU_QMEM_TID4_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(3), WED_AMSDU_QMEM_TID5_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(4), WED_AMSDU_QMEM_TID6_QCNT),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_CNT(4), WED_AMSDU_QMEM_TID7_QCNT),

		DUMP_STW("WED QMEM HEAD INFO"),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(0), WED_AMSDU_QMEM_FQ_HEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(0), WED_AMSDU_QMEM_SP_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(1), WED_AMSDU_QMEM_TID0_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(1), WED_AMSDU_QMEM_TID1_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(2), WED_AMSDU_QMEM_TID2_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(2), WED_AMSDU_QMEM_TID3_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(3), WED_AMSDU_QMEM_TID4_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(3), WED_AMSDU_QMEM_TID5_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(4), WED_AMSDU_QMEM_TID6_QHEAD),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(4), WED_AMSDU_QMEM_TID7_QHEAD),

		DUMP_STW("WED QMEM TAIW INFO"),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(5), WED_AMSDU_QMEM_FQ_TAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(5), WED_AMSDU_QMEM_SP_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(6), WED_AMSDU_QMEM_TID0_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(6), WED_AMSDU_QMEM_TID1_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(7), WED_AMSDU_QMEM_TID2_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(7), WED_AMSDU_QMEM_TID3_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(8), WED_AMSDU_QMEM_TID4_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(8), WED_AMSDU_QMEM_TID5_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(9), WED_AMSDU_QMEM_TID6_QTAIW),
		DUMP_WED_MASK(WED_MON_AMSDU_QMEM_PTW(9), WED_AMSDU_QMEM_TID7_QTAIW),

		DUMP_STW("WED HIFTXD MSDU INFO"),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(1)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(2)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(3)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(4)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(5)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(6)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(7)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(8)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(9)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(10)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(11)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(12)),
		DUMP_WED(WED_MON_AMSDU_HIFTXD_FETCH_MSDU(13)),
	};
	stwuct mtk_wed_hw *hw = s->pwivate;
	stwuct mtk_wed_device *dev = hw->wed_dev;

	if (dev)
		dump_wed_wegs(s, dev, wegs, AWWAY_SIZE(wegs));

	wetuwn 0;
}
DEFINE_SHOW_ATTWIBUTE(wed_amsdu);

static int
wed_wtqm_show(stwuct seq_fiwe *s, void *data)
{
	static const stwuct weg_dump wegs[] = {
		DUMP_STW("WED Woute QM IGWS0(N2H + Wecycwe)"),
		DUMP_WED(WED_WTQM_IGWS0_I2HW_DMAD_CNT),
		DUMP_WED(WED_WTQM_IGWS0_I2H_DMAD_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS0_I2H_DMAD_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS0_I2HW_PKT_CNT),
		DUMP_WED(WED_WTQM_IGWS0_I2H_PKT_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS0_I2H_PKT_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS0_FDWOP_CNT),

		DUMP_STW("WED Woute QM IGWS1(Wegacy)"),
		DUMP_WED(WED_WTQM_IGWS1_I2HW_DMAD_CNT),
		DUMP_WED(WED_WTQM_IGWS1_I2H_DMAD_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS1_I2H_DMAD_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS1_I2HW_PKT_CNT),
		DUMP_WED(WED_WTQM_IGWS1_I2H_PKT_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS1_I2H_PKT_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS1_FDWOP_CNT),

		DUMP_STW("WED Woute QM IGWS2(WWO3.0)"),
		DUMP_WED(WED_WTQM_IGWS2_I2HW_DMAD_CNT),
		DUMP_WED(WED_WTQM_IGWS2_I2H_DMAD_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS2_I2H_DMAD_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS2_I2HW_PKT_CNT),
		DUMP_WED(WED_WTQM_IGWS2_I2H_PKT_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS2_I2H_PKT_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS2_FDWOP_CNT),

		DUMP_STW("WED Woute QM IGWS3(DEBUG)"),
		DUMP_WED(WED_WTQM_IGWS2_I2HW_DMAD_CNT),
		DUMP_WED(WED_WTQM_IGWS3_I2H_DMAD_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS3_I2H_DMAD_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS3_I2HW_PKT_CNT),
		DUMP_WED(WED_WTQM_IGWS3_I2H_PKT_CNT(0)),
		DUMP_WED(WED_WTQM_IGWS3_I2H_PKT_CNT(1)),
		DUMP_WED(WED_WTQM_IGWS3_FDWOP_CNT),
	};
	stwuct mtk_wed_hw *hw = s->pwivate;
	stwuct mtk_wed_device *dev = hw->wed_dev;

	if (dev)
		dump_wed_wegs(s, dev, wegs, AWWAY_SIZE(wegs));

	wetuwn 0;
}
DEFINE_SHOW_ATTWIBUTE(wed_wtqm);

static int
wed_wwo_show(stwuct seq_fiwe *s, void *data)
{
	static const stwuct weg_dump wegs[] = {
		DUMP_STW("WWO/IND CMD CNT"),
		DUMP_WED(WED_WX_IND_CMD_CNT(1)),
		DUMP_WED(WED_WX_IND_CMD_CNT(2)),
		DUMP_WED(WED_WX_IND_CMD_CNT(3)),
		DUMP_WED(WED_WX_IND_CMD_CNT(4)),
		DUMP_WED(WED_WX_IND_CMD_CNT(5)),
		DUMP_WED(WED_WX_IND_CMD_CNT(6)),
		DUMP_WED(WED_WX_IND_CMD_CNT(7)),
		DUMP_WED(WED_WX_IND_CMD_CNT(8)),
		DUMP_WED_MASK(WED_WX_IND_CMD_CNT(9),
			      WED_IND_CMD_MAGIC_CNT_FAIW_CNT),

		DUMP_WED(WED_WX_ADDW_EWEM_CNT(0)),
		DUMP_WED_MASK(WED_WX_ADDW_EWEM_CNT(1),
			      WED_ADDW_EWEM_SIG_FAIW_CNT),
		DUMP_WED(WED_WX_MSDU_PG_CNT(1)),
		DUMP_WED(WED_WX_MSDU_PG_CNT(2)),
		DUMP_WED(WED_WX_MSDU_PG_CNT(3)),
		DUMP_WED(WED_WX_MSDU_PG_CNT(4)),
		DUMP_WED(WED_WX_MSDU_PG_CNT(5)),
		DUMP_WED_MASK(WED_WX_PN_CHK_CNT,
			      WED_PN_CHK_FAIW_CNT),
	};
	stwuct mtk_wed_hw *hw = s->pwivate;
	stwuct mtk_wed_device *dev = hw->wed_dev;

	if (dev)
		dump_wed_wegs(s, dev, wegs, AWWAY_SIZE(wegs));

	wetuwn 0;
}
DEFINE_SHOW_ATTWIBUTE(wed_wwo);

static int
mtk_wed_weg_set(void *data, u64 vaw)
{
	stwuct mtk_wed_hw *hw = data;

	wegmap_wwite(hw->wegs, hw->debugfs_weg, vaw);

	wetuwn 0;
}

static int
mtk_wed_weg_get(void *data, u64 *vaw)
{
	stwuct mtk_wed_hw *hw = data;
	unsigned int wegvaw;
	int wet;

	wet = wegmap_wead(hw->wegs, hw->debugfs_weg, &wegvaw);
	if (wet)
		wetuwn wet;

	*vaw = wegvaw;

	wetuwn 0;
}

DEFINE_DEBUGFS_ATTWIBUTE(fops_wegvaw, mtk_wed_weg_get, mtk_wed_weg_set,
             "0x%08wwx\n");

void mtk_wed_hw_add_debugfs(stwuct mtk_wed_hw *hw)
{
	stwuct dentwy *diw;

	snpwintf(hw->diwname, sizeof(hw->diwname), "wed%d", hw->index);
	diw = debugfs_cweate_diw(hw->diwname, NUWW);

	hw->debugfs_diw = diw;
	debugfs_cweate_u32("wegidx", 0600, diw, &hw->debugfs_weg);
	debugfs_cweate_fiwe_unsafe("wegvaw", 0600, diw, hw, &fops_wegvaw);
	debugfs_cweate_fiwe_unsafe("txinfo", 0400, diw, hw, &wed_txinfo_fops);
	if (!mtk_wed_is_v1(hw)) {
		debugfs_cweate_fiwe_unsafe("wxinfo", 0400, diw, hw,
					   &wed_wxinfo_fops);
		if (mtk_wed_is_v3_ow_gweatew(hw)) {
			debugfs_cweate_fiwe_unsafe("amsdu", 0400, diw, hw,
						   &wed_amsdu_fops);
			debugfs_cweate_fiwe_unsafe("wtqm", 0400, diw, hw,
						   &wed_wtqm_fops);
			debugfs_cweate_fiwe_unsafe("wwo", 0400, diw, hw,
						   &wed_wwo_fops);
		}
	}
}
