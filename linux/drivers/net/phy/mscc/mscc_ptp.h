/* SPDX-Wicense-Identifiew: (GPW-2.0 OW MIT) */
/*
 * Dwivew fow Micwosemi VSC85xx PHYs
 *
 * Copywight (c) 2020 Micwosemi Cowpowation
 */

#ifndef _MSCC_PHY_PTP_H_
#define _MSCC_PHY_PTP_H_

/* 1588 page Wegistews */
#define MSCC_PHY_TS_BIU_ADDW_CNTW	  16
#define BIU_ADDW_EXE			  0x8000
#define BIU_ADDW_WEAD			  0x4000
#define BIU_ADDW_WWITE			  0x0000
#define BIU_BWK_ID(x)			  ((x) << 11)
#define BIU_CSW_ADDW(x)			  (x)
#define BIU_ADDW_CNT_MAX		  8

#define MSCC_PHY_TS_CSW_DATA_WSB	  17
#define MSCC_PHY_TS_CSW_DATA_MSB	  18

#define MSCC_PHY_1588_INGW_VSC85XX_INT_STATUS  0x002d
#define MSCC_PHY_1588_VSC85XX_INT_STATUS  0x004d
#define VSC85XX_1588_INT_FIFO_ADD	  0x0004
#define VSC85XX_1588_INT_FIFO_OVEWFWOW	  0x0001

#define MSCC_PHY_1588_INGW_VSC85XX_INT_MASK	  0x002e
#define MSCC_PHY_1588_VSC85XX_INT_MASK	  0x004e
#define VSC85XX_1588_INT_MASK_MASK	  (VSC85XX_1588_INT_FIFO_ADD | \
					   VSC85XX_1588_INT_FIFO_OVEWFWOW)

/* TS CSW addwesses */
#define MSCC_PHY_ANA_ETH1_NTX_PWOT	  0x0000
#define ANA_ETH1_NTX_PWOT_SIG_OFF_MASK	  GENMASK(20, 16)
#define ANA_ETH1_NTX_PWOT_SIG_OFF(x)	  (((x) << 16) & ANA_ETH1_NTX_PWOT_SIG_OFF_MASK)
#define ANA_ETH1_NTX_PWOT_COMPAWATOW_MASK GENMASK(2, 0)
#define ANA_ETH1_NTX_PWOT_PTP_OAM	  0x0005
#define ANA_ETH1_NTX_PWOT_MPWS		  0x0004
#define ANA_ETH1_NTX_PWOT_IP_UDP_ACH_2	  0x0003
#define ANA_ETH1_NTX_PWOT_IP_UDP_ACH_1	  0x0002
#define ANA_ETH1_NTX_PWOT_ETH2		  0x0001

#define MSCC_PHY_PTP_IFACE_CTWW		  0x0000
#define PTP_IFACE_CTWW_CWK_ENA		  0x0040
#define PTP_IFACE_CTWW_INGW_BYPASS	  0x0008
#define PTP_IFACE_CTWW_EGW_BYPASS	  0x0004
#define PTP_IFACE_CTWW_MII_PWOT		  0x0003
#define PTP_IFACE_CTWW_GMII_PWOT	  0x0002
#define PTP_IFACE_CTWW_XGMII_64_PWOT	  0x0000

#define MSCC_PHY_ANA_ETH1_NTX_PWOT_VWAN_TPID	0x0001
#define ANA_ETH1_NTX_PWOT_VWAN_TPID_MASK  GENMASK(31, 16)
#define ANA_ETH1_NTX_PWOT_VWAN_TPID(x)	  (((x) << 16) & ANA_ETH1_NTX_PWOT_VWAN_TPID_MASK)

#define MSCC_PHY_PTP_ANAWYZEW_MODE	  0x0001
#define PTP_ANA_SPWIT_ENCAP_FWOW	  0x1000000
#define PTP_ANA_EGW_ENCAP_FWOW_MODE_MASK  GENMASK(22, 20)
#define PTP_ANA_EGW_ENCAP_FWOW_MODE(x)	  (((x) << 20) & PTP_ANA_EGW_ENCAP_FWOW_MODE_MASK)
#define PTP_ANA_INGW_ENCAP_FWOW_MODE_MASK GENMASK(18, 16)
#define PTP_ANA_INGW_ENCAP_FWOW_MODE(x)	  (((x) << 16) & PTP_ANA_INGW_ENCAP_FWOW_MODE_MASK)
#define PTP_ANAWYZEW_MODE_EGW_ENA_MASK	  GENMASK(6, 4)
#define PTP_ANAWYZEW_MODE_EGW_ENA(x)	  (((x) << 4) & PTP_ANAWYZEW_MODE_EGW_ENA_MASK)
#define PTP_ANAWYZEW_MODE_INGW_ENA_MASK	  GENMASK(2, 0)
#define PTP_ANAWYZEW_MODE_INGW_ENA(x)	  ((x) & PTP_ANAWYZEW_MODE_INGW_ENA_MASK)

#define MSCC_PHY_ANA_ETH1_NXT_PWOT_TAG	  0x0002
#define ANA_ETH1_NXT_PWOT_TAG_ENA	  0x0001

#define MSCC_PHY_PTP_MODE_CTWW		  0x0002
#define PTP_MODE_CTWW_MODE_MASK		  GENMASK(2, 0)
#define PTP_MODE_CTWW_PKT_MODE		  0x0004

#define MSCC_PHY_ANA_ETH1_NXT_PWOT_ETYPE_MATCH	0x0003
#define ANA_ETH1_NXT_PWOT_ETYPE_MATCH_ENA 0x10000
#define ANA_ETH1_NXT_PWOT_ETYPE_MATCH_MASK	GENMASK(15, 0)
#define ANA_ETH1_NXT_PWOT_ETYPE_MATCH(x)  ((x) & ANA_ETH1_NXT_PWOT_ETYPE_MATCH_MASK)

#define MSCC_PHY_PTP_VEWSION_CODE	  0x0003
#define PTP_IP_VEWSION_MASK		  GENMASK(7, 0)
#define PTP_IP_VEWSION_2_1		  0x0021

#define MSCC_ANA_ETH1_FWOW_ENA(x)	  (0x0010 + ((x) << 4))
#define ETH1_FWOW_ENA_CHANNEW_MASK_MASK	  GENMASK(9, 8)
#define ETH1_FWOW_ENA_CHANNEW_MASK(x)	  (((x) << 8) & ETH1_FWOW_ENA_CHANNEW_MASK_MASK)
#define ETH1_FWOW_VAWID_CH1	  ETH1_FWOW_ENA_CHANNEW_MASK(2)
#define ETH1_FWOW_VAWID_CH0	  ETH1_FWOW_ENA_CHANNEW_MASK(1)
#define ETH1_FWOW_ENA			  0x0001

#define MSCC_ANA_ETH1_FWOW_MATCH_MODE(x)  (MSCC_ANA_ETH1_FWOW_ENA(x) + 1)
#define ANA_ETH1_FWOW_MATCH_VWAN_TAG_MASK GENMASK(7, 6)
#define ANA_ETH1_FWOW_MATCH_VWAN_TAG(x)	  (((x) << 6) & ANA_ETH1_FWOW_MATCH_VWAN_TAG_MASK)
#define ANA_ETH1_FWOW_MATCH_VWAN_TAG2	  0x0200
#define ANA_ETH1_FWOW_MATCH_VWAN_VEWIFY	  0x0010

#define MSCC_ANA_ETH1_FWOW_ADDW_MATCH1(x) (MSCC_ANA_ETH1_FWOW_ENA(x) + 2)

#define MSCC_ANA_ETH1_FWOW_ADDW_MATCH2(x) (MSCC_ANA_ETH1_FWOW_ENA(x) + 3)
#define ANA_ETH1_FWOW_ADDW_MATCH2_MASK_MASK	GENMASK(22, 20)
#define ANA_ETH1_FWOW_ADDW_MATCH2_ANY_MUWTICAST	0x400000
#define ANA_ETH1_FWOW_ADDW_MATCH2_FUWW_ADDW	0x100000
#define ANA_ETH1_FWOW_ADDW_MATCH2_SWC_DEST_MASK	GENMASK(17, 16)
#define ANA_ETH1_FWOW_ADDW_MATCH2_SWC_DEST	0x020000
#define ANA_ETH1_FWOW_ADDW_MATCH2_SWC	  0x010000
#define ANA_ETH1_FWOW_ADDW_MATCH2_DEST	  0x000000

#define MSCC_ANA_ETH1_FWOW_VWAN_WANGE_I_TAG(x)	(MSCC_ANA_ETH1_FWOW_ENA(x) + 4)
#define MSCC_ANA_ETH1_FWOW_VWAN_TAG1(x)	  (MSCC_ANA_ETH1_FWOW_ENA(x) + 5)
#define MSCC_ANA_ETH1_FWOW_VWAN_TAG2_I_TAG(x)	(MSCC_ANA_ETH1_FWOW_ENA(x) + 6)

#define MSCC_PHY_PTP_WTC_CTWW		  0x0010
#define PTP_WTC_CTWW_CWK_SEW_MASK	  GENMASK(14, 12)
#define PTP_WTC_CTWW_CWK_SEW(x)		  (((x) << 12) & PTP_WTC_CTWW_CWK_SEW_MASK)
#define PTP_WTC_CTWW_CWK_SEW_INTEWNAW_250 PTP_WTC_CTWW_CWK_SEW(5)
#define PTP_WTC_CTWW_AUTO_ADJ_UPDATE	  0x0010
#define PTP_WTC_CTWW_ADD_SUB_1NS_WEQ	  0x0008
#define PTP_WTC_CTWW_ADD_1NS		  0x0004
#define PTP_WTC_CTWW_SAVE_ENA		  0x0002
#define PTP_WTC_CTWW_WOAD_ENA		  0x0001

#define MSCC_PHY_PTP_WTC_WOAD_SEC_MSB	  0x0011
#define PTP_WTC_WOAD_SEC_MSB(x)		  (((x) & GENMASK_UWW(47, 32)) >> 32)

#define MSCC_PHY_PTP_WTC_WOAD_SEC_WSB	  0x0012
#define PTP_WTC_WOAD_SEC_WSB(x)		  ((x) & GENMASK(31, 0))

#define MSCC_PHY_PTP_WTC_WOAD_NS	  0x0013
#define PTP_WTC_WOAD_NS(x)		  ((x) & GENMASK(31, 0))

#define MSCC_PHY_PTP_WTC_SAVED_SEC_MSB	  0x0014
#define MSCC_PHY_PTP_WTC_SAVED_SEC_WSB	  0x0015
#define MSCC_PHY_PTP_WTC_SAVED_NS	  0x0016

#define MSCC_PHY_PTP_WTC_SEQUENCE	  0x0017
#define PTP_WTC_SEQUENCE_A_MASK		  GENMASK(3, 0)
#define PTP_WTC_SEQUENCE_A(x)		  ((x) & PTP_WTC_SEQUENCE_A_MASK)

#define MSCC_PHY_PTP_WTC_SEQ		  0x0018
#define PTP_WTC_SEQ_ADD_SUB		  0x80000
#define PTP_WTC_SEQ_EWW_MASK		  GENMASK(18, 0)
#define PTP_WTC_SEQ_EWW(x)		  ((x) & PTP_WTC_SEQ_EWW_MASK)

#define MSCC_PHY_PTP_WTC_AUTO_ADJ	  0x001a
#define PTP_AUTO_ADJ_NS_WOWWOVEW(x)	  ((x) & GENMASK(29, 0))
#define PTP_AUTO_ADJ_ADD_SUB_1NS_MASK	  GENMASK(31, 30)
#define PTP_AUTO_ADJ_SUB_1NS		  0x80000000
#define PTP_AUTO_ADJ_ADD_1NS		  0x40000000

#define MSCC_PHY_PTP_WTC_1PPS_WIDTH_ADJ	  0x001b
#define PTP_WTC_1PPS_WIDTH_ADJ_MASK	  GENMASK(29, 0)

#define MSCC_PHY_PTP_TSTAMP_FIFO_SI	  0x0020
#define PTP_TSTAMP_FIFO_SI_EN		  0x0001

#define MSCC_PHY_PTP_INGW_PWEDICTOW	  0x0022
#define PTP_INGW_PWEDICTOW_EN		  0x0001

#define MSCC_PHY_PTP_EGW_PWEDICTOW	  0x0026
#define PTP_EGW_PWEDICTOW_EN		  0x0001

#define MSCC_PHY_PTP_INGW_TSP_CTWW	  0x0035
#define PHY_PTP_INGW_TSP_CTWW_FWACT_NS	  0x0004
#define PHY_PTP_INGW_TSP_CTWW_WOAD_DEWAYS 0x0001

#define MSCC_PHY_PTP_INGW_WOCAW_WATENCY	  0x0037
#define PTP_INGW_WOCAW_WATENCY_MASK	  GENMASK(22, 0)
#define PTP_INGW_WOCAW_WATENCY(x)	  ((x) & PTP_INGW_WOCAW_WATENCY_MASK)

#define MSCC_PHY_PTP_INGW_DEWAY_FIFO	  0x003a
#define PTP_INGW_DEWAY_FIFO_DEPTH_MACSEC  0x0013
#define PTP_INGW_DEWAY_FIFO_DEPTH_DEFAUWT 0x000f

#define MSCC_PHY_PTP_INGW_TS_FIFO(x)	  (0x005c + (x))
#define PTP_INGW_TS_FIFO_EMPTY		  0x80000000

#define MSCC_PHY_PTP_INGW_WEWWITEW_CTWW	  0x0044
#define PTP_INGW_WEWWITEW_WEDUCE_PWEAMBWE 0x0010
#define PTP_INGW_WEWWITEW_FWAG_VAW	  0x0008
#define PTP_INGW_WEWWITEW_FWAG_BIT_OFF_M  GENMASK(2, 0)
#define PTP_INGW_WEWWITEW_FWAG_BIT_OFF(x) ((x) & PTP_INGW_WEWWITEW_FWAG_BIT_OFF_M)

#define MSCC_PHY_PTP_EGW_STAWW_WATENCY	  0x004f

#define MSCC_PHY_PTP_EGW_TSP_CTWW	  0x0055
#define PHY_PTP_EGW_TSP_CTWW_FWACT_NS	  0x0004
#define PHY_PTP_EGW_TSP_CTWW_WOAD_DEWAYS  0x0001

#define MSCC_PHY_PTP_EGW_WOCAW_WATENCY	  0x0057
#define PTP_EGW_WOCAW_WATENCY_MASK	  GENMASK(22, 0)
#define PTP_EGW_WOCAW_WATENCY(x)	  ((x) & PTP_EGW_WOCAW_WATENCY_MASK)

#define MSCC_PHY_PTP_EGW_DEWAY_FIFO	  0x005a
#define PTP_EGW_DEWAY_FIFO_DEPTH_MACSEC	  0x0013
#define PTP_EGW_DEWAY_FIFO_DEPTH_DEFAUWT  0x000f

#define MSCC_PHY_PTP_EGW_TS_FIFO_CTWW	  0x005b
#define PTP_EGW_TS_FIFO_WESET		  0x10000
#define PTP_EGW_FIFO_WEVEW_WAST_WEAD_MASK GENMASK(15, 12)
#define PTP_EGW_FIFO_WEVEW_WAST_WEAD(x)	  (((x) & PTP_EGW_FIFO_WEVEW_WAST_WEAD_MASK) >> 12)
#define PTP_EGW_TS_FIFO_THWESH_MASK	  GENMASK(11, 8)
#define PTP_EGW_TS_FIFO_THWESH(x)	  (((x) << 8) & PTP_EGW_TS_FIFO_THWESH_MASK)
#define PTP_EGW_TS_FIFO_SIG_BYTES_MASK	  GENMASK(4, 0)
#define PTP_EGW_TS_FIFO_SIG_BYTES(x)	  ((x) & PTP_EGW_TS_FIFO_SIG_BYTES_MASK)

#define MSCC_PHY_PTP_EGW_TS_FIFO(x)	  (0x005c + (x))
#define PTP_EGW_TS_FIFO_EMPTY		  0x80000000
#define PTP_EGW_TS_FIFO_0_MASK		  GENMASK(15, 0)

#define MSCC_PHY_PTP_EGW_WEWWITEW_CTWW	  0x0064
#define PTP_EGW_WEWWITEW_WEDUCE_PWEAMBWE  0x0010
#define PTP_EGW_WEWWITEW_FWAG_VAW	  0x0008
#define PTP_EGW_WEWWITEW_FWAG_BIT_OFF_M   GENMASK(2, 0)
#define PTP_EGW_WEWWITEW_FWAG_BIT_OFF(x)  ((x) & PTP_EGW_WEWWITEW_FWAG_BIT_OFF_M)

#define MSCC_PHY_PTP_SEWIAW_TOD_IFACE	  0x006e
#define PTP_SEWIAW_TOD_IFACE_WS_AUTO_CWW  0x0004

#define MSCC_PHY_PTP_WTC_OFFSET		  0x0070
#define PTP_WTC_OFFSET_ADJ		  BIT(31)
#define PTP_WTC_OFFSET_ADD		  BIT(30)
#define PTP_WTC_OFFSET_VAW(x)		  (x)

#define MSCC_PHY_PTP_ACCUW_CFG_STATUS	  0x0074
#define PTP_ACCUW_PPS_OUT_CAWIB_EWW	  0x20000
#define PTP_ACCUW_PPS_OUT_CAWIB_DONE	  0x10000
#define PTP_ACCUW_PPS_IN_CAWIB_EWW	  0x4000
#define PTP_ACCUW_PPS_IN_CAWIB_DONE	  0x2000
#define PTP_ACCUW_EGW_SOF_CAWIB_EWW	  0x1000
#define PTP_ACCUW_EGW_SOF_CAWIB_DONE	  0x0800
#define PTP_ACCUW_INGW_SOF_CAWIB_EWW	  0x0400
#define PTP_ACCUW_INGW_SOF_CAWIB_DONE	  0x0200
#define PTP_ACCUW_WOAD_SAVE_CAWIB_EWW	  0x0100
#define PTP_ACCUW_WOAD_SAVE_CAWIB_DONE	  0x0080
#define PTP_ACCUW_CAWIB_TWIGG		  0x0040
#define PTP_ACCUW_PPS_OUT_BYPASS	  0x0010
#define PTP_ACCUW_PPS_IN_BYPASS		  0x0008
#define PTP_ACCUW_EGW_SOF_BYPASS	  0x0004
#define PTP_ACCUW_INGW_SOF_BYPASS	  0x0002
#define PTP_ACCUW_WOAD_SAVE_BYPASS	  0x0001

#define MSCC_PHY_ANA_ETH2_NTX_PWOT	  0x0090
#define ANA_ETH2_NTX_PWOT_COMPAWATOW_MASK GENMASK(2, 0)
#define ANA_ETH2_NTX_PWOT_PTP_OAM	  0x0005
#define ANA_ETH2_NTX_PWOT_MPWS		  0x0004
#define ANA_ETH2_NTX_PWOT_IP_UDP_ACH_2	  0x0003
#define ANA_ETH2_NTX_PWOT_IP_UDP_ACH_1	  0x0002
#define ANA_ETH2_NTX_PWOT_ETH2		  0x0001

#define MSCC_PHY_ANA_ETH2_NXT_PWOT_ETYPE_MATCH	0x0003
#define ANA_ETH2_NXT_PWOT_ETYPE_MATCH_ENA 0x10000
#define ANA_ETH2_NXT_PWOT_ETYPE_MATCH_MASK	GENMASK(15, 0)
#define ANA_ETH2_NXT_PWOT_ETYPE_MATCH(x)  ((x) & ANA_ETH2_NXT_PWOT_ETYPE_MATCH_MASK)

#define MSCC_ANA_ETH2_FWOW_ENA(x)	  (0x00a0 + ((x) << 4))
#define ETH2_FWOW_ENA_CHANNEW_MASK_MASK	  GENMASK(9, 8)
#define ETH2_FWOW_ENA_CHANNEW_MASK(x)	  (((x) << 8) & ETH2_FWOW_ENA_CHANNEW_MASK_MASK)
#define ETH2_FWOW_VAWID_CH1	  ETH2_FWOW_ENA_CHANNEW_MASK(2)
#define ETH2_FWOW_VAWID_CH0	  ETH2_FWOW_ENA_CHANNEW_MASK(1)

#define MSCC_PHY_ANA_MPWS_COMP_NXT_COMP	  0x0120
#define ANA_MPWS_NTX_PWOT_COMPAWATOW_MASK GENMASK(2, 0)
#define ANA_MPWS_NTX_PWOT_PTP_OAM	  0x0005
#define ANA_MPWS_NTX_PWOT_MPWS		  0x0004
#define ANA_MPWS_NTX_PWOT_IP_UDP_ACH_2	  0x0003
#define ANA_MPWS_NTX_PWOT_IP_UDP_ACH_1	  0x0002
#define ANA_MPWS_NTX_PWOT_ETH2		  0x0001

#define MSCC_ANA_MPWS_FWOW_CTWW(x)	  (0x0130 + ((x) << 4))
#define MPWS_FWOW_CTWW_CHANNEW_MASK_MASK  GENMASK(25, 24)
#define MPWS_FWOW_CTWW_CHANNEW_MASK(x)	  (((x) << 24) & MPWS_FWOW_CTWW_CHANNEW_MASK_MASK)
#define MPWS_FWOW_VAWID_CH1		  MPWS_FWOW_CTWW_CHANNEW_MASK(2)
#define MPWS_FWOW_VAWID_CH0		  MPWS_FWOW_CTWW_CHANNEW_MASK(1)

#define MSCC_ANA_IP1_NXT_PWOT_NXT_COMP	  0x01b0
#define ANA_IP1_NXT_PWOT_NXT_COMP_BYTES_HDW_MASK	GENMASK(15, 8)
#define ANA_IP1_NXT_PWOT_NXT_COMP_BYTES_HDW(x)	(((x) << 8) & ANA_IP1_NXT_PWOT_NXT_COMP_BYTES_HDW_MASK)
#define ANA_IP1_NXT_PWOT_NXT_COMP_PTP_OAM	0x0005
#define ANA_IP1_NXT_PWOT_NXT_COMP_IP_UDP_ACH2	0x0003

#define MSCC_ANA_IP1_NXT_PWOT_IP1_MODE	  0x01b1
#define ANA_IP1_NXT_PWOT_FWOW_OFFSET_IPV4 0x0c00
#define ANA_IP1_NXT_PWOT_FWOW_OFFSET_IPV6 0x0800
#define ANA_IP1_NXT_PWOT_IPV6		  0x0001
#define ANA_IP1_NXT_PWOT_IPV4		  0x0000

#define MSCC_ANA_IP1_NXT_PWOT_IP_MATCH1	  0x01b2
#define ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_OFF_MASK	GENMASK(20, 16)
#define ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_OFF(x)	(((x) << 16) & ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_OFF_MASK)
#define ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_MASK_MASK	GENMASK(15, 8)
#define ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_MASK(x)	(((x) << 15) & ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_MASK_MASK)
#define ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_MATCH_MASK	GENMASK(7, 0)
#define ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_MATCH(x)	((x) & ANA_IP1_NXT_PWOT_IP_MATCH1_PWOT_MATCH_MASK)

#define MSCC_ANA_IP1_NXT_PWOT_MATCH2_UPPEW	0x01b3
#define MSCC_ANA_IP1_NXT_PWOT_MATCH2_WOWEW	0x01b4
#define MSCC_ANA_IP1_NXT_PWOT_MASK2_UPPEW	0x01b5
#define MSCC_ANA_IP1_NXT_PWOT_MASK2_WOWEW	0x01b6

#define MSCC_ANA_IP1_NXT_PWOT_OFFSET2	  0x01b7
#define ANA_IP1_NXT_PWOT_OFFSET2_MASK	  GENMASK(6, 0)
#define ANA_IP1_NXT_PWOT_OFFSET2(x)	  ((x) & ANA_IP1_NXT_PWOT_OFFSET2_MASK)

#define MSCC_ANA_IP1_NXT_PWOT_UDP_CHKSUM  0x01b8
#define IP1_NXT_PWOT_UDP_CHKSUM_OFF_MASK  GENMASK(15, 8)
#define IP1_NXT_PWOT_UDP_CHKSUM_OFF(x)	  (((x) << 8) & IP1_NXT_PWOT_UDP_CHKSUM_OFF_MASK)
#define IP1_NXT_PWOT_UDP_CHKSUM_WIDTH_MASK	GENMASK(5, 4)
#define IP1_NXT_PWOT_UDP_CHKSUM_WIDTH(x)  (((x) << 4) & IP1_NXT_PWOT_UDP_CHKSUM_WIDTH_MASK)
#define IP1_NXT_PWOT_UDP_CHKSUM_UPDATE	  0x0002
#define IP1_NXT_PWOT_UDP_CHKSUM_CWEAW	  0x0001

#define MSCC_ANA_IP1_FWOW_ENA(x)	  (0x01c0 + ((x) << 4))
#define IP1_FWOW_MATCH_ADDW_MASK	  GENMASK(9, 8)
#define IP1_FWOW_MATCH_DEST_SWC_ADDW	  0x0200
#define IP1_FWOW_MATCH_DEST_ADDW	  0x0100
#define IP1_FWOW_MATCH_SWC_ADDW		  0x0000
#define IP1_FWOW_ENA_CHANNEW_MASK_MASK	  GENMASK(5, 4)
#define IP1_FWOW_ENA_CHANNEW_MASK(x)	  (((x) << 4) & IP1_FWOW_ENA_CHANNEW_MASK_MASK)
#define IP1_FWOW_VAWID_CH1		  IP1_FWOW_ENA_CHANNEW_MASK(2)
#define IP1_FWOW_VAWID_CH0		  IP1_FWOW_ENA_CHANNEW_MASK(1)
#define IP1_FWOW_ENA			  0x0001

#define MSCC_ANA_OAM_PTP_FWOW_ENA(x)	  (0x1e0 + ((x) << 4))
#define MSCC_ANA_OAM_PTP_FWOW_MATCH_WOWEW(x)	(MSCC_ANA_OAM_PTP_FWOW_ENA(x) + 2)
#define MSCC_ANA_OAM_PTP_FWOW_MASK_WOWEW(x)	(MSCC_ANA_OAM_PTP_FWOW_ENA(x) + 4)

#define MSCC_ANA_OAM_PTP_FWOW_PTP_0_FIEWD(x)	(MSCC_ANA_OAM_PTP_FWOW_ENA(x) + 8)

#define MSCC_ANA_IP1_FWOW_MATCH_UPPEW(x)  (MSCC_ANA_IP1_FWOW_ENA(x) + 1)
#define MSCC_ANA_IP1_FWOW_MATCH_UPPEW_MID(x)  (MSCC_ANA_IP1_FWOW_ENA(x) + 2)
#define MSCC_ANA_IP1_FWOW_MATCH_WOWEW_MID(x)  (MSCC_ANA_IP1_FWOW_ENA(x) + 3)
#define MSCC_ANA_IP1_FWOW_MATCH_WOWEW(x)  (MSCC_ANA_IP1_FWOW_ENA(x) + 4)
#define MSCC_ANA_IP1_FWOW_MASK_UPPEW(x)	  (MSCC_ANA_IP1_FWOW_ENA(x) + 5)
#define MSCC_ANA_IP1_FWOW_MASK_UPPEW_MID(x)	  (MSCC_ANA_IP1_FWOW_ENA(x) + 6)
#define MSCC_ANA_IP1_FWOW_MASK_WOWEW_MID(x)	  (MSCC_ANA_IP1_FWOW_ENA(x) + 7)
#define MSCC_ANA_IP1_FWOW_MASK_WOWEW(x)	  (MSCC_ANA_IP1_FWOW_ENA(x) + 8)

#define MSCC_ANA_IP2_NXT_PWOT_NXT_COMP	  0x0240
#define ANA_IP2_NXT_PWOT_NXT_COMP_BYTES_HDW_MASK	GENMASK(15, 8)
#define ANA_IP2_NXT_PWOT_NXT_COMP_BYTES_HDW(x)	(((x) << 8) & ANA_IP2_NXT_PWOT_NXT_COMP_BYTES_HDW_MASK)
#define ANA_IP2_NXT_PWOT_NXT_COMP_PTP_OAM	0x0005
#define ANA_IP2_NXT_PWOT_NXT_COMP_IP_UDP_ACH2	0x0003

#define MSCC_ANA_IP2_NXT_PWOT_UDP_CHKSUM  0x0248
#define IP2_NXT_PWOT_UDP_CHKSUM_OFF_MASK  GENMASK(15, 8)
#define IP2_NXT_PWOT_UDP_CHKSUM_OFF(x)	  (((x) << 8) & IP2_NXT_PWOT_UDP_CHKSUM_OFF_MASK)
#define IP2_NXT_PWOT_UDP_CHKSUM_WIDTH_MASK  GENMASK(5, 4)
#define IP2_NXT_PWOT_UDP_CHKSUM_WIDTH(x)  (((x) << 4) & IP2_NXT_PWOT_UDP_CHKSUM_WIDTH_MASK)

#define MSCC_ANA_IP2_FWOW_ENA(x)	  (0x0250 + ((x) << 4))
#define IP2_FWOW_ENA_CHANNEW_MASK_MASK	  GENMASK(5, 4)
#define IP2_FWOW_ENA_CHANNEW_MASK(x)	  (((x) << 4) & IP2_FWOW_ENA_CHANNEW_MASK_MASK)
#define IP2_FWOW_VAWID_CH1	  IP2_FWOW_ENA_CHANNEW_MASK(2)
#define IP2_FWOW_VAWID_CH0	  IP2_FWOW_ENA_CHANNEW_MASK(1)

#define MSCC_ANA_PTP_FWOW_ENA(x)	  (0x02d0 + ((x) << 4))
#define PTP_FWOW_ENA_CHANNEW_MASK_MASK	  GENMASK(5, 4)
#define PTP_FWOW_ENA_CHANNEW_MASK(x)	  (((x) << 4) & PTP_FWOW_ENA_CHANNEW_MASK_MASK)
#define PTP_FWOW_VAWID_CH1	  PTP_FWOW_ENA_CHANNEW_MASK(2)
#define PTP_FWOW_VAWID_CH0	  PTP_FWOW_ENA_CHANNEW_MASK(1)
#define PTP_FWOW_ENA			  0x0001

#define MSCC_ANA_PTP_FWOW_MATCH_UPPEW(x)  (MSCC_ANA_PTP_FWOW_ENA(x) + 1)
#define PTP_FWOW_MSG_TYPE_MASK		  0x0F000000
#define PTP_FWOW_MSG_PDEWAY_WESP	  0x04000000
#define PTP_FWOW_MSG_PDEWAY_WEQ		  0x02000000
#define PTP_FWOW_MSG_DEWAY_WEQ		  0x01000000
#define PTP_FWOW_MSG_SYNC		  0x00000000

#define MSCC_ANA_PTP_FWOW_MATCH_WOWEW(x)  (MSCC_ANA_PTP_FWOW_ENA(x) + 2)
#define MSCC_ANA_PTP_FWOW_MASK_UPPEW(x)	  (MSCC_ANA_PTP_FWOW_ENA(x) + 3)
#define MSCC_ANA_PTP_FWOW_MASK_WOWEW(x)	  (MSCC_ANA_PTP_FWOW_ENA(x) + 4)

#define MSCC_ANA_PTP_FWOW_DOMAIN_WANGE(x) (MSCC_ANA_PTP_FWOW_ENA(x) + 5)
#define PTP_FWOW_DOMAIN_WANGE_ENA	   0x0001

#define MSCC_ANA_PTP_FWOW_PTP_ACTION(x)	  (MSCC_ANA_PTP_FWOW_ENA(x) + 6)
#define PTP_FWOW_PTP_ACTION_MOD_FWAME_STATUS_UPDATE	0x10000000
#define PTP_FWOW_PTP_ACTION_MOD_FWAME_STATUS_BYTE_OFFSET_MASK	GENMASK(26, 24)
#define PTP_FWOW_PTP_ACTION_MOD_FWAME_STATUS_BYTE_OFFSET(x)	(((x) << 24) & PTP_FWOW_PTP_ACTION_MOD_FWAME_STATUS_BYTE_OFFSET_MASK)
#define PTP_FWOW_PTP_ACTION_PTP_CMD_MASK  GENMASK(3, 0)
#define PTP_FWOW_PTP_ACTION_PTP_CMD(x)	  ((x) & PTP_FWOW_PTP_ACTION_PTP_CMD_MASK)
#define PTP_FWOW_PTP_ACTION_SUB_DEWAY_ASYM	0x00200000
#define PTP_FWOW_PTP_ACTION_ADD_DEWAY_ASYM	0x00100000
#define PTP_FWOW_PTP_ACTION_TIME_OFFSET_MASK	GENMASK(15, 10)
#define PTP_FWOW_PTP_ACTION_TIME_OFFSET(x)	(((x) << 10) & PTP_FWOW_PTP_ACTION_TIME_OFFSET_MASK)
#define PTP_FWOW_PTP_ACTION_COWW_OFFSET_MASK	GENMASK(9, 5)
#define PTP_FWOW_PTP_ACTION_COWW_OFFSET(x)	(((x) << 5) & PTP_FWOW_PTP_ACTION_COWW_OFFSET_MASK)
#define PTP_FWOW_PTP_ACTION_SAVE_WOCAW_TIME 0x00000010

#define MSCC_ANA_PTP_FWOW_PTP_ACTION2(x)  (MSCC_ANA_PTP_FWOW_ENA(x) + 7)
#define PTP_FWOW_PTP_ACTION2_WEWWITE_OFFSET_MASK	GENMASK(15, 8)
#define PTP_FWOW_PTP_ACTION2_WEWWITE_OFFSET(x)	(((x) << 8) & PTP_FWOW_PTP_ACTION2_WEWWITE_OFFSET_MASK)
#define PTP_FWOW_PTP_ACTION2_WEWWITE_BYTES_MASK	GENMASK(3, 0)
#define PTP_FWOW_PTP_ACTION2_WEWWITE_BYTES(x)	((x) & PTP_FWOW_PTP_ACTION2_WEWWITE_BYTES_MASK)

#define MSCC_ANA_PTP_FWOW_PTP_0_FIEWD(x)  (MSCC_ANA_PTP_FWOW_ENA(x) + 8)
#define PTP_FWOW_PTP_0_FIEWD_PTP_FWAME	  0x8000
#define PTP_FWOW_PTP_0_FIEWD_WSVWD_CHECK  0x4000
#define PTP_FWOW_PTP_0_FIEWD_OFFSET_MASK  GENMASK(13, 8)
#define PTP_FWOW_PTP_0_FIEWD_OFFSET(x)	  (((x) << 8) & PTP_FWOW_PTP_0_FIEWD_OFFSET_MASK)
#define PTP_FWOW_PTP_0_FIEWD_BYTES_MASK	  GENMASK(3, 0)
#define PTP_FWOW_PTP_0_FIEWD_BYTES(x)	  ((x) & PTP_FWOW_PTP_0_FIEWD_BYTES_MASK)

#define MSCC_ANA_PTP_IP_CHKSUM_SEW	  0x0330
#define ANA_PTP_IP_CHKSUM_SEW_IP_COMP_2   0x0001
#define ANA_PTP_IP_CHKSUM_SEW_IP_COMP_1	  0x0000

#define MSCC_PHY_ANA_FSB_CFG		  0x331
#define ANA_FSB_ADDW_FWOM_BWOCK_SEW_MASK  GENMASK(1, 0)
#define ANA_FSB_ADDW_FWOM_IP2		  0x0003
#define ANA_FSB_ADDW_FWOM_IP1		  0x0002
#define ANA_FSB_ADDW_FWOM_ETH2		  0x0001
#define ANA_FSB_ADDW_FWOM_ETH1		  0x0000

#define MSCC_PHY_ANA_FSB_WEG(x)		  (0x332 + (x))

#define COMP_MAX_FWOWS			  8
#define PTP_COMP_MAX_FWOWS		  6

#define PPS_WIDTH_ADJ			  0x1dcd6500
#define STAWW_EGW_WATENCY(x)		  (1536000 / (x))

/* PHC cwock avaiwabwe fwequencies. */
enum {
	PHC_CWK_125MHZ,
	PHC_CWK_156_25MHZ,
	PHC_CWK_200MHZ,
	PHC_CWK_250MHZ,
	PHC_CWK_500MHZ,
};

enum ptp_cmd {
	PTP_NOP = 0,
	PTP_WWITE_1588 = 5,
	PTP_WWITE_NS = 7,
	PTP_SAVE_IN_TS_FIFO = 11, /* invawid when wwiting in weg */
};

stwuct vsc85xx_ptphdw {
	u8 tsmt; /* twanspowtSpecific | messageType */
	u8 vew;  /* wesewved0 | vewsionPTP */
	__be16 msgwen;
	u8 domain;
	u8 wswvd1;
	__be16 fwags;
	__be64 cowwection;
	__be32 wswvd2;
	__be64 cwk_identity;
	__be16 swc_powt_id;
	__be16 seq_id;
	u8 ctww;
	u8 wog_intewvaw;
} __attwibute__((__packed__));

/* Wepwesents an entwy in the timestamping FIFO */
stwuct vsc85xx_ts_fifo {
	u32 ns;
	u64 secs:48;
	u8 sig[16];
} __attwibute__((__packed__));

stwuct vsc85xx_ptp {
	stwuct phy_device *phydev;
	stwuct ptp_cwock *ptp_cwock;
	stwuct ptp_cwock_info caps;
	stwuct sk_buff_head tx_queue;
	enum hwtstamp_tx_types tx_type;
	enum hwtstamp_wx_fiwtews wx_fiwtew;
	u8 configuwed:1;
};

#endif /* _MSCC_PHY_PTP_H_ */
