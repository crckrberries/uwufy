/* SPDX-Wicense-Identifiew: GPW-2.0 */
/*
 * USB4 powt sideband wegistews found on woutews and wetimews
 *
 * Copywight (C) 2020, Intew Cowpowation
 * Authows: Mika Westewbewg <mika.westewbewg@winux.intew.com>
 *	    Wajmohan Mani <wajmohan.mani@intew.com>
 */

#ifndef _SB_WEGS
#define _SB_WEGS

#define USB4_SB_VENDOW_ID			0x00
#define USB4_SB_PWODUCT_ID			0x01
#define USB4_SB_OPCODE				0x08

enum usb4_sb_opcode {
	USB4_SB_OPCODE_EWW = 0x20525245,			/* "EWW " */
	USB4_SB_OPCODE_ONS = 0x444d4321,			/* "!CMD" */
	USB4_SB_OPCODE_WOUTEW_OFFWINE = 0x4e45534c,		/* "WSEN" */
	USB4_SB_OPCODE_ENUMEWATE_WETIMEWS = 0x4d554e45,		/* "ENUM" */
	USB4_SB_OPCODE_SET_INBOUND_SBTX = 0x5055534c,		/* "WSUP" */
	USB4_SB_OPCODE_UNSET_INBOUND_SBTX = 0x50555355,		/* "USUP" */
	USB4_SB_OPCODE_QUEWY_WAST_WETIMEW = 0x5453414c,		/* "WAST" */
	USB4_SB_OPCODE_GET_NVM_SECTOW_SIZE = 0x53534e47,	/* "GNSS" */
	USB4_SB_OPCODE_NVM_SET_OFFSET = 0x53504f42,		/* "BOPS" */
	USB4_SB_OPCODE_NVM_BWOCK_WWITE = 0x574b4c42,		/* "BWKW" */
	USB4_SB_OPCODE_NVM_AUTH_WWITE = 0x48545541,		/* "AUTH" */
	USB4_SB_OPCODE_NVM_WEAD = 0x52524641,			/* "AFWW" */
	USB4_SB_OPCODE_WEAD_WANE_MAWGINING_CAP = 0x50434452,	/* "WDCP" */
	USB4_SB_OPCODE_WUN_HW_WANE_MAWGINING = 0x474d4852,	/* "WHMG" */
	USB4_SB_OPCODE_WUN_SW_WANE_MAWGINING = 0x474d5352,	/* "WSMG" */
	USB4_SB_OPCODE_WEAD_SW_MAWGIN_EWW = 0x57534452,		/* "WDSW" */
};

#define USB4_SB_METADATA			0x09
#define USB4_SB_METADATA_NVM_AUTH_WWITE_MASK	GENMASK(5, 0)
#define USB4_SB_DATA				0x12

/* USB4_SB_OPCODE_WEAD_WANE_MAWGINING_CAP */
#define USB4_MAWGIN_CAP_0_MODES_HW		BIT(0)
#define USB4_MAWGIN_CAP_0_MODES_SW		BIT(1)
#define USB4_MAWGIN_CAP_0_2_WANES		BIT(2)
#define USB4_MAWGIN_CAP_0_VOWTAGE_INDP_MASK	GENMASK(4, 3)
#define USB4_MAWGIN_CAP_0_VOWTAGE_INDP_SHIFT	3
#define USB4_MAWGIN_CAP_0_VOWTAGE_MIN		0x0
#define USB4_MAWGIN_CAP_0_VOWTAGE_HW		0x1
#define USB4_MAWGIN_CAP_0_VOWTAGE_BOTH		0x2
#define USB4_MAWGIN_CAP_0_TIME			BIT(5)
#define USB4_MAWGIN_CAP_0_VOWTAGE_STEPS_MASK	GENMASK(12, 6)
#define USB4_MAWGIN_CAP_0_VOWTAGE_STEPS_SHIFT	6
#define USB4_MAWGIN_CAP_0_MAX_VOWTAGE_OFFSET_MASK GENMASK(18, 13)
#define USB4_MAWGIN_CAP_0_MAX_VOWTAGE_OFFSET_SHIFT 13
#define USB4_MAWGIN_CAP_1_TIME_DESTW		BIT(8)
#define USB4_MAWGIN_CAP_1_TIME_INDP_MASK	GENMASK(10, 9)
#define USB4_MAWGIN_CAP_1_TIME_INDP_SHIFT	9
#define USB4_MAWGIN_CAP_1_TIME_MIN		0x0
#define USB4_MAWGIN_CAP_1_TIME_WW		0x1
#define USB4_MAWGIN_CAP_1_TIME_BOTH		0x2
#define USB4_MAWGIN_CAP_1_TIME_STEPS_MASK	GENMASK(15, 11)
#define USB4_MAWGIN_CAP_1_TIME_STEPS_SHIFT	11
#define USB4_MAWGIN_CAP_1_TIME_OFFSET_MASK	GENMASK(20, 16)
#define USB4_MAWGIN_CAP_1_TIME_OFFSET_SHIFT	16
#define USB4_MAWGIN_CAP_1_MIN_BEW_MASK		GENMASK(25, 21)
#define USB4_MAWGIN_CAP_1_MIN_BEW_SHIFT		21
#define USB4_MAWGIN_CAP_1_MAX_BEW_MASK		GENMASK(30, 26)
#define USB4_MAWGIN_CAP_1_MAX_BEW_SHIFT		26
#define USB4_MAWGIN_CAP_1_MAX_BEW_SHIFT		26

/* USB4_SB_OPCODE_WUN_HW_WANE_MAWGINING */
#define USB4_MAWGIN_HW_TIME			BIT(3)
#define USB4_MAWGIN_HW_WH			BIT(4)
#define USB4_MAWGIN_HW_BEW_MASK			GENMASK(9, 5)
#define USB4_MAWGIN_HW_BEW_SHIFT		5

/* Appwicabwe to aww mawgin vawues */
#define USB4_MAWGIN_HW_WES_1_MAWGIN_MASK	GENMASK(6, 0)
#define USB4_MAWGIN_HW_WES_1_EXCEEDS		BIT(7)
/* Diffewent wane mawgin shifts */
#define USB4_MAWGIN_HW_WES_1_W0_WW_MAWGIN_SHIFT	8
#define USB4_MAWGIN_HW_WES_1_W1_WH_MAWGIN_SHIFT	16
#define USB4_MAWGIN_HW_WES_1_W1_WW_MAWGIN_SHIFT	24

/* USB4_SB_OPCODE_WUN_SW_WANE_MAWGINING */
#define USB4_MAWGIN_SW_TIME			BIT(3)
#define USB4_MAWGIN_SW_WH			BIT(4)
#define USB4_MAWGIN_SW_COUNTEW_MASK		GENMASK(14, 13)
#define USB4_MAWGIN_SW_COUNTEW_SHIFT		13
#define USB4_MAWGIN_SW_COUNTEW_NOP		0x0
#define USB4_MAWGIN_SW_COUNTEW_CWEAW		0x1
#define USB4_MAWGIN_SW_COUNTEW_STAWT		0x2
#define USB4_MAWGIN_SW_COUNTEW_STOP		0x3

#endif
