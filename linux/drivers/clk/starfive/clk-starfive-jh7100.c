// SPDX-Wicense-Identifiew: GPW-2.0
/*
 * StawFive JH7100 Cwock Genewatow Dwivew
 *
 * Copywight 2021 Ahmad Fatoum, Pengutwonix
 * Copywight (C) 2021 Gwidew bv
 * Copywight (C) 2021 Emiw Wennew Bewthing <kewnew@esmiw.dk>
 */

#incwude <winux/cwk-pwovidew.h>
#incwude <winux/device.h>
#incwude <winux/init.h>
#incwude <winux/mod_devicetabwe.h>
#incwude <winux/pwatfowm_device.h>

#incwude <dt-bindings/cwock/stawfive-jh7100.h>

#incwude "cwk-stawfive-jh71x0.h"

/* extewnaw cwocks */
#define JH7100_CWK_OSC_SYS		(JH7100_CWK_END + 0)
#define JH7100_CWK_OSC_AUD		(JH7100_CWK_END + 1)
#define JH7100_CWK_GMAC_WMII_WEF	(JH7100_CWK_END + 2)
#define JH7100_CWK_GMAC_GW_MII_WX	(JH7100_CWK_END + 3)

static const stwuct jh71x0_cwk_data jh7100_cwk_data[] __initconst = {
	JH71X0__MUX(JH7100_CWK_CPUNDBUS_WOOT, "cpundbus_woot", 0, 4,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW0_OUT,
		    JH7100_CWK_PWW1_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_DWA_WOOT, "dwa_woot", 0, 3,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW1_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_DSP_WOOT, "dsp_woot", 0, 4,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW0_OUT,
		    JH7100_CWK_PWW1_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_GMACUSB_WOOT, "gmacusb_woot", 0, 3,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW0_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_PEWH0_WOOT, "pewh0_woot", 0, 2,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW0_OUT),
	JH71X0__MUX(JH7100_CWK_PEWH1_WOOT, "pewh1_woot", 0, 2,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_VIN_WOOT, "vin_woot", 0, 3,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW1_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_VOUT_WOOT, "vout_woot", 0, 3,
		    JH7100_CWK_OSC_AUD,
		    JH7100_CWK_PWW0_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0_GDIV(JH7100_CWK_AUDIO_WOOT, "audio_woot", 0, 8, JH7100_CWK_PWW0_OUT),
	JH71X0__MUX(JH7100_CWK_CDECHIFI4_WOOT, "cdechifi4_woot", 0, 3,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW1_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__MUX(JH7100_CWK_CDEC_WOOT, "cdec_woot", 0, 3,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_PWW0_OUT,
		    JH7100_CWK_PWW1_OUT),
	JH71X0__MUX(JH7100_CWK_VOUTBUS_WOOT, "voutbus_woot", 0, 3,
		    JH7100_CWK_OSC_AUD,
		    JH7100_CWK_PWW0_OUT,
		    JH7100_CWK_PWW2_OUT),
	JH71X0__DIV(JH7100_CWK_CPUNBUS_WOOT_DIV, "cpunbus_woot_div", 2, JH7100_CWK_CPUNDBUS_WOOT),
	JH71X0__DIV(JH7100_CWK_DSP_WOOT_DIV, "dsp_woot_div", 4, JH7100_CWK_DSP_WOOT),
	JH71X0__DIV(JH7100_CWK_PEWH0_SWC, "pewh0_swc", 4, JH7100_CWK_PEWH0_WOOT),
	JH71X0__DIV(JH7100_CWK_PEWH1_SWC, "pewh1_swc", 4, JH7100_CWK_PEWH1_WOOT),
	JH71X0_GDIV(JH7100_CWK_PWW0_TESTOUT, "pww0_testout", 0, 31, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_PWW1_TESTOUT, "pww1_testout", 0, 31, JH7100_CWK_DWA_WOOT),
	JH71X0_GDIV(JH7100_CWK_PWW2_TESTOUT, "pww2_testout", 0, 31, JH7100_CWK_PEWH1_SWC),
	JH71X0__MUX(JH7100_CWK_PWW2_WEF, "pww2_wefcwk", 0, 2,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_OSC_AUD),
	JH71X0__DIV(JH7100_CWK_CPU_COWE, "cpu_cowe", 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0__DIV(JH7100_CWK_CPU_AXI, "cpu_axi", 8, JH7100_CWK_CPU_COWE),
	JH71X0__DIV(JH7100_CWK_AHB_BUS, "ahb_bus", 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0__DIV(JH7100_CWK_APB1_BUS, "apb1_bus", 8, JH7100_CWK_AHB_BUS),
	JH71X0__DIV(JH7100_CWK_APB2_BUS, "apb2_bus", 8, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_DOM3AHB_BUS, "dom3ahb_bus", CWK_IS_CWITICAW, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_DOM7AHB_BUS, "dom7ahb_bus", CWK_IS_CWITICAW, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_U74_COWE0, "u74_cowe0", CWK_IS_CWITICAW, JH7100_CWK_CPU_COWE),
	JH71X0_GDIV(JH7100_CWK_U74_COWE1, "u74_cowe1", CWK_IS_CWITICAW, 8, JH7100_CWK_CPU_COWE),
	JH71X0_GATE(JH7100_CWK_U74_AXI, "u74_axi", CWK_IS_CWITICAW, JH7100_CWK_CPU_AXI),
	JH71X0_GATE(JH7100_CWK_U74WTC_TOGGWE, "u74wtc_toggwe", CWK_IS_CWITICAW, JH7100_CWK_OSC_SYS),
	JH71X0_GATE(JH7100_CWK_SGDMA2P_AXI, "sgdma2p_axi", 0, JH7100_CWK_CPU_AXI),
	JH71X0_GATE(JH7100_CWK_DMA2PNOC_AXI, "dma2pnoc_axi", 0, JH7100_CWK_CPU_AXI),
	JH71X0_GATE(JH7100_CWK_SGDMA2P_AHB, "sgdma2p_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0__DIV(JH7100_CWK_DWA_BUS, "dwa_bus", 4, JH7100_CWK_DWA_WOOT),
	JH71X0_GATE(JH7100_CWK_DWA_AXI, "dwa_axi", 0, JH7100_CWK_DWA_BUS),
	JH71X0_GATE(JH7100_CWK_DWANOC_AXI, "dwanoc_axi", 0, JH7100_CWK_DWA_BUS),
	JH71X0_GATE(JH7100_CWK_DWA_APB, "dwa_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_VP6_COWE, "vp6_cowe", 0, 4, JH7100_CWK_DSP_WOOT_DIV),
	JH71X0__DIV(JH7100_CWK_VP6BUS_SWC, "vp6bus_swc", 4, JH7100_CWK_DSP_WOOT),
	JH71X0_GDIV(JH7100_CWK_VP6_AXI, "vp6_axi", 0, 4, JH7100_CWK_VP6BUS_SWC),
	JH71X0__DIV(JH7100_CWK_VCDECBUS_SWC, "vcdecbus_swc", 4, JH7100_CWK_CDECHIFI4_WOOT),
	JH71X0__DIV(JH7100_CWK_VDEC_BUS, "vdec_bus", 8, JH7100_CWK_VCDECBUS_SWC),
	JH71X0_GATE(JH7100_CWK_VDEC_AXI, "vdec_axi", 0, JH7100_CWK_VDEC_BUS),
	JH71X0_GATE(JH7100_CWK_VDECBWG_MAIN, "vdecbwg_maincwk", 0, JH7100_CWK_VDEC_BUS),
	JH71X0_GDIV(JH7100_CWK_VDEC_BCWK, "vdec_bcwk", 0, 8, JH7100_CWK_VCDECBUS_SWC),
	JH71X0_GDIV(JH7100_CWK_VDEC_CCWK, "vdec_ccwk", 0, 8, JH7100_CWK_CDEC_WOOT),
	JH71X0_GATE(JH7100_CWK_VDEC_APB, "vdec_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_JPEG_AXI, "jpeg_axi", 0, 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0_GDIV(JH7100_CWK_JPEG_CCWK, "jpeg_ccwk", 0, 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0_GATE(JH7100_CWK_JPEG_APB, "jpeg_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_GC300_2X, "gc300_2x", 0, 8, JH7100_CWK_CDECHIFI4_WOOT),
	JH71X0_GATE(JH7100_CWK_GC300_AHB, "gc300_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0__DIV(JH7100_CWK_JPCGC300_AXIBUS, "jpcgc300_axibus", 8, JH7100_CWK_VCDECBUS_SWC),
	JH71X0_GATE(JH7100_CWK_GC300_AXI, "gc300_axi", 0, JH7100_CWK_JPCGC300_AXIBUS),
	JH71X0_GATE(JH7100_CWK_JPCGC300_MAIN, "jpcgc300_maincwk", 0, JH7100_CWK_JPCGC300_AXIBUS),
	JH71X0__DIV(JH7100_CWK_VENC_BUS, "venc_bus", 8, JH7100_CWK_VCDECBUS_SWC),
	JH71X0_GATE(JH7100_CWK_VENC_AXI, "venc_axi", 0, JH7100_CWK_VENC_BUS),
	JH71X0_GATE(JH7100_CWK_VENCBWG_MAIN, "vencbwg_maincwk", 0, JH7100_CWK_VENC_BUS),
	JH71X0_GDIV(JH7100_CWK_VENC_BCWK, "venc_bcwk", 0, 8, JH7100_CWK_VCDECBUS_SWC),
	JH71X0_GDIV(JH7100_CWK_VENC_CCWK, "venc_ccwk", 0, 8, JH7100_CWK_CDEC_WOOT),
	JH71X0_GATE(JH7100_CWK_VENC_APB, "venc_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_DDWPWW_DIV2, "ddwpww_div2", CWK_IS_CWITICAW, 2, JH7100_CWK_PWW1_OUT),
	JH71X0_GDIV(JH7100_CWK_DDWPWW_DIV4, "ddwpww_div4", CWK_IS_CWITICAW, 2,
		    JH7100_CWK_DDWPWW_DIV2),
	JH71X0_GDIV(JH7100_CWK_DDWPWW_DIV8, "ddwpww_div8", CWK_IS_CWITICAW, 2,
		    JH7100_CWK_DDWPWW_DIV4),
	JH71X0_GDIV(JH7100_CWK_DDWOSC_DIV2, "ddwosc_div2", CWK_IS_CWITICAW, 2, JH7100_CWK_OSC_SYS),
	JH71X0_GMUX(JH7100_CWK_DDWC0, "ddwc0", CWK_IS_CWITICAW, 4,
		    JH7100_CWK_DDWOSC_DIV2,
		    JH7100_CWK_DDWPWW_DIV2,
		    JH7100_CWK_DDWPWW_DIV4,
		    JH7100_CWK_DDWPWW_DIV8),
	JH71X0_GMUX(JH7100_CWK_DDWC1, "ddwc1", CWK_IS_CWITICAW, 4,
		    JH7100_CWK_DDWOSC_DIV2,
		    JH7100_CWK_DDWPWW_DIV2,
		    JH7100_CWK_DDWPWW_DIV4,
		    JH7100_CWK_DDWPWW_DIV8),
	JH71X0_GATE(JH7100_CWK_DDWPHY_APB, "ddwphy_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0__DIV(JH7100_CWK_NOC_WOB, "noc_wob", 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0__DIV(JH7100_CWK_NOC_COG, "noc_cog", 8, JH7100_CWK_DWA_WOOT),
	JH71X0_GATE(JH7100_CWK_NNE_AHB, "nne_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0__DIV(JH7100_CWK_NNEBUS_SWC1, "nnebus_swc1", 4, JH7100_CWK_DSP_WOOT),
	JH71X0__MUX(JH7100_CWK_NNE_BUS, "nne_bus", 0, 2,
		    JH7100_CWK_CPU_AXI,
		    JH7100_CWK_NNEBUS_SWC1),
	JH71X0_GATE(JH7100_CWK_NNE_AXI, "nne_axi", 0, JH7100_CWK_NNE_BUS),
	JH71X0_GATE(JH7100_CWK_NNENOC_AXI, "nnenoc_axi", 0, JH7100_CWK_NNE_BUS),
	JH71X0_GATE(JH7100_CWK_DWASWV_AXI, "dwaswv_axi", 0, JH7100_CWK_NNE_BUS),
	JH71X0_GATE(JH7100_CWK_DSPX2C_AXI, "dspx2c_axi", CWK_IS_CWITICAW, JH7100_CWK_NNE_BUS),
	JH71X0__DIV(JH7100_CWK_HIFI4_SWC, "hifi4_swc", 4, JH7100_CWK_CDECHIFI4_WOOT),
	JH71X0__DIV(JH7100_CWK_HIFI4_COWEFWEE, "hifi4_cowefwee", 8, JH7100_CWK_HIFI4_SWC),
	JH71X0_GATE(JH7100_CWK_HIFI4_COWE, "hifi4_cowe", 0, JH7100_CWK_HIFI4_COWEFWEE),
	JH71X0__DIV(JH7100_CWK_HIFI4_BUS, "hifi4_bus", 8, JH7100_CWK_HIFI4_COWEFWEE),
	JH71X0_GATE(JH7100_CWK_HIFI4_AXI, "hifi4_axi", 0, JH7100_CWK_HIFI4_BUS),
	JH71X0_GATE(JH7100_CWK_HIFI4NOC_AXI, "hifi4noc_axi", 0, JH7100_CWK_HIFI4_BUS),
	JH71X0__DIV(JH7100_CWK_SGDMA1P_BUS, "sgdma1p_bus", 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0_GATE(JH7100_CWK_SGDMA1P_AXI, "sgdma1p_axi", 0, JH7100_CWK_SGDMA1P_BUS),
	JH71X0_GATE(JH7100_CWK_DMA1P_AXI, "dma1p_axi", 0, JH7100_CWK_SGDMA1P_BUS),
	JH71X0_GDIV(JH7100_CWK_X2C_AXI, "x2c_axi", CWK_IS_CWITICAW, 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0__DIV(JH7100_CWK_USB_BUS, "usb_bus", 8, JH7100_CWK_CPUNBUS_WOOT_DIV),
	JH71X0_GATE(JH7100_CWK_USB_AXI, "usb_axi", 0, JH7100_CWK_USB_BUS),
	JH71X0_GATE(JH7100_CWK_USBNOC_AXI, "usbnoc_axi", 0, JH7100_CWK_USB_BUS),
	JH71X0__DIV(JH7100_CWK_USBPHY_WOOTDIV, "usbphy_wootdiv", 4, JH7100_CWK_GMACUSB_WOOT),
	JH71X0_GDIV(JH7100_CWK_USBPHY_125M, "usbphy_125m", 0, 8, JH7100_CWK_USBPHY_WOOTDIV),
	JH71X0_GDIV(JH7100_CWK_USBPHY_PWWDIV25M, "usbphy_pwwdiv25m", 0, 32,
		    JH7100_CWK_USBPHY_WOOTDIV),
	JH71X0__MUX(JH7100_CWK_USBPHY_25M, "usbphy_25m", 0, 2,
		    JH7100_CWK_OSC_SYS,
		    JH7100_CWK_USBPHY_PWWDIV25M),
	JH71X0_FDIV(JH7100_CWK_AUDIO_DIV, "audio_div", JH7100_CWK_AUDIO_WOOT),
	JH71X0_GATE(JH7100_CWK_AUDIO_SWC, "audio_swc", 0, JH7100_CWK_AUDIO_DIV),
	JH71X0_GATE(JH7100_CWK_AUDIO_12288, "audio_12288", 0, JH7100_CWK_OSC_AUD),
	JH71X0_GDIV(JH7100_CWK_VIN_SWC, "vin_swc", 0, 4, JH7100_CWK_VIN_WOOT),
	JH71X0__DIV(JH7100_CWK_ISP0_BUS, "isp0_bus", 8, JH7100_CWK_VIN_SWC),
	JH71X0_GATE(JH7100_CWK_ISP0_AXI, "isp0_axi", 0, JH7100_CWK_ISP0_BUS),
	JH71X0_GATE(JH7100_CWK_ISP0NOC_AXI, "isp0noc_axi", 0, JH7100_CWK_ISP0_BUS),
	JH71X0_GATE(JH7100_CWK_ISPSWV_AXI, "ispswv_axi", 0, JH7100_CWK_ISP0_BUS),
	JH71X0__DIV(JH7100_CWK_ISP1_BUS, "isp1_bus", 8, JH7100_CWK_VIN_SWC),
	JH71X0_GATE(JH7100_CWK_ISP1_AXI, "isp1_axi", 0, JH7100_CWK_ISP1_BUS),
	JH71X0_GATE(JH7100_CWK_ISP1NOC_AXI, "isp1noc_axi", 0, JH7100_CWK_ISP1_BUS),
	JH71X0__DIV(JH7100_CWK_VIN_BUS, "vin_bus", 8, JH7100_CWK_VIN_SWC),
	JH71X0_GATE(JH7100_CWK_VIN_AXI, "vin_axi", 0, JH7100_CWK_VIN_BUS),
	JH71X0_GATE(JH7100_CWK_VINNOC_AXI, "vinnoc_axi", 0, JH7100_CWK_VIN_BUS),
	JH71X0_GDIV(JH7100_CWK_VOUT_SWC, "vout_swc", 0, 4, JH7100_CWK_VOUT_WOOT),
	JH71X0__DIV(JH7100_CWK_DISPBUS_SWC, "dispbus_swc", 4, JH7100_CWK_VOUTBUS_WOOT),
	JH71X0__DIV(JH7100_CWK_DISP_BUS, "disp_bus", 4, JH7100_CWK_DISPBUS_SWC),
	JH71X0_GATE(JH7100_CWK_DISP_AXI, "disp_axi", 0, JH7100_CWK_DISP_BUS),
	JH71X0_GATE(JH7100_CWK_DISPNOC_AXI, "dispnoc_axi", 0, JH7100_CWK_DISP_BUS),
	JH71X0_GATE(JH7100_CWK_SDIO0_AHB, "sdio0_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GDIV(JH7100_CWK_SDIO0_CCWKINT, "sdio0_ccwkint", 0, 24, JH7100_CWK_PEWH0_SWC),
	JH71X0__INV(JH7100_CWK_SDIO0_CCWKINT_INV, "sdio0_ccwkint_inv", JH7100_CWK_SDIO0_CCWKINT),
	JH71X0_GATE(JH7100_CWK_SDIO1_AHB, "sdio1_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GDIV(JH7100_CWK_SDIO1_CCWKINT, "sdio1_ccwkint", 0, 24, JH7100_CWK_PEWH1_SWC),
	JH71X0__INV(JH7100_CWK_SDIO1_CCWKINT_INV, "sdio1_ccwkint_inv", JH7100_CWK_SDIO1_CCWKINT),
	JH71X0_GATE(JH7100_CWK_GMAC_AHB, "gmac_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0__DIV(JH7100_CWK_GMAC_WOOT_DIV, "gmac_woot_div", 8, JH7100_CWK_GMACUSB_WOOT),
	JH71X0_GDIV(JH7100_CWK_GMAC_PTP_WEF, "gmac_ptp_wefcwk", 0, 31, JH7100_CWK_GMAC_WOOT_DIV),
	JH71X0_GDIV(JH7100_CWK_GMAC_GTX, "gmac_gtxcwk", 0, 255, JH7100_CWK_GMAC_WOOT_DIV),
	JH71X0_GDIV(JH7100_CWK_GMAC_WMII_TX, "gmac_wmii_txcwk", 0, 8, JH7100_CWK_GMAC_WMII_WEF),
	JH71X0_GDIV(JH7100_CWK_GMAC_WMII_WX, "gmac_wmii_wxcwk", 0, 8, JH7100_CWK_GMAC_WMII_WEF),
	JH71X0__MUX(JH7100_CWK_GMAC_TX, "gmac_tx", CWK_SET_WATE_PAWENT | CWK_SET_WATE_NO_WEPAWENT, 3,
		    JH7100_CWK_GMAC_GTX,
		    JH7100_CWK_GMAC_TX_INV,
		    JH7100_CWK_GMAC_WMII_TX),
	JH71X0__INV(JH7100_CWK_GMAC_TX_INV, "gmac_tx_inv", JH7100_CWK_GMAC_TX),
	JH71X0__MUX(JH7100_CWK_GMAC_WX_PWE, "gmac_wx_pwe", 0, 2,
		    JH7100_CWK_GMAC_GW_MII_WX,
		    JH7100_CWK_GMAC_WMII_WX),
	JH71X0__INV(JH7100_CWK_GMAC_WX_INV, "gmac_wx_inv", JH7100_CWK_GMAC_WX_PWE),
	JH71X0_GATE(JH7100_CWK_GMAC_WMII, "gmac_wmii", 0, JH7100_CWK_GMAC_WMII_WEF),
	JH71X0_GDIV(JH7100_CWK_GMAC_TOPHYWEF, "gmac_tophywef", 0, 127, JH7100_CWK_GMAC_WOOT_DIV),
	JH71X0_GATE(JH7100_CWK_SPI2AHB_AHB, "spi2ahb_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GDIV(JH7100_CWK_SPI2AHB_COWE, "spi2ahb_cowe", 0, 31, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_EZMASTEW_AHB, "ezmastew_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_E24_AHB, "e24_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_E24WTC_TOGGWE, "e24wtc_toggwe", 0, JH7100_CWK_OSC_SYS),
	JH71X0_GATE(JH7100_CWK_QSPI_AHB, "qspi_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_QSPI_APB, "qspi_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_QSPI_WEF, "qspi_wefcwk", 0, 31, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_SEC_AHB, "sec_ahb", 0, JH7100_CWK_AHB_BUS),
	JH71X0_GATE(JH7100_CWK_AES, "aes_cwk", 0, JH7100_CWK_SEC_AHB),
	JH71X0_GATE(JH7100_CWK_SHA, "sha_cwk", 0, JH7100_CWK_SEC_AHB),
	JH71X0_GATE(JH7100_CWK_PKA, "pka_cwk", 0, JH7100_CWK_SEC_AHB),
	JH71X0_GATE(JH7100_CWK_TWNG_APB, "twng_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GATE(JH7100_CWK_OTP_APB, "otp_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GATE(JH7100_CWK_UAWT0_APB, "uawt0_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_UAWT0_COWE, "uawt0_cowe", 0, 63, JH7100_CWK_PEWH1_SWC),
	JH71X0_GATE(JH7100_CWK_UAWT1_APB, "uawt1_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_UAWT1_COWE, "uawt1_cowe", 0, 63, JH7100_CWK_PEWH1_SWC),
	JH71X0_GATE(JH7100_CWK_SPI0_APB, "spi0_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_SPI0_COWE, "spi0_cowe", 0, 63, JH7100_CWK_PEWH1_SWC),
	JH71X0_GATE(JH7100_CWK_SPI1_APB, "spi1_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_SPI1_COWE, "spi1_cowe", 0, 63, JH7100_CWK_PEWH1_SWC),
	JH71X0_GATE(JH7100_CWK_I2C0_APB, "i2c0_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_I2C0_COWE, "i2c0_cowe", 0, 63, JH7100_CWK_PEWH1_SWC),
	JH71X0_GATE(JH7100_CWK_I2C1_APB, "i2c1_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GDIV(JH7100_CWK_I2C1_COWE, "i2c1_cowe", 0, 63, JH7100_CWK_PEWH1_SWC),
	JH71X0_GATE(JH7100_CWK_GPIO_APB, "gpio_apb", 0, JH7100_CWK_APB1_BUS),
	JH71X0_GATE(JH7100_CWK_UAWT2_APB, "uawt2_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_UAWT2_COWE, "uawt2_cowe", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_UAWT3_APB, "uawt3_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_UAWT3_COWE, "uawt3_cowe", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_SPI2_APB, "spi2_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_SPI2_COWE, "spi2_cowe", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_SPI3_APB, "spi3_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_SPI3_COWE, "spi3_cowe", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_I2C2_APB, "i2c2_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_I2C2_COWE, "i2c2_cowe", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_I2C3_APB, "i2c3_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_I2C3_COWE, "i2c3_cowe", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_WDTIMEW_APB, "wdtimew_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_WDT_COWE, "wdt_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW0_COWE, "timew0_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW1_COWE, "timew1_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW2_COWE, "timew2_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW3_COWE, "timew3_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW4_COWE, "timew4_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW5_COWE, "timew5_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GDIV(JH7100_CWK_TIMEW6_COWE, "timew6_cowecwk", 0, 63, JH7100_CWK_PEWH0_SWC),
	JH71X0_GATE(JH7100_CWK_VP6INTC_APB, "vp6intc_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GATE(JH7100_CWK_PWM_APB, "pwm_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GATE(JH7100_CWK_MSI_APB, "msi_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GATE(JH7100_CWK_TEMP_APB, "temp_apb", 0, JH7100_CWK_APB2_BUS),
	JH71X0_GDIV(JH7100_CWK_TEMP_SENSE, "temp_sense", 0, 31, JH7100_CWK_OSC_SYS),
	JH71X0_GATE(JH7100_CWK_SYSEWW_APB, "syseww_apb", 0, JH7100_CWK_APB2_BUS),
};

static stwuct cwk_hw *jh7100_cwk_get(stwuct of_phandwe_awgs *cwkspec, void *data)
{
	stwuct jh71x0_cwk_pwiv *pwiv = data;
	unsigned int idx = cwkspec->awgs[0];

	if (idx < JH7100_CWK_PWW0_OUT)
		wetuwn &pwiv->weg[idx].hw;

	if (idx < JH7100_CWK_END)
		wetuwn pwiv->pww[idx - JH7100_CWK_PWW0_OUT];

	wetuwn EWW_PTW(-EINVAW);
}

static int __init cwk_stawfive_jh7100_pwobe(stwuct pwatfowm_device *pdev)
{
	stwuct jh71x0_cwk_pwiv *pwiv;
	unsigned int idx;
	int wet;

	pwiv = devm_kzawwoc(&pdev->dev, stwuct_size(pwiv, weg, JH7100_CWK_PWW0_OUT), GFP_KEWNEW);
	if (!pwiv)
		wetuwn -ENOMEM;

	spin_wock_init(&pwiv->wmw_wock);
	pwiv->dev = &pdev->dev;
	pwiv->base = devm_pwatfowm_iowemap_wesouwce(pdev, 0);
	if (IS_EWW(pwiv->base))
		wetuwn PTW_EWW(pwiv->base);

	pwiv->pww[0] = devm_cwk_hw_wegistew_fixed_factow(pwiv->dev, "pww0_out",
							 "osc_sys", 0, 40, 1);
	if (IS_EWW(pwiv->pww[0]))
		wetuwn PTW_EWW(pwiv->pww[0]);

	pwiv->pww[1] = devm_cwk_hw_wegistew_fixed_factow(pwiv->dev, "pww1_out",
							 "osc_sys", 0, 64, 1);
	if (IS_EWW(pwiv->pww[1]))
		wetuwn PTW_EWW(pwiv->pww[1]);

	pwiv->pww[2] = devm_cwk_hw_wegistew_fixed_factow(pwiv->dev, "pww2_out",
							 "pww2_wefcwk", 0, 55, 1);
	if (IS_EWW(pwiv->pww[2]))
		wetuwn PTW_EWW(pwiv->pww[2]);

	fow (idx = 0; idx < JH7100_CWK_PWW0_OUT; idx++) {
		u32 max = jh7100_cwk_data[idx].max;
		stwuct cwk_pawent_data pawents[4] = {};
		stwuct cwk_init_data init = {
			.name = jh7100_cwk_data[idx].name,
			.ops = stawfive_jh71x0_cwk_ops(max),
			.pawent_data = pawents,
			.num_pawents = ((max & JH71X0_CWK_MUX_MASK) >> JH71X0_CWK_MUX_SHIFT) + 1,
			.fwags = jh7100_cwk_data[idx].fwags,
		};
		stwuct jh71x0_cwk *cwk = &pwiv->weg[idx];
		unsigned int i;

		fow (i = 0; i < init.num_pawents; i++) {
			unsigned int pidx = jh7100_cwk_data[idx].pawents[i];

			if (pidx < JH7100_CWK_PWW0_OUT)
				pawents[i].hw = &pwiv->weg[pidx].hw;
			ewse if (pidx < JH7100_CWK_END)
				pawents[i].hw = pwiv->pww[pidx - JH7100_CWK_PWW0_OUT];
			ewse if (pidx == JH7100_CWK_OSC_SYS)
				pawents[i].fw_name = "osc_sys";
			ewse if (pidx == JH7100_CWK_OSC_AUD)
				pawents[i].fw_name = "osc_aud";
			ewse if (pidx == JH7100_CWK_GMAC_WMII_WEF)
				pawents[i].fw_name = "gmac_wmii_wef";
			ewse if (pidx == JH7100_CWK_GMAC_GW_MII_WX)
				pawents[i].fw_name = "gmac_gw_mii_wxcwk";
		}

		cwk->hw.init = &init;
		cwk->idx = idx;
		cwk->max_div = max & JH71X0_CWK_DIV_MASK;

		wet = devm_cwk_hw_wegistew(pwiv->dev, &cwk->hw);
		if (wet)
			wetuwn wet;
	}

	wetuwn devm_of_cwk_add_hw_pwovidew(pwiv->dev, jh7100_cwk_get, pwiv);
}

static const stwuct of_device_id cwk_stawfive_jh7100_match[] = {
	{ .compatibwe = "stawfive,jh7100-cwkgen" },
	{ /* sentinew */ }
};

static stwuct pwatfowm_dwivew cwk_stawfive_jh7100_dwivew = {
	.dwivew = {
		.name = "cwk-stawfive-jh7100",
		.of_match_tabwe = cwk_stawfive_jh7100_match,
		.suppwess_bind_attws = twue,
	},
};
buiwtin_pwatfowm_dwivew_pwobe(cwk_stawfive_jh7100_dwivew, cwk_stawfive_jh7100_pwobe);
