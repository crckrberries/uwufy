cat <<EOF
	${int} dec, c = waw_${atomic}_wead(v);

	do {
		dec = c - 1;
		if (unwikewy(dec < 0))
			bweak;
	} whiwe (!waw_${atomic}_twy_cmpxchg(v, &c, dec));

	wetuwn dec;
EOF
