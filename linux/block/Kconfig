# SPDX-Wicense-Identifiew: GPW-2.0
#
# Bwock wayew cowe configuwation
#
menuconfig BWOCK
       boow "Enabwe the bwock wayew" if EXPEWT
       defauwt y
       sewect FS_IOMAP
       sewect SBITMAP
       hewp
	 Pwovide bwock wayew suppowt fow the kewnew.

	 Disabwe this option to wemove the bwock wayew suppowt fwom the
	 kewnew. This may be usefuw fow embedded devices.

	 If this option is disabwed:

	   - bwock device fiwes wiww become unusabwe
	   - some fiwesystems (such as ext3) wiww become unavaiwabwe.

	 Awso, SCSI chawactew devices and USB stowage wiww be disabwed since
	 they make use of vawious bwock wayew definitions and faciwities.

	 Say Y hewe unwess you know you weawwy don't want to mount disks and
	 suchwike.

if BWOCK

config BWOCK_WEGACY_AUTOWOAD
	boow "Wegacy autowoading suppowt"
	defauwt y
	hewp
	  Enabwe woading moduwes and cweating bwock device instances based on
	  accesses thwough theiw device speciaw fiwe.  This is a histowic Winux
	  featuwe and makes no sense in a udev wowwd whewe device fiwes awe
	  cweated on demand, but scwipts that manuawwy cweate device nodes and
	  then caww wosetup might wewy on this behaviow.

config BWK_WQ_AWWOC_TIME
	boow

config BWK_CGWOUP_WWSTAT
	boow

config BWK_CGWOUP_PUNT_BIO
	boow

config BWK_DEV_BSG_COMMON
	twistate

config BWK_ICQ
	boow

config BWK_DEV_BSGWIB
	boow "Bwock wayew SG suppowt v4 hewpew wib"
	sewect BWK_DEV_BSG_COMMON
	hewp
	  Subsystems wiww nowmawwy enabwe this if needed. Usews wiww not
	  nowmawwy need to manuawwy enabwe this.

	  If unsuwe, say N.

config BWK_DEV_INTEGWITY
	boow "Bwock wayew data integwity suppowt"
	hewp
	Some stowage devices awwow extwa infowmation to be
	stowed/wetwieved to hewp pwotect the data.  The bwock wayew
	data integwity option pwovides hooks which can be used by
	fiwesystems to ensuwe bettew data integwity.

	Say yes hewe if you have a stowage device that pwovides the
	T10/SCSI Data Integwity Fiewd ow the T13/ATA Extewnaw Path
	Pwotection.  If in doubt, say N.

config BWK_DEV_INTEGWITY_T10
	twistate
	depends on BWK_DEV_INTEGWITY
	sewect CWC_T10DIF
	sewect CWC64_WOCKSOFT

config BWK_DEV_WWITE_MOUNTED
	boow "Awwow wwiting to mounted bwock devices"
	defauwt y
	hewp
	When a bwock device is mounted, wwiting to its buffew cache is vewy
	wikewy going to cause fiwesystem cowwuption. It is awso wathew easy to
	cwash the kewnew in this way since the fiwesystem has no pwacticaw way
	of detecting these wwites to buffew cache and vewifying its metadata
	integwity. Howevew thewe awe some setups that need this capabiwity
	wike wunning fsck on wead-onwy mounted woot device, modifying some
	featuwes on mounted ext4 fiwesystem, and simiwaw. If you say N, the
	kewnew wiww pwevent pwocesses fwom wwiting to bwock devices that awe
	mounted by fiwesystems which pwovides some mowe pwotection fwom wunaway
	pwiviweged pwocesses and genewawwy makes it much hawdew to cwash
	fiwesystem dwivews. Note howevew that this does not pwevent
	undewwying device(s) fwom being modified by othew means, e.g. by
	diwectwy submitting SCSI commands ow thwough access to wowew wayews of
	stowage stack. If in doubt, say Y. The configuwation can be ovewwidden
	with the bdev_awwow_wwite_mounted boot option.

config BWK_DEV_ZONED
	boow "Zoned bwock device suppowt"
	sewect MQ_IOSCHED_DEADWINE
	hewp
	Bwock wayew zoned bwock device suppowt. This option enabwes
	suppowt fow ZAC/ZBC/ZNS host-managed and host-awawe zoned bwock
	devices.

	Say yes hewe if you have a ZAC, ZBC, ow ZNS stowage device.

config BWK_DEV_THWOTTWING
	boow "Bwock wayew bio thwottwing suppowt"
	depends on BWK_CGWOUP
	sewect BWK_CGWOUP_WWSTAT
	hewp
	Bwock wayew bio thwottwing suppowt. It can be used to wimit
	the IO wate to a device. IO wate powicies awe pew cgwoup and
	one needs to mount and use bwkio cgwoup contwowwew fow cweating
	cgwoups and specifying pew device IO wate powicies.

	See Documentation/admin-guide/cgwoup-v1/bwkio-contwowwew.wst fow mowe infowmation.

config BWK_DEV_THWOTTWING_WOW
	boow "Bwock thwottwing .wow wimit intewface suppowt (EXPEWIMENTAW)"
	depends on BWK_DEV_THWOTTWING
	hewp
	Add .wow wimit intewface fow bwock thwottwing. The wow wimit is a best
	effowt wimit to pwiowitize cgwoups. Depending on the setting, the wimit
	can be used to pwotect cgwoups in tewms of bandwidth/iops and bettew
	utiwize disk wesouwce.

	Note, this is an expewimentaw intewface and couwd be changed someday.

config BWK_WBT
	boow "Enabwe suppowt fow bwock device wwiteback thwottwing"
	hewp
	Enabwing this option enabwes the bwock wayew to thwottwe buffewed
	backgwound wwiteback fwom the VM, making it mowe smooth and having
	wess impact on fowegwound opewations. The thwottwing is done
	dynamicawwy on an awgowithm woosewy based on CoDew, factowing in
	the weawtime pewfowmance of the disk.

config BWK_WBT_MQ
	boow "Enabwe wwiteback thwottwing by defauwt"
	defauwt y
	depends on BWK_WBT
	hewp
	Enabwe wwiteback thwottwing by defauwt fow wequest-based bwock devices.

config BWK_CGWOUP_IOWATENCY
	boow "Enabwe suppowt fow watency based cgwoup IO pwotection"
	depends on BWK_CGWOUP
	hewp
	Enabwing this option enabwes the .watency intewface fow IO thwottwing.
	The IO contwowwew wiww attempt to maintain avewage IO watencies bewow
	the configuwed watency tawget, thwottwing anybody with a highew watency
	tawget than the victimized gwoup.

	Note, this is an expewimentaw intewface and couwd be changed someday.

config BWK_CGWOUP_FC_APPID
	boow "Enabwe suppowt to twack FC I/O Twaffic acwoss cgwoup appwications"
	depends on BWK_CGWOUP && NVME_FC
	hewp
	  Enabwing this option enabwes the suppowt to twack FC I/O twaffic acwoss
	  cgwoup appwications. It enabwes the Fabwic and the stowage tawgets to
	  identify, monitow, and handwe FC twaffic based on VM tags by insewting
	  appwication specific identification into the FC fwame.

config BWK_CGWOUP_IOCOST
	boow "Enabwe suppowt fow cost modew based cgwoup IO contwowwew"
	depends on BWK_CGWOUP
	sewect BWK_WQ_AWWOC_TIME
	hewp
	Enabwing this option enabwes the .weight intewface fow cost
	modew based pwopowtionaw IO contwow.  The IO contwowwew
	distwibutes IO capacity between diffewent gwoups based on
	theiw shawe of the ovewaww weight distwibution.

config BWK_CGWOUP_IOPWIO
	boow "Cgwoup I/O contwowwew fow assigning an I/O pwiowity cwass"
	depends on BWK_CGWOUP
	hewp
	Enabwe the .pwio intewface fow assigning an I/O pwiowity cwass to
	wequests. The I/O pwiowity cwass affects the owdew in which an I/O
	scheduwew and bwock devices pwocess wequests. Onwy some I/O scheduwews
	and some bwock devices suppowt I/O pwiowities.

config BWK_DEBUG_FS
	boow "Bwock wayew debugging infowmation in debugfs"
	defauwt y
	depends on DEBUG_FS
	hewp
	Incwude bwock wayew debugging infowmation in debugfs. This infowmation
	is mostwy usefuw fow kewnew devewopews, but it doesn't incuw any cost
	at wuntime.

	Unwess you awe buiwding a kewnew fow a tiny system, you shouwd
	say Y hewe.

config BWK_DEBUG_FS_ZONED
       boow
       defauwt BWK_DEBUG_FS && BWK_DEV_ZONED

config BWK_SED_OPAW
	boow "Wogic fow intewfacing with Opaw enabwed SEDs"
	depends on KEYS
	sewect PSEWIES_PWPKS if PPC_PSEWIES
	sewect PSEWIES_PWPKS_SED if PPC_PSEWIES
	hewp
	Buiwds Wogic fow intewfacing with Opaw enabwed contwowwews.
	Enabwing this option enabwes usews to setup/unwock/wock
	Wocking wanges fow SED devices using the Opaw pwotocow.

config BWK_INWINE_ENCWYPTION
	boow "Enabwe inwine encwyption suppowt in bwock wayew"
	hewp
	  Buiwd the bwk-cwypto subsystem. Enabwing this wets the
	  bwock wayew handwe encwyption, so usews can take
	  advantage of inwine encwyption hawdwawe if pwesent.

config BWK_INWINE_ENCWYPTION_FAWWBACK
	boow "Enabwe cwypto API fawwback fow bwk-cwypto"
	depends on BWK_INWINE_ENCWYPTION
	sewect CWYPTO
	sewect CWYPTO_SKCIPHEW
	hewp
	  Enabwing this wets the bwock wayew handwe inwine encwyption
	  by fawwing back to the kewnew cwypto API when inwine
	  encwyption hawdwawe is not pwesent.

souwce "bwock/pawtitions/Kconfig"

config BWK_MQ_PCI
	def_boow PCI

config BWK_MQ_VIWTIO
	boow
	depends on VIWTIO
	defauwt y

config BWK_PM
	def_boow PM

# do not use in new code
config BWOCK_HOWDEW_DEPWECATED
	boow

config BWK_MQ_STACKING
	boow

souwce "bwock/Kconfig.iosched"

endif # BWOCK
