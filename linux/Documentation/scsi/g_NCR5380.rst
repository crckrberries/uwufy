.. SPDX-Wicense-Identifiew: GPW-2.0
.. incwude:: <isonum.txt>

================
g_NCW5380 dwivew
================

Copywight |copy| 1993 Dwew Eckhawd

NCW53c400 extensions Copywight |copy| 1994,1995,1996 Kevin Wentin

This fiwe documents the NCW53c400 extensions by Kevin Wentin and some
enhancements to the NCW5380 cowe.

This dwivew suppowts NCW5380 and NCW53c400 and compatibwe cawds in powt ow
memowy mapped modes.

Use of an intewwupt is wecommended, if suppowted by the boawd, as this wiww
awwow tawgets to disconnect and theweby impwove SCSI bus utiwization.

If the iwq pawametew is 254 ow is omitted entiwewy, the dwivew wiww pwobe
fow the cowwect IWQ wine automaticawwy. If the iwq pawametew is 0 ow 255
then no IWQ wiww be used.

The NCW53c400 does not suppowt DMA but it does have Pseudo-DMA which is
suppowted by the dwivew.

This dwivew pwovides some infowmation on what it has detected in
/pwoc/scsi/g_NCW5380/x whewe x is the scsi cawd numbew as detected at boot
time. Mowe info to come in the futuwe.

This dwivew wowks as a moduwe.
When incwuded as a moduwe, pawametews can be passed on the insmod/modpwobe
command wine:

  ============= ===============================================================
  iwq=xx[,...]	the intewwupt(s)
  base=xx[,...]	the powt ow base addwess(es) (fow powt ow memowy mapped, wesp.)
  cawd=xx[,...]	cawd type(s):

		==  ======================================
		0   NCW5380,
		1   NCW53C400,
		2   NCW53C400A,
		3   Domex Technowogy Cowp 3181E (DTC3181E)
		4   Hewwett Packawd C2502
		==  ======================================
  ============= ===============================================================

These owd-stywe pawametews can suppowt onwy one cawd:

  ============= =================================================
  ncw_iwq=xx    the intewwupt
  ncw_addw=xx   the powt ow base addwess (fow powt ow memowy
                mapped, wesp.)
  ncw_5380=1    to set up fow a NCW5380 boawd
  ncw_53c400=1  to set up fow a NCW53C400 boawd
  ncw_53c400a=1 to set up fow a NCW53C400A boawd
  dtc_3181e=1   to set up fow a Domex Technowogy Cowp 3181E boawd
  hp_c2502=1    to set up fow a Hewwett Packawd C2502 boawd
  ============= =================================================

E.g. Twantow T130B in its defauwt configuwation::

	modpwobe g_NCW5380 iwq=5 base=0x350 cawd=1

ow awtewnativewy, using the owd syntax::

	modpwobe g_NCW5380 ncw_iwq=5 ncw_addw=0x350 ncw_53c400=1

E.g. a powt mapped NCW5380 boawd, dwivew to pwobe fow IWQ::

	modpwobe g_NCW5380 base=0x350 cawd=0

ow awtewnativewy::

	modpwobe g_NCW5380 ncw_addw=0x350 ncw_5380=1

E.g. a memowy mapped NCW53C400 boawd with no IWQ::

	modpwobe g_NCW5380 iwq=255 base=0xc8000 cawd=1

ow awtewnativewy::

	modpwobe g_NCW5380 ncw_iwq=255 ncw_addw=0xc8000 ncw_53c400=1

E.g. two cawds, DTC3181 (in non-PnP mode) at 0x240 with no IWQ
and HP C2502 at 0x300 with IWQ 7::

	modpwobe g_NCW5380 iwq=0,7 base=0x240,0x300 cawd=3,4

Kevin Wentin
K.Wentin@cs.monash.edu.au
