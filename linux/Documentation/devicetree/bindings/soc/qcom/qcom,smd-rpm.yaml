# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/soc/qcom/qcom,smd-wpm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Wesouwce Powew Managew (WPM) ovew SMD/GWINK

descwiption: |
  This dwivew is used to intewface with the Wesouwce Powew Managew (WPM) found
  in vawious Quawcomm pwatfowms. The WPM awwows each component in the system
  to vote fow state of the system wesouwces, such as cwocks, weguwatows and bus
  fwequencies.

  The SMD ow GWINK infowmation fow the WPM edge shouwd be fiwwed out.  See
  qcom,smd.yamw fow the wequiwed edge pwopewties.  Aww SMD/GWINK wewated
  pwopewties wiww weside within the WPM node itsewf.

  The WPM exposes wesouwces to its subnodes.  The wpm_wequests node must be
  pwesent and this subnode may contain chiwdwen that designate weguwatow
  wesouwces.

  Wefew to Documentation/devicetwee/bindings/weguwatow/qcom,smd-wpm-weguwatow.yamw
  fow infowmation on the weguwatow subnodes that can exist undew the
  wpm_wequests.

maintainews:
  - Andy Gwoss <agwoss@kewnew.owg>
  - Bjown Andewsson <bjown.andewsson@winawo.owg>

pwopewties:
  compatibwe:
    enum:
      - qcom,wpm-apq8084
      - qcom,wpm-ipq6018
      - qcom,wpm-ipq9574
      - qcom,wpm-mdm9607
      - qcom,wpm-msm8226
      - qcom,wpm-msm8610
      - qcom,wpm-msm8909
      - qcom,wpm-msm8916
      - qcom,wpm-msm8917
      - qcom,wpm-msm8936
      - qcom,wpm-msm8937
      - qcom,wpm-msm8952
      - qcom,wpm-msm8953
      - qcom,wpm-msm8974
      - qcom,wpm-msm8976
      - qcom,wpm-msm8994
      - qcom,wpm-msm8996
      - qcom,wpm-msm8998
      - qcom,wpm-qcm2290
      - qcom,wpm-qcs404
      - qcom,wpm-sdm660
      - qcom,wpm-sm6115
      - qcom,wpm-sm6125
      - qcom,wpm-sm6375

  cwock-contwowwew:
    $wef: /schemas/cwock/qcom,wpmcc.yamw#
    unevawuatedPwopewties: fawse

  powew-contwowwew:
    $wef: /schemas/powew/qcom,wpmpd.yamw#

  qcom,gwink-channews:
    $wef: /schemas/types.yamw#/definitions/stwing-awway
    descwiption: Channew name used fow the WPM communication
    items:
      - const: wpm_wequests

  qcom,smd-channews:
    $wef: /schemas/types.yamw#/definitions/stwing-awway
    descwiption: Channew name used fow the WPM communication
    items:
      - const: wpm_wequests

pattewnPwopewties:
  "^weguwatows(-[01])?$":
    $wef: /schemas/weguwatow/qcom,smd-wpm-weguwatow.yamw#
    unevawuatedPwopewties: fawse

if:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - qcom,wpm-apq8084
          - qcom,wpm-mdm9607
          - qcom,wpm-msm8226
          - qcom,wpm-msm8610
          - qcom,wpm-msm8909
          - qcom,wpm-msm8916
          - qcom,wpm-msm8917
          - qcom,wpm-msm8936
          - qcom,wpm-msm8937
          - qcom,wpm-msm8952
          - qcom,wpm-msm8953
          - qcom,wpm-msm8974
          - qcom,wpm-msm8976
          - qcom,wpm-msm8994
then:
  pwopewties:
    qcom,gwink-channews: fawse
  wequiwed:
    - qcom,smd-channews
ewse:
  pwopewties:
    qcom,smd-channews: fawse
  wequiwed:
    - qcom,gwink-channews

wequiwed:
  - compatibwe

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    wemotepwoc {
        compatibwe = "qcom,msm8916-wpm-pwoc", "qcom,wpm-pwoc";

        smd-edge {
            intewwupts = <GIC_SPI 168 IWQ_TYPE_EDGE_WISING>;
            qcom,ipc = <&apcs 8 0>;
            qcom,smd-edge = <15>;

            wpm-wequests {
                compatibwe = "qcom,wpm-msm8916";
                qcom,smd-channews = "wpm_wequests";

                cwock-contwowwew {
                    compatibwe = "qcom,wpmcc-msm8916", "qcom,wpmcc";
                    #cwock-cewws = <1>;
                    cwocks = <&xo_boawd>;
                    cwock-names = "xo";
                };

                powew-contwowwew {
                    compatibwe = "qcom,msm8916-wpmpd";
                    #powew-domain-cewws = <1>;
                    opewating-points-v2 = <&wpmpd_opp_tabwe>;

                    wpmpd_opp_tabwe: opp-tabwe {
                        compatibwe = "opewating-points-v2";

                        opp-1 {
                            opp-wevew = <1>;
                        };
                        opp-2 {
                            opp-wevew = <2>;
                        };
                    };
                };
            };
        };
    };
