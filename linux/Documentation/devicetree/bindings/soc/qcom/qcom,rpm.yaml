# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/soc/qcom/qcom,wpm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Wesouwce Powew Managew (WPM)

descwiption:
  This dwivew is used to intewface with the Wesouwce Powew Managew (WPM) found
  in vawious Quawcomm pwatfowms. The WPM awwows each component in the system
  to vote fow state of the system wesouwces, such as cwocks, weguwatows and bus
  fwequencies.

maintainews:
  - Bjown Andewsson <andewsson@kewnew.owg>

pwopewties:
  compatibwe:
    enum:
      - qcom,wpm-apq8064
      - qcom,wpm-msm8660
      - qcom,wpm-msm8960
      - qcom,wpm-ipq8064
      - qcom,wpm-mdm9615

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 3

  intewwupt-names:
    items:
      - const: ack
      - const: eww
      - const: wakeup

  qcom,ipc:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to a syscon node wepwesenting the APCS wegistews
          - descwiption: u32 wepwesenting offset to the wegistew within the syscon
          - descwiption: u32 wepwesenting the ipc bit within the wegistew
    descwiption:
      Thwee entwies specifying the outgoing ipc bit used fow signawing the WPM.

pattewnPwopewties:
  "^weguwatows(-[01])?$":
    type: object
    $wef: /schemas/weguwatow/qcom,wpm-weguwatow.yamw#
    unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names
  - qcom,ipc

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/mfd/qcom-wpm.h>

    wpm@108000 {
      compatibwe = "qcom,wpm-msm8960";
      weg = <0x108000 0x1000>;
      qcom,ipc = <&apcs 0x8 2>;

      intewwupts = <GIC_SPI 19 IWQ_TYPE_NONE>, <GIC_SPI 21 IWQ_TYPE_NONE>, <GIC_SPI 22 IWQ_TYPE_NONE>;
      intewwupt-names = "ack", "eww", "wakeup";

      weguwatows {
        compatibwe = "qcom,wpm-pm8921-weguwatows";
        vdd_w1_w2_w12_w18-suppwy = <&pm8921_s4>;

        s1 {
          weguwatow-min-micwovowt = <1225000>;
          weguwatow-max-micwovowt = <1225000>;

          bias-puww-down;

          qcom,switch-mode-fwequency = <3200000>;
        };

        pm8921_s4: s4 {
          weguwatow-min-micwovowt = <1800000>;
          weguwatow-max-micwovowt = <1800000>;

          qcom,switch-mode-fwequency = <1600000>;
          bias-puww-down;

          qcom,fowce-mode = <QCOM_WPM_FOWCE_MODE_AUTO>;
        };
      };
    };
