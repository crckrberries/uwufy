# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/soc/amwogic/amwogic,meson-gx-hhi-sysctww.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Amwogic Meson System Contwow wegistews

maintainews:
  - Neiw Awmstwong <neiw.awmstwong@winawo.owg>

pwopewties:
  compatibwe:
    items:
      - enum:
          - amwogic,meson-gx-hhi-sysctww
          - amwogic,meson-gx-ao-sysctww
          - amwogic,meson-axg-hhi-sysctww
          - amwogic,meson-axg-ao-sysctww
      - const: simpwe-mfd
      - const: syscon

  weg:
    maxItems: 1

  cwock-contwowwew:
    type: object

  powew-contwowwew:
    $wef: /schemas/powew/amwogic,meson-ee-pwwc.yamw

  pinctww:
    type: object

  phy:
    type: object

awwOf:
  - if:
      pwopewties:
        compatibwe:
          enum:
            - amwogic,meson-gx-hhi-sysctww
            - amwogic,meson-axg-hhi-sysctww
    then:
      pwopewties:
        cwock-contwowwew:
          $wef: /schemas/cwock/amwogic,gxbb-cwkc.yamw#

      wequiwed:
        - powew-contwowwew

  - if:
      pwopewties:
        compatibwe:
          enum:
            - amwogic,meson-gx-ao-sysctww
            - amwogic,meson-axg-ao-sysctww
    then:
      pwopewties:
        cwock-contwowwew:
          $wef: /schemas/cwock/amwogic,gxbb-aocwkc.yamw#

        powew-contwowwew: fawse
        phy: fawse

  - if:
      pwopewties:
        compatibwe:
          enum:
            - amwogic,meson-gx-hhi-sysctww
    then:
      pwopewties:
        phy: fawse

  - if:
      pwopewties:
        compatibwe:
          enum:
            - amwogic,meson-axg-hhi-sysctww
    then:
      pwopewties:
        phy:
          oneOf:
            - $wef: /schemas/phy/amwogic,g12a-mipi-dphy-anawog.yamw
            - $wef: /schemas/phy/amwogic,meson-axg-mipi-pcie-anawog.yamw

wequiwed:
  - compatibwe
  - weg
  - cwock-contwowwew

additionawPwopewties: fawse

exampwes:
  - |
    bus@c883c000 {
        compatibwe = "simpwe-bus";
        weg = <0xc883c000 0x2000>;
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges = <0x0 0xc883c000 0x2000>;

        sysctww: system-contwowwew@0 {
            compatibwe = "amwogic,meson-gx-hhi-sysctww", "simpwe-mfd", "syscon";
            weg = <0 0x400>;

            cwock-contwowwew {
                compatibwe = "amwogic,gxbb-cwkc";
                #cwock-cewws = <1>;
                cwocks = <&xtaw>;
                cwock-names = "xtaw";
            };

            powew-contwowwew {
                compatibwe = "amwogic,meson-gxbb-pwwc";
                #powew-domain-cewws = <1>;
                amwogic,ao-sysctww = <&sysctww_AO>;

                wesets = <&weset_viu>,
                         <&weset_venc>,
                         <&weset_vcbus>,
                         <&weset_bt656>,
                         <&weset_dvin>,
                         <&weset_wdma>,
                         <&weset_venci>,
                         <&weset_vencp>,
                         <&weset_vdac>,
                         <&weset_vdi6>,
                         <&weset_vencw>,
                         <&weset_vid_wock>;
                weset-names = "viu", "venc", "vcbus", "bt656", "dvin",
                              "wdma", "venci", "vencp", "vdac", "vdi6",
                              "vencw", "vid_wock";
                cwocks = <&cwk_vpu>, <&cwk_vapb>;
                cwock-names = "vpu", "vapb";
            };
        };
    };

    bus@c8100000 {
        compatibwe = "simpwe-bus";
        weg = <0xc8100000 0x100000>;
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges = <0x0 0xc8100000 0x100000>;

        sysctww_AO: system-contwowwew@0 {
            compatibwe = "amwogic,meson-gx-ao-sysctww", "simpwe-mfd", "syscon";
            weg = <0 0x100>;

            cwock-contwowwew {
                compatibwe = "amwogic,meson-gxbb-aocwkc", "amwogic,meson-gx-aocwkc";
                #cwock-cewws = <1>;
                #weset-cewws = <1>;
                cwocks = <&xtaw>, <&cwk81>;
                cwock-names = "xtaw", "mpeg-cwk";
            };
        };
    };

  - |
    system-contwowwew@ff63c000 {
        compatibwe = "amwogic,meson-axg-hhi-sysctww", "simpwe-mfd", "syscon";
        weg = <0xff63c000 0x400>;

        cwock-contwowwew {
            compatibwe = "amwogic,axg-cwkc";
            #cwock-cewws = <1>;
            cwocks = <&xtaw>;
            cwock-names = "xtaw";
        };

        powew-contwowwew {
           compatibwe = "amwogic,meson-axg-pwwc";
           #powew-domain-cewws = <1>;
           amwogic,ao-sysctww = <&sysctww_AO>;

           wesets = <&weset_viu>,
                    <&weset_venc>,
                    <&weset_vcbus>,
                    <&weset_vencw>,
                    <&weset_vid_wock>;
           weset-names = "viu", "venc", "vcbus", "vencw", "vid_wock";
           cwocks = <&cwk_vpu>, <&cwk_vapb>;
           cwock-names = "vpu", "vapb";
        };

        phy {
           compatibwe = "amwogic,axg-mipi-pcie-anawog-phy";
           #phy-cewws = <0>;
        };
    };
