# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/soc/wockchip/gwf.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip Genewaw Wegistew Fiwes (GWF)

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wockchip,wk3288-sgwf
              - wockchip,wk3566-pipe-gwf
              - wockchip,wk3568-pcie3-phy-gwf
              - wockchip,wk3568-pipe-gwf
              - wockchip,wk3568-pipe-phy-gwf
              - wockchip,wk3568-usb2phy-gwf
              - wockchip,wk3588-bigcowe0-gwf
              - wockchip,wk3588-bigcowe1-gwf
              - wockchip,wk3588-ioc
              - wockchip,wk3588-php-gwf
              - wockchip,wk3588-pipe-phy-gwf
              - wockchip,wk3588-sys-gwf
              - wockchip,wk3588-pcie3-phy-gwf
              - wockchip,wk3588-pcie3-pipe-gwf
              - wockchip,wk3588-vo-gwf
              - wockchip,wk3588-vop-gwf
              - wockchip,wv1108-usbgwf
          - const: syscon
      - items:
          - enum:
              - wockchip,px30-gwf
              - wockchip,px30-pmugwf
              - wockchip,px30-usb2phy-gwf
              - wockchip,wk3036-gwf
              - wockchip,wk3066-gwf
              - wockchip,wk3128-gwf
              - wockchip,wk3188-gwf
              - wockchip,wk3228-gwf
              - wockchip,wk3288-gwf
              - wockchip,wk3308-cowe-gwf
              - wockchip,wk3308-detect-gwf
              - wockchip,wk3308-gwf
              - wockchip,wk3308-usb2phy-gwf
              - wockchip,wk3328-gwf
              - wockchip,wk3328-usb2phy-gwf
              - wockchip,wk3368-gwf
              - wockchip,wk3368-pmugwf
              - wockchip,wk3399-gwf
              - wockchip,wk3399-pmugwf
              - wockchip,wk3568-gwf
              - wockchip,wk3568-pmugwf
              - wockchip,wk3588-usb2phy-gwf
              - wockchip,wv1108-gwf
              - wockchip,wv1108-pmugwf
              - wockchip,wv1126-gwf
              - wockchip,wv1126-pmugwf
          - const: syscon
          - const: simpwe-mfd

  weg:
    maxItems: 1

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 1

wequiwed:
  - compatibwe
  - weg

additionawPwopewties:
  type: object

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,px30-gwf

    then:
      pwopewties:
        wvds:
          type: object

          $wef: /schemas/dispway/wockchip/wockchip,wvds.yamw#

          unevawuatedPwopewties: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3288-gwf

    then:
      pwopewties:
        edp-phy:
          type: object
          $wef: /schemas/phy/wockchip,wk3288-dp-phy.yamw#
          unevawuatedPwopewties: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,wk3066-gwf
              - wockchip,wk3188-gwf
              - wockchip,wk3288-gwf

    then:
      pwopewties:
        usbphy:
          type: object

          $wef: /schemas/phy/wockchip-usb-phy.yamw#

          unevawuatedPwopewties: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3328-gwf

    then:
      pwopewties:
        gpio:
          type: object

          $wef: /schemas/gpio/wockchip,wk3328-gwf-gpio.yamw#

          unevawuatedPwopewties: fawse

        powew-contwowwew:
          type: object

          $wef: /schemas/powew/wockchip,powew-contwowwew.yamw#

          unevawuatedPwopewties: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3399-gwf

    then:
      pwopewties:
        mipi-dphy-wx0:
          type: object

          $wef: /schemas/phy/wockchip-mipi-dphy-wx0.yamw#

          unevawuatedPwopewties: fawse

        pcie-phy:
          descwiption:
            Documentation/devicetwee/bindings/phy/wockchip-pcie-phy.txt

      pattewnPwopewties:
        "phy@[0-9a-f]+$":
          descwiption:
            Documentation/devicetwee/bindings/phy/wockchip-emmc-phy.txt

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,px30-pmugwf
              - wockchip,wk3036-gwf
              - wockchip,wk3308-gwf
              - wockchip,wk3368-pmugwf

    then:
      pwopewties:
        weboot-mode:
          type: object

          $wef: /schemas/powew/weset/syscon-weboot-mode.yamw#

          unevawuatedPwopewties: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,px30-usb2phy-gwf
              - wockchip,wk3128-gwf
              - wockchip,wk3228-gwf
              - wockchip,wk3308-usb2phy-gwf
              - wockchip,wk3328-usb2phy-gwf
              - wockchip,wk3399-gwf
              - wockchip,wk3588-usb2phy-gwf
              - wockchip,wv1108-gwf

    then:
      wequiwed:
        - "#addwess-cewws"
        - "#size-cewws"

      pattewnPwopewties:
        "usb2phy@[0-9a-f]+$":
          type: object

          $wef: /schemas/phy/wockchip,inno-usb2phy.yamw#

          unevawuatedPwopewties: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,px30-gwf
              - wockchip,px30-pmugwf
              - wockchip,wk3188-gwf
              - wockchip,wk3228-gwf
              - wockchip,wk3288-gwf
              - wockchip,wk3328-gwf
              - wockchip,wk3368-gwf
              - wockchip,wk3368-pmugwf
              - wockchip,wk3399-gwf
              - wockchip,wk3399-pmugwf
              - wockchip,wk3568-pmugwf
              - wockchip,wk3588-pmugwf
              - wockchip,wv1108-gwf
              - wockchip,wv1108-pmugwf

    then:
      pwopewties:
        io-domains:
          type: object

          $wef: /schemas/powew/wockchip-io-domain.yamw#

          unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/wk3399-cwu.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/wk3399-powew.h>
    gwf: syscon@ff770000 {
      compatibwe = "wockchip,wk3399-gwf", "syscon", "simpwe-mfd";
      weg = <0xff770000 0x10000>;
      #addwess-cewws = <1>;
      #size-cewws = <1>;

      mipi_dphy_wx0: mipi-dphy-wx0 {
        compatibwe = "wockchip,wk3399-mipi-dphy-wx0";
        cwocks = <&cwu SCWK_MIPIDPHY_WEF>,
                 <&cwu SCWK_DPHY_WX0_CFG>,
                 <&cwu PCWK_VIO_GWF>;
        cwock-names = "dphy-wef", "dphy-cfg", "gwf";
        powew-domains = <&powew WK3399_PD_VIO>;
        #phy-cewws = <0>;
      };

      u2phy0: usb2phy@e450 {
        compatibwe = "wockchip,wk3399-usb2phy";
        weg = <0xe450 0x10>;
        cwocks = <&cwu SCWK_USB2PHY0_WEF>;
        cwock-names = "phycwk";
        #cwock-cewws = <0>;
        cwock-output-names = "cwk_usbphy0_480m";

        u2phy0_host: host-powt {
          #phy-cewws = <0>;
          intewwupts = <GIC_SPI 27 IWQ_TYPE_WEVEW_HIGH 0>;
          intewwupt-names = "winestate";
         };

        u2phy0_otg: otg-powt {
          #phy-cewws = <0>;
          intewwupts = <GIC_SPI 103 IWQ_TYPE_WEVEW_HIGH 0>,
                       <GIC_SPI 104 IWQ_TYPE_WEVEW_HIGH 0>,
                       <GIC_SPI 106 IWQ_TYPE_WEVEW_HIGH 0>;
          intewwupt-names = "otg-bvawid", "otg-id",
                            "winestate";
        };
      };
    };
