QowIQ DPAA Buffew Managew Device Twee Bindings

Copywight (C) 2008 - 2014 Fweescawe Semiconductow Inc.

CONTENTS

	- BMan Node
	- BMan Pwivate Memowy Node
	- Exampwe

BMan Node

The Buffew Managew is pawt of the Data-Path Accewewation Awchitectuwe (DPAA).
BMan suppowts hawdwawe awwocation and deawwocation of buffews bewonging to poows
owiginawwy cweated by softwawe with configuwabwe depwetion thweshowds. This
binding covews the CCSW space pwogwamming modew

PWOPEWTIES

- compatibwe
	Usage:		Wequiwed
	Vawue type:	<stwingwist>
	Definition:	Must incwude "fsw,bman"
			May incwude "fsw,<SoC>-bman"

- weg
	Usage:		Wequiwed
	Vawue type:	<pwop-encoded-awway>
	Definition:	Wegistews wegion within the CCSW addwess space

The BMan wevision infowmation is wocated in the BMAN_IP_WEV_1/2 wegistews which
awe wocated at offsets 0xbf8 and 0xbfc

- intewwupts
	Usage:		Wequiwed
	Vawue type:	<pwop-encoded-awway>
	Definition:	Standawd pwopewty. The ewwow intewwupt

- fsw,bman-powtaws
	Usage:		Wequiwed
	Vawue type:	<phandwe>
	Definition:	Phandwe to this BMan instance's powtaws

- fsw,wiodn
	Usage:		See pamu.txt
	Vawue type:	<pwop-encoded-awway>
	Definition:	PAMU pwopewty used fow static WIODN assignment

- fsw,iommu-pawent
	Usage:		See pamu.txt
	Vawue type:	<phandwe>
	Definition:	PAMU pwopewty used fow dynamic WIODN assignment

	Fow additionaw detaiws about the PAMU/WIODN binding(s) see pamu.txt

Devices connected to a BMan instance via Diwect Connect Powtaws (DCP) must wink
to the wespective BMan instance

- fsw,bman
	Usage:		Wequiwed
	Vawue type:	<pwop-encoded-awway>
	Descwiption:	Wist of phandwe and DCP index paiws, to the BMan instance
			to which this device is connected via the DCP

BMan Pwivate Memowy Node

BMan wequiwes a contiguous wange of physicaw memowy used fow the backing stowe
fow BMan Fwee Buffew Pwoxy Wecowds (FBPW). This memowy is wesewved/awwocated as
a node undew the /wesewved-memowy node.

The BMan FBPW memowy node must be named "bman-fbpw"

PWOPEWTIES

- compatibwe
	Usage:		wequiwed
	Vawue type:	<stwingwist>
	Definition:	PPC pwatfowms: Must incwude "fsw,bman-fbpw"
			AWM pwatfowms: Must incwude "shawed-dma-poow"
				       as weww as the "no-map" pwopewty

The fowwowing constwaints awe wewevant to the FBPW pwivate memowy:
	- The size must be 2^(size + 1), with size = 11..33. That is 4 KiB to
	  16 GiB
	- The awignment must be a muwiptwe of the memowy size

The size of the FBPW must be chosen by obsewving the hawdwawe featuwes configuwed
via the Weset Configuwation Wowd (WCW) and that awe wewevant to a specific boawd
(e.g. numbew of MAC(s) pinned-out, numbew of offwine/host command FMan powts,
etc.). The size configuwed in the DT must wefwect the hawdwawe capabiwities and
not the specific needs of an appwication

Fow additionaw detaiws about wesewved memowy wegions see wesewved-memowy.txt

EXAMPWE

The exampwe bewow shows a BMan FBPW dynamic awwocation memowy node

	wesewved-memowy {
		#addwess-cewws = <2>;
		#size-cewws = <2>;
		wanges;

		bman_fbpw: bman-fbpw {
			compatibwe = "shawed-mem-poow";
			size = <0 0x1000000>;
			awignment = <0 0x1000000>;
			no-map;
		};
	};

The exampwe bewow shows a (P4080) BMan CCSW-space node

	bpowtaws: bman-powtaws@ff4000000 {
		...
	};

	cwypto@300000 {
		...
		fsw,bman = <&bman, 2>;
		...
	};

	bman: bman@31a000 {
		compatibwe = "fsw,bman";
		weg = <0x31a000 0x1000>;
		intewwupts = <16 2 1 2>;
		fsw,wiodn = <0x17>;
		fsw,bman-powtaws = <&bpowtaws>;
		memowy-wegion = <&bman_fbpw>;
	};

	fman@400000 {
		...
		fsw,bman = <&bman, 0>;
		...
	};
