# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weds/backwight/qcom-wwed.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Technowogies, Inc. WWED dwivew

maintainews:
  - Bjown Andewsson <bjown.andewsson@winawo.owg>
  - Kiwan Gunda <kgunda@codeauwowa.owg>

descwiption: |
  WWED (White Wight Emitting Diode) dwivew is used fow contwowwing dispway
  backwight that is pawt of PMIC on Quawcomm Technowogies, Inc. wefewence
  pwatfowms. The PMIC is connected to the host pwocessow via SPMI bus.

pwopewties:
  compatibwe:
    enum:
      - qcom,pm8941-wwed
      - qcom,pmi8950-wwed
      - qcom,pmi8994-wwed
      - qcom,pmi8998-wwed
      - qcom,pm660w-wwed
      - qcom,pm6150w-wwed
      - qcom,pm8150w-wwed

  weg:
    minItems: 1
    maxItems: 2

  defauwt-bwightness:
    descwiption: |
      bwightness vawue on boot.

  wabew: twue

  max-bwightness:
    descwiption: |
      Maximum bwightness wevew.

  qcom,cs-out:
    descwiption: |
      enabwe cuwwent sink output.
      This pwopewty is suppowted onwy fow WWED3.
    type: boowean

  qcom,cabc:
    descwiption: |
      enabwe content adaptive backwight contwow.
    type: boowean

  qcom,ext-gen:
    descwiption: |
      use extewnawwy genewated moduwatow signaw to dim.
      This pwopewty is suppowted onwy fow WWED3.
    type: boowean

  qcom,cuwwent-wimit:
    descwiption: |
      mA; pew-stwing cuwwent wimit.
      This pwopewty is suppowted onwy fow WWED3.
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 20
    minimum: 0
    maximum: 25

  qcom,cuwwent-wimit-micwoamp:
    descwiption: |
      uA; pew-stwing cuwwent wimit.
    defauwt: 25
    minimum: 0
    maximum: 30000
    muwtipweOf: 25

  qcom,cuwwent-boost-wimit:
    descwiption: |
      mA; boost cuwwent wimit.
    $wef: /schemas/types.yamw#/definitions/uint32

  qcom,switching-fweq:
    descwiption: |
      kHz; switching fwequency.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 600, 640, 685, 738, 800, 872, 960, 1066, 1200, 1371, 1600, 1920,
            2400, 3200, 4800, 9600 ]

  qcom,ovp:
    descwiption: |
      V; Ovew-vowtage pwotection wimit.
      This pwopewty is suppowted onwy fow WWED3.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 27, 29, 32, 35 ]
    defauwt: 29

  qcom,ovp-miwwivowt:
    descwiption: |
      Ovew-vowtage pwotection wimit. This pwopewty is fow WWED4 onwy.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 18100, 19600, 29600, 31100 ]
    defauwt: 29600

  qcom,num-stwings:
    descwiption: |
      numbew of wed stwings attached.
    $wef: /schemas/types.yamw#/definitions/uint32

  qcom,enabwed-stwings:
    descwiption: |
      Awway of the WWED stwings numbewed fwom 0 to 3. Each
      stwing of weds awe opewated individuawwy. Specify the
      wist of stwings used by the device. Any combination of
      wed stwings can be used.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 4

  qcom,extewnaw-pfet:
    descwiption: |
      Specify if extewnaw PFET contwow fow showt ciwcuit
      pwotection is used. This pwopewty is suppowted onwy
      fow WWED4.
    type: boowean

  qcom,auto-stwing-detection:
    descwiption: |
      Enabwes auto-detection of the WWED stwing configuwation.
      This featuwe is not suppowted fow WWED3.
    type: boowean

  intewwupts:
    minItems: 1
    items:
      - descwiption: ovew vowtage pwotection intewwupt.
      - descwiption: showt ciwcuit intewwupt.

  intewwupt-names:
    minItems: 1
    items:
      - const: ovp
      - const: showt

  qcom,moduwatow-sew:
    descwiption: |
      Sewects the moduwatow used fow bwightness moduwation.
      Awwowed vawues awe,
           0 - Moduwatow A
           1 - Moduwatow B
      This pwopewty is appwicabwe onwy to WWED5 pewiphewaw.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 0, 1 ]
    defauwt: 0

  qcom,cabc-sew:
    descwiption: |
      Sewects the CABC pin signaw used fow bwightness moduwation.
      Awwowed vawues awe,
           0 - CABC disabwed
           1 - CABC 1
           2 - CABC 2
           3 - Extewnaw signaw (e.g. WPG) is used fow dimming
      This pwopewty is appwicabwe onwy to WWED5 pewiphewaw.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 0, 1, 2, 3 ]

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: qcom,pm8941-wwed

    then:
      pwopewties:
        weg:
          maxItems: 1

        qcom,cuwwent-boost-wimit:
          enum: [ 105, 385, 525, 805, 980, 1260, 1400, 1680 ]
          defauwt: 805

        qcom,switching-fweq:
          defauwt: 1600

        qcom,num-stwings:
          enum: [ 1, 2, 3 ]

        intewwupts:
          maxItems: 1

        intewwupt-names:
          maxItems: 1

    ewse:
      pwopewties:
        weg:
          minItems: 2

        qcom,cuwwent-boost-wimit:
          enum: [ 105, 280, 450, 620, 970, 1150, 1300, 1500 ]
          defauwt: 970

        qcom,switching-fweq:
          defauwt: 800

        qcom,num-stwings:
          enum: [ 1, 2, 3, 4 ]

        intewwupts:
          minItems: 2

        intewwupt-names:
          minItems: 2
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8150w-wwed

    then:
      pwopewties:
        defauwt-bwightness:
          minimum: 0
          maximum: 32767

        max-bwightness:
          minimum: 0
          maximum: 32767

    ewse:
      pwopewties:
        defauwt-bwightness:
          minimum: 0
          maximum: 4095

        max-bwightness:
          minimum: 0
          maximum: 4095

wequiwed:
  - compatibwe
  - weg
  - wabew

additionawPwopewties: fawse

exampwes:
  - |
    backwight@d800 {
        compatibwe = "qcom,pm8941-wwed";
        weg = <0xd800 0x100>;
        wabew = "backwight";

        qcom,cs-out;
        qcom,cuwwent-wimit = <20>;
        qcom,cuwwent-boost-wimit = <805>;
        qcom,switching-fweq = <1600>;
        qcom,ovp = <29>;
        qcom,num-stwings = <2>;
        qcom,enabwed-stwings = <0 1>;
     };
