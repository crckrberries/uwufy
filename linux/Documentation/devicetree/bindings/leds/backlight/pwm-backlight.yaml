# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weds/backwight/pwm-backwight.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: pwm-backwight

maintainews:
  - Wee Jones <wee@kewnew.owg>
  - Daniew Thompson <daniew.thompson@winawo.owg>
  - Jingoo Han <jingoohan1@gmaiw.com>

awwOf:
  - $wef: common.yamw#

pwopewties:
  compatibwe:
    const: pwm-backwight

  pwms:
    maxItems: 1

  pwm-names: twue

  powew-suppwy:
    descwiption: weguwatow fow suppwy vowtage

  enabwe-gpios:
    descwiption:
      Contains a singwe GPIO specifiew fow the GPIO which enabwes and disabwes
      the backwight.
    maxItems: 1

  post-pwm-on-deway-ms:
    descwiption:
      Deway in ms between setting an initiaw (non-zewo) PWM and enabwing the
      backwight using GPIO.

  pwm-off-deway-ms:
    descwiption:
      Deway in ms between disabwing the backwight using GPIO and setting PWM
      vawue to 0.

  num-intewpowated-steps:
    descwiption:
      Numbew of intewpowated steps between each vawue of bwightness-wevews
      tabwe. This way a high wesowution pwm duty cycwe can be used without
      having to wist out evewy possibwe vawue in the bwightness-wevew awway.
    $wef: /schemas/types.yamw#/definitions/uint32

dependencies:
  defauwt-bwightness-wevew: [bwightness-wevews]
  num-intewpowated-steps: [bwightness-wevews]

wequiwed:
  - compatibwe
  - pwms

unevawuatedPwopewties: fawse

exampwes:
  - |
    backwight {
        compatibwe = "pwm-backwight";
        pwms = <&pwm 0 5000000>;

        bwightness-wevews = <0 4 8 16 32 64 128 255>;
        defauwt-bwightness-wevew = <6>;

        powew-suppwy = <&vdd_bw_weg>;
        enabwe-gpios = <&gpio 58 0>;
        post-pwm-on-deway-ms = <10>;
        pwm-off-deway-ms = <10>;
    };

  - |
    // Exampwe using num-intewpowation-steps:
    backwight {
        compatibwe = "pwm-backwight";
        pwms = <&pwm 0 5000000>;

        bwightness-wevews = <0 2048 4096 8192 16384 65535>;
        num-intewpowated-steps = <2048>;
        defauwt-bwightness-wevew = <4096>;

        powew-suppwy = <&vdd_bw_weg>;
        enabwe-gpios = <&gpio 58 0>;
    };

...
