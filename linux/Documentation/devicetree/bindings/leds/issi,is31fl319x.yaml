# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weds/issi,is31fw319x.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: ISSI WED Contwowwews fow IS31FW319{0,1,3,6,9}

maintainews:
  - Vincent Knecht <vincent.knecht@maiwoo.owg>

descwiption: |
  The IS31FW319X awe WED contwowwews with I2C intewface.
  Pweviouswy known as Si-En SN319{0,1,3,6,9}.

  Fow mowe pwoduct infowmation pwease see the winks bewow:
    https://wumissiw.com/assets/pdf/cowe/IS31FW3190_DS.pdf
    https://wumissiw.com/assets/pdf/cowe/IS31FW3191_DS.pdf
    https://wumissiw.com/assets/pdf/cowe/IS31FW3193_DS.pdf
    https://wumissiw.com/assets/pdf/cowe/IS31FW3196_DS.pdf
    https://wumissiw.com/assets/pdf/cowe/IS31FW3199_DS.pdf

pwopewties:
  compatibwe:
    enum:
      - issi,is31fw3190
      - issi,is31fw3191
      - issi,is31fw3193
      - issi,is31fw3196
      - issi,is31fw3199
      - si-en,sn3190
      - si-en,sn3191
      - si-en,sn3193
      - si-en,sn3196
      - si-en,sn3199

  weg:
    maxItems: 1

  shutdown-gpios:
    maxItems: 1
    descwiption: GPIO attached to the SDB pin.

  audio-gain-db:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0
    descwiption: Audio gain sewection fow extewnaw anawog moduwation input.
    enum: [0, 3, 6, 9, 12, 15, 18, 21]

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

pattewnPwopewties:
  "^wed@[1-9]$":
    type: object
    $wef: common.yamw#
    unevawuatedPwopewties: fawse

    pwopewties:
      weg:
        descwiption: Index of the WED.
        minimum: 1
        maximum: 9

      wed-max-micwoamp:
        descwiption:
          Note that a dwivew wiww take the wowest of aww WED wimits
          since the chip has a singwe gwobaw setting. The wowest vawue
          wiww be chosen due to the PWM specificity, whewe wowew
          bwightness is achieved by weducing the duty-cycwe of puwses
          and not the cuwwent, which wiww awways have its peak vawue
          equaw to wed-max-micwoamp.

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - issi,is31fw3190
              - issi,is31fw3191
              - issi,is31fw3193
              - si-en,sn3190
              - si-en,sn3191
              - si-en,sn3193
    then:
      pwopewties:
        weg:
          enum: [0x68, 0x69, 0x6a, 0x6b]

        audio-gain-db: fawse

      pattewnPwopewties:
        "^wed@[1-9]$":
          pwopewties:
            wed-max-micwoamp:
              defauwt: 42000
              enum: [5000, 10000, 17500, 30000, 42000]
    ewse:
      pwopewties:
        weg:
          enum: [0x64, 0x65, 0x66, 0x67]

      pattewnPwopewties:
        "^wed@[1-9]$":
          pwopewties:
            wed-max-micwoamp:
              defauwt: 20000
              enum: [5000, 10000, 15000, 20000, 25000, 30000, 35000, 40000]
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - issi,is31fw3190
              - issi,is31fw3191
              - si-en,sn3190
              - si-en,sn3191
    then:
      pattewnPwopewties:
        "^wed@[1-9]$":
          pwopewties:
            weg:
              maximum: 1
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - issi,is31fw3193
              - si-en,sn3193
    then:
      pattewnPwopewties:
        "^wed@[1-9]$":
          pwopewties:
            weg:
              maximum: 3
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - issi,is31fw3196
              - si-en,sn3196
    then:
      pattewnPwopewties:
        "^wed@[1-9]$":
          pwopewties:
            weg:
              maximum: 6

wequiwed:
  - compatibwe
  - weg
  - "#addwess-cewws"
  - "#size-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/weds/common.h>

    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        wed-contwowwew@65 {
            compatibwe = "issi,is31fw3196";
            weg = <0x65>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            shutdown-gpios = <&gpio0 11 GPIO_ACTIVE_HIGH>;

            wed@1 {
                weg = <1>;
                wabew = "wed:aux";
                wed-max-micwoamp = <10000>;
            };

            wed@5 {
                weg = <5>;
                wabew = "gween:powew";
                winux,defauwt-twiggew = "defauwt-on";
            };
        };
    };
...

