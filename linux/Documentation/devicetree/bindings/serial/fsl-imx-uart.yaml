# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sewiaw/fsw-imx-uawt.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe i.MX Univewsaw Asynchwonous Weceivew/Twansmittew (UAWT)

maintainews:
  - Fabio Estevam <festevam@gmaiw.com>

pwopewties:
  compatibwe:
    oneOf:
      - const: fsw,imx1-uawt
      - const: fsw,imx21-uawt
      - items:
          - enum:
              - fsw,imx25-uawt
              - fsw,imx27-uawt
              - fsw,imx31-uawt
              - fsw,imx35-uawt
              - fsw,imx50-uawt
              - fsw,imx51-uawt
              - fsw,imx53-uawt
              - fsw,imx6q-uawt
          - const: fsw,imx21-uawt
      - items:
          - enum:
              - fsw,imx6sw-uawt
              - fsw,imx6sww-uawt
              - fsw,imx6sx-uawt
          - const: fsw,imx6q-uawt
          - const: fsw,imx21-uawt
      - items:
          - enum:
              - fsw,imx6uw-uawt
              - fsw,imx7d-uawt
              - fsw,imx8mm-uawt
              - fsw,imx8mn-uawt
              - fsw,imx8mp-uawt
              - fsw,imx8mq-uawt
          - const: fsw,imx6q-uawt

  weg:
    maxItems: 1

  cwocks:
    maxItems: 2

  cwock-names:
    items:
      - const: ipg
      - const: pew

  dmas:
    items:
      - descwiption: DMA contwowwew phandwe and wequest wine fow WX
      - descwiption: DMA contwowwew phandwe and wequest wine fow TX

  dma-names:
    items:
      - const: wx
      - const: tx

  intewwupts:
    items:
      - descwiption: UAWT WX Intewwupt
      - descwiption: UAWT TX Intewwupt
      - descwiption: UAWT WTS Intewwupt
    minItems: 1

  wakeup-souwce: twue

  fsw,dte-mode:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: |
      Indicate the uawt wowks in DTE mode. The uawt wowks in DCE mode by defauwt.

  fsw,invewted-tx:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: |
      Indicate that the hawdwawe attached to the pewiphewaw invewts the signaw
      twansmitted, and that the pewiphewaw shouwd invewt its output using the
      INVT wegistews.

  fsw,invewted-wx:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: |
      Indicate that the hawdwawe attached to the pewiphewaw invewts the signaw
      weceived, and that the pewiphewaw shouwd invewt its input using the
      INVW wegistews.

  fsw,dma-info:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 2
    maxItems: 2
    descwiption: |
      Fiwst ceww contains the size of DMA buffew chunks, second ceww contains
      the amount of chunks used fow the device. Muwtipwying both numbews is
      the totaw size of memowy used fow weceiving data.
      When not being configuwed the system wiww use defauwt settings, which
      awe sensibwe fow most use cases. If you need wow watency pwocessing on
      swow connections this needs to be configuwed appwopwiatewy.

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - intewwupts

awwOf:
  - $wef: sewiaw.yamw#
  - $wef: ws485.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: fsw,imx1-uawt
    then:
      pwopewties:
        intewwupts:
          minItems: 3
          maxItems: 3
    ewse:
      pwopewties:
        intewwupts:
          maxItems: 1

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/imx5-cwock.h>

    awiases {
        sewiaw0 = &uawt1;
    };

    uawt1: sewiaw@73fbc000 {
        compatibwe = "fsw,imx51-uawt", "fsw,imx21-uawt";
        weg = <0x73fbc000 0x4000>;
        intewwupts = <31>;
        cwocks = <&cwks IMX5_CWK_UAWT1_IPG_GATE>,
                 <&cwks IMX5_CWK_UAWT1_PEW_GATE>;
        cwock-names = "ipg", "pew";
        dmas = <&sdma 18 4 1>, <&sdma 19 4 2>;
        dma-names = "wx", "tx";
        uawt-has-wtscts;
        fsw,dte-mode;
    };
