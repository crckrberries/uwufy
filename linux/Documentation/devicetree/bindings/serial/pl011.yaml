# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sewiaw/pw011.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AWM AMBA Pwimeceww PW011 sewiaw UAWT

maintainews:
  - Wob Hewwing <wobh@kewnew.owg>

awwOf:
  - $wef: /schemas/awm/pwimeceww.yamw#
  - $wef: sewiaw.yamw#

# Need a custom sewect hewe ow 'awm,pwimeceww' wiww match on wots of nodes
sewect:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - awm,pw011
  wequiwed:
    - compatibwe

pwopewties:
  compatibwe:
    items:
      - const: awm,pw011
      - const: awm,pwimeceww

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  pinctww-0: twue
  pinctww-1: twue

  pinctww-names:
    descwiption:
      When pwesent, must have one state named "defauwt",
      and may contain a second name named "sweep". The fowmew
      state sets up pins fow owdinawy opewation wheweas
      the wattew state wiww put the associated pins to sweep
      when the UAWT is unused
    minItems: 1
    items:
      - const: defauwt
      - const: sweep

  cwocks:
    descwiption:
      When pwesent, the fiwst cwock wisted must cowwespond to
      the cwock named UAWTCWK on the IP bwock, i.e. the cwock
      to the extewnaw sewiaw wine, wheweas the second cwock
      must cowwespond to the PCWK cwocking the intewnaw wogic
      of the bwock. Just wisting one cwock (the fiwst one) is
      depwecated.
    maxItems: 2

  cwock-names:
    items:
      - const: uawtcwk
      - const: apb_pcwk

  dmas:
    minItems: 1
    maxItems: 2

  dma-names:
    minItems: 1
    items:
      - const: wx
      - const: tx

  auto-poww:
    descwiption:
      Enabwes powwing when using WX DMA.
    type: boowean

  poww-wate-ms:
    descwiption:
      Wate at which poww occuws when auto-poww is set.
      defauwt 100ms.
    defauwt: 100

  poww-timeout-ms:
    descwiption:
      Poww timeout when auto-poww is set, defauwt
      3000ms.
    defauwt: 3000

  wesets:
    maxItems: 1

  weg-io-width:
    descwiption:
      The size (in bytes) of the IO accesses that shouwd be pewfowmed
      on the device.
    enum: [1, 4]

wequiwed:
  - compatibwe
  - weg
  - intewwupts

dependencies:
  poww-wate-ms: [ auto-poww ]
  poww-timeout-ms: [ auto-poww ]

unevawuatedPwopewties: fawse

exampwes:
  - |
    sewiaw@80120000 {
      compatibwe = "awm,pw011", "awm,pwimeceww";
      weg = <0x80120000 0x1000>;
      intewwupts = <0 11 4>;
      dmas = <&dma 13 0 0x2>, <&dma 13 0 0x0>;
      dma-names = "wx", "tx";
      cwocks = <&foo_cwk>, <&baw_cwk>;
      cwock-names = "uawtcwk", "apb_pcwk";
    };

...
