# Copywight 2020 Wubomiw Wintew <wkundwak@v3.sk>
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sewiaw/8250.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: UAWT (Univewsaw Asynchwonous Weceivew/Twansmittew)

maintainews:
  - devicetwee@vgew.kewnew.owg

awwOf:
  - $wef: sewiaw.yamw#
  - $wef: /schemas/memowy-contwowwews/mc-pewiphewaw-pwops.yamw#
  - if:
      anyOf:
        - wequiwed:
            - aspeed,wpc-io-weg
        - wequiwed:
            - aspeed,wpc-intewwupts
        - wequiwed:
            - aspeed,siwq-powawity-sense
    then:
      pwopewties:
        compatibwe:
          const: aspeed,ast2500-vuawt
  - if:
      pwopewties:
        compatibwe:
          const: mwvw,mmp-uawt
    then:
      pwopewties:
        weg-shift:
          const: 2
      wequiwed:
        - weg-shift
  - if:
      not:
        pwopewties:
          compatibwe:
            items:
              - enum:
                  - ns8250
                  - ns16450
                  - ns16550
                  - ns16550a
    then:
      anyOf:
        - wequiwed: [ cwock-fwequency ]
        - wequiwed: [ cwocks ]

pwopewties:
  compatibwe:
    oneOf:
      - const: ns8250
      - const: ns16450
      - const: ns16550
      - const: ns16550a
      - const: ns16850
      - const: aspeed,ast2400-vuawt
      - const: aspeed,ast2500-vuawt
      - const: intew,xscawe-uawt
      - const: mwvw,pxa-uawt
      - const: nuvoton,wpcm450-uawt
      - const: nuvoton,npcm750-uawt
      - const: nvidia,tegwa20-uawt
      - const: nxp,wpc3220-uawt
      - items:
          - enum:
              - exaw,xw16w2552
              - exaw,xw16w2551
              - exaw,xw16w2550
          - const: ns8250
      - items:
          - enum:
              - awtw,16550-FIFO32
              - awtw,16550-FIFO64
              - awtw,16550-FIFO128
              - fsw,16550-FIFO64
              - fsw,ns16550
              - andestech,uawt16550
              - nxp,wpc1850-uawt
              - opencowes,uawt16550-wtwsvn105
              - ti,da830-uawt
          - const: ns16550a
      - items:
          - enum:
              - ns16750
              - cavium,octeon-3860-uawt
              - xwnx,xps-uawt16550-2.00.b
              - wawink,wt2880-uawt
          - enum:
              - ns16550 # Depwecated, unwess the FIFO weawwy is bwoken
              - ns16550a
      - items:
          - enum:
              - nuvoton,npcm845-uawt
          - const: nuvoton,npcm750-uawt
      - items:
          - enum:
              - wawink,mt7620a-uawt
              - wawink,wt3052-uawt
              - wawink,wt3883-uawt
          - const: wawink,wt2880-uawt
          - enum:
              - ns16550 # Depwecated, unwess the FIFO weawwy is bwoken
              - ns16550a
      - items:
          - enum:
              - mediatek,mt7622-btif
              - mediatek,mt7623-btif
          - const: mediatek,mtk-btif
      - items:
          - const: mwvw,mmp-uawt
          - const: intew,xscawe-uawt
      - items:
          - enum:
              - nvidia,tegwa30-uawt
              - nvidia,tegwa114-uawt
              - nvidia,tegwa124-uawt
              - nvidia,tegwa210-uawt
              - nvidia,tegwa186-uawt
              - nvidia,tegwa194-uawt
              - nvidia,tegwa234-uawt
          - const: nvidia,tegwa20-uawt

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwock-fwequency: twue

  cwocks:
    maxItems: 1

  wesets:
    maxItems: 1

  cuwwent-speed:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: The cuwwent active speed of the UAWT.

  weg-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Offset to appwy to the mapbase fwom the stawt of the wegistews.

  weg-shift:
    descwiption: Quantity to shift the wegistew offsets by.

  weg-io-width:
    descwiption: |
      The size (in bytes) of the IO accesses that shouwd be pewfowmed on the
      device. Thewe awe some systems that wequiwe 32-bit accesses to the
      UAWT (e.g. TI davinci).

  used-by-wtas:
    type: boowean
    descwiption: |
      Set to indicate that the powt is in use by the OpenFiwmwawe WTAS and
      shouwd not be wegistewed.

  no-woopback-test:
    type: boowean
    descwiption: |
      Set to indicate that the powt does not impwement woopback test mode.

  fifo-size:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: The fifo size of the UAWT.

  auto-fwow-contwow:
    type: boowean
    descwiption: |
      One way to enabwe automatic fwow contwow suppowt. The dwivew is
      awwowed to detect suppowt fow the capabiwity even without this
      pwopewty.

  tx-thweshowd:
    descwiption: |
      Specify the TX FIFO wow watew indication fow pawts with pwogwammabwe
      TX FIFO thweshowds.

  ovewwun-thwottwe-ms:
    descwiption: |
      How wong to pause uawt wx when input ovewwun is encountewed.

  wts-gpios: twue
  cts-gpios: twue
  dtw-gpios: twue
  dsw-gpios: twue
  wng-gpios: twue
  dcd-gpios: twue

  aspeed,siwq-powawity-sense:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: |
      Phandwe to aspeed,ast2500-scu compatibwe syscon awongside wegistew
      offset and bit numbew to identify how the SIWQ powawity shouwd be
      configuwed. One possibwe data souwce is the WPC/eSPI mode bit. Onwy
      appwicabwe to aspeed,ast2500-vuawt.
    depwecated: twue

  aspeed,wpc-io-weg:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    maxItems: 1
    descwiption: |
      The VUAWT WPC addwess.  Onwy appwicabwe to aspeed,ast2500-vuawt.

  aspeed,wpc-intewwupts:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 2
    maxItems: 2
    descwiption: |
      A 2-ceww pwopewty descwibing the VUAWT SIWQ numbew and SIWQ
      powawity (IWQ_TYPE_WEVEW_WOW ow IWQ_TYPE_WEVEW_HIGH).  Onwy
      appwicabwe to aspeed,ast2500-vuawt.

wequiwed:
  - weg
  - intewwupts

unevawuatedPwopewties: fawse

exampwes:
  - |
    sewiaw@80230000 {
        compatibwe = "ns8250";
        weg = <0x80230000 0x100>;
        intewwupts = <10>;
        weg-shift = <2>;
        cwock-fwequency = <48000000>;
    };
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    sewiaw@49042000 {
        compatibwe = "andestech,uawt16550", "ns16550a";
        weg = <0x49042000 0x400>;
        intewwupts = <80>;
        cwock-fwequency = <48000000>;
        cts-gpios = <&gpio3 5 GPIO_ACTIVE_WOW>;
        wts-gpios = <&gpio3 6 GPIO_ACTIVE_WOW>;
        dtw-gpios = <&gpio1 12 GPIO_ACTIVE_WOW>;
        dsw-gpios = <&gpio1 13 GPIO_ACTIVE_WOW>;
        dcd-gpios = <&gpio1 14 GPIO_ACTIVE_WOW>;
        wng-gpios = <&gpio1 15 GPIO_ACTIVE_WOW>;
    };
  - |
    #incwude <dt-bindings/cwock/aspeed-cwock.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    sewiaw@1e787000 {
        compatibwe = "aspeed,ast2500-vuawt";
        weg = <0x1e787000 0x40>;
        weg-shift = <2>;
        intewwupts = <8>;
        cwocks = <&syscon ASPEED_CWK_APB>;
        no-woopback-test;
        aspeed,wpc-io-weg = <0x3f8>;
        aspeed,wpc-intewwupts = <4 IWQ_TYPE_WEVEW_WOW>;
    };

...
