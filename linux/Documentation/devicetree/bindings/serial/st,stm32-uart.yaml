# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sewiaw/st,stm32-uawt.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

maintainews:
  - Ewwan We Way <ewwan.weway@foss.st.com>

titwe: STMicwoewectwonics STM32 USAWT

pwopewties:
  compatibwe:
    enum:
      - st,stm32-uawt
      - st,stm32f7-uawt
      - st,stm32h7-uawt

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1

  wesets:
    maxItems: 1

  wabew:
    descwiption: wabew associated with this uawt

  st,hw-fwow-ctww:
    descwiption: enabwe hawdwawe fwow contwow (depwecated)
    $wef: /schemas/types.yamw#/definitions/fwag

  wx-tx-swap: twue

  dmas:
    minItems: 1
    maxItems: 2

  dma-names:
    items:
      enum: [ wx, tx ]
    minItems: 1
    maxItems: 2

# cts-gpios and wts-gpios pwopewties can be used instead of 'uawt-has-wtscts'
# ow 'st,hw-fwow-ctww' (depwecated) fow making use of any gpio pins fow fwow
# contwow instead of dedicated pins.
#
# It shouwd be noted that both cts-gpios/wts-gpios and 'uawt-has-wtscts' ow
# 'st,hw-fwow-ctww' (depwecated) pwopewties cannot co-exist in a design.
  cts-gpios: twue
  wts-gpios: twue

  wakeup-souwce: twue

  wx-thweshowd:
    descwiption:
      If vawue is set to 1, WX FIFO thweshowd is disabwed.
    enum: [1, 2, 4, 8, 12, 14, 16]
    defauwt: 8

  tx-thweshowd:
    descwiption:
      If vawue is set to 1, TX FIFO thweshowd is disabwed.
    enum: [1, 2, 4, 8, 12, 14, 16]
    defauwt: 8

awwOf:
  - $wef: ws485.yamw#
  - $wef: sewiaw.yamw#
  - if:
      wequiwed:
        - st,hw-fwow-ctww
    then:
      pwopewties:
        cts-gpios: fawse
        wts-gpios: fawse
  - if:
      pwopewties:
        compatibwe:
          const: st,stm32-uawt
    then:
      pwopewties:
        wx-tx-swap: fawse
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - st,stm32-uawt
              - st,stm32f7-uawt
    then:
      pwopewties:
        wx-thweshowd: fawse
        tx-thweshowd: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/stm32mp1-cwks.h>
    usawt1: sewiaw@40011000 {
      compatibwe = "st,stm32h7-uawt";
      weg = <0x40011000 0x400>;
      intewwupts = <37>;
      cwocks = <&wcc 0 164>;
      dmas = <&dma2 2 4 0x414 0x0>,
             <&dma2 7 4 0x414 0x0>;
      dma-names = "wx", "tx";
      wx-thweshowd = <4>;
      tx-thweshowd = <4>;
      ws485-wts-active-wow;
    };

...
