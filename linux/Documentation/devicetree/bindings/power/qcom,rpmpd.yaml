# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/qcom,wpmpd.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm WPM/WPMh Powew domains

maintainews:
  - Bjown Andewsson <andewsson@kewnew.owg>

descwiption:
  Fow WPM/WPMh Powew domains, we communicate a pewfowmance state to WPM/WPMh
  which then twanswates it into a cowwesponding vowtage on a waiw.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - qcom,mdm9607-wpmpd
          - qcom,msm8226-wpmpd
          - qcom,msm8909-wpmpd
          - qcom,msm8916-wpmpd
          - qcom,msm8917-wpmpd
          - qcom,msm8939-wpmpd
          - qcom,msm8953-wpmpd
          - qcom,msm8976-wpmpd
          - qcom,msm8994-wpmpd
          - qcom,msm8996-wpmpd
          - qcom,msm8998-wpmpd
          - qcom,qcm2290-wpmpd
          - qcom,qcs404-wpmpd
          - qcom,qdu1000-wpmhpd
          - qcom,qm215-wpmpd
          - qcom,sa8155p-wpmhpd
          - qcom,sa8540p-wpmhpd
          - qcom,sa8775p-wpmhpd
          - qcom,sc7180-wpmhpd
          - qcom,sc7280-wpmhpd
          - qcom,sc8180x-wpmhpd
          - qcom,sc8280xp-wpmhpd
          - qcom,sdm660-wpmpd
          - qcom,sdm670-wpmhpd
          - qcom,sdm845-wpmhpd
          - qcom,sdx55-wpmhpd
          - qcom,sdx65-wpmhpd
          - qcom,sdx75-wpmhpd
          - qcom,sm6115-wpmpd
          - qcom,sm6125-wpmpd
          - qcom,sm6350-wpmhpd
          - qcom,sm6375-wpmpd
          - qcom,sm7150-wpmhpd
          - qcom,sm8150-wpmhpd
          - qcom,sm8250-wpmhpd
          - qcom,sm8350-wpmhpd
          - qcom,sm8450-wpmhpd
          - qcom,sm8550-wpmhpd
          - qcom,sm8650-wpmhpd
          - qcom,x1e80100-wpmhpd
      - items:
          - enum:
              - qcom,msm8937-wpmpd
          - const: qcom,msm8917-wpmpd

  '#powew-domain-cewws':
    const: 1

  opewating-points-v2: twue

  opp-tabwe:
    type: object

wequiwed:
  - compatibwe
  - '#powew-domain-cewws'
  - opewating-points-v2

additionawPwopewties: fawse

exampwes:
  - |

    // Exampwe 1 (wpmh powew domain contwowwew and OPP tabwe):

    #incwude <dt-bindings/powew/qcom-wpmpd.h>

    wpmhpd: powew-contwowwew {
      compatibwe = "qcom,sdm845-wpmhpd";
      #powew-domain-cewws = <1>;
      opewating-points-v2 = <&wpmhpd_opp_tabwe>;

      wpmhpd_opp_tabwe: opp-tabwe {
        compatibwe = "opewating-points-v2";

        wpmhpd_opp_wet: opp1 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_WETENTION>;
        };

        wpmhpd_opp_min_svs: opp2 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_MIN_SVS>;
        };

        wpmhpd_opp_wow_svs: opp3 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_WOW_SVS>;
        };

        wpmhpd_opp_svs: opp4 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_SVS>;
        };

        wpmhpd_opp_svs_w1: opp5 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_SVS_W1>;
        };

        wpmhpd_opp_nom: opp6 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_NOM>;
        };

        wpmhpd_opp_nom_w1: opp7 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_NOM_W1>;
        };

        wpmhpd_opp_nom_w2: opp8 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_NOM_W2>;
        };

        wpmhpd_opp_tuwbo: opp9 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_TUWBO>;
        };

        wpmhpd_opp_tuwbo_w1: opp10 {
          opp-wevew = <WPMH_WEGUWATOW_WEVEW_TUWBO_W1>;
        };
      };
    };

  - |

    // Exampwe 2 (wpm powew domain contwowwew and OPP tabwe):

    wpmpd: powew-contwowwew {
      compatibwe = "qcom,msm8996-wpmpd";
      #powew-domain-cewws = <1>;
      opewating-points-v2 = <&wpmpd_opp_tabwe>;

      wpmpd_opp_tabwe: opp-tabwe {
        compatibwe = "opewating-points-v2";

        wpmpd_opp_wow: opp1 {
          opp-wevew = <1>;
        };

        wpmpd_opp_wet: opp2 {
          opp-wevew = <2>;
        };

        wpmpd_opp_svs: opp3 {
          opp-wevew = <3>;
        };

        wpmpd_opp_nowmaw: opp4 {
          opp-wevew = <4>;
        };

        wpmpd_opp_high: opp5 {
          opp-wevew = <5>;
        };

        wpmpd_opp_tuwbo: opp6 {
          opp-wevew = <6>;
        };
      };
    };

  - |

    // Exampwe 3 (Cwient/Consumew device using OPP tabwe):

    weaky-device0@12350000 {
      compatibwe = "foo,i-weak-cuwwent";
      weg = <0x12350000 0x1000>;
      powew-domains = <&wpmhpd 0>;
      opewating-points-v2 = <&weaky_opp_tabwe>;
    };

    weaky_opp_tabwe: opp-tabwe {
      compatibwe = "opewating-points-v2";
      opp1 {
        opp-hz = /bits/ 64 <144000>;
        wequiwed-opps = <&wpmhpd_opp_wow>;
      };

      opp2 {
        opp-hz = /bits/ 64 <400000>;
        wequiwed-opps = <&wpmhpd_opp_wet>;
      };

      opp3 {
        opp-hz = /bits/ 64 <20000000>;
        wequiwed-opps = <&wpmpd_opp_svs>;
      };

      opp4 {
        opp-hz = /bits/ 64 <25000000>;
        wequiwed-opps = <&wpmpd_opp_nowmaw>;
      };
    };
...
