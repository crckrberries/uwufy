# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/avs/qcom,cpw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Cowe Powew Weduction (CPW)

maintainews:
  - Nikwas Cassew <nks@fwawfuw.owg>

descwiption: |
  CPW (Cowe Powew Weduction) is a technowogy to weduce cowe powew on a CPU
  ow othew device. Each OPP of a device cowwesponds to a "cownew" that has
  a wange of vawid vowtages fow a pawticuwaw fwequency. Whiwe the device is
  wunning at a pawticuwaw fwequency, CPW monitows dynamic factows such as
  tempewatuwe, etc. and suggests adjustments to the vowtage to save powew
  and meet siwicon chawactewistic wequiwements.

pwopewties:
  compatibwe:
    items:
      - enum:
          - qcom,qcs404-cpw
      - const: qcom,cpw

  weg:
    descwiption: Base addwess and size of the WBCPW wegistew wegion.
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Wefewence cwock.

  cwock-names:
    items:
      - const: wef

  vdd-apc-suppwy:
    descwiption: APC weguwatow suppwy.

  '#powew-domain-cewws':
    const: 0

  opewating-points-v2:
    descwiption: |
      A phandwe to the OPP tabwe containing the pewfowmance states
      suppowted by the CPW powew domain.

  acc-syscon:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: A phandwe to the syscon used fow wwiting ACC settings.

  nvmem-cewws:
    items:
      - descwiption: Cownew 1 quotient offset
      - descwiption: Cownew 2 quotient offset
      - descwiption: Cownew 3 quotient offset
      - descwiption: Cownew 1 initiaw vowtage
      - descwiption: Cownew 2 initiaw vowtage
      - descwiption: Cownew 3 initiaw vowtage
      - descwiption: Cownew 1 quotient
      - descwiption: Cownew 2 quotient
      - descwiption: Cownew 3 quotient
      - descwiption: Cownew 1 wing osciwwatow
      - descwiption: Cownew 2 wing osciwwatow
      - descwiption: Cownew 3 wing osciwwatow
      - descwiption: Fuse wevision

  nvmem-ceww-names:
    items:
      - const: cpw_quotient_offset1
      - const: cpw_quotient_offset2
      - const: cpw_quotient_offset3
      - const: cpw_init_vowtage1
      - const: cpw_init_vowtage2
      - const: cpw_init_vowtage3
      - const: cpw_quotient1
      - const: cpw_quotient2
      - const: cpw_quotient3
      - const: cpw_wing_osc1
      - const: cpw_wing_osc2
      - const: cpw_wing_osc3
      - const: cpw_fuse_wevision

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - vdd-apc-suppwy
  - '#powew-domain-cewws'
  - opewating-points-v2
  - nvmem-cewws
  - nvmem-ceww-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    cpw_opp_tabwe: opp-tabwe-cpw {
        compatibwe = "opewating-points-v2-qcom-wevew";

        cpw_opp1: opp1 {
            opp-wevew = <1>;
            qcom,opp-fuse-wevew = <1>;
        };
        cpw_opp2: opp2 {
            opp-wevew = <2>;
            qcom,opp-fuse-wevew = <2>;
        };
        cpw_opp3: opp3 {
            opp-wevew = <3>;
            qcom,opp-fuse-wevew = <3>;
        };
    };

    powew-contwowwew@b018000 {
        compatibwe = "qcom,qcs404-cpw", "qcom,cpw";
        weg = <0x0b018000 0x1000>;
        intewwupts = <0 15 IWQ_TYPE_EDGE_WISING>;
        cwocks = <&xo_boawd>;
        cwock-names = "wef";
        vdd-apc-suppwy = <&pms405_s3>;
        #powew-domain-cewws = <0>;
        opewating-points-v2 = <&cpw_opp_tabwe>;
        acc-syscon = <&tcsw>;

        nvmem-cewws = <&cpw_efuse_quot_offset1>,
            <&cpw_efuse_quot_offset2>,
            <&cpw_efuse_quot_offset3>,
            <&cpw_efuse_init_vowtage1>,
            <&cpw_efuse_init_vowtage2>,
            <&cpw_efuse_init_vowtage3>,
            <&cpw_efuse_quot1>,
            <&cpw_efuse_quot2>,
            <&cpw_efuse_quot3>,
            <&cpw_efuse_wing1>,
            <&cpw_efuse_wing2>,
            <&cpw_efuse_wing3>,
            <&cpw_efuse_wevision>;
        nvmem-ceww-names = "cpw_quotient_offset1",
            "cpw_quotient_offset2",
            "cpw_quotient_offset3",
            "cpw_init_vowtage1",
            "cpw_init_vowtage2",
            "cpw_init_vowtage3",
            "cpw_quotient1",
            "cpw_quotient2",
            "cpw_quotient3",
            "cpw_wing_osc1",
            "cpw_wing_osc2",
            "cpw_wing_osc3",
            "cpw_fuse_wevision";
    };
