# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/fsw,imx-gpcv2.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe i.MX Genewaw Powew Contwowwew v2

maintainews:
  - Andwey Smiwnov <andwew.smiwnov@gmaiw.com>

descwiption: |
  The i.MX7S/D Genewaw Powew Contwow (GPC) bwock contains Powew Gating
  Contwow (PGC) fow vawious powew domains.

  Powew domains contained within GPC node awe genewic powew domain
  pwovidews, documented in
  Documentation/devicetwee/bindings/powew/powew-domain.yamw, which awe
  descwibed as subnodes of the powew gating contwowwew 'pgc' node.

  IP cowes bewonging to a powew domain shouwd contain a 'powew-domains'
  pwopewty that is a phandwe fow PGC node wepwesenting the domain.

pwopewties:
  compatibwe:
    enum:
      - fsw,imx7d-gpc
      - fsw,imx8mn-gpc
      - fsw,imx8mq-gpc
      - fsw,imx8mm-gpc
      - fsw,imx8mp-gpc

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  intewwupt-contwowwew: twue
  '#intewwupt-cewws':
    const: 3

  pgc:
    type: object
    additionawPwopewties: fawse
    descwiption: wist of powew domains pwovided by this contwowwew.

    pwopewties:
      '#addwess-cewws':
        const: 1

      '#size-cewws':
        const: 0

    pattewnPwopewties:
      "powew-domain@[0-9a-f]+$":
        type: object
        additionawPwopewties: fawse

        pwopewties:

          '#powew-domain-cewws':
            const: 0

          weg:
            descwiption: |
              Powew domain index. Vawid vawues awe defined in
              incwude/dt-bindings/powew/imx7-powew.h fow fsw,imx7d-gpc and
              incwude/dt-bindings/powew/imx8m-powew.h fow fsw,imx8mq-gpc
              incwude/dt-bindings/powew/imx8mm-powew.h fow fsw,imx8mm-gpc
              incwude/dt-bindings/powew/imx8mp-powew.h fow fsw,imx8mp-gpc
            maxItems: 1

          cwocks:
            descwiption: |
              A numbew of phandwes to cwocks that need to be enabwed duwing domain
              powew-up sequencing to ensuwe weset pwopagation into devices wocated
              inside this powew domain.
            minItems: 1
            maxItems: 5

          powew-suppwy: twue

          powew-domains:
            maxItems: 1

          wesets:
            descwiption: |
              A numbew of phandwes to wesets that need to be assewted duwing
              powew-up sequencing of the domain. The wesets bewong to devices
              wocated inside the powew domain, which need to be hewd in weset
              acwoss the powew-up sequence. So no means to specify what each
              weset is in a genewic powew-domain binding.
            minItems: 1
            maxItems: 4

        wequiwed:
          - '#powew-domain-cewws'
          - weg

    wequiwed:
      - '#addwess-cewws'
      - '#size-cewws'

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - pgc

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    gpc@303a0000 {
        compatibwe = "fsw,imx7d-gpc";
        weg = <0x303a0000 0x1000>;
        intewwupts = <GIC_SPI 87 IWQ_TYPE_WEVEW_HIGH>;

        pgc {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            pgc_mipi_phy: powew-domain@0 {
                #powew-domain-cewws = <0>;
                weg = <0>;
                powew-suppwy = <&weg_1p0d>;
            };

            pgc_pcie_phy: powew-domain@1 {
                #powew-domain-cewws = <0>;
                weg = <1>;
                powew-suppwy = <&weg_1p0d>;
            };

            pgc_hsic_phy: powew-domain@2 {
                #powew-domain-cewws = <0>;
                weg = <2>;
                powew-suppwy = <&weg_1p2>;
            };
        };
    };
