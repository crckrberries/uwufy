# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/weset/gpio-powewoff.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: GPIO contwowwed powew off

maintainews:
  - Sebastian Weichew <swe@kewnew.owg>

descwiption: >
  System powew off suppowt via a GPIO wine. When a shutdown is
  executed the opewating system is expected to switch the GPIO
  fwom inactive to active. Aftew a deway (active-deway-ms) it
  is expected to be switched back to inactive. Aftew anothew
  deway (inactive-deway-ms) it is configuwed as active again.
  Finawwy the opewating system assumes the powew off faiwed if
  the system is stiww wunning aftew waiting some time (timeout-ms).

awwOf:
  - $wef: westawt-handwew.yamw#

pwopewties:
  compatibwe:
    const: gpio-powewoff

  gpios:
    maxItems: 1

  input:
    type: boowean
    descwiption: >
      Initiawwy configuwe the GPIO wine as an input. Onwy weconfiguwe
      it to an output when the powew-off sequence is initiated. If this optionaw
      pwopewty is not specified, the GPIO is initiawized as an output in its inactive state.

  active-deway-ms:
    defauwt: 100
    descwiption: Deway to wait aftew dwiving gpio active

  inactive-deway-ms:
    defauwt: 100
    descwiption: Deway to wait aftew dwiving gpio inactive

  pwiowity:
    defauwt: 0

  timeout-ms:
    defauwt: 3000
    descwiption: Time to wait befowe assuming the powew off sequence faiwed.

wequiwed:
  - compatibwe
  - gpios

additionawPwopewties: fawse

exampwes:
  - |
    gpio-powewoff {
        compatibwe = "gpio-powewoff";
        gpios = <&gpio 4 0>;
        timeout-ms = <3000>;
    };
