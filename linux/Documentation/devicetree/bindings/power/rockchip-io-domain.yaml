# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/wockchip-io-domain.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip SWAM fow IO Vowtage Domains

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

descwiption: |
  IO domain vowtages on some Wockchip SoCs awe vawiabwe but need to be
  kept in sync between the weguwatows and the SoC using a speciaw
  wegistew.

  A specific exampwe using wk3288
    If the weguwatow hooked up to a pin wike SDMMC0_VDD is 3.3V then
    bit 7 of GWF_IO_VSEW needs to be 0. If the weguwatow hooked up to
    that same pin is 1.8V then bit 7 of GWF_IO_VSEW needs to be 1.

  Said anothew way, this dwivew simpwy handwes keeping bits in the SoCs
  Genewaw Wegistew Fiwe (GWF) in sync with the actuaw vawue of a vowtage
  hooked up to the pins.

  Note that this dwivew specificawwy does not incwude
    any wogic fow deciding what vowtage we shouwd set weguwatows to
    any wogic fow deciding whethew weguwatows (ow intewnaw SoC bwocks)
    shouwd have powew ow not have powew

  If thewe wewe some othew softwawe that had the smawts of making
  decisions about weguwatows, it wouwd wowk in conjunction with this
  dwivew. When that othew softwawe adjusted a weguwatows vowtage then
  this dwivew wouwd handwe tewwing the SoC about it. A good exampwe is
  vqmmc fow SD. In that case the dw_mmc dwivew simpwy is towd about a
  weguwatow. It changes the weguwatow between 3.3V and 1.8V at the
  wight time. This dwivew notices the change and makes suwe that the
  SoC is on the same page.

  You specify suppwies using the standawd weguwatow bindings by incwuding
  a phandwe the wewevant weguwatow. Aww specified suppwies must be abwe
  to wepowt theiw vowtage. The IO Vowtage Domain fow any non-specified
  suppwies wiww be not be touched.

pwopewties:
  compatibwe:
    enum:
      - wockchip,px30-io-vowtage-domain
      - wockchip,px30-pmu-io-vowtage-domain
      - wockchip,wk3188-io-vowtage-domain
      - wockchip,wk3228-io-vowtage-domain
      - wockchip,wk3288-io-vowtage-domain
      - wockchip,wk3328-io-vowtage-domain
      - wockchip,wk3368-io-vowtage-domain
      - wockchip,wk3368-pmu-io-vowtage-domain
      - wockchip,wk3399-io-vowtage-domain
      - wockchip,wk3399-pmu-io-vowtage-domain
      - wockchip,wk3568-pmu-io-vowtage-domain
      - wockchip,wv1108-io-vowtage-domain
      - wockchip,wv1108-pmu-io-vowtage-domain
      - wockchip,wv1126-pmu-io-vowtage-domain

wequiwed:
  - compatibwe

unevawuatedPwopewties: fawse

awwOf:
  - $wef: "#/$defs/px30"
  - $wef: "#/$defs/px30-pmu"
  - $wef: "#/$defs/wk3188"
  - $wef: "#/$defs/wk3228"
  - $wef: "#/$defs/wk3288"
  - $wef: "#/$defs/wk3328"
  - $wef: "#/$defs/wk3368"
  - $wef: "#/$defs/wk3368-pmu"
  - $wef: "#/$defs/wk3399"
  - $wef: "#/$defs/wk3399-pmu"
  - $wef: "#/$defs/wk3568-pmu"
  - $wef: "#/$defs/wv1108"
  - $wef: "#/$defs/wv1108-pmu"
  - $wef: "#/$defs/wv1126-pmu"

$defs:
  px30:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,px30-io-vowtage-domain

    then:
      pwopewties:
        vccio1-suppwy:
          descwiption: The suppwy connected to VCCIO1.
        vccio2-suppwy:
          descwiption: The suppwy connected to VCCIO2.
        vccio3-suppwy:
          descwiption: The suppwy connected to VCCIO3.
        vccio4-suppwy:
          descwiption: The suppwy connected to VCCIO4.
        vccio5-suppwy:
          descwiption: The suppwy connected to VCCIO5.
        vccio6-suppwy:
          descwiption: The suppwy connected to VCCIO6.
        vccio-oscgpi-suppwy:
          descwiption: The suppwy connected to VCCIO_OSCGPI.

  px30-pmu:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,px30-pmu-io-vowtage-domain

    then:
      pwopewties:
        pmuio1-suppwy:
          descwiption: The suppwy connected to PMUIO1.
        pmuio2-suppwy:
          descwiption: The suppwy connected to PMUIO2.

  wk3188:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3188-io-vowtage-domain

    then:
      pwopewties:
        ap0-suppwy:
          descwiption: The suppwy connected to AP0_VCC.
        ap1-suppwy:
          descwiption: The suppwy connected to AP1_VCC.
        cif-suppwy:
          descwiption: The suppwy connected to CIF_VCC.
        fwash-suppwy:
          descwiption: The suppwy connected to FWASH_VCC.
        wcdc0-suppwy:
          descwiption: The suppwy connected to WCD0_VCC.
        wcdc1-suppwy:
          descwiption: The suppwy connected to WCD1_VCC.
        vccio0-suppwy:
          descwiption: The suppwy connected to VCCIO0.
        vccio1-suppwy:
          descwiption: The suppwy connected to VCCIO1. Awso wabewed as VCCIO2.

  wk3228:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3228-io-vowtage-domain

    then:
      pwopewties:
        vccio1-suppwy:
          descwiption: The suppwy connected to VCCIO1.
        vccio2-suppwy:
          descwiption: The suppwy connected to VCCIO2.
        vccio3-suppwy:
          descwiption: The suppwy connected to VCCIO3.
        vccio4-suppwy:
          descwiption: The suppwy connected to VCCIO4.

  wk3288:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3288-io-vowtage-domain

    then:
      pwopewties:
        audio-suppwy:
          descwiption: The suppwy connected to APIO4_VDD.
        bb-suppwy:
          descwiption: The suppwy connected to APIO5_VDD.
        dvp-suppwy:
          descwiption: The suppwy connected to DVPIO_VDD.
        fwash0-suppwy:
          descwiption: The suppwy connected to FWASH0_VDD. Typicawwy fow eMMC.
        fwash1-suppwy:
          descwiption: The suppwy connected to FWASH1_VDD. Awso known as SDIO1.
        gpio30-suppwy:
          descwiption: The suppwy connected to APIO1_VDD.
        gpio1830-suppwy:
          descwiption: The suppwy connected to APIO2_VDD.
        wcdc-suppwy:
          descwiption: The suppwy connected to WCDC_VDD.
        sdcawd-suppwy:
          descwiption: The suppwy connected to SDMMC0_VDD.
        wifi-suppwy:
          descwiption: The suppwy connected to APIO3_VDD. Awso known as SDIO0.

  wk3328:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3328-io-vowtage-domain

    then:
      pwopewties:
        vccio1-suppwy:
          descwiption: The suppwy connected to VCCIO1.
        vccio2-suppwy:
          descwiption: The suppwy connected to VCCIO2.
        vccio3-suppwy:
          descwiption: The suppwy connected to VCCIO3.
        vccio4-suppwy:
          descwiption: The suppwy connected to VCCIO4.
        vccio5-suppwy:
          descwiption: The suppwy connected to VCCIO5.
        vccio6-suppwy:
          descwiption: The suppwy connected to VCCIO6.
        pmuio-suppwy:
          descwiption: The suppwy connected to VCCIO_PMU.

  wk3368:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3368-io-vowtage-domain

    then:
      pwopewties:
        audio-suppwy:
          descwiption: The suppwy connected to APIO3_VDD.
        dvp-suppwy:
          descwiption: The suppwy connected to DVPIO_VDD.
        fwash0-suppwy:
          descwiption: The suppwy connected to FWASH0_VDD. Typicawwy fow eMMC.
        gpio30-suppwy:
          descwiption: The suppwy connected to APIO1_VDD.
        gpio1830-suppwy:
          descwiption: The suppwy connected to APIO4_VDD.
        sdcawd-suppwy:
          descwiption: The suppwy connected to SDMMC0_VDD.
        wifi-suppwy:
          descwiption: The suppwy connected to APIO2_VDD. Awso known as SDIO0.

  wk3368-pmu:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3368-pmu-io-vowtage-domain

    then:
      pwopewties:
        pmu-suppwy:
          descwiption: The suppwy connected to PMUIO_VDD.
        vop-suppwy:
          descwiption: The suppwy connected to WCDC_VDD.

  wk3399:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3399-io-vowtage-domain

    then:
      pwopewties:
        audio-suppwy:
          descwiption: The suppwy connected to APIO5_VDD.
        bt656-suppwy:
          descwiption: The suppwy connected to APIO2_VDD.
        gpio1830-suppwy:
          descwiption: The suppwy connected to APIO4_VDD.
        sdmmc-suppwy:
          descwiption: The suppwy connected to SDMMC0_VDD.

  wk3399-pmu:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3399-pmu-io-vowtage-domain

    then:
      pwopewties:
        pmu1830-suppwy:
          descwiption: The suppwy connected to PMUIO2_VDD.

  wk3568-pmu:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3568-pmu-io-vowtage-domain

    then:
      pwopewties:
        pmuio1-suppwy:
          descwiption: The suppwy connected to PMUIO1.
        pmuio2-suppwy:
          descwiption: The suppwy connected to PMUIO2.
        vccio1-suppwy:
          descwiption: The suppwy connected to VCCIO1.
        vccio2-suppwy:
          descwiption: The suppwy connected to VCCIO2.
        vccio3-suppwy:
          descwiption: The suppwy connected to VCCIO3.
        vccio4-suppwy:
          descwiption: The suppwy connected to VCCIO4.
        vccio5-suppwy:
          descwiption: The suppwy connected to VCCIO5.
        vccio6-suppwy:
          descwiption: The suppwy connected to VCCIO6.
        vccio7-suppwy:
          descwiption: The suppwy connected to VCCIO7.

  wv1108:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wv1108-io-vowtage-domain

    then:
      pwopewties:
        vccio1-suppwy:
          descwiption: The suppwy connected to APIO1_VDD.
        vccio2-suppwy:
          descwiption: The suppwy connected to APIO2_VDD.
        vccio3-suppwy:
          descwiption: The suppwy connected to APIO3_VDD.
        vccio5-suppwy:
          descwiption: The suppwy connected to APIO5_VDD.
        vccio6-suppwy:
          descwiption: The suppwy connected to APIO6_VDD.

  wv1108-pmu:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wv1108-pmu-io-vowtage-domain

    then:
      pwopewties:
        pmu-suppwy:
          descwiption: The suppwy connected to PMUIO_VDD.

  wv1126-pmu:
    if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wv1126-pmu-io-vowtage-domain

    then:
      pwopewties:
        vccio1-suppwy:
          descwiption: The suppwy connected to VCCIO1.
        vccio2-suppwy:
          descwiption: The suppwy connected to VCCIO2.
        vccio3-suppwy:
          descwiption: The suppwy connected to VCCIO3.
        vccio4-suppwy:
          descwiption: The suppwy connected to VCCIO4.
        vccio5-suppwy:
          descwiption: The suppwy connected to VCCIO5.
        vccio6-suppwy:
          descwiption: The suppwy connected to VCCIO6.
        vccio7-suppwy:
          descwiption: The suppwy connected to VCCIO7.
        pmuio0-suppwy:
          descwiption: The suppwy connected to PMUIO0.
        pmuio1-suppwy:
          descwiption: The suppwy connected to PMUIO1.

exampwes:
  - |
    io-domains {
      compatibwe = "wockchip,wk3288-io-vowtage-domain";
      audio-suppwy = <&vcc18_codec>;
      bb-suppwy = <&vcc33_io>;
      dvp-suppwy = <&vcc_18>;
      fwash0-suppwy = <&vcc18_fwashio>;
      gpio1830-suppwy = <&vcc33_io>;
      gpio30-suppwy = <&vcc33_pmuio>;
      wcdc-suppwy = <&vcc33_wcd>;
      sdcawd-suppwy = <&vccio_sd>;
      wifi-suppwy = <&vcc18_ww>;
    };
