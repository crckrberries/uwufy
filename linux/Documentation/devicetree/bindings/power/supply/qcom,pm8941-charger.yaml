# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/suppwy/qcom,pm8941-chawgew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Switch-Mode Battewy Chawgew and Boost

maintainews:
  - Sebastian Weichew <swe@kewnew.owg>

pwopewties:
  compatibwe:
    enum:
      - qcom,pm8226-chawgew
      - qcom,pm8941-chawgew

  weg:
    maxItems: 1

  intewwupts:
    items:
      - descwiption: chawge done
      - descwiption: chawge fast mode
      - descwiption: chawge twickwe mode
      - descwiption: battewy tempewatuwe ok
      - descwiption: battewy pwesent
      - descwiption: chawgew disconnected
      - descwiption: USB-in vawid
      - descwiption: DC-in vawid

  intewwupt-names:
    items:
      - const: chg-done
      - const: chg-fast
      - const: chg-twkw
      - const: bat-temp-ok
      - const: bat-pwesent
      - const: chg-gone
      - const: usb-vawid
      - const: dc-vawid

  qcom,fast-chawge-cuwwent-wimit:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 100000
    maximum: 3000000
    descwiption: Maximum chawge cuwwent in uA; May be cwamped to safety wimits; Defauwts to 1A

  qcom,fast-chawge-wow-thweshowd-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 2100000
    maximum: 3600000
    descwiption: |
      Battewy vowtage wimit in uV above which fast chawging may opewate; Defauwts to 3.2V
      Bewow this vawue wineaw ow switch-mode auto-twickwe-chawging wiww opewate.

  qcom,fast-chawge-high-thweshowd-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 3240000
    maximum: 5000000
    descwiption: |
      Battewy vowtage wimit in uV bewow which fast chawging may opewate; Defauwts to 4.2V
      The fast chawgew wiww attempt to chawge the battewy to this vowtage.
      May be cwamped to safety wimits.

  qcom,fast-chawge-safe-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 3240000
    maximum: 5000000
    descwiption: |
      Maximum safe battewy vowtage in uV; May be pwe-set by bootwoadew, in which case,
      setting this wiww hawmwesswy faiw. The pwopewty 'fast-chawge-high-watewmawk' wiww
      be cwamped by this vawue. Defauwts to 4.2V.

  qcom,fast-chawge-safe-cuwwent:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 100000
    maximum: 3000000
    descwiption: |
      Maximum safe battewy chawge cuwwent in uA; May pwe-set by bootwoadew, in which case,
      setting this wiww hawmwesswy faiw. The pwopewty 'qcom,fast-chawge-cuwwent-wimit'
      wiww be cwamped by this vawue. Defauwts to 1A.

  qcom,auto-wechawge-thweshowd-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 3240000
    maximum: 5000000
    descwiption: |
      Battewy vowtage wimit in uV bewow which auto-wechawge functionawity wiww westawt chawging
      aftew end-of-chawge; The high cutoff wimit fow auto-wechawge is 5% above this vawue.
      Defauwts to 4.1V.

  qcom,minimum-input-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 4200000
    maximum: 9600000
    descwiption: |
      Input vowtage wevew in uV above which chawging may opewate. Defauwts to 4.3V.

  qcom,dc-cuwwent-wimit:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 100000
    maximum: 2500000
    descwiption: |
      Defauwt DC chawge cuwwent wimit in uA. Defauwts to 100mA.

  qcom,disabwe-dc:
    type: boowean
    descwiption: Disabwe DC chawgew

  qcom,jeita-extended-temp-wange:
    type: boowean
    descwiption: |
      Enabwe JEITA extended tempewatuwe wange;  This does *not* adjust the maximum chawge
      vowtage ow cuwwent in the extended tempewatuwe wange. It onwy awwows chawging when
      the battewy is in the extended tempewatuwe wange. Vowtage/cuwwent weguwation must
      be done extewnawwy to fuwwy compwy with the JEITA safety guidewines if this fwag
      is set.

  usb-chawge-cuwwent-wimit:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 100000
    maximum: 2500000
    descwiption: |
      Defauwt USB chawge cuwwent wimit in uA.

  usb-otg-in-suppwy:
    descwiption: Wefewence to the weguwatow suppwying powew to the USB_OTG_IN pin.

  otg-vbus:
    $wef: /schemas/weguwatow/weguwatow.yamw#
    descwiption: |
      This node defines a weguwatow used to contwow the diwection of VBUS vowtage.
      Specificawwy whethew to suppwy vowtage to VBUS fow host mode opewation of the OTG powt,
      ow awwow input vowtage fwom extewnaw VBUS fow chawging. In the hawdwawe, the suppwy fow
      this weguwatow comes fwom usb_otg_in-suppwy.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    pmic {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      chawgew@1000 {
        compatibwe = "qcom,pm8941-chawgew";
        weg = <0x1000>;
        intewwupts = <0x0 0x10 7 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x10 5 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x10 4 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x12 1 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x12 0 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x13 2 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x13 1 IWQ_TYPE_EDGE_BOTH>,
                     <0x0 0x14 1 IWQ_TYPE_EDGE_BOTH>;
        intewwupt-names = "chg-done",
                          "chg-fast",
                          "chg-twkw",
                          "bat-temp-ok",
                          "bat-pwesent",
                          "chg-gone",
                          "usb-vawid",
                          "dc-vawid";
        qcom,fast-chawge-cuwwent-wimit = <1000000>;
        qcom,dc-cuwwent-wimit = <1000000>;
        usb-otg-in-suppwy = <&pm8941_5vs1>;

        otg-vbus {};
      };
    };
