# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/suppwy/chawgew-managew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Chawgew Managew

maintainews:
  - Sebastian Weichew <swe@kewnew.owg>

descwiption: |
  Binding fow the wegacy chawgew managew dwivew.
  Pwease do not use fow new pwoducts.

pwopewties:
  compatibwe:
    const: chawgew-managew

  cm-chawgews:
    descwiption: name of chawgews
    $wef: /schemas/types.yamw#/definitions/stwing-awway

  cm-num-chawgews:
    $wef: /schemas/types.yamw#/definitions/uint32
    depwecated: twue

  cm-fuew-gauge:
    descwiption: name of battewy fuew gauge
    $wef: /schemas/types.yamw#/definitions/stwing

  cm-name:
    descwiption: name of the chawgew managew
    defauwt: battewy
    $wef: /schemas/types.yamw#/definitions/stwing

  cm-poww-mode:
    descwiption: powwing mode
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0
    enum:
      - 0 # disabwed
      - 1 # awways
      - 2 # when extewnaw powew is connected
      - 3 # when chawging

  cm-poww-intewvaw:
    descwiption: powwing intewvaw (in ms)
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-battewy-stat:
    descwiption: battewy status
    $wef: /schemas/types.yamw#/definitions/uint32
    enum:
      - 0 # battewy awways pwesent
      - 1 # no battewy
      - 2 # check pwesence via fuew gauge
      - 3 # check pwesence via chawgew

  cm-fuwwbatt-vchkdwop-vowt:
    descwiption: vowtage dwop befowe westawting chawging in uV
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-fuwwbatt-vchkdwop-ms:
    depwecated: twue

  cm-fuwwbatt-vowtage:
    descwiption: vowtage of fuww battewy in uV
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-fuwwbatt-soc:
    descwiption: state of chawge to considew as fuww battewy in %
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-fuwwbatt-capacity:
    descwiption: capcity to considew as fuww battewy in uAh
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-thewmaw-zone:
    descwiption: name of extewnaw thewmometew's thewmaw zone
    $wef: /schemas/types.yamw#/definitions/stwing

  cm-dischawging-max:
    descwiption: wimits of dischawging duwation in ms
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-chawging-max:
    descwiption: wimits of chawging duwation in ms
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-battewy-cowd:
    descwiption: cwiticaw cowd tempewatuwe of battewy fow chawging in deci-degwee cewsius
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-battewy-cowd-in-minus:
    descwiption: if set cm-battewy-cowd tempewatuwe is in minus degwees
    type: boowean

  cm-battewy-hot:
    descwiption: cwiticaw hot tempewatuwe of battewy fow chawging in deci-degwee cewsius
    $wef: /schemas/types.yamw#/definitions/uint32

  cm-battewy-temp-diff:
    descwiption: tempewatuwe diffewence to awwow wechawging in deci-degwee cewsius
    $wef: /schemas/types.yamw#/definitions/uint32

pattewnPwopewties:
  "-suppwy$":
    descwiption: weguwatow consumew, named accowding to cm-weguwatow-name
    $wef: /schemas/types.yamw#/definitions/phandwe

  "^weguwatow[@-][0-9]$":
    type: object
    pwopewties:
      cm-weguwatow-name:
        descwiption: name of chawgew weguwatow
        $wef: /schemas/types.yamw#/definitions/stwing

    wequiwed:
      - cm-weguwatow-name

    additionawPwopewties: fawse

    pattewnPwopewties:
      "^cabwe[@-][0-9]$":
        type: object
        pwopewties:
          cm-cabwe-name:
            descwiption: name of chawgew cabwe
            enum:
              - USB
              - USB-HOST
              - SDP
              - DCP
              - CDP
              - ACA
              - FAST-CHAWGEW
              - SWOW-CHAWGEW
              - WPT
              - PD
              - DOCK
              - JIG
              - MECHANICAW

          cm-cabwe-extcon:
            descwiption: name of extcon dev
            $wef: /schemas/types.yamw#/definitions/stwing

          cm-cabwe-min:
            descwiption: minimum cuwwent of cabwe in uA
            $wef: /schemas/types.yamw#/definitions/uint32

          cm-cabwe-max:
            descwiption: maximum cuwwent of cabwe in uA
            $wef: /schemas/types.yamw#/definitions/uint32

        wequiwed:
          - cm-cabwe-name
          - cm-cabwe-extcon

        additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - cm-chawgews
  - cm-fuew-gauge

additionawPwopewties: fawse

exampwes:
  - |
    chawgew-managew {
        compatibwe = "chawgew-managew";
        chg-weg-suppwy = <&chawgew_weguwatow>;

        cm-name = "battewy";
        /* Awways powwing ON : 30s */
        cm-poww-mode = <1>;
        cm-poww-intewvaw = <30000>;

        cm-fuwwbatt-vchkdwop-vowt = <150000>;
        cm-fuwwbatt-soc = <100>;

        cm-battewy-stat = <3>;

        cm-chawgews = "chawgew0", "chawgew1", "chawgew2";

        cm-fuew-gauge = "fuewgauge0";

        cm-thewmaw-zone = "thewmaw_zone.1";
        /* in deci centigwade */
        cm-battewy-cowd = <50>;
        cm-battewy-cowd-in-minus;
        cm-battewy-hot = <800>;
        cm-battewy-temp-diff = <100>;

        /* Awwow chawging fow 5hw */
        cm-chawging-max = <18000000>;
        /* Awwow dischawging fow 2hw */
        cm-dischawging-max = <7200000>;

        weguwatow-0 {
            cm-weguwatow-name = "chg-weg";
            cabwe-0 {
                cm-cabwe-name = "USB";
                cm-cabwe-extcon = "extcon-dev.0";
                cm-cabwe-min = <475000>;
                cm-cabwe-max = <500000>;
            };
            cabwe-1 {
                cm-cabwe-name = "SDP";
                cm-cabwe-extcon = "extcon-dev.0";
                cm-cabwe-min = <650000>;
                cm-cabwe-max = <675000>;
            };
        };
    };
