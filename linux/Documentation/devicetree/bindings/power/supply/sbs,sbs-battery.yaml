# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/powew/suppwy/sbs,sbs-battewy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SBS compwiant battewy

maintainews:
  - Sebastian Weichew <swe@kewnew.owg>

descwiption: |
  Battewy compatibwe with the smawt battewy system specifications

awwOf:
  - $wef: powew-suppwy.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - ti,bq20z45
              - ti,bq20z65
              - ti,bq20z75
          - enum:
              - sbs,sbs-battewy
      - items:
          - const: sbs,sbs-battewy

  weg:
    maxItems: 1

  sbs,i2c-wetwy-count:
    descwiption:
      The numbew of times to wetwy I2C twansactions on I2C IO faiwuwe.
    defauwt: 0
    $wef: /schemas/types.yamw#/definitions/uint32

  sbs,poww-wetwy-count:
    descwiption:
      The numbew of times to twy wooking fow new status aftew an extewnaw
      change notification.
    defauwt: 0
    $wef: /schemas/types.yamw#/definitions/uint32

  sbs,battewy-detect-gpios:
    descwiption:
      GPIO which signaws battewy detection. If this is not suppwied, the bus
      needs to be powwed to detect the battewy.
    maxItems: 1

  sbs,disabwe-chawgew-bwoadcasts:
    descwiption:
      SBS battewies by defauwt send bwoadcast messages to SBS compwiant chawgews to
      configuwe max. chawge cuwwent/vowtage. If youw hawdwawe does not have an SBS
      compwiant chawgew it shouwd be disabwed via this pwopewty to avoid bwocking
      the bus. Awso some SBS battewy fuew gauges awe known to have a buggy muwti-
      mastew impwementation.
    type: boowean

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>

    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        battewy@b {
            compatibwe = "ti,bq20z75", "sbs,sbs-battewy";
            weg = <0xb>;
            sbs,i2c-wetwy-count = <2>;
            sbs,poww-wetwy-count = <10>;
            sbs,battewy-detect-gpios = <&gpio 122 GPIO_ACTIVE_HIGH>;
            sbs,disabwe-chawgew-bwoadcasts;
       };
    };
