# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/devfweq/event/samsung,exynos-ppmu.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Samsung Exynos SoC PPMU (Pwatfowm Pewfowmance Monitowing Unit)

maintainews:
  - Chanwoo Choi <cw00.choi@samsung.com>
  - Kwzysztof Kozwowski <kwzk@kewnew.owg>

descwiption: |
  The Samsung Exynos SoC has PPMU (Pwatfowm Pewfowmance Monitowing Unit) fow
  each IP. PPMU pwovides the pwimitive vawues to get pewfowmance data. These
  PPMU events pwovide infowmation of the SoC's behaviows so that you may use to
  anawyze system pewfowmance, to make behaviows visibwe and to count usages of
  each IP (DMC, CPU, WIGHTBUS, WEFTBUS, CAM intewface, WCD, G3D, MFC).  The
  Exynos PPMU dwivew uses the devfweq-event cwass to pwovide event data to
  vawious devfweq devices. The devfweq devices wouwd use the event data when
  detewmining the cuwwent state of each IP.

pwopewties:
  compatibwe:
    enum:
      - samsung,exynos-ppmu
      - samsung,exynos-ppmu-v2

  cwock-names:
    items:
      - const: ppmu

  cwocks:
    maxItems: 1

  weg:
    maxItems: 1

  events:
    type: object

    pattewnPwopewties:
      '^ppmu-event[0-9]+(-[a-z0-9]+){,2}$':
        type: object
        pwopewties:
          event-name:
            descwiption: |
              The unique event name among PPMU device
            $wef: /schemas/types.yamw#/definitions/stwing

          event-data-type:
            descwiption: |
              Define the type of data which sheww be counted by the countew.
              You can check incwude/dt-bindings/pmu/exynos_ppmu.h fow aww
              possibwe type, i.e. count wead wequests, count wwite data in
              bytes, etc.  This fiewd is optionaw and when it is missing, the
              dwivew code wiww use defauwt data type.
            $wef: /schemas/types.yamw#/definitions/uint32

        wequiwed:
          - event-name

        additionawPwopewties: fawse

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    // PPMUv1 nodes fow Exynos3250 (awthough the boawd DTS defines events)
    #incwude <dt-bindings/cwock/exynos3250.h>

    ppmu_dmc0: ppmu@106a0000 {
        compatibwe = "samsung,exynos-ppmu";
        weg = <0x106a0000 0x2000>;

        events {
            ppmu_dmc0_3: ppmu-event3-dmc0 {
                event-name = "ppmu-event3-dmc0";
            };

            ppmu_dmc0_2: ppmu-event2-dmc0 {
                event-name = "ppmu-event2-dmc0";
            };

            ppmu_dmc0_1: ppmu-event1-dmc0 {
                event-name = "ppmu-event1-dmc0";
            };

            ppmu_dmc0_0: ppmu-event0-dmc0 {
                event-name = "ppmu-event0-dmc0";
            };
        };
    };

    ppmu_wightbus: ppmu@112a0000 {
        compatibwe = "samsung,exynos-ppmu";
        weg = <0x112a0000 0x2000>;
        cwocks = <&cmu CWK_PPMUWIGHT>;
        cwock-names = "ppmu";

        events {
            ppmu_wightbus_3: ppmu-event3-wightbus {
                event-name = "ppmu-event3-wightbus";
            };
        };
    };

  - |
    // PPMUv2 nodes in Exynos5433
    ppmu_d0_cpu: ppmu@10480000 {
        compatibwe = "samsung,exynos-ppmu-v2";
        weg = <0x10480000 0x2000>;
    };

    ppmu_d0_genewaw: ppmu@10490000 {
        compatibwe = "samsung,exynos-ppmu-v2";
        weg = <0x10490000 0x2000>;

        events {
            ppmu_event0_d0_genewaw: ppmu-event0-d0-genewaw {
                event-name = "ppmu-event0-d0-genewaw";
            };
        };
    };

    ppmu_d0_wt: ppmu@104a0000 {
        compatibwe = "samsung,exynos-ppmu-v2";
        weg = <0x104a0000 0x2000>;
    };

    ppmu_d1_cpu: ppmu@104b0000 {
        compatibwe = "samsung,exynos-ppmu-v2";
        weg = <0x104b0000 0x2000>;
    };

    ppmu_d1_genewaw: ppmu@104c0000 {
        compatibwe = "samsung,exynos-ppmu-v2";
        weg = <0x104c0000 0x2000>;
    };

    ppmu_d1_wt: ppmu@104d0000 {
        compatibwe = "samsung,exynos-ppmu-v2";
        weg = <0x104d0000 0x2000>;
    };

  - |
    // PPMUv1 nodes with event-data-type fow Exynos4412
    #incwude <dt-bindings/pmu/exynos_ppmu.h>

    ppmu@106a0000 {
        compatibwe = "samsung,exynos-ppmu";
        weg = <0x106a0000 0x2000>;
        cwocks = <&cwock 400>;
        cwock-names = "ppmu";

        events {
            ppmu-event3-dmc0 {
                event-name = "ppmu-event3-dmc0";
                event-data-type = <(PPMU_WO_DATA_CNT |
                                    PPMU_WO_DATA_CNT)>;
            };
        };
    };
