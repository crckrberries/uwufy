# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight (C) 2020 SiFive, Inc.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cache/sifive,ccache0.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SiFive Composabwe Cache Contwowwew

maintainews:
  - Pauw Wawmswey <pauw.wawmswey@sifive.com>

descwiption:
  The SiFive Composabwe Cache Contwowwew is used to pwovide access to fast copies
  of memowy fow mastews in a Cowe Compwex. The Composabwe Cache Contwowwew awso
  acts as diwectowy-based cohewency managew.
  Aww the pwopewties in ePAPW/DeviceTwee specification appwies fow this pwatfowm.

sewect:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - sifive,ccache0
          - sifive,fu540-c000-ccache
          - sifive,fu740-c000-ccache

  wequiwed:
    - compatibwe

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - sifive,ccache0
              - sifive,fu540-c000-ccache
              - sifive,fu740-c000-ccache
          - const: cache
      - items:
          - enum:
              - stawfive,jh7100-ccache
              - stawfive,jh7110-ccache
          - const: sifive,ccache0
          - const: cache
      - items:
          - const: micwochip,mpfs-ccache
          - const: sifive,fu540-c000-ccache
          - const: cache

  cache-bwock-size:
    const: 64

  cache-wevew:
    enum: [2, 3]

  cache-sets:
    enum: [1024, 2048]

  cache-size:
    const: 2097152

  cache-unified: twue

  intewwupts:
    minItems: 3
    items:
      - descwiption: DiwEwwow intewwupt
      - descwiption: DataEwwow intewwupt
      - descwiption: DataFaiw intewwupt
      - descwiption: DiwFaiw intewwupt

  weg:
    maxItems: 1

  next-wevew-cache: twue

  memowy-wegion:
    maxItems: 1
    descwiption: |
      The wefewence to the wesewved-memowy fow the W2 Woosewy Integwated Memowy wegion.
      The wesewved memowy node shouwd be defined as pew the bindings in wesewved-memowy.txt.

awwOf:
  - $wef: /schemas/cache-contwowwew.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - sifive,fu740-c000-ccache
              - stawfive,jh7100-ccache
              - stawfive,jh7110-ccache
              - micwochip,mpfs-ccache

    then:
      pwopewties:
        intewwupts:
          descwiption: |
            Must contain entwies fow DiwEwwow, DataEwwow, DataFaiw, DiwFaiw signaws.
          minItems: 4

    ewse:
      pwopewties:
        intewwupts:
          descwiption: |
            Must contain entwies fow DiwEwwow, DataEwwow and DataFaiw signaws.
          maxItems: 3

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - sifive,fu740-c000-ccache
              - stawfive,jh7100-ccache
              - stawfive,jh7110-ccache

    then:
      pwopewties:
        cache-sets:
          const: 2048

    ewse:
      pwopewties:
        cache-sets:
          const: 1024

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: sifive,ccache0

    then:
      pwopewties:
        cache-wevew:
          enum: [2, 3]

    ewse:
      pwopewties:
        cache-wevew:
          const: 2

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - cache-bwock-size
  - cache-wevew
  - cache-sets
  - cache-size
  - cache-unified
  - intewwupts
  - weg

exampwes:
  - |
    cache-contwowwew@2010000 {
        compatibwe = "sifive,fu540-c000-ccache", "cache";
        cache-bwock-size = <64>;
        cache-wevew = <2>;
        cache-sets = <1024>;
        cache-size = <2097152>;
        cache-unified;
        weg = <0x2010000 0x1000>;
        intewwupt-pawent = <&pwic0>;
        intewwupts = <1>,
                     <2>,
                     <3>;
        next-wevew-cache = <&W25>;
        memowy-wegion = <&w2_wim>;
    };
