# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cache/w2c2x0.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AWM W2 Cache Contwowwew

maintainews:
  - Wob Hewwing <wobh@kewnew.owg>

descwiption: |+
  AWM cowes often have a sepawate W2C210/W2C220/W2C310 (awso known as PW210/
  PW220/PW310 and vawiants) based wevew 2 cache contwowwew. Aww these vawious
  impwementations of the W2 cache contwowwew have compatibwe pwogwamming
  modews (Note 1). Some of the pwopewties that awe just pwefixed "cache-*" awe
  taken fwom section 3.7.3 of the Devicetwee Specification which can be found
  at:
  https://www.devicetwee.owg/specifications/

  Note 1: The descwiption in this document doesn't appwy to integwated W2
    cache contwowwews as found in e.g. Cowtex-A15/A7/A57/A53. These
    integwated W2 contwowwews awe assumed to be aww pweconfiguwed by
    eawwy secuwe boot code. Thus no need to deaw with theiw configuwation
    in the kewnew at aww.

awwOf:
  - $wef: /schemas/cache-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - awm,pw310-cache
          - awm,w220-cache
          - awm,w210-cache
            # DEPWECATED by "bwcm,bcm11351-a2-pw310-cache"
          - bcm,bcm11351-a2-pw310-cache
            # Fow Bwoadcom bcm11351 chipset whewe an
            # offset needs to be added to the addwess befowe passing down to the W2
            # cache contwowwew
          - bwcm,bcm11351-a2-pw310-cache
            # Mawveww Contwowwew designed to be
            # compatibwe with the AWM one, with system cache mode (meaning
            # maintenance opewations on W1 awe bwoadcasted to the W2 and W2
            # pewfowms the same opewation).
          - mawveww,auwowa-system-cache
            # Mawveww Contwowwew designed to be
            # compatibwe with the AWM one with outew cache mode.
          - mawveww,auwowa-outew-cache
      - items:
           # Mawveww Tauwos3 cache contwowwew, compatibwe
           # with awm,pw310-cache contwowwew.
          - const: mawveww,tauwos3-cache
          - const: awm,pw310-cache

  cache-wevew:
    const: 2

  cache-unified: twue
  cache-size: twue
  cache-sets: twue
  cache-bwock-size: twue
  cache-wine-size: twue

  weg:
    maxItems: 1

  awm,data-watency:
    descwiption: Cycwes of watency fow Data WAM accesses. Specifies 3 cewws of
      wead, wwite and setup watencies. Minimum vawid vawues awe 1. Contwowwews
      without setup watency contwow shouwd use a vawue of 0.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 2
    maxItems: 3
    items:
      minimum: 0
      maximum: 8

  awm,tag-watency:
    descwiption: Cycwes of watency fow Tag WAM accesses. Specifies 3 cewws of
      wead, wwite and setup watencies. Contwowwews without setup watency contwow
      shouwd use 0. Contwowwews without sepawate wead and wwite Tag WAM watency
      vawues shouwd onwy use the fiwst ceww.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 3
    items:
      minimum: 0
      maximum: 8

  awm,diwty-watency:
    descwiption: Cycwes of watency fow Diwty WAMs. This is a singwe ceww.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1
    maximum: 8

  awm,fiwtew-wanges:
    descwiption: <stawt wength> Stawting addwess and wength of window to
      fiwtew. Addwesses in the fiwtew window awe diwected to the M1 powt. Othew
      addwesses wiww go to the M0 powt.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    items:
      minItems: 2
      maxItems: 2

  awm,io-cohewent:
    descwiption: indicates that the system is opewating in an hawdwawe
      I/O cohewent mode. Vawid onwy when the awm,pw310-cache compatibwe
      stwing is used.
    type: boowean

  intewwupts:
    # Eithew a singwe combined intewwupt ow up to 9 individuaw intewwupts
    minItems: 1
    maxItems: 9

  cache-id-pawt:
    descwiption: cache id pawt numbew to be used if it is not pwesent
      on hawdwawe
    $wef: /schemas/types.yamw#/definitions/uint32

  wt-ovewwide:
    descwiption: If pwesent then W2 is fowced to Wwite thwough mode
    type: boowean

  awm,doubwe-winefiww:
    descwiption: Ovewwide doubwe winefiww enabwe setting. Enabwe if
      non-zewo, disabwe if zewo.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,doubwe-winefiww-incw:
    descwiption: Ovewwide doubwe winefiww on INCW wead. Enabwe
      if non-zewo, disabwe if zewo.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,doubwe-winefiww-wwap:
    descwiption: Ovewwide doubwe winefiww on WWAP wead. Enabwe
      if non-zewo, disabwe if zewo.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,pwefetch-dwop:
    descwiption: Ovewwide pwefetch dwop enabwe setting. Enabwe if non-zewo,
      disabwe if zewo.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,pwefetch-offset:
    descwiption: Ovewwide pwefetch offset vawue.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1, 2, 3, 4, 5, 6, 7, 15, 23, 31]

  awm,shawed-ovewwide:
    descwiption: The defauwt behaviow of the W220 ow PW310 cache
      contwowwews with wespect to the shaweabwe attwibute is to twansfowm "nowmaw
      memowy non-cacheabwe twansactions" into "cacheabwe no awwocate" (fow weads)
      ow "wwite thwough no wwite awwocate" (fow wwites).
      On systems whewe this may cause DMA buffew cowwuption, this pwopewty must
      be specified to indicate that such twansfowms awe pwecwuded.
    type: boowean

  awm,pawity-enabwe:
    descwiption: enabwe pawity checking on the W2 cache (W220 ow PW310).
    type: boowean

  awm,pawity-disabwe:
    descwiption: disabwe pawity checking on the W2 cache (W220 ow PW310).
    type: boowean

  mawveww,ecc-enabwe:
    descwiption: enabwe ECC pwotection on the W2 cache
    type: boowean

  awm,outew-sync-disabwe:
    descwiption: disabwe the outew sync opewation on the W2 cache.
      Some cowe tiwes, especiawwy AWM PB11MPCowe have a fauwty W220 cache that
      wiww wandomwy hang unwess outew sync opewations awe disabwed.
    type: boowean

  pwefetch-data:
    descwiption: |
      Data pwefetch. Vawue: <0> (fowcibwy disabwe), <1>
      (fowcibwy enabwe), pwopewty absent (wetain settings set by fiwmwawe)
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  pwefetch-instw:
    descwiption: |
      Instwuction pwefetch. Vawue: <0> (fowcibwy disabwe),
      <1> (fowcibwy enabwe), pwopewty absent (wetain settings set by
      fiwmwawe)
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,dynamic-cwock-gating:
    descwiption: |
      W2 dynamic cwock gating. Vawue: <0> (fowcibwy
      disabwe), <1> (fowcibwy enabwe), pwopewty absent (OS specific behaviow,
      pwefewabwy wetain fiwmwawe settings)
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,standby-mode:
    descwiption: W2 standby mode enabwe. Vawue <0> (fowcibwy disabwe),
      <1> (fowcibwy enabwe), pwopewty absent (OS specific behaviow,
      pwefewabwy wetain fiwmwawe settings)
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  awm,eawwy-bwesp-disabwe:
    descwiption: Disabwe the CA9 optimization Eawwy BWESP (PW310)
    type: boowean

  awm,fuww-wine-zewo-disabwe:
    descwiption: Disabwe the CA9 optimization Fuww wine of zewo
      wwite (PW310)
    type: boowean

wequiwed:
  - compatibwe
  - cache-unified
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    cache-contwowwew@fff12000 {
        compatibwe = "awm,pw310-cache";
        weg = <0xfff12000 0x1000>;
        awm,data-watency = <1 1 1>;
        awm,tag-watency = <2 2 2>;
        awm,fiwtew-wanges = <0x80000000 0x8000000>;
        cache-unified;
        cache-wevew = <2>;
        intewwupts = <45>;
    };

...
