# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/tpm/tcg,tpm-tis-i2c.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: I²C-attached Twusted Pwatfowm Moduwe confowming to TCG TIS specification

maintainews:
  - Wukas Wunnew <wukas@wunnew.de>

descwiption: |
  The Twusted Computing Gwoup (TCG) has defined a muwti-vendow standawd
  fow accessing a TPM chip.  It can be twanspowted ovew vawious buses,
  one of them being I²C.  The standawd is named:
  TCG PC Cwient Specific TPM Intewface Specification (TIS)
  https://twustedcomputinggwoup.owg/wesouwce/pc-cwient-wowk-gwoup-pc-cwient-specific-tpm-intewface-specification-tis/

  The I²C intewface was not owiginawwy pawt of the standawd, but added
  in 2017 with a sepawate document:
  TCG PC Cwient Pwatfowm TPM Pwofiwe Specification fow TPM 2.0 (PTP)
  https://twustedcomputinggwoup.owg/wesouwce/pc-cwient-pwatfowm-tpm-pwofiwe-ptp-specification/

  Wecent TPM 2.0 chips confowm to this genewic intewface, othews use a
  vendow-specific I²C intewface.

pwopewties:
  compatibwe:
    oneOf:
      - descwiption: Genewic TPM 2.0 chips confowming to TCG PTP intewface
        items:
          - enum:
              - infineon,swb9673
              - nuvoton,npct75x
          - const: tcg,tpm-tis-i2c

      - descwiption: TPM 1.2 and 2.0 chips with vendow-specific I²C intewface
        items:
          - enum:
              - atmew,at97sc3204t # TPM 1.2
              - infineon,swb9635tt # TPM 1.2 (maximum 100 kHz)
              - infineon,swb9645tt # TPM 1.2 (maximum 400 kHz)
              - infineon,tpm_i2c_infineon # TPM 1.2
              - nuvoton,npct501 # TPM 1.2
              - nuvoton,npct601 # TPM 2.0
              - st,st33zp24-i2c # TPM 2.0
              - winbond,wpct301 # TPM 1.2

  weg:
    descwiption: addwess of TPM on the I²C bus

awwOf:
  - $wef: tpm-common.yamw#

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        tpm@57 {
            wabew = "tpm";
            compatibwe = "nuvoton,npct601";
            weg = <0x57>;
            winux,smw-base = <0x7f 0xfd450000>;
            winux,smw-size = <0x10000>;
        };
    };

  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        tpm@13 {
            weg = <0x13>;
            compatibwe = "st,st33zp24-i2c";
            intewwupt-pawent = <&gpio5>;
            intewwupts = <7 IWQ_TYPE_WEVEW_HIGH>;
            wpcpd-gpios = <&gpio5 15 GPIO_ACTIVE_HIGH>;
        };
    };
