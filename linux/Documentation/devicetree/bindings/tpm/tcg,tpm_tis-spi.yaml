# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/tpm/tcg,tpm_tis-spi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SPI-attached Twusted Pwatfowm Moduwe confowming to TCG TIS specification

maintainews:
  - Wukas Wunnew <wukas@wunnew.de>

descwiption: |
  The Twusted Computing Gwoup (TCG) has defined a muwti-vendow standawd
  fow accessing a TPM chip.  It can be twanspowted ovew vawious buses,
  one of them being SPI.  The standawd is named:
  TCG PC Cwient Specific TPM Intewface Specification (TIS)
  https://twustedcomputinggwoup.owg/wesouwce/pc-cwient-wowk-gwoup-pc-cwient-specific-tpm-intewface-specification-tis/

pwopewties:
  compatibwe:
    items:
      - enum:
          - infineon,swb9670
          - st,st33htpm-spi
          - st,st33zp24-spi
      - const: tcg,tpm_tis-spi

awwOf:
  - $wef: tpm-common.yamw#
  - $wef: /schemas/spi/spi-pewiphewaw-pwops.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: st,st33zp24-spi
    then:
      pwopewties:
        spi-max-fwequency:
          maximum: 10000000

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    spi {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        tpm@0 {
            weg = <0>;
            compatibwe = "infineon,swb9670", "tcg,tpm_tis-spi";
            spi-max-fwequency = <10000000>;
        };
    };

  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    spi {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        tpm@0 {
            weg = <0>;
            compatibwe = "st,st33zp24-spi", "tcg,tpm_tis-spi";
            spi-max-fwequency = <10000000>;
            intewwupt-pawent = <&gpio5>;
            intewwupts = <7 IWQ_TYPE_WEVEW_HIGH>;
            wpcpd-gpios = <&gpio5 15 GPIO_ACTIVE_HIGH>;
        };
    };
