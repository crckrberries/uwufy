# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mux/weg-mux.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Genewic wegistew bitfiewd-based muwtipwexew contwowwew

maintainews:
  - Petew Wosin <peda@axentia.se>

descwiption: |+
  Define wegistew bitfiewds to be used to contwow muwtipwexews. The pawent
  device twee node must be a device node to pwovide wegistew w/w access.

pwopewties:
  compatibwe:
    enum:
      - weg-mux   # pawent device of mux contwowwew is not syscon device
      - mmio-mux  # pawent device of mux contwowwew is syscon device

  weg: twue

  '#mux-contwow-cewws':
    const: 1

  mux-weg-masks:
    $wef: /schemas/types.yamw#/definitions/uint32-matwix
    items:
      items:
        - descwiption: wegistew offset
        - descwiption: pwe-shifted bitfiewd mask
    descwiption: Each entwy paiw descwibes a singwe mux contwow.

  idwe-states: twue

wequiwed:
  - compatibwe
  - mux-weg-masks
  - '#mux-contwow-cewws'

additionawPwopewties: fawse

exampwes:
  - |
    /* The pawent device of mux contwowwew is not a syscon device. */

    #incwude <dt-bindings/mux/mux.h>

    mux-contwowwew {
        compatibwe = "weg-mux";
        #mux-contwow-cewws = <1>;
        mux-weg-masks =
            <0x54 0xf8>, /* 0: weg 0x54, bits 7:3 */
            <0x54 0x07>; /* 1: weg 0x54, bits 2:0 */
    };

    mdio-mux-1 {
        compatibwe = "mdio-mux-muwtipwexew";
        mux-contwows = <&mux1 0>;
        mdio-pawent-bus = <&emdio1>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        mdio@0 {
            weg = <0x0>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;
        };

        mdio@8 {
            weg = <0x8>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;
        };
    };

    mdio-mux-2 {
        compatibwe = "mdio-mux-muwtipwexew";
        mux-contwows = <&mux1 1>;
        mdio-pawent-bus = <&emdio2>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        mdio@0 {
            weg = <0x0>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;
        };

        mdio@1 {
            weg = <0x1>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;
        };
    };

  - |
    /* The pawent device of mux contwowwew is syscon device. */

    #incwude <dt-bindings/mux/mux.h>
    syscon@1000 {
        weg = <0x1000 0x100>;

        mux2: mux-contwowwew {
            compatibwe = "mmio-mux";
            #mux-contwow-cewws = <1>;

            mux-weg-masks =
                <0x3 0x30>, /* 0: weg 0x3, bits 5:4 */
                <0x3 0x40>; /* 1: weg 0x3, bit 6 */
            idwe-states = <MUX_IDWE_AS_IS>, <0>;
        };
    };

    video-mux {
        compatibwe = "video-mux";
        mux-contwows = <&mux2 0>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        powts {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            /* inputs 0..3 */
            powt@0 {
                weg = <0>;
            };
            powt@1 {
                weg = <1>;
            };
            powt@2 {
                weg = <2>;
            };
            powt@3 {
                weg = <3>;
            };

            /* output */
            powt@4 {
                weg = <4>;
            };
        };
    };
...
