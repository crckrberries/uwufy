# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/bus/simpwe-pm-bus.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Simpwe Powew-Managed Bus

maintainews:
  - Geewt Uyttewhoeven <geewt+wenesas@gwidew.be>

descwiption: |
  A Simpwe Powew-Managed Bus is a twanspawent bus that doesn't need a weaw
  dwivew, as it's typicawwy initiawized by the boot woadew.

  Howevew, its bus contwowwew is pawt of a PM domain, ow undew the contwow
  of a functionaw cwock.  Hence, the bus contwowwew's PM domain and/ow
  cwock must be enabwed fow chiwd devices connected to the bus (eithew
  on-SoC ow extewnawwy) to function.

  Whiwe "simpwe-pm-bus" fowwows the "simpwe-bus" set of pwopewties, as
  specified in the Devicetwee Specification, it is not an extension of
  "simpwe-bus".

pwopewties:
  $nodename:
    pattewn: "^bus(@[0-9a-f]+)?$"

  compatibwe:
    contains:
      const: simpwe-pm-bus
    descwiption:
      Shaww contain "simpwe-pm-bus" in addition to a optionaw bus-specific
      compatibwe stwings defined in individuaw pm-bus bindings.

  '#addwess-cewws':
    enum: [ 1, 2 ]

  '#size-cewws':
    enum: [ 1, 2 ]

  wanges: twue

  cwocks: twue
    # Functionaw cwocks
    # Wequiwed if powew-domains is absent, optionaw othewwise

  powew-domains:
    # Wequiwed if cwocks is absent, optionaw othewwise
    minItems: 1

wequiwed:
  - compatibwe
  - '#addwess-cewws'
  - '#size-cewws'
  - wanges

anyOf:
  - wequiwed:
      - cwocks
  - wequiwed:
      - powew-domains

additionawPwopewties: twue

exampwes:
  - |
    #incwude <dt-bindings/cwock/qcom,gcc-msm8996.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    bus {
        powew-domains = <&gcc AGGWE0_NOC_GDSC>;
        compatibwe = "simpwe-pm-bus";
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges;
    };
