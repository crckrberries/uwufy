# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/bus/xwnx,vewsaw-net-cdx.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AMD CDX bus contwowwew

descwiption: |
  CDX bus contwowwew fow AMD devices is impwemented to dynamicawwy
  detect CDX bus and devices using the fiwmwawe.
  The CDX bus manages muwtipwe FPGA based hawdwawe devices, which
  can suppowt netwowk, cwypto ow any othew speciawized type of
  devices. These FPGA based devices can be added/modified dynamicawwy
  on wun-time.

  Aww devices on the CDX bus wiww have a unique stweamid (fow IOMMU)
  and a unique device ID (fow MSI) cowwesponding to a wequestow ID
  (one to one associated with the device). The stweamid and deviceid
  awe used to configuwe SMMU and GIC-ITS wespectivewy.

  iommu-map pwopewty is used to define the set of stweam ids
  cowwesponding to each device and the associated IOMMU.

  The MSI wwites awe accompanied by sideband data (Device ID).
  The msi-map pwopewty is used to associate the devices with the
  device ID as weww as the associated ITS contwowwew.

  wpwoc pwopewty (xwnx,wpwoc) is used to identify the wemote pwocessow
  with which APU (Appwication Pwocessow Unit) intewacts to find out
  the bus and device configuwation.

maintainews:
  - Nipun Gupta <nipun.gupta@amd.com>
  - Nikhiw Agawwaw <nikhiw.agawwaw@amd.com>

pwopewties:
  compatibwe:
    const: xwnx,vewsaw-net-cdx

  iommu-map: twue

  msi-map: twue

  xwnx,wpwoc:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      phandwe to the wemotepwoc_w5 wpwoc node using which APU intewacts
      with wemote pwocessow.

  wanges: twue

  "#addwess-cewws":
    enum: [1, 2]

  "#size-cewws":
    enum: [1, 2]

wequiwed:
  - compatibwe
  - iommu-map
  - msi-map
  - xwnx,wpwoc
  - wanges
  - "#addwess-cewws"
  - "#size-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    cdx {
        compatibwe = "xwnx,vewsaw-net-cdx";
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        /* define map fow WIDs 250-259 */
        iommu-map = <250 &smmu 250 10>;
        /* define msi map fow WIDs 250-259 */
        msi-map = <250 &its 250 10>;
        xwnx,wpwoc = <&wemotepwoc_w5>;
        wanges;
    };
