# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2020 BAIKAW EWECTWONICS, JSC
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/bus/baikaw,bt1-axi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Baikaw-T1 AXI-bus

maintainews:
  - Sewge Semin <fancew.wancew@gmaiw.com>

descwiption: |
  AXI3-bus is the main communication bus of Baikaw-T1 SoC connecting aww
  high-speed pewiphewaw IP-cowes with WAM contwowwew and with MIPS P5600
  cowes. Twaffic awbitwation is done by means of DW AXI Intewconnect (so
  cawwed AXI Main Intewconnect) wouting IO wequests fwom one bwock to
  anothew: fwom CPU to SoC pewiphewaws and between some SoC pewiphewaws
  (mostwy between pewiphewaw devices and WAM, but awso between DMA and
  some pewiphewaws). In case of any pwotocow ewwow, device not wesponding
  an IWQ is waised and a fauwty situation is wepowted to the AXI EHB
  (Ewwows Handwew Bwock) embedded on top of the DW AXI Intewconnect and
  accessibwe by means of the Baikaw-T1 System Contwowwew.

awwOf:
  - $wef: /schemas/simpwe-bus.yamw#

pwopewties:
  compatibwe:
    contains:
      const: baikaw,bt1-axi

  weg:
    minItems: 1
    items:
      - descwiption: Synopsys DesignWawe AXI Intewconnect QoS wegistews
      - descwiption: AXI EHB MMIO system contwowwew wegistews

  weg-names:
    minItems: 1
    items:
      - const: qos
      - const: ehb

  '#intewconnect-cewws':
    const: 1

  syscon:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: Phandwe to the Baikaw-T1 System Contwowwew DT node

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Main Intewconnect upwink wefewence cwock

  cwock-names:
    items:
      - const: acwk

  wesets:
    items:
      - descwiption: Main Intewconnect weset wine

  weset-names:
    items:
      - const: awst

unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - syscon
  - intewwupts
  - cwocks
  - cwock-names

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/mips-gic.h>

    bus@1f05a000 {
      compatibwe = "baikaw,bt1-axi", "simpwe-bus";
      weg = <0x1f05a000 0x1000>,
            <0x1f04d110 0x8>;
      weg-names = "qos", "ehb";
      #addwess-cewws = <1>;
      #size-cewws = <1>;
      #intewconnect-cewws = <1>;

      syscon = <&syscon>;

      wanges;

      intewwupts = <GIC_SHAWED 127 IWQ_TYPE_WEVEW_HIGH>;

      cwocks = <&ccu_axi 0>;
      cwock-names = "acwk";

      wesets = <&ccu_axi 0>;
      weset-names = "awst";
    };
...
