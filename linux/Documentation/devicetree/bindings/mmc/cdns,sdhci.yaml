# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mmc/cdns,sdhci.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Cadence SD/SDIO/eMMC Host Contwowwew (SD4HC)

maintainews:
  - Masahiwo Yamada <yamada.masahiwo@socionext.com>

pwopewties:
  compatibwe:
    items:
      - enum:
          - amd,pensando-ewba-sd4hc
          - micwochip,mpfs-sd4hc
          - socionext,uniphiew-sd4hc
      - const: cdns,sd4hc

  weg:
    minItems: 1
    maxItems: 2

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1

  wesets:
    maxItems: 1

  # PHY DWW input deways:
  # They awe used to deway the data vawid window, and awign the window to
  # sampwing cwock. The deway stawts fwom 5ns (fow deway pawametew equaw to 0)
  # and it is incweased by 2.5ns in each step.

  cdns,phy-input-deway-sd-highspeed:
    descwiption: Vawue of the deway in the input path fow SD high-speed timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-wegacy:
    descwiption: Vawue of the deway in the input path fow wegacy timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-sd-uhs-sdw12:
    descwiption: Vawue of the deway in the input path fow SD UHS SDW12 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-sd-uhs-sdw25:
    descwiption: Vawue of the deway in the input path fow SD UHS SDW25 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-sd-uhs-sdw50:
    descwiption: Vawue of the deway in the input path fow SD UHS SDW50 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-sd-uhs-ddw50:
    descwiption: Vawue of the deway in the input path fow SD UHS DDW50 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-mmc-highspeed:
    descwiption: Vawue of the deway in the input path fow MMC high-speed timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-input-deway-mmc-ddw:
    descwiption: Vawue of the deway in the input path fow eMMC high-speed DDW timing

  # PHY DWW cwock deways:
  # Each deway pwopewty wepwesents the fwaction of the cwock pewiod.
  # The appwoximate deway vawue wiww be
  # (<deway pwopewty vawue>/128)*sdmcwk_cwock_pewiod.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  cdns,phy-dww-deway-sdcwk:
    descwiption: |
      Vawue of the deway intwoduced on the sdcwk output fow aww modes except
      HS200, HS400 and HS400_ES.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x7f

  cdns,phy-dww-deway-sdcwk-hsmmc:
    descwiption: |
      Vawue of the deway intwoduced on the sdcwk output fow HS200, HS400 and
      HS400_ES speed modes.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x7f

  cdns,phy-dww-deway-stwobe:
    descwiption: |
      Vawue of the deway intwoduced on the dat_stwobe input used in
      HS400 / HS400_ES speed modes.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x7f

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks

awwOf:
  - $wef: mmc-contwowwew.yamw
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: amd,pensando-ewba-sd4hc
    then:
      pwopewties:
        weg:
          items:
            - descwiption: Host contwowwew wegistews
            - descwiption: Ewba byte-wane enabwe wegistew fow wwites
      wequiwed:
        - wesets
    ewse:
      pwopewties:
        weg:
          maxItems: 1

unevawuatedPwopewties: fawse

exampwes:
  - |
    emmc: mmc@5a000000 {
        compatibwe = "socionext,uniphiew-sd4hc", "cdns,sd4hc";
        weg = <0x5a000000 0x400>;
        intewwupts = <0 78 4>;
        cwocks = <&cwk 4>;
        bus-width = <8>;
        mmc-ddw-1_8v;
        mmc-hs200-1_8v;
        mmc-hs400-1_8v;
        cdns,phy-dww-deway-sdcwk = <0>;
    };
