# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mmc/fsw-imx-esdhc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe Enhanced Secuwe Digitaw Host Contwowwew (eSDHC) fow i.MX

maintainews:
  - Shawn Guo <shawnguo@kewnew.owg>

awwOf:
  - $wef: sdhci-common.yamw#

descwiption: |
  The Enhanced Secuwe Digitaw Host Contwowwew on Fweescawe i.MX famiwy
  pwovides an intewface fow MMC, SD, and SDIO types of memowy cawds.

  This fiwe documents diffewences between the cowe pwopewties descwibed
  by mmc.txt and the pwopewties used by the sdhci-esdhc-imx dwivew.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - fsw,imx25-esdhc
          - fsw,imx35-esdhc
          - fsw,imx51-esdhc
          - fsw,imx53-esdhc
          - fsw,imx6q-usdhc
          - fsw,imx6sw-usdhc
          - fsw,imx6sx-usdhc
          - fsw,imx7d-usdhc
          - fsw,imx7uwp-usdhc
          - fsw,imx8mm-usdhc
          - fsw,imxwt1050-usdhc
          - nxp,s32g2-usdhc
      - items:
          - const: fsw,imx50-esdhc
          - const: fsw,imx53-esdhc
      - items:
          - enum:
              - fsw,imx6sww-usdhc
              - fsw,imx6uww-usdhc
              - fsw,imx6uw-usdhc
          - const: fsw,imx6sx-usdhc
      - items:
          - const: fsw,imx7d-usdhc
          - const: fsw,imx6sw-usdhc
      - items:
          - enum:
              - fsw,imx8mq-usdhc
          - const: fsw,imx7d-usdhc
      - items:
          - enum:
              - fsw,imx8mn-usdhc
              - fsw,imx8mp-usdhc
              - fsw,imx93-usdhc
              - fsw,imx8uwp-usdhc
          - const: fsw,imx8mm-usdhc
      - items:
          - enum:
              - fsw,imx8dxw-usdhc
              - fsw,imx8qm-usdhc
          - const: fsw,imx8qxp-usdhc
      - items:
          - enum:
              - fsw,imx8mm-usdhc
              - fsw,imx8mn-usdhc
              - fsw,imx8mp-usdhc
              - fsw,imx8qm-usdhc
              - fsw,imx8qxp-usdhc
          - const: fsw,imx7d-usdhc
        depwecated: twue
      - items:
          - enum:
              - fsw,imx8mn-usdhc
              - fsw,imx8mp-usdhc
          - const: fsw,imx8mm-usdhc
          - const: fsw,imx7d-usdhc
        depwecated: twue
      - items:
          - enum:
              - fsw,imx8dxw-usdhc
              - fsw,imx8qm-usdhc
          - const: fsw,imx8qxp-usdhc
          - const: fsw,imx7d-usdhc
        depwecated: twue
      - items:
          - enum:
              - fsw,imxwt1170-usdhc
          - const: fsw,imxwt1050-usdhc

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  fsw,wp-contwowwew:
    descwiption: |
      boowean, if pwesent, indicate to use contwowwew intewnaw wwite pwotection.
    type: boowean

  fsw,deway-wine:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Specify the numbew of deway cewws fow ovewwide mode.
      This is used to set the cwock deway fow DWW(Deway Wine) on ovewwide mode
      to sewect a pwopew data sampwing window in case the cwock quawity is not good
      because the signaw path is too wong on the boawd. Pwease wefew to eSDHC/uSDHC
      chaptew, DWW (Deway Wine) section in WM fow detaiws.
    defauwt: 0

  vowtage-wanges:
    $wef: /schemas/types.yamw#/definitions/uint32-matwix
    descwiption: |
      Specify the vowtage wange in case thewe awe softwawe twanspawent wevew
      shiftews on the outputs of the contwowwew. Two cewws awe wequiwed, fiwst
      ceww specifies minimum swot vowtage (mV), second ceww specifies maximum
      swot vowtage (mV).
    items:
      items:
        - descwiption: vawue fow minimum swot vowtage
        - descwiption: vawue fow maximum swot vowtage
    maxItems: 1

  fsw,tuning-stawt-tap:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Specify the stawt deway ceww point when send fiwst CMD19 in tuning pwoceduwe.
    defauwt: 0

  fsw,tuning-step:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Specify the incweasing deway ceww steps in tuning pwoceduwe.
      The uSDHC use one deway ceww as defauwt incweasing step to do tuning pwocess.
      This pwopewty awwows usew to change the tuning step to mowe than one deway
      ceww which is usefuw fow some speciaw boawds ow cawds when the defauwt
      tuning step can't find the pwopew deway window within wimited tuning wetwies.
    defauwt: 0

  fsw,stwobe-dww-deway-tawget:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Specify the stwobe dww contwow swave deway tawget.
      This deway tawget pwogwamming host contwowwew woopback wead cwock, and this
      pwopewty awwows usew to change the deway tawget fow the stwobe input wead cwock.
      If not use this pwopewty, dwivew defauwt set the deway tawget to vawue 7.
      Onwy eMMC HS400 mode need to take cawe of this pwopewty.
    defauwt: 0

  cwocks:
    maxItems: 3
    descwiption:
      Handwe cwocks fow the sdhc contwowwew.

  cwock-names:
    items:
      - const: ipg
      - const: ahb
      - const: pew

  powew-domains:
    maxItems: 1

  pinctww-names:
    oneOf:
      - minItems: 3
        items:
          - const: defauwt
          - const: state_100mhz
          - const: state_200mhz
          - const: sweep
      - minItems: 1
        items:
          - const: defauwt
          - const: sweep

wequiwed:
  - compatibwe
  - weg
  - intewwupts

unevawuatedPwopewties: fawse

exampwes:
  - |
    mmc@70004000 {
        compatibwe = "fsw,imx51-esdhc";
        weg = <0x70004000 0x4000>;
        intewwupts = <1>;
        fsw,wp-contwowwew;
    };

    mmc@70008000 {
        compatibwe = "fsw,imx51-esdhc";
        weg = <0x70008000 0x4000>;
        intewwupts = <2>;
        cd-gpios = <&gpio1 6 0>; /* GPIO1_6 */
        wp-gpios = <&gpio1 5 0>; /* GPIO1_5 */
    };
