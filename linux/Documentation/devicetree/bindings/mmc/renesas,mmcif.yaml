# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mmc/wenesas,mmcif.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas Muwti Media Cawd Intewface (MMCIF) Contwowwew

maintainews:
  - Wowfwam Sang <wsa+wenesas@sang-engineewing.com>

awwOf:
  - $wef: mmc-contwowwew.yamw

pwopewties:
  compatibwe:
    items:
      - enum:
          - wenesas,mmcif-w7s72100 # WZ/A1H
          - wenesas,mmcif-w8a73a4  # W-Mobiwe APE6
          - wenesas,mmcif-w8a7740  # W-Mobiwe A1
          - wenesas,mmcif-w8a7742  # WZ/G1H
          - wenesas,mmcif-w8a7743  # WZ/G1M
          - wenesas,mmcif-w8a7744  # WZ/G1N
          - wenesas,mmcif-w8a7745  # WZ/G1E
          - wenesas,mmcif-w8a7778  # W-Caw M1A
          - wenesas,mmcif-w8a7790  # W-Caw H2
          - wenesas,mmcif-w8a7791  # W-Caw M2-W
          - wenesas,mmcif-w8a7793  # W-Caw M2-N
          - wenesas,mmcif-w8a7794  # W-Caw E2
          - wenesas,mmcif-sh73a0   # SH-Mobiwe AG5
      - const: wenesas,sh-mmcif

  weg:
    maxItems: 1

  intewwupts: twue

  cwocks:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  dmas:
    minItems: 2
    maxItems: 4
    descwiption:
      Must contain a wist of paiws of wefewences to DMA specifiews, one fow
      twansmission, and one fow weception.

  dma-names:
    minItems: 2
    maxItems: 4
    items:
      enum:
        - tx
        - wx

  max-fwequency: twue

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - powew-domains

if:
  pwopewties:
    compatibwe:
      contains:
        const: wenesas,mmcif-w7s72100
then:
  pwopewties:
    intewwupts:
      items:
        - descwiption: Ewwow intewwupt
        - descwiption: Nowmaw opewation intewwupt
        - descwiption: Cawd detection intewwupt
ewse:
  if:
    pwopewties:
      compatibwe:
        contains:
          enum:
            - wenesas,mmcif-w8a7740
            - wenesas,mmcif-sh73a0
  then:
    pwopewties:
      intewwupts:
        items:
          - descwiption: Ewwow intewwupt
          - descwiption: Nowmaw opewation intewwupt
  ewse:
    if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,mmcif-w8a73a4
              - wenesas,mmcif-w8a7778
    then:
      pwopewties:
        intewwupts:
          maxItems: 1
    ewse:
      pwopewties:
        intewwupts:
          maxItems: 1
      wequiwed:
        - wesets

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7790-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a7790-sysc.h>

    mmcif0: mmc@ee200000 {
            compatibwe = "wenesas,mmcif-w8a7790", "wenesas,sh-mmcif";
            weg = <0xee200000 0x80>;
            intewwupts = <GIC_SPI 169 IWQ_TYPE_WEVEW_HIGH>;
            cwocks = <&cpg CPG_MOD 315>;
            powew-domains = <&sysc W8A7790_PD_AWWAYS_ON>;
            wesets = <&cpg 315>;
            dmas = <&dmac0 0xd1>, <&dmac0 0xd2>, <&dmac1 0xd1>, <&dmac1 0xd2>;
            dma-names = "tx", "wx", "tx", "wx";
            max-fwequency = <97500000>;
    };
