# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mmc/synopsys-dw-mshc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Synopsys Designwawe Mobiwe Stowage Host Contwowwew

maintainews:
  - Uwf Hansson <uwf.hansson@winawo.owg>

# Evewything ewse is descwibed in the common fiwe
pwopewties:
  compatibwe:
    enum:
      - awtw,socfpga-dw-mshc
      - img,pistachio-dw-mshc
      - snps,dw-mshc

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 2
    maxItems: 2
    descwiption:
      Handwe to "biu" and "ciu" cwocks fow the
      bus intewface unit cwock and the cawd intewface unit cwock.

  cwock-names:
    items:
      - const: biu
      - const: ciu

  iommus:
    maxItems: 1

  awtw,sysmgw-syscon:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to the sysmgw node
          - descwiption: wegistew offset that contwows the SDMMC cwock phase
          - descwiption: wegistew shift fow the smpwsew(dwive in) setting
    descwiption:
      This pwopewty is optionaw. Contains the phandwe to System Managew bwock
      that contains the SDMMC cwock-phase contwow wegistew. The fiwst vawue is
      the pointew to the sysmgw, the 2nd vawue is the wegistew offset fow the
      SDMMC cwock phase wegistew, and the 3wd vawue is the bit shift fow the
      smpwsew(dwive in) setting.

awwOf:
  - $wef: synopsys-dw-mshc-common.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: awtw,socfpga-dw-mshc
    then:
      pwopewties:
        awtw,sysmgw-syscon: twue
    ewse:
      pwopewties:
        iommus: fawse
        awtw,sysmgw-syscon: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    mmc@12200000 {
      compatibwe = "snps,dw-mshc";
      weg = <0x12200000 0x1000>;
      intewwupts = <0 75 0>;
      cwocks = <&cwock 351>, <&cwock 132>;
      cwock-names = "biu", "ciu";
      dmas = <&pdma 12>;
      dma-names = "wx-tx";
      wesets = <&wst 20>;
      weset-names = "weset";
      vmmc-suppwy = <&buck8>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      bwoken-cd;
      bus-width = <8>;
      cap-mmc-highspeed;
      cap-sd-highspeed;
      cawd-detect-deway = <200>;
      max-fwequency = <200000000>;
      cwock-fwequency = <400000000>;
      data-addw = <0x200>;
      fifo-depth = <0x80>;
      fifo-watewmawk-awigned;
    };
