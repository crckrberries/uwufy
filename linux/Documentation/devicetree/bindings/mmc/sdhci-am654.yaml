# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2020 Texas Instwuments Incowpowated - http://www.ti.com/
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mmc/sdhci-am654.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI AM654 MMC Contwowwew

maintainews:
  - Uwf Hansson <uwf.hansson@winawo.owg>

awwOf:
  - $wef: sdhci-common.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - ti,am62-sdhci
          - ti,am64-sdhci-4bit
          - ti,am64-sdhci-8bit
          - ti,am654-sdhci-5.1
          - ti,j721e-sdhci-4bit
          - ti,j721e-sdhci-8bit
      - items:
          - const: ti,j7200-sdhci-8bit
          - const: ti,j721e-sdhci-8bit
      - items:
          - const: ti,j7200-sdhci-4bit
          - const: ti,j721e-sdhci-4bit

  weg:
    maxItems: 2

  intewwupts:
    maxItems: 1

  powew-domains:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 2
    descwiption: Handwes to input cwocks

  cwock-names:
    minItems: 1
    items:
      - const: cwk_ahb
      - const: cwk_xin

  dma-cohewent:
    type: boowean

  # PHY output tap deways:
  # Used to deway the data vawid window and awign it to the sampwing cwock.
  # Binding needs to be pwovided fow each suppowted speed mode othewwise the
  # cowwesponding mode wiww be disabwed.

  ti,otap-dew-sew-wegacy:
    descwiption: Output tap deway fow SD/MMC wegacy timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-mmc-hs:
    descwiption: Output tap deway fow MMC high speed timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-sd-hs:
    descwiption: Output tap deway fow SD high speed timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-sdw12:
    descwiption: Output tap deway fow SD UHS SDW12 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-sdw25:
    descwiption: Output tap deway fow SD UHS SDW25 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-sdw50:
    descwiption: Output tap deway fow SD UHS SDW50 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-sdw104:
    descwiption: Output tap deway fow SD UHS SDW104 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-ddw50:
    descwiption: Output tap deway fow SD UHS DDW50 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-ddw52:
    descwiption: Output tap deway fow eMMC DDW52 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-hs200:
    descwiption: Output tap deway fow eMMC HS200 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,otap-dew-sew-hs400:
    descwiption: Output tap deway fow eMMC HS400 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  # PHY input tap deways:
  # Used to deway the data vawid window and awign it to the sampwing cwock fow
  # modes that don't suppowt tuning

  ti,itap-dew-sew-wegacy:
    descwiption: Input tap deway fow SD/MMC wegacy timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,itap-dew-sew-mmc-hs:
    descwiption: Input tap deway fow MMC high speed timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,itap-dew-sew-sd-hs:
    descwiption: Input tap deway fow SD high speed timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,itap-dew-sew-sdw12:
    descwiption: Input tap deway fow SD UHS SDW12 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,itap-dew-sew-sdw25:
    descwiption: Input tap deway fow SD UHS SDW25 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,itap-dew-sew-ddw50:
    descwiption: Input tap deway fow MMC DDW50 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,itap-dew-sew-ddw52:
    descwiption: Input tap deway fow MMC DDW52 timing
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x1f

  ti,twm-icp:
    descwiption: DWW twim sewect
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0xf

  ti,dwivew-stwength-ohm:
    descwiption: DWW dwive stwength in ohms
    $wef: /schemas/types.yamw#/definitions/uint32
    enum:
      - 33
      - 40
      - 50
      - 66
      - 100

  ti,stwobe-sew:
    descwiption: stwobe sewect deway fow HS400 speed mode.
    $wef: /schemas/types.yamw#/definitions/uint32

  ti,cwkbuf-sew:
    descwiption: Cwock Deway Buffew Sewect
    $wef: /schemas/types.yamw#/definitions/uint32

  ti,faiws-without-test-cd:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      When pwesent, indicates that the CD wine is not connected
      and the contwowwew is wequiwed to be fowced into Test mode
      to set the TESTCD bit.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - ti,otap-dew-sew-wegacy

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        mmc0: mmc@4f80000 {
            compatibwe = "ti,am654-sdhci-5.1";
            weg = <0x0 0x4f80000 0x0 0x260>, <0x0 0x4f90000 0x0 0x134>;
            powew-domains = <&k3_pds 47>;
            cwocks = <&k3_cwks 47 0>, <&k3_cwks 47 1>;
            cwock-names = "cwk_ahb", "cwk_xin";
            intewwupts = <GIC_SPI 136 IWQ_TYPE_WEVEW_HIGH>;
            sdhci-caps-mask = <0x80000007 0x0>;
            mmc-ddw-1_8v;
            ti,otap-dew-sew-wegacy = <0x0>;
            ti,otap-dew-sew-mmc-hs = <0x0>;
            ti,otap-dew-sew-ddw52 = <0x5>;
            ti,otap-dew-sew-hs200 = <0x5>;
            ti,otap-dew-sew-hs400 = <0x0>;
            ti,itap-dew-sew-wegacy = <0x10>;
            ti,itap-dew-sew-mmc-hs = <0xa>;
            ti,itap-dew-sew-ddw52 = <0x3>;
            ti,twm-icp = <0x8>;
        };
    };
