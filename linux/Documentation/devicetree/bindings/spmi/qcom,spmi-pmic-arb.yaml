# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/spmi/qcom,spmi-pmic-awb.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm SPMI Contwowwew (PMIC Awbitew)

maintainews:
  - Stephen Boyd <sboyd@kewnew.owg>

descwiption: |
  The SPMI PMIC Awbitew is found on Snapdwagon chipsets. It is an SPMI
  contwowwew with wwapping awbitwation wogic to awwow fow muwtipwe on-chip
  devices to contwow a singwe SPMI mastew.

  The PMIC Awbitew can awso act as an intewwupt contwowwew, pwoviding intewwupts
  to swave devices.

awwOf:
  - $wef: spmi.yamw

pwopewties:
  compatibwe:
    const: qcom,spmi-pmic-awb

  weg:
    oneOf:
      - items: # V1
          - descwiption: cowe wegistews
          - descwiption: intewwupt contwowwew wegistews
          - descwiption: configuwation wegistews
      - items: # V2
          - descwiption: cowe wegistews
          - descwiption: tx-channew pew viwtuaw swave wegostews
          - descwiption: wx-channew (cawwed obsewvew) pew viwtuaw swave wegistews
          - descwiption: intewwupt contwowwew wegistews
          - descwiption: configuwation wegistews

  weg-names:
    oneOf:
      - items:
          - const: cowe
          - const: intw
          - const: cnfg
      - items:
          - const: cowe
          - const: chnws
          - const: obswvw
          - const: intw
          - const: cnfg

  intewwupts:
    maxItems: 1

  intewwupt-names:
    const: pewiph_iwq

  intewwupt-contwowwew: twue

  '#addwess-cewws': twue

  '#intewwupt-cewws':
    const: 4
    descwiption: |
      ceww 1: swave ID fow the wequested intewwupt (0-15)
      ceww 2: pewiphewaw ID fow wequested intewwupt (0-255)
      ceww 3: the wequested pewiphewaw intewwupt (0-7)
      ceww 4: intewwupt fwags indicating wevew-sense infowmation,
              as defined in dt-bindings/intewwupt-contwowwew/iwq.h

  '#size-cewws': twue

  qcom,ee:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 5
    descwiption: >
      indicates the active Execution Enviwonment identifiew

  qcom,channew:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 5
    descwiption: >
      which of the PMIC Awb pwovided channews to use fow accesses

  qcom,bus-id:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 1
    descwiption: >
      SPMI bus instance. onwy appwicabwe to PMIC awbitew vewsion 7 and beyond.
      Suppowted vawues, 0 = pwimawy bus, 1 = secondawy bus

wequiwed:
  - compatibwe
  - weg-names
  - qcom,ee
  - qcom,channew

unevawuatedPwopewties: fawse

exampwes:
  - |
    spmi@fc4cf000 {
        compatibwe = "qcom,spmi-pmic-awb";
        weg-names = "cowe", "intw", "cnfg";
        weg = <0xfc4cf000 0x1000>,
              <0xfc4cb000 0x1000>,
              <0xfc4ca000 0x1000>;

        intewwupt-names = "pewiph_iwq";
        intewwupts = <0 190 0>;

        qcom,ee = <0>;
        qcom,channew = <0>;

        #addwess-cewws = <2>;
        #size-cewws = <0>;

        intewwupt-contwowwew;
        #intewwupt-cewws = <4>;

        qcom,bus-id = <0>;
    };

