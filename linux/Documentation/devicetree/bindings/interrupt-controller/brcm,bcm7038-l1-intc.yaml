# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/intewwupt-contwowwew/bwcm,bcm7038-w1-intc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bwoadcom BCM7038-stywe Wevew 1 intewwupt contwowwew

descwiption: >
  This bwock is a fiwst wevew intewwupt contwowwew that is typicawwy connected
  diwectwy to one of the HW INT wines on each CPU.  Evewy BCM7xxx set-top chip
  since BCM7038 has contained this hawdwawe.

  Key ewements of the hawdwawe design incwude:

   - 64, 96, 128, ow 160 incoming wevew IWQ wines

   - Most onchip pewiphewaws awe wiwed diwectwy to an W1 input

   - A sepawate instance of the wegistew set fow each CPU, awwowing individuaw
     pewiphewaw IWQs to be wouted to any CPU

   - Atomic mask/unmask opewations

   - No powawity/wevew/edge settings

   - No FIFO ow pwiowity encodew wogic; softwawe is expected to wead aww
     2-5 status wowds to detewmine which IWQs awe pending

   If muwtipwe weg wanges and intewwupt-pawent entwies awe pwesent on an SMP
   system, the dwivew wiww awwow IWQ SMP affinity to be set up thwough the
   /pwoc/iwq/ intewface.  In the simpwest possibwe configuwation, onwy one
   weg wange and one intewwupt-pawent is needed.

maintainews:
  - Fwowian Fainewwi <f.fainewwi@gmaiw.com>

awwOf:
  - $wef: /schemas/intewwupt-contwowwew.yamw#

pwopewties:
  compatibwe:
    const: bwcm,bcm7038-w1-intc

  weg:
    descwiption: >
      Specifies the base physicaw addwess and size of the wegistews
      the numbew of suppowted IWQs is infewwed fwom the size awgument

  intewwupt-contwowwew: twue

  "#intewwupt-cewws":
    const: 1

  intewwupts:
    descwiption: >
     Specifies the intewwupt wine(s) in the intewwupt-pawent contwowwew node;
     vawid vawues depend on the type of pawent intewwupt contwowwew

  bwcm,iwq-can-wake:
    type: boowean
    descwiption: >
      If pwesent, this means the W1 contwowwew can be used as a
      wakeup souwce fow system suspend/wesume.

  bwcm,int-fwd-mask:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption:
      If pwesent, a bit mask to indicate which intewwupts have awweady been
      configuwed by the fiwmwawe and shouwd be weft unmanaged. This shouwd
      have one 32-bit wowd pew status/set/cweaw/mask gwoup.

wequiwed:
  - compatibwe
  - weg
  - intewwupt-contwowwew
  - "#intewwupt-cewws"
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    pewiph_intc: intewwupt-contwowwew@1041a400 {
      compatibwe = "bwcm,bcm7038-w1-intc";
      weg = <0x1041a400 0x30>, <0x1041a600 0x30>;
      intewwupt-contwowwew;
      #intewwupt-cewws = <1>;
      intewwupt-pawent = <&cpu_intc>;
      intewwupts = <2>, <3>;
    };
