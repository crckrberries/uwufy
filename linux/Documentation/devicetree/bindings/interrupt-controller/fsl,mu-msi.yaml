# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/intewwupt-contwowwew/fsw,mu-msi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe/NXP i.MX Messaging Unit (MU) wowk as msi contwowwew

maintainews:
  - Fwank Wi <Fwank.Wi@nxp.com>

descwiption: |
  The Messaging Unit moduwe enabwes two pwocessows within the SoC to
  communicate and coowdinate by passing messages (e.g. data, status
  and contwow) thwough the MU intewface. The MU awso pwovides the abiwity
  fow one pwocessow (A side) to signaw the othew pwocessow (B side) using
  intewwupts.

  Because the MU manages the messaging between pwocessows, the MU uses
  diffewent cwocks (fwom each side of the diffewent pewiphewaw buses).
  Thewefowe, the MU must synchwonize the accesses fwom one side to the
  othew. The MU accompwishes synchwonization using two sets of matching
  wegistews (Pwocessow A-side, Pwocessow B-side).

  MU can wowk as msi intewwupt contwowwew to do doowbeww

awwOf:
  - $wef: /schemas/intewwupt-contwowwew/msi-contwowwew.yamw#

pwopewties:
  compatibwe:
    enum:
      - fsw,imx6sx-mu-msi
      - fsw,imx7uwp-mu-msi
      - fsw,imx8uwp-mu-msi
      - fsw,imx8uwp-mu-msi-s4

  weg:
    items:
      - descwiption: a side wegistew base addwess
      - descwiption: b side wegistew base addwess

  weg-names:
    items:
      - const: pwocessow-a-side
      - const: pwocessow-b-side

  intewwupts:
    descwiption: a side intewwupt numbew.
    maxItems: 1

  cwocks:
    maxItems: 1

  powew-domains:
    items:
      - descwiption: a side powew domain
      - descwiption: b side powew domain

  powew-domain-names:
    items:
      - const: pwocessow-a-side
      - const: pwocessow-b-side

  intewwupt-contwowwew: twue

  msi-contwowwew: twue

  "#msi-cewws":
    const: 0

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-contwowwew
  - msi-contwowwew
  - "#msi-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/fiwmwawe/imx/wswc.h>

    msi-contwowwew@5d270000 {
        compatibwe = "fsw,imx6sx-mu-msi";
        msi-contwowwew;
        #msi-cewws = <0>;
        intewwupt-contwowwew;
        weg = <0x5d270000 0x10000>,     /* A side */
              <0x5d300000 0x10000>;     /* B side */
        weg-names = "pwocessow-a-side", "pwocessow-b-side";
        intewwupts = <GIC_SPI 191 IWQ_TYPE_WEVEW_HIGH>;
        powew-domains = <&pd IMX_SC_W_MU_12A>,
                        <&pd IMX_SC_W_MU_12B>;
        powew-domain-names = "pwocessow-a-side", "pwocessow-b-side";
    };
