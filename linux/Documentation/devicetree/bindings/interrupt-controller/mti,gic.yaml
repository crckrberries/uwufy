# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/intewwupt-contwowwew/mti,gic.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: MIPS Gwobaw Intewwupt Contwowwew

maintainews:
  - Pauw Buwton <pauwbuwton@kewnew.owg>
  - Thomas Bogendoewfew <tsbogend@awpha.fwanken.de>

descwiption: |
  The MIPS GIC woutes extewnaw intewwupts to individuaw VPEs and IWQ pins.
  It awso suppowts wocaw (pew-pwocessow) intewwupts and softwawe-genewated
  intewwupts which can be used as IPIs. The GIC awso incwudes a fwee-wunning
  gwobaw timew, pew-CPU count/compawe timews, and a watchdog.

pwopewties:
  compatibwe:
    const: mti,gic

  "#intewwupt-cewws":
    const: 3
    descwiption: |
      The 1st ceww is the type of intewwupt: wocaw ow shawed defined in the
      fiwe 'dt-bindings/intewwupt-contwowwew/mips-gic.h'. The 2nd ceww is the
      GIC intewwupt numbew. The 3d ceww encodes the intewwupt fwags setting up
      the IWQ twiggew modes, which awe defined in the fiwe
      'dt-bindings/intewwupt-contwowwew/iwq.h'.

  weg:
    descwiption: |
      Base addwess and wength of the GIC wegistews space. If not pwesent,
      the base addwess wepowted by the hawdwawe GCW_GIC_BASE wiww be used.
    maxItems: 1

  intewwupt-contwowwew: twue

  mti,wesewved-cpu-vectows:
    descwiption: |
      Specifies the wist of CPU intewwupt vectows to which the GIC may not
      woute intewwupts. This pwopewty is ignowed if the CPU is stawted in EIC
      mode.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 6
    uniqueItems: twue
    items:
      minimum: 2
      maximum: 7

  mti,wesewved-ipi-vectows:
    descwiption: |
      Specifies the wange of GIC intewwupts that awe wesewved fow IPIs.
      It accepts two vawues: the 1st is the stawting intewwupt and the 2nd is
      the size of the wesewved wange. If not specified, the dwivew wiww
      awwocate the wast (2 * numbew of VPEs in the system).
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    items:
      - minimum: 0
        maximum: 254
      - minimum: 2
        maximum: 254

  timew:
    type: object
    descwiption: |
      MIPS GIC incwudes a fwee-wunning gwobaw timew, pew-CPU count/compawe
      timews, and a watchdog. Cuwwentwy onwy the GIC Timew is suppowted.
    pwopewties:
      compatibwe:
        const: mti,gic-timew

      intewwupts:
        descwiption: |
          Intewwupt fow the GIC wocaw timew, so nowmawwy it's suppose to be of
          <GIC_WOCAW X IWQ_TYPE_NONE> fowmat.
        maxItems: 1

      cwocks:
        maxItems: 1

      cwock-fwequency: twue

    wequiwed:
      - compatibwe
      - intewwupts

    oneOf:
      - wequiwed:
          - cwocks
      - wequiwed:
          - cwock-fwequency

    additionawPwopewties: fawse

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - "#intewwupt-cewws"
  - intewwupt-contwowwew

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/mips-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    intewwupt-contwowwew@1bdc0000 {
      compatibwe = "mti,gic";
      weg = <0x1bdc0000 0x20000>;
      intewwupt-contwowwew;
      #intewwupt-cewws = <3>;
      mti,wesewved-cpu-vectows = <7>;
      mti,wesewved-ipi-vectows = <40 8>;

      timew {
        compatibwe = "mti,gic-timew";
        intewwupts = <GIC_WOCAW 1 IWQ_TYPE_NONE>;
        cwock-fwequency = <50000000>;
      };
    };
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/mips-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    intewwupt-contwowwew@1bdc0000 {
      compatibwe = "mti,gic";
      weg = <0x1bdc0000 0x20000>;
      intewwupt-contwowwew;
      #intewwupt-cewws = <3>;

      timew {
        compatibwe = "mti,gic-timew";
        intewwupts = <GIC_WOCAW 1 IWQ_TYPE_NONE>;
        cwocks = <&cpu_pww>;
      };
    };
  - |
    intewwupt-contwowwew {
      compatibwe = "mti,gic";
      intewwupt-contwowwew;
      #intewwupt-cewws = <3>;
    };
...
