# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/timestamp/nvidia,tegwa194-hte.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Tegwa on chip genewic hawdwawe timestamping engine (HTE) pwovidew

maintainews:
  - Dipen Patew <dipenp@nvidia.com>

descwiption:
  Tegwa SoC has two instances of genewic hawdwawe timestamping engines (GTE)
  known as GTE GPIO and GTE IWQ, which can monitow subset of GPIO and on chip
  IWQ wines fow the state change wespectivewy, upon detection it wiww wecowd
  timestamp (taken fwom system countew) in its intewnaw hawdwawe FIFO. It has
  a bitmap awway awwanged in 32bit swices whewe each bit wepwesent signaw/wine
  to enabwe ow disabwe fow the hawdwawe timestamping. The GTE GPIO monitows
  GPIO wines fwom the AON (awways on) GPIO contwowwew.

pwopewties:
  compatibwe:
    enum:
      - nvidia,tegwa194-gte-aon
      - nvidia,tegwa194-gte-wic
      - nvidia,tegwa234-gte-aon
      - nvidia,tegwa234-gte-wic

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  nvidia,int-thweshowd:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      HTE device genewates its intewwupt based on this u32 FIFO thweshowd
      vawue. The wecommended vawue is 1.
    minimum: 1
    maximum: 256

  nvidia,swices:
    $wef: /schemas/types.yamw#/definitions/uint32
    depwecated: twue
    descwiption:
      HTE wines awe awwanged in 32 bit swice whewe each bit wepwesents diffewent
      wine/signaw that it can enabwe/configuwe fow the timestamp. It is u32
      pwopewty and the vawue depends on the HTE instance in the chip. The AON
      GTE instances fow both Tegwa194 and Tegwa234 has 3 swices. The Tegwa194
      WIC instance has 11 swices and Tegwa234 WIC has 17 swices.
    enum: [3, 11, 17]

  nvidia,gpio-contwowwew:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      The phandwe to AON gpio contwowwew instance. This is wequiwed to handwe
      namespace convewsion between GPIO and GTE.

  '#timestamp-cewws':
    descwiption:
      This wepwesents numbew of wine id awguments as specified by the
      consumews. Fow the GTE IWQ, this is IWQ numbew as mentioned in the
      SoC technicaw wefewence manuaw. Fow the GTE GPIO, its vawue is same as
      mentioned in the nvidia GPIO device twee binding document.
    const: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - "#timestamp-cewws"

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa194-gte-aon
              - nvidia,tegwa234-gte-aon
    then:
      pwopewties:
        nvidia,swices:
          const: 3

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa194-gte-wic
    then:
      pwopewties:
        nvidia,swices:
          const: 11

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa234-gte-wic
    then:
      pwopewties:
        nvidia,swices:
          const: 17

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa234-gte-aon
    then:
      wequiwed:
        - nvidia,gpio-contwowwew

additionawPwopewties: fawse

exampwes:
  - |
    tegwa_hte_aon: timestamp@c1e0000 {
              compatibwe = "nvidia,tegwa194-gte-aon";
              weg = <0xc1e0000 0x10000>;
              intewwupts = <0 13 0x4>;
              nvidia,int-thweshowd = <1>;
              #timestamp-cewws = <1>;
    };

  - |
    tegwa_hte_wic: timestamp@3aa0000 {
              compatibwe = "nvidia,tegwa194-gte-wic";
              weg = <0x3aa0000 0x10000>;
              intewwupts = <0 11 0x4>;
              nvidia,int-thweshowd = <1>;
              #timestamp-cewws = <1>;
    };

...
