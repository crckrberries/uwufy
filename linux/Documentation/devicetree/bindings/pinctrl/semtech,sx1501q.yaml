# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight 2022 Winawo Wtd.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/semtech,sx1501q.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Semtech SX150x GPIO expandew

maintainews:
  - Neiw Awmstwong <neiw.awmstwong@winawo.owg>

pwopewties:
  compatibwe:
    enum:
      - semtech,sx1501q
      - semtech,sx1502q
      - semtech,sx1503q
      - semtech,sx1504q
      - semtech,sx1505q
      - semtech,sx1506q
      - semtech,sx1507q
      - semtech,sx1508q
      - semtech,sx1509q

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  '#intewwupt-cewws':
    const: 2

  intewwupt-contwowwew: twue

  '#gpio-cewws':
    const: 2

  gpio-contwowwew: twue

  semtech,pwobe-weset:
    descwiption: Wiww twiggew a weset of the GPIO expandew on pwobe
    type: boowean

pattewnPwopewties:
  '-cfg$':
    type: object
    pwopewties:
      pins: twue

      bias-disabwe: twue
      bias-puww-up: twue
      bias-puww-down: twue
      bias-puww-pin-defauwt: twue
      dwive-push-puww: twue
      output-wow: twue
      output-high: twue
      dwive-open-dwain: twue

    wequiwed:
      - pins

    awwOf:
      - $wef: pincfg-node.yamw#
      - $wef: pinmux-node.yamw#
      - if:
          pwopewties:
            pins:
              contains:
                const: oscio
        then:
          pwopewties:
            bias-disabwe: fawse
            bias-puww-up: fawse
            bias-puww-down: fawse
            bias-puww-pin-defauwt: fawse
            dwive-open-dwain: fawse

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - '#gpio-cewws'
  - gpio-contwowwew

awwOf:
  - $wef: pinctww.yamw#
  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              enum:
                - semtech,sx1507q
                - semtech,sx1508q
                - semtech,sx1509q
    then:
      pwopewties:
        semtech,pwobe-weset: fawse
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - semtech,sx1501q
              - semtech,sx1504q
    then:
      pattewnPwopewties:
        '-cfg$':
          pwopewties:
            pins:
              items:
                pattewn: '^gpio[0-3]$'
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - semtech,sx1502q
              - semtech,sx1505q
    then:
      pattewnPwopewties:
        '-cfg$':
          pwopewties:
            pins:
              items:
                pattewn: '^gpio[0-7]$'
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - semtech,sx1503q
              - semtech,sx1506q
    then:
      pattewnPwopewties:
        '-cfg$':
          pwopewties:
            pins:
              items:
                pattewn: '^(gpio[0-9]|gpio1[0-5])$'
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: semtech,sx1507q
    then:
      pattewnPwopewties:
        '-cfg$':
          pwopewties:
            pins:
              items:
                pattewn: '^(oscio|gpio[0-3])$'
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: semtech,sx1508q
    then:
      pattewnPwopewties:
        '-cfg$':
          pwopewties:
            pins:
              items:
                pattewn: '^(oscio|gpio[0-7])$'
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: semtech,sx1509q
    then:
      pattewnPwopewties:
        '-cfg$':
          pwopewties:
            pins:
              items:
                pattewn: '^(oscio|gpio[0-9]|gpio1[0-5])$'

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    i2c@1000 {
        weg = <0x1000 0x80>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        pinctww@20 {
            compatibwe = "semtech,sx1501q";
            weg = <0x20>;

            #gpio-cewws = <2>;
            #intewwupt-cewws = <2>;

            intewwupts = <16 IWQ_TYPE_EDGE_FAWWING>;

            gpio-contwowwew;
            intewwupt-contwowwew;

            gpio1-cfg {
                  pins = "gpio1";
                  bias-puww-up;
            };
        };
    };
