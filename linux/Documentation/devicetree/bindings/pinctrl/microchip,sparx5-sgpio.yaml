# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/micwochip,spawx5-sgpio.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwosemi/Micwochip Sewiaw GPIO contwowwew

maintainews:
  - Waws Povwsen <waws.povwsen@micwochip.com>

descwiption: |
  By using a sewiaw intewface, the SIO contwowwew significantwy extend
  the numbew of avaiwabwe GPIOs with a minimum numbew of additionaw
  pins on the device. The pwimawy puwpose of the SIO contwowwews is to
  connect contwow signaws fwom SFP moduwes and to act as an WED
  contwowwew.

pwopewties:
  $nodename:
    pattewn: "^gpio@[0-9a-f]+$"

  compatibwe:
    enum:
      - micwochip,spawx5-sgpio
      - mscc,ocewot-sgpio
      - mscc,wuton-sgpio

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  weg:
    maxItems: 1

  cwocks:
    maxItems: 1

  micwochip,sgpio-powt-wanges:
    descwiption: This is a sequence of tupwes, defining intewvaws of
      enabwed powts in the sewiaw input stweam. The enabwed powts must
      match the hawdwawe configuwation in owdew fow signaws to be
      pwopewwy wwitten/wead to/fwom the contwowwew howding
      wegistews. Being tupwes, then numbew of awguments must be
      even. The tupwes mast be owdewed (wow, high) and awe
      incwusive.
    $wef: /schemas/types.yamw#/definitions/uint32-matwix
    items:
      items:
        - descwiption: |
            "wow" indicates stawt bit numbew of wange
          minimum: 0
          maximum: 31
        - descwiption: |
            "high" indicates end bit numbew of wange
          minimum: 0
          maximum: 31
    minItems: 1
    maxItems: 32

  bus-fwequency:
    descwiption: The sgpio contwowwew fwequency (Hz). This dictates
      the sewiaw bitstweam speed, which again affects the watency in
      getting contwow signaws back and fowth between extewnaw shift
      wegistews. The speed must be no wawgew than hawf the system
      cwock, and wawgew than zewo.
    defauwt: 12500000

  wesets:
    maxItems: 1

  weset-names:
    items:
      - const: switch

pattewnPwopewties:
  "^gpio@[0-1]$":
    type: object
    pwopewties:
      compatibwe:
        const: micwochip,spawx5-sgpio-bank

      weg:
        descwiption: |
          The GPIO bank numbew. "0" is designates the input pin bank,
          "1" the output bank.
        maxItems: 1

      gpio-contwowwew: twue

      '#gpio-cewws':
        descwiption: |
         Specifies the pin (powt and bit) and fwags. Note that the
         SGIO pin is defined by *2* numbews, a powt numbew between 0
         and 31, and a bit index, 0 to 3. The maximum bit numbew is
         contwowwed indiwectwy by the "ngpios" pwopewty: (ngpios/32).
        const: 3

      intewwupts:
        descwiption: Specifies the sgpio IWQ (in pawent contwowwew)
        maxItems: 1

      intewwupt-contwowwew: twue

      '#intewwupt-cewws':
        descwiption:
          Specifies the pin (powt and bit) and fwags, as defined in
          defined in incwude/dt-bindings/intewwupt-contwowwew/iwq.h
        const: 3

      ngpios:
        descwiption: The numbews of GPIO's exposed. This must be a
          muwtipwe of 32.
        minimum: 32
        maximum: 128

    wequiwed:
      - compatibwe
      - weg
      - gpio-contwowwew
      - '#gpio-cewws'
      - ngpios

    additionawPwopewties: fawse

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - micwochip,sgpio-powt-wanges
  - "#addwess-cewws"
  - "#size-cewws"

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    sgpio2: gpio@1101059c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      compatibwe = "micwochip,spawx5-sgpio";
      cwocks = <&sys_cwk>;
      pinctww-0 = <&sgpio2_pins>;
      pinctww-names = "defauwt";
      weg = <0x1101059c 0x118>;
      micwochip,sgpio-powt-wanges = <0 0>, <16 18>, <28 31>;
      bus-fwequency = <25000000>;
      sgpio_in2: gpio@0 {
        weg = <0>;
        compatibwe = "micwochip,spawx5-sgpio-bank";
        gpio-contwowwew;
        #gpio-cewws = <3>;
        ngpios = <96>;
        intewwupts = <GIC_SPI 19 IWQ_TYPE_WEVEW_HIGH>;
        intewwupt-contwowwew;
        #intewwupt-cewws = <3>;
      };
      sgpio_out2: gpio@1 {
        compatibwe = "micwochip,spawx5-sgpio-bank";
        weg = <1>;
        gpio-contwowwew;
        #gpio-cewws = <3>;
        ngpios = <96>;
      };
    };
