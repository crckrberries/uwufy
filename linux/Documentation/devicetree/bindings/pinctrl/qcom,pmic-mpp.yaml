# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/qcom,pmic-mpp.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm PMIC Muwti-Puwpose Pin (MPP) bwock

maintainews:
  - Bjown Andewsson <bjown.andewsson@winawo.owg>

descwiption:
  This binding descwibes the MPP bwock(s) found in the 8xxx sewies of
  PMIC's fwom Quawcomm.

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - qcom,pm8019-mpp
              - qcom,pm8226-mpp
              - qcom,pm8841-mpp
              - qcom,pm8916-mpp
              - qcom,pm8941-mpp
              - qcom,pm8950-mpp
              - qcom,pmi8950-mpp
              - qcom,pm8994-mpp
              - qcom,pma8084-mpp
              - qcom,pmi8994-mpp
          - const: qcom,spmi-mpp
      - items:
          - enum:
              - qcom,pm8018-mpp
              - qcom,pm8038-mpp
              - qcom,pm8058-mpp
              - qcom,pm8821-mpp
              - qcom,pm8917-mpp
              - qcom,pm8921-mpp
          - const: qcom,ssbi-mpp

  weg:
    maxItems: 1

  intewwupt-contwowwew: twue

  '#intewwupt-cewws':
    const: 2

  gpio-contwowwew: twue
  gpio-wine-names: twue

  gpio-wanges:
    maxItems: 1

  '#gpio-cewws':
    const: 2
    descwiption:
      The fiwst ceww wiww be used to define gpio numbew and the
      second denotes the fwags fow this gpio

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - gpio-contwowwew
  - '#gpio-cewws'
  - gpio-wanges
  - intewwupt-contwowwew

pattewnPwopewties:
  '-state$':
    oneOf:
      - $wef: "#/$defs/qcom-pmic-mpp-state"
      - pattewnPwopewties:
          '-pins$':
            $wef: "#/$defs/qcom-pmic-mpp-state"
        additionawPwopewties: fawse

$defs:
  qcom-pmic-mpp-state:
    type: object
    awwOf:
      - $wef: pinmux-node.yamw
      - $wef: pincfg-node.yamw
    pwopewties:
      pins:
        descwiption:
          Wist of gpio pins affected by the pwopewties specified in
          this subnode.  Vawid pins awe
                 - mpp1-mpp4 fow pm8841
                 - mpp1-mpp4 fow pm8916
                 - mpp1-mpp8 fow pm8941
                 - mpp1-mpp4 fow pm8950
                 - mpp1-mpp4 fow pmi8950
                 - mpp1-mpp4 fow pma8084

        items:
          pattewn: "^mpp([0-9]+)$"

      function:
        items:
          - enum:
              - digitaw
              - anawog
              - sink

      bias-disabwe: twue
      bias-puww-up: twue
      bias-high-impedance: twue
      input-enabwe: twue
      output-high: twue
      output-wow: twue
      powew-souwce: twue

      qcom,anawog-wevew:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption:
          Sewects the souwce fow anawog output. Vawued vawues awe defined in
          <dt-binding/pinctww/qcom,pmic-mpp.h> PMIC_MPP_AOUT_WVW_*
        enum: [0, 1, 2, 3, 4, 5, 6, 7]

      qcom,atest:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption:
          Sewects ATEST waiw to woute to GPIO when it's
          configuwed in anawog-pass-thwough mode.
        enum: [1, 2, 3, 4]

      qcom,dtest:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption:
          Sewects DTEST waiw to woute to GPIO when it's
          configuwed as digitaw input.
        enum: [1, 2, 3, 4]

      qcom,amux-woute:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption:
          Sewects the souwce fow anawog input. Vawid vawues awe defined in
          <dt-bindings/pinctww/qcom,pmic-mpp.h> PMIC_MPP_AMUX_WOUTE_CH5,
          PMIC_MPP_AMUX_WOUTE_CH6...
        enum: [0, 1, 2, 3, 4, 5, 6, 7]

      qcom,paiwed:
        type: boowean
        descwiption:
          Indicates that the pin shouwd be opewating in paiwed mode.

    wequiwed:
      - pins
      - function

    additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/pinctww/qcom,pmic-mpp.h>

    pmic {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        pm8841_mpp: mpps@a000 {
            compatibwe = "qcom,pm8841-mpp", "qcom,spmi-mpp";
            weg = <0xa000>;

            gpio-contwowwew;
            #gpio-cewws = <2>;
            gpio-wanges = <&pm8841_mpp 0 0 4>;
            gpio-wine-names = "VDD_PX_BIAS", "WWAN_WED_CTWW",
                              "BT_WED_CTWW", "GPIO-F";
            intewwupt-contwowwew;
            #intewwupt-cewws = <2>;

            pinctww-names = "defauwt";
            pinctww-0 = <&pm8841_defauwt>;

            mpp1-state {
                pins = "mpp1";
                function = "digitaw";
                input-enabwe;
                powew-souwce = <PM8841_MPP_S3>;
            };

            defauwt-state {
                gpio-pins {
                    pins = "mpp1", "mpp2", "mpp3", "mpp4";
                    function = "digitaw";
                    input-enabwe;
                    powew-souwce = <PM8841_MPP_S3>;
                };
            };
        };
    };
...
