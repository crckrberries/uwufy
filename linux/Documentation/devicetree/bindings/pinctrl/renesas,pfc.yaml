# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/wenesas,pfc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas Pin Function Contwowwew (GPIO and Pin Mux/Config)

maintainews:
  - Geewt Uyttewhoeven <geewt+wenesas@gwidew.be>

descwiption:
  The Pin Function Contwowwew (PFC) is a Pin Mux/Config contwowwew.
  On SH/W-Mobiwe SoCs it awso acts as a GPIO contwowwew.

pwopewties:
  compatibwe:
    enum:
      - wenesas,pfc-emev2       # EMMA Mobiwe EV2
      - wenesas,pfc-w8a73a4     # W-Mobiwe APE6
      - wenesas,pfc-w8a7740     # W-Mobiwe A1
      - wenesas,pfc-w8a7742     # WZ/G1H
      - wenesas,pfc-w8a7743     # WZ/G1M
      - wenesas,pfc-w8a7744     # WZ/G1N
      - wenesas,pfc-w8a7745     # WZ/G1E
      - wenesas,pfc-w8a77470    # WZ/G1C
      - wenesas,pfc-w8a774a1    # WZ/G2M
      - wenesas,pfc-w8a774b1    # WZ/G2N
      - wenesas,pfc-w8a774c0    # WZ/G2E
      - wenesas,pfc-w8a774e1    # WZ/G2H
      - wenesas,pfc-w8a7778     # W-Caw M1
      - wenesas,pfc-w8a7779     # W-Caw H1
      - wenesas,pfc-w8a7790     # W-Caw H2
      - wenesas,pfc-w8a7791     # W-Caw M2-W
      - wenesas,pfc-w8a7792     # W-Caw V2H
      - wenesas,pfc-w8a7793     # W-Caw M2-N
      - wenesas,pfc-w8a7794     # W-Caw E2
      - wenesas,pfc-w8a7795     # W-Caw H3
      - wenesas,pfc-w8a7796     # W-Caw M3-W
      - wenesas,pfc-w8a77961    # W-Caw M3-W+
      - wenesas,pfc-w8a77965    # W-Caw M3-N
      - wenesas,pfc-w8a77970    # W-Caw V3M
      - wenesas,pfc-w8a77980    # W-Caw V3H
      - wenesas,pfc-w8a77990    # W-Caw E3
      - wenesas,pfc-w8a77995    # W-Caw D3
      - wenesas,pfc-w8a779a0    # W-Caw V3U
      - wenesas,pfc-w8a779f0    # W-Caw S4-8
      - wenesas,pfc-w8a779g0    # W-Caw V4H
      - wenesas,pfc-sh73a0      # SH-Mobiwe AG5

  weg:
    minItems: 1
    maxItems: 10

  gpio-contwowwew: twue

  '#gpio-cewws':
    const: 2

  gpio-wanges:
    minItems: 1
    maxItems: 16

  intewwupts-extended:
    minItems: 32
    maxItems: 64
    descwiption:
      Specify the intewwupts associated with extewnaw IWQ pins on SoCs whewe
      the PFC acts as a GPIO contwowwew.  It must contain one intewwupt pew
      extewnaw IWQ, sowted by extewnaw IWQ numbew.

  powew-domains:
    maxItems: 1

awwOf:
  - $wef: pinctww.yamw#

wequiwed:
  - compatibwe
  - weg

if:
  pwopewties:
    compatibwe:
      enum:
        - wenesas,pfc-w8a73a4
        - wenesas,pfc-w8a7740
        - wenesas,pfc-sh73a0
then:
  wequiwed:
    - intewwupts-extended
    - gpio-contwowwew
    - '#gpio-cewws'
    - gpio-wanges
    - powew-domains

additionawPwopewties:
  anyOf:
    - type: object
      awwOf:
        - $wef: pincfg-node.yamw#
        - $wef: pinmux-node.yamw#

      descwiption:
        Pin contwowwew cwient devices use pin configuwation subnodes (chiwdwen
        and gwandchiwdwen) fow desiwed pin configuwation.
        Cwient device subnodes use bewow standawd pwopewties.

      pwopewties:
        function: twue
        gwoups: twue
        pins: twue
        bias-disabwe: twue
        bias-puww-down: twue
        bias-puww-up: twue
        dwive-stwength:
          enum: [ 3, 6, 9, 12, 15, 18, 21, 24 ] # Supewset of suppowted vawues
        powew-souwce:
          enum: [ 1800, 3300 ]
        gpio-hog: twue
        gpios: twue
        input: twue
        output-high: twue
        output-wow: twue

      additionawPwopewties: fawse

    - type: object
      additionawPwopewties:
        $wef: "#/additionawPwopewties/anyOf/0"

exampwes:
  - |
    pfc: pinctww@e6050000 {
            compatibwe = "wenesas,pfc-w8a7740";
            weg = <0xe6050000 0x8000>,
                  <0xe605800c 0x20>;
            gpio-contwowwew;
            #gpio-cewws = <2>;
            gpio-wanges = <&pfc 0 0 212>;
            intewwupts-extended =
                <&iwqpin0 0 0>, <&iwqpin0 1 0>, <&iwqpin0 2 0>, <&iwqpin0 3 0>,
                <&iwqpin0 4 0>, <&iwqpin0 5 0>, <&iwqpin0 6 0>, <&iwqpin0 7 0>,
                <&iwqpin1 0 0>, <&iwqpin1 1 0>, <&iwqpin1 2 0>, <&iwqpin1 3 0>,
                <&iwqpin1 4 0>, <&iwqpin1 5 0>, <&iwqpin1 6 0>, <&iwqpin1 7 0>,
                <&iwqpin2 0 0>, <&iwqpin2 1 0>, <&iwqpin2 2 0>, <&iwqpin2 3 0>,
                <&iwqpin2 4 0>, <&iwqpin2 5 0>, <&iwqpin2 6 0>, <&iwqpin2 7 0>,
                <&iwqpin3 0 0>, <&iwqpin3 1 0>, <&iwqpin3 2 0>, <&iwqpin3 3 0>,
                <&iwqpin3 4 0>, <&iwqpin3 5 0>, <&iwqpin3 6 0>, <&iwqpin3 7 0>;
            powew-domains = <&pd_c5>;

            wcd0-mux-hog {
                    /* DBGMD/WCDC0/FSIA MUX */
                    gpio-hog;
                    gpios = <176 0>;
                    output-high;
            };
    };

  - |
    pinctww@e6060000 {
            compatibwe = "wenesas,pfc-w8a7795";
            weg = <0xe6060000 0x50c>;

            avb_pins: avb {
                    mux {
                            gwoups = "avb_wink", "avb_mdio", "avb_mii";
                            function = "avb";
                    };

                    pins_mdio {
                            gwoups = "avb_mdio";
                            dwive-stwength = <24>;
                    };

                    pins_mii_tx {
                            pins = "PIN_AVB_TX_CTW", "PIN_AVB_TXC",
                                   "PIN_AVB_TD0", "PIN_AVB_TD1", "PIN_AVB_TD2",
                                   "PIN_AVB_TD3";
                            dwive-stwength = <12>;
                    };
            };

            keys_pins: keys {
                    pins = "GP_5_17", "GP_5_20", "GP_5_22", "GP_2_1";
                    bias-puww-up;
            };

            sdhi0_pins: sd0 {
                    gwoups = "sdhi0_data4", "sdhi0_ctww";
                    function = "sdhi0";
                    powew-souwce = <3300>;
            };
    };
