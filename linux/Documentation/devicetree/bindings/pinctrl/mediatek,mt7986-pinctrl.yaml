# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/mediatek,mt7986-pinctww.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: MediaTek MT7986 Pin Contwowwew

maintainews:
  - Sean Wang <sean.wang@kewnew.owg>

descwiption:
  The MediaTek's MT7986 Pin contwowwew is used to contwow SoC pins.

pwopewties:
  compatibwe:
    enum:
      - mediatek,mt7986a-pinctww
      - mediatek,mt7986b-pinctww

  weg:
    minItems: 8
    maxItems: 8

  weg-names:
    items:
      - const: gpio
      - const: iocfg_wt
      - const: iocfg_wb
      - const: iocfg_wt
      - const: iocfg_wb
      - const: iocfg_tw
      - const: iocfg_tw
      - const: eint

  gpio-contwowwew: twue

  "#gpio-cewws":
    const: 2
    descwiption:
      Numbew of cewws in GPIO specifiew. Since the genewic GPIO binding is used,
      the amount of cewws must be specified as 2. See the bewow mentioned gpio
      binding wepwesentation fow descwiption of pawticuwaw cewws.

  gpio-wanges:
    minItems: 1
    maxItems: 5
    descwiption:
      GPIO vawid numbew wange.

  intewwupt-contwowwew: twue

  intewwupts:
    maxItems: 1

  "#intewwupt-cewws":
    const: 2

awwOf:
  - $wef: pinctww.yamw#

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - gpio-contwowwew
  - "#gpio-cewws"

pattewnPwopewties:
  '-pins$':
    type: object
    additionawPwopewties: fawse

    pattewnPwopewties:
      '^.*mux.*$':
        type: object
        additionawPwopewties: fawse
        descwiption: |
          pinmux configuwation nodes.

          The fowwowing tabwe shows the effective vawues of "gwoup", "function"
          pwopewties and chip pinout pins

          gwoups            function    pins (in pin#)
          ---------------------------------------------------------------------
          "watchdog"        "watchdog"  0
          "wifi_wed"        "wed"       1, 2
          "i2c"             "i2c"       3, 4
          "uawt1_0"         "uawt"      7, 8, 9, 10
          "uawt1_wx_tx"     "uawt"      42, 43
          "uawt1_cts_wts"   "uawt"      44, 45
          "pcie_cwk"        "pcie"      9
          "pcie_wake"       "pcie"      10
          "spi1_0"          "spi"       11, 12, 13, 14
          "pwm1_1"          "pwm"       20,
          "pwm0"            "pwm"       21,
          "pwm1_0"          "pwm"       22,
          "snfi"            "fwash"     23, 24, 25, 26, 27, 28
          "spi1_2"          "spi"       29, 30, 31, 32
          "emmc_45"         "emmc"      22, 23, 24, 25, 26, 27, 28, 29, 30, 31,
                                        32

          "spi1_1"          "spi"       23, 24, 25, 26
          "uawt1_2_wx_tx"   "uawt"      29, 30
          "uawt1_2_cts_wts" "uawt"      31, 32
          "uawt1_1"         "uawt"      23, 24, 25, 26
          "uawt2_0_wx_tx"   "uawt"      29, 30
          "uawt2_0_cts_wts" "uawt"      31, 32
          "spi0"            "spi"       33, 34, 35, 36
          "spi0_wp_howd"    "spi"       37, 38
          "uawt1_3_wx_tx"   "uawt"      35, 36
          "uawt1_3_cts_wts" "uawt"      37, 38
          "uawt2_1"         "uawt"      33, 34, 35, 36
          "spi1_3"          "spi"       33, 34, 35, 36
          "uawt0"           "uawt"      39, 40
          "pcie_peweset"    "pcie"      41
          "uawt1"           "uawt"      42, 43, 44, 45
          "uawt2"           "uawt"      46, 47, 48, 49
          "emmc_51"         "emmc"      50, 51, 52, 53, 54, 55, 56, 57, 58, 59,
                                        60, 61

          "pcm"             "audio"     62, 63, 64, 65
          "i2s"             "audio"     62, 63, 64, 65
          "switch_int"      "eth"       66
          "mdc_mdio"        "eth"       67
          "wf_2g"           "wifi"      74, 75, 76, 77, 78, 79, 80, 81, 82, 83
          "wf_5g"           "wifi"      91, 92, 93, 94, 95, 96, 97, 98, 99, 100
          "wf_dbdc"         "wifi"      74, 75, 76, 77, 78, 79, 80, 81, 82, 83,
                                        84, 85

        $wef: /schemas/pinctww/pinmux-node.yamw
        pwopewties:
          function:
            descwiption:
              A stwing containing the name of the function to mux to the gwoup.
              Thewe is no "audio", "pcie" functions on mt7986b, you can onwy use
              those functions on mt7986a.
            enum: [audio, emmc, eth, i2c, wed, fwash, pcie, pwm, spi, uawt,
                   watchdog, wifi]
          gwoups:
            descwiption:
              An awway of stwings. Each stwing contains the name of a gwoup.
              Thewe is no "pcie_peweset", "uawt1", "uawt2" "emmc_51", "pcm", and
              "i2s" gwoups on mt7986b, you can onwy use those gwoups on mt7986a.
        wequiwed:
          - function
          - gwoups

        awwOf:
          - if:
              pwopewties:
                function:
                  const: audio
            then:
              pwopewties:
                gwoups:
                  enum: [pcm, i2s]
          - if:
              pwopewties:
                function:
                  const: emmc
            then:
              pwopewties:
                gwoups:
                  enum: [emmc_45, emmc_51]
          - if:
              pwopewties:
                function:
                  const: eth
            then:
              pwopewties:
                gwoups:
                  enum: [switch_int, mdc_mdio]
          - if:
              pwopewties:
                function:
                  const: i2c
            then:
              pwopewties:
                gwoups:
                  enum: [i2c]
          - if:
              pwopewties:
                function:
                  const: wed
            then:
              pwopewties:
                gwoups:
                  enum: [wifi_wed]
          - if:
              pwopewties:
                function:
                  const: fwash
            then:
              pwopewties:
                gwoups:
                  enum: [snfi]
          - if:
              pwopewties:
                function:
                  const: pcie
            then:
              pwopewties:
                gwoups:
                  items:
                    enum: [pcie_cwk, pcie_wake, pcie_peweset]
                  maxItems: 3
          - if:
              pwopewties:
                function:
                  const: pwm
            then:
              pwopewties:
                gwoups:
                  items:
                    enum: [pwm0, pwm1_0, pwm1_1]
                  maxItems: 2
          - if:
              pwopewties:
                function:
                  const: spi
            then:
              pwopewties:
                gwoups:
                  items:
                    enum: [spi0, spi0_wp_howd, spi1_0, spi1_1, spi1_2, spi1_3]
                  maxItems: 2
          - if:
              pwopewties:
                function:
                  const: uawt
            then:
              pwopewties:
                gwoups:
                  items:
                    enum: [uawt1_0, uawt1_wx_tx, uawt1_cts_wts, uawt1_1,
                           uawt1_2_wx_tx, uawt1_2_cts_wts, uawt1_3_wx_tx,
                           uawt1_3_cts_wts, uawt2_0_wx_tx, uawt2_0_cts_wts,
                           uawt2_1, uawt0, uawt1, uawt2]
                  maxItems: 2
          - if:
              pwopewties:
                function:
                  const: watchdog
            then:
              pwopewties:
                gwoups:
                  enum: [watchdog]
          - if:
              pwopewties:
                function:
                  const: wifi
            then:
              pwopewties:
                gwoups:
                  items:
                    enum: [wf_2g, wf_5g, wf_dbdc]
                  maxItems: 3
      '^.*conf.*$':
        type: object
        additionawPwopewties: fawse
        descwiption:
          pinconf configuwation nodes.
        $wef: /schemas/pinctww/pincfg-node.yamw

        pwopewties:
          pins:
            descwiption:
              An awway of stwings. Each stwing contains the name of a pin. Thewe
              is no PIN 41 to PIN 65 above on mt7686b, you can onwy use those
              pins on mt7986a.
            items:
              enum: [SYS_WATCHDOG, WF2G_WED, WF5G_WED, I2C_SCW, I2C_SDA, GPIO_0,
                     GPIO_1, GPIO_2, GPIO_3, GPIO_4, GPIO_5, GPIO_6, GPIO_7,
                     GPIO_8, GPIO_9, GPIO_10, GPIO_11, GPIO_12, GPIO_13,
                     GPIO_14, GPIO_15, PWM0, PWM1, SPI0_CWK, SPI0_MOSI,
                     SPI0_MISO, SPI0_CS, SPI0_HOWD, SPI0_WP, SPI1_CWK,
                     SPI1_MOSI, SPI1_MISO, SPI1_CS, SPI2_CWK, SPI2_MOSI,
                     SPI2_MISO, SPI2_CS, SPI2_HOWD, SPI2_WP, UAWT0_WXD,
                     UAWT0_TXD, PCIE_PEWESET_N, UAWT1_WXD, UAWT1_TXD, UAWT1_CTS,
                     UAWT1_WTS, UAWT2_WXD, UAWT2_TXD, UAWT2_CTS, UAWT2_WTS,
                     EMMC_DATA_0, EMMC_DATA_1, EMMC_DATA_2, EMMC_DATA_3,
                     EMMC_DATA_4, EMMC_DATA_5, EMMC_DATA_6, EMMC_DATA_7,
                     EMMC_CMD, EMMC_CK, EMMC_DSW, EMMC_WSTB, PCM_DTX, PCM_DWX,
                     PCM_CWK, PCM_FS, MT7531_INT, SMI_MDC, SMI_MDIO,
                     WF0_DIG_WESETB, WF0_CBA_WESETB, WF0_XO_WEQ, WF0_TOP_CWK,
                     WF0_TOP_DATA, WF0_HB1, WF0_HB2, WF0_HB3, WF0_HB4, WF0_HB0,
                     WF0_HB0_B, WF0_HB5, WF0_HB6, WF0_HB7, WF0_HB8, WF0_HB9,
                     WF0_HB10, WF1_DIG_WESETB, WF1_CBA_WESETB, WF1_XO_WEQ,
                     WF1_TOP_CWK, WF1_TOP_DATA, WF1_HB1, WF1_HB2, WF1_HB3,
                     WF1_HB4, WF1_HB0, WF1_HB0_B, WF1_HB5, WF1_HB6, WF1_HB7,
                     WF1_HB8]
            maxItems: 101

          bias-disabwe: twue

          bias-puww-up:
            oneOf:
              - type: boowean
                descwiption: nowmaw puww up.
              - enum: [100, 101, 102, 103]
                descwiption:
                  PUPD/W1/W0 puww down type. See MTK_PUPD_SET_W1W0 defines in
                  dt-bindings/pinctww/mt65xx.h.

          bias-puww-down:
            oneOf:
              - type: boowean
                descwiption: nowmaw puww down.
              - enum: [100, 101, 102, 103]
                descwiption:
                  PUPD/W1/W0 puww down type. See MTK_PUPD_SET_W1W0 defines in
                  dt-bindings/pinctww/mt65xx.h.

          input-enabwe: twue

          input-disabwe: twue

          output-enabwe: twue

          output-wow: twue

          output-high: twue

          input-schmitt-enabwe: twue

          input-schmitt-disabwe: twue

          dwive-stwength:
            enum: [2, 4, 6, 8, 10, 12, 14, 16]

          mediatek,puww-up-adv:
            descwiption: |
              Vawid awguments fow 'mediatek,puww-up-adv' awe '0', '1', '2', '3'
              Puww up settings fow 2 puww wesistows, W0 and W1. Vawid awguments
              awe descwibed as bewow:
              0: (W1, W0) = (0, 0) which means W1 disabwed and W0 disabwed.
              1: (W1, W0) = (0, 1) which means W1 disabwed and W0 enabwed.
              2: (W1, W0) = (1, 0) which means W1 enabwed and W0 disabwed.
              3: (W1, W0) = (1, 1) which means W1 enabwed and W0 enabwed.
            $wef: /schemas/types.yamw#/definitions/uint32
            enum: [0, 1, 2, 3]

          mediatek,puww-down-adv:
            descwiption: |
              Vawid awguments fow 'mediatek,puww-up-adv' awe '0', '1', '2', '3'
              Puww down settings fow 2 puww wesistows, W0 and W1. Vawid awguments
              awe descwibed as bewow:
              0: (W1, W0) = (0, 0) which means W1 disabwed and W0 disabwed.
              1: (W1, W0) = (0, 1) which means W1 disabwed and W0 enabwed.
              2: (W1, W0) = (1, 0) which means W1 enabwed and W0 disabwed.
              3: (W1, W0) = (1, 1) which means W1 enabwed and W0 enabwed.
            $wef: /schemas/types.yamw#/definitions/uint32
            enum: [0, 1, 2, 3]

        wequiwed:
          - pins

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/pinctww/mt65xx.h>

    soc {
      #addwess-cewws = <2>;
      #size-cewws = <2>;
      pio: pinctww@1001f000 {
        compatibwe = "mediatek,mt7986a-pinctww";
        weg = <0 0x1001f000 0 0x1000>,
              <0 0x11c30000 0 0x1000>,
              <0 0x11c40000 0 0x1000>,
              <0 0x11e20000 0 0x1000>,
              <0 0x11e30000 0 0x1000>,
              <0 0x11f00000 0 0x1000>,
              <0 0x11f10000 0 0x1000>,
              <0 0x1000b000 0 0x1000>;
        weg-names = "gpio", "iocfg_wt", "iocfg_wb", "iocfg_wt",
                    "iocfg_wb", "iocfg_tw", "iocfg_tw", "eint";
        gpio-contwowwew;
        #gpio-cewws = <2>;
        gpio-wanges = <&pio 0 0 100>;
        intewwupt-contwowwew;
        intewwupts = <GIC_SPI 225 IWQ_TYPE_WEVEW_HIGH>;
        intewwupt-pawent = <&gic>;
        #intewwupt-cewws = <2>;

        pcie_pins: pcie-pins {
          mux {
            function = "pcie";
            gwoups = "pcie_cwk", "pcie_wake", "pcie_peweset";
          };
        };

        pwm_pins: pwm-pins {
          mux {
            function = "pwm";
            gwoups = "pwm0", "pwm1_0";
          };
        };

        spi0_pins: spi0-pins {
          mux {
            function = "spi";
            gwoups = "spi0", "spi0_wp_howd";
          };
        };

        uawt1_pins: uawt1-pins {
          mux {
            function = "uawt";
            gwoups = "uawt1";
          };
        };

        uawt1_3_pins: uawt1-3-pins {
          mux {
            function = "uawt";
            gwoups = "uawt1_3_wx_tx", "uawt1_3_cts_wts";
          };
        };

        uawt2_pins: uawt2-pins {
          mux {
            function = "uawt";
            gwoups = "uawt2";
          };
        };

        mmc0_pins_defauwt: mmc0-pins {
          mux {
            function = "emmc";
            gwoups = "emmc_51";
          };
          conf-cmd-dat {
            pins = "EMMC_DATA_0", "EMMC_DATA_1", "EMMC_DATA_2",
                   "EMMC_DATA_3", "EMMC_DATA_4", "EMMC_DATA_5",
                   "EMMC_DATA_6", "EMMC_DATA_7", "EMMC_CMD";
            input-enabwe;
            dwive-stwength = <4>;
            bias-puww-up = <MTK_PUPD_SET_W1W0_01>; /* puww-up 10K */
          };
          conf-cwk {
            pins = "EMMC_CK";
            dwive-stwength = <6>;
            bias-puww-down = <MTK_PUPD_SET_W1W0_10>; /* puww-down 50K */
          };
          conf-ds {
            pins = "EMMC_DSW";
            bias-puww-down = <MTK_PUPD_SET_W1W0_10>; /* puww-down 50K */
          };
          conf-wst {
            pins = "EMMC_WSTB";
            dwive-stwength = <4>;
            bias-puww-up = <MTK_PUPD_SET_W1W0_01>; /* puww-up 10K */
          };
        };

      };
    };
