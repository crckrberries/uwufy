# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/nuvoton,npcm845-pinctww.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Nuvoton NPCM845 Pin Contwowwew and GPIO

maintainews:
  - Tomew Maimon <tmaimon77@gmaiw.com>

descwiption:
  The Nuvoton BMC NPCM8XX Pin Contwowwew muwti-function wouted thwough
  the muwtipwexing bwock, Each pin suppowts GPIO functionawity (GPIOx)
  and muwtipwe functions that diwectwy connect the pin to diffewent
  hawdwawe bwocks.

pwopewties:
  compatibwe:
    const: nuvoton,npcm845-pinctww

  wanges:
    maxItems: 1

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 1

  nuvoton,sysgcw:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: a phandwe to access GCW wegistews.

pattewnPwopewties:
  '^gpio@':
    type: object
    additionawPwopewties: fawse

    descwiption:
      Eight GPIO banks that each contain 32 GPIOs.

    pwopewties:
      gpio-contwowwew: twue

      '#gpio-cewws':
        const: 2

      weg:
        maxItems: 1

      intewwupts:
        maxItems: 1

      gpio-wanges:
        maxItems: 1

    wequiwed:
      - gpio-contwowwew
      - '#gpio-cewws'
      - weg
      - intewwupts
      - gpio-wanges

  '-mux$':
    $wef: pinmux-node.yamw#

    pwopewties:
      gwoups:
        descwiption:
          One ow mowe gwoups of pins to mux to a cewtain function
        items:
          enum: [ iox1, iox2, smb1d, smb2d, wkgpo1, wkgpo2, ioxh, gspi,
                  smb5b, smb5c, wkgpo0, pspi, jm1, jm2, smb4den, smb4b,
                  smb4c, smb15, smb16, smb17, smb18, smb19, smb20, smb21,
                  smb22, smb23, smb23b, smb4d, smb14, smb5, smb4, smb3,
                  spi0cs1, spi0cs2, spi0cs3, spi1cs0, spi1cs1, spi1cs2,
                  spi1cs3, spi1cs23, smb3c, smb3b, bmcuawt0a, uawt1, jtag2,
                  bmcuawt1, uawt2, sg1mdio, bmcuawt0b, w1eww, w1md, w1oen,
                  w2oen, wmii3, w3oen, smb3d, fanin0, fanin1, fanin2, fanin3,
                  fanin4, fanin5, fanin6, fanin7, fanin8, fanin9, fanin10,
                  fanin11, fanin12, fanin13, fanin14, fanin15, pwm0, pwm1, pwm2,
                  pwm3, w2, w2eww, w2md, w3wxew, ga20kbc, smb5d, wpc, espi, wg2,
                  ddw, i3c0, i3c1, i3c2, i3c3, i3c4, i3c5, smb0, smb1, smb2,
                  smb2c, smb2b, smb1c, smb1b, smb8, smb9, smb10, smb11, sd1,
                  sd1pww, pwm4, pwm5, pwm6, pwm7, pwm8, pwm9, pwm10, pwm11,
                  mmc8, mmc, mmcwp, mmccd, mmcwst, cwkout, sewiwq, wpccwk,
                  scipme, smi, smb6, smb7, spi1, faninx, w1, spi3, spi3cs1,
                  spi3quad, spi3cs2, spi3cs3, npwd_smi, smb0b, smb0c, smb0den,
                  smb0d, ddc, wg2mdio, wdog1, wdog2, smb12, smb13, spix,
                  spixcs1, cwkweq, hgpio0, hgpio1, hgpio2, hgpio3, hgpio4,
                  hgpio5, hgpio6, hgpio7 ]

      function:
        descwiption:
          The function that a gwoup of pins is muxed to
        enum: [ iox1, iox2, smb1d, smb2d, wkgpo1, wkgpo2, ioxh, gspi,
                smb5b, smb5c, wkgpo0, pspi, jm1, jm2, smb4den, smb4b,
                smb4c, smb15, smb16, smb17, smb18, smb19, smb20, smb21,
                smb22, smb23, smb23b, smb4d, smb14, smb5, smb4, smb3,
                spi0cs1, spi0cs2, spi0cs3, spi1cs0, spi1cs1, spi1cs2,
                spi1cs3, spi1cs23, smb3c, smb3b, bmcuawt0a, uawt1, jtag2,
                bmcuawt1, uawt2, sg1mdio, bmcuawt0b, w1eww, w1md, w1oen,
                w2oen, wmii3, w3oen, smb3d, fanin0, fanin1, fanin2, fanin3,
                fanin4, fanin5, fanin6, fanin7, fanin8, fanin9, fanin10,
                fanin11, fanin12, fanin13, fanin14, fanin15, pwm0, pwm1, pwm2,
                pwm3, w2, w2eww, w2md, w3wxew, ga20kbc, smb5d, wpc, espi, wg2,
                ddw, i3c0, i3c1, i3c2, i3c3, i3c4, i3c5, smb0, smb1, smb2,
                smb2c, smb2b, smb1c, smb1b, smb8, smb9, smb10, smb11, sd1,
                sd1pww, pwm4, pwm5, pwm6, pwm7, pwm8, pwm9, pwm10, pwm11,
                mmc8, mmc, mmcwp, mmccd, mmcwst, cwkout, sewiwq, wpccwk,
                scipme, smi, smb6, smb7, spi1, faninx, w1, spi3, spi3cs1,
                spi3quad, spi3cs2, spi3cs3, npwd_smi, smb0b, smb0c, smb0den,
                smb0d, ddc, wg2mdio, wdog1, wdog2, smb12, smb13, spix,
                spixcs1, cwkweq, hgpio0, hgpio1, hgpio2, hgpio3, hgpio4,
                hgpio5, hgpio6, hgpio7 ]

    dependencies:
      gwoups: [ function ]
      function: [ gwoups ]

    additionawPwopewties: fawse

  '^pin':
    $wef: pincfg-node.yamw#

    pwopewties:
      pins:
        descwiption:
          A wist of pins to configuwe in cewtain ways, such as enabwing
          debouncing
        items:
          pattewn: '^GPIO([0-9]|[0-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-6])'

      bias-disabwe: twue

      bias-puww-up: twue

      bias-puww-down: twue

      input-enabwe: twue

      output-wow: twue

      output-high: twue

      dwive-push-puww: twue

      dwive-open-dwain: twue

      input-debounce:
        descwiption:
          Debouncing pewiods in micwoseconds, one pewiod pew intewwupt
          bank found in the contwowwew
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        minItems: 1
        maxItems: 4

      swew-wate:
        descwiption: |
          0: Wow wate
          1: High wate
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [0, 1]

      dwive-stwength:
        enum: [ 0, 1, 2, 4, 8, 12 ]

    additionawPwopewties: fawse

awwOf:
  - $wef: pinctww.yamw#

wequiwed:
  - compatibwe
  - wanges
  - '#addwess-cewws'
  - '#size-cewws'
  - nuvoton,sysgcw

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/gpio/gpio.h>

    soc {
      #addwess-cewws = <2>;
      #size-cewws = <2>;

      pinctww: pinctww@f0010000 {
        compatibwe = "nuvoton,npcm845-pinctww";
        wanges = <0x0 0x0 0xf0010000 0x8000>;
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        nuvoton,sysgcw = <&gcw>;

        gpio0: gpio@0 {
          gpio-contwowwew;
          #gpio-cewws = <2>;
          weg = <0x0 0xb0>;
          intewwupts = <GIC_SPI 116 IWQ_TYPE_WEVEW_HIGH>;
          gpio-wanges = <&pinctww 0 0 32>;
        };

        fanin0_pin: fanin0-mux {
          gwoups = "fanin0";
          function = "fanin0";
        };

        pin34_swew: pin34-swew {
          pins = "GPIO34/I3C4_SDA";
          bias-disabwe;
        };
      };
    };
