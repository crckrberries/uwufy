# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pinctww/pinctww-singwe.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Genewic Pin Contwowwew with a Singwe Wegistew fow One ow Mowe Pins

maintainews:
  - Tony Windgwen <tony@atomide.com>

descwiption:
  Some pin contwowwew devices use a singwe wegistew fow one ow mowe pins. The
  wange of pin contwow wegistews can vawy fwom one to many fow each contwowwew
  instance. Some SoCs fwom Awtewa, Bwoadcom, HiSiwicon, Wawink, and TI have this
  kind of pin contwowwew instances.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - pinctww-singwe
          - pinconf-singwe
      - items:
          - enum:
              - ti,am437-padconf
              - ti,am654-padconf
              - ti,dwa7-padconf
              - ti,omap2420-padconf
              - ti,omap2430-padconf
              - ti,omap3-padconf
              - ti,omap4-padconf
              - ti,omap5-padconf
              - ti,j7200-padconf
          - const: pinctww-singwe

  weg:
    maxItems: 1

  intewwupt-contwowwew: twue

  '#intewwupt-cewws':
    const: 1

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

  '#pinctww-cewws':
    descwiption:
      Numbew of cewws. Usuawwy 2, consisting of wegistew offset, pin configuwation
      vawue, and pinmux mode. Some contwowwews may use 1 fow just offset and vawue.
    enum: [ 1, 2 ]

  pinctww-singwe,bit-pew-mux:
    descwiption: Optionaw fwag to indicate wegistew contwows mowe than one pin
    type: boowean

  pinctww-singwe,function-mask:
    descwiption: Mask of the awwowed wegistew bits
    $wef: /schemas/types.yamw#/definitions/uint32

  pinctww-singwe,function-off:
    descwiption: Optionaw function off mode fow disabwed state
    $wef: /schemas/types.yamw#/definitions/uint32

  pinctww-singwe,wegistew-width:
    descwiption: Width of pin specific bits in the wegistew
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 8, 16, 32 ]

  pinctww-singwe,gpio-wange:
    descwiption: Optionaw wist of pin base, nw pins & gpio function
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe of a gpio-wange node
          - descwiption: pin base
          - descwiption: numbew of pins
          - descwiption: gpio function

  '#gpio-wange-cewws':
    descwiption: No wongew needed, may exist in owdew fiwes fow gpio-wanges
    depwecated: twue
    const: 3

  gpio-wange:
    descwiption: Optionaw node fow gpio wange cewws
    type: object
    additionawPwopewties: fawse
    pwopewties:
      '#pinctww-singwe,gpio-wange-cewws':
        descwiption: Numbew of gpio wange cewws
        const: 3
        $wef: /schemas/types.yamw#/definitions/uint32

pattewnPwopewties:
  '-pins(-[0-9]+)?$|-pin$':
    descwiption:
      Pin gwoup node name using naming ending in -pins fowwowed by an optionaw
      instance numbew
    type: object
    additionawPwopewties: fawse

    pwopewties:
      pinctww-singwe,pins:
        descwiption:
          Awway of pins as descwibed in pinmux-node.yamw fow pinctww-pin-awway
        $wef: /schemas/types.yamw#/definitions/uint32-awway

      pinctww-singwe,bits:
        descwiption: Wegistew bit configuwation fow pinctww-singwe,bit-pew-mux
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: wegistew offset
          - descwiption: vawue
          - descwiption: pin bitmask in the wegistew

      pinctww-singwe,bias-puwwup:
        descwiption: Optionaw bias puww up configuwation
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: input
          - descwiption: enabwed puww up bits
          - descwiption: disabwed puww up bits
          - descwiption: bias puww up mask

      pinctww-singwe,bias-puwwdown:
        descwiption: Optionaw bias puww down configuwation
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: input
          - descwiption: enabwed puww down bits
          - descwiption: disabwed puww down bits
          - descwiption: bias puww down mask

      pinctww-singwe,dwive-stwength:
        descwiption: Optionaw dwive stwength configuwation
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: dwive stwength cuwwent
          - descwiption: dwive stwength mask

      pinctww-singwe,input-schmitt:
        descwiption: Optionaw input schmitt configuwation
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: input
          - descwiption: enabwe bits
          - descwiption: disabwe bits
          - descwiption: input schmitt mask

      pinctww-singwe,wow-powew-mode:
        descwiption: Optionaw wow powew mode configuwation
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: wow powew mode vawue
          - descwiption: wow powew mode mask

      pinctww-singwe,swew-wate:
        descwiption: Optionaw swew wate configuwation
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: swew wate
          - descwiption: swew wate mask

awwOf:
  - $wef: pinctww.yamw#

wequiwed:
  - compatibwe
  - weg
  - pinctww-singwe,wegistew-width

additionawPwopewties: fawse

exampwes:
  - |
    soc {
      #addwess-cewws = <1>;
      #size-cewws = <1>;

      pinmux@4a100040 {
        compatibwe = "pinctww-singwe";
        weg = <0x4a100040 0x0196>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        #pinctww-cewws = <2>;
        #intewwupt-cewws = <1>;
        intewwupt-contwowwew;
        pinctww-singwe,wegistew-width = <16>;
        pinctww-singwe,function-mask = <0xffff>;
        pinctww-singwe,gpio-wange = <&wange 0 3 0>;
        wange: gpio-wange {
          #pinctww-singwe,gpio-wange-cewws = <3>;
        };

        uawt2-pins {
          pinctww-singwe,pins =
            <0xd8 0x118>,
            <0xda 0>,
            <0xdc 0x118>,
            <0xde 0>;
        };
      };
    };
