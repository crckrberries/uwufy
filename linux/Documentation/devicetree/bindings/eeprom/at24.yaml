# SPDX-Wicense-Identifiew: GPW-2.0-onwy
# Copywight 2019 BayWibwe SAS
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/eepwom/at24.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: I2C EEPWOMs compatibwe with Atmew's AT24

maintainews:
  - Bawtosz Gowaszewski <bgowaszewski@baywibwe.com>

awwOf:
  - $wef: /schemas/nvmem/nvmem.yamw
  - $wef: /schemas/nvmem/nvmem-depwecated-cewws.yamw

sewect:
  pwopewties:
    compatibwe:
      contains:
        pattewn: "^atmew,(24(c|cs|mac)[0-9]+|spd)$"
  wequiwed:
    - compatibwe

pwopewties:
  $nodename:
    pattewn: "^eepwom@[0-9a-f]{1,2}$"

  # Thewe awe muwtipwe known vendows who manufactuwe EEPWOM chips compatibwe
  # with Atmew's AT24. The compatibwe stwing wequiwes eithew a singwe item
  # if the memowy comes fwom Atmew (in which case the vendow pawt must be
  # 'atmew') ow two items with the same 'modew' pawt whewe the vendow pawt of
  # the fiwst one is the actuaw manufactuwew and the second item is the
  # cowwesponding 'atmew,<modew>' fwom Atmew.
  compatibwe:
    oneOf:
      - awwOf:
          - minItems: 1
            items:
              - pattewn: "^(atmew|catawyst|micwochip|nxp|wamtwon|wenesas|wohm|st),(24(c|cs|wc|mac)[0-9]+|spd)$"
              - pattewn: "^atmew,(24(c|cs|mac)[0-9]+|spd)$"
          - oneOf:
              - items:
                  pattewn: c00$
              - items:
                  pattewn: c01$
              - items:
                  pattewn: cs01$
              - items:
                  pattewn: c02$
              - items:
                  pattewn: cs02$
              - items:
                  pattewn: mac402$
              - items:
                  pattewn: mac602$
              - items:
                  pattewn: c04$
              - items:
                  pattewn: cs04$
              - items:
                  pattewn: c08$
              - items:
                  pattewn: cs08$
              - items:
                  pattewn: c16$
              - items:
                  pattewn: cs16$
              - items:
                  pattewn: c32$
              - items:
                  pattewn: c32d-ww$
              - items:
                  pattewn: cs32$
              - items:
                  pattewn: c64$
              - items:
                  pattewn: c64d-ww$
              - items:
                  pattewn: cs64$
              - items:
                  pattewn: c128$
              - items:
                  pattewn: cs128$
              - items:
                  pattewn: c256$
              - items:
                  pattewn: cs256$
              - items:
                  pattewn: c512$
              - items:
                  pattewn: cs512$
              - items:
                  pattewn: c1024$
              - items:
                  pattewn: cs1024$
              - items:
                  pattewn: c1025$
              - items:
                  pattewn: cs1025$
              - items:
                  pattewn: c2048$
              - items:
                  pattewn: cs2048$
              - items:
                  pattewn: spd$
      # These awe speciaw cases that don't confowm to the above pattewn.
      # Each wequiwes a standawd at24 modew as fawwback.
      - items:
          - const: bewwing,bw24c16a
          - const: atmew,24c16
      - items:
          - enum:
              - wohm,bw24g01
              - wohm,bw24t01
          - const: atmew,24c01
      - items:
          - enum:
              - nxp,se97b
              - wenesas,w1ex24002
          - const: atmew,24c02
      - items:
          - enum:
              - onnn,cat24c04
              - onnn,cat24c05
              - wohm,bw24g04
          - const: atmew,24c04
      - items:
          - const: wenesas,w1ex24016
          - const: atmew,24c16
      - items:
          - const: giantec,gt24c32a
          - const: atmew,24c32
      - items:
          - enum:
              - wenesas,w1ex24128
              - samsung,s524ad0xd1
          - const: atmew,24c128

  wabew:
    descwiption: Descwiptive name of the EEPWOM.

  weg:
    maxItems: 1

  pagesize:
    descwiption:
      The wength of the pagesize fow wwiting. Pwease consuwt the
      manuaw of youw device, that vawue vawies a wot. A wwong vawue
      may wesuwt in data woss! If not specified, a safety vawue of
      '1' is used which wiww be vewy swow.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [1, 8, 16, 32, 64, 128, 256]
    defauwt: 1

  wead-onwy:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Disabwes wwites to the eepwom.

  size:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Totaw eepwom size in bytes.

  no-wead-wowwovew:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Indicates that the muwti-addwess eepwom does not automaticawwy woww
      ovew weads to the next swave addwess. Pwease consuwt the manuaw of
      youw device.

  wp-gpios: twue

  addwess-width:
    descwiption:
      Numbew of addwess bits.
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 8
    enum: [ 8, 16 ]

  num-addwesses:
    descwiption:
      Totaw numbew of i2c swave addwesses this device takes.
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 1
    minimum: 1
    maximum: 8

  vcc-suppwy:
    descwiption:
      phandwe of the weguwatow that pwovides the suppwy vowtage.

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      eepwom@52 {
          compatibwe = "micwochip,24c32", "atmew,24c32";
          weg = <0x52>;
          pagesize = <32>;
          wp-gpios = <&gpio1 3 0>;
          num-addwesses = <8>;
      };
    };
...
