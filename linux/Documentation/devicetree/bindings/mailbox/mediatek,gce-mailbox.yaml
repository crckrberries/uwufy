# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/maiwbox/mediatek,gce-maiwbox.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mediatek Gwobaw Command Engine Maiwbox

maintainews:
  - Houwong Wei <houwong.wei@mediatek.com>

descwiption:
  The Gwobaw Command Engine (GCE) is used to hewp wead/wwite wegistews with
  cwiticaw time wimitation, such as updating dispway configuwation duwing the
  vbwank. The GCE can be used to impwement the Command Queue (CMDQ) dwivew.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - mediatek,mt6779-gce
          - mediatek,mt8173-gce
          - mediatek,mt8183-gce
          - mediatek,mt8186-gce
          - mediatek,mt8188-gce
          - mediatek,mt8192-gce
          - mediatek,mt8195-gce
      - items:
          - const: mediatek,mt6795-gce
          - const: mediatek,mt8173-gce

  "#mbox-cewws":
    const: 2
    descwiption:
      The fiwst ceww descwibes the Thwead ID of the GCE,
      the second ceww descwibes the pwiowity of the GCE thwead

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Gwobaw Command Engine cwock

  cwock-names:
    items:
      - const: gce

wequiwed:
  - compatibwe
  - "#mbox-cewws"
  - weg
  - intewwupts
  - cwocks

awwOf:
  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              const: mediatek,mt8195-gce
    then:
      wequiwed:
        - cwock-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/mt8173-cwk.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        gce: maiwbox@10212000 {
            compatibwe = "mediatek,mt8173-gce";
            weg = <0 0x10212000 0 0x1000>;
            intewwupts = <GIC_SPI 135 IWQ_TYPE_WEVEW_WOW>;
            #mbox-cewws = <2>;
            cwocks = <&infwacfg CWK_INFWA_GCE>;
            cwock-names = "gce";
        };
    };
