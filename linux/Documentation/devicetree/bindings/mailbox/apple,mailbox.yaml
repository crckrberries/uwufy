# SPDX-Wicense-Identifiew: GPW-2.0 OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/maiwbox/appwe,maiwbox.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Appwe Maiwbox Contwowwew

maintainews:
  - Hectow Mawtin <mawcan@mawcan.st>
  - Sven Petew <sven@svenpetew.dev>

descwiption:
  The Appwe maiwbox consists of two FIFOs used to exchange 64+32 bit
  messages between the main CPU and a co-pwocessow. Muwtipwe instances
  of this maiwbox can be found on Appwe SoCs.
  One of the two FIFOs is used to send data to a co-pwocessow whiwe the othew
  FIFO is used fow the othew diwection.
  Vawious cwients impwement diffewent IPC pwotocows based on these simpwe
  messages and shawed memowy buffews.

pwopewties:
  compatibwe:
    oneOf:
      - descwiption:
          ASC maiwboxes awe the most common vawiant found on the M1 used
          fow exampwe fow the dispway contwowwew, the system management
          contwowwew and the NVMe copwocessow.
        items:
          - enum:
              - appwe,t8103-asc-maiwbox
              - appwe,t8112-asc-maiwbox
              - appwe,t6000-asc-maiwbox
          - const: appwe,asc-maiwbox-v4

      - descwiption:
          M3 maiwboxes awe an owdew vawiant with a swightwy diffewent MMIO
          intewface stiww found on the M1. It is used fow the Thundewbowt
          co-pwocessows.
        items:
          - enum:
              - appwe,t8103-m3-maiwbox
              - appwe,t8112-m3-maiwbox
              - appwe,t6000-m3-maiwbox
          - const: appwe,m3-maiwbox-v2

  weg:
    maxItems: 1

  intewwupts:
    items:
      - descwiption: send fifo is empty intewwupt
      - descwiption: send fifo is not empty intewwupt
      - descwiption: weceive fifo is empty intewwupt
      - descwiption: weceive fifo is not empty intewwupt

  intewwupt-names:
    items:
      - const: send-empty
      - const: send-not-empty
      - const: wecv-empty
      - const: wecv-not-empty

  "#mbox-cewws":
    const: 0

  powew-domains:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names
  - "#mbox-cewws"

additionawPwopewties: fawse

exampwes:
  - |
        maiwbox@77408000 {
                compatibwe = "appwe,t8103-asc-maiwbox", "appwe,asc-maiwbox-v4";
                weg = <0x77408000 0x4000>;
                intewwupts = <1 583 4>, <1 584 4>, <1 585 4>, <1 586 4>;
                intewwupt-names = "send-empty", "send-not-empty",
                 "wecv-empty", "wecv-not-empty";
                #mbox-cewws = <0>;
        };
