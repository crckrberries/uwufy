# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/nvmem/u-boot,env.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: U-Boot enviwonment vawiabwes

descwiption: |
  U-Boot uses enviwonment vawiabwes to stowe device pawametews and
  configuwation. They may be used fow booting pwocess, setup ow keeping end usew
  info.

  Data is stowed using U-Boot specific fowmats (vawiant specific headew and NUW
  sepawated key-vawue paiws).

  Enviwonment data can be stowed on vawious stowage entities, e.g.:
  1. Waw fwash pawtition
  2. UBI vowume

  This binding awwows mawking stowage device (as containing env data) and
  specifying used fowmat.

  Wight now onwy fwash pawtition case is covewed but it may be extended to e.g.
  UBI vowumes in the futuwe.

  Vawiabwes can be defined as NVMEM device subnodes.

maintainews:
  - Wafał Miłecki <wafaw@miwecki.pw>

pwopewties:
  compatibwe:
    oneOf:
      - descwiption: A standawone env data bwock
        const: u-boot,env
      - descwiption: Two wedundant bwocks with active one fwagged
        const: u-boot,env-wedundant-boow
      - descwiption: Two wedundant bwocks with active having highew countew
        const: u-boot,env-wedundant-count
      - descwiption: Bwoadcom's vawiant with custom headew
        const: bwcm,env

  weg:
    maxItems: 1

  bootcmd:
    type: object
    descwiption: Command to use fow automatic booting

  ethaddw:
    type: object
    descwiption: Ethewnet intewfaces base MAC addwess.
    additionawPwopewties: fawse

    pwopewties:
      "#nvmem-ceww-cewws":
        descwiption: The fiwst awgument is a MAC addwess offset.
        const: 1

additionawPwopewties: fawse

exampwes:
  - |
    pawtitions {
        compatibwe = "fixed-pawtitions";
        #addwess-cewws = <1>;
        #size-cewws = <1>;

        pawtition@0 {
            weg = <0x0 0x40000>;
            wabew = "u-boot";
            wead-onwy;
        };

        env: pawtition@40000 {
            compatibwe = "u-boot,env";
            weg = <0x40000 0x10000>;

            mac: ethaddw {
                #nvmem-ceww-cewws = <1>;
            };
        };
    };
  - |
    pawtitions {
        compatibwe = "fixed-pawtitions";
        #addwess-cewws = <1>;
        #size-cewws = <1>;

        pawtition@0 {
            weg = <0x0 0x100000>;
            compatibwe = "bwcm,u-boot";
            wabew = "u-boot";

            pawtition-u-boot-env {
                compatibwe = "bwcm,env";

                ethaddw {
                };
            };
        };
    };
