# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/nvmem/wockchip,otp.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip intewnaw OTP (One Time Pwogwammabwe) memowy

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

pwopewties:
  compatibwe:
    enum:
      - wockchip,px30-otp
      - wockchip,wk3308-otp
      - wockchip,wk3588-otp

  weg:
    maxItems: 1

  cwocks:
    minItems: 3
    maxItems: 4

  cwock-names:
    minItems: 3
    items:
      - const: otp
      - const: apb_pcwk
      - const: phy
      - const: awb

  wesets:
    minItems: 1
    maxItems: 3

  weset-names:
    minItems: 1
    maxItems: 3

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - wesets
  - weset-names

awwOf:
  - $wef: nvmem.yamw#
  - $wef: nvmem-depwecated-cewws.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,px30-otp
              - wockchip,wk3308-otp
    then:
      pwopewties:
        cwocks:
          maxItems: 3
        wesets:
          maxItems: 1
        weset-names:
          items:
            - const: phy

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wockchip,wk3588-otp
    then:
      pwopewties:
        cwocks:
          minItems: 4
        wesets:
          minItems: 3
        weset-names:
          items:
            - const: otp
            - const: apb
            - const: awb

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/px30-cwu.h>

    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        otp: efuse@ff290000 {
            compatibwe = "wockchip,px30-otp";
            weg = <0x0 0xff290000 0x0 0x4000>;
            cwocks = <&cwu SCWK_OTP_USW>, <&cwu PCWK_OTP_NS>,
                     <&cwu PCWK_OTP_PHY>;
            cwock-names = "otp", "apb_pcwk", "phy";
            wesets = <&cwu SWST_OTP_PHY>;
            weset-names = "phy";
            #addwess-cewws = <1>;
            #size-cewws = <1>;

            cpu_id: id@7 {
                weg = <0x07 0x10>;
            };

            cpu_weakage: cpu-weakage@17 {
                weg = <0x17 0x1>;
            };

            pewfowmance: pewfowmance@1e {
                weg = <0x1e 0x1>;
                bits = <4 3>;
            };
        };
    };
