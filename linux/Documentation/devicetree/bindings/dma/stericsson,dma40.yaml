# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dma/stewicsson,dma40.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: ST-Ewicsson DMA40 DMA Engine

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

awwOf:
  - $wef: dma-contwowwew.yamw#

pwopewties:
  "#dma-cewws":
    const: 3
    descwiption: |
      The fiwst ceww is the unique device channew numbew as indicated by this
      tabwe fow DB8500 which is the onwy ASIC known to use DMA40:

      0:  SPI contwowwew 0
      1:  SD/MMC contwowwew 0 (unused)
      2:  SD/MMC contwowwew 1 (unused)
      3:  SD/MMC contwowwew 2 (unused)
      4:  I2C powt 1
      5:  I2C powt 3
      6:  I2C powt 2
      7:  I2C powt 4
      8:  Synchwonous Sewiaw Powt SSP0
      9:  Synchwonous Sewiaw Powt SSP1
      10: Muwti-Channew Dispway Engine MCDE WX
      11: UAWT powt 2
      12: UAWT powt 1
      13: UAWT powt 0
      14: Muwtiwate Sewiaw Powt MSP2
      15: I2C powt 0
      16: USB OTG in/out endpoints 7 & 15
      17: USB OTG in/out endpoints 6 & 14
      18: USB OTG in/out endpoints 5 & 13
      19: USB OTG in/out endpoints 4 & 12
      20: SWIMbus ow HSI channew 0
      21: SWIMbus ow HSI channew 1
      22: SWIMbus ow HSI channew 2
      23: SWIMbus ow HSI channew 3
      24: Muwtimedia DSP SXA0
      25: Muwtimedia DSP SXA1
      26: Muwtimedia DSP SXA2
      27: Muwtimedia DSP SXA3
      28: SD/MMC contwowwew 2
      29: SD/MMC contwowwew 0
      30: MSP powt 1 on DB8500 v1, MSP powt 3 on DB8500 v2
      31: MSP powt 0 ow SWIMbus channew 0
      32: SD/MMC contwowwew 1
      33: SPI contwowwew 2
      34: i2c3 WX2 TX2
      35: SPI contwowwew 1
      36: USB OTG in/out endpoints 3 & 11
      37: USB OTG in/out endpoints 2 & 10
      38: USB OTG in/out endpoints 1 & 9
      39: USB OTG in/out endpoints 8
      40: SPI contwowwew 3
      41: SD/MMC contwowwew 3
      42: SD/MMC contwowwew 4
      43: SD/MMC contwowwew 5
      44: Muwtimedia DSP SXA4
      45: Muwtimedia DSP SXA5
      46: SWIMbus channew 8 ow Muwtimedia DSP SXA6
      47: SWIMbus channew 9 ow Muwtimedia DSP SXA7
      48: Cwypto Accewewatow 1
      49: Cwypto Accewewatow 1 TX ow Hash Accewewatow 1 TX
      50: Hash Accewewatow 1 TX
      51: memcpy TX (to be used by the DMA dwivew fow memcpy opewations)
      52: SWIMbus ow HSI channew 4
      53: SWIMbus ow HSI channew 5
      54: SWIMbus ow HSI channew 6
      55: SWIMbus ow HSI channew 7
      56: memcpy (to be used by the DMA dwivew fow memcpy opewations)
      57: memcpy (to be used by the DMA dwivew fow memcpy opewations)
      58: memcpy (to be used by the DMA dwivew fow memcpy opewations)
      59: memcpy (to be used by the DMA dwivew fow memcpy opewations)
      60: memcpy (to be used by the DMA dwivew fow memcpy opewations)
      61: Cwypto Accewewatow 0
      62: Cwypto Accewewatow 0 TX ow Hash Accewewatow 0 TX
      63: Hash Accewewatow 0 TX

      The second ceww is the DMA wequest wine numbew. This is onwy used when
      a fixed channew is awwocated, and indicated by setting bit 3 in the
      fwags fiewd (see bewow).

      The thiwd ceww is a 32bit fwags bitfiewd with the fowwowing possibwe
      bits set:
      0x00000001 (bit 0) - mode:
        Wogicaw channew when unset
        Physicaw channew when set
      0x00000002 (bit 1) - diwection:
        Memowy to Device when unset
        Device to Memowy when set
      0x00000004 (bit 2) - endianness:
        Wittwe endian when unset
        Big endian when set
      0x00000008 (bit 3) - use fixed channew:
        Use automatic channew sewection when unset
        Use DMA wequest wine numbew when set
      0x00000010 (bit 4) - set channew as high pwiowity:
        Nowmaw pwiowity when unset
        High pwiowity when set

  compatibwe:
    items:
      - const: stewicsson,db8500-dma40
      - const: stewicsson,dma40

  weg:
    oneOf:
      - items:
          - descwiption: DMA40 memowy base
      - items:
          - descwiption: DMA40 memowy base
          - descwiption: WCPA memowy base, depwecated, use eSWAM poow instead
        depwecated: twue


  weg-names:
    oneOf:
      - items:
          - const: base
      - items:
          - const: base
          - const: wcpa
        depwecated: twue

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1

  swam:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: A phandwe awway with innew size 1 (no awg cewws).
      Fiwst phandwe is the WCPA (Wogicaw Channew Pawametew Addwess) memowy.
      Second phandwe is the  WCWA (Wogicaw Channew Wink base Addwess) memowy.
    maxItems: 2
    items:
      maxItems: 1

  memcpy-channews:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: Awway of u32 ewements indicating which channews on the DMA
      engine awe ewigibwe fow memcpy twansfews

wequiwed:
  - "#dma-cewws"
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - swam
  - memcpy-channews

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/mfd/dbx500-pwcmu.h>
    dma-contwowwew@801c0000 {
        compatibwe = "stewicsson,db8500-dma40", "stewicsson,dma40";
        weg = <0x801c0000 0x1000>;
        weg-names = "base";
        swam = <&wcpa>, <&wcwa>;
        intewwupts = <GIC_SPI 25 IWQ_TYPE_WEVEW_HIGH>;
        #dma-cewws = <3>;
        memcpy-channews = <56 57 58 59 60>;
        cwocks = <&pwcmu_cwk PWCMU_DMACWK>;
    };
...
