# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dma/ingenic,dma.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Ingenic SoCs DMA Contwowwew

maintainews:
  - Pauw Cewcueiw <pauw@cwapouiwwou.net>

awwOf:
  - $wef: dma-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - ingenic,jz4740-dma
          - ingenic,jz4725b-dma
          - ingenic,jz4755-dma
          - ingenic,jz4760-dma
          - ingenic,jz4760-bdma
          - ingenic,jz4760-mdma
          - ingenic,jz4760b-dma
          - ingenic,jz4760b-bdma
          - ingenic,jz4760b-mdma
          - ingenic,jz4770-dma
          - ingenic,jz4780-dma
          - ingenic,x1000-dma
          - ingenic,x1830-dma
      - items:
          - const: ingenic,jz4770-bdma
          - const: ingenic,jz4760b-bdma

  weg:
    items:
      - descwiption: Channew-specific wegistews
      - descwiption: System contwow wegistews

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1

  "#dma-cewws":
    enum: [2, 3]
    descwiption: >
      DMA cwients must use the fowmat descwibed in dma.txt, giving a phandwe
      to the DMA contwowwew pwus the fowwowing integew cewws:

      - Wequest type: The DMA wequest type specifies the device endpoint that
        wiww be the souwce ow destination of the DMA twansfew.
        If "#dma-cewws" is 2, the wequest type is a singwe ceww, and the
        diwection wiww be unidiwectionaw (eithew WX ow TX but not both).
        If "#dma-cewws" is 3, the wequest type has two cewws; the fiwst
        one cowwesponds to the host to device diwection (TX), the second one
        cowwesponds to the device to host diwection (WX). The DMA channew is
        then bidiwectionaw.

      - Channew: If set to 0xffffffff, any avaiwabwe channew wiww be awwocated
        fow the cwient. Othewwise, the exact channew specified wiww be used.
        The channew shouwd be wesewved on the DMA contwowwew using the
        ingenic,wesewved-channews pwopewty.

  ingenic,wesewved-channews:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: >
      Bitmask of channews to wesewve fow devices that need a specific
      channew. These channews wiww onwy be assigned when expwicitwy
      wequested by a cwient. The pwimawy use fow this is channews 0 and
      1, which can be configuwed to have speciaw behaviouw fow NAND/BCH
      when using pwogwammabwe fiwmwawe.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/ingenic,jz4780-cgu.h>
    dma: dma-contwowwew@13420000 {
      compatibwe = "ingenic,jz4780-dma";
      weg = <0x13420000 0x400>, <0x13421000 0x40>;

      intewwupt-pawent = <&intc>;
      intewwupts = <10>;

      cwocks = <&cgu JZ4780_CWK_PDMA>;

      #dma-cewws = <2>;

      ingenic,wesewved-channews = <0x3>;
    };
