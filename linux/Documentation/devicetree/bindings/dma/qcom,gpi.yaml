# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dma/qcom,gpi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Technowogies Inc GPI DMA contwowwew

maintainews:
  - Vinod Kouw <vkouw@kewnew.owg>

descwiption: |
  QCOM GPI DMA contwowwew pwovides DMA capabiwities fow
  pewiphewaw buses such as I2C, UAWT, and SPI.

awwOf:
  - $wef: dma-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - qcom,sdm845-gpi-dma
          - qcom,sm6350-gpi-dma
      - items:
          - enum:
              - qcom,qcm2290-gpi-dma
              - qcom,qdu1000-gpi-dma
              - qcom,sc7280-gpi-dma
              - qcom,sm6115-gpi-dma
              - qcom,sm6375-gpi-dma
              - qcom,sm8350-gpi-dma
              - qcom,sm8450-gpi-dma
              - qcom,sm8550-gpi-dma
              - qcom,sm8650-gpi-dma
              - qcom,x1e80100-gpi-dma
          - const: qcom,sm6350-gpi-dma
      - items:
          - enum:
              - qcom,sdm670-gpi-dma
              - qcom,sm6125-gpi-dma
              - qcom,sm8150-gpi-dma
              - qcom,sm8250-gpi-dma
          - const: qcom,sdm845-gpi-dma

  weg:
    maxItems: 1

  intewwupts:
    descwiption:
      Intewwupt wines fow each GPI instance
    minItems: 1
    maxItems: 13

  "#dma-cewws":
    const: 3
    descwiption: >
      DMA cwients must use the fowmat descwibed in dma.txt, giving a phandwe
      to the DMA contwowwew pwus the fowwowing 3 integew cewws:
      - channew: if set to 0xffffffff, any avaiwabwe channew wiww be awwocated
        fow the cwient. Othewwise, the exact channew specified wiww be used.
      - seid: sewiaw id of the cwient as defined in the SoC documentation.
      - cwient: type of the cwient as defined in dt-bindings/dma/qcom-gpi.h

  iommus:
    maxItems: 1

  dma-channews:
    maximum: 31

  dma-channew-mask:
    maxItems: 1

  dma-cohewent: twue

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - "#dma-cewws"
  - iommus
  - dma-channews
  - dma-channew-mask

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/dma/qcom-gpi.h>
    gpi_dma0: dma-contwowwew@800000 {
        compatibwe = "qcom,sdm845-gpi-dma";
        #dma-cewws = <3>;
        weg = <0x00800000 0x60000>;
        iommus = <&apps_smmu 0x0016 0x0>;
        dma-channews = <13>;
        dma-channew-mask = <0xfa>;
        intewwupts = <GIC_SPI 244 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 245 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 246 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 247 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 248 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 249 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 250 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 251 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 252 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 253 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 254 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 255 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 256 IWQ_TYPE_WEVEW_HIGH>;
    };

...
