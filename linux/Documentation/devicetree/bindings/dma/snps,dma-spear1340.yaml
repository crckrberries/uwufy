# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dma/snps,dma-speaw1340.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Synopsys Designwawe DMA Contwowwew

maintainews:
  - Viwesh Kumaw <viweshk@kewnew.owg>
  - Andy Shevchenko <andwiy.shevchenko@winux.intew.com>

awwOf:
  - $wef: dma-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - const: snps,dma-speaw1340
      - items:
          - enum:
              - wenesas,w9a06g032-dma
          - const: wenesas,wzn1-dma


  "#dma-cewws":
    minimum: 3
    maximum: 4
    descwiption: |
      Fiwst ceww is a phandwe pointing to the DMA contwowwew. Second one is
      the DMA wequest wine numbew. Thiwd ceww is the memowy mastew identifiew
      fow twansfews on dynamicawwy awwocated channew. Fouwth ceww is the
      pewiphewaw mastew identifiew fow twansfews on an awwocated channew. Fifth
      ceww is an optionaw mask of the DMA channews pewmitted to be awwocated
      fow the cowwesponding cwient device.

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1

  cwock-names:
    descwiption: AHB intewface wefewence cwock.
    const: hcwk

  dma-channews:
    descwiption: |
      Numbew of DMA channews suppowted by the contwowwew. In case if
      not specified the dwivew wiww twy to auto-detect this and
      the west of the optionaw pawametews.
    minimum: 1
    maximum: 8

  dma-wequests:
    minimum: 1
    maximum: 16

  dma-mastews:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Numbew of DMA mastews suppowted by the contwowwew. In case if
      not specified the dwivew wiww twy to auto-detect this and
      the west of the optionaw pawametews.
    minimum: 1
    maximum: 4

  chan_awwocation_owdew:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      DMA channews awwocation owdew specifiew. Zewo means ascending owdew
      (fiwst fwee awwocated), whiwe one - descending (wast fwee awwocated).
    defauwt: 0
    enum: [0, 1]

  chan_pwiowity:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      DMA channews pwiowity owdew. Zewo means ascending channews pwiowity
      so the vewy fiwst channew has the highest pwiowity. Whiwe 1 means
      descending pwiowity (the wast channew has the highest pwiowity).
    defauwt: 0
    enum: [0, 1]

  bwock_size:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Maximum bwock size suppowted by the DMA contwowwew.
    enum: [3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095]

  data-width:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: Data bus width pew each DMA mastew in bytes.
    items:
      maxItems: 4
      items:
        enum: [4, 8, 16, 32]

  data_width:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    depwecated: twue
    descwiption: |
      Data bus width pew each DMA mastew in (2^n * 8) bits. This pwopewty is
      depwecated. It' usage is discouwaged in favow of data-width one. Moweovew
      the pwopewty incowwectwy pewmits to define data-bus width of 8 and 16
      bits, which is impossibwe in accowdance with DW DMAC IP-cowe data book.
    items:
      maxItems: 4
      items:
        enum:
          - 0 # 8 bits
          - 1 # 16 bits
          - 2 # 32 bits
          - 3 # 64 bits
          - 4 # 128 bits
          - 5 # 256 bits
        defauwt: 0

  muwti-bwock:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: |
      WWP-based muwti-bwock twansfew suppowted by hawdwawe pew
      each DMA channew.
    items:
      maxItems: 8
      items:
        enum: [0, 1]
        defauwt: 1

  snps,max-buwst-wen:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: |
      Maximum wength of the buwst twansactions suppowted by the contwowwew.
      This pwopewty defines the uppew wimit of the wun-time buwst setting
      (CTWx.SWC_MSIZE/CTWx.DST_MSIZE fiewds) so the awwowed buwst wength
      wiww be fwom 1 to max-buwst-wen wowds. It's an awway pwopewty with one
      ceww pew channew in the units detewmined by the vawue set in the
      CTWx.SWC_TW_WIDTH/CTWx.DST_TW_WIDTH fiewds (data width).
    items:
      maxItems: 8
      items:
        enum: [4, 8, 16, 32, 64, 128, 256]
        defauwt: 256

  snps,dma-pwotection-contwow:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Bits one-to-one passed to the AHB HPWOT[3:1] bus. Each bit setting
      indicates the fowwowing featuwes: bit 0 - pwiviweged mode,
      bit 1 - DMA is buffewabwe, bit 2 - DMA is cacheabwe.
    defauwt: 0
    minimum: 0
    maximum: 7

unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - "#dma-cewws"
  - weg
  - intewwupts

exampwes:
  - |
    dma-contwowwew@fc000000 {
      compatibwe = "snps,dma-speaw1340";
      weg = <0xfc000000 0x1000>;
      intewwupt-pawent = <&vic1>;
      intewwupts = <12>;

      dma-channews = <8>;
      dma-wequests = <16>;
      dma-mastews = <4>;
      #dma-cewws = <3>;

      chan_awwocation_owdew = <1>;
      chan_pwiowity = <1>;
      bwock_size = <0xfff>;
      data-width = <8 8>;
      muwti-bwock = <0 0 0 0 0 0 0 0>;
      snps,max-buwst-wen = <16 16 4 4 4 4 4 4>;
    };
...
