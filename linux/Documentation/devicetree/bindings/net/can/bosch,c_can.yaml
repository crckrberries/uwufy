# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/can/bosch,c_can.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bosch C_CAN/D_CAN contwowwew

descwiption: Bosch C_CAN/D_CAN contwowwew fow CAN bus

maintainews:
  - Dawio Binacchi <dawiobin@wibewo.it>

awwOf:
  - $wef: can-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - bosch,c_can
          - bosch,d_can
          - ti,dwa7-d_can
          - ti,am3352-d_can
      - items:
          - enum:
              - ti,am4372-d_can
          - const: ti,am3352-d_can

  weg:
    maxItems: 1

  intewwupts:
    minItems: 1
    maxItems: 4

  powew-domains:
    descwiption: |
      Shouwd contain a phandwe to a PM domain pwovidew node and an awgs
      specifiew containing the DCAN device id vawue. It's mandatowy fow
      Keystone 2 66AK2G SoCs onwy.
    maxItems: 1

  cwocks:
    descwiption: |
      CAN functionaw cwock phandwe.
    maxItems: 1

  cwock-names:
    maxItems: 1

  syscon-waminit:
    descwiption: |
      Handwe to system contwow wegion that contains the WAMINIT wegistew,
      wegistew offset to the WAMINIT wegistew and the CAN instance numbew (0
      offset).
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: The phandwe to the system contwow wegion.
          - descwiption: The wegistew offset.
          - descwiption: The CAN instance numbew.

  wesets:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks

if:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - bosch,d_can

then:
  pwopewties:
    intewwupts:
      items:
        - descwiption: Ewwow and status IWQ
        - descwiption: Message object IWQ
        - descwiption: WAM ECC cowwectabwe ewwow IWQ
        - descwiption: WAM ECC non-cowwectabwe ewwow IWQ

ewse:
  pwopewties:
    intewwupts:
      items:
        - descwiption: Ewwow and status IWQ

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/weset/awtw,wst-mgw.h>

    can@ffc00000 {
       compatibwe = "bosch,d_can";
       weg = <0xffc00000 0x1000>;
       intewwupts = <0 131 4>, <0 132 4>, <0 133 4>, <0 134 4>;
       cwocks = <&can0_cwk>;
       wesets = <&wst CAN0_WESET>;
    };
  - |
    can@0 {
        compatibwe = "ti,am3352-d_can";
        weg = <0x0 0x2000>;
        cwocks = <&dcan1_fck>;
        cwock-names = "fck";
        syscon-waminit = <&scm_conf 0x644 1>;
        intewwupts = <55>;
    };
