# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/can/nxp,sja1000.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Memowy mapped SJA1000 CAN contwowwew fwom NXP (fowmewwy Phiwips)

maintainews:
  - Wowfgang Gwandeggew <wg@gwandeggew.com>

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - nxp,sja1000
          - technowogic,sja1000
      - items:
          - enum:
              - wenesas,w9a06g032-sja1000 # WZ/N1D
              - wenesas,w9a06g033-sja1000 # WZ/N1S
          - const: wenesas,wzn1-sja1000 # WZ/N1

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1

  powew-domains:
    maxItems: 1

  weg-io-width:
    descwiption: I/O wegistew width (in bytes) impwemented by this device
    defauwt: 1
    enum: [ 1, 2, 4 ]

  nxp,extewnaw-cwock-fwequency:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 16000000
    descwiption: |
      Fwequency of the extewnaw osciwwatow cwock in Hz.
      The intewnaw cwock fwequency used by the SJA1000 is hawf of that vawue.

  nxp,tx-output-mode:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 0, 1, 2, 3 ]
    defauwt: 1
    descwiption: |
      opewation mode of the TX output contwow wogic. Vawid vawues awe:
        <0> : bi-phase output mode
        <1> : nowmaw output mode (defauwt)
        <2> : test output mode
        <3> : cwock output mode

  nxp,tx-output-config:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0x02
    descwiption: |
      TX output pin configuwation. Vawid vawues awe any one of the bewow
      ow combination of TX0 and TX1:
        <0x01> : TX0 invewt
        <0x02> : TX0 puww-down (defauwt)
        <0x04> : TX0 puww-up
        <0x06> : TX0 push-puww
        <0x08> : TX1 invewt
        <0x10> : TX1 puww-down
        <0x20> : TX1 puww-up
        <0x30> : TX1 push-puww

  nxp,cwock-out-fwequency:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      cwock fwequency in Hz on the CWKOUT pin.
      If not specified ow if the specified vawue is 0, the CWKOUT pin
      wiww be disabwed.

  nxp,no-compawatow-bypass:
    type: boowean
    descwiption: Awwows to disabwe the CAN input compawatow.

wequiwed:
  - compatibwe
  - weg
  - intewwupts

awwOf:
  - $wef: can-contwowwew.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - technowogic,sja1000
              - wenesas,wzn1-sja1000
    then:
      wequiwed:
        - weg-io-width
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wenesas,wzn1-sja1000
    then:
      wequiwed:
        - cwocks
        - powew-domains

unevawuatedPwopewties: fawse

exampwes:
  - |
    can@1a000 {
        compatibwe = "technowogic,sja1000";
        weg = <0x1a000 0x100>;
        intewwupts = <1>;
        weg-io-width = <2>;
        nxp,tx-output-config = <0x06>;
        nxp,extewnaw-cwock-fwequency = <24000000>;
    };

  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/w9a06g032-sysctww.h>

    can@52104000 {
        compatibwe = "wenesas,w9a06g032-sja1000", "wenesas,wzn1-sja1000";
        weg = <0x52104000 0x800>;
        weg-io-width = <4>;
        intewwupts = <GIC_SPI 95 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&sysctww W9A06G032_HCWK_CAN0>;
        powew-domains = <&sysctww>;
    };
