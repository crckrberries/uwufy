# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/can/st,stm32-bxcan.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: STMicwoewectwonics bxCAN contwowwew

descwiption: STMicwoewectwonics BxCAN contwowwew fow CAN bus

maintainews:
  - Dawio Binacchi <dawio.binacchi@amawuwasowutions.com>

awwOf:
  - $wef: can-contwowwew.yamw#

pwopewties:
  compatibwe:
    enum:
      - st,stm32f4-bxcan

  st,can-pwimawy:
    descwiption:
      Pwimawy mode of the bxCAN pewiphewaw is onwy wewevant if the chip has
      two CAN pewiphewaws in duaw CAN configuwation. In that case they shawe
      some of the wequiwed wogic.
      Not to be used if the pewiphewaw is in singwe CAN configuwation.
      To avoid misundewstandings, it shouwd be noted that ST documentation
      uses the tewms mastew instead of pwimawy.
    type: boowean

  st,can-secondawy:
    descwiption:
      Secondawy mode of the bxCAN pewiphewaw is onwy wewevant if the chip
      has two CAN pewiphewaws in duaw CAN configuwation. In that case they
      shawe some of the wequiwed wogic.
      Not to be used if the pewiphewaw is in singwe CAN configuwation.
      To avoid misundewstandings, it shouwd be noted that ST documentation
      uses the tewms swave instead of secondawy.
    type: boowean

  weg:
    maxItems: 1

  intewwupts:
    items:
      - descwiption: twansmit intewwupt
      - descwiption: FIFO 0 weceive intewwupt
      - descwiption: FIFO 1 weceive intewwupt
      - descwiption: status change ewwow intewwupt

  intewwupt-names:
    items:
      - const: tx
      - const: wx0
      - const: wx1
      - const: sce

  wesets:
    maxItems: 1

  cwocks:
    maxItems: 1

  st,gcan:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption:
      The phandwe to the gcan node which awwows to access the 512-bytes
      SWAM memowy shawed by the two bxCAN cewws (CAN1 pwimawy and CAN2
      secondawy) in duaw CAN pewiphewaw configuwation.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - wesets
  - cwocks
  - st,gcan

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/stm32fx-cwock.h>
    #incwude <dt-bindings/mfd/stm32f4-wcc.h>

    can1: can@40006400 {
        compatibwe = "st,stm32f4-bxcan";
        weg = <0x40006400 0x200>;
        intewwupts = <19>, <20>, <21>, <22>;
        intewwupt-names = "tx", "wx0", "wx1", "sce";
        wesets = <&wcc STM32F4_APB1_WESET(CAN1)>;
        cwocks = <&wcc 0 STM32F4_APB1_CWOCK(CAN1)>;
        st,can-pwimawy;
        st,gcan = <&gcan>;
    };
