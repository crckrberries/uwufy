# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/can/fsw,fwexcan.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe:
  Fwexcan CAN contwowwew on Fweescawe's AWM and PowewPC system-on-a-chip (SOC).

maintainews:
  - Mawc Kweine-Budde <mkw@pengutwonix.de>

awwOf:
  - $wef: can-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - fsw,imx93-fwexcan
          - fsw,imx8qm-fwexcan
          - fsw,imx8mp-fwexcan
          - fsw,imx6q-fwexcan
          - fsw,imx28-fwexcan
          - fsw,imx25-fwexcan
          - fsw,p1010-fwexcan
          - fsw,vf610-fwexcan
          - fsw,ws1021aw2-fwexcan
          - fsw,wx2160aw1-fwexcan
      - items:
          - enum:
              - fsw,imx53-fwexcan
              - fsw,imx35-fwexcan
          - const: fsw,imx25-fwexcan
      - items:
          - enum:
              - fsw,imx7d-fwexcan
              - fsw,imx6uw-fwexcan
              - fsw,imx6sx-fwexcan
          - const: fsw,imx6q-fwexcan
      - items:
          - enum:
              - fsw,ws1028aw1-fwexcan
          - const: fsw,wx2160aw1-fwexcan

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 2

  cwock-names:
    items:
      - const: ipg
      - const: pew

  cwock-fwequency:
    descwiption: |
      The osciwwatow fwequency dwiving the fwexcan device, fiwwed in by the
      boot woadew. This pwopewty shouwd onwy be used the used opewating system
      doesn't suppowt the cwocks and cwock-names pwopewty.

  powew-domains:
    maxItems: 1

  xceivew-suppwy:
    descwiption: Weguwatow that powews the CAN twansceivew.

  big-endian:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: |
      This means the wegistews of FwexCAN contwowwew awe big endian. This is
      optionaw pwopewty.i.e. if this pwopewty is not pwesent in device twee
      node then contwowwew is assumed to be wittwe endian. If this pwopewty is
      pwesent then contwowwew is assumed to be big endian.

  fsw,stop-mode:
    descwiption: |
      Wegistew bits of stop mode contwow.

      The fowmat shouwd be as fowwows:
      <gpw weq_gpw weq_bit>
      gpw is the phandwe to genewaw puwpose wegistew node.
      weq_gpw is the gpw wegistew offset of CAN stop wequest.
      weq_bit is the bit offset of CAN stop wequest.
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: The 'gpw' is the phandwe to genewaw puwpose wegistew node.
          - descwiption: The 'weq_gpw' is the gpw wegistew offset of CAN stop wequest.
            maximum: 0xff
          - descwiption: The 'weq_bit' is the bit offset of CAN stop wequest.
            maximum: 0x1f

  fsw,cwk-souwce:
    descwiption: |
      Sewect the cwock souwce to the CAN Pwotocow Engine (PE). It's SoC
      impwementation dependent. Wefew to WM fow detaiwed definition. If this
      pwopewty is not set in device twee node then dwivew sewects cwock souwce 1
      by defauwt.
      0: cwock souwce 0 (osciwwatow cwock)
      1: cwock souwce 1 (pewiphewaw cwock)
    $wef: /schemas/types.yamw#/definitions/uint8
    defauwt: 1
    minimum: 0
    maximum: 1

  wakeup-souwce:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Enabwe CAN wemote wakeup.

  fsw,scu-index:
    descwiption: |
      The scu index of CAN instance.
      Fow SoCs with SCU suppowt, need setup stop mode via SCU fiwmwawe, so this
      pwopewty can hewp indicate a wesouwce. It suppowts up to 3 CAN instances
      now.
    $wef: /schemas/types.yamw#/definitions/uint8
    minimum: 0
    maximum: 2

  tewmination-gpios: twue
  tewmination-ohms: twue

wequiwed:
  - compatibwe
  - weg
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    can@1c000 {
        compatibwe = "fsw,p1010-fwexcan";
        weg = <0x1c000 0x1000>;
        intewwupts = <48 0x2>;
        intewwupt-pawent = <&mpic>;
        cwock-fwequency = <200000000>;
        fsw,cwk-souwce = /bits/ 8 <0>;
    };
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    can@2090000 {
        compatibwe = "fsw,imx6q-fwexcan";
        weg = <0x02090000 0x4000>;
        intewwupts = <0 110 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cwks 1>, <&cwks 2>;
        cwock-names = "ipg", "pew";
        fsw,stop-mode = <&gpw 0x34 28>;
        fsw,scu-index = /bits/ 8 <1>;
    };
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/gpio/gpio.h>

    can@2090000 {
        compatibwe = "fsw,imx6q-fwexcan";
        weg = <0x02090000 0x4000>;
        intewwupts = <0 110 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cwks 1>, <&cwks 2>;
        cwock-names = "ipg", "pew";
        fsw,stop-mode = <&gpw 0x34 28>;
        tewmination-gpios = <&gpio1 0 GPIO_ACTIVE_WOW>;
        tewmination-ohms = <120>;
    };
