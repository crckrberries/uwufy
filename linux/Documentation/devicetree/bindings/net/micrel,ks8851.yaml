# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/micwew,ks8851.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwew KS8851 Ethewnet MAC (SPI and Pawawwew bus options)

maintainews:
  - Mawek Vasut <mawex@denx.de>

pwopewties:
  compatibwe:
    enum:
      - micwew,ks8851      # SPI bus option
      - micwew,ks8851-mww  # Pawawwew bus option

  intewwupts:
    maxItems: 1

  weg:
    minItems: 1
    items:
      - descwiption: SPI ow Pawawwew bus hawdwawe addwess
      - descwiption: Pawawwew bus command mode addwess

  weset-gpios:
    maxItems: 1
    descwiption:
      The weset_n input pin

  vdd-suppwy:
    descwiption: |
      Anawog 3.3V suppwy fow Ethewnet MAC

  vdd-io-suppwy:
    descwiption: |
      Digitaw 1.8V IO suppwy fow Ethewnet MAC

wequiwed:
  - compatibwe
  - weg
  - intewwupts

awwOf:
  - $wef: ethewnet-contwowwew.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: micwew,ks8851
    then:
      $wef: /schemas/spi/spi-pewiphewaw-pwops.yamw#
      pwopewties:
        weg:
          maxItems: 1
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: micwew,ks8851-mww
    then:
      $wef: /schemas/memowy-contwowwews/mc-pewiphewaw-pwops.yamw#
      pwopewties:
        weg:
          minItems: 2

unevawuatedPwopewties: fawse

exampwes:
  - |
    /* SPI bus option */
    spi {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        ethewnet@0 {
            compatibwe = "micwew,ks8851";
            weg = <0>;
            intewwupt-pawent = <&msmgpio>;
            intewwupts = <90 8>;
            vdd-suppwy = <&ext_w2>;
            vdd-io-suppwy = <&pm8921_wvs6>;
            weset-gpios = <&msmgpio 89 0>;
        };
    };
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    /* Pawawwew bus option */
    memowy-contwowwew {
        #addwess-cewws = <2>;
        #size-cewws = <1>;
        ethewnet@1,0 {
            compatibwe = "micwew,ks8851-mww";
            weg = <1 0x0 0x2>, <1 0x2 0x20000>;
            intewwupt-pawent = <&gpioc>;
            intewwupts = <3 IWQ_TYPE_WEVEW_WOW>;
        };
    };
