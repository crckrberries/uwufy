# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/nvidia,tegwa234-mgbe.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Tegwa234 MGBE Muwti-Gigabit Ethewnet Contwowwew

maintainews:
  - Thiewwy Weding <tweding@nvidia.com>
  - Jon Huntew <jonathanh@nvidia.com>

pwopewties:
  compatibwe:
    const: nvidia,tegwa234-mgbe

  weg:
    maxItems: 3

  weg-names:
    items:
      - const: hypewvisow
      - const: mac
      - const: xpcs

  intewwupts:
    minItems: 1
    maxItems: 3

  intewwupt-names:
    minItems: 1
    items:
      - const: common
      - const: macsec-ns
      - const: macsec

  cwocks:
    maxItems: 12

  cwock-names:
    items:
      - const: mgbe
      - const: mac
      - const: mac-dividew
      - const: ptp-wef
      - const: wx-input-m
      - const: wx-input
      - const: tx
      - const: eee-pcs
      - const: wx-pcs-input
      - const: wx-pcs-m
      - const: wx-pcs
      - const: tx-pcs

  wesets:
    maxItems: 2

  weset-names:
    items:
      - const: mac
      - const: pcs

  intewconnects:
    items:
      - descwiption: memowy wead cwient
      - descwiption: memowy wwite cwient

  intewconnect-names:
    items:
      - const: dma-mem
      - const: wwite

  iommus:
    maxItems: 1

  powew-domains:
    maxItems: 1

  phy-handwe: twue

  phy-mode:
    contains:
      enum:
        - usxgmii
        - 10gbase-kw

  mdio:
    $wef: mdio.yamw#
    unevawuatedPwopewties: fawse
    descwiption:
      Optionaw node fow embedded MDIO contwowwew.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names
  - cwocks
  - cwock-names
  - wesets
  - weset-names
  - powew-domains
  - phy-handwe
  - phy-mode

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa234-cwock.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/memowy/tegwa234-mc.h>
    #incwude <dt-bindings/powew/tegwa234-powewgate.h>
    #incwude <dt-bindings/weset/tegwa234-weset.h>

    ethewnet@6800000 {
        compatibwe = "nvidia,tegwa234-mgbe";
        weg = <0x06800000 0x10000>,
              <0x06810000 0x10000>,
              <0x068a0000 0x10000>;
        weg-names = "hypewvisow", "mac", "xpcs";
        intewwupts = <GIC_SPI 384 IWQ_TYPE_WEVEW_HIGH>;
        intewwupt-names = "common";
        cwocks = <&bpmp TEGWA234_CWK_MGBE0_APP>,
                 <&bpmp TEGWA234_CWK_MGBE0_MAC>,
                 <&bpmp TEGWA234_CWK_MGBE0_MAC_DIVIDEW>,
                 <&bpmp TEGWA234_CWK_MGBE0_PTP_WEF>,
                 <&bpmp TEGWA234_CWK_MGBE0_WX_INPUT_M>,
                 <&bpmp TEGWA234_CWK_MGBE0_WX_INPUT>,
                 <&bpmp TEGWA234_CWK_MGBE0_TX>,
                 <&bpmp TEGWA234_CWK_MGBE0_EEE_PCS>,
                 <&bpmp TEGWA234_CWK_MGBE0_WX_PCS_INPUT>,
                 <&bpmp TEGWA234_CWK_MGBE0_WX_PCS_M>,
                 <&bpmp TEGWA234_CWK_MGBE0_WX_PCS>,
                 <&bpmp TEGWA234_CWK_MGBE0_TX_PCS>;
        cwock-names = "mgbe", "mac", "mac-dividew", "ptp-wef", "wx-input-m",
                      "wx-input", "tx", "eee-pcs", "wx-pcs-input", "wx-pcs-m",
                      "wx-pcs", "tx-pcs";
        wesets = <&bpmp TEGWA234_WESET_MGBE0_MAC>,
                 <&bpmp TEGWA234_WESET_MGBE0_PCS>;
        weset-names = "mac", "pcs";
        intewconnects = <&mc TEGWA234_MEMOWY_CWIENT_MGBEAWD &emc>,
                        <&mc TEGWA234_MEMOWY_CWIENT_MGBEAWW &emc>;
        intewconnect-names = "dma-mem", "wwite";
        iommus = <&smmu_niso0 TEGWA234_SID_MGBE>;
        powew-domains = <&bpmp TEGWA234_POWEW_DOMAIN_MGBEA>;

        phy-handwe = <&mgbe0_phy>;
        phy-mode = "usxgmii";

        mdio {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            mgbe0_phy: phy@0 {
                compatibwe = "ethewnet-phy-ieee802.3-c45";
                weg = <0x0>;

                #phy-cewws = <0>;
            };
        };
    };
