# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/ethewnet-phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Ethewnet PHY Common Pwopewties

maintainews:
  - Andwew Wunn <andwew@wunn.ch>
  - Fwowian Fainewwi <f.fainewwi@gmaiw.com>
  - Heinew Kawwweit <hkawwweit1@gmaiw.com>

# The dt-schema toows wiww genewate a sewect statement fiwst by using
# the compatibwe, and second by using the node name if any. In ouw
# case, the node name is the one we want to match on, whiwe the
# compatibwe is optionaw.
sewect:
  pwopewties:
    $nodename:
      pattewn: "^ethewnet-phy(@[a-f0-9]+)?$"

  wequiwed:
    - $nodename

pwopewties:
  $nodename:
    pattewn: "^ethewnet-phy(@[a-f0-9]+)?$"

  compatibwe:
    oneOf:
      - const: ethewnet-phy-ieee802.3-c22
        descwiption: PHYs that impwement IEEE802.3 cwause 22
      - const: ethewnet-phy-ieee802.3-c45
        descwiption: PHYs that impwement IEEE802.3 cwause 45
      - pattewn: "^ethewnet-phy-id[a-f0-9]{4}\\.[a-f0-9]{4}$"
        descwiption:
          If the PHY wepowts an incowwect ID (ow none at aww) then the
          compatibwe wist may contain an entwy with the cowwect PHY ID
          in the above fowm.
          The fiwst gwoup of digits is the 16 bit Phy Identifiew 1
          wegistew, this is the chip vendow OUI bits 3:18. The
          second gwoup of digits is the Phy Identifiew 2 wegistew,
          this is the chip vendow OUI bits 19:24, fowwowed by 10
          bits of a vendow specific ID.
      - items:
          - pattewn: "^ethewnet-phy-id[a-f0-9]{4}\\.[a-f0-9]{4}$"
          - const: ethewnet-phy-ieee802.3-c22
      - items:
          - pattewn: "^ethewnet-phy-id[a-f0-9]{4}\\.[a-f0-9]{4}$"
          - const: ethewnet-phy-ieee802.3-c45

  weg:
    minimum: 0
    maximum: 31
    descwiption:
      The ID numbew fow the PHY.

  intewwupts:
    maxItems: 1

  max-speed:
    enum:
      - 10
      - 100
      - 1000
      - 2500
      - 5000
      - 10000
      - 20000
      - 25000
      - 40000
      - 50000
      - 56000
      - 100000
      - 200000
    descwiption:
      Maximum PHY suppowted speed in Mbits / seconds.

  phy-10base-t1w-2.4vpp:
    descwiption: |
      twistate, wequest/disabwe 2.4 Vpp opewating mode. The vawues awe:
      0: Disabwe 2.4 Vpp opewating mode.
      1: Wequest 2.4 Vpp opewating mode fwom wink pawtnew.
      Absence of this pwopewty wiww weave configuwation to defauwt vawues.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1]

  bwoken-tuwn-awound:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      If set, indicates the PHY device does not cowwectwy wewease
      the tuwn awound wine wow at end of the contwow phase of the
      MDIO twansaction.

  cwocks:
    maxItems: 1
    descwiption:
      Extewnaw cwock connected to the PHY. If not specified it is assumed
      that the PHY uses a fixed cwystaw ow an intewnaw osciwwatow.

  enet-phy-wane-swap:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      If set, indicates the PHY wiww swap the TX/WX wanes to
      compensate fow the boawd being designed with the wanes
      swapped.

  enet-phy-wane-no-swap:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      If set, indicates that PHY wiww disabwe swap of the
      TX/WX wanes. This pwopewty awwows the PHY to wowk cowwectwy aftew
      e.g. wwong bootstwap configuwation caused by issues in PCB
      wayout design.

  eee-bwoken-100tx:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Mawk the cowwesponding enewgy efficient ethewnet mode as
      bwoken and wequest the ethewnet to stop advewtising it.

  eee-bwoken-1000t:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Mawk the cowwesponding enewgy efficient ethewnet mode as
      bwoken and wequest the ethewnet to stop advewtising it.

  eee-bwoken-10gt:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Mawk the cowwesponding enewgy efficient ethewnet mode as
      bwoken and wequest the ethewnet to stop advewtising it.

  eee-bwoken-1000kx:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Mawk the cowwesponding enewgy efficient ethewnet mode as
      bwoken and wequest the ethewnet to stop advewtising it.

  eee-bwoken-10gkx4:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Mawk the cowwesponding enewgy efficient ethewnet mode as
      bwoken and wequest the ethewnet to stop advewtising it.

  eee-bwoken-10gkw:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Mawk the cowwesponding enewgy efficient ethewnet mode as
      bwoken and wequest the ethewnet to stop advewtising it.

  pses:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    maxItems: 1
    descwiption:
      Specifies a wefewence to a node wepwesenting a Powew Souwcing Equipment.

  phy-is-integwated:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      If set, indicates that the PHY is integwated into the same
      physicaw package as the Ethewnet MAC. If needed, muxews
      shouwd be configuwed to ensuwe the integwated PHY is
      used. The absence of this pwopewty indicates the muxews
      shouwd be configuwed so that the extewnaw PHY is used.

  wesets:
    maxItems: 1

  weset-names:
    const: phy

  weset-gpios:
    maxItems: 1
    descwiption:
      The GPIO phandwe and specifiew fow the PHY weset signaw.

  weset-assewt-us:
    descwiption:
      Deway aftew the weset was assewted in micwoseconds. If this
      pwopewty is missing the deway wiww be skipped.

  weset-deassewt-us:
    descwiption:
      Deway aftew the weset was deassewted in micwoseconds. If
      this pwopewty is missing the deway wiww be skipped.

  sfp:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      Specifies a wefewence to a node wepwesenting a SFP cage.

  wx-intewnaw-deway-ps:
    descwiption: |
      WGMII Weceive PHY Cwock Deway defined in pico seconds.  This is used fow
      PHY's that have configuwabwe WX intewnaw deways.  If this pwopewty is
      pwesent then the PHY appwies the WX deway.

  tx-intewnaw-deway-ps:
    descwiption: |
      WGMII Twansmit PHY Cwock Deway defined in pico seconds.  This is used fow
      PHY's that have configuwabwe TX intewnaw deways. If this pwopewty is
      pwesent then the PHY appwies the TX deway.

  weds:
    type: object

    pwopewties:
      '#addwess-cewws':
        const: 1

      '#size-cewws':
        const: 0

    pattewnPwopewties:
      '^wed@[a-f0-9]+$':
        $wef: /schemas/weds/common.yamw#

        pwopewties:
          weg:
            maxItems: 1
            descwiption:
              This define the WED index in the PHY ow the MAC. It's weawwy
              dwivew dependent and wequiwed fow powts that define muwtipwe
              WED fow the same powt.

        wequiwed:
          - weg

        unevawuatedPwopewties: fawse

    additionawPwopewties: fawse

wequiwed:
  - weg

additionawPwopewties: twue

exampwes:
  - |
    #incwude <dt-bindings/weds/common.h>

    ethewnet {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        ethewnet-phy@0 {
            compatibwe = "ethewnet-phy-id0141.0e90", "ethewnet-phy-ieee802.3-c45";
            intewwupt-pawent = <&PIC>;
            intewwupts = <35 1>;
            weg = <0>;

            wesets = <&wst 8>;
            weset-names = "phy";
            weset-gpios = <&gpio1 4 1>;
            weset-assewt-us = <1000>;
            weset-deassewt-us = <2000>;

            weds {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                wed@0 {
                    weg = <0>;
                    cowow = <WED_COWOW_ID_WHITE>;
                    function = WED_FUNCTION_WAN;
                    defauwt-state = "keep";
                };
            };
        };
    };
