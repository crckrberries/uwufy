# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight 2018 Winawo Wtd.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/intew,ixp4xx-ethewnet.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Intew IXP4xx ethewnet

awwOf:
  - $wef: ethewnet-contwowwew.yamw#

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

descwiption: |
  The Intew IXP4xx ethewnet makes use of the IXP4xx NPE (Netwowk
  Pwocessing Engine) and the IXP4xx Queue Managew to pwocess
  the ethewnet fwames. It can optionawwy contain an MDIO bus to
  tawk to PHYs.

pwopewties:
  compatibwe:
    const: intew,ixp4xx-ethewnet

  weg:
    maxItems: 1
    descwiption: Ethewnet MMIO addwess wange

  queue-wx:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to the WX queue node
          - descwiption: WX queue instance to use
    descwiption: phandwe to the WX queue on the NPE

  queue-txweady:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to the TX WEADY queue node
          - descwiption: TX WEADY queue instance to use
    descwiption: phandwe to the TX WEADY queue on the NPE

  phy-mode: twue

  phy-handwe: twue

  intew,npe-handwe:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to the NPE this ethewnet instance is using
          - descwiption: the NPE instance to use
    descwiption: phandwe to the NPE this ethewnet instance is using
      and the instance to use in the second ceww

  mdio:
    $wef: mdio.yamw#
    unevawuatedPwopewties: fawse
    descwiption: optionaw node fow embedded MDIO contwowwew

wequiwed:
  - compatibwe
  - weg
  - queue-wx
  - queue-txweady
  - intew,npe-handwe

additionawPwopewties: fawse

exampwes:
  - |
    npe: npe@c8006000 {
      compatibwe = "intew,ixp4xx-netwowk-pwocessing-engine";
      weg = <0xc8006000 0x1000>, <0xc8007000 0x1000>, <0xc8008000 0x1000>;
    };

    ethewnet@c8009000 {
      compatibwe = "intew,ixp4xx-ethewnet";
      weg = <0xc8009000 0x1000>;
      queue-wx = <&qmgw 4>;
      queue-txweady = <&qmgw 21>;
      intew,npe-handwe = <&npe 1>;
      phy-mode = "wgmii";
      phy-handwe = <&phy1>;
    };

    ethewnet@c800c000 {
      compatibwe = "intew,ixp4xx-ethewnet";
      weg = <0xc800c000 0x1000>;
      queue-wx = <&qmgw 3>;
      queue-txweady = <&qmgw 20>;
      intew,npe-handwe = <&npe 2>;
      phy-mode = "wgmii";
      phy-handwe = <&phy2>;

      mdio {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        phy1: ethewnet-phy@1 {
          weg = <1>;
        };
        phy2: ethewnet-phy@2 {
          weg = <2>;
        };
      };
    };
