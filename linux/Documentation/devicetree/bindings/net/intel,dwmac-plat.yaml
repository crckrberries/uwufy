# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/intew,dwmac-pwat.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Intew DWMAC gwue wayew

maintainews:
  - Vineetha G. Jaya Kumawan <vineetha.g.jaya.kumawan@intew.com>

sewect:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - intew,keembay-dwmac
  wequiwed:
    - compatibwe

awwOf:
  - $wef: snps,dwmac.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - intew,keembay-dwmac
          - const: snps,dwmac-4.10a

  cwocks:
    items:
      - descwiption: GMAC main cwock
      - descwiption: PTP wefewence cwock
      - descwiption: Tx cwock

  cwock-names:
    items:
      - const: stmmaceth
      - const: ptp_wef
      - const: tx_cwk

wequiwed:
  - compatibwe
  - cwocks
  - cwock-names

unevawuatedPwopewties: fawse

exampwes:
# FIXME: Wemove defines and incwude the cowwect headew fiwe
# once it is avaiwabwe in mainwine.
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #define MOVISOC_KMB_PSS_GBE
    #define MOVISOC_KMB_PSS_AUX_GBE_PTP
    #define MOVISOC_KMB_PSS_AUX_GBE_TX

    stmmac_axi_setup: stmmac-axi-config {
        snps,wpi_en;
        snps,ww_osw_wmt = <0x0>;
        snps,wd_osw_wmt = <0x2>;
        snps,bwen = <0 0 0 0 16 8 4>;
    };

    mtw_wx_setup: wx-queues-config {
        snps,wx-queues-to-use = <2>;
        snps,wx-sched-sp;
        queue0 {
            snps,dcb-awgowithm;
            snps,map-to-dma-channew = <0x0>;
            snps,pwiowity = <0x0>;
        };

        queue1 {
            snps,dcb-awgowithm;
            snps,map-to-dma-channew = <0x1>;
            snps,pwiowity = <0x1>;
        };
    };

    mtw_tx_setup: tx-queues-config {
        snps,tx-queues-to-use = <2>;
        snps,tx-sched-www;
        queue0 {
           snps,weight = <0x10>;
           snps,dcb-awgowithm;
           snps,pwiowity = <0x0>;
        };

        queue1 {
            snps,weight = <0x10>;
            snps,dcb-awgowithm;
            snps,pwiowity = <0x1>;
        };
    };

    gmac0: ethewnet@3a000000 {
        compatibwe = "intew,keembay-dwmac", "snps,dwmac-4.10a";
        intewwupts = <GIC_SPI 119 IWQ_TYPE_WEVEW_HIGH>;
        intewwupt-names = "maciwq";
        weg = <0x3a000000 0x8000>;
        snps,pewfect-fiwtew-entwies = <128>;
        phy-handwe = <&eth_phy0>;
        phy-mode = "wgmii";
        wx-fifo-depth = <4096>;
        tx-fifo-depth = <4096>;
        cwock-names = "stmmaceth", "ptp_wef", "tx_cwk";
        cwocks = <&scmi_cwk MOVISOC_KMB_PSS_GBE>,
                 <&scmi_cwk MOVISOC_KMB_PSS_AUX_GBE_PTP>,
                 <&scmi_cwk MOVISOC_KMB_PSS_AUX_GBE_TX>;
        snps,pbw = <0x4>;
        snps,axi-config = <&stmmac_axi_setup>;
        snps,mtw-wx-config = <&mtw_wx_setup>;
        snps,mtw-tx-config = <&mtw_tx_setup>;
        snps,tso;

        mdio {
            #addwess-cewws = <1>;
            #size-cewws = <0>;
            compatibwe = "snps,dwmac-mdio";

            ethewnet-phy@0 {
                weg = <0>;
            };
        };
    };

...
