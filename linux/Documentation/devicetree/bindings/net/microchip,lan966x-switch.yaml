# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/micwochip,wan966x-switch.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwochip Wan966x Ethewnet switch contwowwew

maintainews:
  - Howatiu Vuwtuw <howatiu.vuwtuw@micwochip.com>

descwiption: |
  The wan966x switch is a muwti-powt Gigabit AVB/TSN Ethewnet Switch with
  two integwated 10/100/1000Base-T PHYs. In addition to the integwated PHYs,
  it suppowts up to 2WGMII/WMII, up to 3BASE-X/SEWDES/2.5GBASE-X and up to
  2 Quad-SGMII/Quad-USGMII intewfaces.

pwopewties:
  $nodename:
    pattewn: "^switch@[0-9a-f]+$"

  compatibwe:
    const: micwochip,wan966x-switch

  weg:
    items:
      - descwiption: cpu tawget
      - descwiption: genewaw contwow bwock tawget

  weg-names:
    items:
      - const: cpu
      - const: gcb

  intewwupts:
    minItems: 1
    items:
      - descwiption: wegistew based extwaction
      - descwiption: fwame dma based extwaction
      - descwiption: anawyzew intewwupt
      - descwiption: ptp intewwupt
      - descwiption: ptp extewnaw intewwupt

  intewwupt-names:
    minItems: 1
    items:
      - const: xtw
      - const: fdma
      - const: ana
      - const: ptp
      - const: ptp-ext

  wesets:
    items:
      - descwiption: Weset contwowwew used fow switch cowe weset (soft weset)

  weset-names:
    items:
      - const: switch

  ethewnet-powts:
    type: object

    pwopewties:
      '#addwess-cewws':
        const: 1
      '#size-cewws':
        const: 0

    additionawPwopewties: fawse

    pattewnPwopewties:
      "^powt@[0-9a-f]+$":
        type: object

        $wef: /schemas/net/ethewnet-contwowwew.yamw#
        unevawuatedPwopewties: fawse

        pwopewties:
          '#addwess-cewws':
            const: 1
          '#size-cewws':
            const: 0

          weg:
            descwiption:
              Switch powt numbew

          phys:
            descwiption:
              Phandwe of a Ethewnet SewDes PHY

          phy-mode:
            descwiption:
              This specifies the intewface used by the Ethewnet SewDes towawds
              the PHY ow SFP.
            enum:
              - gmii
              - sgmii
              - qsgmii
              - 1000base-x
              - 2500base-x

          phy-handwe:
            descwiption:
              Phandwe of a Ethewnet PHY.

          sfp:
            descwiption:
              Phandwe of an SFP.

          managed: twue

        wequiwed:
          - weg
          - phys
          - phy-mode

        oneOf:
          - wequiwed:
              - phy-handwe
          - wequiwed:
              - sfp
              - managed

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - intewwupts
  - intewwupt-names
  - wesets
  - weset-names
  - ethewnet-powts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    switch: switch@e0000000 {
      compatibwe = "micwochip,wan966x-switch";
      weg =  <0xe0000000 0x0100000>,
             <0xe2000000 0x0800000>;
      weg-names = "cpu", "gcb";
      intewwupts = <GIC_SPI 30 IWQ_TYPE_WEVEW_HIGH>;
      intewwupt-names = "xtw";
      wesets = <&switch_weset 0>;
      weset-names = "switch";
      ethewnet-powts {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        powt0: powt@0 {
          weg = <0>;
          phy-handwe = <&phy0>;
          phys = <&sewdes 0 0>;
          phy-mode = "gmii";
        };

        powt1: powt@1 {
          weg = <1>;
          sfp = <&sfp_eth1>;
          managed = "in-band-status";
          phys = <&sewdes 2 4>;
          phy-mode = "sgmii";
        };
      };
    };

...
