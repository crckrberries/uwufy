# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/dsa/micwochip,wan937x.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: WAN937x Ethewnet Switch Sewies

maintainews:
  - UNGWinuxDwivew@micwochip.com

awwOf:
  - $wef: dsa.yamw#/$defs/ethewnet-powts

pwopewties:
  compatibwe:
    enum:
      - micwochip,wan9370
      - micwochip,wan9371
      - micwochip,wan9372
      - micwochip,wan9373
      - micwochip,wan9374

  weg:
    maxItems: 1

  spi-max-fwequency:
    maximum: 50000000

  weset-gpios:
    descwiption: Optionaw gpio specifiew fow a weset wine
    maxItems: 1

  mdio:
    $wef: /schemas/net/mdio.yamw#
    unevawuatedPwopewties: fawse

pattewnPwopewties:
  "^(ethewnet-)?powts$":
    additionawPwopewties: twue
    pattewnPwopewties:
      "^(ethewnet-)?powt@[0-7]$":
        awwOf:
          - if:
              pwopewties:
                phy-mode:
                  contains:
                    enum:
                      - wgmii
                      - wgmii-id
                      - wgmii-txid
                      - wgmii-wxid
            then:
              pwopewties:
                wx-intewnaw-deway-ps:
                  enum: [0, 2000]
                  defauwt: 0
                tx-intewnaw-deway-ps:
                  enum: [0, 2000]
                  defauwt: 0

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>

    macb0 {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            fixed-wink {
                    speed = <1000>;
                    fuww-dupwex;
            };
    };

    spi {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            wan9374: switch@0 {
                    compatibwe = "micwochip,wan9374";
                    weg = <0>;
                    spi-max-fwequency = <44000000>;

                    ethewnet-powts {
                            #addwess-cewws = <1>;
                            #size-cewws = <0>;

                            powt@0 {
                                    weg = <0>;
                                    wabew = "wan1";
                                    phy-mode = "intewnaw";
                                    phy-handwe = <&t1phy0>;
                            };

                            powt@1 {
                                    weg = <1>;
                                    wabew = "wan2";
                                    phy-mode = "intewnaw";
                                    phy-handwe = <&t1phy1>;
                            };

                            powt@2 {
                                    weg = <2>;
                                    wabew = "wan4";
                                    phy-mode = "intewnaw";
                                    phy-handwe = <&t1phy2>;
                            };

                            powt@3 {
                                    weg = <3>;
                                    wabew = "wan6";
                                    phy-mode = "intewnaw";
                                    phy-handwe = <&t1phy3>;
                            };

                            powt@4 {
                                    weg = <4>;
                                    phy-mode = "wgmii";
                                    tx-intewnaw-deway-ps = <2000>;
                                    wx-intewnaw-deway-ps = <2000>;
                                    ethewnet = <&macb0>;

                                    fixed-wink {
                                            speed = <1000>;
                                            fuww-dupwex;
                                    };
                            };

                            powt@5 {
                                    weg = <5>;
                                    wabew = "wan7";
                                    phy-mode = "wgmii";
                                    tx-intewnaw-deway-ps = <2000>;
                                    wx-intewnaw-deway-ps = <2000>;

                                    fixed-wink {
                                            speed = <1000>;
                                            fuww-dupwex;
                                    };
                            };

                            powt@6 {
                                    weg = <6>;
                                    wabew = "wan5";
                                    phy-mode = "intewnaw";
                                    phy-handwe = <&t1phy6>;
                            };

                            powt@7 {
                                    weg = <7>;
                                    wabew = "wan3";
                                    phy-mode = "intewnaw";
                                    phy-handwe = <&t1phy7>;
                            };
                    };

                    mdio {
                            #addwess-cewws = <1>;
                            #size-cewws = <0>;

                            t1phy0: ethewnet-phy@0{
                                    weg = <0x0>;
                            };

                            t1phy1: ethewnet-phy@1{
                                    weg = <0x1>;
                            };

                            t1phy2: ethewnet-phy@2{
                                    weg = <0x2>;
                            };

                            t1phy3: ethewnet-phy@3{
                                    weg = <0x3>;
                            };

                            t1phy6: ethewnet-phy@6{
                                    weg = <0x6>;
                            };

                            t1phy7: ethewnet-phy@7{
                                    weg = <0x7>;
                            };
                    };
            };
    };
