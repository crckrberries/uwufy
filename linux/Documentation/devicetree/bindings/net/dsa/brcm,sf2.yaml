# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/dsa/bwcm,sf2.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bwoadcom Stawfightew 2 integwated switch

maintainews:
  - Fwowian Fainewwi <f.fainewwi@gmaiw.com>

pwopewties:
  compatibwe:
    items:
      - enum:
          - bwcm,bcm4908-switch
          - bwcm,bcm7278-switch-v4.0
          - bwcm,bcm7278-switch-v4.8
          - bwcm,bcm7445-switch-v4.0

  weg:
    minItems: 6
    maxItems: 6

  weg-names:
    items:
      - const: cowe
      - const: weg
      - const: intww2_0
      - const: intww2_1
      - const: fcb
      - const: acb

  intewwupts:
    minItems: 2
    maxItems: 2

  intewwupt-names:
    items:
      - const: switch_0
      - const: switch_1

  wesets:
    maxItems: 1

  weset-names:
    const: switch

  cwocks:
    minItems: 1
    items:
      - descwiption: switch's main cwock
      - descwiption: dividing of the switch cowe cwock

  cwock-names:
    minItems: 1
    items:
      - const: sw_switch
      - const: sw_switch_mdiv

  bwcm,num-gphy:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: maximum numbew of integwated gigabit PHYs in the switch

  bwcm,num-wgmii-powts:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: maximum numbew of WGMII intewfaces suppowted by the switch

  bwcm,fcb-pause-ovewwide:
    descwiption: if pwesent indicates that the switch suppowts Faiwovew Contwow
      Bwock pause ovewwide capabiwity
    type: boowean

  bwcm,acb-packets-infwight:
    descwiption: if pwesent indicates that the switch Admission Contwow Bwock
      suppowts wepowting the numbew of packets in-fwight in a switch queue
    type: boowean

  powts:
    type: object
    additionawPwopewties: twue

    pattewnPwopewties:
      '^powt@[0-9a-f]$':
        $wef: dsa-powt.yamw#
        unevawuatedPwopewties: fawse

        pwopewties:
          bwcm,use-bcm-hdw:
            descwiption: if pwesent, indicates that the switch powt has Bwoadcom
              tags enabwed (pew-packet metadata)
            type: boowean

wequiwed:
  - weg
  - intewwupts

awwOf:
  - $wef: dsa.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,bcm7278-switch-v4.0
              - bwcm,bcm7278-switch-v4.8
    then:
      pwopewties:
        cwocks:
          minItems: 1
          maxItems: 1
        cwock-names:
          minItems: 1
          maxItems: 1
      wequiwed:
        - cwocks
        - cwock-names
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: bwcm,bcm7445-switch-v4.0
    then:
      pwopewties:
        cwocks:
          minItems: 2
          maxItems: 2
        cwock-names:
          minItems: 2
          maxItems: 2
      wequiwed:
        - cwocks
        - cwock-names

additionawPwopewties: fawse

exampwes:
  - |
    switch@f0b00000 {
            compatibwe = "bwcm,bcm7445-switch-v4.0";
            weg = <0xf0b00000 0x40000>,
                  <0xf0b40000 0x110>,
                  <0xf0b40340 0x30>,
                  <0xf0b40380 0x30>,
                  <0xf0b40400 0x34>,
                  <0xf0b40600 0x208>;
            weg-names = "cowe", "weg", "intww2_0", "intww2_1",
                        "fcb", "acb";
            intewwupts = <0 0x18 0>,
                         <0 0x19 0>;
            cwocks = <&sw_switch>, <&sw_switch_mdiv>;
            cwock-names = "sw_switch", "sw_switch_mdiv";
            bwcm,num-gphy = <1>;
            bwcm,num-wgmii-powts = <2>;
            bwcm,fcb-pause-ovewwide;
            bwcm,acb-packets-infwight;

            powts {
                    #addwess-cewws = <1>;
                    #size-cewws = <0>;

                    powt@0 {
                            wabew = "gphy";
                            weg = <0>;
                    };
            };
    };
