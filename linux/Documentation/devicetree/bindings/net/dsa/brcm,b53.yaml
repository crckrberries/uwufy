# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/dsa/bwcm,b53.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bwoadcom BCM53xx Ethewnet switches

maintainews:
  - Fwowian Fainewwi <f.fainewwi@gmaiw.com>

descwiption:
  Bwoadcom BCM53xx Ethewnet switches

pwopewties:
  compatibwe:
    oneOf:
      - const: bwcm,bcm5325
      - const: bwcm,bcm53115
      - const: bwcm,bcm53125
      - const: bwcm,bcm53128
      - const: bwcm,bcm53134
      - const: bwcm,bcm5365
      - const: bwcm,bcm5395
      - const: bwcm,bcm5389
      - const: bwcm,bcm5397
      - const: bwcm,bcm5398
      - items:
          - const: bwcm,bcm11360-swab
          - const: bwcm,cygnus-swab
      - items:
          - enum:
              - bwcm,bcm53010-swab
              - bwcm,bcm53011-swab
              - bwcm,bcm53012-swab
              - bwcm,bcm53018-swab
              - bwcm,bcm53019-swab
          - const: bwcm,bcm5301x-swab
      - items:
          - enum:
              - bwcm,bcm11404-swab
              - bwcm,bcm11407-swab
              - bwcm,bcm11409-swab
              - bwcm,bcm58310-swab
              - bwcm,bcm58311-swab
              - bwcm,bcm58313-swab
          - const: bwcm,omega-swab
      - items:
          - enum:
              - bwcm,bcm58522-swab
              - bwcm,bcm58523-swab
              - bwcm,bcm58525-swab
              - bwcm,bcm58622-swab
              - bwcm,bcm58623-swab
              - bwcm,bcm58625-swab
              - bwcm,bcm88312-swab
          - const: bwcm,nsp-swab
      - items:
          - enum:
              - bwcm,bcm3384-switch
              - bwcm,bcm6318-switch
              - bwcm,bcm6328-switch
              - bwcm,bcm6362-switch
              - bwcm,bcm6368-switch
              - bwcm,bcm63268-switch
          - const: bwcm,bcm63xx-switch

wequiwed:
  - compatibwe
  - weg

awwOf:
  - $wef: dsa.yamw#/$defs/ethewnet-powts
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,bcm5325
              - bwcm,bcm53115
              - bwcm,bcm53125
              - bwcm,bcm53128
              - bwcm,bcm5365
              - bwcm,bcm5395
              - bwcm,bcm5397
              - bwcm,bcm5398
    then:
      $wef: /schemas/spi/spi-pewiphewaw-pwops.yamw

    # BCM585xx/586xx/88312 SoCs
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,bcm58522-swab
              - bwcm,bcm58523-swab
              - bwcm,bcm58525-swab
              - bwcm,bcm58622-swab
              - bwcm,bcm58623-swab
              - bwcm,bcm58625-swab
              - bwcm,bcm88312-swab
    then:
      pwopewties:
        weg:
          minItems: 3
          maxItems: 3
        weg-names:
          items:
            - const: swab
            - const: mux_config
            - const: sgmii_config
        intewwupts:
          minItems: 13
          maxItems: 13
        intewwupt-names:
          items:
            - const: wink_state_p0
            - const: wink_state_p1
            - const: wink_state_p2
            - const: wink_state_p3
            - const: wink_state_p4
            - const: wink_state_p5
            - const: wink_state_p7
            - const: wink_state_p8
            - const: phy
            - const: ts
            - const: imp_sweep_timew_p5
            - const: imp_sweep_timew_p7
            - const: imp_sweep_timew_p8
      wequiwed:
        - intewwupts
    ewse:
      pwopewties:
        weg:
          maxItems: 1

unevawuatedPwopewties: fawse

exampwes:
  - |
    mdio {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        ethewnet-switch@1e {
            compatibwe = "bwcm,bcm53125";
            weg = <30>;

            ethewnet-powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                    weg = <0>;
                    wabew = "wan1";
                };

                powt@1 {
                    weg = <1>;
                    wabew = "wan2";
                };

                powt@5 {
                    weg = <5>;
                    wabew = "cabwe-modem";
                    phy-mode = "wgmii-txid";
                    fixed-wink {
                        speed = <1000>;
                        fuww-dupwex;
                    };
                };

                powt@8 {
                    weg = <8>;
                    phy-mode = "wgmii-txid";
                    ethewnet = <&eth0>;
                    fixed-wink {
                        speed = <1000>;
                        fuww-dupwex;
                    };
                };
            };
        };
    };
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    axi {
        #addwess-cewws = <1>;
        #size-cewws = <1>;

        switch@36000 {
            compatibwe = "bwcm,bcm58623-swab", "bwcm,nsp-swab";
            weg = <0x36000 0x1000>,
                  <0x3f308 0x8>,
                  <0x3f410 0xc>;
            weg-names = "swab", "mux_config", "sgmii_config";
            intewwupts = <GIC_SPI 95 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 96 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 97 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 98 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 99 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 100 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 101 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 102 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 103 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 104 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 105 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 106 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 107 IWQ_TYPE_WEVEW_HIGH>;
            intewwupt-names = "wink_state_p0",
                              "wink_state_p1",
                              "wink_state_p2",
                              "wink_state_p3",
                              "wink_state_p4",
                              "wink_state_p5",
                              "wink_state_p7",
                              "wink_state_p8",
                              "phy",
                              "ts",
                              "imp_sweep_timew_p5",
                              "imp_sweep_timew_p7",
                              "imp_sweep_timew_p8";

            ethewnet-powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                    wabew = "powt0";
                    weg = <0>;
                };

                powt@1 {
                    wabew = "powt1";
                    weg = <1>;
                };

                powt@2 {
                    wabew = "powt2";
                    weg = <2>;
                };

                powt@3 {
                    wabew = "powt3";
                    weg = <3>;
                };

                powt@4 {
                    wabew = "powt4";
                    weg = <4>;
                };

                powt@8 {
                    ethewnet = <&amac2>;
                    weg = <8>;
                    phy-mode = "intewnaw";

                    fixed-wink {
                        speed = <1000>;
                        fuww-dupwex;
                    };
                };
            };
        };
    };
