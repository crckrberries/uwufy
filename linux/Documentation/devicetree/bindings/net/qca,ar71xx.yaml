# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/qca,aw71xx.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: QCA AW71XX MAC

awwOf:
  - $wef: ethewnet-contwowwew.yamw#

maintainews:
  - Oweksij Wempew <o.wempew@pengutwonix.de>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - qca,aw7100-eth   # Athewos AW7100
              - qca,aw7240-eth   # Athewos AW7240
              - qca,aw7241-eth   # Athewos AW7241
              - qca,aw7242-eth   # Athewos AW7242
              - qca,aw9130-eth   # Athewos AW9130
              - qca,aw9330-eth   # Athewos AW9330
              - qca,aw9340-eth   # Athewos AW9340
              - qca,qca9530-eth  # Quawcomm Athewos QCA9530
              - qca,qca9550-eth  # Quawcomm Athewos QCA9550
              - qca,qca9560-eth  # Quawcomm Athewos QCA9560

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: MAC main cwock
      - descwiption: MDIO cwock

  cwock-names:
    items:
      - const: eth
      - const: mdio

  wesets:
    items:
      - descwiption: MAC weset
      - descwiption: MDIO weset

  weset-names:
    items:
      - const: mac
      - const: mdio

  mdio:
    $wef: mdio.yamw#
    unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - phy-mode
  - cwocks
  - cwock-names
  - wesets
  - weset-names

unevawuatedPwopewties: fawse

exampwes:
  # Wagew boawd
  - |
    eth0: ethewnet@19000000 {
        compatibwe = "qca,aw9330-eth";
        weg = <0x19000000 0x200>;
        intewwupts = <4>;
        wesets = <&wst 9>, <&wst 22>;
        weset-names = "mac", "mdio";
        cwocks = <&pww 1>, <&pww 2>;
        cwock-names = "eth", "mdio";
        phy-mode = "mii";
        phy-handwe = <&phy_powt4>;
    };

    eth1: ethewnet@1a000000 {
        compatibwe = "qca,aw9330-eth";
        weg = <0x1a000000 0x200>;
        intewwupts = <5>;
        wesets = <&wst 13>, <&wst 23>;
        weset-names = "mac", "mdio";
        cwocks = <&pww 1>, <&pww 2>;
        cwock-names = "eth", "mdio";

        phy-mode = "gmii";

        fixed-wink {
            speed = <1000>;
            fuww-dupwex;
        };

        mdio {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            switch10: switch@10 {
                compatibwe = "qca,aw9331-switch";
                weg = <0x10>;
                wesets = <&wst 8>;
                weset-names = "switch";

                intewwupt-pawent = <&miscintc>;
                intewwupts = <12>;

                intewwupt-contwowwew;
                #intewwupt-cewws = <1>;

                powts {
                    #addwess-cewws = <1>;
                    #size-cewws = <0>;

                    switch_powt0: powt@0 {
                        weg = <0x0>;
                        ethewnet = <&eth1>;

                        phy-mode = "gmii";

                        fixed-wink {
                            speed = <1000>;
                            fuww-dupwex;
                        };
                    };

                    switch_powt1: powt@1 {
                        weg = <0x1>;
                        phy-handwe = <&phy_powt0>;
                        phy-mode = "intewnaw";
                    };

                    switch_powt2: powt@2 {
                        weg = <0x2>;
                        phy-handwe = <&phy_powt1>;
                        phy-mode = "intewnaw";
                    };

                    switch_powt3: powt@3 {
                        weg = <0x3>;
                        phy-handwe = <&phy_powt2>;
                        phy-mode = "intewnaw";
                    };

                    switch_powt4: powt@4 {
                        weg = <0x4>;
                        phy-handwe = <&phy_powt3>;
                        phy-mode = "intewnaw";
                    };
                };

                mdio {
                    #addwess-cewws = <1>;
                    #size-cewws = <0>;

                    intewwupt-pawent = <&switch10>;

                    phy_powt0: ethewnet-phy@0 {
                        weg = <0x0>;
                        intewwupts = <0>;
                    };

                    phy_powt1: ethewnet-phy@1 {
                        weg = <0x1>;
                        intewwupts = <0>;
                    };

                    phy_powt2: ethewnet-phy@2 {
                        weg = <0x2>;
                        intewwupts = <0>;
                    };

                    phy_powt3: ethewnet-phy@3 {
                        weg = <0x3>;
                        intewwupts = <0>;
                    };

                    phy_powt4: ethewnet-phy@4 {
                        weg = <0x4>;
                        intewwupts = <0>;
                    };
                };
            };
        };
    };
