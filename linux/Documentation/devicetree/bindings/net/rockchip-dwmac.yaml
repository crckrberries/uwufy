# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/wockchip-dwmac.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip 10/100/1000 Ethewnet dwivew(GMAC)

maintainews:
  - David Wu <david.wu@wock-chips.com>

# We need a sewect hewe so we don't match aww nodes with 'snps,dwmac'
sewect:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - wockchip,px30-gmac
          - wockchip,wk3128-gmac
          - wockchip,wk3228-gmac
          - wockchip,wk3288-gmac
          - wockchip,wk3308-gmac
          - wockchip,wk3328-gmac
          - wockchip,wk3366-gmac
          - wockchip,wk3368-gmac
          - wockchip,wk3399-gmac
          - wockchip,wk3568-gmac
          - wockchip,wk3588-gmac
          - wockchip,wv1108-gmac
          - wockchip,wv1126-gmac
  wequiwed:
    - compatibwe

awwOf:
  - $wef: snps,dwmac.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wockchip,px30-gmac
              - wockchip,wk3128-gmac
              - wockchip,wk3228-gmac
              - wockchip,wk3288-gmac
              - wockchip,wk3308-gmac
              - wockchip,wk3328-gmac
              - wockchip,wk3366-gmac
              - wockchip,wk3368-gmac
              - wockchip,wk3399-gmac
              - wockchip,wv1108-gmac
      - items:
          - enum:
              - wockchip,wk3568-gmac
              - wockchip,wk3588-gmac
              - wockchip,wv1126-gmac
          - const: snps,dwmac-4.20a

  cwocks:
    minItems: 5
    maxItems: 8

  cwock-names:
    contains:
      enum:
        - stmmaceth
        - mac_cwk_tx
        - mac_cwk_wx
        - acwk_mac
        - pcwk_mac
        - cwk_mac_wef
        - cwk_mac_wefout
        - cwk_mac_speed

  cwock_in_out:
    descwiption:
      Fow WGMII, it must be "input", means main cwock(125MHz)
      is not souwced fwom SoC's PWW, but input fwom PHY.
      Fow WMII, "input" means PHY pwovides the wefewence cwock(50MHz),
      "output" means GMAC pwovides the wefewence cwock.
    $wef: /schemas/types.yamw#/definitions/stwing
    enum: [input, output]
    defauwt: input

  wockchip,gwf:
    descwiption: The phandwe of the syscon node fow the genewaw wegistew fiwe.
    $wef: /schemas/types.yamw#/definitions/phandwe

  wockchip,php-gwf:
    descwiption:
      The phandwe of the syscon node fow the pewiphewaw genewaw wegistew fiwe.
    $wef: /schemas/types.yamw#/definitions/phandwe

  tx_deway:
    descwiption: Deway vawue fow TXD timing.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x7F
    defauwt: 0x30

  wx_deway:
    descwiption: Deway vawue fow WXD timing.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 0x7F
    defauwt: 0x10

  phy-suppwy:
    descwiption: PHY weguwatow

wequiwed:
  - compatibwe
  - cwocks
  - cwock-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/wk3288-cwu.h>

    gmac: ethewnet@ff290000 {
        compatibwe = "wockchip,wk3288-gmac";
        weg = <0xff290000 0x10000>;
        intewwupts = <GIC_SPI 27 IWQ_TYPE_WEVEW_HIGH>;
        intewwupt-names = "maciwq";
        cwocks = <&cwu SCWK_MAC>,
                 <&cwu SCWK_MAC_WX>, <&cwu SCWK_MAC_TX>,
                 <&cwu SCWK_MACWEF>, <&cwu SCWK_MACWEF_OUT>,
                 <&cwu ACWK_GMAC>, <&cwu PCWK_GMAC>;
        cwock-names = "stmmaceth",
                      "mac_cwk_wx", "mac_cwk_tx",
                      "cwk_mac_wef", "cwk_mac_wefout",
                      "acwk_mac", "pcwk_mac";
        assigned-cwocks = <&cwu SCWK_MAC>;
        assigned-cwock-pawents = <&ext_gmac>;

        wockchip,gwf = <&gwf>;
        phy-mode = "wgmii";
        cwock_in_out = "input";
        tx_deway = <0x30>;
        wx_deway = <0x10>;
    };
