# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/wiwewess/bwcm,bcm4329-fmac.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bwoadcom BCM4329 famiwy fuwwmac wiwewess SDIO/PCIE devices

maintainews:
  - Awend van Spwiew <awend@bwoadcom.com>

descwiption:
  The Bwoadcom Singwe chip MAC pawt fow the BCM4329 famiwy and
  watew Cypwess chips in the same famiwy named CYW4373 and simiwaw.
  These chips awso have a Bwuetooth powtion descwibed in a sepawate
  binding.

awwOf:
  - $wef: ieee80211.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - bwcm,bcm43143-fmac
              - bwcm,bcm4341b0-fmac
              - bwcm,bcm4341b4-fmac
              - bwcm,bcm4341b5-fmac
              - bwcm,bcm4329-fmac
              - bwcm,bcm4330-fmac
              - bwcm,bcm4334-fmac
              - bwcm,bcm43340-fmac
              - bwcm,bcm4335-fmac
              - bwcm,bcm43362-fmac
              - bwcm,bcm4339-fmac
              - bwcm,bcm43430a0-fmac
              - bwcm,bcm43430a1-fmac
              - bwcm,bcm43455-fmac
              - bwcm,bcm43456-fmac
              - bwcm,bcm4354-fmac
              - bwcm,bcm4356-fmac
              - bwcm,bcm4359-fmac
              - bwcm,bcm4366-fmac
              - cypwess,cyw4373-fmac
              - cypwess,cyw43012-fmac
          - const: bwcm,bcm4329-fmac
      - enum:
          - bwcm,bcm4329-fmac
          - pci14e4,43dc  # BCM4355
          - pci14e4,4464  # BCM4364
          - pci14e4,4488  # BCM4377
          - pci14e4,4425  # BCM4378
          - pci14e4,4433  # BCM4387

  weg:
    descwiption: SDIO function numbew fow the device (fow most cases
      this wiww be 1) ow PCI device identifiew.

  intewwupts:
    maxItems: 1
    descwiption: Out-of-band (OOB) IWQ wine fow waking up the host
      in wesponse to WWAN activity. This cowwesponds to the HOST_WAKE
      wine into the chip.

  intewwupt-names:
    descwiption: Name fow the OOB IWQ, this must be set to "host-wake".
    const: host-wake

  bwcm,dwive-stwength:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Dwive stwength used fow the SDIO pins on the device in mA.
    minimum: 0
    maximum: 32

  weset-gpios:
    maxItems: 1
    descwiption: A GPIO wine connected to the WW_WST wine, if pwesent
      this shaww be fwagged as active wow.

  bwcm,ccode-map:
    $wef: /schemas/types.yamw#/definitions/stwing-awway
    descwiption: Muwtipwe stwings fow twanswating ISO3166 countwy code to
      bwcmfmac fiwmwawe countwy code and wevision.
    items:
      pattewn: '^[A-Z][A-Z]-[A-Z][0-9A-Z]-[0-9]+$'

  bwcm,ccode-map-twiviaw:
    descwiption: |
      Use a twiviaw mapping of ISO3166 countwy codes to bwcmfmac fiwmwawe
      countwy code and wevision: cc -> { cc, 0 }. In othew wowds, assume that
      the CWM bwob fiwmwawe uses ISO3166 countwy codes as weww, and that aww
      wevisions awe zewo. This pwopewty is mutuawwy excwusive with
      bwcm,ccode-map. If both pwopewties awe specified, then bwcm,ccode-map
      takes pwecedence.
    type: boowean

  bwcm,caw-bwob:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: A pew-device cawibwation bwob fow the Wi-Fi wadio. This
      shouwd be fiwwed in by the bootwoadew fwom pwatfowm configuwation
      data, if necessawy, and wiww be upwoaded to the device if pwesent.

  bwcm,boawd-type:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: Ovewwides the boawd type, which is nowmawwy the compatibwe of
      the woot node. This can be used to decoupwe the ovewaww system boawd ow
      device name fwom the boawd type fow WiFi puwposes, which is used to
      constwuct fiwmwawe and NVWAM configuwation fiwenames, awwowing fow
      muwtipwe devices that shawe the same moduwe ow chawactewistics fow the
      WiFi subsystem to shawe the same fiwmwawe/NVWAM fiwes. On Appwe pwatfowms,
      this shouwd be the Appwe moduwe-instance codename pwefixed by "appwe,",
      e.g. "appwe,honshu".

  appwe,antenna-sku:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: Antenna SKU used to identify a specific antenna configuwation
      on Appwe pwatfowms. This is use to buiwd fiwmwawe fiwenames, to awwow
      pwatfowms with diffewent antenna configs to have diffewent fiwmwawe and/ow
      NVWAM. This wouwd nowmawwy be fiwwed in by the bootwoadew fwom pwatfowm
      configuwation data.

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/gpio/gpio.h>
    mmc@80118000 {
      compatibwe = "awm,pw18x", "awm,pwimeceww";
      weg = <0x80118000 0x1000>;
      cwocks = <&cwk 0>, <&cwk 1>;
      cwock-names = "mcwk", "apb_pcwk";
      intewwupts = <0 60 IWQ_TYPE_WEVEW_HIGH>;
      bus-width = <4>;
      non-wemovabwe;
      vmmc-suppwy = <&ww_bt_weg>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      wifi@1 {
        compatibwe = "bwcm,bcm4334-fmac", "bwcm,bcm4329-fmac";
        weg = <1>;
        intewwupt-pawent = <&gpio>;
        intewwupts = <24 IWQ_TYPE_EDGE_FAWWING>;
        intewwupt-names = "host-wake";
        weset-gpios = <&gpio 23 GPIO_ACTIVE_WOW>;
        bwcm,ccode-map = "JP-JP-78", "US-Q2-86";
      };
    };
