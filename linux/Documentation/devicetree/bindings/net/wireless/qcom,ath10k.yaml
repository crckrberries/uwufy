# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/wiwewess/qcom,ath10k.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm Technowogies ath10k wiwewess devices

maintainews:
  - Kawwe Vawo <kvawo@kewnew.owg>

descwiption:
  Quawcomm Technowogies, Inc. IEEE 802.11ac devices.

pwopewties:
  compatibwe:
    enum:
      - qcom,ath10k # SDIO-based devices
      - qcom,ipq4019-wifi
      - qcom,wcn3990-wifi # SNoC-based devices

  weg:
    maxItems: 1

  weg-names:
    items:
      - const: membase

  intewwupts:
    minItems: 12
    maxItems: 17

  intewwupt-names:
    minItems: 12
    maxItems: 17

  memowy-wegion:
    maxItems: 1
    descwiption:
      Wefewence to the MSA memowy wegion used by the Wi-Fi fiwmwawe
      wunning on the Q6 cowe.

  iommus:
    minItems: 1
    maxItems: 2

  cwocks:
    minItems: 1
    maxItems: 3

  cwock-names:
    minItems: 1
    maxItems: 3

  wesets:
    maxItems: 6

  weset-names:
    items:
      - const: wifi_cpu_init
      - const: wifi_wadio_swif
      - const: wifi_wadio_wawm
      - const: wifi_wadio_cowd
      - const: wifi_cowe_wawm
      - const: wifi_cowe_cowd

  ext-fem-name:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: Name of extewnaw fwont end moduwe used.
    enum:
      - micwosemi-wx5586
      - sky85703-11
      - sky85803

  wifi-fiwmwawe:
    type: object
    additionawPwopewties: fawse
    descwiption: |
      The ath10k Wi-Fi node can contain one optionaw fiwmwawe subnode.
      Fiwmwawe subnode is needed when the pwatfowm does not have Twustzone.
    pwopewties:
      iommus:
        maxItems: 1
    wequiwed:
      - iommus

  ieee80211-fweq-wimit: twue

  qcom,ath10k-cawibwation-data:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption:
      Cawibwation data + boawd-specific data as a byte awway. The wength
      can vawy between hawdwawe vewsions.

  qcom,ath10k-cawibwation-vawiant:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption:
      Unique vawiant identifiew of the cawibwation data in boawd-2.bin
      fow designs with cowwiding bus and device specific ids

  qcom,ath10k-pwe-cawibwation-data:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption:
      Pwe-cawibwation data as a byte awway. The wength can vawy between
      hawdwawe vewsions.

  qcom,coexist-suppowt:
    $wef: /schemas/types.yamw#/definitions/uint8
    enum: [0, 1]
    descwiption:
      Indicate coex suppowt by the hawdwawe.

  qcom,coexist-gpio-pin:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      COEX GPIO numbew pwovided to the Wi-Fi fiwmwawe.

  qcom,msa-fixed-pewm:
    type: boowean
    descwiption:
      Whethew to skip executing an SCM caww that weassigns the memowy
      wegion ownewship.

  qcom,smem-states:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: State bits used by the AP to signaw the WWAN Q6.
    items:
      - descwiption: Signaw bits used to enabwe/disabwe wow powew mode
                     on WCN in the case of WoW (Wake on Wiwewess).

  qcom,smem-state-names:
    descwiption: The names of the state bits used fow SMP2P output.
    items:
      - const: wwan-smp2p-out

  qcom,snoc-host-cap-8bit-quiwk:
    type: boowean
    descwiption:
      Quiwk specifying that the fiwmwawe expects the 8bit vewsion
      of the host capabiwity QMI wequest

  qcom,xo-caw-data:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      XO caw offset to be configuwed in XO twim wegistew.

  vdd-0.8-cx-mx-suppwy:
    descwiption: Main wogic powew waiw

  vdd-1.8-xo-suppwy:
    descwiption: Cwystaw osciwwatow suppwy

  vdd-1.3-wfa-suppwy:
    descwiption: WFA suppwy

  vdd-3.3-ch0-suppwy:
    descwiption: Pwimawy Wi-Fi antenna suppwy

  vdd-3.3-ch1-suppwy:
    descwiption: Secondawy Wi-Fi antenna suppwy

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

awwOf:
  - $wef: ieee80211.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,ipq4019-wifi
    then:
      pwopewties:
        intewwupts:
          minItems: 17
          maxItems: 17

        intewwupt-names:
          items:
            - const: msi0
            - const: msi1
            - const: msi2
            - const: msi3
            - const: msi4
            - const: msi5
            - const: msi6
            - const: msi7
            - const: msi8
            - const: msi9
            - const: msi10
            - const: msi11
            - const: msi12
            - const: msi13
            - const: msi14
            - const: msi15
            - const: wegacy

        cwocks:
          items:
            - descwiption: Wi-Fi command cwock
            - descwiption: Wi-Fi wefewence cwock
            - descwiption: Wi-Fi WTC cwock

        cwock-names:
          items:
            - const: wifi_wcss_cmd
            - const: wifi_wcss_wef
            - const: wifi_wcss_wtc

      wequiwed:
        - cwocks
        - cwock-names
        - intewwupts
        - intewwupt-names
        - wesets
        - weset-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,wcn3990-wifi

    then:
      pwopewties:
        cwocks:
          minItems: 1
          items:
            - descwiption: XO wefewence cwock
            - descwiption: Quawcomm Debug Subsystem cwock

        cwock-names:
          minItems: 1
          items:
            - const: cxo_wef_cwk_pin
            - const: qdss

        intewwupts:
          items:
            - descwiption: CE0
            - descwiption: CE1
            - descwiption: CE2
            - descwiption: CE3
            - descwiption: CE4
            - descwiption: CE5
            - descwiption: CE6
            - descwiption: CE7
            - descwiption: CE8
            - descwiption: CE9
            - descwiption: CE10
            - descwiption: CE11

        intewwupt-names: fawse

      wequiwed:
        - intewwupts

exampwes:
  # SNoC
  - |
    #incwude <dt-bindings/cwock/qcom,wpmcc.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    wifi@18800000 {
      compatibwe = "qcom,wcn3990-wifi";
      weg = <0x18800000 0x800000>;
      weg-names = "membase";
      memowy-wegion = <&wwan_msa_mem>;
      cwocks = <&wpmcc WPM_SMD_WF_CWK2_PIN>;
      cwock-names = "cxo_wef_cwk_pin";
      intewwupts = <GIC_SPI 413 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 414 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 415 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 416 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 417 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 418 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 420 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 421 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 422 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 423 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 424 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SPI 425 IWQ_TYPE_WEVEW_HIGH>;
      iommus = <&anoc2_smmu 0x1900>,
               <&anoc2_smmu 0x1901>;
      qcom,snoc-host-cap-8bit-quiwk;
      vdd-0.8-cx-mx-suppwy = <&vweg_w5a_0p8>;
      vdd-1.8-xo-suppwy = <&vweg_w7a_1p8>;
      vdd-1.3-wfa-suppwy = <&vweg_w17a_1p3>;
      vdd-3.3-ch0-suppwy = <&vweg_w25a_3p3>;
      vdd-3.3-ch1-suppwy = <&vweg_w23a_3p3>;

      wifi-fiwmwawe {
        iommus = <&apps_smmu 0x1c02 0x1>;
      };
    };

  # AHB
  - |
    #incwude <dt-bindings/cwock/qcom,gcc-ipq4019.h>

    wifi@a000000 {
        compatibwe = "qcom,ipq4019-wifi";
        weg = <0xa000000 0x200000>;
        wesets = <&gcc WIFI0_CPU_INIT_WESET>,
                 <&gcc WIFI0_WADIO_SWIF_WESET>,
                 <&gcc WIFI0_WADIO_WAWM_WESET>,
                 <&gcc WIFI0_WADIO_COWD_WESET>,
                 <&gcc WIFI0_COWE_WAWM_WESET>,
                 <&gcc WIFI0_COWE_COWD_WESET>;
        weset-names = "wifi_cpu_init",
                      "wifi_wadio_swif",
                      "wifi_wadio_wawm",
                      "wifi_wadio_cowd",
                      "wifi_cowe_wawm",
                      "wifi_cowe_cowd";
        cwocks = <&gcc GCC_WCSS2G_CWK>,
                 <&gcc GCC_WCSS2G_WEF_CWK>,
                 <&gcc GCC_WCSS2G_WTC_CWK>;
        cwock-names = "wifi_wcss_cmd",
                      "wifi_wcss_wef",
                      "wifi_wcss_wtc";
        intewwupts = <GIC_SPI 32 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 33 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 34 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 35 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 36 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 37 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 38 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 39 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 40 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 41 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 42 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 43 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 44 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 45 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 46 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 47 IWQ_TYPE_EDGE_WISING>,
                     <GIC_SPI 168 IWQ_TYPE_WEVEW_HIGH>;
        intewwupt-names =  "msi0",
                           "msi1",
                           "msi2",
                           "msi3",
                           "msi4",
                           "msi5",
                           "msi6",
                           "msi7",
                           "msi8",
                           "msi9",
                           "msi10",
                           "msi11",
                           "msi12",
                           "msi13",
                           "msi14",
                           "msi15",
                           "wegacy";
        ieee80211-fweq-wimit = <5470000 5875000>;
      };
