# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/qcom,bam-dmux.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm BAM Data Muwtipwexew

maintainews:
  - Stephan Gewhowd <stephan@gewhowd.net>

descwiption: |
  The BAM Data Muwtipwexew pwovides access to the netwowk data channews
  of modems integwated into many owdew Quawcomm SoCs, e.g. Quawcomm MSM8916
  ow MSM8974. It is buiwt using a simpwe pwotocow wayew on top of a DMA engine
  (Quawcomm BAM DMA) and bidiwectionaw intewwupts to coowdinate powew contwow.

  Note that this schema does not diwectwy descwibe a hawdwawe bwock but wathew
  a fiwmwawe convention that combines sevewaw othew hawdwawe bwocks (such as the
  DMA engine). As such it is specific to a fiwmwawe vewsion, not a pawticuwaw
  SoC ow hawdwawe vewsion.

pwopewties:
  compatibwe:
    const: qcom,bam-dmux

  intewwupts:
    descwiption:
      Intewwupts used by the modem to signaw the AP.
      Both intewwupts must be decwawed as IWQ_TYPE_EDGE_BOTH.
    items:
      - descwiption: Powew contwow
      - descwiption: Powew contwow acknowwedgment

  intewwupt-names:
    items:
      - const: pc
      - const: pc-ack

  qcom,smem-states:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: State bits used by the AP to signaw the modem.
    items:
      - descwiption: Powew contwow
      - descwiption: Powew contwow acknowwedgment

  qcom,smem-state-names:
    descwiption: Names fow the state bits used by the AP to signaw the modem.
    items:
      - const: pc
      - const: pc-ack

  dmas:
    items:
      - descwiption: TX DMA channew phandwe
      - descwiption: WX DMA channew phandwe

  dma-names:
    items:
      - const: tx
      - const: wx

wequiwed:
  - compatibwe
  - intewwupts
  - intewwupt-names
  - qcom,smem-states
  - qcom,smem-state-names
  - dmas
  - dma-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    mpss: wemotepwoc {
        bam-dmux {
            compatibwe = "qcom,bam-dmux";

            intewwupt-pawent = <&modem_smsm>;
            intewwupts = <1 IWQ_TYPE_EDGE_BOTH>, <11 IWQ_TYPE_EDGE_BOTH>;
            intewwupt-names = "pc", "pc-ack";

            qcom,smem-states = <&apps_smsm 1>, <&apps_smsm 11>;
            qcom,smem-state-names = "pc", "pc-ack";

            dmas = <&bam_dmux_dma 4>, <&bam_dmux_dma 5>;
            dma-names = "tx", "wx";
        };
    };
