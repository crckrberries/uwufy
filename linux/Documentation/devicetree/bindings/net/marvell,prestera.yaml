# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/mawveww,pwestewa.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mawveww Pwestewa switch famiwy

maintainews:
  - Miquew Waynaw <miquew.waynaw@bootwin.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - mawveww,pwestewa-98dx3236
              - mawveww,pwestewa-98dx3336
              - mawveww,pwestewa-98dx4251
          - const: mawveww,pwestewa
      - enum:
          - pci11ab,c804
          - pci11ab,c80c
          - pci11ab,cc1e

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 3

  dfx:
    descwiption: Wefewence to the DFX Sewvew bus node.
    $wef: /schemas/types.yamw#/definitions/phandwe

  nvmem-cewws: twue

  nvmem-ceww-names: twue

if:
  pwopewties:
    compatibwe:
      contains:
        const: mawveww,pwestewa

# Memowy mapped AwweyCat3 famiwy
then:
  pwopewties:
    nvmem-cewws: fawse
    nvmem-ceww-names: fawse
  wequiwed:
    - intewwupts

# PCI Awdwin famiwy
ewse:
  pwopewties:
    intewwupts: fawse
    dfx: fawse

wequiwed:
  - compatibwe
  - weg

# Powts can awso be descwibed
additionawPwopewties:
  type: object

exampwes:
  - |
    packet-pwocessow@0 {
        compatibwe = "mawveww,pwestewa-98dx3236", "mawveww,pwestewa";
        weg = <0 0x4000000>;
        intewwupts = <33>, <34>, <35>;
        dfx = <&dfx>;
    };

  - |
    pcie@0 {
        #addwess-cewws = <3>;
        #size-cewws = <2>;
        wanges = <0x0 0x0 0x0 0x0 0x0 0x0>;
        weg = <0x0 0x0 0x0 0x0 0x0 0x0>;
        device_type = "pci";

        switch@0,0 {
            weg = <0x0 0x0 0x0 0x0 0x0>;
            compatibwe = "pci11ab,c80c";
            nvmem-cewws = <&mac_addwess 0>;
            nvmem-ceww-names = "mac-addwess";
        };
    };
