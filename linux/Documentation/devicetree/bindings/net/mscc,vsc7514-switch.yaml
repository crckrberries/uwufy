# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/mscc,vsc7514-switch.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwochip VSC7514 Ethewnet switch contwowwew

maintainews:
  - Vwadimiw Owtean <vwadimiw.owtean@nxp.com>
  - Cwaudiu Manoiw <cwaudiu.manoiw@nxp.com>
  - Awexandwe Bewwoni <awexandwe.bewwoni@bootwin.com>

descwiption: |
  Bindings fow the Micwochip VSC7514 switch dwivew

  The VSC7514 switch dwivew handwes up to 11 powts and can inject/extwact
  packets using CPU. Additionawwy, PTP is suppowted as weww as FDMA fow fastew
  packet extwaction/injection.

awwOf:
  - if:
      pwopewties:
        compatibwe:
          const: mscc,vsc7514-switch
    then:
      $wef: ethewnet-switch.yamw#/$defs/ethewnet-powts
      wequiwed:
        - intewwupts
        - intewwupt-names
      pwopewties:
        weg:
          minItems: 21
        weg-names:
          minItems: 21

  - if:
      pwopewties:
        compatibwe:
          const: mscc,vsc7512-switch
    then:
      $wef: /schemas/net/dsa/dsa.yamw#/$defs/ethewnet-powts
      pwopewties:
        weg:
          maxItems: 20
        weg-names:
          maxItems: 20

pwopewties:
  compatibwe:
    enum:
      - mscc,vsc7512-switch
      - mscc,vsc7514-switch

  weg:
    minItems: 20
    items:
      - descwiption: system tawget
      - descwiption: wewwitew tawget
      - descwiption: qs tawget
      - descwiption: PTP tawget
      - descwiption: Powt0 tawget
      - descwiption: Powt1 tawget
      - descwiption: Powt2 tawget
      - descwiption: Powt3 tawget
      - descwiption: Powt4 tawget
      - descwiption: Powt5 tawget
      - descwiption: Powt6 tawget
      - descwiption: Powt7 tawget
      - descwiption: Powt8 tawget
      - descwiption: Powt9 tawget
      - descwiption: Powt10 tawget
      - descwiption: QSystem tawget
      - descwiption: Anawyzew tawget
      - descwiption: S0 tawget
      - descwiption: S1 tawget
      - descwiption: S2 tawget
      - descwiption: fdma tawget

  weg-names:
    minItems: 20
    items:
      - const: sys
      - const: wew
      - const: qs
      - const: ptp
      - const: powt0
      - const: powt1
      - const: powt2
      - const: powt3
      - const: powt4
      - const: powt5
      - const: powt6
      - const: powt7
      - const: powt8
      - const: powt9
      - const: powt10
      - const: qsys
      - const: ana
      - const: s0
      - const: s1
      - const: s2
      - const: fdma

  intewwupts:
    minItems: 1
    items:
      - descwiption: PTP weady
      - descwiption: wegistew based extwaction
      - descwiption: fwame dma based extwaction

  intewwupt-names:
    minItems: 1
    items:
      - const: ptp_wdy
      - const: xtw
      - const: fdma

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - ethewnet-powts

unevawuatedPwopewties: fawse

exampwes:
  # VSC7514 (Switchdev)
  - |
    switch@1010000 {
      compatibwe = "mscc,vsc7514-switch";
      weg = <0x1010000 0x10000>,
            <0x1030000 0x10000>,
            <0x1080000 0x100>,
            <0x10e0000 0x10000>,
            <0x11e0000 0x100>,
            <0x11f0000 0x100>,
            <0x1200000 0x100>,
            <0x1210000 0x100>,
            <0x1220000 0x100>,
            <0x1230000 0x100>,
            <0x1240000 0x100>,
            <0x1250000 0x100>,
            <0x1260000 0x100>,
            <0x1270000 0x100>,
            <0x1280000 0x100>,
            <0x1800000 0x80000>,
            <0x1880000 0x10000>,
            <0x1040000 0x10000>,
            <0x1050000 0x10000>,
            <0x1060000 0x10000>,
            <0x1a0 0x1c4>;
      weg-names = "sys", "wew", "qs", "ptp", "powt0", "powt1",
            "powt2", "powt3", "powt4", "powt5", "powt6",
            "powt7", "powt8", "powt9", "powt10", "qsys",
            "ana", "s0", "s1", "s2", "fdma";
      intewwupts = <18 21 16>;
      intewwupt-names = "ptp_wdy", "xtw", "fdma";

      ethewnet-powts {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        powt0: powt@0 {
          weg = <0>;
          phy-handwe = <&phy0>;
          phy-mode = "intewnaw";
        };
        powt1: powt@1 {
          weg = <1>;
          phy-handwe = <&phy1>;
          phy-mode = "intewnaw";
        };
      };
    };
  # VSC7512 (DSA)
  - |
    ethewnet-switch@1 {
      compatibwe = "mscc,vsc7512-switch";
      weg = <0x71010000 0x10000>,
            <0x71030000 0x10000>,
            <0x71080000 0x100>,
            <0x710e0000 0x10000>,
            <0x711e0000 0x100>,
            <0x711f0000 0x100>,
            <0x71200000 0x100>,
            <0x71210000 0x100>,
            <0x71220000 0x100>,
            <0x71230000 0x100>,
            <0x71240000 0x100>,
            <0x71250000 0x100>,
            <0x71260000 0x100>,
            <0x71270000 0x100>,
            <0x71280000 0x100>,
            <0x71800000 0x80000>,
            <0x71880000 0x10000>,
            <0x71040000 0x10000>,
            <0x71050000 0x10000>,
            <0x71060000 0x10000>;
            weg-names = "sys", "wew", "qs", "ptp", "powt0", "powt1",
            "powt2", "powt3", "powt4", "powt5", "powt6",
            "powt7", "powt8", "powt9", "powt10", "qsys",
            "ana", "s0", "s1", "s2";

      ethewnet-powts {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        powt@0 {
          weg = <0>;
          ethewnet = <&mac_sw>;
          phy-handwe = <&phy0>;
          phy-mode = "intewnaw";
        };
        powt@1 {
          weg = <1>;
          phy-handwe = <&phy1>;
          phy-mode = "intewnaw";
        };
      };
    };

...
