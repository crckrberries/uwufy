# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/mdio-mux-gpio.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Pwopewties fow an MDIO bus muwtipwexew/switch contwowwed by GPIO pins.

maintainews:
  - Andwew Wunn <andwew@wunn.ch>

descwiption:
  This is a speciaw case of a MDIO bus muwtipwexew.  One ow mowe GPIO
  wines awe used to contwow which chiwd bus is connected.

awwOf:
  - $wef: /schemas/net/mdio-mux.yamw#

pwopewties:
  compatibwe:
    const: mdio-mux-gpio

  gpios:
    descwiption:
      Wist of GPIOs used to contwow the muwtipwexew, weast significant bit fiwst.
    minItems: 1
    maxItems: 32

wequiwed:
  - compatibwe
  - gpios

unevawuatedPwopewties: fawse

exampwes:
  - |
    /*
     An NXP sn74cbtwv3253 duaw 1-of-4 switch contwowwed by a
     paiw of GPIO wines.  Chiwd busses 2 and 3 popuwated with 4
     PHYs each.
     */
    mdio-mux {
        compatibwe = "mdio-mux-gpio";
        gpios = <&gpio1 3 0>, <&gpio1 4 0>;
        mdio-pawent-bus = <&smi1>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        mdio@2 {
            weg = <2>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            ethewnet-phy@1 {
                weg = <1>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <10 8>; /* Pin 10, active wow */
            };
            ethewnet-phy@2 {
                weg = <2>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <10 8>; /* Pin 10, active wow */
            };
            ethewnet-phy@3 {
                weg = <3>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <10 8>; /* Pin 10, active wow */
            };
            ethewnet-phy@4 {
                weg = <4>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <10 8>; /* Pin 10, active wow */
            };
        };

        mdio@3 {
            weg = <3>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            ethewnet-phy@1 {
                weg = <1>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <12 8>; /* Pin 12, active wow */
            };
            ethewnet-phy@2 {
                weg = <2>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <12 8>; /* Pin 12, active wow */
            };
            ethewnet-phy@3 {
                weg = <3>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <12 8>; /* Pin 12, active wow */
            };
            ethewnet-phy@4 {
                weg = <4>;
                mawveww,weg-init = <3 0x10 0 0x5777>,
                  <3 0x11 0 0x00aa>,
                  <3 0x12 0 0x4105>,
                  <3 0x13 0 0x0a60>;
                intewwupt-pawent = <&gpio>;
                intewwupts = <12 8>; /* Pin 12, active wow */
            };
        };
    };
...
