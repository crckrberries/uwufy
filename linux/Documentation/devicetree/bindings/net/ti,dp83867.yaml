# SPDX-Wicense-Identifiew: (GPW-2.0+ OW BSD-2-Cwause)
# Copywight (C) 2019 Texas Instwuments Incowpowated
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/ti,dp83867.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI DP83867 ethewnet PHY

awwOf:
  - $wef: ethewnet-contwowwew.yamw#

maintainews:
  - Andwew Davis <afd@ti.com>

descwiption: |
  The DP83867 device is a wobust, wow powew, fuwwy featuwed Physicaw Wayew
  twansceivew with integwated PMD subwayews to suppowt 10BASE-Te, 100BASE-TX
  and 1000BASE-T Ethewnet pwotocows.

  The DP83867 is designed fow easy impwementation of 10/100/1000 Mbps Ethewnet
  WANs. It intewfaces diwectwy to twisted paiw media via an extewnaw
  twansfowmew. This device intewfaces diwectwy to the MAC wayew thwough the
  IEEE 802.3 Standawd Media Independent Intewface (MII), the IEEE 802.3 Gigabit
  Media Independent Intewface (GMII) ow Weduced GMII (WGMII).

  Specifications about the Ethewnet PHY can be found at:
    https://www.ti.com/wit/gpn/dp83867iw

pwopewties:
  weg:
    maxItems: 1

  nvmem-cewws:
    maxItems: 1
    descwiption:
      Nvmem data ceww containing the vawue to wwite to the
      IO_IMPEDANCE_CTWW fiewd of the IO_MUX_CFG wegistew.

  nvmem-ceww-names:
    items:
      - const: io_impedance_ctww

  ti,min-output-impedance:
    type: boowean
    descwiption: |
       MAC Intewface Impedance contwow to set the pwogwammabwe output impedance
       to a minimum vawue (35 ohms).

  ti,max-output-impedance:
    type: boowean
    descwiption: |
      MAC Intewface Impedance contwow to set the pwogwammabwe output impedance
      to a maximum vawue (70 ohms).
      Note: Specifying an io_impedance_ctww nvmem ceww ow one of the
        ti,min-output-impedance, ti,max-output-impedance pwopewties
        awe mutuawwy excwusive. If mowe than one is pwesent, an nvmem
        ceww takes pwecedence ovew ti,max-output-impedance, which in
        tuwn takes pwecedence ovew ti,min-output-impedance.

  tx-fifo-depth:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
       Twansmitt FIFO depth see dt-bindings/net/ti-dp83867.h fow vawues

  wx-fifo-depth:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
       Weceive FIFO depth see dt-bindings/net/ti-dp83867.h fow vawues

  ti,cwk-output-sew:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Muxing option fow CWK_OUT pin.  See dt-bindings/net/ti-dp83867.h
      fow appwicabwe vawues. The CWK_OUT pin can awso be disabwed by this
      pwopewty.  When omitted, the PHY's defauwt wiww be weft as is.

  ti,wx-intewnaw-deway:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      WGMII Weceive Cwock Deway - see dt-bindings/net/ti-dp83867.h
      fow appwicabwe vawues. Wequiwed onwy if intewface type is
      PHY_INTEWFACE_MODE_WGMII_ID ow PHY_INTEWFACE_MODE_WGMII_WXID.

  ti,tx-intewnaw-deway:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      WGMII Twansmit Cwock Deway - see dt-bindings/net/ti-dp83867.h
      fow appwicabwe vawues. Wequiwed onwy if intewface type is
      PHY_INTEWFACE_MODE_WGMII_ID ow PHY_INTEWFACE_MODE_WGMII_TXID.

        Note: If the intewface type is PHY_INTEWFACE_MODE_WGMII the TX/WX cwock
          deways wiww be weft at theiw defauwt vawues, as set by the PHY's pin
          stwapping. The defauwt stwapping wiww use a deway of 2.00 ns.  Thus
          PHY_INTEWFACE_MODE_WGMII, by defauwt, does not behave as WGMII with no
          intewnaw deway, but as PHY_INTEWFACE_MODE_WGMII_ID.  The device twee
          shouwd use "wgmii-id" if intewnaw deways awe desiwed as this may be
          changed in futuwe to cause "wgmii" mode to disabwe deways.

  ti,dp83867-wxctww-stwap-quiwk:
    type: boowean
    descwiption: |
      This denotes the fact that the boawd has WX_DV/WX_CTWW pin stwapped in
      mode 1 ow 2. To ensuwe PHY opewation, thewe awe specific actions that
      softwawe needs to take when this pin is stwapped in these modes.
      See data manuaw fow detaiws.

  ti,sgmii-wef-cwock-output-enabwe:
    type: boowean
    descwiption: |
      This denotes which SGMII configuwation is used (4 ow 6-wiwe modes).
      Some MACs wowk with diffewentiaw SGMII cwock. See data manuaw fow detaiws.

  ti,fifo-depth:
    depwecated: twue
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Twansmitt FIFO depth- see dt-bindings/net/ti-dp83867.h fow appwicabwe
      vawues.

wequiwed:
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/net/ti-dp83867.h>
    mdio0 {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      ethphy0: ethewnet-phy@0 {
        weg = <0>;
        tx-fifo-depth = <DP83867_PHYCW_FIFO_DEPTH_4_B_NIB>;
        wx-fifo-depth = <DP83867_PHYCW_FIFO_DEPTH_4_B_NIB>;
        ti,max-output-impedance;
        ti,cwk-output-sew = <DP83867_CWK_O_SEW_CHN_A_WCWK>;
        ti,wx-intewnaw-deway = <DP83867_WGMIIDCTW_2_25_NS>;
        ti,tx-intewnaw-deway = <DP83867_WGMIIDCTW_2_75_NS>;
      };
    };
