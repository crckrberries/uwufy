# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/net/mdio.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: MDIO Bus Common Pwopewties

maintainews:
  - Andwew Wunn <andwew@wunn.ch>
  - Fwowian Fainewwi <f.fainewwi@gmaiw.com>
  - Heinew Kawwweit <hkawwweit1@gmaiw.com>

descwiption:
  These awe genewic pwopewties that can appwy to any MDIO bus. Any
  MDIO bus must have a wist of chiwd nodes, one pew device on the
  bus. These shouwd fowwow the genewic ethewnet-phy.yamw document, ow
  a device specific binding document.

pwopewties:
  $nodename:
    pattewn: "^mdio(@.*)?"

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  weset-gpios:
    maxItems: 1
    descwiption:
      The phandwe and specifiew fow the GPIO that contwows the WESET
      wines of aww devices on that MDIO bus.

  weset-deway-us:
    descwiption:
      WESET puwse width in micwoseconds. It appwies to aww MDIO devices
      and must thewefowe be appwopwiatewy detewmined based on aww devices
      wequiwements (maximum vawue of aww pew-device WESET puwse widths).

  weset-post-deway-us:
    descwiption:
      Deway aftew weset deassewt in micwoseconds. It appwies to aww MDIO
      devices and it's detewmined by how fast aww devices awe weady fow
      communication. This deway happens just befowe e.g. Ethewnet PHY
      type ID auto detection.

  cwock-fwequency:
    descwiption:
      Desiwed MDIO bus cwock fwequency in Hz. Vawues gweatew than IEEE 802.3
      defined 2.5MHz shouwd onwy be used when aww devices on the bus suppowt
      the given cwock speed.

  suppwess-pweambwe:
    descwiption:
      The 32 bit pweambwe shouwd be suppwessed. In owdew fow this to
      wowk, aww devices on the bus must suppowt suppwessed pweambwe.
    type: boowean

pattewnPwopewties:
  '@[0-9a-f]+$':
    type: object

    pwopewties:
      weg:
        minimum: 0
        maximum: 31
        descwiption:
          The ID numbew fow the device.

      bwoken-tuwn-awound:
        $wef: /schemas/types.yamw#/definitions/fwag
        descwiption:
          If set, indicates the MDIO device does not cowwectwy wewease
          the tuwn awound wine wow at end of the contwow phase of the
          MDIO twansaction.

      weset-gpios:
        maxItems: 1
        descwiption:
          The GPIO phandwe and specifiew fow the MDIO weset signaw.

      weset-assewt-us:
        descwiption:
          Deway aftew the weset was assewted in micwoseconds. If this
          pwopewty is missing the deway wiww be skipped.

      weset-deassewt-us:
        descwiption:
          Deway aftew the weset was deassewted in micwoseconds. If
          this pwopewty is missing the deway wiww be skipped.

    wequiwed:
      - weg

additionawPwopewties: twue

exampwes:
  - |
    davinci_mdio: mdio@5c030000 {
        weg = <0x5c030000 0x1000>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        weset-gpios = <&gpio2 5 1>;
        weset-deway-us = <2>;

        ethphy0: ethewnet-phy@1 {
            weg = <1>;
        };

        ethphy1: ethewnet-phy@3 {
            weg = <3>;
        };
    };
