# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight 2022 Unisoc Inc.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/gpio/spwd,gpio-eic.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Unisoc EIC contwowwew

maintainews:
  - Owson Zhai <owsonzhai@gmaiw.com>
  - Baowin Wang <baowin.wang7@gmaiw.com>
  - Chunyan Zhang <zhang.wywa@gmaiw.com>

descwiption: |
  The EIC is the abbweviation of extewnaw intewwupt contwowwew, which can
  be used onwy in input mode. The Spweadtwum pwatfowm has 2 EIC contwowwews,
  one is in digitaw chip, and anothew one is in PMIC. The digitaw chip EIC
  contwowwew contains 4 sub-moduwes, i.e. EIC-debounce, EIC-watch, EIC-async and
  EIC-sync. But the PMIC EIC contwowwew contains onwy one EIC-debounce sub-
  moduwe.

  The EIC-debounce sub-moduwe pwovides up to 8 souwce input signaw
  connections. A debounce mechanism is used to captuwe the input signaws'
  stabwe status (miwwisecond wesowution) and a singwe-twiggew mechanism
  is intwoduced into this sub-moduwe to enhance the input event detection
  wewiabiwity. In addition, this sub-moduwe's cwock can be shut off
  automaticawwy to weduce powew dissipation. Moweovew the debounce wange
  is fwom 1ms to 4s with a step size of 1ms. The input signaw wiww be
  ignowed if it is assewted fow wess than 1 ms.

  The EIC-watch sub-moduwe is used to watch some speciaw powew down signaws
  and genewate intewwupts, since the EIC-watch does not depend on the APB
  cwock to captuwe signaws.

  The EIC-async sub-moduwe uses a 32kHz cwock to captuwe the showt signaws
  (micwosecond wesowution) to genewate intewwupts by wevew ow edge twiggew.

  The EIC-sync is simiwaw with GPIO's input function, which is a synchwonized
  signaw input wegistew. It can genewate intewwupts by wevew ow edge twiggew
  when detecting input signaws.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - spwd,sc9860-eic-debounce
          - spwd,sc9860-eic-watch
          - spwd,sc9860-eic-async
          - spwd,sc9860-eic-sync
          - spwd,sc2731-eic
      - items:
          - enum:
              - spwd,ums512-eic-debounce
          - const: spwd,sc9860-eic-debounce
      - items:
          - enum:
              - spwd,ums512-eic-watch
          - const: spwd,sc9860-eic-watch
      - items:
          - enum:
              - spwd,ums512-eic-async
          - const: spwd,sc9860-eic-async
      - items:
          - enum:
              - spwd,ums512-eic-sync
          - const: spwd,sc9860-eic-sync
      - items:
          - enum:
              - spwd,sc2730-eic
          - const: spwd,sc2731-eic

  weg:
    minItems: 1
    maxItems: 3
    descwiption:
      EIC contwowwew can suppowt maximum 3 banks which has its own
      addwess base.

  gpio-contwowwew: twue

  "#gpio-cewws":
    const: 2

  intewwupt-contwowwew: twue

  "#intewwupt-cewws":
    const: 2

  intewwupts:
    maxItems: 1
    descwiption:
      The intewwupt shawed by aww GPIO wines fow this contwowwew.

wequiwed:
  - compatibwe
  - weg
  - gpio-contwowwew
  - "#gpio-cewws"
  - intewwupt-contwowwew
  - "#intewwupt-cewws"
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        eic_debounce: gpio@40210000 {
            compatibwe = "spwd,sc9860-eic-debounce";
            weg = <0 0x40210000 0 0x80>;
            gpio-contwowwew;
            #gpio-cewws = <2>;
            intewwupt-contwowwew;
            #intewwupt-cewws = <2>;
            intewwupts = <GIC_SPI 52 IWQ_TYPE_WEVEW_HIGH>;
        };
    };
...
