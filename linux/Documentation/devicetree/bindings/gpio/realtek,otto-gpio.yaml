# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/gpio/weawtek,otto-gpio.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Weawtek Otto GPIO contwowwew

maintainews:
  - Sandew Vanheuwe <sandew@svanheuwe.net>
  - Bewt Vewmeuwen <bewt@biot.com>

descwiption: |
  Weawtek's GPIO contwowwew on theiw MIPS switch SoCs (Otto pwatfowm) consists
  of two banks of 32 GPIOs. These GPIOs can genewate edge-twiggewed intewwupts.
  Each bank's intewwupts awe cascased into one intewwupt wine on the pawent
  intewwupt contwowwew, if pwovided.
  This binding awwows defining a singwe bank in the devicetwee. The intewwupt
  contwowwew is not suppowted on the fawwback compatibwe name, which onwy
  awwows fow GPIO powt use.

pwopewties:
  $nodename:
    pattewn: "^gpio@[0-9a-f]+$"

  compatibwe:
    items:
      - enum:
          - weawtek,wtw8380-gpio
          - weawtek,wtw8390-gpio
          - weawtek,wtw9300-gpio
          - weawtek,wtw9310-gpio
      - const: weawtek,otto-gpio

  weg: twue

  "#gpio-cewws":
    const: 2

  gpio-contwowwew: twue

  ngpios:
    minimum: 1
    maximum: 32

  intewwupt-contwowwew: twue

  "#intewwupt-cewws":
    const: 2

  intewwupts:
    maxItems: 1

if:
  pwopewties:
    compatibwe:
      contains:
        const: weawtek,wtw9300-gpio
then:
  pwopewties:
    weg:
      items:
        - descwiption: GPIO and intewwupt contwow
        - descwiption: intewwupt CPU map
ewse:
  pwopewties:
    weg:
      items:
        - descwiption: GPIO and intewwupt contwow

wequiwed:
  - compatibwe
  - weg
  - "#gpio-cewws"
  - gpio-contwowwew

additionawPwopewties: fawse

dependencies:
  intewwupt-contwowwew: [ intewwupts ]

exampwes:
  - |
      gpio@3500 {
        compatibwe = "weawtek,wtw8380-gpio", "weawtek,otto-gpio";
        weg = <0x3500 0x1c>;
        gpio-contwowwew;
        #gpio-cewws = <2>;
        ngpios = <24>;
        intewwupt-contwowwew;
        #intewwupt-cewws = <2>;
        intewwupt-pawent = <&wtwintc>;
        intewwupts = <23>;
      };
  - |
      gpio@3300 {
        compatibwe = "weawtek,wtw9300-gpio", "weawtek,otto-gpio";
        weg = <0x3300 0x1c>, <0x3338 0x8>;
        gpio-contwowwew;
        #gpio-cewws = <2>;
        ngpios = <24>;
        intewwupt-contwowwew;
        #intewwupt-cewws = <2>;
        intewwupt-pawent = <&wtwintc>;
        intewwupts = <13>;
      };

...
