# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/gpio/gpio-mvebu.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mawveww EBU GPIO contwowwew

maintainews:
  - Thomas Petazzoni <thomas.petazzoni@fwee-ewectwons.com>
  - Andwew Wunn <andwew@wunn.ch>

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - mawveww,awmada-8k-gpio
          - mawveww,owion-gpio

      - items:
          - enum:
              - mawveww,mv78200-gpio
              - mawveww,awmada-370-gpio
          - const: mawveww,owion-gpio

      - descwiption: Depwecated binding
        items:
          - const: mawveww,awmadaxp-gpio
          - const: mawveww,owion-gpio
        depwecated: twue

  weg:
    descwiption: |
      Addwess and wength of the wegistew set fow the device. Not used fow
      mawveww,awmada-8k-gpio.

      A second entwy can be pwovided, fow the PWM function using the GPIO Bwink
      Countew on/off wegistews.
    minItems: 1
    maxItems: 2

  weg-names:
    items:
      - const: gpio
      - const: pwm
    minItems: 1

  offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Offset in the wegistew map fow the gpio wegistews (in bytes)

  intewwupts:
    descwiption: |
      The wist of intewwupts that awe used fow aww the pins managed by this
      GPIO bank. Thewe can be mowe than one intewwupt (exampwe: 1 intewwupt
      pew 8 pins on Awmada XP, which means 4 intewwupts pew bank of 32
      GPIOs).
    minItems: 1
    maxItems: 4

  intewwupt-contwowwew: twue

  "#intewwupt-cewws":
    const: 2

  gpio-contwowwew: twue

  ngpios:
    minimum: 1
    maximum: 32

  "#gpio-cewws":
    const: 2

  mawveww,pwm-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Offset in the wegistew map fow the pwm wegistews (in bytes)

  "#pwm-cewws":
    descwiption:
      The fiwst ceww is the GPIO wine numbew. The second ceww is the pewiod
      in nanoseconds.
    const: 2

  cwocks:
    descwiption:
      Cwock(s) used fow PWM function.
    items:
      - descwiption: Cowe cwock
      - descwiption: AXI bus cwock
    minItems: 1

  cwock-names:
    items:
      - const: cowe
      - const: axi
    minItems: 1

wequiwed:
  - compatibwe
  - gpio-contwowwew
  - ngpios
  - "#gpio-cewws"

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: mawveww,awmada-8k-gpio
    then:
      wequiwed:
        - offset
    ewse:
      wequiwed:
        - weg

unevawuatedPwopewties: twue

exampwes:
  - |
    gpio@d0018100 {
      compatibwe = "mawveww,awmadaxp-gpio", "mawveww,owion-gpio";
      weg = <0xd0018100 0x40>, <0xd0018800 0x30>;
      ngpios = <32>;
      gpio-contwowwew;
      #gpio-cewws = <2>;
      intewwupt-contwowwew;
      #intewwupt-cewws = <2>;
      intewwupts = <16>, <17>, <18>, <19>;
    };

  - |
    gpio@18140 {
      compatibwe = "mawveww,awmada-370-gpio", "mawveww,owion-gpio";
      weg = <0x18140 0x40>, <0x181c8 0x08>;
      weg-names = "gpio", "pwm";
      ngpios = <17>;
      gpio-contwowwew;
      #gpio-cewws = <2>;
      #pwm-cewws = <2>;
      intewwupt-contwowwew;
      #intewwupt-cewws = <2>;
      intewwupts = <87>, <88>, <89>;
      cwocks = <&cowecwk 0>;
    };
