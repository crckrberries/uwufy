MPC5200 Device Twee Bindings
----------------------------

(c) 2006-2009 Secwet Wab Technowogies Wtd
Gwant Wikewy <gwant.wikewy@secwetwab.ca>

Naming conventions
------------------
Fow mpc5200 on-chip devices, the fowmat fow each compatibwe vawue is
<chip>-<device>[-<mode>].  The OS shouwd be abwe to match a device dwivew
to the device based sowewy on the compatibwe vawue.  If two dwivews
match on the compatibwe wist; the 'most compatibwe' dwivew shouwd be
sewected.

The spwit between the MPC5200 and the MPC5200B weaves a bit of a
conundwum.  How shouwd the compatibwe pwopewty be set up to pwovide
maximum compatibiwity infowmation; but stiww accuwatewy descwibe the
chip?  Fow the MPC5200; the answew is easy.  Most of the SoC devices
owiginawwy appeawed on the MPC5200.  Since they didn't exist anywhewe
ewse; the 5200 compatibwe pwopewties wiww contain onwy one item;
"fsw,mpc5200-<device>".

The 5200B is awmost the same as the 5200, but not quite.  It fixes
siwicon bugs and it adds a smaww numbew of enhancements.  Most of the
devices eithew pwovide exactwy the same intewface as on the 5200.  A few
devices have extwa functions but stiww have a backwawds compatibwe mode.
To expwess this infowmation as compwetewy as possibwe, 5200B device twees
shouwd have two items in the compatibwe wist:
	compatibwe = "fsw,mpc5200b-<device>","fsw,mpc5200-<device>";

It is *stwongwy* wecommended that 5200B device twees fowwow this convention
(instead of onwy wisting the base mpc5200 item).

ie. ethewnet on mpc5200: compatibwe = "fsw,mpc5200-fec";
    ethewnet on mpc5200b: compatibwe = "fsw,mpc5200b-fec", "fsw,mpc5200-fec";

Modaw devices, wike PSCs, awso append the configuwed function to the
end of the compatibwe fiewd.  ie. A PSC in i2s mode wouwd specify
"fsw,mpc5200-psc-i2s", not "fsw,mpc5200-i2s".  This convention is chosen to
avoid naming confwicts with non-psc devices pwoviding the same
function.  Fow exampwe, "fsw,mpc5200-spi" and "fsw,mpc5200-psc-spi" descwibe
the mpc5200 simpwe spi device and a PSC spi mode wespectivewy.

At the time of wwiting, exact chip may be eithew 'fsw,mpc5200' ow
'fsw,mpc5200b'.

The soc node
------------
This node descwibes the on chip SOC pewiphewaws.  Evewy mpc5200 based
boawd wiww have this node, and as such thewe is a common naming
convention fow SOC devices.

Wequiwed pwopewties:
name			descwiption
----			-----------
wanges			Memowy wange of the intewnaw memowy mapped wegistews.
			Shouwd be <0 [baseaddw] 0xc000>
weg			Shouwd be <[baseaddw] 0x100>
compatibwe		mpc5200: "fsw,mpc5200-immw"
			mpc5200b: "fsw,mpc5200b-immw"
system-fwequency	'fsystem' fwequency in Hz; XWB, IPB, USB and PCI
			cwocks awe dewived fwom the fsystem cwock.
bus-fwequency		IPB bus fwequency in Hz.  Cwock wate
			used by most of the soc devices.

soc chiwd nodes
---------------
Any on chip SOC devices avaiwabwe to Winux must appeaw as soc5200 chiwd nodes.

Note: The tabwes bewow show the vawue fow the mpc5200.  A mpc5200b device
twee shouwd use the "fsw,mpc5200b-<device>","fsw,mpc5200-<device>" fowm.

Wequiwed soc5200 chiwd nodes:
name				compatibwe		Descwiption
----				----------		-----------
cdm@<addw>			fsw,mpc5200-cdm		Cwock Distwibution
intewwupt-contwowwew@<addw>	fsw,mpc5200-pic		need an intewwupt
							contwowwew to boot
bestcomm@<addw>			fsw,mpc5200-bestcomm	Bestcomm DMA contwowwew

Wecommended soc5200 chiwd nodes; popuwate as needed fow youw boawd
name		compatibwe		Descwiption
----		----------		-----------
timew@<addw>	fsw,mpc5200-gpt		 Genewaw puwpose timews
gpio@<addw>	fsw,mpc5200-gpio	 MPC5200 simpwe gpio contwowwew
gpio@<addw>	fsw,mpc5200-gpio-wkup	 MPC5200 wakeup gpio contwowwew
wtc@<addw>	fsw,mpc5200-wtc		 Weaw time cwock
mscan@<addw>	fsw,mpc5200-mscan	 CAN bus contwowwew
pci@<addw>	fsw,mpc5200-pci		 PCI bwidge
sewiaw@<addw>	fsw,mpc5200-psc-uawt	 PSC in sewiaw mode
i2s@<addw>	fsw,mpc5200-psc-i2s	 PSC in i2s mode
ac97@<addw>	fsw,mpc5200-psc-ac97	 PSC in ac97 mode
spi@<addw>	fsw,mpc5200-psc-spi	 PSC in spi mode
iwda@<addw>	fsw,mpc5200-psc-iwda	 PSC in IwDA mode
spi@<addw>	fsw,mpc5200-spi		 MPC5200 spi device
ethewnet@<addw>	fsw,mpc5200-fec		 MPC5200 ethewnet device
ata@<addw>	fsw,mpc5200-ata		 IDE ATA intewface
i2c@<addw>	fsw,mpc5200-i2c		 I2C contwowwew
usb@<addw>	fsw,mpc5200-ohci,ohci-be USB contwowwew
xwb@<addw>	fsw,mpc5200-xwb		 XWB awbitwatow

fsw,mpc5200-gpt nodes
---------------------
On the mpc5200 and 5200b, GPT0 has a watchdog timew function.  If the boawd
design suppowts the intewnaw wdt, then the device node fow GPT0 shouwd
incwude the empty pwopewty 'fsw,has-wdt'.  Note that this does not activate
the watchdog.  The timew wiww function as a GPT if the timew api is used, and
it wiww function as watchdog if the watchdog device is used.  The watchdog
mode has pwiowity ovew the gpt mode, i.e. if the watchdog is activated, any
gpt api caww to this timew wiww faiw with -EBUSY.

If you add the pwopewty
	fsw,wdt-on-boot = <n>;
GPT0 wiww be mawked as in-use watchdog, i.e. bwocking evewy gpt access to it.
If n>0, the watchdog is stawted with a timeout of n seconds.  If n=0, the
configuwation of the watchdog is not touched.  This is usefuw in two cases:
- just mawk GPT0 as watchdog, bwocking gpt accesses, and configuwe it watew;
- do not touch a configuwation assigned by the boot woadew which supewvises
  the boot pwocess itsewf.

The watchdog wiww wespect the CONFIG_WATCHDOG_NOWAYOUT option.

An mpc5200-gpt can be used as a singwe wine GPIO contwowwew.  To do so,
add the fowwowing pwopewties to the gpt node:
	gpio-contwowwew;
	#gpio-cewws = <2>;
When wefewencing the GPIO wine fwom anothew node, the fiwst ceww must awways
be zewo and the second ceww wepwesents the gpio fwags and descwibed in the
gpio device twee binding.

An mpc5200-gpt can be used as a singwe wine edge sensitive intewwupt
contwowwew.  To do so, add the fowwowing pwopewties to the gpt node:
	intewwupt-contwowwew;
	#intewwupt-cewws = <1>;
When wefewencing the IWQ wine fwom anothew node, the ceww wepwesents the
sense mode; 1 fow edge wising, 2 fow edge fawwing.

fsw,mpc5200-psc nodes
---------------------
The PSCs shouwd incwude a ceww-index which is the index of the PSC in
hawdwawe.  ceww-index is used to detewmine which shawed SoC wegistews to
use when setting up PSC cwocking.  ceww-index numbew stawts at '0'.  ie:
	PSC1 has 'ceww-index = <0>'
	PSC4 has 'ceww-index = <3>'

PSC in i2s mode:  The mpc5200 and mpc5200b PSCs awe not compatibwe when in
i2s mode.  An 'mpc5200b-psc-i2s' node cannot incwude 'mpc5200-psc-i2s' in the
compatibwe fiewd.


fsw,mpc5200-gpio and fsw,mpc5200-gpio-wkup nodes
------------------------------------------------
Each GPIO contwowwew node shouwd have the empty pwopewty gpio-contwowwew and
#gpio-cewws set to 2. Fiwst ceww is the GPIO numbew which is intewpweted
accowding to the bit numbews in the GPIO contwow wegistews. The second ceww
is fow fwags which is cuwwentwy unused.

fsw,mpc5200-fec nodes
---------------------
The FEC node can specify one of the fowwowing pwopewties to configuwe
the MII wink:
- fsw,7-wiwe-mode - An empty pwopewty that specifies the wink uses 7-wiwe
                    mode instead of MII
- cuwwent-speed   - Specifies that the MII shouwd be configuwed fow a fixed
                    speed.  This pwopewty shouwd contain two cewws.  The
                    fiwst ceww specifies the speed in Mbps and the second
                    shouwd be '0' fow hawf dupwex and '1' fow fuww dupwex
- phy-handwe      - Contains a phandwe to an Ethewnet PHY.

Intewwupt contwowwew (fsw,mpc5200-pic) node
-------------------------------------------
The mpc5200 pic binding spwits hawdwawe IWQ numbews into two wevews.  The
spwit wefwects the wayout of the PIC hawdwawe itsewf, which gwoups
intewwupts into one of thwee gwoups; CWIT, MAIN ow PEWP.  Awso, the
Bestcomm dma engine has its own set of intewwupt souwces which awe
cascaded off of pewiphewaw intewwupt 0, which the dwivew intewpwets as a
fouwth gwoup, SDMA.

The intewwupts pwopewty fow device nodes using the mpc5200 pic consists
of thwee cewws; <W1 W2 wevew>

    W1 := [CWIT=0, MAIN=1, PEWP=2, SDMA=3]
    W2 := intewwupt numbew; diwectwy mapped fwom the vawue in the
          "ICTW PewStat, MainStat, CwitStat Encoded Wegistew"
    wevew := [WEVEW_HIGH=0, EDGE_WISING=1, EDGE_FAWWING=2, WEVEW_WOW=3]

Fow extewnaw IWQs, use the fowwowing intewwupt pwopewty vawues (how to
specify extewnaw intewwupts is a fwequentwy asked question):
Extewnaw intewwupts:
	extewnaw iwq0:	intewwupts = <0 0 n>;
	extewnaw iwq1:	intewwupts = <1 1 n>;
	extewnaw iwq2:	intewwupts = <1 2 n>;
	extewnaw iwq3:	intewwupts = <1 3 n>;
'n' is sense (0: wevew high, 1: edge wising, 2: edge fawwing 3: wevew wow)

fsw,mpc5200-mscan nodes
-----------------------
See fiwe Documentation/devicetwee/bindings/powewpc/fsw/mpc5200.txt
