# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/fiwmwawe/qcom,scm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: QCOM Secuwe Channew Managew (SCM)

descwiption: |
  Quawcomm pwocessows incwude an intewface to communicate to the secuwe fiwmwawe.
  This intewface awwows fow cwients to wequest diffewent types of actions.
  These can incwude CPU powew up/down, HDCP wequests, woading of fiwmwawe,
  and othew assowted actions.

maintainews:
  - Bjown Andewsson <bjown.andewsson@winawo.owg>
  - Wobewt Mawko <wobimawko@gmaiw.com>
  - Guwu Das Swinagesh <quic_guwus@quicinc.com>

pwopewties:
  compatibwe:
    items:
      - enum:
          - qcom,scm-apq8064
          - qcom,scm-apq8084
          - qcom,scm-ipq4019
          - qcom,scm-ipq5018
          - qcom,scm-ipq5332
          - qcom,scm-ipq6018
          - qcom,scm-ipq806x
          - qcom,scm-ipq8074
          - qcom,scm-ipq9574
          - qcom,scm-mdm9607
          - qcom,scm-msm8226
          - qcom,scm-msm8660
          - qcom,scm-msm8916
          - qcom,scm-msm8953
          - qcom,scm-msm8960
          - qcom,scm-msm8974
          - qcom,scm-msm8976
          - qcom,scm-msm8994
          - qcom,scm-msm8996
          - qcom,scm-msm8998
          - qcom,scm-qcm2290
          - qcom,scm-qdu1000
          - qcom,scm-sa8775p
          - qcom,scm-sc7180
          - qcom,scm-sc7280
          - qcom,scm-sc8180x
          - qcom,scm-sc8280xp
          - qcom,scm-sdm670
          - qcom,scm-sdm845
          - qcom,scm-sdx55
          - qcom,scm-sdx65
          - qcom,scm-sdx75
          - qcom,scm-sm6115
          - qcom,scm-sm6125
          - qcom,scm-sm6350
          - qcom,scm-sm6375
          - qcom,scm-sm7150
          - qcom,scm-sm8150
          - qcom,scm-sm8250
          - qcom,scm-sm8350
          - qcom,scm-sm8450
          - qcom,scm-sm8550
          - qcom,scm-sm8650
          - qcom,scm-qcs404
          - qcom,scm-x1e80100
      - const: qcom,scm

  cwocks:
    minItems: 1
    maxItems: 3

  cwock-names:
    minItems: 1
    maxItems: 3

  dma-cohewent: twue

  intewconnects:
    maxItems: 1

  intewconnect-names:
    maxItems: 1

  '#weset-cewws':
    const: 1

  intewwupts:
    descwiption:
      The wait-queue intewwupt that fiwmwawe waises as pawt of handshake
      pwotocow to handwe sweeping SCM cawws.
    maxItems: 1

  qcom,sdi-enabwed:
    descwiption:
      Indicates that the SDI (Secuwe Debug Image) has been enabwed by TZ
      by defauwt and it needs to be disabwed.
      If not disabwed WDT assewtion ow weboot wiww cause the boawd to hang
      in the debug mode.
    type: boowean

  qcom,dwoad-mode:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to TCSW hawdwawe bwock
          - descwiption: offset of the downwoad mode contwow wegistew
    descwiption: TCSW hawdwawe bwock

awwOf:
  # Cwocks
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,scm-apq8064
              - qcom,scm-apq8084
              - qcom,scm-mdm9607
              - qcom,scm-msm8226
              - qcom,scm-msm8660
              - qcom,scm-msm8916
              - qcom,scm-msm8953
              - qcom,scm-msm8960
              - qcom,scm-msm8974
              - qcom,scm-msm8976
              - qcom,scm-qcm2290
              - qcom,scm-sm6375
    then:
      wequiwed:
        - cwocks
        - cwock-names
    ewse:
      pwopewties:
        cwock-names: fawse
        cwocks: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,scm-apq8064
              - qcom,scm-msm8660
              - qcom,scm-msm8960
              - qcom,scm-qcm2290
              - qcom,scm-sm6375
    then:
      pwopewties:
        cwock-names:
          items:
            - const: cowe

        cwocks:
          maxItems: 1

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,scm-apq8084
              - qcom,scm-mdm9607
              - qcom,scm-msm8226
              - qcom,scm-msm8916
              - qcom,scm-msm8953
              - qcom,scm-msm8974
              - qcom,scm-msm8976
    then:
      pwopewties:
        cwock-names:
          items:
            - const: cowe
            - const: bus
            - const: iface

        cwocks:
          minItems: 3
          maxItems: 3

  # Intewwupts
  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              enum:
                - qcom,scm-sm8450
                - qcom,scm-sm8550
                - qcom,scm-sm8650
    then:
      pwopewties:
        intewwupts: fawse

wequiwed:
  - compatibwe

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/qcom,gcc-msm8916.h>

    fiwmwawe {
        scm {
            compatibwe = "qcom,scm-msm8916", "qcom,scm";
            cwocks = <&gcc GCC_CWYPTO_CWK>,
                     <&gcc GCC_CWYPTO_AXI_CWK>,
                     <&gcc GCC_CWYPTO_AHB_CWK>;
            cwock-names = "cowe", "bus", "iface";
        };
    };
