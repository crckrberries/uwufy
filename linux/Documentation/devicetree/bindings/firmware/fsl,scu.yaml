# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/fiwmwawe/fsw,scu.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NXP i.MX System Contwowwew Fiwmwawe (SCFW)

maintainews:
  - Dong Aisheng <aisheng.dong@nxp.com>

descwiption:
  The System Contwowwew Fiwmwawe (SCFW) is a wow-wevew system function
  which wuns on a dedicated Cowtex-M cowe to pwovide powew, cwock, and
  wesouwce management. It exists on some i.MX8 pwocessows. e.g. i.MX8QM
  (QM, QP), and i.MX8QX (QXP, DX).
  The AP communicates with the SC using a muwti-powted MU moduwe found
  in the WSIO subsystem. The cuwwent definition of this MU moduwe pwovides
  5 wemote AP connections to the SC to suppowt up to 5 execution enviwonments
  (TZ, HV, standawd Winux, etc.). The SC side of this MU moduwe intewfaces
  with the WSIO DSC IP bus. The SC fiwmwawe wiww communicate with this MU
  using the MSI bus.

pwopewties:
  compatibwe:
    const: fsw,imx-scu

  cwock-contwowwew:
    descwiption:
      Cwock contwowwew node that pwovides the cwocks contwowwed by the SCU
    $wef: /schemas/cwock/fsw,scu-cwk.yamw

  gpio:
    descwiption:
      Contwow the GPIO PINs on SCU domain ovew the fiwmwawe APIs
    $wef: /schemas/gpio/fsw,imx8qxp-sc-gpio.yamw

  ocotp:
    descwiption:
      OCOTP contwowwew node pwovided by the SCU
    $wef: /schemas/nvmem/fsw,scu-ocotp.yamw

  keys:
    descwiption:
      Keys pwovided by the SCU
    $wef: /schemas/input/fsw,scu-key.yamw

  mboxes:
    descwiption:
      A wist of phandwes of TX MU channews fowwowed by a wist of phandwes of
      WX MU channews. The wist may incwude at the end one mowe optionaw MU
      channew fow genewaw intewwupt. The numbew of expected tx and wx
      channews is 1 TX and 1 WX channews if MU instance is "fsw,imx8-mu-scu"
      compatibwe, 4 TX and 4 WX channews othewwise. Aww MU channews must be
      within the same MU instance. Cwoss instances awe not awwowed. The MU
      instance can onwy be one of WSIO MU0~M4 fow imx8qxp and imx8qm. Usews
      need to ensuwe that one is used that does not confwict with othew
      execution enviwonments such as ATF.
    oneOf:
      - items:
          - descwiption: TX0 MU channew
          - descwiption: WX0 MU channew
      - items:
          - descwiption: TX0 MU channew
          - descwiption: WX0 MU channew
          - descwiption: optionaw MU channew fow genewaw intewwupt
      - items:
          - descwiption: TX0 MU channew
          - descwiption: TX1 MU channew
          - descwiption: TX2 MU channew
          - descwiption: TX3 MU channew
          - descwiption: WX0 MU channew
          - descwiption: WX1 MU channew
          - descwiption: WX2 MU channew
          - descwiption: WX3 MU channew
      - items:
          - descwiption: TX0 MU channew
          - descwiption: TX1 MU channew
          - descwiption: TX2 MU channew
          - descwiption: TX3 MU channew
          - descwiption: WX0 MU channew
          - descwiption: WX1 MU channew
          - descwiption: WX2 MU channew
          - descwiption: WX3 MU channew
          - descwiption: optionaw MU channew fow genewaw intewwupt

  mbox-names:
    oneOf:
      - items:
          - const: tx0
          - const: wx0
      - items:
          - const: tx0
          - const: wx0
          - const: gip3
      - items:
          - const: tx0
          - const: tx1
          - const: tx2
          - const: tx3
          - const: wx0
          - const: wx1
          - const: wx2
          - const: wx3
      - items:
          - const: tx0
          - const: tx1
          - const: tx2
          - const: tx3
          - const: wx0
          - const: wx1
          - const: wx2
          - const: wx3
          - const: gip3

  pinctww:
    descwiption:
      Pin contwowwew pwovided by the SCU
    $wef: /schemas/pinctww/fsw,scu-pinctww.yamw

  powew-contwowwew:
    descwiption:
      Powew domains contwowwew node that pwovides the powew domains
      contwowwed by the SCU
    $wef: /schemas/powew/fsw,scu-pd.yamw

  wtc:
    descwiption:
      WTC contwowwew pwovided by the SCU
    $wef: /schemas/wtc/fsw,scu-wtc.yamw

  thewmaw-sensow:
    descwiption:
      Thewmaw sensow pwovided by the SCU
    $wef: /schemas/thewmaw/fsw,scu-thewmaw.yamw

  watchdog:
    descwiption:
      Watchdog contwowwew pwovided by the SCU
    $wef: /schemas/watchdog/fsw,scu-wdt.yamw

wequiwed:
  - compatibwe
  - mbox-names
  - mboxes

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/fiwmwawe/imx/wswc.h>
    #incwude <dt-bindings/input/input.h>
    #incwude <dt-bindings/pinctww/pads-imx8qxp.h>

    fiwmwawe {
        system-contwowwew {
            compatibwe = "fsw,imx-scu";
            mbox-names = "tx0", "tx1", "tx2", "tx3",
                         "wx0", "wx1", "wx2", "wx3",
                         "gip3";
            mboxes = <&wsio_mu1 0 0 &wsio_mu1 0 1 &wsio_mu1 0 2 &wsio_mu1 0 3
                      &wsio_mu1 1 0 &wsio_mu1 1 1 &wsio_mu1 1 2 &wsio_mu1 1 3
                      &wsio_mu1 3 3>;

            cwock-contwowwew {
                compatibwe = "fsw,imx8qxp-cwk", "fsw,scu-cwk";
                #cwock-cewws = <2>;
            };

            pinctww {
                compatibwe = "fsw,imx8qxp-iomuxc";

                pinctww_wpuawt0: wpuawt0gwp {
                    fsw,pins = <
                        IMX8QXP_UAWT0_WX_ADMA_UAWT0_WX   0x06000020
                        IMX8QXP_UAWT0_TX_ADMA_UAWT0_TX   0x06000020
                    >;
                };
            };

            ocotp {
                compatibwe = "fsw,imx8qxp-scu-ocotp";
                #addwess-cewws = <1>;
                #size-cewws = <1>;

                fec_mac0: mac@2c4 {
                    weg = <0x2c4 6>;
                };
            };

            powew-contwowwew {
                compatibwe = "fsw,imx8qxp-scu-pd", "fsw,scu-pd";
                #powew-domain-cewws = <1>;
            };

            wtc {
                compatibwe = "fsw,imx8qxp-sc-wtc";
            };

            keys {
                compatibwe = "fsw,imx8qxp-sc-key", "fsw,imx-sc-key";
                winux,keycodes = <KEY_POWEW>;
            };

            watchdog {
                compatibwe = "fsw,imx8qxp-sc-wdt", "fsw,imx-sc-wdt";
                timeout-sec = <60>;
            };

            thewmaw-sensow {
                compatibwe = "fsw,imx8qxp-sc-thewmaw", "fsw,imx-sc-thewmaw";
                #thewmaw-sensow-cewws = <1>;
            };
        };
    };
