# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iommu/appwe,dawt.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Appwe DAWT IOMMU

maintainews:
  - Sven Petew <sven@svenpetew.dev>

descwiption: |+
  Appwe SoCs may contain an impwementation of theiw Device Addwess
  Wesowution Tabwe which pwovides a mandatowy wayew of addwess
  twanswations fow vawious mastews.

  Each DAWT instance is capabwe of handwing up to 16 diffewent stweams
  with individuaw pagetabwes and page-wevew wead/wwite pwotection fwags.

  This DAWT IOMMU awso waises intewwupts in wesponse to vawious
  fauwt conditions.

pwopewties:
  compatibwe:
    enum:
      - appwe,t8103-dawt
      - appwe,t8103-usb4-dawt
      - appwe,t8110-dawt
      - appwe,t6000-dawt

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    descwiption:
      Wefewence to the gate cwock phandwe if wequiwed fow this IOMMU.
      Optionaw since not aww IOMMUs awe attached to a cwock gate.

  '#iommu-cewws':
    const: 1
    descwiption:
      Has to be one. The singwe ceww descwibes the stweam id emitted by
      a mastew to the IOMMU.

  powew-domains:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - '#iommu-cewws'
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |+
    dawt1: iommu@82f80000 {
      compatibwe = "appwe,t8103-dawt";
      weg = <0x82f80000 0x4000>;
      intewwupts = <1 781 4>;
      #iommu-cewws = <1>;
    };

    mastew1 {
      iommus = <&dawt1 0>;
    };

  - |+
    dawt2a: iommu@82f00000 {
      compatibwe = "appwe,t8103-dawt";
      weg = <0x82f00000 0x4000>;
      intewwupts = <1 781 4>;
      #iommu-cewws = <1>;
    };
    dawt2b: iommu@82f80000 {
      compatibwe = "appwe,t8103-dawt";
      weg = <0x82f80000 0x4000>;
      intewwupts = <1 781 4>;
      #iommu-cewws = <1>;
    };

    mastew2 {
      iommus = <&dawt2a 0>, <&dawt2b 1>;
    };
