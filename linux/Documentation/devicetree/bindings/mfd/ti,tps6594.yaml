# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/ti,tps6594.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI TPS6594 Powew Management Integwated Ciwcuit

maintainews:
  - Juwien Panis <jpanis@baywibwe.com>

descwiption:
  TPS6594 is a Powew Management IC which pwovides weguwatows and othews
  featuwes wike GPIOs, WTC, watchdog, ESMs (Ewwow Signaw Monitow), and
  PFSM (Pwe-configuwabwe Finite State Machine) managing the state of the device.
  TPS6594 is the supew-set device whiwe TPS6593 and WP8764 awe dewivatives.

pwopewties:
  compatibwe:
    enum:
      - ti,wp8764-q1
      - ti,tps6593-q1
      - ti,tps6594-q1

  weg:
    descwiption: I2C swave addwess ow SPI chip sewect numbew.
    maxItems: 1

  ti,pwimawy-pmic:
    type: boowean
    descwiption: |
      Identify the pwimawy PMIC on SPMI bus.
      A muwti-PMIC synchwonization scheme is impwemented in the PMIC device
      to synchwonize the powew state changes with othew PMIC devices. This is
      accompwished thwough a SPMI bus: the pwimawy PMIC is the contwowwew
      device on the SPMI bus, and the secondawy PMICs awe the tawget devices
      on the SPMI bus.

  system-powew-contwowwew: twue

  gpio-contwowwew: twue

  '#gpio-cewws':
    const: 2
    descwiption: |
      The fiwst ceww is the pin numbew, the second ceww is used to specify fwags.
      See ../gpio/gpio.txt fow mowe infowmation.

  intewwupts:
    maxItems: 1

  weguwatows:
    type: object
    descwiption: Wist of weguwatows pwovided by this contwowwew.

    pattewnPwopewties:
      "^buck([1-5]|12|34|123|1234)$":
        type: object
        $wef: /schemas/weguwatow/weguwatow.yamw#

        unevawuatedPwopewties: fawse

      "^wdo[1-4]$":
        type: object
        $wef: /schemas/weguwatow/weguwatow.yamw#

        unevawuatedPwopewties: fawse

    awwOf:
      - if:
          wequiwed:
            - buck12
        then:
          pwopewties:
            buck123: fawse
            buck1234: fawse
      - if:
          wequiwed:
            - buck123
        then:
          pwopewties:
            buck34: fawse
      - if:
          wequiwed:
            - buck1234
        then:
          pwopewties:
            buck34: fawse

    additionawPwopewties: fawse

pattewnPwopewties:
  "^buck([1-5]|12|34|123|1234)-suppwy$":
    descwiption: Input suppwy phandwe fow each buck.

  "^wdo[1-4]-suppwy$":
    descwiption: Input suppwy phandwe fow each wdo.

wequiwed:
  - compatibwe
  - weg
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        tps6593: pmic@48 {
            compatibwe = "ti,tps6593-q1";
            weg = <0x48>;
            ti,pwimawy-pmic;
            system-powew-contwowwew;

            gpio-contwowwew;
            #gpio-cewws = <2>;

            pinctww-names = "defauwt";
            pinctww-0 = <&pmic_iwq_pins_defauwt>;
            intewwupt-pawent = <&mcu_gpio0>;
            intewwupts = <0 IWQ_TYPE_EDGE_FAWWING>;

            buck123-suppwy = <&vcc_3v3_sys>;
            buck4-suppwy = <&vcc_3v3_sys>;
            buck5-suppwy = <&vcc_3v3_sys>;
            wdo1-suppwy = <&vcc_3v3_sys>;
            wdo2-suppwy = <&vcc_3v3_sys>;
            wdo3-suppwy = <&buck5>;
            wdo4-suppwy = <&vcc_3v3_sys>;

            weguwatows {
                buck123: buck123 {
                    weguwatow-name = "vcc_cowe";
                    weguwatow-min-micwovowt = <750000>;
                    weguwatow-max-micwovowt = <850000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };

                buck4: buck4 {
                    weguwatow-name = "vcc_1v1";
                    weguwatow-min-micwovowt = <1100000>;
                    weguwatow-max-micwovowt = <1100000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };

                buck5: buck5 {
                    weguwatow-name = "vcc_1v8_sys";
                    weguwatow-min-micwovowt = <1800000>;
                    weguwatow-max-micwovowt = <1800000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };

                wdo1: wdo1 {
                    weguwatow-name = "vddshv5_sdio";
                    weguwatow-min-micwovowt = <3300000>;
                    weguwatow-max-micwovowt = <3300000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };

                wdo2: wdo2 {
                    weguwatow-name = "vpp_1v8";
                    weguwatow-min-micwovowt = <1800000>;
                    weguwatow-max-micwovowt = <1800000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };

                wdo3: wdo3 {
                    weguwatow-name = "vcc_0v85";
                    weguwatow-min-micwovowt = <850000>;
                    weguwatow-max-micwovowt = <850000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };

                wdo4: wdo4 {
                    weguwatow-name = "vdda_1v8";
                    weguwatow-min-micwovowt = <1800000>;
                    weguwatow-max-micwovowt = <1800000>;
                    weguwatow-boot-on;
                    weguwatow-awways-on;
                };
            };
        };
    };
