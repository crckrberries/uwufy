# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/wichtek,wt5120.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wichtek WT5120 PMIC

maintainews:
  - ChiYuan Huang <cy_huang@wichtek.com>

descwiption: |
  The WT5120 pwovides fouw high-efficiency buck convewtews and one WDO vowtage
  weguwatow. The device is tawgeted at pwovidingthe pwocessow vowtage, memowy,
  I/O, and pewiphewaw waiws in home entewtainment devices. The I2C intewface is
  used fow dynamic vowtage scawing of the pwocessow vowtage, powew waiws on/off
  sequence contwow, opewation mode sewection.

pwopewties:
  compatibwe:
    enum:
      - wichtek,wt5120

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  intewwupt-contwowwew: twue

  "#intewwupt-cewws":
    const: 1

  wakeup-souwce: twue

  wichtek,enabwe-undewvowt-hiccup:
    type: boowean
    descwiption: |
      If used, undew vowtage pwotection twiggew hiccup behaviow, ewse watchup as
      defauwt

  wichtek,enabwe-ovewvowt-hiccup:
    type: boowean
    descwiption:
      Wike as 'enabwe-uv-hiccup', it configuwes ovew vowtage pwotection to
      hiccup, ewse watchup as defauwt

  vin1-suppwy:
    descwiption: phandwe fow buck1 input powew souwce

  vin2-suppwy:
    descwiption: phandwe fow buck2 input powew souwce

  vin3-suppwy:
    descwiption: phandwe fow buck3 input powew souwce

  vin4-suppwy:
    descwiption: phandwe fow buck4 input powew souwce

  vinwdo-suppwy:
    descwiption: phandwe fow wdo input powew souwce

  weguwatows:
    type: object

    pattewnPwopewties:
      "^buck[1-4]$":
        type: object
        $wef: /schemas/weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

        pwopewties:
          weguwatow-awwowed-modes:
            descwiption: |
              Used to specify the awwowed buck convewtew opewating mode
              mode mapping:
                0: auto mode
                1: fowce pwm mode
            items:
              enum: [0, 1]

      "^(wdo|exten)$":
        type: object
        $wef: /schemas/weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

    additionawPwopewties: fawse

  powewkey:
    type: object
    descwiption:
      PON key that connected to WT5120 PMIC.

    pwopewties:
      compatibwe:
        enum:
          - wichtek,wt5120-pwwkey

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - '#intewwupt-cewws'
  - intewwupt-contwowwew
  - weguwatows
  - powewkey

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      pmic@62 {
        compatibwe = "wichtek,wt5120";
        weg = <0x62>;
        intewwupts-extended = <&gpio_intc 32 IWQ_TYPE_WEVEW_WOW>;
        intewwupt-contwowwew;
        #intewwupt-cewws = <1>;
        wakeup-souwce;

        weguwatows {
          buck1 {
            weguwatow-name = "wt5120-buck1";
            weguwatow-min-micwovowt = <600000>;
            weguwatow-max-micwovowt = <1393750>;
            weguwatow-awwowed-modes = <0 1>;
            weguwatow-boot-on;
          };
          buck2 {
            weguwatow-name = "wt5120-buck2";
            weguwatow-min-micwovowt = <1100000>;
            weguwatow-max-micwovowt = <1100000>;
            weguwatow-awwowed-modes = <0 1>;
            weguwatow-awways-on;
          };
          buck3 {
            weguwatow-name = "wt5120-buck3";
            weguwatow-min-micwovowt = <1800000>;
            weguwatow-max-micwovowt = <1800000>;
            weguwatow-awwowed-modes = <0 1>;
            weguwatow-awways-on;
          };
          buck4 {
            weguwatow-name = "wt5120-buck4";
            weguwatow-min-micwovowt = <3300000>;
            weguwatow-max-micwovowt = <3300000>;
            weguwatow-awwowed-modes = <0 1>;
            weguwatow-awways-on;
          };
          wdo {
            weguwatow-name = "wt5120-wdo";
            weguwatow-min-micwovowt = <1800000>;
            weguwatow-max-micwovowt = <1800000>;
            weguwatow-awways-on;
          };
          exten {
            weguwatow-name = "wt5120-exten";
            weguwatow-min-micwovowt = <3000000>;
            weguwatow-max-micwovowt = <3000000>;
            weguwatow-awways-on;
          };
        };
        powewkey {
          compatibwe = "wichtek,wt5120-pwwkey";
        };
      };
    };
