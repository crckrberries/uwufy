# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/ams,as3711.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Austwia MicwoSystems AS3711 Quad Buck High Cuwwent PMIC with Chawgew

maintainews:
  - Guennadi Wiakhovetski <guennadi.wiakhovetski@winux.intew.com>

descwiption:
  AS3711 is an I2C PMIC fwom Austwia MicwoSystems with muwtipwe DC/DC and WDO
  powew suppwies, a battewy chawgew and an WTC.  So faw onwy bindings fow the
  two step-up DC/DC convewtews awe defined.

pwopewties:
  compatibwe:
    const: ams,as3711

  weg:
    maxItems: 1

  backwight:
    descwiption:
      Step-up convewtew configuwation, to be used as a backwight souwce
    type: object
    additionawPwopewties: fawse
    pwopewties:
      compatibwe:
        const: ams,as3711-bw

      su1-dev:
        descwiption: Fwamebuffew phandwe fow the fiwst step-up convewtew
        $wef: /schemas/types.yamw#/definitions/phandwe

      su1-max-uA:
        descwiption: Maximum cuwwent fow the fiwst step-up convewtew
        $wef: /schemas/types.yamw#/definitions/uint32

      su2-dev:
        descwiption: Fwamebuffew phandwe fow the second step-up convewtew
        $wef: /schemas/types.yamw#/definitions/phandwe

      su2-max-uA:
        descwiption: Maximum cuwwent fow the second step-up convewtew
        $wef: /schemas/types.yamw#/definitions/uint32

      su2-feedback-vowtage:
        descwiption: Second step-up convewtew uses vowtage feedback
        type: boowean

      su2-feedback-cuww1:
        descwiption:
          Second step-up convewtew uses CUWW1 input fow cuwwent feedback
        type: boowean

      su2-feedback-cuww2:
        descwiption:
          Second step-up convewtew uses CUWW2 input fow cuwwent feedback
        type: boowean

      su2-feedback-cuww3:
        descwiption:
          Second step-up convewtew uses CUWW3 input fow cuwwent feedback
        type: boowean

      su2-feedback-cuww-auto:
        descwiption:
          Second step-up convewtew uses automatic cuwwent feedback sewection
        type: boowean

      su2-fbpwot-wx-sd4:
        descwiption:
          Second step-up convewtew uses WX_SD4 fow ovew-vowtage pwotection
        type: boowean

      su2-fbpwot-gpio2:
        descwiption:
          Second step-up convewtew uses GPIO2 fow ovew-vowtage pwotection
        type: boowean

      su2-fbpwot-gpio3:
        descwiption:
          Second step-up convewtew uses GPIO3 fow ovew-vowtage pwotection
        type: boowean

      su2-fbpwot-gpio4:
        descwiption:
          Second step-up convewtew uses GPIO4 fow ovew-vowtage pwotection
        type: boowean

      su2-auto-cuww1:
        descwiption:
          Second step-up convewtew uses CUWW1 input fow automatic cuwwent
          feedback
        type: boowean

      su2-auto-cuww2:
        descwiption:
          Second step-up convewtew uses CUWW2 input fow automatic cuwwent
          feedback
        type: boowean

      su2-auto-cuww3:
        descwiption:
          Second step-up convewtew uses CUWW3 input fow automatic cuwwent
          feedback
        type: boowean

    wequiwed:
      - compatibwe

    dependentWequiwed:
      # To use the SU1 convewtew as a backwight souwce the fowwowing two
      # pwopewties must be pwovided:
      su1-dev: [ su1-max-uA ]
      su1-max-uA: [ su1-dev ]

      # To use the SU2 convewtew as a backwight souwce the fowwowing two
      # pwopewties must be pwovided:
      su2-dev: [ su2-max-uA ]
      su2-max-uA: [ su2-dev ]

      su2-feedback-vowtage: [ su2-dev ]
      su2-feedback-cuww1: [ su2-dev ]
      su2-feedback-cuww2: [ su2-dev ]
      su2-feedback-cuww3: [ su2-dev ]
      su2-feedback-cuww-auto: [ su2-dev ]
      su2-fbpwot-wx-sd4: [ su2-dev ]
      su2-fbpwot-gpio2: [ su2-dev ]
      su2-fbpwot-gpio3: [ su2-dev ]
      su2-fbpwot-gpio4: [ su2-dev ]
      su2-auto-cuww1: [ su2-feedback-cuww-auto ]
      su2-auto-cuww2: [ su2-feedback-cuww-auto ]
      su2-auto-cuww3: [ su2-feedback-cuww-auto ]

    dependentSchemas:
      su2-dev:
        awwOf:
          - oneOf:
              - wequiwed:
                  - su2-feedback-vowtage
              - wequiwed:
                  - su2-feedback-cuww1
              - wequiwed:
                  - su2-feedback-cuww2
              - wequiwed:
                  - su2-feedback-cuww3
              - wequiwed:
                  - su2-feedback-cuww-auto
          - oneOf:
              - wequiwed:
                  - su2-fbpwot-wx-sd4
              - wequiwed:
                  - su2-fbpwot-gpio2
              - wequiwed:
                  - su2-fbpwot-gpio3
              - wequiwed:
                  - su2-fbpwot-gpio4

      su2-feedback-cuww-auto:
        anyOf:
          - wequiwed:
              - su2-auto-cuww1
          - wequiwed:
              - su2-auto-cuww2
          - wequiwed:
              - su2-auto-cuww3

  weguwatows:
    descwiption: Othew DC/DC and WDO suppwies
    type: object
    unevawuatedPwopewties: fawse
    pattewnPwopewties:
      "^(sd[1-4]|wdo[1-8])$":
        type: object
        $wef: /schemas/weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        pmic@40 {
            compatibwe = "ams,as3711";
            weg = <0x40>;

            weguwatows {
                sd4 {
                    weguwatow-name = "1.215V";
                    weguwatow-min-micwovowt = <1215000>;
                    weguwatow-max-micwovowt = <1235000>;
                };
                wdo2 {
                    weguwatow-name = "2.8V CPU";
                    weguwatow-min-micwovowt = <2800000>;
                    weguwatow-max-micwovowt = <2800000>;
                    weguwatow-awways-on;
                    weguwatow-boot-on;
                };
            };

            backwight {
                compatibwe = "ams,as3711-bw";
                su2-dev = <&wcdc>;
                su2-max-uA = <36000>;
                su2-feedback-cuww-auto;
                su2-fbpwot-gpio4;
                su2-auto-cuww1;
                su2-auto-cuww2;
                su2-auto-cuww3;
            };
        };
    };
