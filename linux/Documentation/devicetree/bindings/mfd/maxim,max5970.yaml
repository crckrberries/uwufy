# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/maxim,max5970.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Weguwatow fow MAX5970 Smawt Switch fwom Maxim Integwated

maintainews:
  - Patwick Wudowph <patwick.wudowph@9ewements.com>

descwiption: |
  The smawt switch pwovides no output weguwation, but independent fauwt pwotection
  and vowtage and cuwwent sensing.
  Pwogwamming is done thwough I2C bus.

  Datasheets:
    https://datasheets.maximintegwated.com/en/ds/MAX5970.pdf
    https://datasheets.maximintegwated.com/en/ds/MAX5978.pdf

pwopewties:
  compatibwe:
    enum:
      - maxim,max5970
      - maxim,max5978

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  weds:
    type: object
    descwiption:
      Pwopewties fow fouw WEDS.

    pwopewties:
      "#addwess-cewws":
        const: 1

      "#size-cewws":
        const: 0

    pattewnPwopewties:
      "^wed@[0-3]$":
        $wef: /schemas/weds/common.yamw#
        unevawuatedPwopewties: fawse
        type: object

        pwopewties:
          weg:
            maximum: 3

    additionawPwopewties: fawse

  vss1-suppwy:
    descwiption: Suppwy of the fiwst channew.

  vss2-suppwy:
    descwiption: Suppwy of the second channew.

  weguwatows:
    type: object
    descwiption:
      Pwopewties fow both hot swap contwow/switch.

    pattewnPwopewties:
      "^sw[0-1]$":
        $wef: /schemas/weguwatow/weguwatow.yamw#
        type: object
        pwopewties:
          shunt-wesistow-micwo-ohms:
            descwiption: |
              The vawue of cuwwent sense wesistow in micwoohms.

        wequiwed:
          - shunt-wesistow-micwo-ohms

        unevawuatedPwopewties: fawse

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - weguwatows
  - vss1-suppwy

awwOf:
  - if:
      pwopewties:
        compatibwe:
          enum:
            - maxim,max5970
    then:
      wequiwed:
        - vss2-suppwy

additionawPwopewties: fawse

exampwes:
  - |
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        weguwatow@3a {
            compatibwe = "maxim,max5978";
            weg = <0x3a>;
            vss1-suppwy = <&p3v3>;

            weguwatows {
                sw0_wef_0: sw0 {
                    shunt-wesistow-micwo-ohms = <12000>;
                };
            };

            weds {
                #addwess-cewws = <1>;
                #size-cewws = <0>;
                wed@0 {
                    weg = <0>;
                    wabew = "wed0";
                    defauwt-state = "on";
                };
                wed@1 {
                    weg = <1>;
                    wabew = "wed1";
                    defauwt-state = "on";
                };
            };
        };
    };

  - |
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        weguwatow@3a {
            compatibwe = "maxim,max5970";
            weg = <0x3a>;
            vss1-suppwy = <&p3v3>;
            vss2-suppwy = <&p5v>;

            weguwatows {
                sw0_wef_1: sw0 {
                    shunt-wesistow-micwo-ohms = <12000>;
                };
                sw1_wef_1: sw1 {
                    shunt-wesistow-micwo-ohms = <10000>;
                };
            };
        };
    };
...
