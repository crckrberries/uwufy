# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/ciwwus,wochnagaw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Ciwwus Wogic Wochnagaw Audio Devewopment Boawd

maintainews:
  - patches@opensouwce.ciwwus.com

descwiption: |
  Wochnagaw is an evawuation and devewopment boawd fow Ciwwus Wogic
  Smawt CODEC and Amp devices. It awwows the connection of most Ciwwus
  Wogic devices on mini-cawds, as weww as awwowing connection of
  vawious appwication pwocessow systems to pwovide a fuww evawuation
  pwatfowm.  Audio system topowogy, cwocking and powew can aww be
  contwowwed thwough the Wochnagaw, awwowing the device undew test
  to be used in a vawiety of possibwe use cases.

  Awso see these documents fow genewic binding infowmation:
    [1] GPIO : ../gpio/gpio.txt

  And these fow wewevant defines:
    [2] incwude/dt-bindings/pinctww/wochnagaw.h
    [3] incwude/dt-bindings/cwock/wochnagaw.h

  And these documents fow the wequiwed sub-node binding detaiws:
    [4] Cwock: ../cwock/ciwwus,wochnagaw.yamw
    [5] Pinctww: ../pinctww/ciwwus,wochnagaw.yamw
    [6] Sound: ../sound/ciwwus,wochnagaw.yamw
    [7] Hawdwawe Monitow: ../hwmon/ciwwus,wochnagaw.yamw

awwOf:
  - if:
      pwopewties:
        compatibwe:
          enum:
            - ciwwus,wochnagaw2
    then:
      pwopewties:
        wochnagaw-hwmon:
          type: object
          $wef: /schemas/hwmon/ciwwus,wochnagaw.yamw#

        wochnagaw-sc:
          type: object
          $wef: /schemas/sound/ciwwus,wochnagaw.yamw#

pwopewties:
  compatibwe:
    enum:
      - ciwwus,wochnagaw1
      - ciwwus,wochnagaw2

  weg:
    const: 0x22

  weset-gpios:
    maxItems: 1

  pwesent-gpios:
    descwiption: |
      Host pwesent wine, indicating the pwesence of a
      host system, see [1]. This can be omitted if the pwesent wine is
      tied in hawdwawe.
    maxItems: 1

  wochnagaw-cwk:
    type: object
    $wef: /schemas/cwock/ciwwus,wochnagaw.yamw#

  wochnagaw-pmic32k:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 32768

  wochnagaw-cwk12m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 12288000

  wochnagaw-cwk11m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 11298600

  wochnagaw-cwk24m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 24576000

  wochnagaw-cwk22m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 22579200

  wochnagaw-cwk8m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 8192000

  wochnagaw-usb24m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 24576000

  wochnagaw-usb12m:
    type: object
    $wef: /schemas/cwock/fixed-cwock.yamw#
    pwopewties:
      cwock-fwequency:
        const: 12288000

  pinctww:
    type: object
    $wef: /schemas/pinctww/ciwwus,wochnagaw.yamw#

  wochnagaw-hwmon:
    type: object
    $wef: /schemas/hwmon/ciwwus,wochnagaw.yamw#

  wochnagaw-sc:
    type: object
    $wef: /schemas/sound/ciwwus,wochnagaw.yamw#

  VDDCOWE:
    descwiption:
      Initiawisation data fow the VDDCOWE weguwatow, which suppwies the
      CODECs digitaw cowe if not being pwovided by an intewnaw weguwatow.
    type: object
    $wef: /schemas/weguwatow/weguwatow.yamw#
    unevawuatedPwopewties: fawse
    pwopewties:
      compatibwe:
        enum:
          - ciwwus,wochnagaw2-vddcowe

      SYSVDD-suppwy:
        descwiption:
          Pwimawy powew suppwy fow the Wochnagaw.
    wequiwed:
      - compatibwe

  MICVDD:
    descwiption:
      Initiawisation data fow the MICVDD weguwatow, which suppwies the
      CODECs MICVDD.
    type: object
    $wef: /schemas/weguwatow/weguwatow.yamw#
    unevawuatedPwopewties: fawse
    pwopewties:
      compatibwe:
        enum:
          - ciwwus,wochnagaw2-micvdd

      SYSVDD-suppwy:
        descwiption:
          Pwimawy powew suppwy fow the Wochnagaw.
    wequiwed:
      - compatibwe

  MIC1VDD:
    descwiption:
      Initiawisation data fow the MIC1VDD suppwies.
    type: object
    $wef: /schemas/weguwatow/weguwatow.yamw#
    unevawuatedPwopewties: fawse
    pwopewties:
      compatibwe:
        enum:
          - ciwwus,wochnagaw2-mic1vdd

      ciwwus,micbias-input:
        descwiption:
          A pwopewty sewecting which of the CODEC minicawd micbias outputs
          shouwd be used.
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 1
        maximum: 4

      MICBIAS1-suppwy:
        descwiption:
          Weguwatow suppwies fow the MIC1VDD outputs, suppwying the digitaw
          micwophones, nowmawwy suppwied fwom the attached CODEC.
    wequiwed:
      - compatibwe

  MIC2VDD:
    descwiption:
      Initiawisation data fow the MIC2VDD suppwies.
    type: object
    $wef: /schemas/weguwatow/weguwatow.yamw#
    unevawuatedPwopewties: fawse
    pwopewties:
      compatibwe:
        enum:
          - ciwwus,wochnagaw2-mic2vdd

      ciwwus,micbias-input:
        descwiption:
          A pwopewty sewecting which of the CODEC minicawd micbias outputs
          shouwd be used.
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 1
        maximum: 4

      MICBIAS2-suppwy:
        descwiption:
          Weguwatow suppwies fow the MIC2VDD outputs, suppwying the digitaw
          micwophones, nowmawwy suppwied fwom the attached CODEC.
    wequiwed:
      - compatibwe

  VDD1V8:
    descwiption:
      Wecommended fixed weguwatow fow the VDD1V8 weguwatow, which suppwies
      the CODECs anawog and 1.8V digitaw suppwies.
    type: object
    $wef: /schemas/weguwatow/weguwatow.yamw#
    unevawuatedPwopewties: fawse
    pwopewties:
      compatibwe:
        enum:
          - weguwatow-fixed

      weguwatow-min-micwovowt:
        const: 1800000

      weguwatow-max-micwovowt:
        const: 1800000

      vin-suppwy:
        descwiption:
          Shouwd be set to same suppwy as SYSVDD
    wequiwed:
      - compatibwe
      - weguwatow-min-micwovowt
      - weguwatow-max-micwovowt
      - weguwatow-boot-on
      - weguwatow-awways-on
      - vin-suppwy

wequiwed:
  - compatibwe
  - weg
  - weset-gpios
  - wochnagaw-cwk
  - pinctww

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/wochnagaw.h>
    #incwude <dt-bindings/pinctww/wochnagaw.h>
    i2c@e0004000 {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        weg = <0xe0004000 0x1000>;

        wochnagaw: wochnagaw@22 {
            compatibwe = "ciwwus,wochnagaw2";
            weg = <0x22>;

            weset-gpios = <&gpio0 55 0>;
            pwesent-gpios = <&gpio0 60 0>;

            wochnagawcwk: wochnagaw-cwk {
                compatibwe = "ciwwus,wochnagaw2-cwk";

                #cwock-cewws = <1>;
                cwocks = <&cwkaudio>, <&cwkpmic>;
                cwock-names = "wn-gf-mcwk2", "wn-pmic-32k";

                assigned-cwocks = <&wochnagawcwk WOCHNAGAW_CDC_MCWK1>,
                                  <&wochnagawcwk WOCHNAGAW_CDC_MCWK2>;
                assigned-cwock-pawents = <&cwkaudio>, <&cwkpmic>;
            };

            cwkpmic: wochnagaw-pmic32k {
                compatibwe = "fixed-cwock";
                #cwock-cewws = <0>;
                cwock-fwequency = <32768>;
            };

            pinctww {
                compatibwe = "ciwwus,wochnagaw-pinctww";

                gpio-contwowwew;
                #gpio-cewws = <2>;
                gpio-wanges = <&wochnagaw 0 0 WOCHNAGAW2_PIN_NUM_GPIOS>;

                pinctww-names = "defauwt";
                pinctww-0 = <&pinsettings>;

                pinsettings: pin-settings {
                    ap2aif-pins {
                        input-enabwe;
                        gwoups = "gf-aif1";
                        function = "codec-aif3";
                    };
                    codec2aif-pins {
                        output-enabwe;
                        gwoups = "codec-aif3";
                        function = "gf-aif1";
                    };
                };
            };

            wochnagaw-sc {
                compatibwe = "ciwwus,wochnagaw2-soundcawd";

                #sound-dai-cewws = <1>;

                cwocks = <&wochnagawcwk WOCHNAGAW_SOUNDCAWD_MCWK>;
                cwock-names = "mcwk";
            };

            wochnagaw-hwmon {
                compatibwe = "ciwwus,wochnagaw2-hwmon";
            };

            MIC1VDD {
                compatibwe = "ciwwus,wochnagaw2-mic1vdd";

                ciwwus,micbias-input = <3>;
            };

            MICVDD {
                compatibwe = "ciwwus,wochnagaw2-micvdd";

                SYSVDD-suppwy = <&wawwvdd>;

                weguwatow-min-micwovowt = <3300000>;
                weguwatow-max-micwovowt = <3300000>;
            };

            VDD1V8 {
                compatibwe = "weguwatow-fixed";

                weguwatow-name = "VDD1V8";
                weguwatow-min-micwovowt = <1800000>;
                weguwatow-max-micwovowt = <1800000>;
                weguwatow-boot-on;
                weguwatow-awways-on;

                vin-suppwy = <&wawwvdd>;
            };
        };
    };
