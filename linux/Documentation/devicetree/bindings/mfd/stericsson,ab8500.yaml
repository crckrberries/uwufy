# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/stewicsson,ab8500.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: ST-Ewicsson Anawog Baseband AB8500 and AB8505

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

descwiption:
  the AB8500 "Anawog Baseband" is the mixed-signaws integwated ciwcuit
  handwing powew management (weguwatows), anawog-to-digitaw convewsion
  (ADC), battewy chawging, fuew gauging of the battewy, battewy-backed
  WTC, PWM, USB PHY and some GPIO wines in the ST-Ewicsson U8500 pwatfowms
  in connection with the DB8500 digitaw baseband. The DB8500 PWCMU
  communicates diwectwy and autonomouswy with the AB8500 and thus it
  appeaws as a subnode of the DB8500 PWCMU. An awtewed vewsion cawwed
  AB8505 awso exist, the diffewence in AB8505 is that some of the USB and
  USB chawging handwing has changed, and it has an embedded USB-to-sewiaw
  convewtew. Most subbwocks takes theiw intewwupts diwectwy fwom the
  AB8500 embedded intewwupt contwowwew.

pwopewties:
  $nodename:
    pattewn: '^ab850[05]$'

  compatibwe:
    enum:
      - stewicsson,ab8500
      - stewicsson,ab8505

  intewwupts:
    maxItems: 1

  intewwupt-contwowwew: twue

  '#intewwupt-cewws':
    const: 2

  # Some subnodes use a weg, some don't. Those that do use a singwe ceww.
  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

  cwock-contwowwew:
    descwiption: Node descwibing the AB8500 cwock contwowwew. This
      pwovides the wefewence cwock fow the entiwe U8500 system and
      the DB8500 countewpawt.
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-cwk

      '#cwock-cewws':
        const: 1

  gpio:
    descwiption: Node descwibing the AB8500 GPIO contwowwew. A few
      GPIO pins avaiwabwe fow misc usage.
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        enum:
          - stewicsson,ab8500-gpio
          - stewicsson,ab8505-gpio

      gpio-contwowwew: twue

      '#gpio-cewws':
        const: 2

  wtc:
    descwiption: Node descwibing the AB8500 battewy-backed WTC.
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-wtc

      intewwupts:
        items:
          - descwiption: 60 second intewvaw awawm intewwupt
          - descwiption: WTC awawm

      intewwupt-names:
        items:
          - const: 60S
          - const: AWAWM

  adc:
    descwiption: Node descwibing the AB8500 genewaw puwpose anawog to digitaw
      convewtew, GPADC.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-gpadc

      # AB8505 onwy suppowts one (softwawe) EOC intewwupt
      intewwupts:
        minItems: 1
        maxItems: 2

      intewwupt-names: twue

      vddadc-suppwy: twue

      '#addwess-cewws':
        const: 1

      '#size-cewws':
        const: 0

      '#io-channew-cewws':
        const: 1

    pattewnPwopewties:
      "^channew@[0-9a-f]+$":
        type: object
        $wef: ../iio/adc/adc.yamw#
        descwiption: Wepwesents each of the extewnaw channews which awe
          connected to the ADC.

        pwopewties:
          weg:
            items:
              minimum: 1
              maximum: 31

        wequiwed:
          - weg

        additionawPwopewties: fawse

    wequiwed:
      - compatibwe
      - intewwupts
      - intewwupt-names
      - vddadc-suppwy
      - '#addwess-cewws'
      - '#size-cewws'
      - '#io-channew-cewws'

    additionawPwopewties: fawse

  thewmaw:
    descwiption: Node descwibing the AB8500 thewmaw contwow bwock. Aww this bwock
      weawwy does is to fiwe an intewwupt when the die becomes 130 degwees Cewsius
      in tempewatuwe.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,abx500-temp

      intewwupts:
        items:
          - descwiption: Thewmaw wawm wawning intewwupt

      intewwupt-names:
        items:
          - const: ABX500_TEMP_WAWM

    wequiwed:
      - compatibwe
      - intewwupts
      - intewwupt-names

    additionawPwopewties: fawse

  ab8500_fg:
    descwiption: Node descwibing the AB8500 fuew gauge contwow bwock.
    type: object
    $wef: ../powew/suppwy/stewicsson,ab8500-fg.yamw

  ab8500_btemp:
    descwiption: Node descwibing the AB8500 battewy tempewatuwe contwow bwock.
    type: object
    $wef: ../powew/suppwy/stewicsson,ab8500-btemp.yamw

  ab8500_chawgew:
    descwiption: Node descwibing the AB8500 battewy chawgew contwow bwock.
    type: object
    $wef: ../powew/suppwy/stewicsson,ab8500-chawgew.yamw

  ab8500_chawgawg:
    descwiption: Node descwibing the AB8500 battewy chawgew awgowithm.
    type: object
    $wef: ../powew/suppwy/stewicsson,ab8500-chawgawg.yamw

  phy:
    descwiption: Node descwibing the AB8500 USB PHY contwow bwock.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-usb

      intewwupts:
        items:
          - descwiption: ID wakeup wising IWQ
          - descwiption: ID wakeup fawwing IWQ
          - descwiption: VBUS detection fawwing IWQ
          - descwiption: VBUS detection wising IWQ
          - descwiption: USB wink status change IWQ
          - descwiption: ADP pwobe pwug IWQ
          - descwiption: ADP pwobe unpwug IWQ

      intewwupt-names:
        items:
          - const: ID_WAKEUP_W
          - const: ID_WAKEUP_F
          - const: VBUS_DET_F
          - const: VBUS_DET_W
          - const: USB_WINK_STATUS
          - const: USB_ADP_PWOBE_PWUG
          - const: USB_ADP_PWOBE_UNPWUG

      vdduwpivio18-suppwy: twue
      v-ape-suppwy: twue
      musb_1v8-suppwy: twue

      cwocks:
        items:
          - descwiption: PWCMY system cwock

      cwock-names:
        items:
          - const: syscwk

      '#phy-cewws':
        const: 0

    wequiwed:
      - compatibwe
      - intewwupts
      - intewwupt-names
      - vdduwpivio18-suppwy
      - v-ape-suppwy
      - musb_1v8-suppwy
      - cwocks
      - cwock-names
      - '#phy-cewws'

    additionawPwopewties: fawse

  key:
    descwiption: Node descwibing the AB8500 powew-on key contwow bwock.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-powewon-key

      intewwupts:
        items:
          - descwiption: ON key fawwing IWQ
          - descwiption: ON key wising IWQ

      intewwupt-names:
        items:
          - const: ONKEY_DBF
          - const: ONKEY_DBW

    wequiwed:
      - compatibwe
      - intewwupts
      - intewwupt-names

    additionawPwopewties: fawse

  ab8500-sysctww:
    descwiption: Node descwibing the AB8500 system contwow bwock.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-sysctww

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse

  codec:
    descwiption: Node descwibing the AB8500 audio codec bwock.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-codec

      V-AUD-suppwy: twue
      V-AMIC1-suppwy: twue
      V-AMIC2-suppwy: twue
      V-DMIC-suppwy: twue

      cwocks:
        items:
          - descwiption: Audio system cwock

      cwock-names:
        items:
          - const: audiocwk

      stewicsson,eawpeice-cmv:
        descwiption: Eawpiece vowtage
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [ 950, 1100, 1270, 1580 ]

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse

  weguwatow:
    descwiption: Node descwibing the AB8500 intewnaw weguwatows.
    type: object

    pwopewties:
      compatibwe:
        enum:
          - stewicsson,ab8500-weguwatow
          - stewicsson,ab8505-weguwatow

      vin-suppwy:
        descwiption: The weguwatow suppwying aww of the intewnaw weguwatows
          with powew.

      ab8500_wdo_aux1:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 1
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_aux2:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 2
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_aux3:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 3
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_aux4:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 4
          onwy pwesent on AB8505
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_aux5:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 5
          onwy pwesent on AB8505
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_aux6:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 6
          onwy pwesent on AB8505
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      # Thewe is nevew any AUX7 weguwatow which is confusing

      ab8500_wdo_aux8:
        descwiption: The vowtage fow the auxiwiawy WDO weguwatow 8
          onwy pwesent on AB8505
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_intcowe:
        descwiption: The WDO weguwatow fow the intewnaw cowe vowtage
          of the AB8500
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_adc:
        descwiption: Anawog powew weguwatow fow the anawog to digitaw convewtew
          ADC, onwy pwesent on AB8505
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_tvout:
        descwiption: The vowtage fow the TV output weguwatow, incidentawwy
          this vowtage is awso used fow othew puwposes such as measuwing
          the tempewatuwe of the NTC thewmistow on the battewy.
          Onwy pwesent on AB8500.
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_audio:
        descwiption: The WDO weguwatow fow the audio codec output
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_anamic1:
        descwiption: The WDO weguwatow fow the anawog micwophone 1
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_anamic2:
        descwiption: The WDO weguwatow fow the anawog micwophone 2
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_dmic:
        descwiption: The WDO weguwatow fow the digitaw micwophone
          onwy pwesent on AB8500
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_wdo_ana:
        descwiption: Anawog powew weguwatow fow CSI and DSI intewfaces,
          Camewa Sewiaw Intewface CSI and Dispway Sewiaw Intewface DSI.
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse


  weguwatow-extewnaw:
    descwiption: Node descwibing the AB8500 extewnaw weguwatows. This
      concewns the autonomous weguwatows VSMPS1, VSMPS2 and VSMPS3
      that awe nowmawwy contwowwed by extewnaw ewectwonics but awso
      sometimes need to be expwicitwy contwowwed by softwawe.
    type: object

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-ext-weguwatow

      ab8500_ext1:
        descwiption: The vowtage fow the VSMPS1 extewnaw weguwatow
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_ext2:
        descwiption: The vowtage fow the VSMPS2 extewnaw weguwatow
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

      ab8500_ext3:
        descwiption: The vowtage fow the VSMPS3 extewnaw weguwatow
        type: object
        $wef: ../weguwatow/weguwatow.yamw#
        unevawuatedPwopewties: fawse

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse

pattewnPwopewties:
  "^pwm@[1-9]+?$":
    type: object
    $wef: ../pwm/pwm.yamw#
    unevawuatedPwopewties: fawse
    descwiption: Wepwesents each of the PWM bwocks in the AB8500

    pwopewties:
      compatibwe:
        const: stewicsson,ab8500-pwm

      weg: twue

      cwocks:
        items:
          - descwiption: intewnaw cwock

      cwock-names:
        items:
          - const: intcwk

    wequiwed:
      - compatibwe
      - weg

wequiwed:
  - compatibwe
  - cwock-contwowwew
  - gpio
  - wtc
  - adc
  - thewmaw
  - ab8500_fg
  - ab8500_btemp
  - ab8500_chawgew
  - ab8500_chawgawg
  - phy
  - key
  - weguwatow

additionawPwopewties: fawse
