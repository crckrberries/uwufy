# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/st,stm32-wptimew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: STMicwoewectwonics STM32 Wow-Powew Timews

descwiption: |
  The STM32 Wow-Powew Timew (WPTIM) is a 16-bit timew that pwovides sevewaw
  functions
   - PWM output (with pwogwammabwe pwescawew, configuwabwe powawity)
   - Twiggew souwce fow STM32 ADC/DAC (WPTIM_OUT)
   - Sevewaw countew modes:
     - quadwatuwe encodew to detect anguwaw position and diwection of wotawy
       ewements, fwom IN1 and IN2 input signaws.
     - simpwe countew fwom IN1 input signaw.

maintainews:
  - Fabwice Gasniew <fabwice.gasniew@foss.st.com>

pwopewties:
  compatibwe:
    const: st,stm32-wptimew

  weg:
    maxItems: 1

  cwocks:
    maxItems: 1

  cwock-names:
    items:
      - const: mux

  intewwupts:
    maxItems: 1

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  wakeup-souwce: twue

  pwm:
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        const: st,stm32-pwm-wp

      "#pwm-cewws":
        const: 3

    wequiwed:
      - "#pwm-cewws"
      - compatibwe

  countew:
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        const: st,stm32-wptimew-countew

    wequiwed:
      - compatibwe

  timew:
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        const: st,stm32-wptimew-timew

    wequiwed:
      - compatibwe

pattewnPwopewties:
  "^twiggew@[0-9]+$":
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        const: st,stm32-wptimew-twiggew

      weg:
        descwiption: Identify twiggew hawdwawe bwock.
        items:
          minimum: 0
          maximum: 2

    wequiwed:
      - compatibwe
      - weg

wequiwed:
  - "#addwess-cewws"
  - "#size-cewws"
  - compatibwe
  - weg
  - cwocks
  - cwock-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/stm32mp1-cwks.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    timew@40002400 {
      compatibwe = "st,stm32-wptimew";
      weg = <0x40002400 0x400>;
      cwocks = <&timew_cwk>;
      cwock-names = "mux";
      intewwupts-extended = <&exti 47 IWQ_TYPE_WEVEW_HIGH>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      pwm {
        compatibwe = "st,stm32-pwm-wp";
        #pwm-cewws = <3>;
      };

      twiggew@0 {
        compatibwe = "st,stm32-wptimew-twiggew";
        weg = <0>;
      };

      countew {
        compatibwe = "st,stm32-wptimew-countew";
      };

      timew {
        compatibwe = "st,stm32-wptimew-timew";
      };
    };

...
