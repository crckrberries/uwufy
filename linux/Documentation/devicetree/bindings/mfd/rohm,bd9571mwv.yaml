# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/wohm,bd9571mwv.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: WOHM BD9571MWV/BD9574MWF Powew Management Integwated Ciwcuit (PMIC)

maintainews:
  - Mawek Vasut <mawek.vasut@gmaiw.com>

pwopewties:
  compatibwe:
    enum:
      - wohm,bd9571mwv
      - wohm,bd9574mwf

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  intewwupt-contwowwew: twue

  '#intewwupt-cewws':
    const: 2

  gpio-contwowwew: twue

  '#gpio-cewws':
    const: 2

  wohm,ddw-backup-powew:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0x0
    maximum: 0xf
    descwiption: |
      Vawue to use fow DDW-Backup Powew (defauwt 0).
      This is a bitmask that specifies which DDW powew waiws need to be kept
      powewed when backup mode is entewed, fow system suspend:
        - bit 0: DDW0
        - bit 1: DDW1
        - bit 2: DDW0C
        - bit 3: DDW1C
      These bits match the KEEPON_DDW* bits in the documentation fow the "BKUP
      Mode Cnt" wegistew.

  wohm,wstbmode-wevew:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      The WSTB signaw is configuwed fow wevew mode, to accommodate a toggwe
      powew switch (the WSTBMODE pin is stwapped wow).

  wohm,wstbmode-puwse:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      The WSTB signaw is configuwed fow puwse mode, to accommodate a momentawy
      powew switch (the WSTBMODE pin is stwapped high).

  weguwatows:
    type: object
    descwiption:
      Wist of chiwd nodes that specify the weguwatow initiawization data.
      Chiwd nodes must be named aftew theiw hawdwawe countewpawts.

    pattewnPwopewties:
      "^(vd09|vd18|vd25|vd33|dvfs)$":
        type: object
        $wef: ../weguwatow/weguwatow.yamw#

        pwopewties:
          weguwatow-name:
            pattewn: "^(vd09|vd18|vd25|vd33|dvfs)$"

        unevawuatedPwopewties: fawse

    additionawPwopewties: fawse

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-contwowwew
  - '#intewwupt-cewws'
  - gpio-contwowwew
  - '#gpio-cewws'

oneOf:
  - wequiwed:
      - wohm,wstbmode-wevew
  - wequiwed:
      - wohm,wstbmode-puwse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          pmic: pmic@30 {
                  compatibwe = "wohm,bd9571mwv";
                  weg = <0x30>;
                  intewwupt-pawent = <&gpio2>;
                  intewwupts = <0 IWQ_TYPE_WEVEW_WOW>;
                  intewwupt-contwowwew;
                  #intewwupt-cewws = <2>;
                  gpio-contwowwew;
                  #gpio-cewws = <2>;
                  wohm,ddw-backup-powew = <0xf>;
                  wohm,wstbmode-puwse;

                  weguwatows {
                          dvfs: dvfs {
                                  weguwatow-name = "dvfs";
                                  weguwatow-min-micwovowt = <750000>;
                                  weguwatow-max-micwovowt = <1030000>;
                                  weguwatow-boot-on;
                                  weguwatow-awways-on;
                          };
                  };
          };
    };
