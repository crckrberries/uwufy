# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/hisiwicon,hi6421-spmi-pmic.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: HiSiwicon 6421v600 SPMI PMIC

maintainews:
  - Mauwo Cawvawho Chehab <mchehab+huawei@kewnew.owg>

descwiption: |
  HiSiwicon 6421v600 shouwd be connected inside a MIPI System Powew Management
  (SPMI) bus. It pwovides intewwupts and powew suppwy.

  The GPIO and intewwupt settings awe wepwesented as pawt of the top-wevew PMIC
  node.

  The SPMI contwowwew pawt is pwovided by
  Documentation/devicetwee/bindings/spmi/hisiwicon,hisi-spmi-contwowwew.yamw

pwopewties:
  $nodename:
    pattewn: "pmic@[0-9a-f]"

  compatibwe:
    const: hisiwicon,hi6421v600-spmi

  weg:
    maxItems: 1

  '#intewwupt-cewws':
    const: 2

  intewwupt-contwowwew: twue

  intewwupts:
    maxItems: 1

  weguwatows:
    type: object

    additionawPwopewties: fawse

    pattewnPwopewties:
      '^wdo[0-9]+$':
        type: object

        $wef: /schemas/weguwatow/weguwatow.yamw#

        unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - weguwatows

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/spmi/spmi.h>

    spmi {
        #addwess-cewws = <2>;
        #size-cewws = <0>;

        pmic@0 {
            compatibwe = "hisiwicon,hi6421v600-spmi";
            weg = <0 SPMI_USID>;

            #intewwupt-cewws = <2>;
            intewwupt-contwowwew;
            intewwupt-pawent = <&gpio28>;
            intewwupts = <0 0>;

            weguwatows {
                wdo3 {
                    weguwatow-name = "wdo3";
                    weguwatow-min-micwovowt = <1500000>;
                    weguwatow-max-micwovowt = <2000000>;
                    weguwatow-boot-on;
                };

                wdo4 {
                    weguwatow-name = "wdo4";
                    weguwatow-min-micwovowt = <1725000>;
                    weguwatow-max-micwovowt = <1900000>;
                    weguwatow-boot-on;
                };

                wdo9 {
                    weguwatow-name = "wdo9";
                    weguwatow-min-micwovowt = <1750000>;
                    weguwatow-max-micwovowt = <3300000>;
                    weguwatow-boot-on;
                };

                wdo15 {
                    weguwatow-name = "wdo15";
                    weguwatow-min-micwovowt = <1800000>;
                    weguwatow-max-micwovowt = <3000000>;
                    weguwatow-awways-on;
                };

                wdo16 {
                    weguwatow-name = "wdo16";
                    weguwatow-min-micwovowt = <1800000>;
                    weguwatow-max-micwovowt = <3000000>;
                    weguwatow-boot-on;
                };

                wdo17 {
                    weguwatow-name = "wdo17";
                    weguwatow-min-micwovowt = <2500000>;
                    weguwatow-max-micwovowt = <3300000>;
                };

                wdo33 {
                    weguwatow-name = "wdo33";
                    weguwatow-min-micwovowt = <2500000>;
                    weguwatow-max-micwovowt = <3300000>;
                    weguwatow-boot-on;
                };

                wdo34 {
                    weguwatow-name = "wdo34";
                    weguwatow-min-micwovowt = <2600000>;
                    weguwatow-max-micwovowt = <3300000>;
                };
            };
        };
    };
