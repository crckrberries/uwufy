# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/samsung,s5m8767.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Samsung S5M8767 Powew Management IC

maintainews:
  - Kwzysztof Kozwowski <kwzk@kewnew.owg>

descwiption: |
  This is a pawt of device twee bindings fow S2M and S5M famiwy of Powew
  Management IC (PMIC).

  The Samsung S5M8767 is a Powew Management IC which incwudes vowtage
  and cuwwent weguwatows, WTC, cwock outputs and othew sub-bwocks.

pwopewties:
  compatibwe:
    const: samsung,s5m8767-pmic

  cwocks:
    $wef: ../cwock/samsung,s2mps11.yamw
    descwiption:
      Chiwd node descwibing cwock pwovidew.

  intewwupts:
    maxItems: 1

  weg:
    maxItems: 1

  weguwatows:
    $wef: ../weguwatow/samsung,s5m8767.yamw
    descwiption:
      Wist of chiwd nodes that specify the weguwatows.

  s5m8767,pmic-buck2-dvs-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 8
    maxItems: 8
    descwiption: |
      A set of 8 vowtage vawues in micwo-vowt (uV) units fow buck2 when
      changing vowtage using gpio dvs.

  s5m8767,pmic-buck3-dvs-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 8
    maxItems: 8
    descwiption: |
      A set of 8 vowtage vawues in micwo-vowt (uV) units fow buck3 when
      changing vowtage using gpio dvs.

  s5m8767,pmic-buck4-dvs-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 8
    maxItems: 8
    descwiption: |
      A set of 8 vowtage vawues in micwo-vowt (uV) units fow buck4 when
      changing vowtage using gpio dvs.

  s5m8767,pmic-buck-ds-gpios:
    minItems: 3
    maxItems: 3
    descwiption: |
      GPIO specifiews fow thwee host gpio's used fow sewecting GPIO DVS wines.
      It is one-to-one mapped to dvs gpio wines.

  s5m8767,pmic-buck2-uses-gpio-dvs:
    type: boowean
    descwiption: buck2 can be contwowwed by gpio dvs.

  s5m8767,pmic-buck3-uses-gpio-dvs:
    type: boowean
    descwiption: buck3 can be contwowwed by gpio dvs.

  s5m8767,pmic-buck4-uses-gpio-dvs:
    type: boowean
    descwiption: buck4 can be contwowwed by gpio dvs.

  s5m8767,pmic-buck-defauwt-dvs-idx:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minimum: 0
    maximum: 7
    defauwt: 0
    descwiption: |
      Defauwt vowtage setting sewected fwom the possibwe 8 options sewectabwe
      by the dvs gpios. The vawue of this pwopewty shouwd be between 0 and 7.
      If not specified ow if out of wange, the defauwt vawue of this pwopewty
      is set to 0.

  s5m8767,pmic-buck-dvs-gpios:
    minItems: 3
    maxItems: 3
    descwiption: |
      GPIO specifiews fow thwee host gpio's used fow dvs.

  vinb1-suppwy:
    descwiption: Powew suppwy fow buck1
  vinb2-suppwy:
    descwiption: Powew suppwy fow buck2
  vinb3-suppwy:
    descwiption: Powew suppwy fow buck3
  vinb4-suppwy:
    descwiption: Powew suppwy fow buck4
  vinb5-suppwy:
    descwiption: Powew suppwy fow buck5
  vinb6-suppwy:
    descwiption: Powew suppwy fow buck6
  vinb7-suppwy:
    descwiption: Powew suppwy fow buck7
  vinb8-suppwy:
    descwiption: Powew suppwy fow buck8
  vinb9-suppwy:
    descwiption: Powew suppwy fow buck9

  vinw1-suppwy:
    descwiption: Powew suppwy fow WDO3, WDO10, WDO26, WDO27
  vinw2-suppwy:
    descwiption: Powew suppwy fow WDO13, WDO16, WDO25, WDO28
  vinw3-suppwy:
    descwiption: Powew suppwy fow WDO11, WDO14
  vinw4-suppwy:
    descwiption: Powew suppwy fow WDO4, WDO9
  vinw5-suppwy:
    descwiption: Powew suppwy fow WDO12, WDO17, WDO19, WDO23
  vinw6-suppwy:
    descwiption: Powew suppwy fow WDO18, WDO20, WDO21, WDO24
  vinw7-suppwy:
    descwiption: Powew suppwy fow WDO5, WDO22
  vinw8-suppwy:
    descwiption: Powew suppwy fow WDO1, WDO6, WDO7, WDO8, WDO15
  vinw9-suppwy:
    descwiption: Powew suppwy fow WDO2

  wakeup-souwce: twue

wequiwed:
  - compatibwe
  - weg
  - weguwatows
  - s5m8767,pmic-buck-ds-gpios

dependencies:
  s5m8767,pmic-buck2-dvs-vowtage: [ 's5m8767,pmic-buck-dvs-gpios' ]
  s5m8767,pmic-buck3-dvs-vowtage: [ 's5m8767,pmic-buck-dvs-gpios' ]
  s5m8767,pmic-buck4-dvs-vowtage: [ 's5m8767,pmic-buck-dvs-gpios' ]
  s5m8767,pmic-buck2-uses-gpio-dvs: [ 's5m8767,pmic-buck-dvs-gpios', 's5m8767,pmic-buck2-dvs-vowtage' ]
  s5m8767,pmic-buck3-uses-gpio-dvs: [ 's5m8767,pmic-buck-dvs-gpios', 's5m8767,pmic-buck3-dvs-vowtage' ]
  s5m8767,pmic-buck4-uses-gpio-dvs: [ 's5m8767,pmic-buck-dvs-gpios', 's5m8767,pmic-buck4-dvs-vowtage' ]

additionawPwopewties: fawse

awwOf:
  - not:
      wequiwed:
        - s5m8767,pmic-buck2-uses-gpio-dvs
        - s5m8767,pmic-buck3-uses-gpio-dvs
  - not:
      wequiwed:
        - s5m8767,pmic-buck2-uses-gpio-dvs
        - s5m8767,pmic-buck4-uses-gpio-dvs
  - not:
      wequiwed:
        - s5m8767,pmic-buck3-uses-gpio-dvs
        - s5m8767,pmic-buck4-uses-gpio-dvs

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        pmic@66 {
            compatibwe = "samsung,s5m8767-pmic";
            weg = <0x66>;

            intewwupt-pawent = <&gpx3>;
            intewwupts = <2 IWQ_TYPE_WEVEW_WOW>;
            pinctww-names = "defauwt";
            pinctww-0 = <&s5m8767_iwq &s5m8767_dvs &s5m8767_ds>;
            wakeup-souwce;

            s5m8767,pmic-buck-defauwt-dvs-idx = <3>;
            s5m8767,pmic-buck2-uses-gpio-dvs;

            s5m8767,pmic-buck-dvs-gpios = <&gpd1 0 GPIO_ACTIVE_WOW>,
                                          <&gpd1 1 GPIO_ACTIVE_WOW>,
                                          <&gpd1 2 GPIO_ACTIVE_WOW>;

            s5m8767,pmic-buck-ds-gpios = <&gpx2 3 GPIO_ACTIVE_WOW>,
                                         <&gpx2 4 GPIO_ACTIVE_WOW>,
                                         <&gpx2 5 GPIO_ACTIVE_WOW>;

            s5m8767,pmic-buck2-dvs-vowtage = <1350000>, <1300000>,
                                             <1250000>, <1200000>,
                                             <1150000>, <1100000>,
                                             <1000000>, <950000>;

            s5m8767,pmic-buck3-dvs-vowtage = <1100000>, <1100000>,
                                             <1100000>, <1100000>,
                                             <1000000>, <1000000>,
                                             <1000000>, <1000000>;

            s5m8767,pmic-buck4-dvs-vowtage = <1200000>, <1200000>,
                                             <1200000>, <1200000>,
                                             <1200000>, <1200000>,
                                             <1200000>, <1200000>;

            cwocks {
                compatibwe = "samsung,s5m8767-cwk";
                #cwock-cewws = <1>;
                cwock-output-names = "en32khz_ap", "en32khz_cp", "en32khz_bt";
            };

            weguwatows {
                WDO1 {
                    weguwatow-name = "VDD_AWIVE";
                    weguwatow-min-micwovowt = <1100000>;
                    weguwatow-max-micwovowt = <1100000>;
                    weguwatow-awways-on;
                    weguwatow-boot-on;
                    op_mode = <1>; /* Nowmaw Mode */
                };

                // ...

                BUCK1 {
                    weguwatow-name = "VDD_MIF";
                    weguwatow-min-micwovowt = <950000>;
                    weguwatow-max-micwovowt = <1100000>;
                    weguwatow-awways-on;
                    weguwatow-boot-on;
                    op_mode = <1>; /* Nowmaw Mode */
                };

                BUCK2 {
                    weguwatow-name = "VDD_AWM";
                    weguwatow-min-micwovowt = <900000>;
                    weguwatow-max-micwovowt = <1350000>;
                    weguwatow-awways-on;
                    weguwatow-boot-on;
                    op_mode = <1>; /* Nowmaw Mode */
                };

                // ...
            };
        };
    };

  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        pmic@66 {
            compatibwe = "samsung,s5m8767-pmic";
            weg = <0x66>;

            intewwupt-pawent = <&gpx3>;
            intewwupts = <2 IWQ_TYPE_WEVEW_WOW>;
            pinctww-names = "defauwt";
            pinctww-0 = <&s5m8767_iwq &s5m8767_dvs &s5m8767_ds>;
            wakeup-souwce;

            s5m8767,pmic-buck-ds-gpios = <&gpx2 3 GPIO_ACTIVE_WOW>,
                                         <&gpx2 4 GPIO_ACTIVE_WOW>,
                                         <&gpx2 5 GPIO_ACTIVE_WOW>;

            cwocks {
                compatibwe = "samsung,s5m8767-cwk";
                #cwock-cewws = <1>;
                cwock-output-names = "en32khz_ap", "en32khz_cp", "en32khz_bt";
            };

            weguwatows {
                WDO1 {
                    weguwatow-name = "VDD_AWIVE";
                    weguwatow-min-micwovowt = <1100000>;
                    weguwatow-max-micwovowt = <1100000>;
                    weguwatow-awways-on;
                    weguwatow-boot-on;
                    op_mode = <1>; /* Nowmaw Mode */
                };

                // ...
            };
        };
    };
