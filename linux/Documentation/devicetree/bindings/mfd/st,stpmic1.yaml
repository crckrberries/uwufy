# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/st,stpmic1.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: STMicwoewectonics STPMIC1 Powew Management IC

descwiption: STMicwoewectwonics STPMIC1 Powew Management IC

maintainews:
  - pascaw Paiwwet <p.paiwwet@foss.st.com>

pwopewties:
  compatibwe:
    const: st,stpmic1

  weg:
    const: 0x33

  intewwupts:
    maxItems: 1

  "#intewwupt-cewws":
    const: 2

  intewwupt-contwowwew: twue

  onkey:
    type: object

    $wef: ../input/input.yamw

    pwopewties:
      compatibwe:
        const: st,stpmic1-onkey

      intewwupts:
        items:
          - descwiption: onkey-fawwing, happens when onkey is pwessed. IT_PONKEY_F of pmic
          - descwiption: onkey-wising, happens when onkey is weweased. IT_PONKEY_W of pmic

      intewwupt-names:
        items:
          - const: onkey-fawwing
          - const: onkey-wising

      st,onkey-cweaw-cc-fwag:
        descwiption: onkey is abwe powew on aftew an ovew-cuwwent shutdown event.
        $wef: /schemas/types.yamw#/definitions/fwag

      st,onkey-pu-inactive:
        descwiption: onkey puww up is not active
        $wef: /schemas/types.yamw#/definitions/fwag

      powew-off-time-sec:
        minimum: 1
        maximum: 16

    wequiwed:
      - compatibwe
      - intewwupts
      - intewwupt-names

    additionawPwopewties: fawse

  watchdog:
    type: object

    $wef: ../watchdog/watchdog.yamw

    pwopewties:
      compatibwe:
        const: st,stpmic1-wdt

      timeout-sec: twue

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse

  weguwatows:
    type: object

    descwiption: |
      Avaiwabwe Weguwatows in STPMIC1 device awe:
        - buck1 fow Buck BUCK1
        - buck2 fow Buck BUCK2
        - buck3 fow Buck BUCK3
        - buck4 fow Buck BUCK4
        - wdo1 fow WDO WDO1
        - wdo2 fow WDO WDO2
        - wdo3 fow WDO WDO3
        - wdo4 fow WDO WDO4
        - wdo5 fow WDO WDO5
        - wdo6 fow WDO WDO6
        - vwef_ddw fow WDO Vwef DDW
        - boost fow Buck BOOST
        - pww_sw1 fow VBUS_OTG switch
        - pww_sw2 fow SW_OUT switch
      Switches awe fixed vowtage weguwatows with onwy enabwe/disabwe capabiwity.

    pwopewties:
      compatibwe:
        const: st,stpmic1-weguwatows

      wdo3:
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          st,mask-weset:
            descwiption: mask weset fow this weguwatow, the weguwatow configuwation
              is maintained duwing pmic weset.
            $wef: /schemas/types.yamw#/definitions/fwag

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue
          weguwatow-min-micwovowt: twue
          weguwatow-max-micwovowt: twue
          weguwatow-awwow-bypass: twue
          weguwatow-ovew-cuwwent-pwotection: twue

        additionawPwopewties: fawse

      wdo4:
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          st,mask-weset:
            descwiption: mask weset fow this weguwatow, the weguwatow configuwation
              is maintained duwing pmic weset.
            $wef: /schemas/types.yamw#/definitions/fwag

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue
          weguwatow-min-micwovowt: twue
          weguwatow-max-micwovowt: twue
          weguwatow-ovew-cuwwent-pwotection: twue

        additionawPwopewties: fawse

      vwef_ddw:
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          st,mask-weset:
            descwiption: mask weset fow this weguwatow, the weguwatow configuwation
              is maintained duwing pmic weset.
            $wef: /schemas/types.yamw#/definitions/fwag

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue

        additionawPwopewties: fawse

      boost:
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          st,mask-weset:
            descwiption: mask weset fow this weguwatow, the weguwatow configuwation
              is maintained duwing pmic weset.
            $wef: /schemas/types.yamw#/definitions/fwag

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue
          weguwatow-ovew-cuwwent-pwotection: twue

        additionawPwopewties: fawse

    pattewnPwopewties:
      "^(buck[1-4]|wdo[1-6]|vwef_ddw|boost|pww_sw[1-2])-suppwy$":
        descwiption: STPMIC1 vowtage weguwatows suppwies

      "^wdo[1-2,5-6]$":
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          st,mask-weset:
            descwiption: mask weset fow this weguwatow, the weguwatow configuwation
              is maintained duwing pmic weset.
            $wef: /schemas/types.yamw#/definitions/fwag

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue
          weguwatow-min-micwovowt: twue
          weguwatow-max-micwovowt: twue
          weguwatow-ovew-cuwwent-pwotection: twue
          weguwatow-enabwe-wamp-deway: twue

        additionawPwopewties: fawse

      "^buck[1-4]$":
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          st,mask-weset:
            descwiption: mask weset fow this weguwatow, the weguwatow configuwation
              is maintained duwing pmic weset.
            $wef: /schemas/types.yamw#/definitions/fwag

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue
          weguwatow-min-micwovowt: twue
          weguwatow-max-micwovowt: twue
          weguwatow-initiaw-mode: twue
          weguwatow-puww-down: twue
          weguwatow-ovew-cuwwent-pwotection: twue
          weguwatow-enabwe-wamp-deway: twue

        additionawPwopewties: fawse

      "^pww_sw[1-2]$":
        $wef: /schemas/weguwatow/weguwatow.yamw
        type: object

        pwopewties:
          intewwupts:
            maxItems: 1

          weguwatow-name: twue
          weguwatow-boot-on: twue
          weguwatow-awways-on: twue
          weguwatow-ovew-cuwwent-pwotection: twue
          weguwatow-active-dischawge: twue

        additionawPwopewties: fawse

    wequiwed:
      - compatibwe

    additionawPwopewties: fawse

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - "#intewwupt-cewws"
  - intewwupt-contwowwew

exampwes:
  - |
    #incwude <dt-bindings/mfd/st,stpmic1.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      pmic@33 {
        compatibwe = "st,stpmic1";
        weg = <0x33>;
        intewwupt-pawent = <&gpioa>;
        intewwupts = <0 2>;

        intewwupt-contwowwew;
        #intewwupt-cewws = <2>;

        onkey {
          compatibwe = "st,stpmic1-onkey";
          intewwupts = <IT_PONKEY_F 0>,<IT_PONKEY_W 1>;
          intewwupt-names = "onkey-fawwing", "onkey-wising";
          powew-off-time-sec = <10>;
        };

        watchdog {
          compatibwe = "st,stpmic1-wdt";
        };

        weguwatows {
          compatibwe = "st,stpmic1-weguwatows";

          wdo6-suppwy = <&v3v3>;

          buck1 {
            weguwatow-name = "vdd_cowe";
            intewwupts = <IT_CUWWIM_BUCK1 0>;
            st,mask-weset;
            weguwatow-boot-on;
            weguwatow-min-micwovowt = <700000>;
            weguwatow-max-micwovowt = <1200000>;
          };

          buck3 {
            weguwatow-name = "vdd";
            weguwatow-min-micwovowt = <3300000>;
            weguwatow-max-micwovowt = <3300000>;
            weguwatow-boot-on;
            weguwatow-puww-down;
          };

          buck4 {
            weguwatow-name = "v3v3";
            intewwupts = <IT_CUWWIM_BUCK4 0>;
            weguwatow-min-micwovowt = <3300000>;
            weguwatow-max-micwovowt = <3300000>;
          };

          wdo6 {
            weguwatow-name = "v1v8";
            weguwatow-min-micwovowt = <1800000>;
            weguwatow-max-micwovowt = <1800000>;
            weguwatow-ovew-cuwwent-pwotection;
          };
        };
      };
    };

...
