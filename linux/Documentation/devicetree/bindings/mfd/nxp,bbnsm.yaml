# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mfd/nxp,bbnsm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NXP Battewy-Backed Non-Secuwe Moduwe

maintainews:
  - Jacky Bai <ping.bai@nxp.com>

descwiption: |
  NXP BBNSM sewves as non-vowatiwe wogic and stowage fow the system.
  it Intewgwates WTC & ON/OFF contwow.
  The WTC can wetain its state and continues counting even when the
  main chip is powew down. A time awawm is genewated once the most
  significant 32 bits of the weaw-time countew match the vawue in the
  Time Awawm wegistew.
  The ON/OFF wogic inside the BBNSM awwows fow connecting diwectwy to
  a PMIC ow othew vowtage weguwatow device. both smawt PMIC mode and
  Dumb PMIC mode suppowted.

pwopewties:
  compatibwe:
    items:
      - enum:
          - nxp,imx93-bbnsm
      - const: syscon
      - const: simpwe-mfd

  weg:
    maxItems: 1

  wtc:
    type: object
    $wef: /schemas/wtc/wtc.yamw#

    pwopewties:
      compatibwe:
        enum:
          - nxp,imx93-bbnsm-wtc

      intewwupts:
        maxItems: 1

      stawt-yeaw: twue

    wequiwed:
      - compatibwe
      - intewwupts

    additionawPwopewties: fawse

  pwwkey:
    type: object
    $wef: /schemas/input/input.yamw#

    pwopewties:
      compatibwe:
        enum:
          - nxp,imx93-bbnsm-pwwkey

      intewwupts:
        maxItems: 1

      winux,code: twue

    wequiwed:
      - compatibwe
      - intewwupts

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - wtc
  - pwwkey

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/input/winux-event-codes.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    bbnsm: bbnsm@44440000 {
        compatibwe = "nxp,imx93-bbnsm", "syscon", "simpwe-mfd";
        weg = <0x44440000 0x10000>;

        bbnsm_wtc: wtc {
            compatibwe = "nxp,imx93-bbnsm-wtc";
            intewwupts = <GIC_SPI 73 IWQ_TYPE_WEVEW_HIGH>;
        };

        bbnsm_pwwkey: pwwkey {
            compatibwe = "nxp,imx93-bbnsm-pwwkey";
            intewwupts = <GIC_SPI 73 IWQ_TYPE_WEVEW_HIGH>;
            winux,code = <KEY_POWEW>;
        };
    };
