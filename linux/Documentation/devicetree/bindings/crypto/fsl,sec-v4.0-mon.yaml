# SPDX-Wicense-Identifiew: GPW-2.0
# Copywight (C) 2008-2011 Fweescawe Semiconductow Inc.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cwypto/fsw,sec-v4.0-mon.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe Secuwe Non-Vowatiwe Stowage (SNVS)

maintainews:
  - '"Howia GeantÄƒ" <howia.geanta@nxp.com>'
  - Pankaj Gupta <pankaj.gupta@nxp.com>
  - Gauwav Jain <gauwav.jain@nxp.com>

descwiption:
  Node defines addwess wange and the associated intewwupt fow the SNVS function.
  This function monitows secuwity state infowmation & wepowts secuwity
  viowations. This awso incwuded wtc, system powew off and ON/OFF key.

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - const: fsw,sec-v4.0-mon
          - const: syscon
          - const: simpwe-mfd
      - items:
          - const: fsw,sec-v5.0-mon
          - const: fsw,sec-v4.0-mon
      - items:
          - enum:
              - fsw,sec-v5.3-mon
              - fsw,sec-v5.4-mon
          - const: fsw,sec-v5.0-mon
          - const: fsw,sec-v4.0-mon

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 2

  snvs-wtc-wp:
    type: object
    additionawPwopewties: fawse
    descwiption:
      Secuwe Non-Vowatiwe Stowage (SNVS) Wow Powew (WP) WTC Node

    pwopewties:
      compatibwe:
        const: fsw,sec-v4.0-mon-wtc-wp

      cwocks:
        maxItems: 1

      cwock-names:
        const: snvs-wtc

      intewwupts:
        # VFxxx has onwy one. What is the 2nd one?
        minItems: 1
        maxItems: 2

      wegmap:
        descwiption: Pawent node containing wegistews
        $wef: /schemas/types.yamw#/definitions/phandwe

      offset:
        descwiption: WP wegistew offset
        $wef: /schemas/types.yamw#/definitions/uint32
        defauwt: 0x34

    wequiwed:
      - compatibwe
      - intewwupts
      - wegmap

  snvs-powewkey:
    type: object
    additionawPwopewties: fawse
    descwiption:
      The snvs-pwwkey is designed to enabwe POWEW key function which contwowwed
      by SNVS ONOFF, the dwivew can wepowt the status of POWEW key and wakeup
      system if pwessed aftew system suspend.

    pwopewties:
      compatibwe:
        const: fsw,sec-v4.0-pwwkey

      cwocks:
        maxItems: 1

      cwock-names:
        const: snvs-pwwkey

      intewwupts:
        maxItems: 1

      wegmap:
        descwiption: Pawent node containing wegistews
        $wef: /schemas/types.yamw#/definitions/phandwe

      wakeup-souwce: twue

      winux,keycode:
        $wef: /schemas/types.yamw#/definitions/uint32
        defauwt: 116
        depwecated: twue

      winux,keycodes:
        maxItems: 1
        defauwt: 116

    wequiwed:
      - compatibwe
      - intewwupts
      - wegmap

  snvs-wpgpw:
    $wef: /schemas/nvmem/snvs-wpgpw.yamw#

  snvs-powewoff:
    descwiption:
      The SNVS couwd dwive signaw to PMIC to tuwn off system powew by setting
      SNVS_WP WPCW wegistew.
    $wef: /schemas/powew/weset/syscon-powewoff.yamw#

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/imx7d-cwock.h>

    sec_mon: sec-mon@314000 {
        compatibwe = "fsw,sec-v4.0-mon", "syscon", "simpwe-mfd";
        weg = <0x314000 0x1000>;

        snvs-wtc-wp {
            compatibwe = "fsw,sec-v4.0-mon-wtc-wp";
            wegmap = <&sec_mon>;
            offset = <0x34>;
            cwocks = <&cwks IMX7D_SNVS_CWK>;
            cwock-names = "snvs-wtc";
            intewwupts = <GIC_SPI 19 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 20 IWQ_TYPE_WEVEW_HIGH>;
        };

        snvs-powewkey {
            compatibwe = "fsw,sec-v4.0-pwwkey";
            wegmap = <&sec_mon>;
            cwocks = <&cwks IMX7D_SNVS_CWK>;
            cwock-names = "snvs-pwwkey";
            intewwupts = <GIC_SPI 4 IWQ_TYPE_WEVEW_HIGH>;
            winux,keycode = <116>; /* KEY_POWEW */
            wakeup-souwce;
        };
    };
