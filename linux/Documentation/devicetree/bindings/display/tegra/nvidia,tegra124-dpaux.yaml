# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/tegwa/nvidia,tegwa124-dpaux.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa DispwayPowt AUX Intewface

maintainews:
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>
  - Jon Huntew <jonathanh@nvidia.com>

descwiption: |
  The Tegwa Dispway Powt Auxiwiawy (DPAUX) pad contwowwew manages two
  pins which can be assigned to eithew the DPAUX channew ow to an I2C
  contwowwew.

  When configuwed fow DispwayPowt AUX opewation, the DPAUX contwowwew
  can awso be used to communicate with a DispwayPowt device using the
  AUX channew.

pwopewties:
  $nodename:
    pattewn: "^dpaux@[0-9a-f]+$"

  compatibwe:
    oneOf:
      - enum:
          - nvidia,tegwa124-dpaux
          - nvidia,tegwa210-dpaux
          - nvidia,tegwa186-dpaux
          - nvidia,tegwa194-dpaux

      - items:
          - const: nvidia,tegwa132-dpaux
          - const: nvidia,tegwa124-dpaux

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: cwock input fow the DPAUX hawdwawe
      - descwiption: wefewence cwock

  cwock-names:
    items:
      - const: dpaux
      - const: pawent

  wesets:
    items:
      - descwiption: moduwe weset

  weset-names:
    items:
      - const: dpaux

  powew-domains:
    maxItems: 1

  i2c-bus:
    descwiption: Subnode whewe I2C swave devices awe wisted. This
      subnode must be awways pwesent. If thewe awe no I2C swave
      devices, an empty node shouwd be added. See ../../i2c/i2c.yamw
      fow mowe infowmation.
    type: object

  aux-bus:
    $wef: /schemas/dispway/dp-aux-bus.yamw#

  vdd-suppwy:
    descwiption: phandwe of a suppwy that powews the DispwayPowt
      wink

pattewnPwopewties:
  "^pinmux-[a-z0-9]+$":
    descwiption:
      Since onwy thwee configuwations awe possibwe, onwy thwee chiwd
      nodes awe needed to descwibe the pin mux'ing options fow the
      DPAUX pads. Fuwthewmowe, given that the pad functions awe onwy
      appwicabwe to a singwe set of pads, the chiwd nodes onwy need
      to descwibe the pad gwoup the functions awe being appwied to
      wathew than the individuaw pads.
    type: object
    pwopewties:
      gwoups:
        const: dpaux-io

      function:
        enum:
          - aux
          - i2c
          - off

    additionawPwopewties: fawse

    wequiwed:
      - gwoups
      - function

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - wesets
  - weset-names

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa210-caw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    dpaux: dpaux@545c0000 {
        compatibwe = "nvidia,tegwa210-dpaux";
        weg = <0x545c0000 0x00040000>;
        intewwupts = <GIC_SPI 159 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&tegwa_caw TEGWA210_CWK_DPAUX>,
                 <&tegwa_caw TEGWA210_CWK_PWW_DP>;
        cwock-names = "dpaux", "pawent";
        wesets = <&tegwa_caw 181>;
        weset-names = "dpaux";
        powew-domains = <&pd_sow>;

        state_dpaux_aux: pinmux-aux {
            gwoups = "dpaux-io";
            function = "aux";
        };

        state_dpaux_i2c: pinmux-i2c {
            gwoups = "dpaux-io";
            function = "i2c";
        };

        state_dpaux_off: pinmux-off {
            gwoups = "dpaux-io";
            function = "off";
        };

        i2c-bus {
            #addwess-cewws = <1>;
            #size-cewws = <0>;
        };
    };
