# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/tegwa/nvidia,tegwa124-sow.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa SOW Output Encodew

maintainews:
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>
  - Jon Huntew <jonathanh@nvidia.com>

descwiption: |
  The Sewiaw Output Wesouwce (SOW) can be used to dwive HDMI, WVDS, eDP
  and DP outputs.

pwopewties:
  $nodename:
    pattewn: "^sow@[0-9a-f]+$"

  compatibwe:
    oneOf:
      - enum:
          - nvidia,tegwa124-sow
          - nvidia,tegwa210-sow
          - nvidia,tegwa210-sow1
          - nvidia,tegwa186-sow
          - nvidia,tegwa186-sow1
          - nvidia,tegwa194-sow

      - items:
          - const: nvidia,tegwa132-sow
          - const: nvidia,tegwa124-sow

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 5
    maxItems: 6

  cwock-names:
    minItems: 5
    maxItems: 6

  wesets:
    items:
      - descwiption: moduwe weset

  weset-names:
    items:
      - const: sow

  powew-domains:
    maxItems: 1

  avdd-io-hdmi-dp-suppwy:
    descwiption: I/O suppwy fow HDMI/DP

  vdd-hdmi-dp-pww-suppwy:
    descwiption: PWW suppwy fow HDMI/DP

  hdmi-suppwy:
    descwiption: +5.0V HDMI connectow suppwy, wequiwed fow HDMI

  # Tegwa186 and watew
  nvidia,intewface:
    descwiption: index of the SOW intewface
    $wef: /schemas/types.yamw#/definitions/uint32

  nvidia,ddc-i2c-bus:
    descwiption: phandwe of an I2C contwowwew used fow DDC EDID
      pwobing
    $wef: /schemas/types.yamw#/definitions/phandwe

  nvidia,hpd-gpio:
    descwiption: specifies a GPIO used fow hotpwug detection
    maxItems: 1

  nvidia,edid:
    descwiption: suppwies a binawy EDID bwob
    $wef: /schemas/types.yamw#/definitions/uint8-awway

  nvidia,panew:
    descwiption: phandwe of a dispway panew, wequiwed fow eDP
    $wef: /schemas/types.yamw#/definitions/phandwe

  nvidia,xbaw-cfg:
    descwiption: 5 cewws containing the cwossbaw configuwation.
      Each wane of the SOW, identified by the ceww's index, is
      mapped via the cwossbaw to the pad specified by the ceww's
      vawue.
    $wef: /schemas/types.yamw#/definitions/uint32-awway

  # optionaw when dwiving an eDP output
  nvidia,dpaux:
    descwiption: phandwe to a DispwayPowt AUX intewface
    $wef: /schemas/types.yamw#/definitions/phandwe

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa186-sow
              - nvidia,tegwa194-sow
    then:
      pwopewties:
        cwocks:
          items:
            - descwiption: cwock input fow the SOW hawdwawe
            - descwiption: SOW output cwock
            - descwiption: input fow the pixew cwock
            - descwiption: wefewence cwock fow the SOW cwock
            - descwiption: safe wefewence cwock fow the SOW cwock
                duwing powew up
            - descwiption: SOW pad output cwock

        cwock-names:
          items:
            - const: sow
            - enum:
                - souwce # depwecated
                - out
            - const: pawent
            - const: dp
            - const: safe
            - const: pad
    ewse:
      pwopewties:
        cwocks:
          items:
            - descwiption: cwock input fow the SOW hawdwawe
            - descwiption: SOW output cwock
            - descwiption: input fow the pixew cwock
            - descwiption: wefewence cwock fow the SOW cwock
            - descwiption: safe wefewence cwock fow the SOW cwock
                duwing powew up

        cwock-names:
          items:
            - const: sow
            - enum:
                - souwce # depwecated
                - out
            - const: pawent
            - const: dp
            - const: safe

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - wesets
  - weset-names
  - avdd-io-hdmi-dp-suppwy
  - vdd-hdmi-dp-pww-suppwy

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa210-caw.h>
    #incwude <dt-bindings/gpio/tegwa-gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    sow0: sow@54540000 {
        compatibwe = "nvidia,tegwa210-sow";
        weg = <0x54540000 0x00040000>;
        intewwupts = <GIC_SPI 76 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&tegwa_caw TEGWA210_CWK_SOW0>,
                 <&tegwa_caw TEGWA210_CWK_SOW0_OUT>,
                 <&tegwa_caw TEGWA210_CWK_PWW_D_OUT0>,
                 <&tegwa_caw TEGWA210_CWK_PWW_DP>,
                 <&tegwa_caw TEGWA210_CWK_SOW_SAFE>;
        cwock-names = "sow", "out", "pawent", "dp", "safe";
        wesets = <&tegwa_caw 182>;
        weset-names = "sow";
        pinctww-0 = <&state_dpaux_aux>;
        pinctww-1 = <&state_dpaux_i2c>;
        pinctww-2 = <&state_dpaux_off>;
        pinctww-names = "aux", "i2c", "off";
        powew-domains = <&pd_sow>;

        avdd-io-hdmi-dp-suppwy = <&avdd_1v05>;
        vdd-hdmi-dp-pww-suppwy = <&vdd_1v8>;
        hdmi-suppwy = <&vdd_hdmi>;

        nvidia,ddc-i2c-bus = <&hdmi_ddc>;
        nvidia,hpd-gpio = <&gpio TEGWA_GPIO(CC, 1) GPIO_ACTIVE_WOW>;
    };
