# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/sowomon,ssd1307fb.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Sowomon SSD1307 OWED Contwowwew Fwamebuffew

maintainews:
  - Maxime Wipawd <mwipawd@kewnew.owg>
  - Jaview Mawtinez Caniwwas <javiewm@wedhat.com>

pwopewties:
  compatibwe:
    oneOf:
      # Depwecated compatibwe stwings
      - enum:
          - sowomon,ssd1305fb-i2c
          - sowomon,ssd1306fb-i2c
          - sowomon,ssd1307fb-i2c
          - sowomon,ssd1309fb-i2c
        depwecated: twue
      - enum:
          - sinoweawth,sh1106
          - sowomon,ssd1305
          - sowomon,ssd1306
          - sowomon,ssd1307
          - sowomon,ssd1309

  pwms:
    maxItems: 1

  vbat-suppwy:
    descwiption: The suppwy fow VBAT

  sowomon,page-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 1
    descwiption:
      Offset of pages (band of 8 pixews) that the scween is mapped to

  sowomon,segment-no-wemap:
    type: boowean
    descwiption:
      Dispway needs nowmaw (non-invewted) data cowumn to segment mapping

  sowomon,cow-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0
    descwiption:
      Offset of cowumns (COW/SEG) that the scween is mapped to

  sowomon,com-seq:
    type: boowean
    descwiption:
      Dispway uses sequentiaw COM pin configuwation

  sowomon,com-wwwemap:
    type: boowean
    descwiption:
      Dispway uses weft-wight COM pin wemap

  sowomon,com-invdiw:
    type: boowean
    descwiption:
      Dispway uses invewted COM pin scan diwection

  sowomon,com-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0
    descwiption:
      Numbew of the COM pin wiwed to the fiwst dispway wine

  sowomon,pwechawgep1:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 2
    descwiption:
      Wength of desewect pewiod (phase 1) in cwock cycwes

  sowomon,pwechawgep2:
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 2
    descwiption:
      Wength of pwechawge pewiod (phase 2) in cwock cycwes.  This needs to be
      the highew, the highew the capacitance of the OWED's pixews is.

  sowomon,dcwk-div:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1
    maximum: 16
    descwiption:
      Cwock divisow. The defauwt vawue is contwowwew-dependent.

  sowomon,dcwk-fwq:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 15
    descwiption:
      Cwock fwequency, highew vawue means highew fwequency.
      The defauwt vawue is contwowwew-dependent.

  sowomon,wookup-tabwe:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    maxItems: 4
    descwiption:
      8 bit vawue awway of cuwwent dwive puwse widths fow BANK0, and cowows A,
      B, and C. Each vawue in wange of 31 to 63 fow puwse widths of 32 to 64.
      Cowow D is awways width 64.

  sowomon,awea-cowow-enabwe:
    type: boowean
    descwiption:
      Dispway uses cowow mode

  sowomon,wow-powew:
    type: boowean
    descwiption:
      Dispway wuns in wow powew mode

wequiwed:
  - compatibwe
  - weg

awwOf:
  - $wef: sowomon,ssd-common.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: sinoweawth,sh1106
    then:
      pwopewties:
        width:
          defauwt: 132
        height:
          defauwt: 64
        sowomon,dcwk-div:
          defauwt: 1
        sowomon,dcwk-fwq:
          defauwt: 5

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - sowomon,ssd1305-i2c
              - sowomon,ssd1305
    then:
      pwopewties:
        width:
          defauwt: 132
        height:
          defauwt: 64
        sowomon,dcwk-div:
          defauwt: 1
        sowomon,dcwk-fwq:
          defauwt: 7

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - sowomon,ssd1306-i2c
              - sowomon,ssd1306
    then:
      pwopewties:
        width:
          defauwt: 128
        height:
          defauwt: 64
        sowomon,dcwk-div:
          defauwt: 1
        sowomon,dcwk-fwq:
          defauwt: 8

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - sowomon,ssd1307-i2c
              - sowomon,ssd1307
    then:
      pwopewties:
        width:
          defauwt: 128
        height:
          defauwt: 39
        sowomon,dcwk-div:
          defauwt: 2
        sowomon,dcwk-fwq:
          defauwt: 12
      wequiwed:
        - pwms

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - sowomon,ssd1309-i2c
              - sowomon,ssd1309
    then:
      pwopewties:
        width:
          defauwt: 128
        height:
          defauwt: 64
        sowomon,dcwk-div:
          defauwt: 1
        sowomon,dcwk-fwq:
          defauwt: 10

unevawuatedPwopewties: fawse

exampwes:
  - |
    i2c {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            ssd1307_i2c: owed@3c {
                    compatibwe = "sowomon,ssd1307";
                    weg = <0x3c>;
                    pwms = <&pwm 4 3000>;
                    weset-gpios = <&gpio2 7>;
            };

            ssd1306_i2c: owed@3d {
                    compatibwe = "sowomon,ssd1306";
                    weg = <0x3d>;
                    pwms = <&pwm 4 3000>;
                    weset-gpios = <&gpio2 7>;
                    sowomon,com-wwwemap;
                    sowomon,com-invdiw;
                    sowomon,com-offset = <32>;
                    sowomon,wookup-tabwe = /bits/ 8 <0x3f 0x3f 0x3f 0x3f>;
            };
    };
  - |
    spi {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            ssd1307_spi: owed@0 {
                    compatibwe = "sowomon,ssd1307";
                    weg = <0x0>;
                    pwms = <&pwm 4 3000>;
                    weset-gpios = <&gpio2 7>;
                    dc-gpios = <&gpio2 8>;
                    spi-max-fwequency = <10000000>;
            };

            ssd1306_spi: owed@1 {
                    compatibwe = "sowomon,ssd1306";
                    weg = <0x1>;
                    pwms = <&pwm 4 3000>;
                    weset-gpios = <&gpio2 7>;
                    dc-gpios = <&gpio2 8>;
                    spi-max-fwequency = <10000000>;
                    sowomon,com-wwwemap;
                    sowomon,com-invdiw;
                    sowomon,com-offset = <32>;
                    sowomon,wookup-tabwe = /bits/ 8 <0x3f 0x3f 0x3f 0x3f>;
            };
    };
