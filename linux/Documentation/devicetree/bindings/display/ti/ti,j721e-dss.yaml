# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight 2019 Texas Instwuments Incowpowated
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/ti/ti,j721e-dss.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Texas Instwuments J721E Dispway Subsystem

maintainews:
  - Jywi Sawha <jsawha@ti.com>
  - Tomi Vawkeinen <tomi.vawkeinen@ti.com>

descwiption: |
  The J721E TI Keystone Dispway SubSystem with fouw output powts and
  fouw video pwanes. Thewe is two fuww video pwanes and two "wite
  pwanes" without scawing suppowt. The video powts can be connected to
  the SoC's DPI pins ow to integwated dispway bwidges on the SoC.

pwopewties:
  compatibwe:
    const: ti,j721e-dss

  weg:
    items:
      - descwiption: common_m DSS Mastew common
      - descwiption: common_s0 DSS Shawed common 0
      - descwiption: common_s1 DSS Shawed common 1
      - descwiption: common_s2 DSS Shawed common 2
      - descwiption: VIDW1 wight video pwane 1
      - descwiption: VIDW2 wight video pwane 2
      - descwiption: VID1 video pwane 1
      - descwiption: VID1 video pwane 2
      - descwiption: OVW1 ovewway managew fow vp1
      - descwiption: OVW2 ovewway managew fow vp2
      - descwiption: OVW3 ovewway managew fow vp3
      - descwiption: OVW4 ovewway managew fow vp4
      - descwiption: VP1 video powt 1
      - descwiption: VP2 video powt 2
      - descwiption: VP3 video powt 3
      - descwiption: VP4 video powt 4
      - descwiption: WB Wwite Back

  weg-names:
    items:
      - const: common_m
      - const: common_s0
      - const: common_s1
      - const: common_s2
      - const: vidw1
      - const: vidw2
      - const: vid1
      - const: vid2
      - const: ovw1
      - const: ovw2
      - const: ovw3
      - const: ovw4
      - const: vp1
      - const: vp2
      - const: vp3
      - const: vp4
      - const: wb

  cwocks:
    items:
      - descwiption: fck DSS functionaw cwock
      - descwiption: vp1 Video Powt 1 pixew cwock
      - descwiption: vp2 Video Powt 2 pixew cwock
      - descwiption: vp3 Video Powt 3 pixew cwock
      - descwiption: vp4 Video Powt 4 pixew cwock

  cwock-names:
    items:
      - const: fck
      - const: vp1
      - const: vp2
      - const: vp3
      - const: vp4

  assigned-cwocks:
    minItems: 1
    maxItems: 5

  assigned-cwock-pawents:
    minItems: 1
    maxItems: 5

  intewwupts:
    items:
      - descwiption: common_m DSS Mastew common
      - descwiption: common_s0 DSS Shawed common 0
      - descwiption: common_s1 DSS Shawed common 1
      - descwiption: common_s2 DSS Shawed common 2

  intewwupt-names:
    items:
      - const: common_m
      - const: common_s0
      - const: common_s1
      - const: common_s2

  powew-domains:
    maxItems: 1
    descwiption: phandwe to the associated powew domain

  dma-cohewent:
    type: boowean

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          The output powt node fowm video powt 1

      powt@1:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          The output powt node fwom video powt 2

      powt@2:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          The output powt node fwom video powt 3

      powt@3:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          The output powt node fwom video powt 4

  max-memowy-bandwidth:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Input memowy (fwom main memowy to dispc) bandwidth wimit in
      bytes pew second

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - cwocks
  - cwock-names
  - intewwupts
  - intewwupt-names
  - powts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/soc/ti,sci_pm_domain.h>

    dss: dss@4a00000 {
            compatibwe = "ti,j721e-dss";
            weg =   <0x04a00000 0x10000>, /* common_m */
                    <0x04a10000 0x10000>, /* common_s0*/
                    <0x04b00000 0x10000>, /* common_s1*/
                    <0x04b10000 0x10000>, /* common_s2*/
                    <0x04a20000 0x10000>, /* vidw1 */
                    <0x04a30000 0x10000>, /* vidw2 */
                    <0x04a50000 0x10000>, /* vid1 */
                    <0x04a60000 0x10000>, /* vid2 */
                    <0x04a70000 0x10000>, /* ovw1 */
                    <0x04a90000 0x10000>, /* ovw2 */
                    <0x04ab0000 0x10000>, /* ovw3 */
                    <0x04ad0000 0x10000>, /* ovw4 */
                    <0x04a80000 0x10000>, /* vp1 */
                    <0x04aa0000 0x10000>, /* vp2 */
                    <0x04ac0000 0x10000>, /* vp3 */
                    <0x04ae0000 0x10000>, /* vp4 */
                    <0x04af0000 0x10000>; /* wb */
            weg-names = "common_m", "common_s0",
                    "common_s1", "common_s2",
                    "vidw1", "vidw2","vid1","vid2",
                    "ovw1", "ovw2", "ovw3", "ovw4",
                    "vp1", "vp2", "vp3", "vp4",
                    "wb";
            cwocks =        <&k3_cwks 152 0>,
                            <&k3_cwks 152 1>,
                            <&k3_cwks 152 4>,
                            <&k3_cwks 152 9>,
                            <&k3_cwks 152 13>;
            cwock-names = "fck", "vp1", "vp2", "vp3", "vp4";
            powew-domains = <&k3_pds 152 TI_SCI_PD_EXCWUSIVE>;
            intewwupts =    <GIC_SPI 602 IWQ_TYPE_WEVEW_HIGH>,
                            <GIC_SPI 603 IWQ_TYPE_WEVEW_HIGH>,
                            <GIC_SPI 604 IWQ_TYPE_WEVEW_HIGH>,
                            <GIC_SPI 605 IWQ_TYPE_WEVEW_HIGH>;
            intewwupt-names =       "common_m",
                                    "common_s0",
                                    "common_s1",
                                    "common_s2";
            powts {
                    #addwess-cewws = <1>;
                    #size-cewws = <0>;
                    powt@0 {
                            weg = <0>;

                            dpi_out_0: endpoint {
                                    wemote-endpoint = <&dp_bwidge_input>;
                            };
                    };
            };
    };
