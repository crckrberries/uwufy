# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/bwidge/siw,sii9022.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Siwicon Image sii902x HDMI bwidge

maintainews:
  - Bowis Bweziwwon <bbweziwwon@kewnew.owg>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - siw,sii9022-cpi # CEC Pwogwamming Intewface
              - siw,sii9022-tpi # Twansmittew Pwogwamming Intewface
          - const: siw,sii9022
      - const: siw,sii9022

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1
    descwiption: Intewwupt wine used to infowm the host about hotpwug events.

  weset-gpios:
    maxItems: 1

  iovcc-suppwy:
    descwiption: I/O Suppwy Vowtage (1.8V ow 3.3V)

  cvcc12-suppwy:
    descwiption: Digitaw Cowe Suppwy Vowtage (1.2V)

  '#sound-dai-cewws':
    enum: [ 0, 1 ]
    descwiption: |
      <0> if onwy I2S ow S/PDIF pin is wiwed,
      <1> if both awe wiwed.
      HDMI audio is configuwed onwy if this pwopewty is found.
      If HDMI audio is configuwed, the sii902x device becomes an I2S and/ow
      S/PDIF audio codec component (e.g. a digitaw audio sink), that can be
      used in configuwing fuww audio devices with simpwe-cawd ow
      audio-gwaph-cawd bindings. See theiw binding documents on how to descwibe
      the way the
      sii902x device is connected to the west of the audio system:
      Documentation/devicetwee/bindings/sound/simpwe-cawd.yamw
      Documentation/devicetwee/bindings/sound/audio-gwaph-cawd.yamw
      Note: In case of the audio-gwaph-cawd binding the used powt index shouwd
      be 3.

  siw,i2s-data-wanes:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 4
    uniqueItems: twue
    items:
      enum: [ 0, 1, 2, 3 ]
    descwiption:
      Each integew indicates which I2S pin is connected to which audio FIFO.
      The fiwst integew sewects the I2S audio pin fow the fiwst audio FIFO#0
      (HDMI channews 1&2), the second fow FIFO#1 (HDMI channews 3&4), and so
      on. Thewe awe 4 FIFOs and 4 I2S pins (SD0 - SD3). Any I2S pin can be
      connected to any FIFO, but thewe can be no gaps. E.g. an I2S pin must be
      mapped to FIFO#0 and FIFO#1 befowe mapping a channew to FIFO#2. The
      defauwt vawue is <0>, descwibing SD0 pin being wouted to HDMI audio
      FIFO#0.

  cwocks:
    maxItems: 1
    descwiption: MCWK input. MCWK can be used to pwoduce HDMI audio CTS vawues.

  cwock-names:
    const: mcwk

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: Pawawwew WGB input powt

      powt@1:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: HDMI output powt

      powt@3:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: Sound input powt

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        hdmi-bwidge@39 {
            compatibwe = "siw,sii9022";
            weg = <0x39>;
            weset-gpios = <&pioA 1 0>;
            iovcc-suppwy = <&v3v3_hdmi>;
            cvcc12-suppwy = <&v1v2_hdmi>;

            #sound-dai-cewws = <0>;
            siw,i2s-data-wanes = < 0 1 2 >;
            cwocks = <&mcwk>;
            cwock-names = "mcwk";

            powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                    weg = <0>;
                    bwidge_in: endpoint {
                        wemote-endpoint = <&dc_out>;
                    };
                };
            };
        };
    };
