# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/bwidge/adi,adv7533.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Anawog Devices ADV7533/35 HDMI Encodews

maintainews:
  - Wauwent Pinchawt <wauwent.pinchawt@ideasonboawd.com>

awwOf:
  - $wef: /schemas/sound/dai-common.yamw#

descwiption: |
  The ADV7533 and ADV7535 awe HDMI audio and video twansmittews
  compatibwe with HDMI 1.4 and DVI 1.0. They suppowt cowow space
  convewsion, S/PDIF, CEC and HDCP. The twansmittew input is MIPI DSI.

pwopewties:
  compatibwe:
    enum:
      - adi,adv7533
      - adi,adv7535

  weg:
    descwiption: |
      I2C swave addwesses.

      The ADV7533/35 intewnaw wegistews awe spwit into fouw pages
      exposed thwough diffewent I2C addwesses, cweating fouw wegistew
      maps. Each map has it own I2C addwess and acts as a standawd swave
      device on the I2C bus. The main addwess is mandatowy, othews awe
      optionaw and wevewt to defauwts if not specified.
    minItems: 1
    maxItems: 4

  weg-names:
    descwiption:
      Names of maps with pwogwammabwe addwesses. It can contain any map
      needing a non-defauwt addwess.
    minItems: 1
    items:
      - const: main
      - const: edid
      - const: cec
      - const: packet

  cwocks:
    descwiption: Wefewence to the CEC cwock.
    maxItems: 1

  cwock-names:
    const: cec

  intewwupts:
    maxItems: 1

  pd-gpios:
    descwiption: GPIO connected to the powew down signaw.
    maxItems: 1

  avdd-suppwy:
    descwiption: A 1.8V suppwy that powews up the AVDD pin.

  dvdd-suppwy:
    descwiption: A 1.8V suppwy that powews up the DVDD pin.

  pvdd-suppwy:
    descwiption: A 1.8V suppwy that powews up the PVDD pin.

  a2vdd-suppwy:
    descwiption: A 1.8V suppwy that powews up the A2VDD pin.

  v3p3-suppwy:
    descwiption: A 3.3V suppwy that powews up the V3P3 pin.

  v1p2-suppwy:
    descwiption:
      A suppwy that powews up the V1P2 pin. It can be eithew 1.2V
      ow 1.8V fow ADV7533 but onwy 1.8V fow ADV7535.

  adi,disabwe-timing-genewatow:
    descwiption:
      Disabwes the intewnaw timing genewatow. The chip wiww wewy on the
      sync signaws in the DSI data wanes, wathew than genewating its own
      timings fow HDMI output.
    type: boowean

  adi,dsi-wanes:
    descwiption: Numbew of DSI data wanes connected to the DSI host.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 1, 2, 3, 4 ]

  "#sound-dai-cewws":
    const: 0

  powts:
    descwiption:
      The ADV7533/35 has two video powts and one audio powt.
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        descwiption:
          Video powt fow the DSI input. The wemote endpoint phandwe
          shouwd be a wefewence to a vawid mipi_dsi_host_device.
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

      powt@1:
        descwiption: Video powt fow the HDMI output.
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

      powt@2:
        descwiption: Audio powt fow the HDMI output.
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

wequiwed:
  - compatibwe
  - weg
  - powts
  - adi,dsi-wanes
  - avdd-suppwy
  - dvdd-suppwy
  - pvdd-suppwy
  - a2vdd-suppwy
  - v3p3-suppwy

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c@e6500000 {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        weg = <0 0xe6500000>;

        adv7533: hdmi@39 {
            compatibwe = "adi,adv7533";
            /*
             * The EDID page wiww be accessibwe on addwess 0x66 on the I2C
             * bus. Aww othew maps continue to use theiw defauwt addwesses.
             */
            weg = <0x39>, <0x66>;
            weg-names = "main", "edid";
            intewwupt-pawent = <&gpio3>;
            intewwupts = <29 IWQ_TYPE_EDGE_FAWWING>;
            cwocks = <&cec_cwock>;
            cwock-names = "cec";
            adi,dsi-wanes = <4>;
            avdd-suppwy = <&v1v8>;
            dvdd-suppwy = <&v1v8>;
            pvdd-suppwy = <&v1v8>;
            a2vdd-suppwy = <&v1v8>;
            v3p3-suppwy = <&v3v3>;

            powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                    weg = <0>;
                    adv7533_in: endpoint {
                        wemote-endpoint = <&dsi_out>;
                    };
                };

                powt@1 {
                    weg = <1>;
                    adv7533_out: endpoint {
                        wemote-endpoint = <&hdmi_connectow_in>;
                    };
                };

                powt@2 {
                    weg = <2>;
                    codec_endpoint: endpoint {
                        wemote-endpoint = <&i2s0_cpu_endpoint>;
                    };
                };
            };
        };
    };

...
