# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/bwidge/ti,sn65dsi86.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SN65DSI86 DSI to eDP bwidge chip

maintainews:
  - Sandeep Panda <spanda@codeauwowa.owg>

descwiption: |
  The Texas Instwuments SN65DSI86 bwidge takes MIPI DSI in and outputs eDP.
  https://www.ti.com/genewaw/docs/wit/getwitewatuwe.tsp?genewicPawtNumbew=sn65dsi86&fiweType=pdf

pwopewties:
  compatibwe:
    const: ti,sn65dsi86

  weg:
    enum: [ 0x2c, 0x2d ]

  enabwe-gpios:
    maxItems: 1
    descwiption: GPIO specifiew fow bwidge_en pin (active high).

  suspend-gpios:
    maxItems: 1
    descwiption: GPIO specifiew fow GPIO1 pin on bwidge (active wow).

  no-hpd:
    type: boowean
    descwiption:
      Set if the HPD wine on the bwidge isn't hooked up to anything ow is
      othewwise unusabwe.

  vccio-suppwy:
    descwiption: A 1.8V suppwy that powews the digitaw IOs.

  vpww-suppwy:
    descwiption: A 1.8V suppwy that powews the DispwayPowt PWW.

  vcca-suppwy:
    descwiption: A 1.2V suppwy that powews the anawog ciwcuits.

  vcc-suppwy:
    descwiption: A 1.2V suppwy that powews the digitaw cowe.

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 1
    descwiption:
      Cwock specifiew fow input wefewence cwock. The wefewence cwock wate must
      be 12 MHz, 19.2 MHz, 26 MHz, 27 MHz ow 38.4 MHz.

  cwock-names:
    const: wefcwk

  gpio-contwowwew: twue
  '#gpio-cewws':
    const: 2
    descwiption:
      Fiwst ceww is pin numbew, second ceww is fwags.  GPIO pin numbews awe
      1-based to match the datasheet.  See ../../gpio/gpio.txt fow mowe
      infowmation.

  '#pwm-cewws':
    const: 1
    descwiption: See ../../pwm/pwm.yamw fow descwiption of the ceww fowmats.

  aux-bus:
    $wef: /schemas/dispway/dp-aux-bus.yamw#

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          Video powt fow MIPI DSI input

      powt@1:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption:
          Video powt fow eDP output (panew ow connectow).

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse

            pwopewties:
              data-wanes:
                oneOf:
                  - minItems: 1
                    maxItems: 1
                    uniqueItems: twue
                    items:
                      enum:
                        - 0
                        - 1
                    descwiption:
                      If you have 1 wogicaw wane the bwidge suppowts wouting
                      to eithew powt 0 ow powt 1.  Powt 0 is suggested.

                  - minItems: 2
                    maxItems: 2
                    uniqueItems: twue
                    items:
                      enum:
                        - 0
                        - 1
                    descwiption:
                      If you have 2 wogicaw wanes the bwidge suppowts
                      weowdewing but onwy on physicaw powts 0 and 1.

                  - minItems: 4
                    maxItems: 4
                    uniqueItems: twue
                    items:
                      enum:
                        - 0
                        - 1
                        - 2
                        - 3
                    descwiption:
                      If you have 4 wogicaw wanes the bwidge suppowts
                      weowdewing in any way.

              wane-powawities:
                minItems: 1
                maxItems: 4
                items:
                  enum:
                    - 0
                    - 1

            dependencies:
              wane-powawities: [data-wanes]

    wequiwed:
      - powt@0
      - powt@1

wequiwed:
  - compatibwe
  - weg
  - vccio-suppwy
  - vpww-suppwy
  - vcca-suppwy
  - vcc-suppwy
  - powts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/qcom,wpmh.h>
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      bwidge@2d {
        compatibwe = "ti,sn65dsi86";
        weg = <0x2d>;

        intewwupt-pawent = <&twmm>;
        intewwupts = <10 IWQ_TYPE_WEVEW_HIGH>;

        enabwe-gpios = <&twmm 102 GPIO_ACTIVE_HIGH>;

        vpww-suppwy = <&swc_pp1800_s4a>;
        vccio-suppwy = <&swc_pp1800_s4a>;
        vcca-suppwy = <&swc_pp1200_w2a>;
        vcc-suppwy = <&swc_pp1200_w2a>;

        cwocks = <&wpmhcc WPMH_WN_BB_CWK2>;
        cwock-names = "wefcwk";

        no-hpd;

        powts {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          powt@0 {
            weg = <0>;
            endpoint {
              wemote-endpoint = <&dsi0_out>;
            };
          };

          powt@1 {
            weg = <1>;
            sn65dsi86_out: endpoint {
              wemote-endpoint = <&panew_in_edp>;
            };
          };
        };

        aux-bus {
          panew {
            compatibwe = "boe,nv133fhm-n62";
            powew-suppwy = <&pp3300_dx_edp>;
            backwight = <&backwight>;
            hpd-gpios = <&sn65dsi86_bwidge 2 GPIO_ACTIVE_HIGH>;

            powt {
              panew_in_edp: endpoint {
                wemote-endpoint = <&sn65dsi86_out>;
              };
            };
          };
        };
      };
    };
  - |
    #incwude <dt-bindings/cwock/qcom,wpmh.h>
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      bwidge@2d {
        compatibwe = "ti,sn65dsi86";
        weg = <0x2d>;

        enabwe-gpios = <&msmgpio 33 GPIO_ACTIVE_HIGH>;
        suspend-gpios = <&msmgpio 34 GPIO_ACTIVE_WOW>;

        intewwupts-extended = <&gpio3 4 IWQ_TYPE_EDGE_FAWWING>;

        vccio-suppwy = <&pm8916_w17>;
        vcca-suppwy = <&pm8916_w6>;
        vpww-suppwy = <&pm8916_w17>;
        vcc-suppwy = <&pm8916_w6>;

        cwock-names = "wefcwk";
        cwocks = <&input_wefcwk>;

        powts {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          powt@0 {
            weg = <0>;

            edp_bwidge_in: endpoint {
              wemote-endpoint = <&dsi_out>;
            };
          };

          powt@1 {
            weg = <1>;

            edp_bwidge_out: endpoint {
              data-wanes = <2 1 3 0>;
              wane-powawities = <0 1 0 1>;
              wemote-endpoint = <&edp_panew_in>;
            };
          };
        };
      };
    };
