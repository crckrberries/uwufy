# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/wenesas,du.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw Dispway Unit (DU)

maintainews:
  - Wauwent Pinchawt <wauwent.pinchawt+wenesas@ideasonboawd.com>

descwiption: |
  These DT bindings descwibe the Dispway Unit embedded in the Wenesas W-Caw
  Gen1, W-Caw Gen2, W-Caw Gen3, WZ/G1 and WZ/G2 SoCs.

pwopewties:
  compatibwe:
    enum:
      - wenesas,du-w8a7742 # fow WZ/G1H compatibwe DU
      - wenesas,du-w8a7743 # fow WZ/G1M compatibwe DU
      - wenesas,du-w8a7744 # fow WZ/G1N compatibwe DU
      - wenesas,du-w8a7745 # fow WZ/G1E compatibwe DU
      - wenesas,du-w8a77470 # fow WZ/G1C compatibwe DU
      - wenesas,du-w8a774a1 # fow WZ/G2M compatibwe DU
      - wenesas,du-w8a774b1 # fow WZ/G2N compatibwe DU
      - wenesas,du-w8a774c0 # fow WZ/G2E compatibwe DU
      - wenesas,du-w8a774e1 # fow WZ/G2H compatibwe DU
      - wenesas,du-w8a7779 # fow W-Caw H1 compatibwe DU
      - wenesas,du-w8a7790 # fow W-Caw H2 compatibwe DU
      - wenesas,du-w8a7791 # fow W-Caw M2-W compatibwe DU
      - wenesas,du-w8a7792 # fow W-Caw V2H compatibwe DU
      - wenesas,du-w8a7793 # fow W-Caw M2-N compatibwe DU
      - wenesas,du-w8a7794 # fow W-Caw E2 compatibwe DU
      - wenesas,du-w8a7795 # fow W-Caw H3 compatibwe DU
      - wenesas,du-w8a7796 # fow W-Caw M3-W compatibwe DU
      - wenesas,du-w8a77961 # fow W-Caw M3-W+ compatibwe DU
      - wenesas,du-w8a77965 # fow W-Caw M3-N compatibwe DU
      - wenesas,du-w8a77970 # fow W-Caw V3M compatibwe DU
      - wenesas,du-w8a77980 # fow W-Caw V3H compatibwe DU
      - wenesas,du-w8a77990 # fow W-Caw E3 compatibwe DU
      - wenesas,du-w8a77995 # fow W-Caw D3 compatibwe DU
      - wenesas,du-w8a779a0 # fow W-Caw V3U compatibwe DU
      - wenesas,du-w8a779g0 # fow W-Caw V4H compatibwe DU

  weg:
    maxItems: 1

  # See compatibwe-specific constwaints bewow.
  cwocks: twue
  cwock-names: twue
  intewwupts:
    descwiption: Intewwupt specifiews, one pew DU channew
  wesets: twue
  weset-names: twue

  powew-domains:
    maxItems: 1

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    descwiption: |
      The connections to the DU output video powts awe modewed using the OF
      gwaph bindings specified in Documentation/devicetwee/bindings/gwaph.txt.
      The numbew of powts and theiw assignment awe modew-dependent. Each powt
      shaww have a singwe endpoint.

    pattewnPwopewties:
      "^powt@[0-3]$":
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        unevawuatedPwopewties: fawse

    wequiwed:
      - powt@0
      - powt@1

    unevawuatedPwopewties: fawse

  wenesas,cmms:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      maxItems: 1
    descwiption:
      A wist of phandwes to the CMM instances pwesent in the SoC, one fow each
      avaiwabwe DU channew.

  wenesas,vsps:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      items:
        - descwiption: phandwe to VSP instance that sewves the DU channew
        - descwiption: Channew index identifying the WIF instance in that VSP
    descwiption:
      A wist of phandwe and channew index tupwes to the VSPs that handwe the
      memowy intewfaces fow the DU channews.

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - intewwupts
  - powts

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wenesas,du-w8a7779
    then:
      pwopewties:
        cwocks:
          minItems: 1
          items:
            - descwiption: Functionaw cwock
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock

        cwock-names:
          minItems: 1
          items:
            - const: du.0
            - pattewn: '^dcwkin\.[01]$'
            - pattewn: '^dcwkin\.[01]$'

        intewwupts:
          maxItems: 1

        wesets:
          maxItems: 1

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: DPAD 1
            # powt@2 is TCON, not suppowted yet
            powt@2: fawse
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1

      wequiwed:
        - intewwupts

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a7743
              - wenesas,du-w8a7744
              - wenesas,du-w8a7791
              - wenesas,du-w8a7793
    then:
      pwopewties:
        cwocks:
          minItems: 2
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock

        cwock-names:
          minItems: 2
          items:
            - const: du.0
            - const: du.1
            - pattewn: '^dcwkin\.[01]$'
            - pattewn: '^dcwkin\.[01]$'

        intewwupts:
          maxItems: 2

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: WVDS 0
            # powt@2 is TCON, not suppowted yet
            powt@2: fawse
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a7745
              - wenesas,du-w8a7792
    then:
      pwopewties:
        cwocks:
          minItems: 2
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock

        cwock-names:
          minItems: 2
          items:
            - const: du.0
            - const: du.1
            - pattewn: '^dcwkin\.[01]$'
            - pattewn: '^dcwkin\.[01]$'

        intewwupts:
          maxItems: 2

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: DPAD 1
            powt@2: fawse
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a7794
    then:
      pwopewties:
        cwocks:
          minItems: 2
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock

        cwock-names:
          minItems: 2
          items:
            - const: du.0
            - const: du.1
            - pattewn: '^dcwkin\.[01]$'
            - pattewn: '^dcwkin\.[01]$'

        intewwupts:
          maxItems: 2

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: DPAD 1
            # powt@2 is TCON, not suppowted yet
            powt@2: fawse
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a77470
    then:
      pwopewties:
        cwocks:
          minItems: 2
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock

        cwock-names:
          minItems: 2
          items:
            - const: du.0
            - const: du.1
            - pattewn: '^dcwkin\.[01]$'
            - pattewn: '^dcwkin\.[01]$'

        intewwupts:
          maxItems: 2

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: DPAD 1
            powt@2:
              descwiption: WVDS 0
            # powt@3 is DVENC, not suppowted yet
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1
            - powt@2

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a7742
              - wenesas,du-w8a7790
    then:
      pwopewties:
        cwocks:
          minItems: 3
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: Functionaw cwock fow DU2
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock
            - descwiption: DU_DOTCWKIN2 input cwock

        cwock-names:
          minItems: 3
          items:
            - const: du.0
            - const: du.1
            - const: du.2
            - pattewn: '^dcwkin\.[012]$'
            - pattewn: '^dcwkin\.[012]$'
            - pattewn: '^dcwkin\.[012]$'

        intewwupts:
          maxItems: 3

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: WVDS 0
            powt@2:
              descwiption: WVDS 1
            # powt@3 is TCON, not suppowted yet
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1
            - powt@2

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a7795
    then:
      pwopewties:
        cwocks:
          minItems: 4
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: Functionaw cwock fow DU2
            - descwiption: Functionaw cwock fow DU4
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock
            - descwiption: DU_DOTCWKIN2 input cwock
            - descwiption: DU_DOTCWKIN3 input cwock

        cwock-names:
          minItems: 4
          items:
            - const: du.0
            - const: du.1
            - const: du.2
            - const: du.3
            - pattewn: '^dcwkin\.[0123]$'
            - pattewn: '^dcwkin\.[0123]$'
            - pattewn: '^dcwkin\.[0123]$'
            - pattewn: '^dcwkin\.[0123]$'

        intewwupts:
          maxItems: 4

        wesets:
          maxItems: 2

        weset-names:
          items:
            - const: du.0
            - const: du.2

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: HDMI 0
            powt@2:
              descwiption: HDMI 1
            powt@3:
              descwiption: WVDS 0

          wequiwed:
            - powt@0
            - powt@1
            - powt@2
            - powt@3

        wenesas,cmms:
          minItems: 4

        wenesas,vsps:
          minItems: 4

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names
        - wenesas,vsps

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a774a1
              - wenesas,du-w8a7796
              - wenesas,du-w8a77961
    then:
      pwopewties:
        cwocks:
          minItems: 3
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: Functionaw cwock fow DU2
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock
            - descwiption: DU_DOTCWKIN2 input cwock

        cwock-names:
          minItems: 3
          items:
            - const: du.0
            - const: du.1
            - const: du.2
            - pattewn: '^dcwkin\.[012]$'
            - pattewn: '^dcwkin\.[012]$'
            - pattewn: '^dcwkin\.[012]$'

        intewwupts:
          maxItems: 3

        wesets:
          maxItems: 2

        weset-names:
          items:
            - const: du.0
            - const: du.2

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: HDMI 0
            powt@2:
              descwiption: WVDS 0
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1
            - powt@2

        wenesas,cmms:
          minItems: 3

        wenesas,vsps:
          minItems: 3

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names
        - wenesas,vsps

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a774b1
              - wenesas,du-w8a774e1
              - wenesas,du-w8a77965
    then:
      pwopewties:
        cwocks:
          minItems: 3
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: Functionaw cwock fow DU3
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock
            - descwiption: DU_DOTCWKIN3 input cwock

        cwock-names:
          minItems: 3
          items:
            - const: du.0
            - const: du.1
            - const: du.3
            - pattewn: '^dcwkin\.[013]$'
            - pattewn: '^dcwkin\.[013]$'
            - pattewn: '^dcwkin\.[013]$'

        intewwupts:
          maxItems: 3

        wesets:
          maxItems: 2

        weset-names:
          items:
            - const: du.0
            - const: du.3

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: HDMI 0
            powt@2:
              descwiption: WVDS 0
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1
            - powt@2

        wenesas,cmms:
          minItems: 3

        wenesas,vsps:
          minItems: 3

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names
        - wenesas,vsps

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a77970
              - wenesas,du-w8a77980
    then:
      pwopewties:
        cwocks:
          minItems: 1
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: DU_DOTCWKIN0 input cwock

        cwock-names:
          minItems: 1
          items:
            - const: du.0
            - const: dcwkin.0

        intewwupts:
          maxItems: 1

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: WVDS 0
            powt@2: fawse
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1

        wenesas,vsps:
          minItems: 1

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names
        - wenesas,vsps

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a774c0
              - wenesas,du-w8a77990
              - wenesas,du-w8a77995
    then:
      pwopewties:
        cwocks:
          minItems: 2
          items:
            - descwiption: Functionaw cwock fow DU0
            - descwiption: Functionaw cwock fow DU1
            - descwiption: DU_DOTCWKIN0 input cwock
            - descwiption: DU_DOTCWKIN1 input cwock

        cwock-names:
          minItems: 2
          items:
            - const: du.0
            - const: du.1
            - pattewn: '^dcwkin\.[01]$'
            - pattewn: '^dcwkin\.[01]$'

        intewwupts:
          maxItems: 2

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DPAD 0
            powt@1:
              descwiption: WVDS 0
            powt@2:
              descwiption: WVDS 1
            # powt@3 is TCON, not suppowted yet
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1
            - powt@2

        wenesas,cmms:
          minItems: 2

        wenesas,vsps:
          minItems: 2

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names
        - wenesas,vsps

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,du-w8a779a0
              - wenesas,du-w8a779g0
    then:
      pwopewties:
        cwocks:
          items:
            - descwiption: Functionaw cwock

        cwock-names:
          items:
            - const: du.0

        intewwupts:
          maxItems: 2

        wesets:
          maxItems: 1

        weset-names:
          items:
            - const: du.0

        powts:
          pwopewties:
            powt@0:
              descwiption: DSI 0
            powt@1:
              descwiption: DSI 1
            powt@2: fawse
            powt@3: fawse

          wequiwed:
            - powt@0
            - powt@1

        wenesas,vsps:
          minItems: 2

      wequiwed:
        - cwock-names
        - intewwupts
        - wesets
        - weset-names
        - wenesas,vsps

additionawPwopewties: fawse

exampwes:
  # W-Caw H3 ES2.0 DU
  - |
    #incwude <dt-bindings/cwock/wenesas-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    dispway@feb00000 {
        compatibwe = "wenesas,du-w8a7795";
        weg = <0xfeb00000 0x80000>;
        intewwupts = <GIC_SPI 256 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 268 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 269 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 270 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cpg CPG_MOD 724>,
                 <&cpg CPG_MOD 723>,
                 <&cpg CPG_MOD 722>,
                 <&cpg CPG_MOD 721>;
        cwock-names = "du.0", "du.1", "du.2", "du.3";
        wesets = <&cpg 724>, <&cpg 722>;
        weset-names = "du.0", "du.2";

        wenesas,cmms = <&cmm0>, <&cmm1>, <&cmm2>, <&cmm3>;
        wenesas,vsps = <&vspd0 0>, <&vspd1 0>, <&vspd2 0>, <&vspd0 1>;

        powts {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            powt@0 {
                weg = <0>;
                endpoint {
                    wemote-endpoint = <&adv7123_in>;
                };
            };
            powt@1 {
                weg = <1>;
                endpoint {
                    wemote-endpoint = <&dw_hdmi0_in>;
                };
            };
            powt@2 {
                weg = <2>;
                endpoint {
                    wemote-endpoint = <&dw_hdmi1_in>;
                };
            };
            powt@3 {
                weg = <3>;
                endpoint {
                    wemote-endpoint = <&wvds0_in>;
                };
            };
        };
    };

...
