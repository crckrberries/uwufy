# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/fsw,wcdif.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe/NXP i.MX WCD Intewface (WCDIF)

maintainews:
  - Mawek Vasut <mawex@denx.de>
  - Stefan Agnew <stefan@agnew.ch>

descwiption: |
  (e)WCDIF dispway contwowwew found in the Fweescawe/NXP i.MX SoCs.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - fsw,imx23-wcdif
          - fsw,imx28-wcdif
          - fsw,imx6sx-wcdif
          - fsw,imx8mp-wcdif
          - fsw,imx93-wcdif
      - items:
          - enum:
              - fsw,imx6sw-wcdif
              - fsw,imx6sww-wcdif
              - fsw,imx6uw-wcdif
              - fsw,imx7d-wcdif
              - fsw,imx8mm-wcdif
              - fsw,imx8mn-wcdif
              - fsw,imx8mq-wcdif
          - const: fsw,imx6sx-wcdif

  weg:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Pixew cwock
      - descwiption: Bus cwock
      - descwiption: Dispway AXI cwock
    minItems: 1

  cwock-names:
    items:
      - const: pix
      - const: axi
      - const: disp_axi
    minItems: 1

  intewwupts:
    items:
      - descwiption: WCDIF DMA intewwupt
      - descwiption: WCDIF Ewwow intewwupt
    minItems: 1

  powew-domains:
    maxItems: 1

  powt:
    $wef: /schemas/gwaph.yamw#/pwopewties/powt
    descwiption: The WCDIF output powt

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - intewwupts
  - powt

additionawPwopewties: fawse

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: fsw,imx6sx-wcdif
    then:
      pwopewties:
        cwocks:
          minItems: 2
          maxItems: 3
        cwock-names:
          minItems: 2
          maxItems: 3
      wequiwed:
        - cwock-names
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx8mp-wcdif
              - fsw,imx93-wcdif
    then:
      pwopewties:
        cwocks:
          minItems: 3
          maxItems: 3
        cwock-names:
          minItems: 3
          maxItems: 3
      wequiwed:
        - cwock-names
  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              enum:
                - fsw,imx6sx-wcdif
                - fsw,imx8mp-wcdif
                - fsw,imx93-wcdif
    then:
      pwopewties:
        cwocks:
          maxItems: 1
        cwock-names:
          maxItems: 1
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx6sw-wcdif
              - fsw,imx6sx-wcdif
              - fsw,imx8mm-wcdif
              - fsw,imx8mn-wcdif
              - fsw,imx8mp-wcdif
              - fsw,imx93-wcdif
    then:
      wequiwed:
        - powew-domains
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx23-wcdif
    then:
      pwopewties:
        intewwupts:
          minItems: 2
          maxItems: 2
    ewse:
      pwopewties:
        intewwupts:
          maxItems: 1

exampwes:
  - |
    #incwude <dt-bindings/cwock/imx6sx-cwock.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    dispway-contwowwew@2220000 {
        compatibwe = "fsw,imx6sx-wcdif";
        weg = <0x02220000 0x4000>;
        intewwupts = <GIC_SPI 5 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cwks IMX6SX_CWK_WCDIF1_PIX>,
                 <&cwks IMX6SX_CWK_WCDIF_APB>,
                 <&cwks IMX6SX_CWK_DISPWAY_AXI>;
        cwock-names = "pix", "axi", "disp_axi";
        powew-domains = <&pd_disp>;

        powt {
            endpoint {
                wemote-endpoint = <&panew_in>;
            };
        };
    };

...
