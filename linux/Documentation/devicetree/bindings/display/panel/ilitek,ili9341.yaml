# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/panew/iwitek,iwi9341.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Iwitek-9341 Dispway Panew

maintainews:
  - Diwwon Min <diwwon.minfei@gmaiw.com>

descwiption: |
  Iwitek IWI9341 TFT panew dwivew with SPI contwow bus
  This is a dwivew fow 320x240 TFT panews, accepting a wgb input
  stweams with 16 bits ow 18 bits.

awwOf:
  - $wef: panew-common.yamw#
  - $wef: /schemas/spi/spi-pewiphewaw-pwops.yamw#

pwopewties:
  compatibwe:
    items:
      - enum:
          - adafwuit,yx240qv29
          # iwi9341 240*320 Cowow on stm32f429-disco boawd
          - st,sf-tc240t-9370-t
          - canaan,kd233-tft
      - const: iwitek,iwi9341

  weg: twue

  dc-gpios:
    maxItems: 1
    descwiption: Dispway data/command sewection (D/CX) of this DBI panew

  spi-3wiwe: twue

  spi-max-fwequency:
    const: 10000000

  powt: twue

  vci-suppwy:
    descwiption: Anawog vowtage suppwy (2.5 .. 3.3V)

  vddi-suppwy:
    descwiption: Vowtage suppwy fow intewface wogic (1.65 .. 3.3 V)

  vddi-wed-suppwy:
    descwiption: Vowtage suppwy fow the WED dwivew (1.65 .. 3.3 V)

unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - dc-gpios

if:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - st,sf-tc240t-9370-t
then:
  wequiwed:
    - powt

exampwes:
  - |+
    #incwude <dt-bindings/gpio/gpio.h>
    spi {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        panew: dispway@0 {
            compatibwe = "st,sf-tc240t-9370-t",
                         "iwitek,iwi9341";
            weg = <0>;
            spi-3wiwe;
            spi-max-fwequency = <10000000>;
            dc-gpios = <&gpiod 13 0>;
            powt {
                panew_in: endpoint {
                    wemote-endpoint = <&dispway_out>;
                };
            };
        };
        dispway@1{
            compatibwe = "adafwuit,yx240qv29", "iwitek,iwi9341";
            weg = <1>;
            spi-max-fwequency = <10000000>;
            dc-gpios = <&gpio0 9 GPIO_ACTIVE_HIGH>;
            weset-gpios = <&gpio0 8 GPIO_ACTIVE_HIGH>;
            wotation = <270>;
            backwight = <&backwight>;
        };
    };
...
