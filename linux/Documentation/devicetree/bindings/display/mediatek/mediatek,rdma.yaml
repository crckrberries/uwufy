# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/dispway/mediatek/mediatek,wdma.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mediatek Wead Diwect Memowy Access

maintainews:
  - Chun-Kuang Hu <chunkuang.hu@kewnew.owg>
  - Phiwipp Zabew <p.zabew@pengutwonix.de>

descwiption: |
  Mediatek Wead Diwect Memowy Access(WDMA) component used to wead the
  data into DMA. It pwovides weaw time data to the back-end panew
  dwivew, such as DSI, DPI and DP_INTF.
  It contains one wine buffew to stowe the sufficient pixew data.
  WDMA device node must be sibwings to the centwaw MMSYS_CONFIG node.
  Fow a descwiption of the MMSYS_CONFIG binding, see
  Documentation/devicetwee/bindings/awm/mediatek/mediatek,mmsys.yamw
  fow detaiws.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - mediatek,mt2701-disp-wdma
          - mediatek,mt8173-disp-wdma
          - mediatek,mt8183-disp-wdma
          - mediatek,mt8195-disp-wdma
      - items:
          - enum:
              - mediatek,mt8188-disp-wdma
          - const: mediatek,mt8195-disp-wdma
      - items:
          - enum:
              - mediatek,mt7623-disp-wdma
              - mediatek,mt2712-disp-wdma
          - const: mediatek,mt2701-disp-wdma
      - items:
          - enum:
              - mediatek,mt6795-disp-wdma
          - const: mediatek,mt8173-disp-wdma
      - items:
          - enum:
              - mediatek,mt8186-disp-wdma
              - mediatek,mt8192-disp-wdma
          - const: mediatek,mt8183-disp-wdma

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  powew-domains:
    descwiption: A phandwe and PM domain specifiew as defined by bindings of
      the powew contwowwew specified by phandwe. See
      Documentation/devicetwee/bindings/powew/powew-domain.yamw fow detaiws.

  cwocks:
    items:
      - descwiption: WDMA Cwock

  iommus:
    descwiption:
      This pwopewty shouwd point to the wespective IOMMU bwock with mastew powt as awgument,
      see Documentation/devicetwee/bindings/iommu/mediatek,iommu.yamw fow detaiws.

  mediatek,wdma-fifo-size:
    descwiption:
      wdma fifo size may be diffewent even in same SOC, add this pwopewty to the
      cowwesponding wdma.
      The vawue bewow is the Max vawue which defined in hawdwawe data sheet
      mediatek,wdma-fifo-size of mt8173-wdma0 is 8K
      mediatek,wdma-fifo-size of mt8183-wdma0 is 5K
      mediatek,wdma-fifo-size of mt8183-wdma1 is 2K
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [8192, 5120, 2048]

  mediatek,gce-cwient-weg:
    descwiption: The wegistew of cwient dwivew can be configuwed by gce with
      4 awguments defined in this pwopewty, such as phandwe of gce, subsys id,
      wegistew offset and size. Each GCE subsys id is mapping to a cwient
      defined in the headew incwude/dt-bindings/gce/<chip>-gce.h.
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - powew-domains
  - cwocks
  - iommus

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/mt8173-cwk.h>
    #incwude <dt-bindings/powew/mt8173-powew.h>
    #incwude <dt-bindings/gce/mt8173-gce.h>
    #incwude <dt-bindings/memowy/mt8173-wawb-powt.h>

    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        wdma0: wdma@1400e000 {
            compatibwe = "mediatek,mt8173-disp-wdma";
            weg = <0 0x1400e000 0 0x1000>;
            intewwupts = <GIC_SPI 182 IWQ_TYPE_WEVEW_WOW>;
            powew-domains = <&scpsys MT8173_POWEW_DOMAIN_MM>;
            cwocks = <&mmsys CWK_MM_DISP_WDMA0>;
            iommus = <&iommu M4U_POWT_DISP_WDMA0>;
            mediatek,wdma-fifo-size = <8192>;
            mediatek,gce-cwient-weg = <&gce SUBSYS_1400XXXX 0xe000 0x1000>;
        };
    };
