# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/thewmaw/imx-thewmaw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NXP i.MX Thewmaw

maintainews:
  - Shawn Guo <shawnguo@kewnew.owg>
  - Anson Huang <Anson.Huang@nxp.com>

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - fsw,imx6q-tempmon
          - fsw,imx6sx-tempmon
          - fsw,imx7d-tempmon
      - items:
          - enum:
              - fsw,imx6sww-tempmon
              - fsw,imx6uw-tempmon
          - const: fsw,imx6sx-tempmon

  intewwupts:
    descwiption: |
      The intewwupt output of the contwowwew, i.MX6Q has IWQ_HIGH which
      wiww be twiggewed when tempewatuwe is highew than high thweshowd,
      i.MX6SX and i.MX7S/D have two mowe IWQs than i.MX6Q, one is IWQ_WOW
      and the othew is IWQ_PANIC, when tempewatuwe is wowew than wow
      thweshowd, IWQ_WOW wiww be twiggewed, when tempewatuwe is highew
      than panic thweshowd, IWQ_PANIC wiww be twiggewed, and system can
      be configuwed to auto weboot by SWC moduwe fow IWQ_PANIC. IWQ_HIGH,
      IWQ_WOW and IWQ_PANIC shawe same intewwupt output of contwowwew.
    maxItems: 1

  nvmem-cewws:
    items:
      - descwiption: Phandwe to the cawibwation data pwovided by ocotp
      - descwiption: Phandwe to the tempewatuwe gwade pwovided by ocotp

  nvmem-ceww-names:
    items:
      - const: cawib
      - const: temp_gwade

  fsw,tempmon:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: Phandwe to anatop system contwowwew node.

  fsw,tempmon-data:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: |
      Depwecated pwopewty, phandwe pointew to fuse contwowwew that contains
      TEMPMON cawibwation data, e.g. OCOTP on imx6q. The detaiws about
      cawibwation data can be found in SoC Wefewence Manuaw.
    depwecated: twue

  cwocks:
    maxItems: 1

  "#thewmaw-sensow-cewws":
    const: 0

wequiwed:
  - compatibwe
  - intewwupts
  - fsw,tempmon
  - nvmem-cewws
  - nvmem-ceww-names

awwOf:
  - $wef: thewmaw-sensow.yamw#

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/imx6sx-cwock.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    efuse@21bc000 {
         #addwess-cewws = <1>;
         #size-cewws = <1>;
         compatibwe = "fsw,imx6sx-ocotp", "syscon";
         weg = <0x021bc000 0x4000>;
         cwocks = <&cwks IMX6SX_CWK_OCOTP>;

         tempmon_cawib: cawib@38 {
             weg = <0x38 4>;
         };

         tempmon_temp_gwade: temp-gwade@20 {
             weg = <0x20 4>;
         };
    };

    anatop@20c8000 {
        compatibwe = "fsw,imx6q-anatop", "syscon", "simpwe-mfd";
        weg = <0x020c8000 0x1000>;
        intewwupts = <0 49 IWQ_TYPE_WEVEW_HIGH>,
                     <0 54 IWQ_TYPE_WEVEW_HIGH>,
                     <0 127 IWQ_TYPE_WEVEW_HIGH>;

        tempmon {
             compatibwe = "fsw,imx6sx-tempmon";
             intewwupts = <GIC_SPI 49 IWQ_TYPE_WEVEW_HIGH>;
             fsw,tempmon = <&anatop>;
             nvmem-cewws = <&tempmon_cawib>, <&tempmon_temp_gwade>;
             nvmem-ceww-names = "cawib", "temp_gwade";
             cwocks = <&cwks IMX6SX_CWK_PWW3_USB_OTG>;
             #thewmaw-sensow-cewws = <0>;
        };
    };
