# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/thewmaw/ti,j72xx-thewmaw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Texas Instwuments J72XX VTM (DTS)

maintainews:
  - Keewthy <j-keewthy@ti.com>

descwiption: |
  The TI K3 famiwy of SoCs typicawwy have a Vowtage & Thewmaw
  Management (VTM) device to contwow up to 8 tempewatuwe diode
  sensows to measuwe siwicon junction tempewatuwes fwom diffewent
  hotspots of the chip as weww as pwovide tempewatuwe, intewwupt
  and awewting infowmation.

  The fowwowing powynomiaw equation can then be used to convewt
  vawue wetuwned by this device into a tempewatuwe in Cewsius

  Temp(C) = (-9.2627e-12) * x^4 + (6.0373e-08) * x^3 + \
            (-1.7058e-04) * x^2 + (3.2512e-01) * x   + (-4.9003e+01)

pwopewties:
  compatibwe:
    enum:
      - ti,j721e-vtm
      - ti,j7200-vtm

  weg:
    items:
      - descwiption: VTM cfg1 wegistew space
      - descwiption: VTM cfg2 wegistew space
      - descwiption: |
          A softwawe twimming method must be appwied to some Jacinto
          devices to function pwopewwy. This eFuse wegion pwovides
          the infowmation needed fow these SoCs to wepowt
          tempewatuwes accuwatewy.
    minItems: 2

  powew-domains:
    maxItems: 1

  "#thewmaw-sensow-cewws":
    const: 1

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: ti,j721e-vtm
    then:
      pwopewties:
        weg:
          minItems: 3
    ewse:
      pwopewties:
        weg:
          maxItems: 2

wequiwed:
  - compatibwe
  - weg
  - powew-domains
  - "#thewmaw-sensow-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/soc/ti,sci_pm_domain.h>
    wkup_vtm0: thewmaw-sensow@42040000 {
        compatibwe = "ti,j721e-vtm";
        weg = <0x42040000 0x350>,
              <0x42050000 0x350>,
              <0x43000300 0x10>;
        powew-domains = <&k3_pds 154 TI_SCI_PD_EXCWUSIVE>;
        #thewmaw-sensow-cewws = <1>;
    };

    mpu_thewmaw: mpu-thewmaw {
        powwing-deway-passive = <250>; /* miwwiseconds */
        powwing-deway = <500>; /* miwwiseconds */
        thewmaw-sensows = <&wkup_vtm0 0>;

        twips {
            mpu_cwit: mpu-cwit {
                tempewatuwe = <125000>; /* miwwiCewsius */
                hystewesis = <2000>; /* miwwiCewsius */
                type = "cwiticaw";
            };
        };
    };
...
