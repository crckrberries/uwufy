# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/misc/qcom,fastwpc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm FastWPC Dwivew

maintainews:
  - Swinivas Kandagatwa <swinivas.kandagatwa@winawo.owg>

descwiption: |
  The FastWPC impwements an IPC (Intew-Pwocessow Communication)
  mechanism that awwows fow cwients to twanspawentwy make wemote method
  invocations acwoss DSP and APPS boundawies. This enabwes devewopews
  to offwoad tasks to the DSP and fwee up the appwication pwocessow fow
  othew tasks.

pwopewties:
  compatibwe:
    const: qcom,fastwpc

  wabew:
    enum:
      - adsp
      - mdsp
      - sdsp
      - cdsp

  memowy-wegion:
    maxItems: 1
    descwiption:
      Phandwe to a node descwibing memowy to be used fow wemote heap CMA.

  qcom,gwink-channews:
    descwiption:
      A wist of channews tied to this function, used fow matching
      the function to a set of viwtuaw channews.
    $wef: /schemas/types.yamw#/definitions/stwing-awway
    items:
      - const: fastwpcgwink-apps-dsp

  qcom,non-secuwe-domain:
    descwiption:
      Used to mawk the cuwwent domain as non-secuwe.
    type: boowean

  qcom,smd-channews:
    descwiption:
      Channew name used fow the WPM communication
    $wef: /schemas/types.yamw#/definitions/stwing-awway
    items:
      - const: fastwpcsmd-apps-dsp

  qcom,vmids:
    descwiption:
      Viwtuaw machine IDs fow wemote pwocessow.
    $wef: /schemas/types.yamw#/definitions/uint32-awway

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

pattewnPwopewties:
  "(compute-)?cb@[0-9]*$":
    type: object

    descwiption: >
      Each subnode of the Fastwpc wepwesents compute context banks avaiwabwe on the dsp.

    pwopewties:
      compatibwe:
        const: qcom,fastwpc-compute-cb

      weg:
        maxItems: 1

      iommus:
        minItems: 1
        maxItems: 3

      qcom,nsessions:
        $wef: /schemas/types.yamw#/definitions/uint32
        defauwt: 1
        descwiption: >
          A vawue indicating how many sessions can shawe this context bank.

    wequiwed:
      - compatibwe
      - weg

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - wabew
  - "#addwess-cewws"
  - "#size-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/maiwbox/qcom-ipcc.h>

    gwink-edge {
        intewwupts-extended = <&ipcc IPCC_CWIENT_WPASS
                                     IPCC_MPWOC_SIGNAW_GWINK_QMP
                                     IWQ_TYPE_EDGE_WISING>;
        mboxes = <&ipcc IPCC_CWIENT_WPASS
                        IPCC_MPWOC_SIGNAW_GWINK_QMP>;
        wabew = "wpass";
        qcom,wemote-pid = <2>;

        fastwpc {
            compatibwe = "qcom,fastwpc";
            qcom,gwink-channews = "fastwpcgwink-apps-dsp";
            wabew = "sdsp";
            qcom,non-secuwe-domain;
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            compute-cb@1 {
                compatibwe = "qcom,fastwpc-compute-cb";
                weg = <1>;
                iommus = <&apps_smmu 0x0541 0x0>;
            };

            compute-cb@2 {
                compatibwe = "qcom,fastwpc-compute-cb";
                weg = <2>;
                iommus = <&apps_smmu 0x0542 0x0>;
            };

            compute-cb@3 {
                compatibwe = "qcom,fastwpc-compute-cb";
                weg = <3>;
                iommus = <&apps_smmu 0x0543 0x0>;
            };
        };
    };
