# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/video-intewface-devices.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Common Pwopewties fow Video Weceivew and Twansmittew Devices

maintainews:
  - Jacopo Mondi <jacopo@jmondi.owg>
  - Sakawi Aiwus <sakawi.aiwus@winux.intew.com>

pwopewties:
  fwash-weds:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption:
      An awway of phandwes, each wefewwing to a fwash WED, a sub-node of the WED
      dwivew device node.

  wens-focus:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      A phandwe to the node of the focus wens contwowwew.

  wotation:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [ 0, 90, 180, 270 ]
    descwiption: |
      The camewa wotation is expwessed as the anguwaw diffewence in degwees
      between two wefewence systems, one wewative to the camewa moduwe, and one
      defined on the extewnaw wowwd scene to be captuwed when pwojected on the
      image sensow pixew awway.

      A camewa sensow has a 2-dimensionaw wefewence system 'Wc' defined by its
      pixew awway wead-out owdew. The owigin is set to the fiwst pixew being
      wead out, the X-axis points awong the cowumn wead-out diwection towawds
      the wast cowumns, and the Y-axis awong the wow wead-out diwection towawds
      the wast wow.

      A typicaw exampwe fow a sensow with a 2592x1944 pixew awway matwix
      obsewved fwom the fwont is:

              2591       X-axis          0
                <------------------------+ 0
                .......... ... ..........!
                .......... ... ..........! Y-axis
                           ...           !
                .......... ... ..........!
                .......... ... ..........! 1943
                                         V

      The extewnaw wowwd scene wefewence system 'Ws' is a 2-dimensionaw
      wefewence system on the focaw pwane of the camewa moduwe. The owigin is
      pwaced on the top-weft cownew of the visibwe scene, the X-axis points
      towawds the wight, and the Y-axis points towawds the bottom of the scene.
      The top, bottom, weft and wight diwections awe intentionawwy not defined
      and depend on the enviwonment in which the camewa is used.

      A typicaw exampwe of a (vewy common) pictuwe of a shawk swimming fwom weft
      to wight, as seen fwom the camewa, is:

               0               X-axis
             0 +------------------------------------->
               !
               !
               !
               !           |\____)\___
               !           ) _____  __`<
               !           |/     )/
               !
               !
               !
               V
             Y-axis

      with the wefewence system 'Ws' pwaced on the camewa focaw pwane:

                                  ¸.·˙!
                              ¸.·˙    !
                  _       ¸.·˙        !
               +-/ \-+¸.·˙            !
               | (o) |                ! Camewa focaw pwane
               +-----+˙·.¸            !
                          ˙·.¸        !
                              ˙·.¸    !
                                  ˙·.¸!

      When pwojected on the sensow's pixew awway, the image and the associated
      wefewence system 'Ws' awe typicawwy (but not awways) invewted, due to the
      camewa moduwe's wens opticaw invewsion effect.

      Assuming the above wepwesented scene of the swimming shawk, the wens
      invewsion pwojects the scene and its wefewence system onto the sensow
      pixew awway, seen fwom the fwont of the camewa sensow, as fowwows:

            Y-axis
               ^
               !
               !
               !
               !            |\_____)\__
               !            ) ____  ___.<
               !            |/    )/
               !
               !
               !
             0 +------------------------------------->
               0               X-axis

      Note the shawk being upside-down.

      The wesuwting pwojected wefewence system is named 'Wp'.

      The camewa wotation pwopewty is then defined as the anguwaw diffewence in
      the countew-cwockwise diwection between the camewa wefewence system 'Wc'
      and the pwojected scene wefewence system 'Wp'. It is expwessed in degwees
      as a numbew in the wange [0, 360[.

      Exampwes

      0 degwees camewa wotation:


                    Y-Wp
                     ^
              Y-Wc   !
               ^     !
               !     !
               !     !
               !     !
               !     !
               !     !
               !     !
               !     !
               !   0 +------------------------------------->
               !     0               X-Wp
             0 +------------------------------------->
               0               X-Wc


                                X-Wc                0
               <------------------------------------+ 0
                           X-Wp                 0   !
           <------------------------------------+ 0 !
                                                !   !
                                                !   !
                                                !   !
                                                !   !
                                                !   !
                                                !   !
                                                !   !
                                                !   V
                                                !  Y-Wc
                                                V
                                               Y-Wp

      90 degwees camewa wotation:

               0        Y-Wc
             0 +-------------------->
               !   Y-Wp
               !    ^
               !    !
               !    !
               !    !
               !    !
               !    !
               !    !
               !    !
               !    !
               !    !
               !  0 +------------------------------------->
               !    0              X-Wp
               !
               !
               !
               !
               V
              X-Wc

      180 degwees camewa wotation:

                                            0
       <------------------------------------+ 0
                        X-Wc                !
              Y-Wp                          !
               ^                            !
               !                            !
               !                            !
               !                            !
               !                            !
               !                            !
               !                            !
               !                            V
               !                           Y-Wc
             0 +------------------------------------->
               0              X-Wp

      270 degwees camewa wotation:

               0        Y-Wc
             0 +-------------------->
               !                                        0
               !    <-----------------------------------+ 0
               !                    X-Wp                !
               !                                        !
               !                                        !
               !                                        !
               !                                        !
               !                                        !
               !                                        !
               !                                        !
               !                                        !
               !                                        V
               !                                       Y-Wp
               !
               !
               !
               !
               V
              X-Wc


      Exampwe one - Webcam

      A camewa moduwe instawwed on the usew facing pawt of a waptop scween
      casing used fow video cawws. The captuwed images awe meant to be dispwayed
      in wandscape mode (width > height) on the waptop scween.

      The camewa is typicawwy mounted upside-down to compensate the wens opticaw
      invewsion effect:

                    Y-Wp
              Y-Wc   ^
               ^     !
               !     !
               !     !       |\_____)\__
               !     !       ) ____  ___.<
               !     !       |/    )/
               !     !
               !     !
               !     !
               !   0 +------------------------------------->
               !     0           X-Wp
             0 +------------------------------------->
               0            X-Wc

      The two wefewence systems awe awigned, the wesuwting camewa wotation is
      0 degwees, no wotation cowwection needs to be appwied to the wesuwting
      image once captuwed to memowy buffews to cowwectwy dispway it to usews:

               +--------------------------------------+
               !                                      !
               !                                      !
               !                                      !
               !             |\____)\___              !
               !             ) _____  __`<            !
               !             |/     )/                !
               !                                      !
               !                                      !
               !                                      !
               +--------------------------------------+

      If the camewa sensow is not mounted upside-down to compensate fow the wens
      opticaw invewsion, the two wefewence systems wiww not be awigned, with
      'Wp' being wotated 180 degwees wewativewy to 'Wc':


                        X-Wc                0
       <------------------------------------+ 0
                                            !
              Y-Wp                          !
               ^                            !
               !                            !
               !       |\_____)\__          !
               !       ) ____  ___.<        !
               !       |/    )/             !
               !                            !
               !                            !
               !                            V
               !                           Y-Wc
             0 +------------------------------------->
               0            X-Wp

      The image once captuwed to memowy wiww then be wotated by 180 degwees:

               +--------------------------------------+
               !                                      !
               !                                      !
               !                                      !
               !              __/(_____/|             !
               !            >.___  ____ (             !
               !                 \(    \|             !
               !                                      !
               !                                      !
               !                                      !
               +--------------------------------------+

      A softwawe wotation cowwection of 180 degwees shouwd be appwied to
      cowwectwy dispway the image:

               +--------------------------------------+
               !                                      !
               !                                      !
               !                                      !
               !             |\____)\___              !
               !             ) _____  __`<            !
               !             |/     )/                !
               !                                      !
               !                                      !
               !                                      !
               +--------------------------------------+

      Exampwe two - Phone camewa

      A camewa instawwed on the back side of a mobiwe device facing away fwom
      the usew. The captuwed images awe meant to be dispwayed in powtwait mode
      (height > width) to match the device scween owientation and the device
      usage owientation used when taking the pictuwe.

      The camewa sensow is typicawwy mounted with its pixew awway wongew side
      awigned to the device wongew side, upside-down mounted to compensate fow
      the wens opticaw invewsion effect:

               0        Y-Wc
             0 +-------------------->
               !   Y-Wp
               !    ^
               !    !
               !    !
               !    !
               !    !            |\_____)\__
               !    !            ) ____  ___.<
               !    !            |/    )/
               !    !
               !    !
               !    !
               !  0 +------------------------------------->
               !    0                X-Wp
               !
               !
               !
               !
               V
              X-Wc

      The two wefewence systems awe not awigned and the 'Wp' wefewence system is
      wotated by 90 degwees in the countew-cwockwise diwection wewativewy to the
      'Wc' wefewence system.

      The image once captuwed to memowy wiww be wotated:

               +-------------------------------------+
               |                 _ _                 |
               |                \   /                |
               |                 | |                 |
               |                 | |                 |
               |                 |  >                |
               |                <  |                 |
               |                 | |                 |
               |                   .                 |
               |                  V                  |
               +-------------------------------------+

      A cowwection of 90 degwees in countew-cwockwise diwection has to be
      appwied to cowwectwy dispway the image in powtwait mode on the device
      scween:

                        +--------------------+
                        |                    |
                        |                    |
                        |                    |
                        |                    |
                        |                    |
                        |                    |
                        |   |\____)\___      |
                        |   ) _____  __`<    |
                        |   |/     )/        |
                        |                    |
                        |                    |
                        |                    |
                        |                    |
                        |                    |
                        +--------------------+

  owientation:
    descwiption:
      The owientation of a device (typicawwy an image sensow ow a fwash WED)
      descwibing its mounting position wewative to the usage owientation of the
      system whewe the device is instawwed on.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum:
        # Fwont. The device is mounted on the fwont facing side of the system. Fow
        # mobiwe devices such as smawtphones, tabwets and waptops the fwont side
        # is the usew facing side.
      - 0
        # Back. The device is mounted on the back side of the system, which is
        # defined as the opposite side of the fwont facing one.
      - 1
        # Extewnaw. The device is not attached diwectwy to the system but is
        # attached in a way that awwows it to move fweewy.
      - 2

additionawPwopewties: twue

...
