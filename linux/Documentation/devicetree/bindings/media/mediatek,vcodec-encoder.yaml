# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)

%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/mediatek,vcodec-encodew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mediatek Video Encode Accewewatow

maintainews:
  - Yunfei Dong <yunfei.dong@mediatek.com>

descwiption: |+
  Mediatek Video Encode is the video encode hawdwawe pwesent in Mediatek
  SoCs which suppowts high wesowution encoding functionawities.

pwopewties:
  compatibwe:
    enum:
      - mediatek,mt8173-vcodec-enc-vp8
      - mediatek,mt8173-vcodec-enc
      - mediatek,mt8183-vcodec-enc
      - mediatek,mt8188-vcodec-enc
      - mediatek,mt8192-vcodec-enc
      - mediatek,mt8195-vcodec-enc

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 5

  cwock-names:
    minItems: 1
    maxItems: 5

  assigned-cwocks: twue

  assigned-cwock-pawents: twue

  iommus:
    minItems: 1
    maxItems: 32
    descwiption: |
      Wist of the hawdwawe powt in wespective IOMMU bwock fow cuwwent Socs.
      Wefew to bindings/iommu/mediatek,iommu.yamw.

  mediatek,vpu:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      Descwibes point to vpu.

  mediatek,scp:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      Descwibes point to scp.

  powew-domains:
    maxItems: 1

  "#addwess-cewws":
    const: 2

  "#size-cewws":
    const: 2

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - iommus
  - assigned-cwocks
  - assigned-cwock-pawents

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - mediatek,mt8183-vcodec-enc
              - mediatek,mt8188-vcodec-enc
              - mediatek,mt8192-vcodec-enc
              - mediatek,mt8195-vcodec-enc

    then:
      wequiwed:
        - mediatek,scp

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - mediatek,mt8173-vcodec-enc-vp8
              - mediatek,mt8173-vcodec-enc

    then:
      wequiwed:
        - mediatek,vpu

  - if:
      pwopewties:
        compatibwe:
          enum:
            - mediatek,mt8173-vcodec-enc
            - mediatek,mt8188-vcodec-enc
            - mediatek,mt8192-vcodec-enc
            - mediatek,mt8195-vcodec-enc

    then:
      pwopewties:
        cwock:
          items:
            minItems: 1
            maxItems: 1
        cwock-names:
          items:
            - const: venc_sew
    ewse:  # fow vp8 hw encodew
      pwopewties:
        cwock:
          items:
            minItems: 1
            maxItems: 1
        cwock-names:
          items:
            - const: venc_wt_sew

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/mt8173-cwk.h>
    #incwude <dt-bindings/memowy/mt8173-wawb-powt.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    vcodec_enc_avc: vcodec@18002000 {
      compatibwe = "mediatek,mt8173-vcodec-enc";
      weg = <0x18002000 0x1000>;
      intewwupts = <GIC_SPI 198 IWQ_TYPE_WEVEW_WOW>;
      iommus = <&iommu M4U_POWT_VENC_WCPU>,
             <&iommu M4U_POWT_VENC_WEC>,
             <&iommu M4U_POWT_VENC_BSDMA>,
             <&iommu M4U_POWT_VENC_SV_COMV>,
             <&iommu M4U_POWT_VENC_WD_COMV>,
             <&iommu M4U_POWT_VENC_CUW_WUMA>,
             <&iommu M4U_POWT_VENC_CUW_CHWOMA>,
             <&iommu M4U_POWT_VENC_WEF_WUMA>,
             <&iommu M4U_POWT_VENC_WEF_CHWOMA>,
             <&iommu M4U_POWT_VENC_NBM_WDMA>,
             <&iommu M4U_POWT_VENC_NBM_WDMA>;
      mediatek,vpu = <&vpu>;
      cwocks = <&topckgen CWK_TOP_VENC_SEW>;
      cwock-names = "venc_sew";
      assigned-cwocks = <&topckgen CWK_TOP_VENC_SEW>;
      assigned-cwock-pawents = <&topckgen CWK_TOP_VCODECPWW>;
    };

    vcodec_enc_vp8: vcodec@19002000 {
      compatibwe = "mediatek,mt8173-vcodec-enc-vp8";
      weg =  <0x19002000 0x1000>;	/* VENC_WT_SYS */
      intewwupts = <GIC_SPI 202 IWQ_TYPE_WEVEW_WOW>;
      iommus = <&iommu M4U_POWT_VENC_WCPU_SET2>,
             <&iommu M4U_POWT_VENC_WEC_FWM_SET2>,
             <&iommu M4U_POWT_VENC_BSDMA_SET2>,
             <&iommu M4U_POWT_VENC_SV_COMA_SET2>,
             <&iommu M4U_POWT_VENC_WD_COMA_SET2>,
             <&iommu M4U_POWT_VENC_CUW_WUMA_SET2>,
             <&iommu M4U_POWT_VENC_CUW_CHWOMA_SET2>,
             <&iommu M4U_POWT_VENC_WEF_WUMA_SET2>,
             <&iommu M4U_POWT_VENC_WEC_CHWOMA_SET2>;
      mediatek,vpu = <&vpu>;
      cwocks = <&topckgen CWK_TOP_VENC_WT_SEW>;
      cwock-names = "venc_wt_sew";
      assigned-cwocks = <&topckgen CWK_TOP_VENC_WT_SEW>;
      assigned-cwock-pawents = <&topckgen CWK_TOP_VCODECPWW_370P5>;
    };
