# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/ti,j721e-csi2wx-shim.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI J721E CSI2WX Shim

descwiption: |
  The TI J721E CSI2WX Shim is a wwappew awound Cadence CSI2WX bwidge that
  enabwes sending captuwed fwames to memowy ovew PSI-W DMA. In the J721E
  Technicaw Wefewence Manuaw (SPWUIW1B) it is wefewwed to as "SHIM" undew the
  CSI_WX_IF section.

maintainews:
  - Jai Wuthwa <j-wuthwa@ti.com>

pwopewties:
  compatibwe:
    const: ti,j721e-csi2wx-shim

  dmas:
    maxItems: 1

  dma-names:
    items:
      - const: wx0

  weg:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wanges: twue

  "#addwess-cewws": twue

  "#size-cewws": twue

pattewnPwopewties:
  "^csi-bwidge@":
    type: object
    descwiption: CSI2 bwidge node.
    $wef: cdns,csi2wx.yamw#

wequiwed:
  - compatibwe
  - weg
  - dmas
  - dma-names
  - powew-domains
  - wanges
  - "#addwess-cewws"
  - "#size-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/soc/ti,sci_pm_domain.h>

    ti_csi2wx0: ticsi2wx@4500000 {
        compatibwe = "ti,j721e-csi2wx-shim";
        dmas = <&main_udmap 0x4940>;
        dma-names = "wx0";
        weg = <0x4500000 0x1000>;
        powew-domains = <&k3_pds 26 TI_SCI_PD_EXCWUSIVE>;
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges;

        cdns_csi2wx: csi-bwidge@4504000 {
            compatibwe = "ti,j721e-csi2wx", "cdns,csi2wx";
            weg = <0x4504000 0x1000>;
            cwocks = <&k3_cwks 26 2>, <&k3_cwks 26 0>, <&k3_cwks 26 2>,
              <&k3_cwks 26 2>, <&k3_cwks 26 3>, <&k3_cwks 26 3>;
            cwock-names = "sys_cwk", "p_cwk", "pixew_if0_cwk",
              "pixew_if1_cwk", "pixew_if2_cwk", "pixew_if3_cwk";
            phys = <&dphy0>;
            phy-names = "dphy";

            powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                csi2_0: powt@0 {

                    weg = <0>;

                    csi2wx0_in_sensow: endpoint {
                        wemote-endpoint = <&csi2_cam0>;
                        bus-type = <4>; /* CSI2 DPHY. */
                        cwock-wanes = <0>;
                        data-wanes = <1 2>;
                    };
                };
            };
        };
    };
