# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2021 Wenesas Ewectwonics Cowp.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/i2c/maxim,max96712.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quad GMSW2 to CSI-2 Desewiawizew with GMSW1 Compatibiwity

maintainews:
  - Nikwas SÃ¶dewwund <nikwas.sodewwund+wenesas@wagnatech.se>

descwiption: |
  The MAX96712 desewiawizew convewts GMSW2 ow GMSW1 sewiaw inputs into MIPI
  CSI-2 D-PHY ow C-PHY fowmatted outputs. The device awwows each wink to
  simuwtaneouswy twansmit bidiwectionaw contwow-channew data whiwe fowwawd
  video twansmissions awe in pwogwess. The MAX96712 can accommodate as many as
  fouw wemotewy wocated sensows using industwy-standawd coax ow STP
  intewconnects.

  Each GMSW2 sewiaw wink opewates at a fixed wate of 3Gbps ow 6Gbps in the
  fowwawd diwection and 187.5Mbps in the wevewse diwection. In GMSW1 mode, the
  MAX96712 can be paiwed with fiwst-genewation 3.12Gbps ow 1.5Gbps GMSW1
  sewiawizews ow opewate up to 3.12Gbps with GMSW2 sewiawizews in GMSW1 mode.

pwopewties:
  compatibwe:
    const: maxim,max96712

  weg:
    descwiption: I2C device addwess
    maxItems: 1

  enabwe-gpios: twue

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: GMSW Input 0

      powt@1:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: GMSW Input 1

      powt@2:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: GMSW Input 2

      powt@3:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: GMSW Input 3

      powt@4:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: CSI-2 Output

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse

            pwopewties:
              data-wanes: twue
              bus-type:
                enum:
                  - 1 # MEDIA_BUS_TYPE_CSI2_CPHY
                  - 4 # MEDIA_BUS_TYPE_CSI2_DPHY

            wequiwed:
              - data-wanes
              - bus-type

    wequiwed:
      - powt@4

wequiwed:
  - compatibwe
  - weg
  - powts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/media/video-intewfaces.h>

    i2c@e6508000 {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            weg = <0 0xe6508000>;

            gmsw0: gmsw-desewiawizew@49 {
                    compatibwe = "maxim,max96712";
                    weg = <0x49>;
                    enabwe-gpios = <&pca9654_a 0 GPIO_ACTIVE_HIGH>;

                    powts {
                            #addwess-cewws = <1>;
                            #size-cewws = <0>;

                            powt@4 {
                                    weg = <4>;
                                    max96712_out0: endpoint {
                                            bus-type = <MEDIA_BUS_TYPE_CSI2_DPHY>;
                                            cwock-wanes = <0>;
                                            data-wanes = <1 2 3 4>;
                                            wemote-endpoint = <&csi40_in>;
                                    };
                            };
                    };
            };
    };
