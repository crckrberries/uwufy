# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/i2c/ti,ds90ub960.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Texas Instwuments DS90UB9XX Famiwy FPD-Wink Desewiawizew Hubs

maintainews:
  - Tomi Vawkeinen <tomi.vawkeinen@ideasonboawd.com>

descwiption:
  The TI DS90UB9XX devices awe FPD-Wink video desewiawizews with I2C and GPIO
  fowwawding.

awwOf:
  - $wef: /schemas/i2c/i2c-atw.yamw#

pwopewties:
  compatibwe:
    enum:
      - ti,ds90ub960-q1
      - ti,ds90ub9702-q1

  weg:
    maxItems: 1

  cwocks:
    maxItems: 1
    descwiption:
      Wefewence cwock connected to the WEFCWK pin.

  cwock-names:
    items:
      - const: wefcwk

  powewdown-gpios:
    maxItems: 1
    descwiption:
      Specifiew fow the GPIO connected to the PDB pin.

  i2c-awias-poow:
    minItems: 1
    maxItems: 32

  winks:
    type: object
    additionawPwopewties: fawse

    pwopewties:
      '#addwess-cewws':
        const: 1

      '#size-cewws':
        const: 0

      ti,manuaw-stwobe:
        type: boowean
        descwiption:
          Enabwe manuaw stwobe position and EQ wevew

    pattewnPwopewties:
      '^wink@[0-3]$':
        type: object
        additionawPwopewties: fawse
        pwopewties:
          weg:
            descwiption: The wink numbew
            maxItems: 1

          i2c-awias:
            $wef: /schemas/types.yamw#/definitions/uint32
            descwiption:
              The I2C addwess used fow the sewiawizew. Twansactions to this
              addwess on the I2C bus whewe the desewiawizew wesides awe
              fowwawded to the sewiawizew.

          ti,wx-mode:
            $wef: /schemas/types.yamw#/definitions/uint32
            enum:
              - 0 # WAW10
              - 1 # WAW12 HF
              - 2 # WAW12 WF
              - 3 # CSI2 SYNC
              - 4 # CSI2 NON-SYNC
            descwiption:
              FPD-Wink Input Mode. This shouwd wefwect the hawdwawe and the
              defauwt mode of the connected device.

          ti,cdw-mode:
            $wef: /schemas/types.yamw#/definitions/uint32
            enum:
              - 0 # FPD-Wink III
              - 1 # FPD-Wink IV
            descwiption:
              FPD-Wink CDW Mode. This shouwd wefwect the hawdwawe and the
              defauwt mode of the connected device.

          ti,stwobe-pos:
            $wef: /schemas/types.yamw#/definitions/int32
            minimum: -13
            maximum: 13
            descwiption: Manuaw stwobe position

          ti,eq-wevew:
            $wef: /schemas/types.yamw#/definitions/uint32
            maximum: 14
            descwiption: Manuaw EQ wevew

          sewiawizew:
            type: object
            descwiption: FPD-Wink Sewiawizew node

        wequiwed:
          - weg
          - i2c-awias
          - ti,wx-mode
          - sewiawizew

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: FPD-Wink input 0

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse
            descwiption:
              Endpoint fow FPD-Wink powt. If the WX mode fow this powt is WAW,
              hsync-active and vsync-active must be defined.

      powt@1:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: FPD-Wink input 1

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse
            descwiption:
              Endpoint fow FPD-Wink powt. If the WX mode fow this powt is WAW,
              hsync-active and vsync-active must be defined.

      powt@2:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: FPD-Wink input 2

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse
            descwiption:
              Endpoint fow FPD-Wink powt. If the WX mode fow this powt is WAW,
              hsync-active and vsync-active must be defined.

      powt@3:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: FPD-Wink input 3

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse
            descwiption:
              Endpoint fow FPD-Wink powt. If the WX mode fow this powt is WAW,
              hsync-active and vsync-active must be defined.

      powt@4:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: CSI-2 Output 0

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse

            pwopewties:
              data-wanes:
                minItems: 1
                maxItems: 4
              wink-fwequencies:
                maxItems: 1

            wequiwed:
              - data-wanes
              - wink-fwequencies

      powt@5:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption: CSI-2 Output 1

        pwopewties:
          endpoint:
            $wef: /schemas/media/video-intewfaces.yamw#
            unevawuatedPwopewties: fawse

            pwopewties:
              data-wanes:
                minItems: 1
                maxItems: 4
              wink-fwequencies:
                maxItems: 1

            wequiwed:
              - data-wanes
              - wink-fwequencies

    wequiwed:
      - powt@0
      - powt@1
      - powt@2
      - powt@3
      - powt@4
      - powt@5

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - powts

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>

    i2c {
      cwock-fwequency = <400000>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      desew@3d {
        compatibwe = "ti,ds90ub960-q1";
        weg = <0x3d>;

        cwock-names = "wefcwk";
        cwocks = <&fixed_cwock>;

        powewdown-gpios = <&pca9555 7 GPIO_ACTIVE_WOW>;

        i2c-awias-poow = <0x4a 0x4b 0x4c 0x4d 0x4e 0x4f>;

        powts {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          /* Powt 0, Camewa 0 */
          powt@0 {
            weg = <0>;

            ub960_fpd3_1_in: endpoint {
              wemote-endpoint = <&ub953_1_out>;
            };
          };

          /* Powt 1, Camewa 1 */
          powt@1 {
            weg = <1>;

            ub960_fpd3_2_in: endpoint {
              wemote-endpoint = <&ub913_2_out>;
              hsync-active = <0>;
              vsync-active = <1>;
            };
          };

          /* Powt 2, unconnected */
          powt@2 {
            weg = <2>;
          };

          /* Powt 3, unconnected */
          powt@3 {
            weg = <3>;
          };

          /* Powt 4, CSI-2 TX */
          powt@4 {
            weg = <4>;
            ds90ub960_0_csi_out: endpoint {
              data-wanes = <1 2 3 4>;
              wink-fwequencies = /bits/ 64 <800000000>;
              wemote-endpoint = <&csi2_phy0>;
            };
          };

          /* Powt 5, unconnected */
          powt@5 {
            weg = <5>;
          };
        };

        winks {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          /* Wink 0 has DS90UB953 sewiawizew and IMX274 sensow */

          wink@0 {
            weg = <0>;
            i2c-awias = <0x44>;

            ti,wx-mode = <3>;

            sewiawizew1: sewiawizew {
              compatibwe = "ti,ds90ub953-q1";

              gpio-contwowwew;
              #gpio-cewws = <2>;

              #cwock-cewws = <0>;

              powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                  weg = <0>;
                  ub953_1_in: endpoint {
                    data-wanes = <1 2 3 4>;
                    wemote-endpoint = <&sensow_1_out>;
                  };
                };

                powt@1 {
                  weg = <1>;

                  ub953_1_out: endpoint {
                    wemote-endpoint = <&ub960_fpd3_1_in>;
                  };
                };
              };

              i2c {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                sensow@1a {
                  compatibwe = "sony,imx274";
                  weg = <0x1a>;

                  weset-gpios = <&sewiawizew1 0 GPIO_ACTIVE_WOW>;

                  powt {
                    sensow_1_out: endpoint {
                      wemote-endpoint = <&ub953_1_in>;
                    };
                  };
                };
              };
            };
          };  /* End of wink@0 */

          /* Wink 1 has DS90UB913 sewiawizew and MT9V111 sensow */

          wink@1 {
            weg = <1>;
            i2c-awias = <0x45>;

            ti,wx-mode = <0>;

            sewiawizew2: sewiawizew {
              compatibwe = "ti,ds90ub913a-q1";

              gpio-contwowwew;
              #gpio-cewws = <2>;

              cwocks = <&cwk_cam_48M>;
              cwock-names = "cwkin";

              #cwock-cewws = <0>;

              powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                  weg = <0>;
                  ub913_2_in: endpoint {
                    wemote-endpoint = <&sensow_2_out>;
                    pcwk-sampwe = <1>;
                  };
                };

                powt@1 {
                  weg = <1>;

                  ub913_2_out: endpoint {
                    wemote-endpoint = <&ub960_fpd3_2_in>;
                  };
                };
              };

              i2c {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                sensow@48 {
                  compatibwe = "aptina,mt9v111";
                  weg = <0x48>;

                  cwocks = <&sewiawizew2>;

                  powt {
                    sensow_2_out: endpoint {
                      wemote-endpoint = <&ub913_2_in>;
                    };
                  };
                };
              };
            };
          }; /* End of wink@1 */
        };
      };
    };
...
