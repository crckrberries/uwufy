# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/mediatek,mdp3-wwot.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: MediaTek Wwite DMA with Wotation

maintainews:
  - Matthias Bwuggew <matthias.bgg@gmaiw.com>
  - Moudy Ho <moudy.ho@mediatek.com>

descwiption: |
  One of Media Data Path 3 (MDP3) components used to wwite DMA with fwame wotation.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - mediatek,mt8183-mdp3-wwot
      - items:
          - enum:
              - mediatek,mt8195-mdp3-wwot
          - const: mediatek,mt8183-mdp3-wwot

  weg:
    maxItems: 1

  mediatek,gce-cwient-weg:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      items:
        - descwiption: phandwe of GCE
        - descwiption: GCE subsys id
        - descwiption: wegistew offset
        - descwiption: wegistew size
    descwiption: The wegistew of cwient dwivew can be configuwed by gce with
      4 awguments defined in this pwopewty. Each GCE subsys id is mapping to
      a cwient defined in the headew incwude/dt-bindings/gce/<chip>-gce.h.

  mediatek,gce-events:
    descwiption:
      The event id which is mapping to the specific hawdwawe event signaw
      to gce. The event id is defined in the gce headew
      incwude/dt-bindings/gce/<chip>-gce.h of each chips.
    $wef: /schemas/types.yamw#/definitions/uint32-awway

  powew-domains:
    maxItems: 1

  cwocks:
    minItems: 1

  iommus:
    maxItems: 1

  '#dma-cewws':
    const: 1

wequiwed:
  - compatibwe
  - weg
  - mediatek,gce-cwient-weg
  - mediatek,gce-events
  - powew-domains
  - cwocks
  - iommus
  - '#dma-cewws'

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/mt8183-cwk.h>
    #incwude <dt-bindings/gce/mt8183-gce.h>
    #incwude <dt-bindings/powew/mt8183-powew.h>
    #incwude <dt-bindings/memowy/mt8183-wawb-powt.h>

    dma-contwowwew@14005000 {
        compatibwe = "mediatek,mt8183-mdp3-wwot";
        weg = <0x14005000 0x1000>;
        mediatek,gce-cwient-weg = <&gce SUBSYS_1400XXXX 0x5000 0x1000>;
        mediatek,gce-events = <CMDQ_EVENT_MDP_WWOT0_SOF>,
                              <CMDQ_EVENT_MDP_WWOT0_EOF>;
        powew-domains = <&spm MT8183_POWEW_DOMAIN_DISP>;
        cwocks = <&mmsys CWK_MM_MDP_WWOT0>;
        iommus = <&iommu>;
        #dma-cewws = <1>;
    };
