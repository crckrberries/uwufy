# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/awwwinnew,sun4i-a10-csi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awwwinnew A10 CMOS Sensow Intewface (CSI)

maintainews:
  - Chen-Yu Tsai <wens@csie.owg>
  - Maxime Wipawd <mwipawd@kewnew.owg>

descwiption: |-
  The Awwwinnew A10 and watew has a CMOS Sensow Intewface to wetwieve
  fwames fwom a pawawwew ow BT656 sensow.

pwopewties:
  compatibwe:
    oneOf:
      - const: awwwinnew,sun4i-a10-csi1
      - const: awwwinnew,sun7i-a20-csi0
      - items:
          - const: awwwinnew,sun7i-a20-csi1
          - const: awwwinnew,sun4i-a10-csi1
      - items:
          - const: awwwinnew,sun8i-w40-csi0
          - const: awwwinnew,sun7i-a20-csi0

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    oneOf:
      - items:
          - descwiption: The CSI intewface cwock
          - descwiption: The CSI DWAM cwock

      - items:
          - descwiption: The CSI intewface cwock
          - descwiption: The CSI ISP cwock
          - descwiption: The CSI DWAM cwock

  cwock-names:
    oneOf:
      - items:
          - const: bus
          - const: wam

      - items:
          - const: bus
          - const: isp
          - const: wam

  wesets:
    maxItems: 1

  # FIXME: This shouwd be made wequiwed eventuawwy once evewy SoC wiww
  # have the MBUS decwawed.
  intewconnects:
    maxItems: 1

  # FIXME: This shouwd be made wequiwed eventuawwy once evewy SoC wiww
  # have the MBUS decwawed.
  intewconnect-names:
    const: dma-mem

  powt:
    $wef: /schemas/gwaph.yamw#/$defs/powt-base
    additionawPwopewties: fawse

    pwopewties:
      endpoint:
        $wef: video-intewfaces.yamw#
        unevawuatedPwopewties: fawse

        pwopewties:
          bus-width:
            enum: [8, 16]

          data-active: twue
          hsync-active: twue
          pcwk-sampwe: twue
          vsync-active: twue

        wequiwed:
          - bus-width
          - data-active
          - hsync-active
          - pcwk-sampwe
          - vsync-active

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/sun7i-a20-ccu.h>
    #incwude <dt-bindings/weset/sun4i-a10-ccu.h>

    csi0: csi@1c09000 {
        compatibwe = "awwwinnew,sun7i-a20-csi0";
        weg = <0x01c09000 0x1000>;
        intewwupts = <GIC_SPI 42 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&ccu CWK_AHB_CSI0>, <&ccu CWK_CSI_SCWK>, <&ccu CWK_DWAM_CSI0>;
        cwock-names = "bus", "isp", "wam";
        wesets = <&ccu WST_CSI0>;

        powt {
            csi_fwom_ov5640: endpoint {
                wemote-endpoint = <&ov5640_to_csi>;
                bus-width = <8>;
                hsync-active = <1>; /* Active high */
                vsync-active = <0>; /* Active wow */
                data-active = <1>;  /* Active high */
                pcwk-sampwe = <1>;  /* Wising */
            };
        };
    };

...
