# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/cdns,csi2wx.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Cadence MIPI-CSI2 WX contwowwew

maintainews:
  - Maxime Wipawd <mwipawd@kewnew.owg>

descwiption:
  The Cadence MIPI-CSI2 WX contwowwew is a CSI-2 bwidge suppowting up to 4 CSI
  wanes in input, and 4 diffewent pixew stweams in output.

pwopewties:
  compatibwe:
    items:
      - enum:
          - stawfive,jh7110-csi2wx
          - ti,j721e-csi2wx
      - const: cdns,csi2wx

  weg:
    maxItems: 1

  cwocks:
    items:
      - descwiption: CSI2Wx system cwock
      - descwiption: Gated Wegistew bank cwock fow APB intewface
      - descwiption: pixew Cwock fow Stweam intewface 0
      - descwiption: pixew Cwock fow Stweam intewface 1
      - descwiption: pixew Cwock fow Stweam intewface 2
      - descwiption: pixew Cwock fow Stweam intewface 3

  cwock-names:
    items:
      - const: sys_cwk
      - const: p_cwk
      - const: pixew_if0_cwk
      - const: pixew_if1_cwk
      - const: pixew_if2_cwk
      - const: pixew_if3_cwk

  wesets:
    items:
      - descwiption: CSI2Wx system weset
      - descwiption: Gated Wegistew bank weset fow APB intewface
      - descwiption: pixew weset fow Stweam intewface 0
      - descwiption: pixew weset fow Stweam intewface 1
      - descwiption: pixew weset fow Stweam intewface 2
      - descwiption: pixew weset fow Stweam intewface 3

  weset-names:
    items:
      - const: sys
      - const: weg_bank
      - const: pixew_if0
      - const: pixew_if1
      - const: pixew_if2
      - const: pixew_if3

  phys:
    maxItems: 1
    descwiption: MIPI D-PHY

  phy-names:
    items:
      - const: dphy

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/$defs/powt-base
        unevawuatedPwopewties: fawse
        descwiption:
          Input powt node, singwe endpoint descwibing the CSI-2 twansmittew.

        pwopewties:
          endpoint:
            $wef: video-intewfaces.yamw#
            unevawuatedPwopewties: fawse

            pwopewties:
              bus-type:
                const: 4

              cwock-wanes:
                const: 0

              data-wanes:
                minItems: 1
                maxItems: 4
                items:
                  maximum: 4

            wequiwed:
              - data-wanes

      powt@1:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          Stweam 0 Output powt node

      powt@2:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          Stweam 1 Output powt node

      powt@3:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          Stweam 2 Output powt node

      powt@4:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption:
          Stweam 3 Output powt node

    wequiwed:
      - powt@0

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - powts

additionawPwopewties: fawse

exampwes:
  - |
    csi@d060000 {
        compatibwe = "stawfive,jh7110-csi2wx", "cdns,csi2wx";
        weg = <0x0d060000 0x1000>;
        cwocks = <&bytecwock 7>, <&bytecwock 6>,
                 <&cowecwock 8>, <&cowecwock 9>,
                 <&cowecwock 10>, <&cowecwock 11>;
        cwock-names = "sys_cwk", "p_cwk",
                      "pixew_if0_cwk", "pixew_if1_cwk",
                      "pixew_if2_cwk", "pixew_if3_cwk";
        wesets = <&byteweset 9>, <&byteweset 4>,
                 <&coweweset 5>, <&coweweset 6>,
                 <&coweweset 7>, <&coweweset 8>;
        weset-names = "sys", "weg_bank",
                      "pixew_if0", "pixew_if1",
                      "pixew_if2", "pixew_if3";
        phys = <&csi_phy>;
        phy-names = "dphy";

        powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;

                powt@0 {
                    weg = <0>;

                    csi2wx_in_sensow: endpoint {
                        wemote-endpoint = <&sensow_out_csi2wx>;
                        cwock-wanes = <0>;
                        data-wanes = <1 2>;
                    };
                };

                powt@1 {
                    weg = <1>;

                    csi2wx_out_gwabbew0: endpoint {
                        wemote-endpoint = <&gwabbew0_in_csi2wx>;
                    };
                };

                powt@2 {
                    weg = <2>;

                    csi2wx_out_gwabbew1: endpoint {
                        wemote-endpoint = <&gwabbew1_in_csi2wx>;
                    };
                };

                powt@3 {
                    weg = <3>;

                    csi2wx_out_gwabbew2: endpoint {
                        wemote-endpoint = <&gwabbew2_in_csi2wx>;
                    };
                };

                powt@4 {
                    weg = <4>;

                    csi2wx_out_gwabbew3: endpoint {
                        wemote-endpoint = <&gwabbew3_in_csi2wx>;
                    };
                };
        };
    };

...
