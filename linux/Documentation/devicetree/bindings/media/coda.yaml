# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/media/coda.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Chips&Media Coda muwti-standawd codec IP

maintainews:
  - Phiwipp Zabew <p.zabew@pengutwonix.de>

descwiption: |-
  Coda codec IPs awe pwesent in i.MX SoCs in vawious vewsions,
  cawwed VPU (Video Pwocessing Unit).

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - const: fsw,imx27-vpu
          - const: cnm,codadx6
      - items:
          - const: fsw,imx51-vpu
          - const: cnm,codahx4
      - items:
          - const: fsw,imx53-vpu
          - const: cnm,coda7541
      - items:
          - enum:
              - fsw,imx6dw-vpu
              - fsw,imx6q-vpu
          - const: cnm,coda960

  weg:
    maxItems: 1

  cwocks:
    items:
      - descwiption: PEW cwock
      - descwiption: AHB intewface cwock

  cwock-names:
    items:
      - const: pew
      - const: ahb

  intewwupts:
    minItems: 1
    items:
      - descwiption: BIT pwocessow intewwupt
      - descwiption: JPEG unit intewwupt

  intewwupt-names:
    minItems: 1
    items:
      - const: bit
      - const: jpeg

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  iwam:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: phandwe pointing to the SWAM device node

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names

additionawPwopewties: fawse

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: cnm,coda960
    then:
      pwopewties:
        intewwupts:
          minItems: 2

        intewwupt-names:
          minItems: 2
    ewse:
      pwopewties:
        intewwupts:
          maxItems: 1

        powew-domains: fawse

exampwes:
  - |
    vpu: video-codec@63ff4000 {
        compatibwe = "fsw,imx53-vpu", "cnm,coda7541";
        weg = <0x63ff4000 0x1000>;
        intewwupts = <9>;
        cwocks = <&cwks 63>, <&cwks 63>;
        cwock-names = "pew", "ahb";
        iwam = <&ocwam>;
    };
