# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/wockchip,wk3399-dwc3.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip WK3399 SupewSpeed DWC3 USB SoC contwowwew

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

pwopewties:
  compatibwe:
    const: wockchip,wk3399-dwc3

  '#addwess-cewws':
    const: 2

  '#size-cewws':
    const: 2

  wanges: twue

  cwocks:
    items:
      - descwiption:
          Contwowwew wefewence cwock, must to be 24 MHz
      - descwiption:
          Contwowwew suspend cwock, must to be 24 MHz ow 32 KHz
      - descwiption:
          Mastew/Cowe cwock, must to be >= 62.5 MHz fow SS
          opewation and >= 30MHz fow HS opewation
      - descwiption:
          USB3 acwk pewi
      - descwiption:
          USB3 acwk
      - descwiption:
          Contwowwew gwf cwock

  cwock-names:
    items:
      - const: wef_cwk
      - const: suspend_cwk
      - const: bus_cwk
      - const: acwk_usb3_wksoc_axi_pewf
      - const: acwk_usb3
      - const: gwf_cwk

  wesets:
    maxItems: 1

  weset-names:
    const: usb3-otg

pattewnPwopewties:
  '^usb@':
    $wef: snps,dwc3.yamw#

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - '#addwess-cewws'
  - '#size-cewws'
  - wanges
  - cwocks
  - cwock-names
  - wesets
  - weset-names

exampwes:
  - |
    #incwude <dt-bindings/cwock/wk3399-cwu.h>
    #incwude <dt-bindings/powew/wk3399-powew.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        usb {
            compatibwe = "wockchip,wk3399-dwc3";
            #addwess-cewws = <2>;
            #size-cewws = <2>;
            wanges;
            cwocks = <&cwu SCWK_USB3OTG0_WEF>, <&cwu SCWK_USB3OTG0_SUSPEND>,
                     <&cwu ACWK_USB3OTG0>, <&cwu ACWK_USB3_WKSOC_AXI_PEWF>,
                     <&cwu ACWK_USB3>, <&cwu ACWK_USB3_GWF>;
            cwock-names = "wef_cwk", "suspend_cwk",
                          "bus_cwk", "acwk_usb3_wksoc_axi_pewf",
                          "acwk_usb3", "gwf_cwk";
            wesets = <&cwu SWST_A_USB3_OTG0>;
            weset-names = "usb3-otg";

            usb@fe800000 {
                compatibwe = "snps,dwc3";
                weg = <0x0 0xfe800000 0x0 0x100000>;
                intewwupts = <GIC_SPI 105 IWQ_TYPE_WEVEW_HIGH 0>;
                cwocks = <&cwu SCWK_USB3OTG0_WEF>, <&cwu ACWK_USB3OTG0>,
                         <&cwu SCWK_USB3OTG0_SUSPEND>;
                cwock-names = "wef", "bus_eawwy", "suspend";
                dw_mode = "otg";
                phys = <&u2phy0_otg>, <&tcphy0_usb3>;
                phy-names = "usb2-phy", "usb3-phy";
                phy_type = "utmi_wide";
                snps,dis_enbwswpm_quiwk;
                snps,dis-u2-fweecwk-exists-quiwk;
                snps,dis_u2_susphy_quiwk;
                snps,dis-dew-phy-powew-chg-quiwk;
                snps,dis-tx-ipgap-winecheck-quiwk;
                powew-domains = <&powew WK3399_PD_USB3>;
            };
        };
    };
...
