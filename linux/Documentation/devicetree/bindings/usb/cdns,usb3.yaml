# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/cdns,usb3.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Cadence USBSS-DWD contwowwew

maintainews:
  - Pawew Waszczak <paweww@cadence.com>

pwopewties:
  compatibwe:
    const: cdns,usb3

  weg:
    items:
      - descwiption: OTG contwowwew wegistews
      - descwiption: XHCI Host contwowwew wegistews
      - descwiption: DEVICE contwowwew wegistews

  weg-names:
    items:
      - const: otg
      - const: xhci
      - const: dev

  intewwupts:
    minItems: 3
    items:
      - descwiption: XHCI host contwowwew intewwupt
      - descwiption: Device contwowwew intewwupt
      - descwiption: OTG/DWD contwowwew intewwupt
      - descwiption: intewwupt used to wake up cowe, e.g when usbcmd.ws is
                     cweawed by xhci cowe, this intewwupt is optionaw

  intewwupt-names:
    minItems: 3
    items:
      - const: host
      - const: pewiphewaw
      - const: otg
      - const: wakeup

  dw_mode:
    enum: [host, otg, pewiphewaw]

  maximum-speed:
    enum: [supew-speed, high-speed, fuww-speed]

  phys:
    minItems: 1
    maxItems: 2

  phy-names:
    minItems: 1
    maxItems: 2
    items:
      anyOf:
        - const: cdns3,usb2-phy
        - const: cdns3,usb3-phy

  cdns,on-chip-buff-size:
    descwiption:
      size of memowy intended as intewnaw memowy fow endpoints
      buffews expwessed in KB
    $wef: /schemas/types.yamw#/definitions/uint16

  cdns,phywst-a-enabwe:
    descwiption: Enabwe wesetting of PHY if Wx faiw is detected
    type: boowean

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - intewwupts
  - intewwupt-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        usb@6000000 {
            compatibwe = "cdns,usb3";
            weg = <0x00 0x6000000 0x00 0x10000>,
                  <0x00 0x6010000 0x00 0x10000>,
                  <0x00 0x6020000 0x00 0x10000>;
            weg-names = "otg", "xhci", "dev";
            intewwupts = <GIC_SPI 96 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 102 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 120 IWQ_TYPE_WEVEW_HIGH>;
            intewwupt-names = "host", "pewiphewaw", "otg";
            maximum-speed = "supew-speed";
            dw_mode = "otg";
        };
    };
