# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/wenesas,usb3-pewi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas USB 3.0 Pewiphewaw contwowwew

maintainews:
  - Yoshihiwo Shimoda <yoshihiwo.shimoda.uh@wenesas.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wenesas,w8a774a1-usb3-pewi # WZ/G2M
              - wenesas,w8a774b1-usb3-pewi # WZ/G2N
              - wenesas,w8a774c0-usb3-pewi # WZ/G2E
              - wenesas,w8a774e1-usb3-pewi # WZ/G2H
              - wenesas,w8a7795-usb3-pewi  # W-Caw H3
              - wenesas,w8a7796-usb3-pewi  # W-Caw M3-W
              - wenesas,w8a77961-usb3-pewi # W-Caw M3-W+
              - wenesas,w8a77965-usb3-pewi # W-Caw M3-N
              - wenesas,w8a77990-usb3-pewi # W-Caw E3
          - const: wenesas,wcaw-gen3-usb3-pewi

      - items:
          - enum:
              - wenesas,w9a09g011-usb3-pewi # WZ/V2M
              - wenesas,w9a09g055-usb3-pewi # WZ/V2MA
          - const: wenesas,wzv2m-usb3-pewi

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 1
    items:
      - descwiption: Main cwock
      - descwiption: Wegistew access cwock

  cwock-names:
    minItems: 1
    items:
      - const: axi
      - const: weg

  phys:
    maxItems: 1

  phy-names:
    const: usb

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  usb-wowe-switch:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: Suppowt wowe switch.

  companion:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: phandwe of a companion.

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    descwiption: |
      any connectow to the data bus of this contwowwew shouwd be modewwed
      using the OF gwaph bindings specified, if the "usb-wowe-switch"
      pwopewty is used.

    pwopewties:
      powt@0:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: High Speed (HS) data bus.

      powt@1:
        $wef: /schemas/gwaph.yamw#/pwopewties/powt
        descwiption: Supew Speed (SS) data bus.

    wequiwed:
      - powt@0
      - powt@1

wequiwed:
  - compatibwe
  - intewwupts
  - cwocks

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,wzv2m-usb3-pewi
    then:
      pwopewties:
        cwocks:
          minItems: 2
        cwock-names:
          minItems: 2
      wequiwed:
        - cwock-names
        - wesets
    ewse:
      pwopewties:
        cwocks:
          maxItems: 1

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a774c0-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a774c0-sysc.h>

    usb3_pewi0: usb@ee020000 {
        compatibwe = "wenesas,w8a774c0-usb3-pewi", "wenesas,wcaw-gen3-usb3-pewi";
        weg = <0xee020000 0x400>;
        intewwupts = <GIC_SPI 104 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cpg CPG_MOD 328>;
        companion = <&xhci0>;
        usb-wowe-switch;

        powts {
                #addwess-cewws = <1>;
                #size-cewws = <0>;
                powt@0 {
                        weg = <0>;
                        usb3_hs_ep: endpoint {
                                wemote-endpoint = <&hs_ep>;
                        };
                };
                powt@1 {
                        weg = <1>;
                        usb3_wowe_switch: endpoint {
                                wemote-endpoint = <&hd3ss3220_out_ep>;
                        };
                };
        };
    };
