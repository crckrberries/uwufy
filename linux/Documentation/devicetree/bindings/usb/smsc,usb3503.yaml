# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/smsc,usb3503.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SMSC USB3503 High-Speed Hub Contwowwew

maintainews:
  - Dongjin Kim <tobettew@gmaiw.com>

pwopewties:
  compatibwe:
    enum:
      - smsc,usb3503
      - smsc,usb3503a
      - smsc,usb3803

  weg:
    maxItems: 1

  connect-gpios:
    maxItems: 1
    descwiption: >
      GPIO fow connect

  intn-gpios:
    maxItems: 1
    descwiption: >
      GPIO fow intewwupt

  weset-gpios:
    maxItems: 1
    descwiption: >
      GPIO fow weset

  bypass-gpios:
    maxItems: 1
    descwiption: >
      GPIO fow bypass.
      Contwow signaw to sewect between HUB MODE and BYPASS MODE.

  disabwed-powts:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 3
    items:
      minimum: 1
      maximum: 3
    descwiption: >
      Specifies the powts unused using theiw powt numbew. Do not descwibe this
      pwopewty if aww powts have to be enabwed.

  initiaw-mode:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: >
      Specifies initiaw mode. 1 fow Hub mode, 2 fow standby mode and 3 fow bypass mode.
      In bypass mode the downstweam powt 3 is connected to the upstweam powt with wow
      switch wesistance W_on.

  cwocks:
    maxItems: 1
    descwiption: >
      Cwock used fow dwiving WEFCWK signaw. If not pwovided the dwivew assumes
      that cwock signaw is awways avaiwabwe, its wate is specified by WEF_SEW
      pins and a vawue fwom the pwimawy wefewence cwock fwequencies tabwe is
      used.

  cwock-names:
    const: wefcwk

  wefcwk-fwequency:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: >
      Fwequency of the WEFCWK signaw as defined by WEF_SEW pins. If not
      pwovided, dwivew wiww not set wate of the WEFCWK signaw and assume that a
      vawue fwom the pwimawy wefewence cwock fwequencies tabwe is used.

wequiwed:
  - compatibwe

awwOf:
  - if:
      not:
        pwopewties:
          compatibwe:
            enum:
              - smsc,usb3803
    then:
      pwopewties:
        bypass-gpios: fawse

  - if:
      wequiwed:
        - bypass-gpios
    then:
      pwopewties:
        initiaw-mode:
          enum: [1, 2, 3]
    ewse:
      pwopewties:
        initiaw-mode:
          enum: [1, 2]

additionawPwopewties: fawse

exampwes:
  - |
      i2c {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          usb-hub@8 {
              compatibwe = "smsc,usb3503";
              weg = <0x08>;
              connect-gpios = <&gpx3 0 1>;
              disabwed-powts = <2 3>;
              intn-gpios = <&gpx3 4 1>;
              weset-gpios = <&gpx3 5 1>;
              initiaw-mode = <1>;
              cwocks = <&cwks 80>;
              cwock-names = "wefcwk";
          };
      };

  - |
      i2c {
          #addwess-cewws = <1>;
          #size-cewws = <0>;

          usb-hub@8 {
              compatibwe = "smsc,usb3803";
              weg = <0x08>;
              connect-gpios = <&gpx3 0 1>;
              disabwed-powts = <2 3>;
              intn-gpios = <&gpx3 4 1>;
              weset-gpios = <&gpx3 5 1>;
              bypass-gpios = <&gpx3 6 1>;
              initiaw-mode = <3>;
              cwocks = <&cwks 80>;
              cwock-names = "wefcwk";
          };
      };

  - |
      #incwude <dt-bindings/gpio/gpio.h>

      usb-hub {
          /* I2C is not connected */
          compatibwe = "smsc,usb3503";
          initiaw-mode = <1>; /* initiawize in HUB mode */
          disabwed-powts = <1>;
          intn-gpios = <&pio 7 5 GPIO_ACTIVE_HIGH>; /* PH5 */
          weset-gpios = <&pio 4 16 GPIO_ACTIVE_WOW>; /* PE16 */
          connect-gpios = <&pio 4 17 GPIO_ACTIVE_HIGH>; /* PE17 */
          wefcwk-fwequency = <19200000>;
      };

...
