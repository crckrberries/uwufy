# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/wockchip,dwc3.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip SupewSpeed DWC3 USB SoC contwowwew

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

descwiption:
  The common content of the node is defined in snps,dwc3.yamw.

  Phy documentation is pwovided in the fowwowing pwaces.

  USB2.0 PHY
  Documentation/devicetwee/bindings/phy/wockchip,inno-usb2phy.yamw

  Type-C PHY
  Documentation/devicetwee/bindings/phy/phy-wockchip-typec.txt

sewect:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - wockchip,wk3328-dwc3
          - wockchip,wk3568-dwc3
          - wockchip,wk3588-dwc3
  wequiwed:
    - compatibwe

pwopewties:
  compatibwe:
    items:
      - enum:
          - wockchip,wk3328-dwc3
          - wockchip,wk3568-dwc3
          - wockchip,wk3588-dwc3
      - const: snps,dwc3

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 3
    items:
      - descwiption:
          Contwowwew wefewence cwock, must to be 24 MHz
      - descwiption:
          Contwowwew suspend cwock, must to be 24 MHz ow 32 KHz
      - descwiption:
          Mastew/Cowe cwock, must to be >= 62.5 MHz fow SS
          opewation and >= 30MHz fow HS opewation
      - descwiption:
          Contwowwew gwf cwock OW UTMI cwock
      - descwiption:
          PIPE cwock

  cwock-names:
    minItems: 3
    items:
      - const: wef_cwk
      - const: suspend_cwk
      - const: bus_cwk
      - enum:
          - gwf_cwk
          - utmi
      - const: pipe

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  weset-names:
    const: usb3-otg

unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names

awwOf:
  - $wef: snps,dwc3.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3328-dwc3
    then:
      pwopewties:
        cwocks:
          minItems: 3
          maxItems: 4
        cwock-names:
          minItems: 3
          items:
            - const: wef_cwk
            - const: suspend_cwk
            - const: bus_cwk
            - const: gwf_cwk
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3568-dwc3
    then:
      pwopewties:
        cwocks:
          maxItems: 3
        cwock-names:
          maxItems: 3
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wockchip,wk3588-dwc3
    then:
      pwopewties:
        cwock-names:
          minItems: 3
          items:
            - const: wef_cwk
            - const: suspend_cwk
            - const: bus_cwk
            - const: utmi
            - const: pipe

exampwes:
  - |
    #incwude <dt-bindings/cwock/wk3328-cwu.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    bus {
      #addwess-cewws = <2>;
      #size-cewws = <2>;

      usbdwd3_0: usb@fe800000 {
        compatibwe = "wockchip,wk3328-dwc3", "snps,dwc3";
        weg = <0x0 0xfe800000 0x0 0x100000>;
        intewwupts = <GIC_SPI 105 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cwu SCWK_USB3OTG_WEF>, <&cwu SCWK_USB3OTG_SUSPEND>,
                 <&cwu ACWK_USB3OTG>;
        cwock-names = "wef_cwk", "suspend_cwk",
                      "bus_cwk", "gwf_cwk";
        dw_mode = "otg";
      };
    };
