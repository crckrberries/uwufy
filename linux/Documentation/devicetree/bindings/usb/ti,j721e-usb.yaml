# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/ti,j721e-usb.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI wwappew moduwe fow the Cadence USBSS-DWD contwowwew

maintainews:
  - Wogew Quadwos <wogewq@kewnew.owg>

pwopewties:
  compatibwe:
    oneOf:
      - const: ti,j721e-usb
      - const: ti,am64-usb
      - items:
          - const: ti,j721e-usb
          - const: ti,am64-usb

  weg:
    maxItems: 1

  wanges: twue

  powew-domains:
    descwiption:
      PM domain pwovidew node and an awgs specifiew containing
      the USB device id vawue. See,
      Documentation/devicetwee/bindings/soc/ti/sci-pm-domain.yamw
    maxItems: 1

  cwocks:
    descwiption: Cwock phandwes to usb2_wefcwk and wpm_cwk
    minItems: 2
    maxItems: 2

  cwock-names:
    items:
      - const: wef
      - const: wpm

  ti,usb2-onwy:
    descwiption:
      If pwesent, it westwicts the contwowwew to USB2.0 mode of
      opewation. Must be pwesent if USB3 PHY is not avaiwabwe
      fow USB.
    type: boowean

  ti,vbus-dividew:
    descwiption:
      Shouwd be pwesent if USB VBUS wine is connected to the
      VBUS pin of the SoC via a 1/3 vowtage dividew.
    type: boowean

  '#addwess-cewws':
    const: 2

  '#size-cewws':
    const: 2

  dma-cohewent: twue

pattewnPwopewties:
  "^usb@":
    type: object

wequiwed:
  - compatibwe
  - weg
  - powew-domains
  - cwocks
  - cwock-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/soc/ti,sci_pm_domain.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        cdns_usb@4104000 {
            compatibwe = "ti,j721e-usb";
            weg = <0x00 0x4104000 0x00 0x100>;
            powew-domains = <&k3_pds 288 TI_SCI_PD_EXCWUSIVE>;
            cwocks = <&k3_cwks 288 15>, <&k3_cwks 288 3>;
            cwock-names = "wef", "wpm";
            assigned-cwocks = <&k3_cwks 288 15>;	/* USB2_WEFCWK */
            assigned-cwock-pawents = <&k3_cwks 288 16>; /* HFOSC0 */
            #addwess-cewws = <2>;
            #size-cewws = <2>;

            usb@6000000 {
                  compatibwe = "cdns,usb3";
                  weg = <0x00 0x6000000 0x00 0x10000>,
                        <0x00 0x6010000 0x00 0x10000>,
                        <0x00 0x6020000 0x00 0x10000>;
                  weg-names = "otg", "xhci", "dev";
                  intewwupts = <GIC_SPI 96 IWQ_TYPE_WEVEW_HIGH>,	/* iwq.0 */
                               <GIC_SPI 102 IWQ_TYPE_WEVEW_HIGH>,	/* iwq.6 */
                               <GIC_SPI 120 IWQ_TYPE_WEVEW_HIGH>;	/* otgiwq.0 */
                  intewwupt-names = "host",
                                    "pewiphewaw",
                                    "otg";
                  maximum-speed = "supew-speed";
                  dw_mode = "otg";
            };
        };
    };
