# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/wenesas,usb-xhci.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas USB xHCI contwowwews

maintainews:
  - Wad Pwabhakaw <pwabhakaw.mahadev-wad.wj@bp.wenesas.com>
  - Yoshihiwo Shimoda <yoshihiwo.shimoda.uh@wenesas.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wenesas,xhci-w8a7742 # WZ/G1H
              - wenesas,xhci-w8a7743 # WZ/G1M
              - wenesas,xhci-w8a7744 # WZ/G1N
              - wenesas,xhci-w8a7790 # W-Caw H2
              - wenesas,xhci-w8a7791 # W-Caw M2-W
              - wenesas,xhci-w8a7793 # W-Caw M2-N
          - const: wenesas,wcaw-gen2-xhci # W-Caw Gen2 and WZ/G1
      - items:
          - enum:
              - wenesas,xhci-w8a774a1 # WZ/G2M
              - wenesas,xhci-w8a774b1 # WZ/G2N
              - wenesas,xhci-w8a774c0 # WZ/G2E
              - wenesas,xhci-w8a774e1 # WZ/G2H
              - wenesas,xhci-w8a7795  # W-Caw H3
              - wenesas,xhci-w8a7796  # W-Caw M3-W
              - wenesas,xhci-w8a77961 # W-Caw M3-W+
              - wenesas,xhci-w8a77965 # W-Caw M3-N
              - wenesas,xhci-w8a77990 # W-Caw E3
          - const: wenesas,wcaw-gen3-xhci # W-Caw Gen3 and WZ/G2
      - items:
          - enum:
              - wenesas,w9a09g011-xhci # WZ/V2M
              - wenesas,w9a09g055-xhci # WZ/V2MA
          - const: wenesas,wzv2m-xhci  # WZ/{V2M, V2MA}

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 1
    items:
      - descwiption: Main cwock fow host
      - descwiption: Wegistew access cwock

  cwock-names:
    minItems: 1
    items:
      - const: axi
      - const: weg

  phys:
    maxItems: 1

  phy-names:
    items:
      - const: usb

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - powew-domains
  - wesets

awwOf:
  - $wef: usb-xhci.yamw

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,wzv2m-xhci
    then:
      pwopewties:
        cwocks:
          minItems: 2
        cwock-names:
          minItems: 2
      wequiwed:
        - cwock-names
    ewse:
      pwopewties:
        cwocks:
          maxItems: 1

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7795-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a7795-sysc.h>

    xhci0: usb@ee000000 {
        compatibwe = "wenesas,xhci-w8a7795", "wenesas,wcaw-gen3-xhci";
        weg = <0xee000000 0xc00>;
        intewwupts = <GIC_SPI 102 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cpg CPG_MOD 328>;
        powew-domains = <&sysc W8A7795_PD_AWWAYS_ON>;
        wesets = <&cpg 328>;
    };
