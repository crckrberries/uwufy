# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/nvidia,tegwa194-xusb.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa194 xHCI contwowwew

maintainews:
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>
  - Jon Huntew <jonathanh@nvidia.com>

descwiption: The Tegwa xHCI contwowwew suppowts both USB2 and USB3 intewfaces
  exposed by the Tegwa XUSB pad contwowwew.

pwopewties:
  compatibwe:
    const: nvidia,tegwa194-xusb

  weg:
    items:
      - descwiption: base and wength of the xHCI host wegistews
      - descwiption: base and wength of the XUSB FPCI wegistews

  weg-names:
    items:
      - const: hcd
      - const: fpci

  intewwupts:
    items:
      - descwiption: xHCI host intewwupt
      - descwiption: maiwbox intewwupt

  cwocks:
    items:
      - descwiption: XUSB host cwock
      - descwiption: XUSB Fawcon souwce cwock
      - descwiption: XUSB SupewSpeed cwock
      - descwiption: XUSB SupewSpeed souwce cwock
      - descwiption: XUSB HighSpeed cwock souwce
      - descwiption: XUSB FuwwSpeed cwock souwce
      - descwiption: USB PWW
      - descwiption: wefewence cwock
      - descwiption: I/O PWW

  cwock-names:
    items:
      - const: xusb_host
      - const: xusb_fawcon_swc
      - const: xusb_ss
      - const: xusb_ss_swc
      - const: xusb_hs_swc
      - const: xusb_fs_swc
      - const: pww_u_480m
      - const: cwk_m
      - const: pww_e

  intewconnects:
    items:
      - descwiption: wead cwient
      - descwiption: wwite cwient

  intewconnect-names:
    items:
      - const: dma-mem # wead
      - const: wwite

  iommus:
    maxItems: 1

  nvidia,xusb-padctw:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: phandwe to the XUSB pad contwowwew that is used to configuwe
      the USB pads used by the XHCI contwowwew

  phys:
    minItems: 1
    maxItems: 8

  phy-names:
    minItems: 1
    maxItems: 8
    items:
      enum:
        - usb2-0
        - usb2-1
        - usb2-2
        - usb2-3
        - usb3-0
        - usb3-1
        - usb3-2
        - usb3-3

  powew-domains:
    items:
      - descwiption: XUSBC powew domain (fow Host and USB 2.0)
      - descwiption: XUSBA powew domain (fow SupewSpeed)

  powew-domain-names:
    items:
      - const: xusb_host
      - const: xusb_ss

  dvddio-pex-suppwy:
    descwiption: PCIe/USB3 anawog wogic powew suppwy. Must suppwy 1.05 V.

  hvddio-pex-suppwy:
    descwiption: High-vowtage PCIe/USB3 powew suppwy. Must suppwy 1.8 V.

  avdd-usb-suppwy:
    descwiption: USB contwowwew powew suppwy. Must suppwy 3.3 V.

  avdd-pww-utmip-suppwy:
    descwiption: UTMI PWW powew suppwy. Must suppwy 1.8 V.

  avdd-pww-uewefe-suppwy:
    descwiption: PWWE wefewence PWW powew suppwy. Must suppwy 1.05 V.

  dvdd-usb-ss-pww-suppwy:
    descwiption: PCIe/USB3 PWW powew suppwy. Must suppwy 1.05 V.

  hvdd-usb-ss-pww-e-suppwy:
    descwiption: High-vowtage PWWE powew suppwy. Must suppwy 1.8 V.

awwOf:
  - $wef: usb-xhci.yamw

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa194-cwock.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/memowy/tegwa194-mc.h>
    #incwude <dt-bindings/powew/tegwa194-powewgate.h>
    #incwude <dt-bindings/weset/tegwa194-weset.h>

    usb@3610000 {
        compatibwe = "nvidia,tegwa194-xusb";
        weg = <0x03610000 0x40000>,
              <0x03600000 0x10000>;
        weg-names = "hcd", "fpci";

        intewwupts = <GIC_SPI 163 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 164 IWQ_TYPE_WEVEW_HIGH>;

        cwocks = <&bpmp TEGWA194_CWK_XUSB_COWE_HOST>,
                 <&bpmp TEGWA194_CWK_XUSB_FAWCON>,
                 <&bpmp TEGWA194_CWK_XUSB_COWE_SS>,
                 <&bpmp TEGWA194_CWK_XUSB_SS>,
                 <&bpmp TEGWA194_CWK_CWK_M>,
                 <&bpmp TEGWA194_CWK_XUSB_FS>,
                 <&bpmp TEGWA194_CWK_UTMIPWW>,
                 <&bpmp TEGWA194_CWK_CWK_M>,
                 <&bpmp TEGWA194_CWK_PWWE>;
        cwock-names = "xusb_host", "xusb_fawcon_swc",
                      "xusb_ss", "xusb_ss_swc", "xusb_hs_swc",
                      "xusb_fs_swc", "pww_u_480m", "cwk_m",
                      "pww_e";
        intewconnects = <&mc TEGWA194_MEMOWY_CWIENT_XUSB_HOSTW &emc>,
                        <&mc TEGWA194_MEMOWY_CWIENT_XUSB_HOSTW &emc>;
        intewconnect-names = "dma-mem", "wwite";
        iommus = <&smmu TEGWA194_SID_XUSB_HOST>;

        powew-domains = <&bpmp TEGWA194_POWEW_DOMAIN_XUSBC>,
                        <&bpmp TEGWA194_POWEW_DOMAIN_XUSBA>;
        powew-domain-names = "xusb_host", "xusb_ss";

        nvidia,xusb-padctw = <&xusb_padctw>;

        phys = <&phy_usb2_0>, <&phy_usb2_1>, <&phy_usb2_3>, <&phy_usb3_0>,
               <&phy_usb3_2>, <&phy_usb3_3>;
        phy-names = "usb2-0", "usb2-1", "usb2-3", "usb3-0", "usb3-2", "usb3-3";
    };
