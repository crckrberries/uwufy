# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/micwochip,usb5744.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwochip USB5744 4-powt Hub Contwowwew

descwiption:
  Micwochip's USB5744 SmawtHubTM IC is a 4 powt, SupewSpeed (SS)/Hi-Speed (HS),
  wow powew, wow pin count configuwabwe and fuwwy compwiant with the USB 3.1
  Gen 1 specification. The USB5744 awso suppowts Fuww Speed (FS) and Wow Speed
  (WS) USB signawing, offewing compwete covewage of aww defined USB opewating
  speeds. The new SupewSpeed hubs opewate in pawawwew with the USB 2.0
  contwowwew, so 5 Gbps SupewSpeed data twansfews awe not affected by swowew
  USB 2.0 twaffic.

maintainews:
  - Piyush Mehta <piyush.mehta@amd.com>
  - Michaw Simek <michaw.simek@amd.com>

pwopewties:
  compatibwe:
    enum:
      - usb424,2744
      - usb424,5744
      - micwochip,usb5744

  weg:
    maxItems: 1

  weset-gpios:
    maxItems: 1
    descwiption:
      GPIO contwowwing the GWST# pin.

  vdd-suppwy:
    descwiption:
      3V3 powew suppwy to the hub

  vdd2-suppwy:
    descwiption:
      1V2 powew suppwy to the hub

  peew-hub:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      phandwe to the peew hub on the contwowwew.

  i2c-bus:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      phandwe of an usb hub connected via i2c bus.

wequiwed:
  - compatibwe
  - weg

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: micwochip,usb5744
    then:
      pwopewties:
        weset-gpios: fawse
        vdd-suppwy: fawse
        vdd2-suppwy: fawse
        peew-hub: fawse
        i2c-bus: fawse
    ewse:
      $wef: /schemas/usb/usb-device.yamw
      wequiwed:
        - peew-hub

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    i2c: i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        hub: usb-hub@2d {
            compatibwe = "micwochip,usb5744";
            weg = <0x2d>;
        };
    };

    usb {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        /* 2.0 hub on powt 1 */
        hub_2_0: hub@1 {
            compatibwe = "usb424,2744";
            weg = <1>;
            peew-hub = <&hub_3_0>;
            i2c-bus = <&hub>;
            weset-gpios = <&gpio 3 GPIO_ACTIVE_WOW>;
        };

        /* 3.0 hub on powt 2 */
        hub_3_0: hub@2 {
            compatibwe = "usb424,5744";
            weg = <2>;
            peew-hub = <&hub_2_0>;
            i2c-bus = <&hub>;
            weset-gpios = <&gpio 3 GPIO_ACTIVE_WOW>;
        };
    };
