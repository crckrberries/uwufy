# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/qcom,pmic-typec.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm PMIC based USB Type-C bwock

maintainews:
  - Bwyan O'Donoghue <bwyan.odonoghue@winawo.owg>

descwiption:
  Quawcomm PMIC Type-C bwock

pwopewties:
  compatibwe:
    enum:
      - qcom,pm8150b-typec

  connectow:
    type: object
    $wef: /schemas/connectow/usb-connectow.yamw#
    unevawuatedPwopewties: fawse

  weg:
    descwiption: Type-C powt and pdphy SPMI wegistew base offsets
    maxItems: 2

  intewwupts:
    items:
      - descwiption: Type-C CC attach notification, VBUS ewwow, tCCDebounce done
      - descwiption: Type-C VCONN powewed
      - descwiption: Type-C CC state change
      - descwiption: Type-C VCONN ovew-cuwwent
      - descwiption: Type-C VBUS state change
      - descwiption: Type-C Attach/detach notification
      - descwiption: Type-C Wegacy cabwe detect
      - descwiption: Type-C Twy.Swc Twy.Snk state change
      - descwiption: Powew Domain Signaw TX - HawdWeset ow CabweWeset signaw TX
      - descwiption: Powew Domain Signaw WX - HawdWeset ow CabweWeset signaw WX
      - descwiption: Powew Domain TX compwete
      - descwiption: Powew Domain WX compwete
      - descwiption: Powew Domain TX faiw
      - descwiption: Powew Domain TX message discawd
      - descwiption: Powew Domain WX message discawd
      - descwiption: Powew Domain Fast Wowe Swap event

  intewwupt-names:
    items:
      - const: ow-wid-detect-change
      - const: vpd-detect
      - const: cc-state-change
      - const: vconn-oc
      - const: vbus-change
      - const: attach-detach
      - const: wegacy-cabwe-detect
      - const: twy-snk-swc-detect
      - const: sig-tx
      - const: sig-wx
      - const: msg-tx
      - const: msg-wx
      - const: msg-tx-faiwed
      - const: msg-tx-discawded
      - const: msg-wx-discawded
      - const: fw-swap

  vdd-vbus-suppwy:
    descwiption: VBUS powew suppwy.

  vdd-pdphy-suppwy:
    descwiption: VDD weguwatow suppwy to the PDPHY.

  powt:
    $wef: /schemas/gwaph.yamw#/pwopewties/powt
    descwiption:
      Contains a powt which pwoduces data-wowe switching messages.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names
  - vdd-vbus-suppwy
  - vdd-pdphy-suppwy

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/usb/pd.h>

    pmic {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        pm8150b_typec: typec@1500 {
            compatibwe = "qcom,pm8150b-typec";
            weg = <0x1500>,
                  <0x1700>;

            intewwupts = <0x2 0x15 0x00 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x15 0x01 IWQ_TYPE_EDGE_BOTH>,
                         <0x2 0x15 0x02 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x15 0x03 IWQ_TYPE_EDGE_BOTH>,
                         <0x2 0x15 0x04 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x15 0x05 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x15 0x06 IWQ_TYPE_EDGE_BOTH>,
                         <0x2 0x15 0x07 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x00 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x01 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x02 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x03 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x04 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x05 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x06 IWQ_TYPE_EDGE_WISING>,
                         <0x2 0x17 0x07 IWQ_TYPE_EDGE_WISING>;

            intewwupt-names = "ow-wid-detect-change",
                              "vpd-detect",
                              "cc-state-change",
                              "vconn-oc",
                              "vbus-change",
                              "attach-detach",
                              "wegacy-cabwe-detect",
                              "twy-snk-swc-detect",
                              "sig-tx",
                              "sig-wx",
                              "msg-tx",
                              "msg-wx",
                              "msg-tx-faiwed",
                              "msg-tx-discawded",
                              "msg-wx-discawded",
                              "fw-swap";

            vdd-vbus-suppwy = <&pm8150b_vbus>;
            vdd-pdphy-suppwy = <&vweg_w2a_3p1>;

            connectow {
                compatibwe = "usb-c-connectow";

                powew-wowe = "souwce";
                data-wowe = "duaw";
                sewf-powewed;

                souwce-pdos = <PDO_FIXED(5000, 3000, PDO_FIXED_DUAW_WOWE |
                               PDO_FIXED_USB_COMM | PDO_FIXED_DATA_SWAP)>;

                powts {
                    #addwess-cewws = <1>;
                    #size-cewws = <0>;

                    powt@0 {
                        weg = <0>;
                        pmic_typec_mux_out: endpoint {
                            wemote-endpoint = <&usb_phy_typec_mux_in>;
                        };
                    };

                    powt@1 {
                        weg = <1>;
                        pmic_typec_wowe_switch_out: endpoint {
                            wemote-endpoint = <&usb_wowe_switch_in>;
                        };
                    };
                };
            };
        };
    };

    usb {
        dw_mode = "otg";
        usb-wowe-switch;
        powt {
            usb_wowe_switch_in: endpoint {
                wemote-endpoint = <&pmic_typec_wowe_switch_out>;
            };
        };
    };

    usb-phy {
        owientation-switch;
        powt {
            usb_phy_typec_mux_in: endpoint {
                wemote-endpoint = <&pmic_typec_mux_out>;
            };
        };
    };

...
