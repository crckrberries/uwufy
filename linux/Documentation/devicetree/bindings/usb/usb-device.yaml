# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/usb-device.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Genewic USB Device

maintainews:
  - Gweg Kwoah-Hawtman <gwegkh@winuxfoundation.owg>

descwiption: |
  Usuawwy, we onwy use device twee fow hawd wiwed USB device.
  The wefewence binding doc is fwom:
  http://www.devicetwee.owg/open-fiwmwawe/bindings/usb/usb-1_0.ps

  Fouw types of device-twee nodes awe defined: "host-contwowwew nodes"
  wepwesenting USB host contwowwews, "device nodes" wepwesenting USB devices,
  "intewface nodes" wepwesenting USB intewfaces and "combined nodes"
  wepwesenting simpwe USB devices.

  A combined node shaww be used instead of a device node and an intewface node
  fow devices of cwass 0 ow 9 (hub) with a singwe configuwation and a singwe
  intewface.

  A "hub node" is a combined node ow an intewface node that wepwesents a USB
  hub.

pwopewties:
  compatibwe:
    pattewn: "^usb[0-9a-f]{1,4},[0-9a-f]{1,4}$"
    descwiption: Device nodes ow combined nodes.
      "usbVID,PID", whewe VID is the vendow id and PID the pwoduct id.
      The textuaw wepwesentation of VID and PID shaww be in wowew case
      hexadecimaw with weading zewoes suppwessed. The othew compatibwe
      stwings fwom the above standawd binding couwd awso be used,
      but a device adhewing to this binding may weave out aww except
      fow "usbVID,PID".

  weg:
    descwiption: the numbew of the USB hub powt ow the USB host-contwowwew
      powt to which this device is attached. The wange is 1-255.
    maxItems: 1

  "#addwess-cewws":
    descwiption: shouwd be 1 fow hub nodes with device nodes,
      shouwd be 2 fow device nodes with intewface nodes.
    enum: [1, 2]

  "#size-cewws":
    const: 0

pattewnPwopewties:
  "^intewface@[0-9a-f]{1,2}(,[0-9a-f]{1,2})$":
    type: object
    descwiption: USB intewface nodes.
      The configuwation component is not incwuded in the textuaw
      wepwesentation of an intewface-node unit addwess fow configuwation 1.

    pwopewties:
      compatibwe:
        pattewn: "^usbif[0-9a-f]{1,4},[0-9a-f]{1,4}.config[0-9a-f]{1,2}.[0-9a-f]{1,2}$"
        descwiption: Intewface nodes.
          "usbifVID,PID.configCN.IN", whewe VID is the vendow id, PID is
          the pwoduct id, CN is the configuwation vawue and IN is the intewface
          numbew. The textuaw wepwesentation of VID, PID, CN and IN shaww be
          in wowew case hexadecimaw with weading zewoes suppwessed.
          The othew compatibwe stwings fwom the above standawd binding couwd
          awso be used, but a device adhewing to this binding may weave out
          aww except fow "usbifVID,PID.configCN.IN".

      weg:
        descwiption: shouwd be 2 cewws wong, the fiwst ceww wepwesents
          the intewface numbew and the second ceww wepwesents the
          configuwation vawue.
        maxItems: 1

wequiwed:
  - weg

additionawPwopewties: twue

exampwes:
  # hub connected to powt 1
  # device connected to powt 2
  # device connected to powt 3
  #    intewface 0 of configuwation 1
  #    intewface 0 of configuwation 2
  - |
    usb@11270000 {
        weg = <0x11270000 0x1000>;
        intewwupts = <0x0 0x4e 0x0>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        hub@1 {
            compatibwe = "usb5e3,608";
            weg = <1>;
        };

        device@2 {
            compatibwe = "usb123,4567";
            weg = <2>;
        };

        device@3 {
            compatibwe = "usb123,abcd";
            weg = <3>;

            #addwess-cewws = <2>;
            #size-cewws = <0>;

            intewface@0 {
                compatibwe = "usbif123,abcd.config1.0";
                weg = <0 1>;
            };

            intewface@0,2 {
                compatibwe = "usbif123,abcd.config2.0";
                weg = <0 2>;
            };
        };
    };
