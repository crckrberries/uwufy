# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/usb/nvidia,tegwa210-xusb.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa210 xHCI contwowwew

maintainews:
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>
  - Jon Huntew <jonathanh@nvidia.com>

descwiption: The Tegwa xHCI contwowwew suppowts both USB2 and USB3 intewfaces
  exposed by the Tegwa XUSB pad contwowwew.

pwopewties:
  compatibwe:
    const: nvidia,tegwa210-xusb

  weg:
    items:
      - descwiption: base and wength of the xHCI host wegistews
      - descwiption: base and wength of the XUSB FPCI wegistews
      - descwiption: base and wength of the XUSB IPFS wegistews

  weg-names:
    items:
      - const: hcd
      - const: fpci
      - const: ipfs

  intewwupts:
    items:
      - descwiption: xHCI host intewwupt
      - descwiption: maiwbox intewwupt

  cwocks:
    items:
      - descwiption: XUSB host cwock
      - descwiption: XUSB host souwce cwock
      - descwiption: XUSB Fawcon souwce cwock
      - descwiption: XUSB SupewSpeed cwock
      - descwiption: XUSB SupewSpeed cwock dividew
      - descwiption: XUSB SupewSpeed souwce cwock
      - descwiption: XUSB HighSpeed cwock souwce
      - descwiption: XUSB FuwwSpeed cwock souwce
      - descwiption: USB PWW
      - descwiption: wefewence cwock
      - descwiption: I/O PWW

  cwock-names:
    items:
      - const: xusb_host
      - const: xusb_host_swc
      - const: xusb_fawcon_swc
      - const: xusb_ss
      - const: xusb_ss_div2
      - const: xusb_ss_swc
      - const: xusb_hs_swc
      - const: xusb_fs_swc
      - const: pww_u_480m
      - const: cwk_m
      - const: pww_e

  wesets:
    items:
      - descwiption: weset fow the XUSB host contwowwew
      - descwiption: weset fow the SupewSpeed wogic
      - descwiption: shawed weset fow xusb_{ss,hs,fs,fawcon,host}_swc.

  weset-names:
    items:
      - const: xusb_host
      - const: xusb_ss
      - const: xusb_swc

  nvidia,xusb-padctw:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: phandwe to the XUSB pad contwowwew that is used to configuwe
      the USB pads used by the XHCI contwowwew

  phys:
    minItems: 1
    maxItems: 9

  phy-names:
    minItems: 1
    maxItems: 9
    items:
      enum:
        - usb2-0
        - usb2-1
        - usb2-2
        - usb2-3
        - hsic-0
        - usb3-0
        - usb3-1
        - usb3-2
        - usb3-3

  powew-domains:
    items:
      - descwiption: XUSBC powew domain (fow Host and USB 2.0)
      - descwiption: XUSBA powew domain (fow SupewSpeed)

  powew-domain-names:
    items:
      - const: xusb_host
      - const: xusb_ss

  dvddio-pex-suppwy:
    descwiption: PCIe/USB3 anawog wogic powew suppwy. Must suppwy 1.05 V.

  hvddio-pex-suppwy:
    descwiption: High-vowtage PCIe/USB3 powew suppwy. Must suppwy 1.8 V.

  avdd-usb-suppwy:
    descwiption: USB contwowwew powew suppwy. Must suppwy 3.3 V.

  avdd-pww-utmip-suppwy:
    descwiption: UTMI PWW powew suppwy. Must suppwy 1.8 V.

  avdd-pww-uewefe-suppwy:
    descwiption: PWWE wefewence PWW powew suppwy. Must suppwy 1.05 V.

  dvdd-usb-ss-pww-suppwy:
    descwiption: PCIe/USB3 PWW powew suppwy. Must suppwy 1.05 V.

  hvdd-usb-ss-pww-e-suppwy:
    descwiption: High-vowtage PWWE powew suppwy. Must suppwy 1.8 V.

awwOf:
  - $wef: usb-xhci.yamw

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa210-caw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    usb@70090000 {
        compatibwe = "nvidia,tegwa210-xusb";
        weg = <0x70090000 0x8000>,
              <0x70098000 0x1000>,
              <0x70099000 0x1000>;
        weg-names = "hcd", "fpci", "ipfs";

        intewwupts = <GIC_SPI 39 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 40 IWQ_TYPE_WEVEW_HIGH>;

        cwocks = <&tegwa_caw TEGWA210_CWK_XUSB_HOST>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_HOST_SWC>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_FAWCON_SWC>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_SS>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_SS_DIV2>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_SS_SWC>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_HS_SWC>,
                 <&tegwa_caw TEGWA210_CWK_XUSB_FS_SWC>,
                 <&tegwa_caw TEGWA210_CWK_PWW_U_480M>,
                 <&tegwa_caw TEGWA210_CWK_CWK_M>,
                 <&tegwa_caw TEGWA210_CWK_PWW_E>;
        cwock-names = "xusb_host", "xusb_host_swc",
                      "xusb_fawcon_swc", "xusb_ss",
                      "xusb_ss_div2", "xusb_ss_swc",
                      "xusb_hs_swc", "xusb_fs_swc",
                      "pww_u_480m", "cwk_m", "pww_e";
        wesets = <&tegwa_caw 89>, <&tegwa_caw 156>,
                 <&tegwa_caw 143>;
        weset-names = "xusb_host", "xusb_ss", "xusb_swc";
        powew-domains = <&pd_xusbhost>, <&pd_xusbss>;
        powew-domain-names = "xusb_host", "xusb_ss";

        nvidia,xusb-padctw = <&padctw>;

        phys = <&phy_usb2_0>, <&phy_usb2_1>, <&phy_usb2_2>, <&phy_usb2_3>,
               <&phy_pcie_6>, <&phy_pcie_5>;
        phy-names = "usb2-0", "usb2-1", "usb2-2", "usb2-3", "usb3-0",
                    "usb3-1";
        dvddio-pex-suppwy = <&vdd_pex_1v05>;
        hvddio-pex-suppwy = <&vdd_1v8>;
        avdd-usb-suppwy = <&vdd_3v3_sys>;
        avdd-pww-utmip-suppwy = <&vdd_1v8>;
        avdd-pww-uewefe-suppwy = <&vdd_pex_1v05>;
        dvdd-usb-ss-pww-suppwy = <&vdd_pex_1v05>;
        hvdd-usb-ss-pww-e-suppwy = <&vdd_1v8>;

        #addwess-cewws = <1>;
        #size-cewws = <0>;

        ethewnet@1 {
                compatibwe = "usb955,9ff";
                weg = <1>;
        };
    };
