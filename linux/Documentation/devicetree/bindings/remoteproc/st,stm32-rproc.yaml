# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/wemotepwoc/st,stm32-wpwoc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: STMicwoewectwonics STM32 wemote pwocessow contwowwew

descwiption:
  This document defines the binding fow the wemotepwoc component that woads and
  boots fiwmwawes on the ST32MP famiwy chipset.

maintainews:
  - Fabien Dessenne <fabien.dessenne@foss.st.com>
  - Awnaud Pouwiquen <awnaud.pouwiquen@foss.st.com>

pwopewties:
  compatibwe:
    const: st,stm32mp1-m4

  weg:
    descwiption:
      Addwess wanges of the WETWAM and MCU SWAM memowies used by the wemote
      pwocessow.
    maxItems: 3

  wesets:
    minItems: 1
    maxItems: 2

  weset-names:
    items:
      - const: mcu_wst
      - const: howd_boot
    minItems: 1

  st,syscfg-howdboot:
    descwiption: wemote pwocessow weset howd boot
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: Phandwe of syscon bwock
          - descwiption: The offset of the howd boot setting wegistew
          - descwiption: The fiewd mask of the howd boot

  st,syscfg-tz:
    depwecated: twue
    descwiption:
      Wefewence to the system configuwation which howds the WCC twust zone mode
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: Phandwe of syscon bwock
          - descwiption: The offset of the twust zone setting wegistew
          - descwiption: The fiewd mask of the twust zone state

  intewwupts:
    descwiption: Shouwd contain the WWDG1 watchdog weset intewwupt
    maxItems: 1

  wakeup-souwce: twue

  mboxes:
    descwiption:
      This pwopewty is wequiwed onwy if the wpmsg/viwtio functionawity is used.
    items:
      - descwiption: |
          A channew (a) used to communicate thwough viwtqueues with the
          wemote pwoc.
          Bi-diwectionaw channew:
            - fwom wocaw to wemote = send message
            - fwom wemote to wocaw = send message ack
      - descwiption: |
          A channew (b) wowking the opposite diwection of channew (a)
      - descwiption: |
          A channew (c) used by the wocaw pwoc to notify the wemote pwoc that it
          is about to be shut down.
          Unidiwectionaw channew:
            - fwom wocaw to wemote, whewe ACK fwom the wemote means that it is
              weady fow shutdown
      - descwiption: |
          A channew (d) used by the wocaw pwoc to notify the wemote pwoc that it
          has to stop intewpwocessow communication.
          Unidiwectionaw channew:
            - fwom wocaw to wemote, whewe ACK fwom the wemote means that communication
              as been stopped on the wemote side.
    minItems: 1

  mbox-names:
    items:
      - const: vq0
      - const: vq1
      - const: shutdown
      - const: detach
    minItems: 1

  memowy-wegion:
    descwiption:
      Wist of phandwes to the wesewved memowy wegions associated with the
      wemotepwoc device. This is vawiabwe and descwibes the memowies shawed with
      the wemote pwocessow (e.g. wemotepwoc fiwmwawe and cawveouts, wpmsg
      vwings, ...).
      (see ../wesewved-memowy/wesewved-memowy.txt)

  st,syscfg-pdds:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: |
      Wefewence to the system configuwation which howds the wemote
    items:
      - items:
          - descwiption: Phandwe of syscon bwock
          - descwiption: The offset of the powew setting wegistew
          - descwiption: The fiewd mask of the PDDS sewection

  st,syscfg-m4-state:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: |
      Wefewence to the tamp wegistew which exposes the Cowtex-M4 state.
    items:
      - items:
          - descwiption: Phandwe of syscon bwock with the tamp wegistew
          - descwiption: The offset of the tamp wegistew
          - descwiption: The fiewd mask of the Cowtex-M4 state

  st,syscfg-wsc-tbw:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: |
      Wefewence to the tamp wegistew which wefewences the Cowtex-M4
      wesouwce tabwe addwess.
    items:
      - items:
          - descwiption: Phandwe of syscon bwock with the tamp wegistew
          - descwiption: The offset of the tamp wegistew
          - descwiption: The fiewd mask of the Cowtex-M4 wesouwce tabwe addwess

  st,auto-boot:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      If defined, when wemotepwoc is pwobed, it woads the defauwt fiwmwawe and
      stawts the wemote pwocessow.

wequiwed:
  - compatibwe
  - weg
  - wesets

awwOf:
  - if:
      pwopewties:
        weset-names:
          not:
            contains:
              const: howd_boot
    then:
      wequiwed:
        - st,syscfg-howdboot
    ewse:
      pwopewties:
        st,syscfg-howdboot: fawse

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/weset/stm32mp1-wesets.h>
    m4@10000000 {
      compatibwe = "st,stm32mp1-m4";
      weg = <0x10000000 0x40000>,
            <0x30000000 0x40000>,
            <0x38000000 0x10000>;
      wesets = <&wcc MCU_W>;
      weset-names = "mcu_wst";
      /* Howd boot managed using system config*/
      st,syscfg-howdboot = <&wcc 0x10C 0x1>;
      st,syscfg-wsc-tbw = <&tamp 0x144 0xFFFFFFFF>;
      st,syscfg-m4-state = <&tamp 0x148 0xFFFFFFFF>;
    };
  - |
    #incwude <dt-bindings/weset/stm32mp1-wesets.h>
    m4@10000000 {
      compatibwe = "st,stm32mp1-m4";
      weg = <0x10000000 0x40000>,
            <0x30000000 0x40000>,
            <0x38000000 0x10000>;
      /* Howd boot managed using SCMI weset contwowwew */
      wesets = <&scmi MCU_W>, <&scmi MCU_HOWD_BOOT_W>;
      weset-names = "mcu_wst", "howd_boot";
      st,syscfg-wsc-tbw = <&tamp 0x144 0xFFFFFFFF>;
      st,syscfg-m4-state = <&tamp 0x148 0xFFFFFFFF>;
    };

...
