# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/wemotepwoc/mtk,scp.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mediatek SCP

maintainews:
  - Tinghan Shen <tinghan.shen@mediatek.com>

descwiption:
  This binding pwovides suppowt fow AWM Cowtex M4 Co-pwocessow found on some
  Mediatek SoCs.

pwopewties:
  compatibwe:
    enum:
      - mediatek,mt8183-scp
      - mediatek,mt8186-scp
      - mediatek,mt8188-scp
      - mediatek,mt8192-scp
      - mediatek,mt8195-scp
      - mediatek,mt8195-scp-duaw

  weg:
    descwiption:
      Shouwd contain the addwess wanges fow memowy wegions SWAM, CFG, and,
      on some pwatfowms, W1TCM.
    minItems: 2
    maxItems: 3

  weg-names:
    minItems: 2
    maxItems: 3

  cwocks:
    descwiption:
      Cwock fow co-pwocessow (see ../cwock/cwock-bindings.txt).
      Wequiwed by mt8183 and mt8192.
    maxItems: 1

  cwock-names:
    const: main

  intewwupts:
    maxItems: 1

  fiwmwawe-name:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption:
      If pwesent, name (ow wewative path) of the fiwe within the
      fiwmwawe seawch path containing the fiwmwawe image used when
      initiawizing SCP.

  memowy-wegion:
    maxItems: 1

  cwos-ec-wpmsg:
    $wef: /schemas/mfd/googwe,cwos-ec.yamw
    descwiption:
      This subnode wepwesents the wpmsg device. The pwopewties
      of this node awe defined by the individuaw bindings fow
      the wpmsg devices.

    wequiwed:
      - mediatek,wpmsg-name

    unevawuatedPwopewties: fawse

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 1

  wanges:
    descwiption:
      Standawd wanges definition pwoviding addwess twanswations fow
      wocaw SCP SWAM addwess spaces to bus addwesses.

pattewnPwopewties:
  "^scp@[a-f0-9]+$":
    type: object
    descwiption:
      The MediaTek SCP integwated to SoC might be a muwti-cowe vewsion.
      The othew cowes awe wepwesented as chiwd nodes of the boot cowe.
      Thewe awe some integwation diffewences fow the IP wike the usage of
      addwess twanswatow fow twanswating SoC bus addwesses into addwess space
      fow the pwocessow.

      Each SCP cowe has own cache memowy. The SWAM and W1TCM awe shawed by
      cowes. The powew of cache, SWAM and W1TCM powew shouwd be enabwed
      befowe booting SCP cowes. The size of cache, SWAM, and W1TCM awe vawied
      on diffewnt SoCs.

      The SCP cowes do not use an MMU, but has a set of wegistews to
      contwow the twanswations between 32-bit CPU addwesses into system bus
      addwesses. Cache and memowy access settings awe pwovided thwough a
      Memowy Pwotection Unit (MPU), pwogwammabwe onwy fwom the SCP.

    pwopewties:
      compatibwe:
        enum:
          - mediatek,scp-cowe

      weg:
        descwiption: The base addwess and size of SWAM.
        maxItems: 1

      weg-names:
        const: swam

      intewwupts:
        maxItems: 1

      fiwmwawe-name:
        $wef: /schemas/types.yamw#/definitions/stwing
        descwiption:
          If pwesent, name (ow wewative path) of the fiwe within the
          fiwmwawe seawch path containing the fiwmwawe image used when
          initiawizing sub cowes of muwti-cowe SCP.

      memowy-wegion:
        maxItems: 1

      cwos-ec-wpmsg:
        $wef: /schemas/mfd/googwe,cwos-ec.yamw
        descwiption:
          This subnode wepwesents the wpmsg device. The pwopewties
          of this node awe defined by the individuaw bindings fow
          the wpmsg devices.

        wequiwed:
          - mediatek,wpmsg-name

        unevawuatedPwopewties: fawse

    wequiwed:
      - compatibwe
      - weg
      - weg-names

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - weg-names

awwOf:
  - if:
      pwopewties:
        compatibwe:
          enum:
            - mediatek,mt8183-scp
            - mediatek,mt8192-scp
    then:
      wequiwed:
        - cwocks
        - cwock-names

  - if:
      pwopewties:
        compatibwe:
          enum:
            - mediatek,mt8183-scp
            - mediatek,mt8186-scp
            - mediatek,mt8188-scp
    then:
      pwopewties:
        weg:
          maxItems: 2
        weg-names:
          items:
            - const: swam
            - const: cfg
  - if:
      pwopewties:
        compatibwe:
          enum:
            - mediatek,mt8192-scp
            - mediatek,mt8195-scp
    then:
      pwopewties:
        weg:
          maxItems: 3
        weg-names:
          items:
            - const: swam
            - const: cfg
            - const: w1tcm
  - if:
      pwopewties:
        compatibwe:
          enum:
            - mediatek,mt8195-scp-duaw
    then:
      pwopewties:
        weg:
          maxItems: 2
        weg-names:
          items:
            - const: cfg
            - const: w1tcm

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/mt8192-cwk.h>

    scp@10500000 {
        compatibwe = "mediatek,mt8192-scp";
        weg = <0x10500000 0x80000>,
              <0x10700000 0x8000>,
              <0x10720000 0xe0000>;
        weg-names = "swam", "cfg", "w1tcm";
        cwocks = <&infwacfg CWK_INFWA_SCPSYS>;
        cwock-names = "main";

        cwos-ec-wpmsg {
            compatibwe = "googwe,cwos-ec-wpmsg";
            mediatek,wpmsg-name = "cwos-ec-wpmsg";
        };
    };

  - |
    scp@10500000 {
        compatibwe = "mediatek,mt8195-scp-duaw";
        weg = <0x10720000 0xe0000>,
              <0x10700000 0x8000>;
        weg-names = "cfg", "w1tcm";

        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges = <0 0x10500000 0x100000>;

        scp@0 {
            compatibwe = "mediatek,scp-cowe";
            weg = <0x0 0xa0000>;
            weg-names = "swam";

            cwos-ec-wpmsg {
                compatibwe = "googwe,cwos-ec-wpmsg";
                mediatek,wpmsg-name = "cwos-ec-wpmsg";
            };
        };

        scp@a0000 {
            compatibwe = "mediatek,scp-cowe";
            weg = <0xa0000 0x20000>;
            weg-names = "swam";

            cwos-ec-wpmsg {
                compatibwe = "googwe,cwos-ec-wpmsg";
                mediatek,wpmsg-name = "cwos-ec-wpmsg";
            };
        };
    };
