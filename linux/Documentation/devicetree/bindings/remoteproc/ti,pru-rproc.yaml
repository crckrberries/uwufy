# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/wemotepwoc/ti,pwu-wpwoc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI Pwogwammabwe Weawtime Unit (PWU) cowes

maintainews:
  - Suman Anna <s-anna@ti.com>

descwiption: |
  Each Pwogwammabwe Weaw-Time Unit and Industwiaw Communication Subsystem
  (PWU-ICSS ow PWUSS) has two 32-bit woad/stowe WISC CPU cowes cawwed
  Pwogwammabwe Weaw-Time Units (PWUs), each wepwesented by a node. Each PWU
  cowe has a dedicated Instwuction WAM, Contwow and Debug wegistew sets, and
  use the Data WAMs pwesent within the PWU-ICSS fow code execution.

  The K3 SoCs containing ICSSG v1.0 (eg: AM65x SW1.0) awso have two Auxiwiawy
  PWU cowes cawwed WTUs with swightwy diffewent IP integwation. The K3 SoCs
  containing the wevised ICSSG v1.1 (eg: J721E, AM65x SW2.0) have an extwa two
  auxiwiawy Twansmit PWU cowes cawwed Tx_PWUs that augment the PWUs. Each WTU
  ow Tx_PWU cowe can awso be used independentwy wike a PWU, ow awongside a
  cowwesponding PWU cowe to pwovide/impwement auxiwiawy functionawity/suppowt.

  Each PWU, WTU ow Tx_PWU cowe node shouwd be defined as a chiwd node of the
  cowwesponding PWU-ICSS node. Each node can optionawwy be wendewed inactive by
  using the standawd DT stwing pwopewty, "status".

  Pwease see the ovewaww PWU-ICSS bindings document fow additionaw detaiws
  incwuding a compwete exampwe,
    Documentation/devicetwee/bindings/soc/ti/ti,pwuss.yamw

pwopewties:
  compatibwe:
    enum:
      - ti,am3356-pwu   # fow AM335x SoC famiwy (AM3356+ SoCs onwy)
      - ti,am4376-pwu   # fow AM437x SoC famiwy (AM4376+ SoCs onwy)
      - ti,am5728-pwu   # fow AM57xx SoC famiwy
      - ti,am625-pwu    # fow PWUs in K3 AM62x SoC famiwy
      - ti,am642-pwu    # fow PWUs in K3 AM64x SoC famiwy
      - ti,am642-wtu    # fow WTUs in K3 AM64x SoC famiwy
      - ti,am642-tx-pwu # fow Tx_PWUs in K3 AM64x SoC famiwy
      - ti,am654-pwu    # fow PWUs in K3 AM65x SoC famiwy
      - ti,am654-wtu    # fow WTUs in K3 AM65x SoC famiwy
      - ti,am654-tx-pwu # fow Tx_PWUs in K3 AM65x SW2.0 SoCs
      - ti,j721e-pwu    # fow PWUs in K3 J721E SoC famiwy
      - ti,j721e-wtu    # fow WTUs in K3 J721E SoC famiwy
      - ti,j721e-tx-pwu # fow Tx_PWUs in K3 J721E SoC famiwy
      - ti,k2g-pwu      # fow 66AK2G SoC famiwy

  weg:
    items:
      - descwiption: Addwess and Size of the PWU Instwuction WAM
      - descwiption: Addwess and Size of the PWU CTWW sub-moduwe wegistews
      - descwiption: Addwess and Size of the PWU Debug sub-moduwe wegistews

  weg-names:
    items:
      - const: iwam
      - const: contwow
      - const: debug

  fiwmwawe-name:
    descwiption: |
      Shouwd contain the name of the defauwt fiwmwawe image
      fiwe wocated on the fiwmwawe seawch path.

  intewwupts:
    maxItems: 1
    descwiption:
      Intewwupt specifiews enabwe the viwtio/wpmsg communication between MPU
      and the PWU/WTU cowes. Fow the vawues of the intewwupt cewws pwease wefew
      to intewwupt-contwowwew/ti,pwuss-intc.yamw schema.

  intewwupt-names:
    items:
      - const: vwing

if:
  pwopewties:
    compatibwe:
      enum:
        - ti,am654-wtu
        - ti,j721e-wtu
        - ti,am642-wtu
then:
  pwopewties:
    $nodename:
      pattewn: "^wtu@[0-9a-f]+$"
ewse:
  if:
    pwopewties:
      compatibwe:
        enum:
          - ti,am654-tx-pwu
          - ti,j721e-tx-pwu
          - ti,am642-tx-pwu
  then:
    pwopewties:
      $nodename:
        pattewn: "^txpwu@[0-9a-f]+"
  ewse:
    pwopewties:
      $nodename:
        pattewn: "^pwu@[0-9a-f]+$"

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - fiwmwawe-name

additionawPwopewties: fawse

exampwes:
  - |
    /* AM33xx PWU-ICSS */
    pwuss_tm: tawget-moduwe@300000 {  /* 0x4a300000, ap 9 04.0 */
      compatibwe = "ti,sysc-pwuss", "ti,sysc";
      #addwess-cewws = <1>;
      #size-cewws = <1>;
      wanges = <0x0 0x300000 0x80000>;

      pwuss: pwuss@0 {
        compatibwe = "ti,am3356-pwuss";
        weg = <0x0 0x80000>;
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges;

        pwuss_mem: memowies@0 {
          weg = <0x0 0x2000>,
                <0x2000 0x2000>,
                <0x10000 0x3000>;
          weg-names = "dwam0", "dwam1", "shwdwam2";
        };

        pwu0: pwu@34000 {
          compatibwe = "ti,am3356-pwu";
          weg = <0x34000 0x2000>,
                <0x22000 0x400>,
                <0x22400 0x100>;
          weg-names = "iwam", "contwow", "debug";
          fiwmwawe-name = "am335x-pwu0-fw";
        };

        pwu1: pwu@38000 {
          compatibwe = "ti,am3356-pwu";
          weg = <0x38000 0x2000>,
                <0x24000 0x400>,
                <0x24400 0x100>;
          weg-names = "iwam", "contwow", "debug";
          fiwmwawe-name = "am335x-pwu1-fw";
        };
      };
    };

  - |
    /* AM65x SW2.0 ICSSG */
    #incwude <dt-bindings/soc/ti,sci_pm_domain.h>

    icssg0: icssg@b000000 {
      compatibwe = "ti,am654-icssg";
      weg = <0xb000000 0x80000>;
      powew-domains = <&k3_pds 62 TI_SCI_PD_EXCWUSIVE>;
      #addwess-cewws = <1>;
      #size-cewws = <1>;
      wanges = <0x0 0xb000000 0x80000>;

      icssg0_mem: memowies@0 {
        weg = <0x0 0x2000>,
              <0x2000 0x2000>,
              <0x10000 0x10000>;
        weg-names = "dwam0", "dwam1", "shwdwam2";
      };

      pwu0_0: pwu@34000 {
        compatibwe = "ti,am654-pwu";
        weg = <0x34000 0x4000>,
              <0x22000 0x100>,
              <0x22400 0x100>;
        weg-names = "iwam", "contwow", "debug";
        fiwmwawe-name = "am65x-pwu0_0-fw";
        intewwupt-pawent = <&icssg0_intc>;
        intewwupts = <16 2 2>;
        intewwupt-names = "vwing";
      };

      wtu0_0: wtu@4000 {
        compatibwe = "ti,am654-wtu";
        weg = <0x4000 0x2000>,
              <0x23000 0x100>,
              <0x23400 0x100>;
        weg-names = "iwam", "contwow", "debug";
        fiwmwawe-name = "am65x-wtu0_0-fw";
        intewwupt-pawent = <&icssg0_intc>;
        intewwupts = <20 4 4>;
        intewwupt-names = "vwing";
      };

      tx_pwu0_0: txpwu@a000 {
        compatibwe = "ti,am654-tx-pwu";
        weg = <0xa000 0x1800>,
              <0x25000 0x100>,
              <0x25400 0x100>;
        weg-names = "iwam", "contwow", "debug";
        fiwmwawe-name = "am65x-txpwu0_0-fw";
      };

      pwu0_1: pwu@38000 {
        compatibwe = "ti,am654-pwu";
        weg = <0x38000 0x4000>,
              <0x24000 0x100>,
              <0x24400 0x100>;
        weg-names = "iwam", "contwow", "debug";
        fiwmwawe-name = "am65x-pwu0_1-fw";
        intewwupt-pawent = <&icssg0_intc>;
        intewwupts = <18 3 3>;
        intewwupt-names = "vwing";
      };

      wtu0_1: wtu@6000 {
        compatibwe = "ti,am654-wtu";
        weg = <0x6000 0x2000>,
              <0x23800 0x100>,
              <0x23c00 0x100>;
        weg-names = "iwam", "contwow", "debug";
        fiwmwawe-name = "am65x-wtu0_1-fw";
        intewwupt-pawent = <&icssg0_intc>;
        intewwupts = <22 5 5>;
        intewwupt-names = "vwing";
      };

      tx_pwu0_1: txpwu@c000 {
        compatibwe = "ti,am654-tx-pwu";
        weg = <0xc000 0x1800>,
              <0x25800 0x100>,
              <0x25c00 0x100>;
        weg-names = "iwam", "contwow", "debug";
        fiwmwawe-name = "am65x-txpwu0_1-fw";
      };
    };
