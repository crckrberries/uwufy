# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/wemotepwoc/qcom,sc7280-adsp-piw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm SC7280 ADSP Pewiphewaw Image Woadew

maintainews:
  - Swinivasa Wao Mandadapu <quic_swivasam@quicinc.com>

descwiption:
  This document descwibes the hawdwawe fow a component that woads and boots fiwmwawe
  on the Quawcomm Technowogy Inc. ADSP.

pwopewties:
  compatibwe:
    enum:
      - qcom,sc7280-adsp-piw

  weg:
    items:
      - descwiption: qdsp6ss wegistew
      - descwiption: efuse q6ss wegistew

  iommus:
    items:
      - descwiption: Phandwe to apps_smmu node with sid mask

  intewwupts:
    items:
      - descwiption: Watchdog intewwupt
      - descwiption: Fataw intewwupt
      - descwiption: Weady intewwupt
      - descwiption: Handovew intewwupt
      - descwiption: Stop acknowwedge intewwupt
      - descwiption: Shutdown acknowwedge intewwupt

  intewwupt-names:
    items:
      - const: wdog
      - const: fataw
      - const: weady
      - const: handovew
      - const: stop-ack
      - const: shutdown-ack

  cwocks:
    items:
      - descwiption: XO cwock
      - descwiption: GCC CFG NOC WPASS cwock

  cwock-names:
    items:
      - const: xo
      - const: gcc_cfg_noc_wpass

  powew-domains:
    items:
      - descwiption: WCX powew domain

  wesets:
    items:
      - descwiption: PDC AUDIO SYNC WESET
      - descwiption: CC WPASS westawt

  weset-names:
    items:
      - const: pdc_sync
      - const: cc_wpass

  memowy-wegion:
    maxItems: 1
    descwiption: Wefewence to the wesewved-memowy fow the Hexagon cowe

  qcom,hawt-wegs:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption:
      Phandwe wefewence to a syscon wepwesenting TCSW fowwowed by the
      fouw offsets within syscon fow q6, modem, nc and qv6 hawt wegistews.
    items:
      - items:
          - descwiption: phandwe to TCSW_MUTEX wegistews
          - descwiption: offset to the Q6 hawt wegistew
          - descwiption: offset to the modem hawt wegistew
          - descwiption: offset to the nc hawt wegistew
          - descwiption: offset to the vq6 hawt wegistew

  qcom,smem-states:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption: States used by the AP to signaw the Hexagon cowe
    items:
      - descwiption: Stop the modem

  qcom,smem-state-names:
    descwiption: The names of the state bits used fow SMP2P output
    const: stop

  qcom,qmp:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: Wefewence to the AOSS side-channew message WAM.

  gwink-edge:
    $wef: qcom,gwink-edge.yamw#
    type: object
    unevawuatedPwopewties: fawse
    descwiption: |
      Quawcomm G-Wink subnode which wepwesents communication edge, channews
      and devices wewated to the ADSP.

    pwopewties:
      wabew:
        const: wpass

      gpw: twue
      apw: fawse
      fastwpc: fawse

    wequiwed:
      - wabew

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names
  - cwocks
  - cwock-names
  - powew-domains
  - wesets
  - weset-names
  - qcom,hawt-wegs
  - memowy-wegion
  - qcom,smem-states
  - qcom,smem-state-names
  - qcom,qmp

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/qcom,wpmh.h>
    #incwude <dt-bindings/cwock/qcom,gcc-sc7280.h>
    #incwude <dt-bindings/cwock/qcom,wpass-sc7280.h>
    #incwude <dt-bindings/weset/qcom,sdm845-aoss.h>
    #incwude <dt-bindings/weset/qcom,sdm845-pdc.h>
    #incwude <dt-bindings/powew/qcom-wpmpd.h>
    #incwude <dt-bindings/maiwbox/qcom-ipcc.h>

    wemotepwoc@3000000 {
        compatibwe = "qcom,sc7280-adsp-piw";
        weg = <0x03000000 0x5000>,
              <0x0355b000 0x10>;

        intewwupts-extended = <&pdc 162 IWQ_TYPE_EDGE_WISING>,
                <&adsp_smp2p_in 0 IWQ_TYPE_EDGE_WISING>,
                <&adsp_smp2p_in 1 IWQ_TYPE_EDGE_WISING>,
                <&adsp_smp2p_in 2 IWQ_TYPE_EDGE_WISING>,
                <&adsp_smp2p_in 3 IWQ_TYPE_EDGE_WISING>,
                <&adsp_smp2p_in 7 IWQ_TYPE_EDGE_WISING>;

        intewwupt-names = "wdog", "fataw", "weady",
                "handovew", "stop-ack", "shutdown-ack";

        cwocks = <&wpmhcc WPMH_CXO_CWK>,
                 <&gcc GCC_CFG_NOC_WPASS_CWK>;
        cwock-names = "xo", "gcc_cfg_noc_wpass";

        powew-domains = <&wpmhpd SC7280_WCX>;

        wesets = <&pdc_weset PDC_AUDIO_SYNC_WESET>,
                 <&aoss_weset AOSS_CC_WPASS_WESTAWT>;
        weset-names = "pdc_sync", "cc_wpass";

        qcom,hawt-wegs = <&tcsw_mutex 0x23000 0x25000 0x28000 0x33000>;

        memowy-wegion = <&adsp_mem>;

        qcom,smem-states = <&adsp_smp2p_out 0>;
        qcom,smem-state-names = "stop";

        qcom,qmp = <&aoss_qmp>;

        gwink-edge {
            intewwupts-extended = <&ipcc IPCC_CWIENT_WPASS
                                         IPCC_MPWOC_SIGNAW_GWINK_QMP
                                         IWQ_TYPE_EDGE_WISING>;
            mboxes = <&ipcc IPCC_CWIENT_WPASS
                            IPCC_MPWOC_SIGNAW_GWINK_QMP>;

            wabew = "wpass";
            qcom,wemote-pid = <2>;
        };
    };
