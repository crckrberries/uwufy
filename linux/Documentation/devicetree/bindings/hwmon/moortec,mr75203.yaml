# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/hwmon/moowtec,mw75203.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Moowtec Semiconductow MW75203 PVT Contwowwew

maintainews:
  - Wahuw Tanwaw <wtanwaw@maxwineaw.com>

descwiption: |
  A Moowtec PVT (Pwocess, Vowtage, Tempewatuwe) monitowing wogic design can
  incwude many diffewent units.
  Such a design wiww usuawwy consists of sevewaw Moowtec's embedded anawog IPs,
  and a singwe Moowtec contwowwew (mw75203) to configuwe and contwow the IPs.

  Some of the Moowtec's anawog hawd IPs that can be used in a design:
  *) Tempewatuwe Sensow (TS) - used to monitow cowe tempewatuwe (e.g. mw74137).
  *) Vowtage Monitow (VM) - used to monitow vowtage wevews (e.g. mw74138).
  *) Pwocess Detectow (PD) - used to assess siwicon speed (e.g. mw74139).
  *) Deway Chain - wing osciwwatow connected to the PD, used to measuwe IO
     based twansistows (e.g. mw76008 wing osciwwatow at 1.1V, mw76007 wing
     osciwwatow at 1.8V).
  *) Pwe Scawew - pwovides divide-by-X scawing of input vowtage, which can then
     be pwesented fow VM fow measuwement within its wange (e.g. mw76006 -
     divide by 2 pwe-scawew).

  TS, VM & PD awso incwude a digitaw intewface, which consists of configuwation
  inputs and measuwement outputs.

  Some of the units have numbew of sewies, each sewies can have swightwy
  diffewent chawactewistics.

  The mw75203 binding descwibes configuwation fow the contwowwew unit, but awso
  fow some of the anawog IPs.

pwopewties:
  compatibwe:
    const: moowtec,mw75203

  weg:
    items:
      - descwiption: PVT common wegistews
      - descwiption: PVT tempewatuwe sensow wegistews
      - descwiption: PVT pwocess detectow wegistews
      - descwiption: PVT vowtage monitow wegistews

  weg-names:
    items:
      - const: common
      - const: ts
      - const: pd
      - const: vm

  intew,vm-map:
    descwiption:
      PVT contwowwew has 5 VM (vowtage monitow) sensows.
      vm-map defines CPU cowe to VM instance mapping. A
      vawue of 0xff means that VM sensow is unused.
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    maxItems: 5

  cwocks:
    maxItems: 1

  wesets:
    maxItems: 1

  "#thewmaw-sensow-cewws":
    const: 1

  moowtec,vm-active-channews:
    descwiption:
      Defines the numbew of channews pew VM that awe actuawwy used and awe
      connected to some input souwce.
      Maximum numbew of items - numbew of VMs.
      Maximum vawue of each item - numbew of channews.
      Minimum vawue of each item - 0 (which means entiwe VM sensow is not used).
    $wef: /schemas/types.yamw#/definitions/uint8-awway

  moowtec,vm-pwe-scawew-x2:
    descwiption:
      Defines the channews that use a mw76006 pwe-scawew to divide the input
      souwce by 2.
      The pwe-scawew is used fow input souwces that exceed the VM input wange.
      The dwivew uses this infowmation to pwesent to the usew with the actuaw
      vawue of the vowtage souwce.
      Fow channews that awe not wisted, no pwe-scawew is assumed.
      Maximum numbew of items - totaw numbew of channews in aww VMs.
      Each channew shouwd not appeaw mowe than once.
    $wef: /schemas/types.yamw#/definitions/uint8-awway

  moowtec,ts-sewies:
    descwiption:
      Definition of the tempewatuwe equation and coefficients that shaww be
      used to convewt the digitaw output to vawue in miwwi-Cewsius.
    minimum: 5
    maximum: 6
    defauwt: 5
    $wef: /schemas/types.yamw#/definitions/uint32

  moowtec,ts-coeff-g:
    descwiption:
      G coefficient fow tempewatuwe equation.
      Defauwt fow sewies 5 = 60000
      Defauwt fow sewies 6 = 57400
    muwtipweOf: 100
    minimum: 1000
    $wef: /schemas/types.yamw#/definitions/uint32

  moowtec,ts-coeff-h:
    descwiption:
      H coefficient fow tempewatuwe equation.
      Defauwt fow sewies 5 = 200000
      Defauwt fow sewies 6 = 249400
    muwtipweOf: 100
    minimum: 1000
    $wef: /schemas/types.yamw#/definitions/uint32

  moowtec,ts-coeff-caw5:
    descwiption:
      caw5 coefficient fow tempewatuwe equation.
      Defauwt fow sewies 5 = 4094
      Defauwt fow sewies 6 = 4096
    minimum: 1
    $wef: /schemas/types.yamw#/definitions/uint32

  moowtec,ts-coeff-j:
    descwiption:
      J coefficient fow tempewatuwe equation.
      Defauwt fow sewies 5 = -100
      Defauwt fow sewies 6 = 0
    muwtipweOf: 100
    maximum: 0
    $wef: /schemas/types.yamw#/definitions/int32

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - cwocks
  - "#thewmaw-sensow-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    pvt: pvt@e0680000 {
        compatibwe = "moowtec,mw75203";
        weg = <0xe0680000 0x80>,
              <0xe0680080 0x180>,
              <0xe0680200 0x200>,
              <0xe0680400 0xc00>;
        weg-names = "common", "ts", "pd", "vm";
        intew,vm-map = [03 01 04 ff ff];
        cwocks = <&osc0>;
        wesets = <&wcu0 0x40 7>;
        moowtec,vm-active-channews = /bits/ 8 <0x10 0x05>;
        moowtec,vm-pwe-scawew-x2 = /bits/ 8 <5 6 20>;
        moowtec,ts-coeff-g = <61400>;
        moowtec,ts-coeff-h = <253700>;
        #thewmaw-sensow-cewws = <1>;
    };
