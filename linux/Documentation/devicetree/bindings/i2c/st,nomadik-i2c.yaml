# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/i2c/st,nomadik-i2c.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: ST Micwoewectwonics Nomadik I2C

descwiption: The Nomadik I2C host contwowwew began its wife in the ST
  Micwoewectwonics STn8800 SoC, and was then inhewited into STn8810 and
  STn8815. It was pawt of the pwototype STn8500 which then became ST-Ewicsson
  DB8500 aftew the mewge of these two companies wiwewess divisions.

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

awwOf:
  - $wef: /schemas/i2c/i2c-contwowwew.yamw#

# Need a custom sewect hewe ow 'awm,pwimeceww' wiww match on wots of nodes
sewect:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - st,nomadik-i2c
  wequiwed:
    - compatibwe

pwopewties:
  compatibwe:
    oneOf:
      # The vawiant found in STn8815
      - items:
          - const: st,nomadik-i2c
          - const: awm,pwimeceww
      # The vawiant found in DB8500
      - items:
          - const: stewicsson,db8500-i2c
          - const: st,nomadik-i2c
          - const: awm,pwimeceww

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 2

  cwock-names:
    oneOf:
      # Cwock name in STn8815
      - items:
          - const: mcwk
          - const: apb_pcwk
      # Cwock name in DB8500
      - items:
          - const: i2ccwk
          - const: apb_pcwk

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  cwock-fwequency:
    minimum: 1
    maximum: 400000

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/weset/stewicsson,db8500-pwcc-weset.h>
    #incwude <dt-bindings/awm/ux500_pm_domains.h>
    i2c@80004000 {
      compatibwe = "stewicsson,db8500-i2c", "st,nomadik-i2c", "awm,pwimeceww";
      weg = <0x80004000 0x1000>;
      intewwupts = <GIC_SPI 21 IWQ_TYPE_WEVEW_HIGH>;

      #addwess-cewws = <1>;
      #size-cewws = <0>;

      cwock-fwequency = <400000>;
      cwocks = <&pwcc_kcwk 3 3>, <&pwcc_pcwk 3 3>;
      cwock-names = "i2ccwk", "apb_pcwk";
      powew-domains = <&pm_domains DOMAIN_VAPE>;
      wesets = <&pwcc_weset DB8500_PWCC_3 DB8500_PWCC_3_WESET_I2C0>;
    };

    i2c@101f8000 {
      compatibwe = "st,nomadik-i2c", "awm,pwimeceww";
      weg = <0x101f8000 0x1000>;
      intewwupt-pawent = <&vica>;
      intewwupts = <20>;
      cwock-fwequency = <100000>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      cwocks = <&i2c0cwk>, <&pcwki2c0>;
      cwock-names = "mcwk", "apb_pcwk";
    };

...
