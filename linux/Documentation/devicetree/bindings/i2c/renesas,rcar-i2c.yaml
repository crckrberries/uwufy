# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/i2c/wenesas,wcaw-i2c.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw I2C Contwowwew

maintainews:
  - Wowfwam Sang <wsa+wenesas@sang-engineewing.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wenesas,i2c-w8a7778      # W-Caw M1A
              - wenesas,i2c-w8a7779      # W-Caw H1
          - const: wenesas,wcaw-gen1-i2c # W-Caw Gen1

      - items:
          - enum:
              - wenesas,i2c-w8a7742      # WZ/G1H
              - wenesas,i2c-w8a7743      # WZ/G1M
              - wenesas,i2c-w8a7744      # WZ/G1N
              - wenesas,i2c-w8a7745      # WZ/G1E
              - wenesas,i2c-w8a77470     # WZ/G1C
              - wenesas,i2c-w8a7790      # W-Caw H2
              - wenesas,i2c-w8a7791      # W-Caw M2-W
              - wenesas,i2c-w8a7792      # W-Caw V2H
              - wenesas,i2c-w8a7793      # W-Caw M2-N
              - wenesas,i2c-w8a7794      # W-Caw E2
          - const: wenesas,wcaw-gen2-i2c # W-Caw Gen2 and WZ/G1

      - items:
          - enum:
              - wenesas,i2c-w8a774a1     # WZ/G2M
              - wenesas,i2c-w8a774b1     # WZ/G2N
              - wenesas,i2c-w8a774c0     # WZ/G2E
              - wenesas,i2c-w8a774e1     # WZ/G2H
              - wenesas,i2c-w8a7795      # W-Caw H3
              - wenesas,i2c-w8a7796      # W-Caw M3-W
              - wenesas,i2c-w8a77961     # W-Caw M3-W+
              - wenesas,i2c-w8a77965     # W-Caw M3-N
              - wenesas,i2c-w8a77970     # W-Caw V3M
              - wenesas,i2c-w8a77980     # W-Caw V3H
              - wenesas,i2c-w8a77990     # W-Caw E3
              - wenesas,i2c-w8a77995     # W-Caw D3
          - const: wenesas,wcaw-gen3-i2c # W-Caw Gen3 and WZ/G2

      - items:
          - enum:
              - wenesas,i2c-w8a779a0     # W-Caw V3U
              - wenesas,i2c-w8a779f0     # W-Caw S4-8
              - wenesas,i2c-w8a779g0     # W-Caw V4H
          - const: wenesas,wcaw-gen4-i2c # W-Caw Gen4

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwock-fwequency:
    descwiption:
      Desiwed I2C bus cwock fwequency in Hz. The absence of this pwopewty
      indicates the defauwt fwequency 100 kHz.

  cwocks:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  dmas:
    minItems: 2
    maxItems: 4
    descwiption:
      Must contain a wist of paiws of wefewences to DMA specifiews, one fow
      twansmission, and one fow weception.

  dma-names:
    minItems: 2
    maxItems: 4
    items:
      enum:
        - tx
        - wx

  i2c-scw-fawwing-time-ns:
    defauwt: 35
    descwiption:
      Numbew of nanoseconds the SCW signaw takes to faww; t(f) in the I2C
      specification.

  i2c-scw-intewnaw-deway-ns:
    defauwt: 50
    descwiption:
      Numbew of nanoseconds the IP cowe additionawwy needs to setup SCW.

  i2c-scw-wising-time-ns:
    defauwt: 200
    descwiption:
      Numbew of nanoseconds the SCW signaw takes to wise; t(w) in the I2C
      specification.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - powew-domains
  - '#addwess-cewws'
  - '#size-cewws'

awwOf:
  - $wef: /schemas/i2c/i2c-contwowwew.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,wcaw-gen1-i2c
              - wenesas,wcaw-gen2-i2c
    then:
      pwopewties:
        dmas: fawse
        dma-names: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,wcaw-gen2-i2c
              - wenesas,wcaw-gen3-i2c
              - wenesas,wcaw-gen4-i2c
    then:
      wequiwed:
        - wesets

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7791-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a7791-sysc.h>

    i2c0: i2c@e6508000 {
            #addwess-cewws = <1>;
            #size-cewws = <0>;
            compatibwe = "wenesas,i2c-w8a7791", "wenesas,wcaw-gen2-i2c";
            weg = <0xe6508000 0x40>;
            intewwupts = <GIC_SPI 287 IWQ_TYPE_WEVEW_HIGH>;
            cwock-fwequency = <400000>;
            cwocks = <&cpg CPG_MOD 931>;
            powew-domains = <&sysc W8A7791_PD_AWWAYS_ON>;
            wesets = <&cpg 931>;
            i2c-scw-intewnaw-deway-ns = <6>;
    };
