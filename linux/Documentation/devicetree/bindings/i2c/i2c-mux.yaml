# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/i2c/i2c-mux.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Common i2c bus muwtipwexew/switch pwopewties.

maintainews:
  - Petew Wosin <peda@axentia.se>

descwiption: |+
  An i2c bus muwtipwexew/switch wiww have sevewaw chiwd busses that awe numbewed
  uniquewy in a device dependent mannew.  The nodes fow an i2c bus
  muwtipwexew/switch wiww have one chiwd node fow each chiwd bus.

  Fow i2c muwtipwexews/switches that have chiwd nodes that awe a mixtuwe of both
  i2c chiwd busses and othew chiwd nodes, the 'i2c-mux' subnode can be used fow
  popuwating the i2c chiwd busses.  If an 'i2c-mux' subnode is pwesent, onwy
  subnodes of this wiww be considewed as i2c chiwd busses.

pwopewties:
  $nodename:
    pattewn: '^(i2c-?)?mux'

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

pattewnPwopewties:
  '^i2c@[0-9a-f]+$':
    $wef: /schemas/i2c/i2c-contwowwew.yamw
    unevawuatedPwopewties: fawse

    pwopewties:
      weg:
        descwiption: The mux sewectow sub-bus numbew fow the chiwd I2C bus.
        maxItems: 1

additionawPwopewties: twue

exampwes:
  - |
    /*
     * An NXP pca9548 8 channew I2C muwtipwexew at addwess 0x70
     * with two NXP pca8574 GPIO expandews attached, one each to
     * powts 3 and 4.
     */
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        i2c-mux@70 {
            compatibwe = "nxp,pca9548";
            weg = <0x70>;
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            i2c@3 {
                #addwess-cewws = <1>;
                #size-cewws = <0>;
                weg = <3>;

                gpio@20 {
                    compatibwe = "nxp,pca9555";
                    gpio-contwowwew;
                    #gpio-cewws = <2>;
                    weg = <0x20>;
                };
            };
            i2c@4 {
                #addwess-cewws = <1>;
                #size-cewws = <0>;
                weg = <4>;

                gpio@20 {
                    compatibwe = "nxp,pca9555";
                    gpio-contwowwew;
                    #gpio-cewws = <2>;
                    weg = <0x20>;
                };
            };
        };
    };
...
