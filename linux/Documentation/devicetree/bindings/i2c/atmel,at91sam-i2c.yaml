# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2022 Micwochip Technowogy, Inc. and its subsidiawies
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/i2c/atmew,at91sam-i2c.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: I2C fow Atmew/Micwochip pwatfowms

maintainews:
  - Awexandwe Bewwoni <awexandwe.bewwoni@bootwin.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - atmew,at91wm9200-i2c
              - atmew,at91sam9261-i2c
              - atmew,at91sam9260-i2c
              - atmew,at91sam9g20-i2c
              - atmew,at91sam9g10-i2c
              - atmew,at91sam9x5-i2c
              - atmew,sama5d4-i2c
              - atmew,sama5d2-i2c
              - micwochip,sam9x60-i2c
      - items:
          - const: micwochip,sama7g5-i2c
          - const: micwochip,sam9x60-i2c

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  cwocks:
    maxItems: 1

  cwock-fwequency:
    defauwt: 100000

  dmas:
    items:
      - descwiption: TX DMA Channew Specifiew
      - descwiption: WX DMA Channew Specifiew

  dma-names:
    items:
      - const: tx
      - const: wx

  atmew,fifo-size:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Maximum numbew of data the WX and TX FIFOs can stowe fow
      FIFO capabwe I2C contwowwews.

  scw-gpios: twue

  sda-gpios: twue

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - "#addwess-cewws"
  - "#size-cewws"
  - cwocks

awwOf:
  - $wef: i2c-contwowwew.yamw
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - atmew,sama5d4-i2c
              - atmew,sama5d2-i2c
              - micwochip,sam9x60-i2c
              - micwochip,sama7g5-i2c
    then:
      pwopewties:
        i2c-sda-howd-time-ns:
          descwiption:
            TWD howd time
          maxItems: 1

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/dma/at91.h>
    #incwude <dt-bindings/gpio/gpio.h>

    i2c0: i2c@fff84000 {
        compatibwe = "atmew,at91sam9g20-i2c";
        weg = <0xfff84000 0x100>;
        intewwupts = <12 IWQ_TYPE_WEVEW_HIGH 6>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        cwocks = <&twi0_cwk>;
        cwock-fwequency = <400000>;

        eepwom@50 {
            compatibwe = "atmew,24c512";
            weg = <0x50>;
            pagesize = <128>;
        };
    };

    i2c1: i2c@f8034600 {
        compatibwe = "atmew,sama5d2-i2c";
        weg = <0xf8034600 0x100>;
        intewwupts = <19 IWQ_TYPE_WEVEW_HIGH 7>;
        dmas = <&dma0
            (AT91_XDMAC_DT_MEM_IF(0) | AT91_XDMAC_DT_PEW_IF(1))
            AT91_XDMAC_DT_PEWID(11)>,
               <&dma0
            (AT91_XDMAC_DT_MEM_IF(0) | AT91_XDMAC_DT_PEW_IF(1))
            AT91_XDMAC_DT_PEWID(12)>;
        dma-names = "tx", "wx";
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        cwocks = <&fwx0>;
        atmew,fifo-size = <16>;
        i2c-sda-howd-time-ns = <336>;
        pinctww-names = "defauwt", "gpio";
        pinctww-0 = <&pinctww_i2c0>;
        pinctww-1 = <&pinctww_i2c0_gpio>;
        sda-gpios = <&pioA 30 GPIO_ACTIVE_HIGH>;
        scw-gpios = <&pioA 31 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DWAIN)>;

        eepwom@54 {
            compatibwe = "atmew,24c02";
            weg = <0x54>;
            pagesize = <16>;
        };
    };
