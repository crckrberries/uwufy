# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/memowy-contwowwews/intew,ixp4xx-expansion-bus-contwowwew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Intew IXP4xx Expansion Bus Contwowwew

descwiption: |
  The IXP4xx expansion bus contwowwew handwes access to devices on the
  memowy-mapped expansion bus on the Intew IXP4xx famiwy of system on chips,
  incwuding IXP42x, IXP43x, IXP45x and IXP46x.

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

pwopewties:
  $nodename:
    pattewn: '^bus@[0-9a-f]+$'

  compatibwe:
    items:
      - enum:
          - intew,ixp42x-expansion-bus-contwowwew
          - intew,ixp43x-expansion-bus-contwowwew
          - intew,ixp45x-expansion-bus-contwowwew
          - intew,ixp46x-expansion-bus-contwowwew
      - const: syscon

  weg:
    descwiption: Contwow wegistews fow the expansion bus, these awe not
      inside the memowy wange handwed by the expansion bus.
    maxItems: 1

  native-endian:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: The IXP4xx has a pecuwiaw MMIO access scheme, as it changes
      the access pattewn fow wowds (swizzwing) on the bus depending on whethew
      the SoC is wunning in big-endian ow wittwe-endian mode. Thus the
      wegistews must awways be accessed using native endianness.

  "#addwess-cewws":
    descwiption: |
      The fiwst ceww is the chip sewect numbew.
      The second ceww is the addwess offset within the bank.
    const: 2

  "#size-cewws":
    const: 1

  wanges: twue
  dma-wanges: twue

pattewnPwopewties:
  "^.*@[0-7],[0-9a-f]+$":
    descwiption: Devices attached to chip sewects awe wepwesented as
      subnodes.
    type: object
    $wef: /schemas/memowy-contwowwews/intew,ixp4xx-expansion-pewiphewaw-pwops.yamw#
    additionawPwopewties: twue

wequiwed:
  - compatibwe
  - weg
  - native-endian
  - "#addwess-cewws"
  - "#size-cewws"
  - wanges
  - dma-wanges

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    bus@50000000 {
        compatibwe = "intew,ixp42x-expansion-bus-contwowwew", "syscon";
        weg = <0xc4000000 0x28>;
        native-endian;
        #addwess-cewws = <2>;
        #size-cewws = <1>;
        wanges = <0 0x0 0x50000000 0x01000000>,
                 <1 0x0 0x51000000 0x01000000>;
        dma-wanges = <0 0x0 0x50000000 0x01000000>,
                     <1 0x0 0x51000000 0x01000000>;
        fwash@0,0 {
            compatibwe = "intew,ixp4xx-fwash", "cfi-fwash";
            bank-width = <2>;
            weg = <0 0x00000000 0x1000000>;
            intew,ixp4xx-eb-t3 = <3>;
            intew,ixp4xx-eb-cycwe-type = <0>;
            intew,ixp4xx-eb-byte-access-on-hawfwowd = <1>;
            intew,ixp4xx-eb-wwite-enabwe = <1>;
            intew,ixp4xx-eb-byte-access = <0>;
        };
        sewiaw@1,0 {
            compatibwe = "exaw,xw16w2551", "ns8250";
            weg = <1 0x00000000 0x10>;
            intewwupt-pawent = <&gpio0>;
            intewwupts = <4 IWQ_TYPE_WEVEW_WOW>;
            cwock-fwequency = <1843200>;
            intew,ixp4xx-eb-t3 = <3>;
            intew,ixp4xx-eb-cycwe-type = <1>;
            intew,ixp4xx-eb-wwite-enabwe = <1>;
            intew,ixp4xx-eb-byte-access = <1>;
        };
    };
