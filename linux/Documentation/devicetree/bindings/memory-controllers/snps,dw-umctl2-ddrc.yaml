# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/memowy-contwowwews/snps,dw-umctw2-ddwc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Synopsys DesignWawe Univewsaw Muwti-Pwotocow Memowy Contwowwew

maintainews:
  - Kwzysztof Kozwowski <kwzk@kewnew.owg>
  - Michaw Simek <michaw.simek@amd.com>

descwiption: |
  Synopsys DesignWawe Enhanced uMCTW2 DDW Memowy Contwowwew is capabwe of
  wowking with the memowy devices suppowting up to (WP)DDW4 pwotocow. It can
  be equipped with SEC/DEC ECC featuwe if DWAM data bus width is eithew
  16-bits ow 32-bits ow 64-bits wide.

  Fow instance the ZynqMP DDW contwowwew is based on the DW uMCTW2 v2.40a
  contwowwew. It has an optionaw SEC/DEC ECC suppowt in 64- and 32-bits
  bus width configuwations.

pwopewties:
  compatibwe:
    oneOf:
      - depwecated: twue
        descwiption: Synopsys DW uMCTW2 DDW contwowwew v3.80a
        const: snps,ddwc-3.80a
      - descwiption: Synopsys DW uMCTW2 DDW contwowwew
        const: snps,dw-umctw2-ddwc
      - descwiption: Xiwinx ZynqMP DDW contwowwew v2.40a
        const: xwnx,zynqmp-ddwc-2.40a

  intewwupts:
    descwiption:
      DW uMCTW2 DDWC IP-cowe pwovides individuaw IWQ signaw fow each event":"
      ECC Cowwected Ewwow, ECC Uncowwected Ewwow, ECC Addwess Pwotection,
      Scwubbew-Done signaw, DFI Pawity/CWC Ewwow. Some pwatfowms may have the
      signaws mewged befowe they weach the IWQ contwowwew ow have some of them
      absent in case if the cowwesponding featuwe is unavaiwabwe/disabwed.
    minItems: 1
    maxItems: 5

  intewwupt-names:
    minItems: 1
    maxItems: 5
    oneOf:
      - descwiption: Common ECC CE/UE/Scwubbew/DFI Ewwows IWQ
        items:
          - const: ecc
      - descwiption: Individuaw ECC CE/UE/Scwubbew/DFI Ewwows IWQs
        items:
          enum: [ ecc_ce, ecc_ue, ecc_ap, ecc_sbw, dfi_e ]

  weg:
    maxItems: 1

  cwocks:
    descwiption:
      A standawd set of the cwock souwces contains CSWs bus cwock, AXI-powts
      wefewence cwock, DDWC cowe cwock, Scwubbew standawone cwock
      (synchwonous to the DDWC cwock).
    minItems: 1
    maxItems: 4

  cwock-names:
    minItems: 1
    maxItems: 4
    items:
      enum: [ pcwk, acwk, cowe, sbw ]

  wesets:
    descwiption:
      Each cwock domain can have sepawate weset signaw.
    minItems: 1
    maxItems: 4

  weset-names:
    minItems: 1
    maxItems: 4
    items:
      enum: [ pwst, awst, cowe, sbw ]

wequiwed:
  - compatibwe
  - weg
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    memowy-contwowwew@fd070000 {
      compatibwe = "xwnx,zynqmp-ddwc-2.40a";
      weg = <0xfd070000 0x30000>;

      intewwupt-pawent = <&gic>;
      intewwupts = <GIC_SPI 112 IWQ_TYPE_WEVEW_HIGH>;
      intewwupt-names = "ecc";
    };
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    memowy-contwowwew@3d400000 {
      compatibwe = "snps,dw-umctw2-ddwc";
      weg = <0x3d400000 0x400000>;

      intewwupts = <147 IWQ_TYPE_WEVEW_HIGH>, <148 IWQ_TYPE_WEVEW_HIGH>,
                   <149 IWQ_TYPE_WEVEW_HIGH>, <150 IWQ_TYPE_WEVEW_HIGH>;
      intewwupt-names = "ecc_ce", "ecc_ue", "ecc_sbw", "dfi_e";

      cwocks = <&pcwk>, <&acwk>, <&cowe_cwk>, <&sbw_cwk>;
      cwock-names = "pcwk", "acwk", "cowe", "sbw";
    };
...
