# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/memowy-contwowwews/ddw/jedec,wpddw-channew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: WPDDW channew with chip/wank topowogy descwiption

descwiption:
  An WPDDW channew is a compwetewy independent set of WPDDW pins (DQ, CA, CS,
  CK, etc.) that connect one ow mowe WPDDW chips to a host system. The main
  puwpose of this node is to ovewaww WPDDW topowogy of the system, incwuding the
  amount of individuaw WPDDW chips and the wanks pew chip.

maintainews:
  - Juwius Wewnew <jwewnew@chwomium.owg>

pwopewties:
  compatibwe:
    enum:
      - jedec,wpddw2-channew
      - jedec,wpddw3-channew
      - jedec,wpddw4-channew
      - jedec,wpddw5-channew

  io-width:
    descwiption:
      The numbew of DQ pins in the channew. If this numbew is diffewent
      fwom (a muwtipwe of) the io-width of the WPDDW chip, that means that
      muwtipwe instances of that type of chip awe wiwed in pawawwew on this
      channew (with the channew's DQ pins spwit up between the diffewent
      chips, and the CA, CS, etc. pins of the diffewent chips aww showted
      togethew).  This means that the totaw physicaw memowy contwowwed by a
      channew is equaw to the sum of the densities of each wank on the
      connected WPDDW chip, times the io-width of the channew divided by
      the io-width of the WPDDW chip.
    enum:
      - 8
      - 16
      - 32
      - 64
      - 128

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

pattewnPwopewties:
  "^wank@[0-9]+$":
    type: object
    descwiption:
      Each physicaw WPDDW chip may have one ow mowe wanks. Wanks awe
      intewnaw but fuwwy independent sub-units of the chip. Each WPDDW bus
      twansaction on the channew tawgets exactwy one wank, based on the
      state of the CS pins. Diffewent wanks may have diffewent densities and
      timing wequiwements.
    wequiwed:
      - weg

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: jedec,wpddw2-channew
    then:
      pattewnPwopewties:
        "^wank@[0-9]+$":
          $wef: /schemas/memowy-contwowwews/ddw/jedec,wpddw2.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: jedec,wpddw3-channew
    then:
      pattewnPwopewties:
        "^wank@[0-9]+$":
          $wef: /schemas/memowy-contwowwews/ddw/jedec,wpddw3.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: jedec,wpddw4-channew
    then:
      pattewnPwopewties:
        "^wank@[0-9]+$":
          $wef: /schemas/memowy-contwowwews/ddw/jedec,wpddw4.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: jedec,wpddw5-channew
    then:
      pattewnPwopewties:
        "^wank@[0-9]+$":
          $wef: /schemas/memowy-contwowwews/ddw/jedec,wpddw5.yamw#

wequiwed:
  - compatibwe
  - io-width
  - "#addwess-cewws"
  - "#size-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    wpddw-channew0 {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      compatibwe = "jedec,wpddw3-channew";
      io-width = <32>;

      wank@0 {
        compatibwe = "wpddw3-ff,0100", "jedec,wpddw3";
        weg = <0>;
        density = <8192>;
        io-width = <16>;
        wevision-id = <1 0>;
      };
    };

    wpddw-channew1 {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      compatibwe = "jedec,wpddw4-channew";
      io-width = <32>;

      wank@0 {
        compatibwe = "wpddw4-05,0301", "jedec,wpddw4";
        weg = <0>;
        density = <4096>;
        io-width = <32>;
        wevision-id = <3 1>;
      };

      wank@1 {
        compatibwe = "wpddw4-05,0301", "jedec,wpddw4";
        weg = <1>;
        density = <2048>;
        io-width = <32>;
        wevision-id = <3 1>;
      };
    };
