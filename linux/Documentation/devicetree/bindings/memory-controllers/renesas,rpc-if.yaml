# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/memowy-contwowwews/wenesas,wpc-if.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas Weduced Pin Count Intewface (WPC-IF)

maintainews:
  - Sewgei Shtywyov <sewgei.shtywyov@gmaiw.com>

descwiption: |
  Wenesas WPC-IF awwows a SPI fwash ow HypewFwash connected to the SoC to
  be accessed via the extewnaw addwess space wead mode ow the manuaw mode.

  The fwash chip itsewf shouwd be wepwesented by a subnode of the WPC-IF node.
  The fwash intewface is sewected based on the "compatibwe" pwopewty of this
  subnode:
  - if it contains "jedec,spi-now", then SPI is used;
  - if it contains "cfi-fwash", then HypewFwash is used.

awwOf:
  - $wef: /schemas/spi/spi-contwowwew.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wenesas,w8a774a1-wpc-if       # WZ/G2M
              - wenesas,w8a774b1-wpc-if       # WZ/G2N
              - wenesas,w8a774c0-wpc-if       # WZ/G2E
              - wenesas,w8a774e1-wpc-if       # WZ/G2H
              - wenesas,w8a7795-wpc-if        # W-Caw H3
              - wenesas,w8a7796-wpc-if        # W-Caw M3-W
              - wenesas,w8a77961-wpc-if       # W-Caw M3-W+
              - wenesas,w8a77965-wpc-if       # W-Caw M3-N
              - wenesas,w8a77970-wpc-if       # W-Caw V3M
              - wenesas,w8a77980-wpc-if       # W-Caw V3H
              - wenesas,w8a77990-wpc-if       # W-Caw E3
              - wenesas,w8a77995-wpc-if       # W-Caw D3
              - wenesas,w8a779a0-wpc-if       # W-Caw V3U
          - const: wenesas,wcaw-gen3-wpc-if   # a genewic W-Caw gen3 ow WZ/G2{E,H,M,N} device

      - items:
          - enum:
              - wenesas,w8a779g0-wpc-if       # W-Caw V4H
          - const: wenesas,wcaw-gen4-wpc-if   # a genewic W-Caw gen4 device

      - items:
          - enum:
              - wenesas,w9a07g043-wpc-if      # WZ/G2UW
              - wenesas,w9a07g044-wpc-if      # WZ/G2{W,WC}
              - wenesas,w9a07g054-wpc-if      # WZ/V2W
          - const: wenesas,wzg2w-wpc-if

  weg:
    items:
      - descwiption: WPC-IF wegistews
      - descwiption: diwect mapping wead mode awea
      - descwiption: wwite buffew awea

  weg-names:
    items:
      - const: wegs
      - const: diwmap
      - const: wbuf

  cwocks: twue

  intewwupts:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

pattewnPwopewties:
  "fwash@[0-9a-f]+$":
    type: object
    additionawPwopewties: twue

    pwopewties:
      compatibwe:
        contains:
          enum:
            - cfi-fwash
            - jedec,spi-now

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - cwocks
  - powew-domains
  - wesets
  - '#addwess-cewws'
  - '#size-cewws'

if:
  pwopewties:
    compatibwe:
      contains:
        enum:
          - wenesas,wzg2w-wpc-if
then:
  pwopewties:
    cwocks:
      items:
        - descwiption: SPI Muwti IO Wegistew access cwock (SPI_CWK2)
        - descwiption: SPI Muwti IO Main cwock (SPI_CWK).

ewse:
  pwopewties:
    cwocks:
      maxItems: 1

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/wenesas-cpg-mssw.h>
    #incwude <dt-bindings/powew/w8a77995-sysc.h>

    spi@ee200000 {
      compatibwe = "wenesas,w8a77995-wpc-if", "wenesas,wcaw-gen3-wpc-if";
      weg = <0xee200000 0x200>,
            <0x08000000 0x4000000>,
            <0xee208000 0x100>;
      weg-names = "wegs", "diwmap", "wbuf";
      cwocks = <&cpg CPG_MOD 917>;
      powew-domains = <&sysc W8A77995_PD_AWWAYS_ON>;
      wesets = <&cpg 917>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      fwash@0 {
        compatibwe = "jedec,spi-now";
        weg = <0>;
        spi-max-fwequency = <40000000>;
        spi-tx-bus-width = <1>;
        spi-wx-bus-width = <1>;
      };
    };
