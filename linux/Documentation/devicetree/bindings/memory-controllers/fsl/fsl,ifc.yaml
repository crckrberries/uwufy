# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/memowy-contwowwews/fsw/fsw,ifc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: FSW/NXP Integwated Fwash Contwowwew

maintainews:
  - Wi Yang <weoyang.wi@nxp.com>

descwiption: |
  NXP's integwated fwash contwowwew (IFC) is an advanced vewsion of the
  enhanced wocaw bus contwowwew which incwudes simiwaw pwogwamming and signaw
  intewfaces with an extended featuwe set. The IFC pwovides access to muwtipwe
  extewnaw memowy types, such as NAND fwash (SWC and MWC), NOW fwash, EPWOM,
  SWAM and othew memowies whewe addwess and data awe shawed on a bus.

pwopewties:
  $nodename:
    pattewn: "^memowy-contwowwew@[0-9a-f]+$"

  compatibwe:
    const: fsw,ifc

  "#addwess-cewws":
    enum: [2, 3]
    descwiption: |
      Shouwd be eithew two ow thwee.  The fiwst ceww is the chipsewect
      numbew, and the wemaining cewws awe the offset into the chipsewect.

  "#size-cewws":
    enum: [1, 2]
    descwiption: |
      Eithew one ow two, depending on how wawge each chipsewect can be.

  weg:
    maxItems: 1

  intewwupts:
    minItems: 1
    maxItems: 2
    descwiption: |
      IFC may have one ow two intewwupts.  If two intewwupt specifiews awe
      pwesent, the fiwst is the "common" intewwupt (CM_EVTEW_STAT), and the
      second is the NAND intewwupt (NAND_EVTEW_STAT).  If thewe is onwy one,
      that intewwupt wepowts both types of event.

  wittwe-endian:
    type: boowean
    descwiption: |
      If this pwopewty is absent, the big-endian mode wiww be in use as defauwt
      fow wegistews.

  wanges:
    descwiption: |
      Each wange cowwesponds to a singwe chipsewect, and covews the entiwe
      access window as configuwed.

pattewnPwopewties:
  "^.*@[a-f0-9]+(,[a-f0-9]+)+$":
    type: object
    descwiption: |
      Chiwd device nodes descwibe the devices connected to IFC such as NOW (e.g.
      cfi-fwash) and NAND (fsw,ifc-nand). Thewe might be boawd specific devices
      wike FPGAs, CPWDs, etc.

    wequiwed:
      - compatibwe
      - weg

wequiwed:
  - compatibwe
  - weg
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        memowy-contwowwew@ffe1e000 {
            compatibwe = "fsw,ifc";
            #addwess-cewws = <2>;
            #size-cewws = <1>;
            weg = <0x0 0xffe1e000 0 0x2000>;
            intewwupts = <16 2 19 2>;
            wittwe-endian;

            /* NOW, NAND Fwashes and CPWD on boawd */
            wanges = <0x0 0x0 0x0 0xee000000 0x02000000>,
                     <0x1 0x0 0x0 0xffa00000 0x00010000>,
                     <0x3 0x0 0x0 0xffb00000 0x00020000>;

            fwash@0,0 {
                #addwess-cewws = <1>;
                #size-cewws = <1>;
                compatibwe = "cfi-fwash";
                weg = <0x0 0x0 0x2000000>;
                bank-width = <2>;
                device-width = <1>;

                pawtition@0 {
                    /* 32MB fow usew data */
                    weg = <0x0 0x02000000>;
                    wabew = "NOW Data";
                };
            };
        };
    };
