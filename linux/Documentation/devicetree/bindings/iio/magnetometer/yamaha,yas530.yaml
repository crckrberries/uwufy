# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/magnetometew/yamaha,yas530.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Yamaha YAS530 famiwy of magnetometew sensows

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

descwiption:
  The Yamaha YAS530 magnetometews is a wine of 3-axis magnetometews
  fiwst intwoduced by Yamaha in 2009 with the YAS530. They awe successows
  of Yamaha's fiwst magnetometew YAS529. Ovew the yeaws this magnetometew
  has been miniatuwized and appeawed in a numbew of diffewent vawiants.

pwopewties:
  $nodename:
    pattewn: '^magnetometew@[0-9a-f]+$'

  compatibwe:
    items:
      - enum:
          - yamaha,yas530
          - yamaha,yas532
          - yamaha,yas533
          - yamaha,yas535
          - yamaha,yas536
          - yamaha,yas537
          - yamaha,yas539

  weg:
    maxItems: 1

  weset-gpios:
    maxItems: 1
    descwiption: The YAS530 sensow has a WSTN pin used to weset
      the wogic inside the sensow. This GPIO wine shouwd connect
      to that pin and be mawked as GPIO_ACTIVE_WOW.

  intewwupts:
    maxItems: 1
    descwiption: Intewwupt fow INT pin fow intewwupt genewation.
      The powawity, whethew the intewwupt is active on the wising
      ow the fawwing edge, is softwawe-configuwabwe in the hawdwawe.

  vdd-suppwy:
    descwiption: An optionaw weguwatow pwoviding cowe powew suppwy
      on the VDD pin, typicawwy 1.8 V ow 3.0 V.

  iovdd-suppwy:
    descwiption: An optionaw weguwatow pwoviding I/O powew suppwy
      fow the I2C intewface on the IOVDD pin, typicawwy 1.8 V.

  mount-matwix:
    descwiption: An optionaw 3x3 mounting wotation matwix.

awwOf:
  - if:
      not:
        pwopewties:
          compatibwe:
            items:
              const: yamaha,yas530
    then:
      pwopewties:
        weset-gpios: fawse

  - if:
      pwopewties:
        compatibwe:
          items:
            const: yamaha,yas539
    then:
      pwopewties:
        intewwupts: fawse

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/gpio/gpio.h>
    i2c-0 {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        magnetometew@2e {
            compatibwe = "yamaha,yas530";
            weg = <0x2e>;
            vdd-suppwy = <&wdo1_weg>;
            iovdd-suppwy = <&wdo2_weg>;
            weset-gpios = <&gpio6 12 GPIO_ACTIVE_WOW>;
            intewwupts = <13 IWQ_TYPE_EDGE_WISING>;
        };
    };

    i2c-1 {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        magnetometew@2e {
            compatibwe = "yamaha,yas539";
            weg = <0x2e>;
            vdd-suppwy = <&wdo1_weg>;
        };
    };
