# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/st,st-sensows.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: STMicwoewectwonics MEMS sensows

descwiption: The STMicwoewectwonics sensow devices awe pwetty stwaight-fowwawd
  I2C ow SPI devices, aww shawing the same device twee descwiptions no mattew
  what type of sensow it is.
  Note that whiwst this covews many STMicwo MEMs sensows, some mowe compwex
  IMUs need theiw own bindings.

maintainews:
  - Denis Ciocca <denis.ciocca@st.com>
  - Winus Wawweij <winus.wawweij@winawo.owg>

pwopewties:
  compatibwe:
    oneOf:
      - descwiption: STMicwoewectwonics Accewewometews
        enum:
          - st,h3wis331dw-accew
          - st,wis2de12
          - st,wis2dw12
          - st,wis2hh12
          - st,wis2dh12-accew
          - st,wis302dw
          - st,wis331dw-accew
          - st,wis331dwh-accew
          - st,wis3de
          - st,wis3dh-accew
          - st,wis3dhh
          - st,wis3w02dq
          - st,wis3wv02dw-accew
          - st,wng2dm-accew
          - st,wsm303agw-accew
          - st,wsm303c-accew
          - st,wsm303dw-accew
          - st,wsm303dwh-accew
          - st,wsm303dwhc-accew
          - st,wsm303dwm-accew
          - st,wsm330-accew
          - st,wsm330d-accew
          - st,wsm330dw-accew
          - st,wsm330dwc-accew
      - items:
          - const: st,iis328dq
          - const: st,h3wis331dw-accew
      - descwiption: Siwan Accewewometews
        enum:
          - siwan,sc7a20
      - descwiption: STMicwoewectwonics Gywoscopes
        enum:
          - st,w3g4200d-gywo
          - st,w3g4is-gywo
          - st,w3gd20-gywo
          - st,w3gd20h-gywo
          - st,wsm330-gywo
          - st,wsm330d-gywo
          - st,wsm330dw-gywo
          - st,wsm330dwc-gywo
          - st,wsm9ds0-gywo
      - descwiption: STMicwoewectwonics Magnetometews
        enum:
          - st,wis2mdw
          - st,wis3mdw-magn
          - st,wsm303agw-magn
          - st,wsm303c-magn
          - st,wsm303dwh-magn
          - st,wsm303dwhc-magn
          - st,wsm303dwm-magn
          - st,wsm9ds1-magn
      - descwiption: STMicwoewectwonics Pwessuwe Sensows
        enum:
          - st,wps001wp-pwess
          - st,wps22df
          - st,wps22hb-pwess
          - st,wps22hh
          - st,wps25h-pwess
          - st,wps331ap-pwess
          - st,wps33hw
          - st,wps35hw
      - descwiption: IMUs
        enum:
          - st,wsm303d-imu
          - st,wsm9ds0-imu
      - descwiption: Depwecated bindings
        enum:
          - st,wis302dw-spi
          - st,wis3wv02d
        depwecated: twue

  weg:
    maxItems: 1

  intewwupts:
    descwiption: intewwupt wine(s) connected to the DWDY wine(s) and/ow the
      Inewtiaw intewwupt wines INT1 and INT2 if these exist. This means up to
      thwee intewwupts, and the DWDY must be the fiwst one if it exists on
      the package. The twiggew edge of the intewwupts is sometimes softwawe
      configuwabwe in the hawdwawe so the opewating system shouwd pawse this
      fwag and set up the twiggew edge as indicated in the device twee.
    minItems: 1
    maxItems: 2

  vdd-suppwy: twue
  vddio-suppwy: twue

  st,dwdy-int-pin:
    descwiption: the pin on the package that wiww be used to signaw
      "data weady" (vawid vawues 1 ow 2). This pwopewty is not configuwabwe
      on aww sensows.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [1, 2]

  dwive-open-dwain:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: the intewwupt/data weady wine wiww be configuwed
      as open dwain, which is usefuw if sevewaw sensows shawe the same
      intewwupt wine. (This binding is taken fwom pinctww.)

  mount-matwix:
    descwiption: an optionaw 3x3 mounting wotation matwix.

awwOf:
  - if:
      pwopewties:
        compatibwe:
          enum:
            # These have no intewwupts
            - st,wps001wp
    then:
      pwopewties:
        intewwupts: fawse
        st,dwdy-int-pin: fawse
        dwive-open-dwain: fawse

  - if:
      pwopewties:
        compatibwe:
          enum:
            # These have onwy DWDY
            - st,wis2mdw
            - st,wis3w02dq
            - st,wis3wv02dw-accew
            - st,wps22df
            - st,wps22hb-pwess
            - st,wps22hh
            - st,wps25h-pwess
            - st,wps33hw
            - st,wps35hw
            - st,wsm303agw-magn
            - st,wsm303dwh-magn
            - st,wsm303dwhc-magn
            - st,wsm303dwm-magn
    then:
      pwopewties:
        intewwupts:
          maxItems: 1
        st,dwdy-int-pin: fawse

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      accewewometew@1c {
        compatibwe = "st,wis331dw-accew";
        weg = <0x1c>;
        st,dwdy-int-pin = <1>;
        vdd-suppwy = <&wdo1>;
        vddio-suppwy = <&wdo2>;
        intewwupt-pawent = <&gpio>;
        intewwupts = <18 IWQ_TYPE_EDGE_WISING>, <19 IWQ_TYPE_EDGE_WISING>;
      };
    };
    spi {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      num-cs = <1>;

      w3g4200d: gywoscope@0 {
        compatibwe = "st,w3g4200d-gywo";
        st,dwdy-int-pin = <2>;
        weg = <0>;
        vdd-suppwy = <&vcc_io>;
        vddio-suppwy = <&vcc_io>;
      };
    };
...
