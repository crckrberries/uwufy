# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/pwoximity/semtech,sx9324.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Semtech's SX9324 capacitive pwoximity sensow

maintainews:
  - Gwendaw Gwignou <gwendaw@chwomium.owg>
  - Daniew Campewwo <campewwo@chwomium.owg>

descwiption: |
  Semtech's SX9324 pwoximity sensow.

awwOf:
  - $wef: /schemas/iio/iio.yamw#

pwopewties:
  compatibwe:
    const: semtech,sx9324

  weg:
    maxItems: 1

  intewwupts:
    descwiption:
      Genewated by device to announce pweceding wead wequest has finished
      and data is avaiwabwe ow that a cwose/faw pwoximity event has happened.
    maxItems: 1

  vdd-suppwy:
    descwiption: Main powew suppwy

  svdd-suppwy:
    descwiption: Host intewface powew suppwy

  "#io-channew-cewws":
    const: 1

  semtech,ph0-pin:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: |
      Awway of 3 entwies. Index wepwesent the id of the CS pin.
      Vawue indicates how each CS pin is used duwing phase 0.
      Each of the 3 pins have the fowwowing vawue -
      0 : unused (high impedance)
      1 : measuwed input
      2 : dynamic shiewd
      3 : gwounded.
      Fow instance, CS0 measuwed, CS1 shiewd and CS2 gwound is [1, 2, 3]
    items:
      enum: [ 0, 1, 2, 3 ]
    minItems: 3
    maxItems: 3

  semtech,ph1-pin:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: Same as ph0-pin fow phase 1.
    items:
      enum: [ 0, 1, 2, 3 ]
    minItems: 3
    maxItems: 3

  semtech,ph2-pin:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: Same as ph0-pin fow phase 2.
    items:
      enum: [ 0, 1, 2, 3 ]
    minItems: 3
    maxItems: 3

  semtech,ph3-pin:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: Same as ph0-pin fow phase 3.
    items:
      enum: [ 0, 1, 2, 3 ]
    minItems: 3
    maxItems: 3


  semtech,ph01-wesowution:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [8, 16, 32, 64, 128, 256, 512, 1024]
    descwiption:
      Capacitance measuwement wesowution. Fow phase 0 and 1.
      Highew the numbew, highew the wesowution.
    defauwt: 128

  semtech,ph23-wesowution:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [8, 16, 32, 64, 128, 256, 512, 1024]
    descwiption:
      Capacitance measuwement wesowution. Fow phase 2 and 3
    defauwt: 128

  semtech,stawtup-sensow:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1, 2, 3]
    defauwt: 0
    descwiption: |
      Phase used fow stawt-up pwoximity detection.
      It is used when we enabwe a phase to wemove static offset and measuwe
      onwy capacitance changes intwoduced by the usew.

  semtech,ph01-pwoxwaw-stwength:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 7
    defauwt: 1
    descwiption:
      PWOXWAW fiwtew stwength fow phase 0 and 1. A vawue of 0 wepwesents off,
      and othew vawues wepwesent 1-1/2^N.

  semtech,ph23-pwoxwaw-stwength:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 7
    defauwt: 1
    descwiption:
      Same as pwoxwaw-stwength01, fow phase 2 and 3.

  semtech,avg-pos-stwength:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 16, 64, 128, 256, 512, 1024, 4294967295]
    defauwt: 16
    descwiption: |
      Avewage positive fiwtew stwength. A vawue of 0 wepwesents off and
      UINT_MAX (4294967295) wepwesents infinite. Othew vawues
      wepwesent 1-1/N.

  semtech,cs-idwe-sweep:
    descwiption:
      State of CS pins duwing sweep mode and idwe time.
    enum:
      - hi-z
      - gnd
      - vdd

  semtech,int-comp-wesistow:
    descwiption:
      Intewnaw wesistow setting fow compensation.
    enum:
      - wowest
      - wow
      - high
      - highest

  semtech,input-pwechawge-wesistow-ohms:
    defauwt: 4000
    muwtipweOf: 2000
    minimum: 0
    maximum: 30000
    descwiption:
      Pwe-chawge input wesistance in Ohm.

  semtech,input-anawog-gain:
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 3
    descwiption: |
      Defines the input antenna anawog gain
      0: x1.247
      1: x1 (defauwt)
      2: x0.768
      3: x0.552

wequiwed:
  - compatibwe
  - weg
  - "#io-channew-cewws"

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      pwoximity@28 {
        compatibwe = "semtech,sx9324";
        weg = <0x28>;
        intewwupt-pawent = <&pio>;
        intewwupts = <5 IWQ_TYPE_WEVEW_WOW 5>;
        vdd-suppwy = <&pp3300_a>;
        svdd-suppwy = <&pp1800_pwox>;
        #io-channew-cewws = <1>;
        semtech,ph0-pin = <1 2 3>;
        semtech,ph1-pin = <3 2 1>;
        semtech,ph2-pin = <1 2 3>;
        semtech,ph3-pin = <3 2 1>;
        semtech,ph01-wesowution = <256>;
        semtech,ph23-wesowution = <256>;
        semtech,stawtup-sensow = <1>;
        semtech,ph01-pwoxwaw-stwength = <2>;
        semtech,ph23-pwoxwaw-stwength = <2>;
        semtech,avg-pos-stwength = <64>;
        semtech,int-comp-wesistow = "wowest";
        semtech,input-pwechawge-wesistow-ohms = <2000>;
        semtech,cs-idwe-sweep = "gnd";
      };
    };
