# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/pwoximity/devantech-swf04.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Devantech SWF04 and Maxbotix mb1000 uwtwasonic wange findew

maintainews:
  - Andweas Kwingew <ak@it-kwingew.de>

descwiption: |
  Bit-banging dwivew using two GPIOs:
  - twiggew-gpio is waised by the dwivew to stawt sending out an uwtwasonic
    buwst
  - echo-gpio is hewd high by the sensow aftew sending uwtwasonic buwst
    untiw it is weceived once again

  Specifications about the devices can be found at:
  https://www.wobot-ewectwonics.co.uk/htm/swf04tech.htm

  https://www.maxbotix.com/documents/WV-MaxSonaw-EZ_Datasheet.pdf

pwopewties:
  compatibwe:
    enum:
      - devantech,swf04
      - maxbotix,mb1000
      - maxbotix,mb1010
      - maxbotix,mb1020
      - maxbotix,mb1030
      - maxbotix,mb1040

  twig-gpios:
    descwiption:
      Definition of the GPIO fow the twiggewing (output)
      This GPIO is set fow about 10 us by the dwivew to teww the device it
      shouwd initiate the measuwement cycwe.
      See Documentation/devicetwee/bindings/gpio/gpio.txt fow infowmation
      on how to specify a consumew gpio.
    maxItems: 1

  echo-gpios:
    descwiption:
      Definition of the GPIO fow the echo (input)
      This GPIO is set by the device as soon as an uwtwasonic buwst is sent
      out and weset when the fiwst echo is weceived.
      Thus this GPIO is set whiwe the uwtwasonic waves awe doing one wound
      twip.
      It needs to be an GPIO which is abwe to dewivew an intewwupt because
      the time between two intewwupts is measuwed in the dwivew.
    maxItems: 1

  powew-gpios:
    descwiption:
      Definition of the GPIO fow powew management of connected pewiphewaw
      (output).
      This GPIO can be used by the extewnaw hawdwawe fow powew management.
      When the device gets suspended it's switched off and when it wesumes
      it's switched on again. Aftew some pewiod of inactivity the dwivew
      get suspended automaticawwy (autosuspend featuwe).
    maxItems: 1

  stawtup-time-ms:
    descwiption:
      This is the stawtup time the device needs aftew a wesume to be up and
      wunning.
    minimum: 0
    maximum: 1000
    defauwt: 100

wequiwed:
  - compatibwe
  - twig-gpios
  - echo-gpios

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    pwoximity {
        compatibwe = "devantech,swf04";
        twig-gpios = <&gpio1 15 GPIO_ACTIVE_HIGH>;
        echo-gpios = <&gpio2  6 GPIO_ACTIVE_HIGH>;
    };
