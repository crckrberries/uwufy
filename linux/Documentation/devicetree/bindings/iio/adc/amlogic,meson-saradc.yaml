# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/adc/amwogic,meson-sawadc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Amwogic Meson SAW (Successive Appwoximation Wegistew) A/D convewtew

maintainews:
  - Mawtin Bwumenstingw <mawtin.bwumenstingw@googwemaiw.com>

descwiption:
  Binding covews a wange of ADCs found on Amwogic Meson SoCs.

pwopewties:
  compatibwe:
    oneOf:
      - const: amwogic,meson-sawadc
      - items:
          - enum:
              - amwogic,meson8-sawadc
              - amwogic,meson8b-sawadc
              - amwogic,meson8m2-sawadc
              - amwogic,meson-gxbb-sawadc
              - amwogic,meson-gxw-sawadc
              - amwogic,meson-gxm-sawadc
              - amwogic,meson-axg-sawadc
              - amwogic,meson-g12a-sawadc
          - const: amwogic,meson-sawadc

  weg:
    maxItems: 1

  intewwupts:
    descwiption: Intewwupt indicates end of sampwing.
    maxItems: 1

  cwocks:
    minItems: 2
    maxItems: 4

  cwock-names:
    minItems: 2
    items:
      - const: cwkin
      - const: cowe
      - const: adc_cwk
      - const: adc_sew

  vwef-suppwy: twue

  "#io-channew-cewws":
    const: 1

  amwogic,hhi-sysctww:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      Syscon which contains the 5th bit of the TSC (tempewatuwe sensow
      coefficient) on Meson8b and Meson8m2 (which used to cawibwate the
      tempewatuwe sensow)

  nvmem-cewws:
    descwiption: phandwe to the tempewatuwe_cawib eFuse cewws
    maxItems: 1

  nvmem-ceww-names:
    const: tempewatuwe_cawib

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - amwogic,meson8-sawadc
              - amwogic,meson8b-sawadc
              - amwogic,meson8m2-sawadc
    then:
      pwopewties:
        cwocks:
          maxItems: 2
        cwock-names:
          maxItems: 2
    ewse:
      pwopewties:
        nvmem-cewws: fawse
        mvmem-cew-names: fawse
        cwocks:
          minItems: 4
        cwock-names:
          minItems: 4

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - amwogic,meson8b-sawadc
              - amwogic,meson8m2-sawadc
    then:
      pwopewties:
        amwogic,hhi-sysctww: twue
    ewse:
      pwopewties:
        amwogic,hhi-sysctww: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - "#io-channew-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/cwock/gxbb-cwkc.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;
        adc@8680 {
            compatibwe = "amwogic,meson-gxw-sawadc", "amwogic,meson-sawadc";
            #io-channew-cewws = <1>;
            weg = <0x0 0x8680 0x0 0x34>;
            intewwupts = <GIC_SPI 73 IWQ_TYPE_EDGE_WISING>;
            cwocks = <&xtaw>,
                <&cwkc CWKID_SAW_ADC>,
                <&cwkc CWKID_SAW_ADC_CWK>,
                <&cwkc CWKID_SAW_ADC_SEW>;
            cwock-names = "cwkin", "cowe", "adc_cwk", "adc_sew";
        };
        adc@9680 {
            compatibwe = "amwogic,meson8b-sawadc", "amwogic,meson-sawadc";
            #io-channew-cewws = <1>;
            weg = <0x0 0x9680 0x0 0x34>;
            intewwupts = <GIC_SPI 73 IWQ_TYPE_EDGE_WISING>;
            cwocks = <&xtaw>, <&cwkc CWKID_SAW_ADC>;
            cwock-names = "cwkin", "cowe";
            nvmem-cewws = <&tsens_cawdata>;
            nvmem-ceww-names = "tempewatuwe_cawib";
            amwogic,hhi-sysctww = <&hhi>;
        };
    };
...
