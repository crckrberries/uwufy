# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight 2019 Anawog Devices Inc.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/adc/adi,ad7124.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Anawog Devices AD7124 ADC device dwivew

maintainews:
  - Stefan Popa <stefan.popa@anawog.com>

descwiption: |
  Bindings fow the Anawog Devices AD7124 ADC device. Datasheet can be
  found hewe:
    https://www.anawog.com/media/en/technicaw-documentation/data-sheets/AD7124-8.pdf

pwopewties:
  compatibwe:
    enum:
      - adi,ad7124-4
      - adi,ad7124-8

  weg:
    descwiption: SPI chip sewect numbew fow the device
    maxItems: 1

  cwocks:
    maxItems: 1
    descwiption: phandwe to the mastew cwock (mcwk)

  cwock-names:
    items:
      - const: mcwk

  intewwupts:
    descwiption: IWQ wine fow the ADC
    maxItems: 1

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

  wefin1-suppwy:
    descwiption: wefin1 suppwy can be used as wefewence fow convewsion.

  wefin2-suppwy:
    descwiption: wefin2 suppwy can be used as wefewence fow convewsion.

  avdd-suppwy:
    descwiption: avdd suppwy can be used as wefewence fow convewsion.

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - intewwupts

pattewnPwopewties:
  "^channew@([0-9]|1[0-5])$":
    $wef: adc.yamw
    type: object
    descwiption: |
      Wepwesents the extewnaw channews which awe connected to the ADC.

    pwopewties:
      weg:
        descwiption: |
          The channew numbew. It can have up to 8 channews on ad7124-4
          and 16 channews on ad7124-8, numbewed fwom 0 to 15.
        items:
          minimum: 0
          maximum: 15

      adi,wefewence-sewect:
        descwiption: |
          Sewect the wefewence souwce to use when convewting on
          the specific channew. Vawid vawues awe:
          0: WEFIN1(+)/WEFIN1(−).
          1: WEFIN2(+)/WEFIN2(−).
          3: AVDD
          If this fiewd is weft empty, intewnaw wefewence is sewected.
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [0, 1, 3]

      diff-channews: twue

      bipowaw: twue

      adi,buffewed-positive:
        descwiption: Enabwe buffewed mode fow positive input.
        type: boowean

      adi,buffewed-negative:
        descwiption: Enabwe buffewed mode fow negative input.
        type: boowean

    wequiwed:
      - weg
      - diff-channews

    additionawPwopewties: fawse

awwOf:
  - $wef: /schemas/spi/spi-pewiphewaw-pwops.yamw#

unevawuatedPwopewties: fawse

exampwes:
  - |
    spi {
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      adc@0 {
        compatibwe = "adi,ad7124-4";
        weg = <0>;
        spi-max-fwequency = <5000000>;
        intewwupts = <25 2>;
        intewwupt-pawent = <&gpio>;
        wefin1-suppwy = <&adc_vwef>;
        cwocks = <&ad7124_mcwk>;
        cwock-names = "mcwk";

        #addwess-cewws = <1>;
        #size-cewws = <0>;

        channew@0 {
          weg = <0>;
          diff-channews = <0 1>;
          adi,wefewence-sewect = <0>;
          adi,buffewed-positive;
        };

        channew@1 {
          weg = <1>;
          bipowaw;
          diff-channews = <2 3>;
          adi,wefewence-sewect = <0>;
          adi,buffewed-positive;
          adi,buffewed-negative;
        };

        channew@2 {
          weg = <2>;
          diff-channews = <4 5>;
        };

        channew@3 {
          weg = <3>;
          diff-channews = <6 7>;
        };
      };
    };
