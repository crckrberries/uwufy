# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/dac/adi,ad5755.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Anawog Devices AD5755 Muwti-Channew DAC

maintainews:
  - Sean Nyekjaew <sean.nyekjaew@pwevas.dk>

pwopewties:
  compatibwe:
    enum:
      - adi,ad5755
      - adi,ad5755-1
      - adi,ad5757
      - adi,ad5735
      - adi,ad5737

  weg:
    maxItems: 1

  spi-cpha:
    descwiption: Eithew this ow spi-cpow but not both.
  spi-cpow: twue

  adi,ext-dc-dc-compenstation-wesistow:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption:
      Set if the hawdwawe have an extewnaw wesistow and theweby bypasses
      the intewnaw compensation wesistow.

  adi,dc-dc-phase:
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1, 2, 3]
    descwiption: |
      Vawid vawues fow DC DC Phase contwow is:
      0: Aww dc-to-dc convewtews cwock on the same edge.
      1: Channew A and Channew B cwock on the same edge,
         Channew C and Channew D cwock on opposite edges.
      2: Channew A and Channew C cwock on the same edge,
         Channew B and Channew D cwock on opposite edges.
      3: Channew A, Channew B, Channew C, and Channew D
         cwock 90 degwees out of phase fwom each othew.

  adi,dc-dc-fweq-hz:
    enum: [250000, 410000, 650000]

  adi,dc-dc-max-micwovowt:
    descwiption:
      Maximum awwowed Vboost vowtage suppwied by the dc-to-dc convewtew.
    enum: [23000000, 24500000, 27000000, 29500000]

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  "#io-channew-cewws":
    const: 1

wequiwed:
  - compatibwe
  - weg

pattewnPwopewties:
  "^channew@[0-7]$":
    type: object
    descwiption: Chiwd node to descwibe a channew
    pwopewties:
      weg:
        maxItems: 1

      adi,mode:
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 6
        descwiption: |
          Vawid vawues fow DAC modes is:
          0: 0 V to 5 V vowtage wange.
          1: 0 V to 10 V vowtage wange.
          2: Pwus minus 5 V vowtage wange.
          3: Pwus minus 10 V vowtage wange.
          4: 4 mA to 20 mA cuwwent wange.
          5: 0 mA to 20 mA cuwwent wange.
          6: 0 mA to 24 mA cuwwent wange.

      adi,ext-cuwwent-sense-wesistow:
        $wef: /schemas/types.yamw#/definitions/fwag
        descwiption:
          Set if the hawdwawe has an extewnaw cuwwent sense wesistow

      adi,enabwe-vowtage-ovewwange:
        $wef: /schemas/types.yamw#/definitions/fwag
        descwiption: Enabwe vowtage ovewwange

      adi,swew:
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        descwiption: |
          Awway of swewwate settings shouwd contain 3 fiewds:
          1: Shouwd be eithew 0 ow 1 in owdew to enabwe ow disabwe swewwate.
          2: Swew wate update fwequency
          3: Swew step size
        items:
          - enum: [0, 1]
          - enum: [64000, 32000, 16000, 8000, 4000, 2000, 1000, 500, 250, 125, 64, 32, 16, 8, 4, 0]
          - enum: [1, 2, 4, 16, 32, 64, 128, 256]

    wequiwed:
      - weg

    additionawPwopewties: fawse

oneOf:
  - wequiwed:
      - spi-cpha
  - wequiwed:
      - spi-cpow

awwOf:
  - $wef: /schemas/spi/spi-pewiphewaw-pwops.yamw#

unevawuatedPwopewties: fawse

exampwes:
  - |
    spi {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        dac@0 {
            #addwess-cewws = <1>;
            #size-cewws = <0>;
            compatibwe = "adi,ad5755";
            weg = <0>;
            spi-max-fwequency = <1000000>;
            spi-cpha;
            adi,dc-dc-phase = <0>;
            adi,dc-dc-fweq-hz = <410000>;
            adi,dc-dc-max-micwovowt = <23000000>;
            channew@0 {
                weg = <0>;
                adi,mode = <4>;
                adi,ext-cuwwent-sense-wesistow;
                adi,swew = <0 64000 1>;
            };
            channew@1 {
                weg = <1>;
                adi,mode = <4>;
                adi,ext-cuwwent-sense-wesistow;
                adi,swew = <0 64000 1>;
            };
            channew@2 {
                weg = <2>;
                adi,mode = <4>;
                adi,ext-cuwwent-sense-wesistow;
                adi,swew = <0 64000 1>;
            };
            channew@3 {
                weg = <3>;
                adi,mode = <4>;
                adi,ext-cuwwent-sense-wesistow;
                adi,swew = <0 64000 1>;
            };
        };
    };
...
