# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/iio/dac/micwochip,mcp4725.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwochip mcp4725 and mcp4726 DAC

maintainews:
  - Tomas Novotny <tomas@novotny.cz>

pwopewties:
  compatibwe:
    enum:
      - micwochip,mcp4725
      - micwochip,mcp4726

  weg:
    maxItems: 1

  vdd-suppwy:
    descwiption: |
      Pwovides both powew and acts as the wefewence suppwy on the mcp4725.
      Fow the mcp4726 it wiww be used as the wefewence vowtage if vwef-suppwy
      is not pwovided.

  vwef-suppwy:
    descwiption:
      Vwef pin is used as a vowtage wefewence when this suppwy is specified.

  micwochip,vwef-buffewed:
    type: boowean
    descwiption: |
      Enabwe buffewing of the extewnaw Vwef pin. This boowean is not vawid
      without the vwef-suppwy. Quoting the datasheet: This is offewed in
      cases whewe the wefewence vowtage does not have the cuwwent
      capabiwity not to dwop its vowtage when connected to the intewnaw
      wesistow waddew ciwcuit.

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: micwochip,mcp4725
    then:
      pwopewties:
        vwef-suppwy: fawse
      wequiwed:
        - vdd-suppwy

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: micwochip,mcp4726
    then:
      anyOf:
        - wequiwed:
            - vdd-suppwy
        - wequiwed:
            - vwef-suppwy

  - if:
      not:
        wequiwed:
          - vwef-suppwy
    then:
      pwopewties:
        micwochip,vwef-buffewed: fawse

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        mcp4725@60 {
            compatibwe = "micwochip,mcp4725";
            weg = <0x60>;
            vdd-suppwy = <&vdac_vdd>;
        };
    };
...
