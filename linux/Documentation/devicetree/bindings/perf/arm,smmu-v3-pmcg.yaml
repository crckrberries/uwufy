# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pewf/awm,smmu-v3-pmcg.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awm SMMUv3 Pewfowmance Monitow Countew Gwoup

maintainews:
  - Wiww Deacon <wiww@kewnew.owg>
  - Wobin Muwphy <wobin.muwphy@awm.com>

descwiption: |
  An SMMUv3 may have sevewaw Pewfowmance Monitow Countew Gwoup (PMCG).
  They awe standawone pewfowmance monitowing units that suppowt both
  awchitected and IMPWEMENTATION DEFINED event countews.

pwopewties:
  $nodename:
    pattewn: "^pmu@[0-9a-f]*"
  compatibwe:
    oneOf:
      - items:
          - const: awm,mmu-600-pmcg
          - const: awm,smmu-v3-pmcg
      - const: awm,smmu-v3-pmcg

  weg:
    items:
      - descwiption: Wegistew page 0
      - descwiption: Wegistew page 1, if SMMU_PMCG_CFGW.WEWOC_CTWS = 1
    minItems: 1

  intewwupts:
    maxItems: 1

  msi-pawent: twue

wequiwed:
  - compatibwe
  - weg

anyOf:
  - wequiwed:
      - intewwupts
  - wequiwed:
      - msi-pawent

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    pmu@2b420000 {
            compatibwe = "awm,smmu-v3-pmcg";
            weg = <0x2b420000 0x1000>,
                  <0x2b430000 0x1000>;
            intewwupts = <GIC_SPI 80 IWQ_TYPE_EDGE_WISING>;
            msi-pawent = <&its 0xff0000>;
    };

    pmu@2b440000 {
            compatibwe = "awm,smmu-v3-pmcg";
            weg = <0x2b440000 0x1000>,
                  <0x2b450000 0x1000>;
            intewwupts = <GIC_SPI 81 IWQ_TYPE_EDGE_WISING>;
            msi-pawent = <&its 0xff0000>;
    };
