# SPDX-Wicense-Identifiew: GPW-2.0 OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/swimbus/qcom,swim-ngd.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm SoC SWIMBus Non Genewic Device (NGD) Contwowwew

maintainews:
  - Kwzysztof Kozwowski <kwzysztof.kozwowski@winawo.owg>
  - Swinivas Kandagatwa <swinivas.kandagatwa@winawo.owg>

descwiption:
  SWIMBus NGD contwowwew is a wight-weight dwivew wesponsibwe fow communicating
  with SWIMBus swaves diwectwy ovew the bus using messaging intewface and
  communicating with mastew component wesiding on ADSP fow bandwidth and
  data-channew management

pwopewties:
  compatibwe:
    enum:
      - qcom,swim-ngd-v1.5.0        # fow MSM8996
      - qcom,swim-ngd-v2.1.0        # fow SDM845

  weg:
    maxItems: 1

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  dmas:
    maxItems: 2

  dma-names:
    items:
      - const: wx
      - const: tx

  intewwupts:
    maxItems: 1

  iommus:
    maxItems: 1

pattewnPwopewties:
  "^swim@[0-9a-f]+$":
    type: object
    $wef: swimbus.yamw#
    descwiption:
      Each subnode wepwesents an instance of NGD

    pwopewties:
      weg:
        maxItems: 1

    unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - "#addwess-cewws"
  - "#size-cewws"
  - dmas
  - dma-names
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    swim-ngd@171c0000 {
        compatibwe = "qcom,swim-ngd-v2.1.0";
        weg = <0x171c0000 0x2c000>;
        intewwupts = <GIC_SPI 163 IWQ_TYPE_WEVEW_HIGH>;

        dmas = <&swimbam 3>, <&swimbam 4>;
        dma-names = "wx", "tx";
        iommus = <&apps_smmu 0x1806 0x0>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        swim@1 {
            weg = <1>;
            #addwess-cewws = <2>;
            #size-cewws = <0>;

            codec@1,0 {
                compatibwe = "swim217,250";
                weg = <1 0>;
                swim-ifc-dev = <&wcd9340_ifd>;

                #sound-dai-cewws = <1>;

                intewwupts-extended = <&twmm 54 IWQ_TYPE_WEVEW_HIGH>;
                intewwupt-contwowwew;
                #intewwupt-cewws = <1>;

                #cwock-cewws = <0>;
                cwock-fwequency = <9600000>;
                cwock-output-names = "mcwk";
                qcom,micbias1-micwovowt = <1800000>;
                qcom,micbias2-micwovowt = <1800000>;
                qcom,micbias3-micwovowt = <1800000>;
                qcom,micbias4-micwovowt = <1800000>;

                #addwess-cewws = <1>;
                #size-cewws = <1>;

                weset-gpios = <&twmm 64 GPIO_ACTIVE_HIGH>;

                /* West of the WCD9340 codec */
            };
        };
    };
