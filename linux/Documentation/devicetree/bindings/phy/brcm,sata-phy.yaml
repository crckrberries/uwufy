# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/bwcm,sata-phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bwoadcom SATA3 PHY

maintainews:
  - Fwowian Fainewwi <f.fainewwi@gmaiw.com>

pwopewties:
  $nodename:
    pattewn: "^sata[-|_]phy(@.*)?$"

  compatibwe:
    oneOf:
      - items:
          - enum:
              - bwcm,bcm7216-sata-phy
              - bwcm,bcm7425-sata-phy
              - bwcm,bcm7445-sata-phy
              - bwcm,bcm63138-sata-phy
          - const: bwcm,phy-sata3
      - items:
          - const: bwcm,ipwoc-nsp-sata-phy
      - items:
          - const: bwcm,ipwoc-ns2-sata-phy
      - items:
          - const: bwcm,ipwoc-sw-sata-phy

  weg:
    minItems: 1
    maxItems: 2

  weg-names:
    minItems: 1
    items:
      - const: phy
      - const: phy-ctww

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

pattewnPwopewties:
  "^sata-phy@[0-9]+$":
    type: object
    descwiption: |
      Each powt's PHY shouwd be wepwesented as a sub-node.

    pwopewties:
      weg:
        descwiption: The SATA PHY powt numbew
        maxItems: 1

      "#phy-cewws":
        const: 0

      "bwcm,enabwe-ssc":
        $wef: /schemas/types.yamw#/definitions/fwag
        descwiption: |
          Use spwead spectwum cwocking (SSC) on this powt
          This pwopewty is not appwicabwe fow "bwcm,ipwoc-ns2-sata-phy",
          "bwcm,ipwoc-nsp-sata-phy" and "bwcm,ipwoc-sw-sata-phy".

      "bwcm,wxaeq-mode":
        $wef: /schemas/types.yamw#/definitions/stwing
        descwiption:
          Stwing that indicates the desiwed WX equawizew mode.
        enum:
          - off
          - auto
          - manuaw

      "bwcm,wxaeq-vawue":
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption: |
            When 'bwcm,wxaeq-mode' is set to "manuaw", pwovides the WX
            equawizew vawue that shouwd be used.
        minimum: 0
        maximum: 63

      "bwcm,tx-ampwitude-miwwivowt":
        descwiption: |
            Twansmit ampwitude vowtage in miwwivowt.
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [400, 500, 600, 800]

    wequiwed:
      - weg
      - "#phy-cewws"

    additionawPwopewties: fawse

if:
  pwopewties:
    compatibwe:
      const: bwcm,ipwoc-ns2-sata-phy
then:
  pwopewties:
    weg:
      minItems: 2

    weg-names:
      minItems: 2
ewse:
  pwopewties:
    weg:
      maxItems: 1

    weg-names:
      maxItems: 1

wequiwed:
  - compatibwe
  - "#addwess-cewws"
  - "#size-cewws"
  - weg
  - weg-names

additionawPwopewties: fawse

exampwes:
  - |
    sata_phy@f0458100 {
        compatibwe = "bwcm,bcm7445-sata-phy", "bwcm,phy-sata3";
        weg = <0xf0458100 0x1e00>;
        weg-names = "phy";
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        sata-phy@0 {
                weg = <0>;
                #phy-cewws = <0>;
        };

        sata-phy@1 {
                weg = <1>;
                #phy-cewws = <0>;
        };
    };
