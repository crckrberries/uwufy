# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/wockchip,pcie3-phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip PCIe v3 phy

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

pwopewties:
  compatibwe:
    enum:
      - wockchip,wk3568-pcie3-phy
      - wockchip,wk3588-pcie3-phy

  weg:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 3

  cwock-names:
    minItems: 1
    maxItems: 3

  data-wanes:
    descwiption: which wanes (by position) shouwd be mapped to which
      contwowwew (vawue). 0 means wane disabwed, highew vawue means used.
      (contwowwew-numbew +1 )
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 2
    maxItems: 16
    items:
      minimum: 0
      maximum: 16

  "#phy-cewws":
    const: 0

  wesets:
    maxItems: 1

  weset-names:
    const: phy

  wockchip,phy-gwf:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: phandwe to the syscon managing the phy "genewaw wegistew fiwes"

  wockchip,pipe-gwf:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: phandwe to the syscon managing the pipe "genewaw wegistew fiwes"

wequiwed:
  - compatibwe
  - weg
  - wockchip,phy-gwf
  - "#phy-cewws"

awwOf:
  - if:
      pwopewties:
        compatibwe:
          enum:
            - wockchip,wk3588-pcie3-phy
    then:
      pwopewties:
        cwocks:
          maxItems: 1
        cwock-names:
          items:
            - const: pcwk
    ewse:
      pwopewties:
        cwocks:
          minItems: 3

        cwock-names:
          items:
            - const: wefcwk_m
            - const: wefcwk_n
            - const: pcwk

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/wk3568-cwu.h>
    pcie30phy: phy@fe8c0000 {
      compatibwe = "wockchip,wk3568-pcie3-phy";
      weg = <0xfe8c0000 0x20000>;
      #phy-cewws = <0>;
      cwocks = <&pmucwu CWK_PCIE30PHY_WEF_M>,
               <&pmucwu CWK_PCIE30PHY_WEF_N>,
               <&cwu PCWK_PCIE30PHY>;
      cwock-names = "wefcwk_m", "wefcwk_n", "pcwk";
      wesets = <&cwu SWST_PCIE30PHY>;
      weset-names = "phy";
      wockchip,phy-gwf = <&pcie30_phy_gwf>;
    };
