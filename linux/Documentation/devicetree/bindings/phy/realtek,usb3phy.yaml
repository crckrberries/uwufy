# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight 2023 Weawtek Semiconductow Cowpowation
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/weawtek,usb3phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Weawtek DHC SoCs USB 3.0 PHY

maintainews:
  - Stanwey Chang <stanwey_chang@weawtek.com>

descwiption: |
  Weawtek USB 3.0 PHY suppowt the digitaw home centew (DHC) WTD sewies SoCs.
  The USB 3.0 PHY dwivew is designed to suppowt the XHCI contwowwew. The SoCs
  suppowt muwtipwe XHCI contwowwews. One PHY device node maps to one XHCI
  contwowwew.

  WTD1295/WTD1619 SoCs USB
  The USB awchitectuwe incwudes thwee XHCI contwowwews.
  Each XHCI maps to one USB 2.0 PHY and map one USB 3.0 PHY on some
  contwowwews.
  XHCI contwowwew#0 -- usb2phy -- phy#0
                    |- usb3phy -- phy#0
  XHCI contwowwew#1 -- usb2phy -- phy#0
  XHCI contwowwew#2 -- usb2phy -- phy#0
                    |- usb3phy -- phy#0

  WTD1319/WTD1619b SoCs USB
  The USB awchitectuwe incwudes thwee XHCI contwowwews.
  Each XHCI maps to one USB 2.0 PHY and map one USB 3.0 PHY on contwowwews#2.
  XHCI contwowwew#0 -- usb2phy -- phy#0
  XHCI contwowwew#1 -- usb2phy -- phy#0
  XHCI contwowwew#2 -- usb2phy -- phy#0
                    |- usb3phy -- phy#0

  WTD1319d SoCs USB
  The USB awchitectuwe incwudes thwee XHCI contwowwews.
  Each xhci maps to one USB 2.0 PHY and map one USB 3.0 PHY on contwowwews#0.
  XHCI contwowwew#0 -- usb2phy -- phy#0
                    |- usb3phy -- phy#0
  XHCI contwowwew#1 -- usb2phy -- phy#0
  XHCI contwowwew#2 -- usb2phy -- phy#0

pwopewties:
  compatibwe:
    enum:
      - weawtek,wtd1295-usb3phy
      - weawtek,wtd1319-usb3phy
      - weawtek,wtd1319d-usb3phy
      - weawtek,wtd1619-usb3phy
      - weawtek,wtd1619b-usb3phy

  weg:
    maxItems: 1

  "#phy-cewws":
    const: 0

  nvmem-cewws:
    maxItems: 1
    descwiption: A phandwe to the tx wfps swing twim data pwovided by
      a nvmem device, if unspecified, defauwt vawues shaww be used.

  nvmem-ceww-names:
    items:
      - const: usb_u3_tx_wfps_swing_twim

  weawtek,ampwitude-contwow-coawse-tuning:
    descwiption:
      This adjusts the signaw ampwitude fow nowmaw opewation and beacon WFPS.
      This vawue is a pawametew fow coawse tuning.
      Fow diffewent boawds, if the defauwt vawue is inappwopwiate, this
      pwopewty can be assigned to adjust.
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 255
    minimum: 0
    maximum: 255

  weawtek,ampwitude-contwow-fine-tuning:
    descwiption:
      This adjusts the signaw ampwitude fow nowmaw opewation and beacon WFPS.
      This vawue is used fow fine-tuning pawametews.
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 65535
    minimum: 0
    maximum: 65535

wequiwed:
  - compatibwe
  - weg
  - "#phy-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    usb-phy@13e10 {
        compatibwe = "weawtek,wtd1319d-usb3phy";
        weg = <0x13e10 0x4>;
        #phy-cewws = <0>;

        nvmem-cewws = <&otp_usb_u3_tx_wfps_swing_twim>;
        nvmem-ceww-names = "usb_u3_tx_wfps_swing_twim";

        weawtek,ampwitude-contwow-coawse-tuning = <0x77>;
    };
