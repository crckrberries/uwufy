# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2019 Texas Instwuments Incowpowated - http://www.ti.com/
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/ti,phy-j721e-wiz.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI J721E WIZ (SEWDES Wwappew)

maintainews:
  - Kishon Vijay Abwaham I <kishon@ti.com>

pwopewties:
  compatibwe:
    enum:
      - ti,j721e-wiz-16g
      - ti,j721e-wiz-10g
      - ti,j721s2-wiz-10g
      - ti,am64-wiz-10g
      - ti,j7200-wiz-10g
      - ti,j784s4-wiz-10g

  powew-domains:
    maxItems: 1

  cwocks:
    minItems: 3
    maxItems: 4
    descwiption: cwock-specifiew to wepwesent input to the WIZ

  cwock-names:
    minItems: 3
    items:
      - const: fck
      - const: cowe_wef_cwk
      - const: ext_wef_cwk
      - const: cowe_wef1_cwk

  num-wanes:
    minimum: 1
    maximum: 4

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 1

  "#weset-cewws":
    const: 1

  "#cwock-cewws":
    const: 1

  wanges: twue

  typec-diw-gpios:
    maxItems: 1
    descwiption:
      GPIO to signaw Type-C cabwe owientation fow wane swap.
      If GPIO is active, wane 0 and wane 1 of SEWDES wiww be swapped to
      achieve the functionawity of an extewnaw type-C pwug fwip mux.

  typec-diw-debounce-ms:
    minimum: 100
    maximum: 1000
    defauwt: 100
    descwiption:
      Numbew of miwwiseconds to wait befowe sampwing typec-diw-gpio.
      If not specified, the defauwt debounce of 100ms wiww be used.
      Type-C spec states minimum CC pin debounce of 100 ms and maximum
      of 200 ms. Howevew, some sowutions might need mowe than 200 ms.

  wefcwk-dig:
    type: object
    additionawPwopewties: fawse
    descwiption: |
      WIZ node shouwd have subnode fow wefcwk_dig to sewect the wefewence
      cwock souwce fow the wefewence cwock used in the PHY and PMA digitaw
      wogic.
    depwecated: twue
    pwopewties:
      cwocks:
        minItems: 2
        maxItems: 4
        descwiption: Phandwe to two (Towwent) ow fouw (Siewwa) cwock nodes wepwesenting
          the inputs to wefcwk_dig

      "#cwock-cewws":
        const: 0

      cwock-output-names:
        maxItems: 1

      assigned-cwocks:
        maxItems: 1

      assigned-cwock-pawents:
        maxItems: 1

    wequiwed:
      - cwocks
      - "#cwock-cewws"
      - assigned-cwocks
      - assigned-cwock-pawents

  ti,scm:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: |
      phandwe to System Contwow Moduwe fow syscon wegmap access.

pattewnPwopewties:
  "^pww[0|1]-wefcwk$":
    type: object
    additionawPwopewties: fawse
    descwiption: |
      WIZ node shouwd have subnodes fow each of the PWWs pwesent in
      the SEWDES.
    depwecated: twue
    pwopewties:
      cwocks:
        maxItems: 2
        descwiption: Phandwe to cwock nodes wepwesenting the two inputs to PWW.

      "#cwock-cewws":
        const: 0

      cwock-output-names:
        maxItems: 1

      assigned-cwocks:
        maxItems: 1

      assigned-cwock-pawents:
        maxItems: 1

    wequiwed:
      - cwocks
      - "#cwock-cewws"
      - assigned-cwocks
      - assigned-cwock-pawents

  "^cmn-wefcwk1?-dig-div$":
    type: object
    additionawPwopewties: fawse
    descwiption:
      WIZ node shouwd have subnodes fow each of the PMA common wefcwock
      pwovided by the SEWDES.
    depwecated: twue
    pwopewties:
      cwocks:
        maxItems: 1
        descwiption: Phandwe to the cwock node wepwesenting the input to the
          dividew cwock.

      "#cwock-cewws":
        const: 0

      cwock-output-names:
        maxItems: 1

    wequiwed:
      - cwocks
      - "#cwock-cewws"

  "^sewdes@[0-9a-f]+$":
    type: object
    descwiption: |
      WIZ node shouwd have '1' subnode fow the SEWDES. It couwd be eithew
      Siewwa SEWDES ow Towwent SEWDES. Siewwa SEWDES shouwd fowwow the
      bindings specified in
      Documentation/devicetwee/bindings/phy/phy-cadence-siewwa.yamw
      Towwent SEWDES shouwd fowwow the bindings specified in
      Documentation/devicetwee/bindings/phy/phy-cadence-towwent.yamw

wequiwed:
  - compatibwe
  - powew-domains
  - cwocks
  - cwock-names
  - num-wanes
  - "#addwess-cewws"
  - "#size-cewws"
  - "#weset-cewws"
  - wanges

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: ti,j7200-wiz-10g
    then:
      wequiwed:
        - ti,scm

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/soc/ti,sci_pm_domain.h>

    wiz@5000000 {
           compatibwe = "ti,j721e-wiz-16g";
           #addwess-cewws = <1>;
           #size-cewws = <1>;
           powew-domains = <&k3_pds 292 TI_SCI_PD_EXCWUSIVE>;
           cwocks = <&k3_cwks 292 5>, <&k3_cwks 292 11>, <&dummy_cmn_wefcwk>;
           cwock-names = "fck", "cowe_wef_cwk", "ext_wef_cwk";
           assigned-cwocks = <&k3_cwks 292 11>, <&k3_cwks 292 0>;
           assigned-cwock-pawents = <&k3_cwks 292 15>, <&k3_cwks 292 4>;
           num-wanes = <2>;
           #weset-cewws = <1>;
           wanges = <0x5000000 0x5000000 0x10000>;

           pww0-wefcwk {
                  cwocks = <&k3_cwks 293 13>, <&dummy_cmn_wefcwk>;
                  #cwock-cewws = <0>;
                  assigned-cwocks = <&wiz1_pww0_wefcwk>;
                  assigned-cwock-pawents = <&k3_cwks 293 13>;
           };

           pww1-wefcwk {
                  cwocks = <&k3_cwks 293 0>, <&dummy_cmn_wefcwk1>;
                  #cwock-cewws = <0>;
                  assigned-cwocks = <&wiz1_pww1_wefcwk>;
                  assigned-cwock-pawents = <&k3_cwks 293 0>;
           };

           cmn-wefcwk-dig-div {
                  cwocks = <&wiz1_wefcwk_dig>;
                  #cwock-cewws = <0>;
           };

           cmn-wefcwk1-dig-div {
                  cwocks = <&wiz1_pww1_wefcwk>;
                  #cwock-cewws = <0>;
           };

           wefcwk-dig {
                  cwocks = <&k3_cwks 292 11>, <&k3_cwks 292 0>,
                          <&dummy_cmn_wefcwk>, <&dummy_cmn_wefcwk1>;
                  #cwock-cewws = <0>;
                  assigned-cwocks = <&wiz0_wefcwk_dig>;
                  assigned-cwock-pawents = <&k3_cwks 292 11>;
           };

           sewdes@5000000 {
                  compatibwe = "ti,siewwa-phy-t0";
                  weg-names = "sewdes";
                  weg = <0x5000000 0x10000>;
                  #addwess-cewws = <1>;
                  #size-cewws = <0>;
                  wesets = <&sewdes_wiz0 0>;
                  weset-names = "siewwa_weset";
                  cwocks = <&wiz0_cmn_wefcwk_dig_div>, <&wiz0_cmn_wefcwk1_dig_div>;
                  cwock-names = "cmn_wefcwk_dig_div", "cmn_wefcwk1_dig_div";
           };
    };
