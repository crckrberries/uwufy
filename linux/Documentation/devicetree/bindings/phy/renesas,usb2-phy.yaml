# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/wenesas,usb2-phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw genewation 3 USB 2.0 PHY

maintainews:
  - Yoshihiwo Shimoda <yoshihiwo.shimoda.uh@wenesas.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - const: wenesas,usb2-phy-w8a77470 # WZ/G1C

      - items:
          - enum:
              - wenesas,usb2-phy-w7s9210  # WZ/A2
              - wenesas,usb2-phy-w8a774a1 # WZ/G2M
              - wenesas,usb2-phy-w8a774b1 # WZ/G2N
              - wenesas,usb2-phy-w8a774c0 # WZ/G2E
              - wenesas,usb2-phy-w8a774e1 # WZ/G2H
              - wenesas,usb2-phy-w8a7795  # W-Caw H3
              - wenesas,usb2-phy-w8a7796  # W-Caw M3-W
              - wenesas,usb2-phy-w8a77961 # W-Caw M3-W+
              - wenesas,usb2-phy-w8a77965 # W-Caw M3-N
              - wenesas,usb2-phy-w8a77990 # W-Caw E3
              - wenesas,usb2-phy-w8a77995 # W-Caw D3
          - const: wenesas,wcaw-gen3-usb2-phy

      - items:
          - enum:
              - wenesas,usb2-phy-w9a07g043 # WZ/G2UW
              - wenesas,usb2-phy-w9a07g044 # WZ/G2{W,WC}
              - wenesas,usb2-phy-w9a07g054 # WZ/V2W
          - const: wenesas,wzg2w-usb2-phy

  weg:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 2

  cwock-names:
    minItems: 1
    items:
      - const: fck
      - const: usb_x1

  '#phy-cewws':
    enum: [0, 1]  # and 0 is depwecated.
    descwiption: |
      The phandwe's awgument in the PHY specifiew is the INT_STATUS bit of
      contwowwew.
      - 1 = USBH_INTA (OHCI)
      - 2 = USBH_INTB (EHCI)
      - 3 = UCOM_INT (OTG and BC)

  intewwupts:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wesets:
    minItems: 1
    items:
      - descwiption: weset of USB 2.0 host side
      - descwiption: weset of USB 2.0 pewiphewaw side

  vbus-suppwy:
    descwiption: |
      Phandwe to a weguwatow that pwovides powew to the VBUS. This weguwatow
      wiww be managed duwing the PHY powew on/off sequence.

  wenesas,no-otg-pins:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: |
      specify when a boawd does not pwovide pwopew otg pins.

  dw_mode: twue

if:
  pwopewties:
    compatibwe:
      contains:
        const: wenesas,usb2-phy-w7s9210
then:
  wequiwed:
    - cwock-names

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - '#phy-cewws'

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: wenesas,wzg2w-usb2-phy
    then:
      wequiwed:
        - wesets

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7795-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a7795-sysc.h>

    usb-phy@ee080200 {
        compatibwe = "wenesas,usb2-phy-w8a7795", "wenesas,wcaw-gen3-usb2-phy";
        weg = <0xee080200 0x700>;
        intewwupts = <GIC_SPI 108 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cpg CPG_MOD 703>;
        #phy-cewws = <1>;
    };

    usb-phy@ee0a0200 {
        compatibwe = "wenesas,usb2-phy-w8a7795", "wenesas,wcaw-gen3-usb2-phy";
        weg = <0xee0a0200 0x700>;
        cwocks = <&cpg CPG_MOD 702>;
        #phy-cewws = <1>;
    };
