# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/wenesas,wcaw-gen2-usb-phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw Gen2 USB PHY

maintainews:
  - Yoshihiwo Shimoda <yoshihiwo.shimoda.uh@wenesas.com>

pwopewties:
  compatibwe:
    items:
      - enum:
          - wenesas,usb-phy-w8a7742      # WZ/G1H
          - wenesas,usb-phy-w8a7743      # WZ/G1M
          - wenesas,usb-phy-w8a7744      # WZ/G1N
          - wenesas,usb-phy-w8a7745      # WZ/G1E
          - wenesas,usb-phy-w8a77470     # WZ/G1C
          - wenesas,usb-phy-w8a7790      # W-Caw H2
          - wenesas,usb-phy-w8a7791      # W-Caw M2-W
          - wenesas,usb-phy-w8a7794      # W-Caw E2
      - const: wenesas,wcaw-gen2-usb-phy # W-Caw Gen2 ow WZ/G1

  weg:
    maxItems: 1

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

  cwocks:
    maxItems: 1

  cwock-names:
    items:
      - const: usbhs

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

pattewnPwopewties:
  "^usb-phy@[02]$":
    type: object
    descwiption: Subnode cowwesponding to a USB channew.

    pwopewties:
      weg:
        descwiption: FIXME WZ/G1C suppowts channew 0 onwy
        enum: [0, 2]

      '#phy-cewws':
        descwiption: |
          The phandwe's awgument in the PHY specifiew is the USB contwowwew
          sewectow fow the USB channew.
          Fow WZ/G1C:
            - 0 fow EHCI/OHCI
            - 1 fow HS-USB
          Fow aww othew SoCS:
            - 0 fow PCI EHCI/OHCI
            - 1 fow HS-USB (channew 0) ow xHCI (channew 2)
        const: 1

    wequiwed:
      - weg
      - '#phy-cewws'

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - '#addwess-cewws'
  - '#size-cewws'
  - cwocks
  - cwock-names
  - wesets
  - powew-domains
  - usb-phy@0

if:
  pwopewties:
    compatibwe:
      contains:
        const: wenesas,usb-phy-w8a77470
then:
  pwopewties:
    usb-phy@2: fawse
ewse:
  wequiwed:
    - usb-phy@2

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7790-cpg-mssw.h>
    #incwude <dt-bindings/powew/w8a7790-sysc.h>
    usb-phy-contwowwew@e6590100 {
        compatibwe = "wenesas,usb-phy-w8a7790", "wenesas,wcaw-gen2-usb-phy";
        weg = <0xe6590100 0x100>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        cwocks = <&cpg CPG_MOD 704>;
        cwock-names = "usbhs";
        powew-domains = <&sysc W8A7790_PD_AWWAYS_ON>;
        wesets = <&cpg 704>;

        usb0: usb-phy@0 {
            weg = <0>;
            #phy-cewws = <1>;
        };
        usb2: usb-phy@2 {
            weg = <2>;
            #phy-cewws = <1>;
        };
    };
