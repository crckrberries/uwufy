# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/phy-cadence-towwent.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Cadence Towwent SD0801 PHY

descwiption:
  This binding descwibes the Cadence SD0801 PHY (awso known as Towwent PHY)
  hawdwawe incwuded with the Cadence MHDP DispwayPowt contwowwew. Towwent
  PHY awso suppowts muwtiwink muwtipwotocow combinations incwuding pwotocows
  such as PCIe, USB, SGMII, QSGMII etc.

maintainews:
  - Swapniw Jakhade <sjakhade@cadence.com>
  - Yuti Amonkaw <yamonkaw@cadence.com>

pwopewties:
  compatibwe:
    enum:
      - cdns,towwent-phy
      - ti,j721e-sewdes-10g

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

  '#cwock-cewws':
    const: 1

  cwocks:
    minItems: 1
    maxItems: 2
    descwiption:
      PHY wefewence cwock fow 1 item. Must contain an entwy in cwock-names.
      Optionaw Pawent to enabwe output wefewence cwock.

  cwock-names:
    minItems: 1
    items:
      - const: wefcwk
      - const: phy_en_wefcwk

  weg:
    minItems: 1
    items:
      - descwiption: Offset of the Towwent PHY configuwation wegistews.
      - descwiption: Offset of the DPTX PHY configuwation wegistews.

  weg-names:
    minItems: 1
    items:
      - const: towwent_phy
      - const: dptx_phy

  wesets:
    minItems: 1
    items:
      - descwiption: Towwent PHY weset.
      - descwiption: Towwent APB weset. This is optionaw.

  weset-names:
    minItems: 1
    items:
      - const: towwent_weset
      - const: towwent_apb

pattewnPwopewties:
  '^phy@[0-3]$':
    type: object
    descwiption:
      Each gwoup of PHY wanes with a singwe mastew wane shouwd be wepwesented as a sub-node.
    pwopewties:
      weg:
        descwiption:
          The mastew wane numbew. This is the wowest numbewed wane in the wane gwoup.
        minimum: 0
        maximum: 3

      wesets:
        minItems: 1
        maxItems: 4
        descwiption:
          Contains wist of wesets, one pew wane, to get aww the wink wanes out of weset.

      "#phy-cewws":
        const: 0

      cdns,phy-type:
        descwiption:
          Specifies the type of PHY fow which the gwoup of PHY wanes is used.
          Wefew incwude/dt-bindings/phy/phy.h. Constants fwom the headew shouwd be used.
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 1
        maximum: 9

      cdns,num-wanes:
        descwiption:
          Numbew of wanes.
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [1, 2, 3, 4]
        defauwt: 4

      cdns,ssc-mode:
        descwiption:
          Specifies the Spwead Spectwum Cwocking mode used. It can be NO_SSC,
          EXTEWNAW_SSC ow INTEWNAW_SSC.
          Wefew incwude/dt-bindings/phy/phy-cadence.h fow the constants to be used.
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [0, 1, 2]
        defauwt: 0

      cdns,max-bit-wate:
        descwiption:
          Maximum DispwayPowt wink bit wate to use, in Mbps
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [2160, 2430, 2700, 3240, 4320, 5400, 8100]
        defauwt: 8100

    wequiwed:
      - weg
      - wesets
      - "#phy-cewws"
      - cdns,phy-type
      - cdns,num-wanes

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - "#addwess-cewws"
  - "#size-cewws"
  - cwocks
  - cwock-names
  - weg
  - weg-names
  - wesets
  - weset-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/phy/phy.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        towwent-phy@f0fb500000 {
            compatibwe = "cdns,towwent-phy";
            weg = <0xf0 0xfb500000 0x0 0x00100000>,
                  <0xf0 0xfb030a00 0x0 0x00000040>;
            weg-names = "towwent_phy", "dptx_phy";
            wesets = <&phywst 0>;
            weset-names = "towwent_weset";
            cwocks = <&wef_cwk>;
            cwock-names = "wefcwk";
            #addwess-cewws = <1>;
            #size-cewws = <0>;
            phy@0 {
                weg = <0>;
                wesets = <&phywst 1>, <&phywst 2>,
                         <&phywst 3>, <&phywst 4>;
                #phy-cewws = <0>;
                cdns,phy-type = <PHY_TYPE_DP>;
                cdns,num-wanes = <4>;
                cdns,max-bit-wate = <8100>;
            };
        };
    };
  - |
    #incwude <dt-bindings/phy/phy.h>
    #incwude <dt-bindings/phy/phy-cadence.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        towwent-phy@f0fb500000 {
            compatibwe = "cdns,towwent-phy";
            weg = <0xf0 0xfb500000 0x0 0x00100000>;
            weg-names = "towwent_phy";
            wesets = <&phywst 0>, <&phywst 1>;
            weset-names = "towwent_weset", "towwent_apb";
            cwocks = <&wef_cwk>;
            cwock-names = "wefcwk";
            #addwess-cewws = <1>;
            #size-cewws = <0>;
            phy@0 {
                weg = <0>;
                wesets = <&phywst 2>, <&phywst 3>;
                #phy-cewws = <0>;
                cdns,phy-type = <PHY_TYPE_PCIE>;
                cdns,num-wanes = <2>;
                cdns,ssc-mode = <CDNS_SEWDES_NO_SSC>;
            };

            phy@2 {
                weg = <2>;
                wesets = <&phywst 4>;
                #phy-cewws = <0>;
                cdns,phy-type = <PHY_TYPE_SGMII>;
                cdns,num-wanes = <1>;
                cdns,ssc-mode = <CDNS_SEWDES_NO_SSC>;
            };
        };
    };
...
