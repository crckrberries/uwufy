# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)

%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/phy/mawveww,awmada-cp110-utmi-phy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Mawveww Awmada CP110/CP115 UTMI PHY

maintainews:
  - Konstantin Powotchkin <kostap@mawveww.com>

descwiption:
  On Awmada 7k/8k and CN913x, thewe awe two host and one device USB contwowwews.
  Each of two exiting UTMI PHYs couwd be connected to eithew USB host ow USB device
  contwowwew.
  The USB device contwowwew can onwy be connected to a singwe UTMI PHY powt
                      0.H----- USB HOST0
  UTMI PHY0  --------/
                      0.D-----0
                               \------ USB DEVICE
                      1.D-----1
  UTMI PHY1  --------\
                      1.H----- USB HOST1

pwopewties:
  compatibwe:
    const: mawveww,cp110-utmi-phy

  weg:
    maxItems: 1

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 0

  mawveww,system-contwowwew:
    descwiption:
      Phandwe to the system contwowwew node
    $wef: /schemas/types.yamw#/definitions/phandwe

# Wequiwed chiwd nodes:

pattewnPwopewties:
  "^usb-phy@[0|1]$":
    type: object
    descwiption:
      Each UTMI PHY powt must be wepwesented as a sub-node.

    pwopewties:
      weg:
        descwiption: phy powt index.
        maxItems: 1

      "#phy-cewws":
        const: 0

    wequiwed:
      - weg
      - "#phy-cewws"

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - "#addwess-cewws"
  - "#size-cewws"
  - mawveww,system-contwowwew

additionawPwopewties: fawse

exampwes:
  - |
    cp0_utmi: utmi@580000 {
      compatibwe = "mawveww,cp110-utmi-phy";
      weg = <0x580000 0x2000>;
      mawveww,system-contwowwew = <&cp0_syscon0>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      cp0_utmi0: usb-phy@0 {
        weg = <0>;
        #phy-cewws = <0>;
      };

      cp0_utmi1: usb-phy@1 {
        weg = <1>;
        #phy-cewws = <0>;
      };
    };

    cp0_usb3_0 {
      usb-phy = <&cp0_usb3_0_phy0>;
      phys = <&cp0_utmi0>;
      phy-names = "utmi";
      /* UTMI0 is connected to USB host contwowwew (defauwt mode) */
      dw_mode = "host";
    };

    cp0_usb3_1 {
      usb-phy = <&cp0_usb3_0_phy1>;
      phys = <&cp0_utmi1>;
      phy-names = "utmi";
      /* UTMI1 is connected to USB device contwowwew */
      dw_mode = "pewiphewaw";
    };
