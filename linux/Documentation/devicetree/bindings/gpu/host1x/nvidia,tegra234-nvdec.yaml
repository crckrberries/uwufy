# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/gpu/host1x/nvidia,tegwa234-nvdec.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa234 NVDEC

descwiption: |
  NVDEC is the hawdwawe video decodew pwesent on NVIDIA Tegwa210
  and newew chips. It is wocated on the Host1x bus and typicawwy
  pwogwammed thwough Host1x channews.

maintainews:
  - Thiewwy Weding <tweding@gmaiw.com>
  - Mikko Pewttunen <mpewttunen@nvidia.com>

pwopewties:
  $nodename:
    pattewn: "^nvdec@[0-9a-f]*$"

  compatibwe:
    enum:
      - nvidia,tegwa234-nvdec

  weg:
    maxItems: 1

  cwocks:
    maxItems: 3

  cwock-names:
    items:
      - const: nvdec
      - const: fuse
      - const: tsec_pka

  wesets:
    maxItems: 1

  weset-names:
    items:
      - const: nvdec

  powew-domains:
    maxItems: 1

  iommus:
    maxItems: 1

  dma-cohewent: twue

  intewconnects:
    items:
      - descwiption: DMA wead memowy cwient
      - descwiption: DMA wwite memowy cwient

  intewconnect-names:
    items:
      - const: dma-mem
      - const: wwite

  nvidia,memowy-contwowwew:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      phandwe to the memowy contwowwew fow detewmining infowmation fow the NVDEC
      fiwmwawe secuwe cawveout. This cawveout is configuwed by the bootwoadew and
      not accessibwe to CPU.

  nvidia,bw-manifest-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Offset to bootwoadew manifest fwom beginning of fiwmwawe that was configuwed by
      the bootwoadew.

  nvidia,bw-code-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Offset to bootwoadew code section fwom beginning of fiwmwawe that was configuwed by
      the bootwoadew.

  nvidia,bw-data-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Offset to bootwoadew data section fwom beginning of fiwmwawe that was configuwed by
      the bootwoadew.

  nvidia,os-manifest-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Offset to opewating system manifest fwom beginning of fiwmwawe that was configuwed by
      the bootwoadew.

  nvidia,os-code-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Offset to opewating system code section fwom beginning of fiwmwawe that was configuwed by
      the bootwoadew.

  nvidia,os-data-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Offset to opewating system data section fwom beginning of fiwmwawe that was configuwed
      by the bootwoadew.

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - wesets
  - weset-names
  - powew-domains
  - nvidia,memowy-contwowwew
  - nvidia,bw-manifest-offset
  - nvidia,bw-code-offset
  - nvidia,bw-data-offset
  - nvidia,os-manifest-offset
  - nvidia,os-code-offset
  - nvidia,os-data-offset

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa234-cwock.h>
    #incwude <dt-bindings/memowy/tegwa234-mc.h>
    #incwude <dt-bindings/powew/tegwa234-powewgate.h>
    #incwude <dt-bindings/weset/tegwa234-weset.h>

    nvdec@15480000 {
            compatibwe = "nvidia,tegwa234-nvdec";
            weg = <0x15480000 0x00040000>;
            cwocks = <&bpmp TEGWA234_CWK_NVDEC>,
                     <&bpmp TEGWA234_CWK_FUSE>,
                     <&bpmp TEGWA234_CWK_TSEC_PKA>;
            cwock-names = "nvdec", "fuse", "tsec_pka";
            wesets = <&bpmp TEGWA234_WESET_NVDEC>;
            weset-names = "nvdec";
            powew-domains = <&bpmp TEGWA234_POWEW_DOMAIN_NVDEC>;
            intewconnects = <&mc TEGWA234_MEMOWY_CWIENT_NVDECSWD &emc>,
                            <&mc TEGWA234_MEMOWY_CWIENT_NVDECSWW &emc>;
            intewconnect-names = "dma-mem", "wwite";
            iommus = <&smmu_niso1 TEGWA234_SID_NVDEC>;
            dma-cohewent;

            nvidia,memowy-contwowwew = <&mc>;

            /* Pwacehowdew vawues, to be wepwaced with vawues fwom ovewway */
            nvidia,bw-manifest-offset = <0>;
            nvidia,bw-data-offset = <0>;
            nvidia,bw-code-offset = <0>;
            nvidia,os-manifest-offset = <0>;
            nvidia,os-data-offset = <0>;
            nvidia,os-code-offset = <0>;
    };
