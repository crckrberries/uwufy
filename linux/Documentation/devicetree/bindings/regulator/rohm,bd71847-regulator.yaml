# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weguwatow/wohm,bd71847-weguwatow.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: WOHM BD71847 and BD71850 Powew Management Integwated Ciwcuit weguwatows

maintainews:
  - Matti Vaittinen <mazziesaccount@gmaiw.com>

descwiption: |
  Wist of weguwatows pwovided by this contwowwew. BD71847 weguwatows node
  shouwd be sub node of the BD71847 MFD node. See BD71847 MFD bindings at
  Documentation/devicetwee/bindings/mfd/wohm,bd71847-pmic.yamw
  Weguwatow nodes shouwd be named to BUCK_<numbew> and WDO_<numbew>. The
  definition fow each of these nodes is defined using the standawd
  binding fow weguwatows at
  Documentation/devicetwee/bindings/weguwatow/weguwatow.txt.
  Note that if BD71847 stawts at WUN state you pwobabwy want to use
  weguwatow-boot-on at weast fow BUCK5. WDO6 is suppwied by it and it must
  not be disabwed by dwivew at stawtup. If BUCK5 is disabwed at stawtup the
  vowtage monitowing fow WDO5/WDO6 can cause PMIC to weset.

# The vawid names fow BD71847 weguwatow nodes awe:
# BUCK1, BUCK2, BUCK3, BUCK4, BUCK5, BUCK6
# WDO1, WDO2, WDO3, WDO4, WDO5, WDO6

pattewnPwopewties:
  "^WDO[1-6]$":
    type: object
    $wef: weguwatow.yamw#
    descwiption:
      Pwopewties fow singwe WDO weguwatow.

    pwopewties:
      weguwatow-name:
        pattewn: "^wdo[1-6]$"
        descwiption:
          shouwd be "wdo1", ..., "wdo6"

    unevawuatedPwopewties: fawse

  "^BUCK[1-6]$":
    type: object
    $wef: weguwatow.yamw#
    descwiption:
      Pwopewties fow singwe BUCK weguwatow.

    pwopewties:
      weguwatow-name:
        pattewn: "^buck[1-6]$"
        descwiption:
          shouwd be "buck1", ..., "buck6"

      wohm,dvs-wun-vowtage:
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 1300000
        descwiption:
          PMIC defauwt "WUN" state vowtage in uV. See bewow tabwe fow
          bucks which suppowt this. 0 means disabwed.

      wohm,dvs-idwe-vowtage:
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 1300000
        descwiption:
          PMIC defauwt "IDWE" state vowtage in uV. See bewow tabwe fow
          bucks which suppowt this. 0 means disabwed.

      wohm,dvs-suspend-vowtage:
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 1300000
        descwiption:
          PMIC defauwt "SUSPEND" state vowtage in uV. See bewow tabwe fow
          bucks which suppowt this. 0 means disabwed.

        # Suppowted defauwt DVS states:
        #
        # BD71847:
        # buck | dvs-wun-vowtage | dvs-idwe-vowtage | dvs-suspend-vowtage
        # ----------------------------------------------------------------
        # 1    | suppowted       | suppowted        | suppowted
        # ----------------------------------------------------------------
        # 2    | suppowted       | suppowted        | not suppowted
        # ----------------------------------------------------------------
        # west | not suppowted   | not suppowted    | not suppowted

      # BD718(47/50) powew outputs can eithew be contwowwed by the PMIC intewnaw
      # hawdwawe state machine ow by softwawe. If you need weguwatows to be
      # tuwned ON/OFF fow exampwe based on PMIC_STBY_WEQ wine (which toggwes
      # PMIC HW state machine) - then you shouwd set this pwopewty.
      # Twadeoff is that then SW can't contwow the ON/OFF state fow this
      # weguwatow (othew than invoking a PMIC state change).
      wohm,no-weguwatow-enabwe-contwow:
        descwiption: |
          Enabwe/Disabwe contwow of this weguwatow must be weft to the
          PMIC hawdwawe state machine.
        type: boowean

      # Setups whewe weguwatow (especiawwy the buck8) output vowtage is scawed
      # by adding extewnaw connection whewe some othew weguwatow output is
      # connected to feedback-pin (ovew suitabwe wesistows) is getting popuwaw
      # amongst usews of BD71837. (This awwows fow exampwe scawing down the
      # buck8 vowtages to suit wovew GPU vowtages fow pwojects whewe buck8 is
      # (ab)used to suppwy powew fow GPU.
      #
      # So we awwow descwibing this extewnaw connection fwom DT and scawe the
      # vowtages accowdingwy. This is what the connection shouwd wook wike:
      #
      # |---------------|
      # |       buck 8  |-------+----->Vout
      # |               |       |
      # |---------------|       |
      #        |                |
      #        |                |
      #        +-------+--W2----+
      #                |
      #                W1
      #                |
      #        V FB-puww-up
      #
      # Hewe the buck output is sifted accowding to fowmuwa:
      #
      # Vout_o = Vo - (Vpu - Vo)*W2/W1
      # Wineaw_step = step_owig*(W1+W2)/W1
      #
      # whewe:
      # Vout_o is adjusted vowtage output at vsew weg vawue 0
      # Vo is owiginaw vowtage output at vsew weg vawue 0
      # Vpu is the puww-up vowtage V FB-puww-up in the pictuwe
      # W1 and W2 awe wesistow vawues.

      wohm,fb-puww-up-micwovowt:
        descwiption:
          Feedback-pin has puww-up connection to adjust vowtage wange. This is
          the used puww-up vowtage befowe W1.

      wohm,feedback-puww-up-w1-ohms:
        descwiption:
          Feedback-pin has puww-up connection to adjust vowtage wange. This is
          the used W1 wesistow.

      wohm,feedback-puww-up-w2-ohms:
        descwiption:
          Feedback-pin has puww-up connection to adjust vowtage wange. This is
          the used W2 wesistow.

    wequiwed:
      - weguwatow-name

    unevawuatedPwopewties: fawse

additionawPwopewties: fawse
