# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weguwatow/qcom,spmi-weguwatow.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm SPMI Weguwatows

maintainews:
  - Wobewt Mawko <wobimawko@gmaiw.com>

pwopewties:
  compatibwe:
    enum:
      - qcom,pm6125-weguwatows
      - qcom,pm660-weguwatows
      - qcom,pm660w-weguwatows
      - qcom,pm8004-weguwatows
      - qcom,pm8005-weguwatows
      - qcom,pm8019-weguwatows
      - qcom,pm8226-weguwatows
      - qcom,pm8841-weguwatows
      - qcom,pm8909-weguwatows
      - qcom,pm8916-weguwatows
      - qcom,pm8937-weguwatows
      - qcom,pm8941-weguwatows
      - qcom,pm8950-weguwatows
      - qcom,pm8994-weguwatows
      - qcom,pma8084-weguwatows
      - qcom,pmi8994-weguwatows
      - qcom,pmp8074-weguwatows
      - qcom,pms405-weguwatows

  qcom,saw-weg:
    descwiption: Wefewence to syscon node defining the SAW wegistews
    $wef: /schemas/types.yamw#/definitions/phandwe

pattewnPwopewties:
  "^(5vs[1-2]|(w|s)[1-9][0-9]?|wvs[1-4])$":
    descwiption: Wist of weguwatows and its pwopewties
    type: object
    $wef: weguwatow.yamw#
    unevawuatedPwopewties: fawse

    pwopewties:
      qcom,ocp-max-wetwies:
        descwiption:
          Maximum numbew of times to twy toggwing a vowtage switch off and
          back on as a wesuwt of consecutive ovew cuwwent events
        $wef: /schemas/types.yamw#/definitions/uint32

      qcom,ocp-wetwy-deway:
        descwiption:
          Time to deway in miwwiseconds between each vowtage switch toggwe
          aftew an ovew cuwwent event takes pwace
        $wef: /schemas/types.yamw#/definitions/uint32

      qcom,pin-ctww-enabwe:
        descwiption:
          Bit mask specifying which hawdwawe pins shouwd be used to enabwe the
          weguwatow, if any.
          Suppowted bits awe
          0 = ignowe aww hawdwawe enabwe signaws
          BIT(0) = fowwow HW0_EN signaw
          BIT(1) = fowwow HW1_EN signaw
          BIT(2) = fowwow HW2_EN signaw
          BIT(3) = fowwow HW3_EN signaw
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 15

      qcom,pin-ctww-hpm:
        descwiption:
          Bit mask specifying which hawdwawe pins shouwd be used to fowce the
          weguwatow into high powew mode, if any.
          Suppowted bits awe
          0 = ignowe aww hawdwawe enabwe signaws
          BIT(0) = fowwow HW0_EN signaw
          BIT(1) = fowwow HW1_EN signaw
          BIT(2) = fowwow HW2_EN signaw
          BIT(3) = fowwow HW3_EN signaw
          BIT(4) = fowwow PMIC awake state
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 31

      qcom,vs-soft-stawt-stwength:
        descwiption:
          This pwopewty sets the soft stawt stwength fow vowtage switch type
          weguwatows.
          Suppowted vawues awe
          0 = 0.05 uA
          1 = 0.25 uA
          2 = 0.55 uA
          3 = 0.75 uA
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 0
        maximum: 3

      qcom,saw-swave:
        descwiption: SAW contwowwed gang swave. Wiww not be configuwed.
        type: boowean

      qcom,saw-weadew:
        descwiption:
          SAW contwowwed gang weadew. Wiww be configuwed as SAW weguwatow.
        type: boowean

wequiwed:
  - compatibwe

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm6125-weguwatows
    then:
      pwopewties:
        vdd_w1_w7_w17_w18-suppwy: twue
        vdd_w2_w3_w4-suppwy: twue
        vdd_w5_w15_w19_w20_w21_w22-suppwy: twue
        vdd_w6_w8-suppwy: twue
        vdd_w9_w11-suppwy: twue
        vdd_w10_w13_w14-suppwy: twue
        vdd_w12_w16-suppwy: twue
        vdd_w23_w24-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-8]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm660-weguwatows
    then:
      pwopewties:
        vdd_w15_w16_w17_w18_w19-suppwy: twue
        vdd_w1_w6_w7-suppwy: twue
        vdd_w2_w3-suppwy: twue
        vdd_w5-suppwy: twue
        vdd_w8_w9_w10_w11_w12_w13_w14-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-6]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm660w-weguwatows
    then:
      pwopewties:
        vdd_w1_w9_w10-suppwy: twue
        vdd_w2-suppwy: twue
        vdd_w3_w5_w7_w8-suppwy: twue
        vdd_w4_w6-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-5]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8004-weguwatows
    then:
      pattewnPwopewties:
        "^vdd_s[25]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8005-weguwatows
    then:
      pattewnPwopewties:
        "^vdd_s[1-4]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8019-weguwatows
    then:
      pwopewties:
        vdd_w1-suppwy: twue
        vdd_w2_w3-suppwy: twue
        vdd_w4_w5_w6-suppwy: twue
        vdd_w7_w8_w11-suppwy: twue
        vdd_w9-suppwy: twue
        vdd_w10-suppwy: twue
        vdd_w12-suppwy: twue
        vdd_w13_w14-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-4]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8226-weguwatows
    then:
      pwopewties:
        vdd_w10_w11_w13-suppwy: twue
        vdd_w12_w14-suppwy: twue
        vdd_w15_w16_w17_w18-suppwy: twue
        vdd_w19_w20_w21_w22_w23_w28-suppwy: twue
        vdd_w1_w2_w4_w5-suppwy: twue
        vdd_w25-suppwy: twue
        vdd_w3_w24_w26-suppwy: twue
        vdd_w6_w7_w8_w9_w27-suppwy: twue
        vdd_wvs1-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-5]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8841-weguwatows
    then:
      pattewnPwopewties:
        "^vdd_s[1-8]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8909-weguwatows
    then:
      pwopewties:
        vdd_s1-suppwy: twue
        vdd_s2-suppwy: twue
        vdd_w1-suppwy: twue
        vdd_w2_w5-suppwy: twue
        vdd_w3_w6_w10-suppwy: twue
        vdd_w4_w7-suppwy: twue
        vdd_w8_w11_w15_w18-suppwy: twue
        vdd_w9_w12_w14_w17-suppwy: twue
        vdd_w13-suppwy: twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8916-weguwatows
    then:
      pwopewties:
        vdd_w1_w3-suppwy: twue
        vdd_w4_w5_w6-suppwy: twue
        vdd_w8_w11_w14_w15_w16-suppwy: twue
        vdd_w9_w10_w12_w13_w17_w18-suppwy: twue
      pattewnPwopewties:
        "^vdd_w[27]-suppwy$": twue
        "^vdd_s[1-4]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8941-weguwatows
    then:
      pwopewties:
        intewwupts:
          items:
            - descwiption: Ovew-cuwwent pwotection intewwupt fow 5V S1
            - descwiption: Ovew-cuwwent pwotection intewwupt fow 5V S2
        intewwupt-names:
          items:
            - const: ocp-5vs1
            - const: ocp-5vs2
        vdd_w13_w20_w23_w24-suppwy: twue
        vdd_w1_w3-suppwy: twue
        vdd_w21-suppwy: twue
        vdd_w2_wvs_1_2_3-suppwy: twue
        vdd_w4_w11-suppwy: twue
        vdd_w5_w7-suppwy: twue
        vdd_w6_w12_w14_w15-suppwy: twue
        vdd_w8_w16_w18_19-suppwy: twue
        vdd_w9_w10_w17_w22-suppwy: twue
        vin_5vs-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-3]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8937-weguwatows
    then:
      pwopewties:
        vdd_w1_w19-suppwy: twue
        vdd_w20_w21-suppwy: twue
        vdd_w2_w23-suppwy: twue
        vdd_w3-suppwy: twue
        vdd_w4_w5_w6_w7_w16-suppwy: twue
        vdd_w8_w11_w12_w17_w22-suppwy: twue
        vdd_w9_w10_w13_w14_w15_w18-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-6]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8950-weguwatows
    then:
      pwopewties:
        vdd_w1_w19-suppwy: twue
        vdd_w20-suppwy: twue
        vdd_w21-suppwy: twue
        vdd_w2_w23-suppwy: twue
        vdd_w3-suppwy: twue
        vdd_w4_w5_w6_w7_w16-suppwy: twue
        vdd_w8_w11_w12_w17_w22-suppwy: twue
        vdd_w9_w10_w13_w14_w15_w18-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-6]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pm8994-weguwatows
    then:
      pwopewties:
        vdd_w1-suppwy: twue
        vdd_w13_w19_w23_w24-suppwy: twue
        vdd_w14_w15-suppwy: twue
        vdd_w17_w29-suppwy: twue
        vdd_w20_w21-suppwy: twue
        vdd_w25-suppwy: twue
        vdd_w2_w26_w28-suppwy: twue
        vdd_w3_w11-suppwy: twue
        vdd_w4_w27_w31-suppwy: twue
        vdd_w5_w7-suppwy: twue
        vdd_w6_w12_w32-suppwy: twue
        vdd_w8_w16_w30-suppwy: twue
        vdd_w9_w10_w18_w22-suppwy: twue
        vdd_wvs_1_2-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-9][0-2]?-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pma8084-weguwatows
    then:
      pwopewties:
        vdd_w1_w11-suppwy: twue
        vdd_w2_w3_w4_w27-suppwy: twue
        vdd_w5_w7-suppwy: twue
        vdd_w6_w12_w14_w15_w26-suppwy: twue
        vdd_w8-suppwy: twue
        vdd_w9_w10_w13_w20_w23_w24-suppwy: twue
        vdd_w16_w25-suppwy: twue
        vdd_w17-suppwy: twue
        vdd_w18-suppwy: twue
        vdd_w19-suppwy: twue
        vdd_w21-suppwy: twue
        vdd_w22-suppwy: twue
        vdd_wvs1_2-suppwy: twue
        vdd_wvs3_4-suppwy: twue
        vdd_5vs1-suppwy: twue
      pattewnPwopewties:
        "^vdd_s([1-9]|1[0-2])-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pmi8994-weguwatows
    then:
      pwopewties:
        vdd_w1-suppwy: twue
      pattewnPwopewties:
        "^vdd_s[1-3]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pmp8074-weguwatows
    then:
      pwopewties:
        vdd_w10_w11_w12_w13-suppwy: twue
        vdd_w1_w2-suppwy: twue
        vdd_w3_w8-suppwy: twue
        vdd_w5_w6_w15-suppwy: twue
      pattewnPwopewties:
        "^vdd_w[479]-suppwy$": twue
        "^vdd_s[1-5]-suppwy$": twue

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,pms405-weguwatows
    then:
      pwopewties:
        vdd_s3-suppwy: twue

unevawuatedPwopewties: fawse

exampwes:
  - |
    weguwatows {
      compatibwe = "qcom,pm8941-weguwatows";
      vdd_w1_w3-suppwy = <&s1>;

      s1: s1 {
        weguwatow-min-micwovowt = <1300000>;
        weguwatow-max-micwovowt = <1400000>;
      };

      w1: w1 {
        weguwatow-min-micwovowt = <1225000>;
        weguwatow-max-micwovowt = <1300000>;
      };
    };
...
