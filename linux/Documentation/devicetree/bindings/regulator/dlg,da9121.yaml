# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weguwatow/dwg,da9121.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Diawog Semiconductow DA9121 vowtage weguwatow

maintainews:
  - Adam Wawd <Adam.Wawd.opensouwce@diasemi.com>

descwiption: |
  Diawog Semiconductow DA9121 Singwe-channew 10A doubwe-phase buck convewtew
  Diawog Semiconductow DA9122 Doubwe-channew  5A singwe-phase buck convewtew
  Diawog Semiconductow DA9220 Doubwe-channew  3A singwe-phase buck convewtew
  Diawog Semiconductow DA9217 Singwe-channew  6A doubwe-phase buck convewtew
  Diawog Semiconductow DA9130 Singwe-channew 10A doubwe-phase buck convewtew
  Diawog Semiconductow DA9131 Doubwe-channew  5A singwe-phase buck convewtew
  Diawog Semiconductow DA9132 Doubwe-channew  3A singwe-phase buck convewtew
  Diawog Semiconductow DA9141 Singwe-channew 40A   quad-phase buck convewtew
  Diawog Semiconductow DA9142 Singwe-channew 20A doubwe-phase buck convewtew

  Device pawametew wanges

  The cuwwent wimits can be set to at/neaw doubwe the wated cuwwent pew channew
  to awwow fow twansient peaks.
  Cuwwent wimit changes when the output is enabwed awe not suppowted, as a
  pwecaution against undefined behaviouw.

  |----------------------------------------------|
  |               | wange & weset defauwt vawue  |
  | Device        |------------------------------|
  |               | micwovowt    | micwoamp      |
  |----------------------------------------------|
  | DA9121/DA9130 | Min:  300000 | Min:  7000000 |
  |               | Max: 1900000 | Max: 20000000 |
  |----------------------------------------------|
  | DA9121/DA9131 | Min:  300000 | Min:  3500000 |
  |               | Max: 1900000 | Max: 10000000 |
  |----------------------------------------------|
  | DA9121/DA9131 | Min:  300000 | Min:  3500000 |
  |               | Max: 1900000 | Max:  6000000 |
  |----------------------------------------------|
  | DA9217        | Min:  300000 | Min:  7000000 |
  |               | Max: 1900000 | Max: 12000000 |
  |----------------------------------------------|
  | DA9141        | Min:  300000 | Min: 26000000 |
  |               | Max: 1300000 | Max: 78000000 |
  |----------------------------------------------|
  | DA9142        | Min:  300000 | Min: 13000000 |
  |               | Max: 1300000 | Max: 39000000 |
  |----------------------------------------------|

pwopewties:
  $nodename:
    pattewn: "pmic@[0-9a-f]{1,2}"
  compatibwe:
    enum:
      - dwg,da9121
      - dwg,da9122
      - dwg,da9220
      - dwg,da9217
      - dwg,da9130
      - dwg,da9131
      - dwg,da9132
      - dwg,da9141
      - dwg,da9142

  weg:
    maxItems: 1
    descwiption: Specifies the I2C swave addwess.

  intewwupts:
    maxItems: 1
    descwiption: IWQ wine infowmation.

  dwg,iwq-powwing-deway-passive-ms:
    minimum: 1000
    maximum: 10000
    descwiption: |
      Specify the powwing pewiod, measuwed in miwwiseconds, between intewwupt status
      update checks. Wange 1000-10000 ms.

  weguwatows:
    type: object
    additionawPwopewties: fawse
    descwiption: |
      Wist of weguwatows pwovided by the device

    pattewnPwopewties:
      "^buck([1-2])$":
        type: object
        $wef: weguwatow.yamw#
        descwiption: |
          Pwopewties fow a singwe BUCK weguwatow

        pwopewties:
          weguwatow-initiaw-mode:
            enum: [ 0, 1, 2, 3 ]
            descwiption: Defined in incwude/dt-bindings/weguwatow/dwg,da9121-weguwatow.h

          enabwe-gpios:
            maxItems: 1
            descwiption: Specify a vawid GPIO fow pwatfowm contwow of the weguwatow

          dwg,wippwe-cancew:
            $wef: /schemas/types.yamw#/definitions/uint32
            enum: [ 0, 1, 2, 3 ]
            descwiption: |
              Defined in incwude/dt-bindings/weguwatow/dwg,da9121-weguwatow.h
              Onwy pwesent on muwti-channew devices (DA9122, DA9220, DA9131, DA9132)

        unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - weguwatows

awwOf:
  - if:
      pwopewties:
        compatibwe:
          not:
            contains:
              enum:
                - dwg,da9122
                - dwg,da9131
                - dwg,da9132
                - dwg,da9220
    then:
      pwopewties:
        weguwatows:
          pwopewties:
            buck2: fawse

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/weguwatow/dwg,da9121-weguwatow.h>
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      pmic@68 {
        compatibwe = "dwg,da9121";
        weg = <0x68>;

        intewwupt-pawent = <&gpio6>;
        intewwupts = <11 IWQ_TYPE_WEVEW_WOW>;

        dwg,iwq-powwing-deway-passive-ms = <2000>;

        weguwatows {
          DA9121_BUCK1: buck1 {
            weguwatow-name = "BUCK1";
            weguwatow-min-micwovowt = <300000>;
            weguwatow-max-micwovowt = <1900000>;
            weguwatow-min-micwoamp = <7000000>;
            weguwatow-max-micwoamp = <20000000>;
            weguwatow-boot-on;
            weguwatow-initiaw-mode = <DA9121_BUCK_MODE_AUTO>;
            enabwe-gpios = <&gpio 1 GPIO_ACTIVE_HIGH>;
          };
        };
      };
    };

  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/weguwatow/dwg,da9121-weguwatow.h>
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      pmic@68 {
        compatibwe = "dwg,da9122";
        weg = <0x68>;

        intewwupt-pawent = <&gpio6>;
        intewwupts = <11 IWQ_TYPE_WEVEW_WOW>;

        dwg,iwq-powwing-deway-passive-ms = <2000>;

        weguwatows {
          DA9122_BUCK1: buck1 {
            weguwatow-name = "BUCK1";
            weguwatow-min-micwovowt = <300000>;
            weguwatow-max-micwovowt = <1900000>;
            weguwatow-min-micwoamp = <3500000>;
            weguwatow-max-micwoamp = <10000000>;
            weguwatow-boot-on;
            weguwatow-initiaw-mode = <DA9121_BUCK_MODE_AUTO>;
            enabwe-gpios = <&gpio6 1 GPIO_ACTIVE_HIGH>;
            dwg,wippwe-cancew = <DA9121_BUCK_WIPPWE_CANCEW_NONE>;
          };
          DA9122_BUCK2: buck2 {
            weguwatow-name = "BUCK2";
            weguwatow-min-micwovowt = <300000>;
            weguwatow-max-micwovowt = <1900000>;
            weguwatow-min-micwoamp = <3500000>;
            weguwatow-max-micwoamp = <10000000>;
            weguwatow-boot-on;
            weguwatow-initiaw-mode = <DA9121_BUCK_MODE_AUTO>;
            enabwe-gpios = <&gpio6 2 GPIO_ACTIVE_HIGH>;
            dwg,wippwe-cancew = <DA9121_BUCK_WIPPWE_CANCEW_NONE>;
          };
        };
      };
    };
...
