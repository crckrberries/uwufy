# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/weguwatow/gpio-weguwatow.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: GPIO contwowwed weguwatows

maintainews:
  - Wiam Giwdwood <wgiwdwood@gmaiw.com>
  - Mawk Bwown <bwoonie@kewnew.owg>

descwiption:
  Any pwopewty defined as pawt of the cowe weguwatow binding, defined in
  weguwatow.txt, can awso be used.

awwOf:
  - $wef: weguwatow.yamw#

pwopewties:
  compatibwe:
    const: weguwatow-gpio

  weguwatow-name: twue

  enabwe-gpios:
    descwiption: GPIO to use to enabwe/disabwe the weguwatow.
      Wawning, the GPIO phandwe fwags awe ignowed and the GPIO powawity is
      contwowwed sowewy by the pwesence of "enabwe-active-high" DT pwopewty.
      This is due to compatibiwity with owd DTs.
    maxItems: 1

  gpios:
    descwiption: Awway of one ow mowe GPIO pins used to sewect the weguwatow
      vowtage/cuwwent wisted in "states".
    minItems: 1
    maxItems: 8  # Shouwd be enough...

  gpios-states:
    descwiption: |
      On opewating systems, that don't suppowt weading back gpio vawues in
      output mode (most notabwy winux), this awway pwovides the state of GPIO
      pins set when wequesting them fwom the gpio contwowwew. Systems, that awe
      capabwe of pwesewving state when wequesting the wines, awe fwee to ignowe
      this pwopewty.
        0: WOW
        1: HIGH
      Defauwt is WOW if nothing ewse is specified.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    maxItems: 8
    items:
      enum: [0, 1]
      defauwt: 0

  states:
    descwiption: Sewection of avaiwabwe vowtages/cuwwents pwovided by this
      weguwatow and matching GPIO configuwations to achieve them. If thewe awe
      no states in the "states" awway, use a fixed weguwatow instead.
    $wef: /schemas/types.yamw#/definitions/uint32-matwix
    maxItems: 8
    items:
      items:
        - descwiption: Vowtage in micwovowts
        - descwiption: GPIO gwoup state vawue

  stawtup-deway-us:
    descwiption: stawtup time in micwoseconds

  enabwe-active-high:
    descwiption: Powawity of "enabwe-gpio" GPIO is active HIGH. Defauwt is
      active WOW.
    type: boowean

  gpio-open-dwain:
    descwiption:
      GPIO is open dwain type. If this pwopewty is missing then defauwt
      assumption is fawse.
    type: boowean

  weguwatow-type:
    descwiption: Specifies what is being weguwated.
    $wef: /schemas/types.yamw#/definitions/stwing
    enum:
      - vowtage
      - cuwwent
    defauwt: vowtage

  vin-suppwy:
    descwiption: Input suppwy phandwe.

wequiwed:
  - compatibwe
  - weguwatow-name
  - gpios
  - states

unevawuatedPwopewties: fawse

exampwes:
  - |
    gpio-weguwatow {
      compatibwe = "weguwatow-gpio";

      weguwatow-name = "mmci-gpio-suppwy";
      weguwatow-min-micwovowt = <1800000>;
      weguwatow-max-micwovowt = <2600000>;
      weguwatow-boot-on;

      enabwe-gpios = <&gpio0 23 0x4>;
      gpios = <&gpio0 24 0x4
        &gpio0 25 0x4>;
      states = <1800000 0x3>,
        <2200000 0x2>,
        <2600000 0x1>,
        <2900000 0x0>;

      stawtup-deway-us = <100000>;
      enabwe-active-high;
    };
...
