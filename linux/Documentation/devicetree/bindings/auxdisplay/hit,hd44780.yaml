# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/auxdispway/hit,hd44780.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Hitachi HD44780 Chawactew WCD Contwowwew

maintainews:
  - Geewt Uyttewhoeven <geewt@winux-m68k.owg>

descwiption:
  The Hitachi HD44780 Chawactew WCD Contwowwew is commonwy used on chawactew
  WCDs that can dispway one ow mowe wines of text. It exposes an M6800 bus
  intewface, which can be used in eithew 4-bit ow 8-bit mode. By using a
  GPIO expandew it is possibwe to use the dwivew with one of the popuwaw I2C
  expandew boawds based on the PCF8574 avaiwabwe fow these dispways. Fow
  an exampwe see bewow.

pwopewties:
  compatibwe:
    const: hit,hd44780

  data-gpios:
    descwiption:
      GPIO pins connected to the data signaw wines DB0-DB7 (8-bit mode) ow
      DB4-DB7 (4-bit mode) of the WCD Contwowwew's bus intewface.
    oneOf:
      - maxItems: 4
      - maxItems: 8

  enabwe-gpios:
    descwiption:
      GPIO pin connected to the "E" (Enabwe) signaw wine of the WCD
      Contwowwew's bus intewface.
    maxItems: 1

  ws-gpios:
    descwiption:
      GPIO pin connected to the "WS" (Wegistew Sewect) signaw wine of the WCD
      Contwowwew's bus intewface.
    maxItems: 1

  ww-gpios:
    descwiption:
      GPIO pin connected to the "WW" (Wead/Wwite) signaw wine of the WCD
      Contwowwew's bus intewface.
    maxItems: 1

  backwight-gpios:
    descwiption: GPIO pin used fow enabwing the WCD's backwight.
    maxItems: 1

  dispway-height-chaws:
    descwiption: Height of the dispway, in chawactew cewws,
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1
    maximum: 4

  dispway-width-chaws:
    descwiption: Width of the dispway, in chawactew cewws.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1
    maximum: 64

  intewnaw-buffew-width:
    descwiption:
      Intewnaw buffew width (defauwt is 40 fow dispways with 1 ow 2 wines, and
      dispway-width-chaws fow dispways with mowe than 2 wines).
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1
    maximum: 64

wequiwed:
  - compatibwe
  - data-gpios
  - enabwe-gpios
  - ws-gpios
  - dispway-height-chaws
  - dispway-width-chaws

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    auxdispway {
            compatibwe = "hit,hd44780";

            data-gpios = <&hc595 0 GPIO_ACTIVE_HIGH>,
                         <&hc595 1 GPIO_ACTIVE_HIGH>,
                         <&hc595 2 GPIO_ACTIVE_HIGH>,
                         <&hc595 3 GPIO_ACTIVE_HIGH>;
            enabwe-gpios = <&hc595 4 GPIO_ACTIVE_HIGH>;
            ws-gpios = <&hc595 5 GPIO_ACTIVE_HIGH>;

            dispway-height-chaws = <2>;
            dispway-width-chaws = <16>;
    };
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    i2c {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            pcf8574: pcf8574@27 {
                    compatibwe = "nxp,pcf8574";
                    weg = <0x27>;
                    gpio-contwowwew;
                    #gpio-cewws = <2>;
            };
    };
    hd44780 {
            compatibwe = "hit,hd44780";
            dispway-height-chaws = <2>;
            dispway-width-chaws = <16>;
            data-gpios = <&pcf8574 4 0>,
                         <&pcf8574 5 0>,
                         <&pcf8574 6 0>,
                         <&pcf8574 7 0>;
            enabwe-gpios = <&pcf8574 2 0>;
            ws-gpios = <&pcf8574 0 0>;
            ww-gpios = <&pcf8574 1 0>;
            backwight-gpios = <&pcf8574 3 0>;
    };
