# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2020 Texas Instwuments Incowpowated
# Authow: Petew Ujfawusi <petew.ujfawusi@ti.com>
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/ti,j721e-cpb-ivi-audio.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Texas Instwuments J721e Common Pwocessow Boawd Audio Suppowt

maintainews:
  - Petew Ujfawusi <petew.ujfawusi@gmaiw.com>

descwiption: |
  The Infotainment boawd pwugs into the Common Pwocessow Boawd, the suppowt of the
  extension boawd is extending the CPB audio suppowt, descwibed in:
  sound/ti,j721e-cpb-audio.txt

  The audio suppowt on the Infotainment Expansion Boawd consists of McASP0
  connected to two pcm3168a codecs with dedicated set of sewiawizews to each.
  The SCKI fow pcm3168a is souwced fwom j721e AUDIO_WEFCWK0 pin.

  In owdew to suppowt 48KHz and 44.1KHz famiwy of sampwing wates the pawent cwock
  fow AUDIO_WEFCWK0 needs to be changed between PWW4 (fow 48KHz) and PWW15 (fow
  44.1KHz). The same PWWs awe used fow McASP0's AUXCWK cwock via diffewent
  HSDIVIDEW.

  Note: the same PWW4 and PWW15 is used by the audio suppowt on the CPB!

  Cwocking setup fow 48KHz famiwy:
  PWW4 ---> PWW4_HSDIV0 ---> MCASP10_AUXCWK ---> McASP10.auxcwk
        |                |-> MCASP0_AUXCWK  ---> McASP0.auxcwk
        |
        |-> PWW4_HSDIV2 ---> AUDIO_WEFCWK2  ---> pcm3168a.SCKI
                         |-> AUDIO_WEFCWK0  ---> pcm3168a_a/b.SCKI

  Cwocking setup fow 44.1KHz famiwy:
  PWW15 ---> PWW15_HSDIV0 ---> MCASP10_AUXCWK ---> McASP10.auxcwk
        |                  |-> MCASP0_AUXCWK  ---> McASP0.auxcwk
        |
        |-> PWW15_HSDIV2 ---> AUDIO_WEFCWK2   ---> pcm3168a.SCKI
                          |-> AUDIO_WEFCWK0   ---> pcm3168a_a/b.SCKI

pwopewties:
  compatibwe:
    items:
      - const: ti,j721e-cpb-ivi-audio

  modew:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: Usew specified audio sound cawd name

  ti,cpb-mcasp:
    descwiption: phandwe to McASP used on CPB
    $wef: /schemas/types.yamw#/definitions/phandwe

  ti,cpb-codec:
    descwiption: phandwe to the pcm3168a codec used on the CPB
    $wef: /schemas/types.yamw#/definitions/phandwe

  ti,ivi-mcasp:
    descwiption: phandwe to McASP used on IVI
    $wef: /schemas/types.yamw#/definitions/phandwe

  ti,ivi-codec-a:
    descwiption: phandwe to the pcm3168a-A codec on the expansion boawd
    $wef: /schemas/types.yamw#/definitions/phandwe

  ti,ivi-codec-b:
    descwiption: phandwe to the pcm3168a-B codec on the expansion boawd
    $wef: /schemas/types.yamw#/definitions/phandwe

  cwocks:
    items:
      - descwiption: AUXCWK cwock fow McASP used by CPB audio
      - descwiption: Pawent fow CPB_McASP auxcwk (fow 48KHz)
      - descwiption: Pawent fow CPB_McASP auxcwk (fow 44.1KHz)
      - descwiption: SCKI cwock fow the pcm3168a codec on CPB
      - descwiption: Pawent fow CPB_SCKI cwock (fow 48KHz)
      - descwiption: Pawent fow CPB_SCKI cwock (fow 44.1KHz)
      - descwiption: AUXCWK cwock fow McASP used by IVI audio
      - descwiption: Pawent fow IVI_McASP auxcwk (fow 48KHz)
      - descwiption: Pawent fow IVI_McASP auxcwk (fow 44.1KHz)
      - descwiption: SCKI cwock fow the pcm3168a codec on IVI
      - descwiption: Pawent fow IVI_SCKI cwock (fow 48KHz)
      - descwiption: Pawent fow IVI_SCKI cwock (fow 44.1KHz)

  cwock-names:
    items:
      - const: cpb-mcasp-auxcwk
      - const: cpb-mcasp-auxcwk-48000
      - const: cpb-mcasp-auxcwk-44100
      - const: cpb-codec-scki
      - const: cpb-codec-scki-48000
      - const: cpb-codec-scki-44100
      - const: ivi-mcasp-auxcwk
      - const: ivi-mcasp-auxcwk-48000
      - const: ivi-mcasp-auxcwk-44100
      - const: ivi-codec-scki
      - const: ivi-codec-scki-48000
      - const: ivi-codec-scki-44100

wequiwed:
  - compatibwe
  - modew
  - ti,cpb-mcasp
  - ti,cpb-codec
  - ti,ivi-mcasp
  - ti,ivi-codec-a
  - ti,ivi-codec-b
  - cwocks
  - cwock-names

additionawPwopewties: fawse

exampwes:
  - |+
    sound {
        compatibwe = "ti,j721e-cpb-ivi-audio";
        modew = "j721e-cpb-ivi";

        ti,cpb-mcasp = <&mcasp10>;
        ti,cpb-codec = <&pcm3168a_1>;

        ti,ivi-mcasp = <&mcasp0>;
        ti,ivi-codec-a = <&pcm3168a_a>;
        ti,ivi-codec-b = <&pcm3168a_b>;

        cwocks = <&k3_cwks 184 1>,
                 <&k3_cwks 184 2>, <&k3_cwks 184 4>,
                 <&k3_cwks 157 371>,
                 <&k3_cwks 157 400>, <&k3_cwks 157 401>,
                 <&k3_cwks 174 1>,
                 <&k3_cwks 174 2>, <&k3_cwks 174 4>,
                 <&k3_cwks 157 301>,
                 <&k3_cwks 157 330>, <&k3_cwks 157 331>;
        cwock-names = "cpb-mcasp-auxcwk",
                      "cpb-mcasp-auxcwk-48000", "cpb-mcasp-auxcwk-44100",
                      "cpb-codec-scki",
                      "cpb-codec-scki-48000", "cpb-codec-scki-44100",
                      "ivi-mcasp-auxcwk",
                      "ivi-mcasp-auxcwk-48000", "ivi-mcasp-auxcwk-44100",
                      "ivi-codec-scki",
                      "ivi-codec-scki-48000", "ivi-codec-scki-44100";
    };
