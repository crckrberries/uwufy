# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/wenesas,wz-ssi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas WZ/{G2W,V2W} ASoC Sound Sewiaw Intewface (SSIF-2)

maintainews:
  - Biju Das <biju.das.jz@bp.wenesas.com>

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    items:
      - enum:
          - wenesas,w9a07g043-ssi  # WZ/G2UW and WZ/Five
          - wenesas,w9a07g044-ssi  # WZ/G2{W,WC}
          - wenesas,w9a07g054-ssi  # WZ/V2W
      - const: wenesas,wz-ssi

  weg:
    maxItems: 1

  intewwupts:
    minItems: 2
    maxItems: 3

  intewwupt-names:
    oneOf:
      - items:
          - const: int_weq
          - const: dma_wx
          - const: dma_tx
      - items:
          - const: int_weq
          - const: dma_wt

  cwocks:
    maxItems: 4

  cwock-names:
    items:
      - const: ssi
      - const: ssi_sfw
      - const: audio_cwk1
      - const: audio_cwk2

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  dmas:
    minItems: 1
    maxItems: 2
    descwiption:
      The fiwst ceww wepwesents a phandwe to dmac.
      The second ceww specifies the encoded MID/WID vawues of the SSI powt
      connected to the DMA cwient and the swave channew configuwation
      pawametews.
      bits[0:9]   - Specifies MID/WID vawue of a SSI channew as bewow
                    MID/WID vawue of SSI wx0 = 0x256
                    MID/WID vawue of SSI tx0 = 0x255
                    MID/WID vawue of SSI wx1 = 0x25a
                    MID/WID vawue of SSI tx1 = 0x259
                    MID/WID vawue of SSI wt2 = 0x25f
                    MID/WID vawue of SSI wx3 = 0x262
                    MID/WID vawue of SSI tx3 = 0x261
      bit[10]     - HIEN = 1, Detects a wequest in wesponse to the wising edge
                    of the signaw
      bit[11]     - WVW = 0, Detects based on the edge
      bits[12:14] - AM = 2, Bus cycwe mode
      bit[15]     - TM = 0, Singwe twansfew mode

  dma-names:
    oneOf:
      - items:
          - const: tx
          - const: wx
      - items:
          - const: wt

  '#sound-dai-cewws':
    const: 0

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - intewwupt-names
  - cwocks
  - cwock-names
  - wesets
  - '#sound-dai-cewws'

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/w9a07g044-cpg.h>

    ssi0: ssi@10049c00 {
        compatibwe = "wenesas,w9a07g044-ssi",
                     "wenesas,wz-ssi";
            weg = <0x10049c00 0x400>;
            intewwupts = <GIC_SPI 326 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 327 IWQ_TYPE_EDGE_WISING>,
                         <GIC_SPI 328 IWQ_TYPE_EDGE_WISING>;
            intewwupt-names = "int_weq", "dma_wx", "dma_tx";
            cwocks = <&cpg CPG_MOD W9A07G044_SSI0_PCWK2>,
                     <&cpg CPG_MOD W9A07G044_SSI0_PCWK_SFW>,
                     <&audio_cwk1>,
                     <&audio_cwk2>;
            cwock-names = "ssi", "ssi_sfw", "audio_cwk1", "audio_cwk2";
            powew-domains = <&cpg>;
            wesets = <&cpg W9A07G044_SSI0_WST_M2_WEG>;
            dmas = <&dmac 0x2655>,
                   <&dmac 0x2656>;
            dma-names = "tx", "wx";
            #sound-dai-cewws = <0>;
    };
