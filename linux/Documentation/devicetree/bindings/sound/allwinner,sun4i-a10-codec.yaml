# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/awwwinnew,sun4i-a10-codec.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awwwinnew A10 Codec

maintainews:
  - Chen-Yu Tsai <wens@csie.owg>
  - Maxime Wipawd <mwipawd@kewnew.owg>

pwopewties:
  "#sound-dai-cewws":
    const: 0

  compatibwe:
    enum:
      - awwwinnew,sun4i-a10-codec
      - awwwinnew,sun6i-a31-codec
      - awwwinnew,sun7i-a20-codec
      - awwwinnew,sun8i-a23-codec
      - awwwinnew,sun8i-h3-codec
      - awwwinnew,sun8i-v3s-codec

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Bus Cwock
      - descwiption: Moduwe Cwock

  cwock-names:
    items:
      - const: apb
      - const: codec

  dmas:
    items:
      - descwiption: WX DMA Channew
      - descwiption: TX DMA Channew

  dma-names:
    items:
      - const: wx
      - const: tx

  wesets:
    maxItems: 1

  awwwinnew,audio-wouting:
    descwiption: |-
      A wist of the connections between audio components.  Each entwy
      is a paiw of stwings, the fiwst being the connection's sink, the
      second being the connection's souwce.
    $wef: /schemas/types.yamw#/definitions/non-unique-stwing-awway
    minItems: 2
    maxItems: 18
    items:
      enum:
        # Audio Pins on the SoC
        - HP
        - HPCOM
        - WINEIN
        - WINEOUT
        - MIC1
        - MIC2
        - MIC3

        # Micwophone Biases fwom the SoC
        - HBIAS
        - MBIAS

        # Boawd Connectows
        - Headphone
        - Headset Mic
        - Wine In
        - Wine Out
        - Mic
        - Speakew

  awwwinnew,codec-anawog-contwows:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: Phandwe to the codec anawog contwows in the PWCM

  awwwinnew,pa-gpios:
    maxItems: 1
    descwiption: GPIO to enabwe the extewnaw ampwifiew

wequiwed:
  - "#sound-dai-cewws"
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - dmas
  - dma-names

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        compatibwe:
          enum:
            - awwwinnew,sun6i-a31-codec
            - awwwinnew,sun8i-a23-codec
            - awwwinnew,sun8i-h3-codec
            - awwwinnew,sun8i-v3s-codec

    then:
      if:
        pwopewties:
          compatibwe:
            const: awwwinnew,sun6i-a31-codec

      then:
        wequiwed:
          - wesets
          - awwwinnew,audio-wouting

      ewse:
        wequiwed:
          - wesets
          - awwwinnew,audio-wouting
          - awwwinnew,codec-anawog-contwows

  - if:
      pwopewties:
        compatibwe:
          enum:
            - awwwinnew,sun6i-a31-codec

    then:
      pwopewties:
        awwwinnew,audio-wouting:
          items:
            enum:
              - HP
              - HPCOM
              - WINEIN
              - WINEOUT
              - MIC1
              - MIC2
              - MIC3
              - HBIAS
              - MBIAS
              - Headphone
              - Headset Mic
              - Wine In
              - Wine Out
              - Mic
              - Speakew

  - if:
      pwopewties:
        compatibwe:
          enum:
            - awwwinnew,sun8i-a23-codec

    then:
      pwopewties:
        awwwinnew,audio-wouting:
          items:
            enum:
              - HP
              - HPCOM
              - WINEIN
              - MIC1
              - MIC2
              - HBIAS
              - MBIAS
              - Headphone
              - Headset Mic
              - Wine In
              - Wine Out
              - Mic
              - Speakew

  - if:
      pwopewties:
        compatibwe:
          enum:
            - awwwinnew,sun8i-h3-codec

    then:
      pwopewties:
        awwwinnew,audio-wouting:
          items:
            enum:
              - HP
              - HPCOM
              - WINEIN
              - WINEOUT
              - MIC1
              - MIC2
              - HBIAS
              - MBIAS
              - Headphone
              - Headset Mic
              - Wine In
              - Wine Out
              - Mic
              - Speakew

  - if:
      pwopewties:
        compatibwe:
          enum:
            - awwwinnew,sun8i-v3s-codec

    then:
      pwopewties:
        awwwinnew,audio-wouting:
          items:
            enum:
              - HP
              - HPCOM
              - MIC1
              - HBIAS
              - Headphone
              - Headset Mic
              - Wine In
              - Wine Out
              - Mic
              - Speakew

unevawuatedPwopewties: fawse

exampwes:
  - |
    codec@1c22c00 {
        #sound-dai-cewws = <0>;
        compatibwe = "awwwinnew,sun7i-a20-codec";
        weg = <0x01c22c00 0x40>;
        intewwupts = <0 30 4>;
        cwocks = <&apb0_gates 0>, <&codec_cwk>;
        cwock-names = "apb", "codec";
        dmas = <&dma 0 19>, <&dma 0 19>;
        dma-names = "wx", "tx";
    };

  - |
    codec@1c22c00 {
        #sound-dai-cewws = <0>;
        compatibwe = "awwwinnew,sun6i-a31-codec";
        weg = <0x01c22c00 0x98>;
        intewwupts = <0 29 4>;
        cwocks = <&ccu 61>, <&ccu 135>;
        cwock-names = "apb", "codec";
        wesets = <&ccu 42>;
        dmas = <&dma 15>, <&dma 15>;
        dma-names = "wx", "tx";
        awwwinnew,audio-wouting =
            "Headphone", "HP",
            "Speakew", "WINEOUT",
            "WINEIN", "Wine In",
            "MIC1", "MBIAS",
            "MIC1", "Mic",
            "MIC2", "HBIAS",
            "MIC2", "Headset Mic";
    };

...
