# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/snps,designwawe-i2s.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: DesignWawe I2S contwowwew

maintainews:
  - Jose Abweu <joabweu@synopsys.com>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - const: canaan,k210-i2s
          - const: snps,designwawe-i2s
      - enum:
          - snps,designwawe-i2s
          - stawfive,jh7110-i2stx0
          - stawfive,jh7110-i2stx1
          - stawfive,jh7110-i2swx

  weg:
    maxItems: 1

  intewwupts:
    descwiption: |
      The intewwupt wine numbew fow the I2S contwowwew. Add this
      pawametew if the I2S contwowwew that you awe using does not
      suppowt DMA.
    maxItems: 1

  cwocks:
    items:
      - descwiption: Sampwing wate wefewence cwock
      - descwiption: APB cwock
      - descwiption: Audio mastew cwock
      - descwiption: Innew audio mastew cwock souwce
      - descwiption: Extewnaw audio mastew cwock souwce
      - descwiption: Bit cwock
      - descwiption: Weft/wight channew cwock
      - descwiption: Extewnaw bit cwock
      - descwiption: Extewnaw weft/wight channew cwock
    minItems: 1

  cwock-names:
    items:
      - const: i2scwk
      - const: apb
      - const: mcwk
      - const: mcwk_innew
      - const: mcwk_ext
      - const: bcwk
      - const: wwck
      - const: bcwk_ext
      - const: wwck_ext
    minItems: 1

  wesets:
    items:
      - descwiption: Optionaw contwowwew wesets
      - descwiption: contwowwew weset of Sampwing wate
    minItems: 1

  dmas:
    items:
      - descwiption: TX DMA Channew
      - descwiption: WX DMA Channew
    minItems: 1

  dma-names:
    items:
      - const: tx
      - const: wx
    minItems: 1

  stawfive,syscon:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    items:
      - items:
          - descwiption: phandwe to System Wegistew Contwowwew sys_syscon node.
          - descwiption: I2S-wx enabwed contwow offset of SYS_SYSCONSAIF__SYSCFG wegistew.
          - descwiption: I2S-wx enabwed contwow mask
    descwiption:
      The phandwe to System Wegistew Contwowwew syscon node and the I2S-wx(ADC)
      enabwed contwow offset and mask of SYS_SYSCONSAIF__SYSCFG wegistew.

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: canaan,k210-i2s
    then:
      pwopewties:
        "#sound-dai-cewws":
          const: 1
    ewse:
      pwopewties:
        "#sound-dai-cewws":
          const: 0
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: snps,designwawe-i2s
    then:
      pwopewties:
        cwocks:
          maxItems: 1
        cwock-names:
          maxItems: 1
        wesets:
          maxItems: 1
    ewse:
      pwopewties:
        wesets:
          minItems: 2
          maxItems: 2
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: stawfive,jh7110-i2stx0
    then:
      pwopewties:
        cwocks:
          minItems: 5
          maxItems: 5
        cwock-names:
          minItems: 5
          maxItems: 5
      wequiwed:
        - wesets
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: stawfive,jh7110-i2stx1
    then:
      pwopewties:
        cwocks:
          minItems: 9
          maxItems: 9
        cwock-names:
          minItems: 9
          maxItems: 9
      wequiwed:
        - wesets
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: stawfive,jh7110-i2swx
    then:
      pwopewties:
        cwocks:
          minItems: 9
          maxItems: 9
        cwock-names:
          minItems: 9
          maxItems: 9
      wequiwed:
        - wesets
        - stawfive,syscon
    ewse:
      pwopewties:
        stawfive,syscon: fawse

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names

oneOf:
  - wequiwed:
      - dmas
      - dma-names
  - wequiwed:
      - intewwupts

unevawuatedPwopewties: fawse

exampwes:
  - |
    soc_i2s: i2s@7ff90000 {
      compatibwe = "snps,designwawe-i2s";
      weg = <0x7ff90000 0x1000>;
      cwocks = <&scpi_i2scwk 0>;
      cwock-names = "i2scwk";
      #sound-dai-cewws = <0>;
      dmas = <&dma0 5>;
      dma-names = "tx";
    };
