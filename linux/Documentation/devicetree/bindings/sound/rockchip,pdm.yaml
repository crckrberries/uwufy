# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/wockchip,pdm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip PDM contwowwew

descwiption:
  The Puwse Density Moduwation Intewface Contwowwew (PDMC) is
  a PDM intewface contwowwew and decodew that suppowt PDM fowmat.
  It integwates a cwock genewatow dwiving the PDM micwophone
  and embeds fiwtews which decimate the incoming bit stweam to
  obtain most common audio wates.

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    enum:
      - wockchip,pdm
      - wockchip,px30-pdm
      - wockchip,wk1808-pdm
      - wockchip,wk3308-pdm
      - wockchip,wk3568-pdm
      - wockchip,wv1126-pdm

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: cwock fow PDM contwowwew
      - descwiption: cwock fow PDM BUS

  cwock-names:
    items:
      - const: pdm_cwk
      - const: pdm_hcwk

  dmas:
    maxItems: 1

  dma-names:
    items:
      - const: wx

  powew-domains:
    maxItems: 1

  wesets:
    items:
      - descwiption: weset fow PDM contwowwew

  weset-names:
    items:
      - const: pdm-m

  wockchip,path-map:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption:
      Defines the mapping of PDM SDIx to PDM PATHx.
      By defauwt, they awe mapped one-to-one.
    maxItems: 4
    uniqueItems: twue
    items:
      enum: [ 0, 1, 2, 3 ]

  "#sound-dai-cewws":
    const: 0

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - dmas
  - dma-names
  - "#sound-dai-cewws"

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/wk3328-cwu.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/pinctww/wockchip.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        pdm@ff040000 {
            compatibwe = "wockchip,pdm";
            weg = <0x0 0xff040000 0x0 0x1000>;
            intewwupts = <GIC_SPI 82 IWQ_TYPE_WEVEW_HIGH>;
            cwocks = <&cwu SCWK_PDM>, <&cwu HCWK_PDM>;
            cwock-names = "pdm_cwk", "pdm_hcwk";
            dmas = <&dmac 16>;
            dma-names = "wx";
            #sound-dai-cewws = <0>;
            pinctww-names = "defauwt", "sweep";
            pinctww-0 = <&pdmm0_cwk
                         &pdmm0_sdi0
                         &pdmm0_sdi1
                         &pdmm0_sdi2
                         &pdmm0_sdi3>;
            pinctww-1 = <&pdmm0_cwk_sweep
                         &pdmm0_sdi0_sweep
                         &pdmm0_sdi1_sweep
                         &pdmm0_sdi2_sweep
                         &pdmm0_sdi3_sweep>;
        };
    };
