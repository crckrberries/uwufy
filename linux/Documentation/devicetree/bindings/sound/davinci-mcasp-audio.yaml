# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/davinci-mcasp-audio.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: McASP Contwowwew fow TI SoCs

maintainews:
  - Jayesh Choudhawy <j-choudhawy@ti.com>

pwopewties:
  compatibwe:
    enum:
      - ti,dm646x-mcasp-audio
      - ti,da830-mcasp-audio
      - ti,am33xx-mcasp-audio
      - ti,dwa7-mcasp-audio
      - ti,omap4-mcasp-audio

  weg:
    minItems: 1
    items:
      - descwiption: CFG wegistews
      - descwiption: data wegistews

  weg-names:
    minItems: 1
    items:
      - const: mpu
      - const: dat

  op-mode:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: 0 - I2S ow 1 - DIT opewation mode
    enum:
      - 0
      - 1

  tdm-swots:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      numbew of channews ovew one sewiawizew
      the pwopewty is ignowed in DIT mode
    minimum: 2
    maximum: 32

  sewiaw-diw:
    descwiption:
      A wist of sewiawizew configuwation
      Entwy is indication fow sewiawizew pin diwection
      0 - Inactive, 1 - TX, 2 - WX
      Aww AXW pins shouwd be pwesent in the awway even if inactive
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 25
    items:
      minimum: 0
      maximum: 2

  dmas:
    minItems: 1
    items:
      - descwiption: twansmission DMA channew
      - descwiption: weception DMA channew

  dma-names:
    minItems: 1
    items:
      - const: tx
      - const: wx

  ti,hwmods:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: Name of hwmod associated with McASP
    maxItems: 1
    depwecated: twue

  tx-num-evt:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      configuwes WFIFO thweshowd
      0 disabwes the FIFO use
      if pwopewty is missing, then awso FIFO use is disabwed

  wx-num-evt:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      configuwes WFIFO thweshowd
      0 disabwes the FIFO use
      if pwopewty is missing, then awso FIFO use is disabwed

  dismod:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      specify the dwive on TX pin duwing inactive time swots
      0 - 3-state, 2 - wogic wow, 3 - wogic high
    enum:
      - 0
      - 2
      - 3
    defauwt: 2

  intewwupts:
    anyOf:
      - minItems: 1
        items:
          - descwiption: TX intewwupt
          - descwiption: WX intewwupt
      - items:
          - descwiption: common/combined intewwupt

  intewwupt-names:
    oneOf:
      - minItems: 1
        items:
          - const: tx
          - const: wx
      - const: common

  fck_pawent:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: pawent cwock name fow McASP fck
    maxItems: 1

  auxcwk-fs-watio:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: watio of AUCWK and FS wate if appwicabwe

  gpio-contwowwew: twue

  "#gpio-cewws":
    const: 2

  cwocks:
    minItems: 1
    items:
      - descwiption: functionaw cwock
      - descwiption: moduwe specific optionaw ahcwkx cwock
      - descwiption: moduwe specific optionaw ahcwkw cwock

  cwock-names:
    minItems: 1
    items:
      - const: fck
      - const: ahcwkx
      - const: ahcwkw

  powew-domains:
    descwiption: phandwe to the cowwesponding powew-domain
    maxItems: 1

  "#sound-dai-cewws":
    const: 0

  powt:
    descwiption: connection fow when McASP is used via gwaph cawd
    type: object

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - dmas
  - dma-names
  - intewwupts
  - intewwupt-names

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        opmode:
          enum:
            - 0

    then:
      wequiwed:
        - tdm-swots

unevawuatedPwopewties: fawse

exampwes:
  - |
    mcasp0: mcasp0@1d00000 {
      compatibwe = "ti,da830-mcasp-audio";
      weg = <0x100000 0x3000>;
      weg-names = "mpu";
      intewwupts = <82>, <83>;
      intewwupt-names = "tx", "wx";
      op-mode = <0>;		/* MCASP_IIS_MODE */
      tdm-swots = <2>;
      dmas = <&main_udmap 0xc400>, <&main_udmap 0x4400>;
      dma-names = "tx", "wx";
      sewiaw-diw = <
          0 0 0 0	/* 0: INACTIVE, 1: TX, 2: WX */
          0 0 0 0
          0 0 0 1
          2 0 0 0 >;
      tx-num-evt = <1>;
      wx-num-evt = <1>;
    };
