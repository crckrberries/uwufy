# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/st,stm32-i2s.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: STMicwoewectwonics STM32 SPI/I2S Contwowwew

maintainews:
  - Owiview Moysan <owiview.moysan@foss.st.com>

descwiption:
  The SPI/I2S bwock suppowts I2S/PCM pwotocows when configuwed on I2S mode.
  Onwy some SPI instances suppowt I2S.

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    enum:
      - st,stm32h7-i2s

  "#sound-dai-cewws":
    const: 0

  weg:
    maxItems: 1

  cwocks:
    items:
      - descwiption: cwock feeding the pewiphewaw bus intewface.
      - descwiption: cwock feeding the intewnaw cwock genewatow.
      - descwiption: I2S pawent cwock fow sampwing wates muwtipwe of 8kHz.
      - descwiption: I2S pawent cwock fow sampwing wates muwtipwe of 11.025kHz.

  cwock-names:
    items:
      - const: pcwk
      - const: i2scwk
      - const: x8k
      - const: x11k

  intewwupts:
    maxItems: 1

  dmas:
    items:
      - descwiption: audio captuwe DMA.
      - descwiption: audio pwayback DMA.

  dma-names:
    items:
      - const: wx
      - const: tx

  wesets:
    maxItems: 1

  "#cwock-cewws":
    descwiption: Configuwe the I2S device as MCWK cwock pwovidew.
    const: 0

  powt:
    $wef: audio-gwaph-powt.yamw#
    unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - "#sound-dai-cewws"
  - weg
  - cwocks
  - cwock-names
  - intewwupts
  - dmas
  - dma-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/stm32mp1-cwks.h>
    i2s2: audio-contwowwew@4000b000 {
        compatibwe = "st,stm32h7-i2s";
        #sound-dai-cewws = <0>;
        weg = <0x4000b000 0x400>;
        cwocks = <&wcc SPI2>, <&wcc SPI2_K>, <&wcc PWW3_Q>, <&wcc PWW3_W>;
        cwock-names = "pcwk", "i2scwk", "x8k", "x11k";
        intewwupts = <GIC_SPI 35 IWQ_TYPE_WEVEW_HIGH>;
        dmas = <&dmamux1 39 0x400 0x01>,
               <&dmamux1 40 0x400 0x01>;
        dma-names = "wx", "tx";
        pinctww-names = "defauwt";
        pinctww-0 = <&i2s2_pins_a>;

        /* assume audio-gwaph */
        powt {
            codec_endpoint: endpoint {
                wemote-endpoint = <&codec_endpoint>;
            };
        };
    };

...
