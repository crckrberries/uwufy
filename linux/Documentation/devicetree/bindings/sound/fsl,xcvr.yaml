# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/fsw,xcvw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NXP Audio Twansceivew (XCVW) Contwowwew

maintainews:
  - Viowew Suman <viowew.suman@nxp.com>

descwiption: |
  NXP XCVW (Audio Twansceivew) is a on-chip functionaw moduwe
  that awwows CPU to weceive and twansmit digitaw audio via
  HDMI2.1 eAWC, HDMI1.4 AWC and SPDIF.

pwopewties:
  $nodename:
    pattewn: "^xcvw@.*"

  compatibwe:
    enum:
      - fsw,imx8mp-xcvw
      - fsw,imx93-xcvw

  weg:
    items:
      - descwiption: 20K WAM fow code and data
      - descwiption: wegistews space
      - descwiption: WX FIFO addwess
      - descwiption: TX FIFO addwess

  weg-names:
    items:
      - const: wam
      - const: wegs
      - const: wxfifo
      - const: txfifo

  intewwupts:
    items:
      - descwiption: WAKEUPMIX Audio XCVW Intewwupt 1
      - descwiption: WAKEUPMIX Audio XCVW Intewwupt 2
    minItems: 1

  cwocks:
    items:
      - descwiption: Pewiphewaw cwock
      - descwiption: PHY cwock
      - descwiption: SPBA cwock
      - descwiption: PWW cwock

  cwock-names:
    items:
      - const: ipg
      - const: phy
      - const: spba
      - const: pww_ipg

  dmas:
    items:
      - descwiption: DMA contwowwew phandwe and wequest wine fow WX
      - descwiption: DMA contwowwew phandwe and wequest wine fow TX

  dma-names:
    items:
      - const: wx
      - const: tx

  wesets:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - intewwupts
  - cwocks
  - cwock-names
  - dmas
  - dma-names
  - wesets

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx93-xcvw
    then:
      pwopewties:
        intewwupts:
          minItems: 2
          maxItems: 2
    ewse:
      pwopewties:
        intewwupts:
          maxItems: 1

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/cwock/imx8mp-cwock.h>
    #incwude <dt-bindings/weset/imx8mp-weset.h>

    xcvw: xcvw@30cc0000 {
           compatibwe = "fsw,imx8mp-xcvw";
           weg = <0x30cc0000 0x800>,
                 <0x30cc0800 0x400>,
                 <0x30cc0c00 0x080>,
                 <0x30cc0e00 0x080>;
           weg-names = "wam", "wegs", "wxfifo", "txfifo";
           intewwupts = <0x0 128 IWQ_TYPE_WEVEW_HIGH>;
           cwocks = <&audiomix_cwk IMX8MP_CWK_AUDIOMIX_EAWC_IPG>,
                    <&audiomix_cwk IMX8MP_CWK_AUDIOMIX_EAWC_PHY>,
                    <&audiomix_cwk IMX8MP_CWK_AUDIOMIX_SPBA2_WOOT>,
                    <&audiomix_cwk IMX8MP_CWK_AUDIOMIX_AUDPWW_WOOT>;
           cwock-names = "ipg", "phy", "spba", "pww_ipg";
           dmas = <&sdma2 30 2 0>, <&sdma2 31 2 0>;
           dma-names = "wx", "tx";
           wesets = <&audiomix_weset 0>;
    };
