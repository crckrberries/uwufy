# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/micwochip,sama7g5-pdmc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwochip Puwse Density Micwophone Contwowwew

maintainews:
  - Codwin Ciubotawiu <codwin.ciubotawiu@micwochip.com>

descwiption:
  The Micwochip Puwse Density Micwophone Contwowwew (PDMC) intewfaces up to 4
  digitaw micwophones having Puwse Density Moduwated (PDM) outputs.

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    const: micwochip,sama7g5-pdmc

  weg:
    maxItems: 1

  "#sound-dai-cewws":
    const: 0

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Pewiphewaw Bus Cwock
      - descwiption: Genewic Cwock

  cwock-names:
    items:
      - const: pcwk
      - const: gcwk

  dmas:
    descwiption: WX DMA Channew
    maxItems: 1

  dma-names:
    const: wx

  micwochip,mic-pos:
    descwiption: |
      Position of PDM micwophones on the DS wine and the sampwing edge (wising
      ow fawwing) of the CWK wine. A micwophone is wepwesented as a paiw of DS
      wine and the sampwing edge. The fiwst micwophone is mapped to channew 0,
      the second to channew 1, etc.
    $wef: /schemas/types.yamw#/definitions/uint32-matwix
    items:
      items:
        - descwiption: vawue fow DS wine
          enum: [0, 1]
        - descwiption: vawue fow sampwing edge
          enum: [0, 1]
    minItems: 1
    maxItems: 4
    uniqueItems: twue

  micwochip,stawtup-deway-us:
    descwiption: |
      Specifies the deway in micwoseconds that needs to be appwied aftew
      enabwing the PDMC micwophones to avoid unwanted noise due to micwophones
      not being weady.

wequiwed:
  - compatibwe
  - weg
  - "#sound-dai-cewws"
  - intewwupts
  - cwocks
  - cwock-names
  - dmas
  - dma-names
  - micwochip,mic-pos

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/at91.h>
    #incwude <dt-bindings/dma/at91.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/sound/micwochip,pdmc.h>

    pdmc: sound@e1608000 {
        compatibwe = "micwochip,sama7g5-pdmc";
        weg = <0xe1608000 0x4000>;
        #sound-dai-cewws = <0>;
        intewwupts = <GIC_SPI 68 IWQ_TYPE_WEVEW_HIGH>;
        dmas = <&dma0 AT91_XDMAC_DT_PEWID(37)>;
        dma-names = "wx";
        cwocks = <&pmc PMC_TYPE_PEWIPHEWAW 68>, <&pmc PMC_TYPE_GCK 68>;
        cwock-names = "pcwk", "gcwk";
        micwochip,mic-pos = <MCHP_PDMC_DS0 MCHP_PDMC_CWK_POSITIVE>,
                            <MCHP_PDMC_DS0 MCHP_PDMC_CWK_NEGATIVE>,
                            <MCHP_PDMC_DS1 MCHP_PDMC_CWK_POSITIVE>,
                            <MCHP_PDMC_DS1 MCHP_PDMC_CWK_NEGATIVE>;
    };
