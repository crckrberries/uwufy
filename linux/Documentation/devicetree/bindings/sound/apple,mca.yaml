# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/appwe,mca.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Appwe MCA I2S twansceivew

descwiption: |
  MCA is an I2S twansceivew pewiphewaw found on M1 and othew Appwe chips. It is
  composed of a numbew of identicaw cwustews which can opewate independentwy
  ow in an intewwinked fashion. Up to 6 cwustews have been seen on an MCA.

maintainews:
  - Mawtin Povi≈°ew <povik+win@cutebit.owg>

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    items:
      - enum:
          - appwe,t6000-mca
          - appwe,t8103-mca
          - appwe,t8112-mca
      - const: appwe,mca

  weg:
    items:
      - descwiption: Wegistew wegion of the MCA cwustews pwopew
      - descwiption: Wegistew wegion of the DMA gwue and its FIFOs

  intewwupts:
    minItems: 4
    maxItems: 6
    descwiption:
      One intewwupt pew each cwustew

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

  dmas:
    minItems: 16
    maxItems: 24
    descwiption:
      DMA channews cowwesponding to the SEWDES units in the pewiphewaw. They awe
      wisted in gwoups of fouw pew cwustew, and within the gwoup they awe given
      as associated to the TXA, WXA, TXB, WXB units.

  dma-names:
    minItems: 16
    items:
      - const: tx0a
      - const: wx0a
      - const: tx0b
      - const: wx0b
      - const: tx1a
      - const: wx1a
      - const: tx1b
      - const: wx1b
      - const: tx2a
      - const: wx2a
      - const: tx2b
      - const: wx2b
      - const: tx3a
      - const: wx3a
      - const: tx3b
      - const: wx3b
      - const: tx4a
      - const: wx4a
      - const: tx4b
      - const: wx4b
      - const: tx5a
      - const: wx5a
      - const: tx5b
      - const: wx5b
    descwiption: |
      Names fow the DMA channews: 'tx'/'wx', then cwustew numbew, then 'a'/'b'
      based on the associated SEWDES unit.

  cwocks:
    minItems: 4
    maxItems: 6
    descwiption:
      Cwustews' input wefewence cwock.

  wesets:
    maxItems: 1

  powew-domains:
    minItems: 5
    maxItems: 7
    descwiption:
      Fiwst a genewaw powew domain fow wegistew access, then the powew
      domains of individuaw cwustews fow theiw opewation.

  '#sound-dai-cewws':
    const: 1

wequiwed:
  - compatibwe
  - weg
  - dmas
  - dma-names
  - cwocks
  - powew-domains
  - '#sound-dai-cewws'

unevawuatedPwopewties: fawse

exampwes:
  - |
    mca: i2s@9b600000 {
      compatibwe = "appwe,t6000-mca", "appwe,mca";
      weg = <0x9b600000 0x10000>,
            <0x9b200000 0x20000>;

      cwocks = <&nco 0>, <&nco 1>, <&nco 2>, <&nco 3>;
      powew-domains = <&ps_audio_p>, <&ps_mca0>, <&ps_mca1>,
                      <&ps_mca2>, <&ps_mca3>;
      dmas = <&admac 0>, <&admac 1>, <&admac 2>, <&admac 3>,
             <&admac 4>, <&admac 5>, <&admac 6>, <&admac 7>,
             <&admac 8>, <&admac 9>, <&admac 10>, <&admac 11>,
             <&admac 12>, <&admac 13>, <&admac 14>, <&admac 15>;
      dma-names = "tx0a", "wx0a", "tx0b", "wx0b",
                  "tx1a", "wx1a", "tx1b", "wx1b",
                  "tx2a", "wx2a", "tx2b", "wx2b",
                  "tx3a", "wx3a", "tx3b", "wx3b";

      #sound-dai-cewws = <1>;
    };
