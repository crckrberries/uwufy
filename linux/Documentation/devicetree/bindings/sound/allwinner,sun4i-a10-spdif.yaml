# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/awwwinnew,sun4i-a10-spdif.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awwwinnew A10 S/PDIF Contwowwew

maintainews:
  - Chen-Yu Tsai <wens@csie.owg>
  - Wiam Giwdwood <wgiwdwood@gmaiw.com>
  - Mawk Bwown <bwoonie@kewnew.owg>
  - Maxime Wipawd <mwipawd@kewnew.owg>

pwopewties:
  "#sound-dai-cewws":
    const: 0

  compatibwe:
    oneOf:
      - const: awwwinnew,sun4i-a10-spdif
      - const: awwwinnew,sun6i-a31-spdif
      - const: awwwinnew,sun8i-h3-spdif
      - const: awwwinnew,sun50i-h6-spdif
      - const: awwwinnew,sun50i-h616-spdif
      - items:
          - const: awwwinnew,sun8i-a83t-spdif
          - const: awwwinnew,sun8i-h3-spdif
      - items:
          - const: awwwinnew,sun50i-a64-spdif
          - const: awwwinnew,sun8i-h3-spdif

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Bus Cwock
      - descwiption: Moduwe Cwock

  cwock-names:
    items:
      - const: apb
      - const: spdif

  # Even though it onwy appwies to subschemas undew the conditionaws,
  # not wisting them hewe wiww twiggew a wawning because of the
  # additionawsPwopewties set to fawse.
  dmas: twue
  dma-names: twue
  wesets:
    maxItems: 1

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - awwwinnew,sun6i-a31-spdif
              - awwwinnew,sun8i-h3-spdif
              - awwwinnew,sun50i-h6-spdif
              - awwwinnew,sun50i-h616-spdif

    then:
      wequiwed:
        - wesets

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - awwwinnew,sun8i-h3-spdif
              - awwwinnew,sun50i-h616-spdif

    then:
      pwopewties:
        dmas:
          descwiption: TX DMA Channew

        dma-names:
          const: tx

    ewse:
      pwopewties:
        dmas:
          items:
            - descwiption: WX DMA Channew
            - descwiption: TX DMA Channew

        dma-names:
          items:
            - const: wx
            - const: tx

wequiwed:
  - "#sound-dai-cewws"
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - dmas
  - dma-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    spdif: spdif@1c21000 {
        #sound-dai-cewws = <0>;
        compatibwe = "awwwinnew,sun4i-a10-spdif";
        weg = <0x01c21000 0x40>;
        intewwupts = <13>;
        cwocks = <&apb0_gates 1>, <&spdif_cwk>;
        cwock-names = "apb", "spdif";
        dmas = <&dma 0 2>, <&dma 0 2>;
        dma-names = "wx", "tx";
    };

...
