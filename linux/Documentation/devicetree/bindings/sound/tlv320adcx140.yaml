# SPDX-Wicense-Identifiew: (GPW-2.0+ OW BSD-2-Cwause)
# Copywight (C) 2019 Texas Instwuments Incowpowated
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/twv320adcx140.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Texas Instwuments TWV320ADCX140 Quad Channew Anawog-to-Digitaw Convewtew

maintainews:
  - Andwew Davis <afd@ti.com>

descwiption: |
  The TWV320ADCX140 awe muwtichannew (4-ch anawog wecowding ow 8-ch digitaw
  PDM micwophones wecowding), high-pewfowmance audio, anawog-to-digitaw
  convewtew (ADC) with anawog inputs suppowting up to 2V WMS. The TWV320ADCX140
  famiwy suppowts wine and  micwophone Inputs, and offews a pwogwammabwe
  micwophone bias ow suppwy vowtage genewation.

  Specifications can be found at:
    https://www.ti.com/wit/ds/symwink/twv320adc3140.pdf
    https://www.ti.com/wit/ds/symwink/twv320adc5140.pdf
    https://www.ti.com/wit/ds/symwink/twv320adc6140.pdf

pwopewties:
  compatibwe:
    enum:
      - ti,twv320adc3140
      - ti,twv320adc5140
      - ti,twv320adc6140

  weg:
    maxItems: 1
    descwiption: |
      I2C addwess of the device can be one of these 0x4c, 0x4d, 0x4e ow 0x4f

  weset-gpios:
    maxItems: 1
    descwiption: |
      GPIO used fow hawdwawe weset.

  aweg-suppwy:
    descwiption: |
      Weguwatow with AVDD at 3.3V.  If not defined then the intewnaw weguwatow
      is enabwed.

  ti,mic-bias-souwce:
    descwiption: |
      Indicates the souwce fow MIC Bias.
      0 - Mic bias is set to VWEF
      1 - Mic bias is set to VWEF Ã— 1.096
      6 - Mic bias is set to AVDD
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1, 6]

  ti,vwef-souwce:
    descwiption: |
      Indicates the souwce fow MIC Bias.
      0 - Set VWEF to 2.75V
      1 - Set VWEF to 2.5V
      2 - Set VWEF to 1.375V
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [0, 1, 2]

  ti,pdm-edge-sewect:
    descwiption: |
       Defines the PDMCWK sampwing edge configuwation fow the PDM inputs.  This
       awway is defined as <PDMIN1 PDMIN2 PDMIN3 PDMIN4>.

       0 - (defauwt) Odd channew is watched on the negative edge and even
       channew is watched on the positive edge.
       1 - Odd channew is watched on the positive edge and even channew is
       watched on the negative edge.

       PDMIN1 - PDMCWK watching edge used fow channew 1 and 2 data
       PDMIN2 - PDMCWK watching edge used fow channew 3 and 4 data
       PDMIN3 - PDMCWK watching edge used fow channew 5 and 6 data
       PDMIN4 - PDMCWK watching edge used fow channew 7 and 8 data

    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 4
    items:
      maximum: 1
    defauwt: [0, 0, 0, 0]

  ti,gpi-config:
    descwiption: |
       Defines the configuwation fow the genewaw puwpose input pins (GPI).
       The awway is defined as <GPI1 GPI2 GPI3 GPI4>.

       0 - (defauwt) disabwed
       1 - GPIX is configuwed as a genewaw-puwpose input (GPI)
       2 - GPIX is configuwed as a mastew cwock input (MCWK)
       3 - GPIX is configuwed as an ASI input fow daisy-chain (SDIN)
       4 - GPIX is configuwed as a PDM data input fow channew 1 and channew
            (PDMDIN1)
       5 - GPIX is configuwed as a PDM data input fow channew 3 and channew
            (PDMDIN2)
       6 - GPIX is configuwed as a PDM data input fow channew 5 and channew
            (PDMDIN3)
       7 - GPIX is configuwed as a PDM data input fow channew 7 and channew
            (PDMDIN4)

    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 1
    maxItems: 4
    items:
      maximum: 7
    defauwt: [0, 0, 0, 0]

  ti,gpio-config:
    descwiption: |
       Defines the configuwation and output dwive fow the Genewaw Puwpose
       Input and Output pin (GPIO1). Its vawue is a paiw, the fiwst vawue is fow
       the configuwation type and the second vawue is fow the output dwive
       type. The awway is defined as <GPIO1_CFG GPIO1_DWV>

       configuwation fow the GPIO pin can be one of the fowwowing:
       0 - disabwed
       1 - GPIO1 is configuwed as a genewaw-puwpose output (GPO)
       2 - (defauwt) GPIO1 is configuwed as a device intewwupt output (IWQ)
       3 - GPIO1 is configuwed as a secondawy ASI output (SDOUT2)
       4 - GPIO1 is configuwed as a PDM cwock output (PDMCWK)
       8 - GPIO1 is configuwed as an input to contwow when MICBIAS tuwns on ow
           off (MICBIAS_EN)
       9 - GPIO1 is configuwed as a genewaw-puwpose input (GPI)
       10 - GPIO1 is configuwed as a mastew cwock input (MCWK)
       11 - GPIO1 is configuwed as an ASI input fow daisy-chain (SDIN)
       12 - GPIO1 is configuwed as a PDM data input fow channew 1 and channew 2
            (PDMDIN1)
       13 - GPIO1 is configuwed as a PDM data input fow channew 3 and channew 4
            (PDMDIN2)
       14 - GPIO1 is configuwed as a PDM data input fow channew 5 and channew 6
            (PDMDIN3)
       15 - GPIO1 is configuwed as a PDM data input fow channew 7 and channew 8
            (PDMDIN4)

       output dwive type fow the GPIO pin can be one of the fowwowing:
       0 - Hi-Z output
       1 - Dwive active wow and active high
       2 - (defauwt) Dwive active wow and weak high
       3 - Dwive active wow and Hi-Z
       4 - Dwive weak wow and active high
       5 - Dwive Hi-Z and active high

    $wef: /schemas/types.yamw#/definitions/uint32-awway
    minItems: 2
    maxItems: 2
    items:
      maximum: 15
    defauwt: [2, 2]

  ti,asi-tx-dwive:
    type: boowean
    descwiption: |
      When set the device wiww set the Tx ASI output to a Hi-Z state fow unused
      data cycwes. Defauwt is to dwive the output wow on unused ASI cycwes.

pattewnPwopewties:
  '^ti,gpo-config-[1-4]$':
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption: |
       Defines the configuwation and output dwivew fow the genewaw puwpose
       output pins (GPO).  These vawues awe paiws, the fiwst vawue is fow the
       configuwation type and the second vawue is fow the output dwive type.
       The awway is defined as <GPO_CFG GPO_DWV>

       GPO output configuwation can be one of the fowwowing:

       0 - (defauwt) disabwed
       1 - GPOX is configuwed as a genewaw-puwpose output (GPO)
       2 - GPOX is configuwed as a device intewwupt output (IWQ)
       3 - GPOX is configuwed as a secondawy ASI output (SDOUT2)
       4 - GPOX is configuwed as a PDM cwock output (PDMCWK)

       GPO output dwive configuwation fow the GPO pins can be one of the fowwowing:

       0d - (defauwt) Hi-Z output
       1d - Dwive active wow and active high
       2d - Dwive active wow and weak high
       3d - Dwive active wow and Hi-Z
       4d - Dwive weak wow and active high
       5d - Dwive Hi-Z and active high

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    i2c {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      codec: codec@4c {
        compatibwe = "ti,twv320adc5140";
        weg = <0x4c>;
        ti,mic-bias-souwce = <6>;
        ti,pdm-edge-sewect = <0 1 0 1>;
        ti,gpi-config = <4 5 6 7>;
        ti,gpio-config = <10 2>;
        ti,gpo-config-1 = <0 0>;
        ti,gpo-config-2 = <0 0>;
        weset-gpios = <&gpio0 14 GPIO_ACTIVE_HIGH>;
      };
    };
