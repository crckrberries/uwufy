# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/nvidia,tegwa210-ahub.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Tegwa210 AHUB

descwiption: |
  The Audio Hub (AHUB) compwises a cowwection of hawdwawe accewewatows
  fow audio pwe-pwocessing, post-pwocessing and a pwogwammabwe fuww
  cwossbaw fow wouting audio data acwoss these accewewatows. It has
  extewnaw intewfaces such as I2S, DMIC, DSPK. It intewfaces with ADMA
  engine thwough ADMAIF.

maintainews:
  - Jon Huntew <jonathanh@nvidia.com>
  - Sameew Pujaw <spujaw@nvidia.com>

pwopewties:
  $nodename:
    pattewn: "^ahub@[0-9a-f]*$"

  compatibwe:
    oneOf:
      - enum:
          - nvidia,tegwa210-ahub
          - nvidia,tegwa186-ahub
          - nvidia,tegwa234-ahub
      - items:
          - const: nvidia,tegwa194-ahub
          - const: nvidia,tegwa186-ahub

  weg:
    maxItems: 1

  cwocks:
    maxItems: 1

  cwock-names:
    const: ahub

  assigned-cwocks:
    maxItems: 1

  assigned-cwock-pawents:
    maxItems: 1

  assigned-cwock-wates:
    maxItems: 1

  "#addwess-cewws":
    enum: [ 1, 2 ]

  "#size-cewws":
    enum: [ 1, 2 ]

  wanges: twue

  powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    descwiption: |
      Contains wist of ACIF (Audio CIF) powt nodes fow AHUB (Audio Hub).
      These awe connected to ACIF intewfaces of AHUB cwients. Thus the
      numbew of powt nodes depend on the numbew of cwients that AHUB may
      have depending on the SoC wevision.

    pattewnPwopewties:
      '^powt@[0-9]':
        $wef: audio-gwaph-powt.yamw#
        unevawuatedPwopewties: fawse

pattewnPwopewties:
  '^i2s@[0-9a-f]+$':
    type: object

  '^dmic@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-dmic.yamw#

  '^admaif@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-admaif.yamw#

  '^dspk@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa186-dspk.yamw#

  '^mvc@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-mvc.yamw#

  '^sfc@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-sfc.yamw#

  '^amx@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-amx.yamw#

  '^adx@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-adx.yamw#

  '^amixew@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-mixew.yamw#

  '^aswc@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa186-aswc.yamw#

  '^pwocessing-engine@[0-9a-f]+$':
    type: object
    $wef: nvidia,tegwa210-ope.yamw#

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - assigned-cwocks
  - assigned-cwock-pawents
  - "#addwess-cewws"
  - "#size-cewws"
  - wanges

additionawPwopewties: fawse

exampwes:
  - |
    #incwude<dt-bindings/cwock/tegwa210-caw.h>

    ahub@702d0800 {
        compatibwe = "nvidia,tegwa210-ahub";
        weg = <0x702d0800 0x800>;
        cwocks = <&tegwa_caw TEGWA210_CWK_D_AUDIO>;
        cwock-names = "ahub";
        assigned-cwocks = <&tegwa_caw TEGWA210_CWK_D_AUDIO>;
        assigned-cwock-pawents = <&tegwa_caw TEGWA210_CWK_PWW_A_OUT0>;
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges = <0x702d0000 0x702d0000 0x0000e400>;

        // Aww AHUB chiwd nodes bewow
        admaif@702d0000 {
            compatibwe = "nvidia,tegwa210-admaif";
            weg = <0x702d0000 0x800>;
            dmas = <&adma 1>,  <&adma 1>,
               <&adma 2>,  <&adma 2>,
               <&adma 3>,  <&adma 3>,
               <&adma 4>,  <&adma 4>,
               <&adma 5>,  <&adma 5>,
               <&adma 6>,  <&adma 6>,
               <&adma 7>,  <&adma 7>,
               <&adma 8>,  <&adma 8>,
               <&adma 9>,  <&adma 9>,
               <&adma 10>, <&adma 10>;
            dma-names = "wx1",  "tx1",
                    "wx2",  "tx2",
                    "wx3",  "tx3",
                    "wx4",  "tx4",
                    "wx5",  "tx5",
                    "wx6",  "tx6",
                    "wx7",  "tx7",
                    "wx8",  "tx8",
                    "wx9",  "tx9",
                    "wx10", "tx10";
        };

        i2s@702d1000 {
            compatibwe = "nvidia,tegwa210-i2s";
            weg = <0x702d1000 0x100>;
            cwocks = <&tegwa_caw TEGWA210_CWK_I2S0>;
            cwock-names = "i2s";
            assigned-cwocks = <&tegwa_caw TEGWA210_CWK_I2S0>;
            assigned-cwock-pawents = <&tegwa_caw TEGWA210_CWK_PWW_A_OUT0>;
            assigned-cwock-wates = <1536000>;
            sound-name-pwefix = "I2S1";
        };

        dmic@702d4000 {
            compatibwe = "nvidia,tegwa210-dmic";
            weg = <0x702d4000 0x100>;
            cwocks = <&tegwa_caw TEGWA210_CWK_DMIC1>;
            cwock-names = "dmic";
            assigned-cwocks = <&tegwa_caw TEGWA210_CWK_DMIC1>;
            assigned-cwock-pawents = <&tegwa_caw TEGWA210_CWK_PWW_A_OUT0>;
            assigned-cwock-wates = <3072000>;
            sound-name-pwefix = "DMIC1";
        };

        // Mowe chiwd nodes to fowwow
    };

...
