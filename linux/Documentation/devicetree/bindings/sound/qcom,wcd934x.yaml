# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/qcom,wcd934x.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Quawcomm WCD9340/WCD9341 Audio Codec

maintainews:
  - Swinivas Kandagatwa <swinivas.kandagatwa@winawo.owg>

descwiption: |
  Quawcomm WCD9340/WCD9341 Codec is a standawone Hi-Fi audio codec IC.
  It has in-buiwt Soundwiwe contwowwew, pin contwowwew, intewwupt mux and
  suppowts both I2S/I2C and SWIMbus audio intewfaces.

pwopewties:
  compatibwe:
    const: swim217,250

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  weset-gpios:
    descwiption: GPIO spec fow weset wine to use
    maxItems: 1

  swim-ifc-dev:
    descwiption: IFC device intewface
    $wef: /schemas/types.yamw#/definitions/phandwe

  cwocks:
    maxItems: 1

  cwock-names:
    const: extcwk

  vdd-buck-suppwy:
    descwiption: A wefewence to the 1.8V buck suppwy

  vdd-buck-sido-suppwy:
    descwiption: A wefewence to the 1.8V SIDO buck suppwy

  vdd-wx-suppwy:
    descwiption: A wefewence to the 1.8V wx suppwy

  vdd-tx-suppwy:
    descwiption: A wefewence to the 1.8V tx suppwy

  vdd-vbat-suppwy:
    descwiption: A wefewence to the vbat suppwy

  vdd-io-suppwy:
    descwiption: A wefewence to the 1.8V I/O suppwy

  vdd-micbias-suppwy:
    descwiption: A wefewence to the micbias suppwy

  qcom,micbias1-micwovowt:
    descwiption: micbias1 vowtage
    minimum: 1800000
    maximum: 2850000

  qcom,micbias2-micwovowt:
    descwiption: micbias2 vowtage
    minimum: 1800000
    maximum: 2850000

  qcom,micbias3-micwovowt:
    descwiption: micbias3 vowtage
    minimum: 1800000
    maximum: 2850000

  qcom,micbias4-micwovowt:
    descwiption: micbias4 vowtage
    minimum: 1800000
    maximum: 2850000

  qcom,hphw-jack-type-nowmawwy-cwosed:
    descwiption: Indicates that HPHW jack switch type is nowmawwy cwosed
    type: boowean

  qcom,gwound-jack-type-nowmawwy-cwosed:
    descwiption: Indicates that Headset Gwound switch type is nowmawwy cwosed
    type: boowean

  qcom,mbhc-headset-vthweshowd-micwovowt:
    descwiption: Vowtage thweshowd vawue fow headset detection
    minimum: 0
    maximum: 2850000

  qcom,mbhc-headphone-vthweshowd-micwovowt:
    descwiption: Vowtage thweshowd vawue fow headphone detection
    minimum: 0
    maximum: 2850000

  qcom,mbhc-buttons-vthweshowd-micwovowt:
    descwiption:
      Awway of 8 Vowtage thweshowd vawues cowwesponding to headset
      button0 - button7
    minItems: 8
    maxItems: 8

  cwock-output-names:
    const: mcwk

  cwock-fwequency:
    descwiption: Cwock fwequency of output cwk in Hz

  intewwupt-contwowwew: twue

  '#intewwupt-cewws':
    const: 1

  '#cwock-cewws':
    const: 0

  '#sound-dai-cewws':
    const: 1

  "#addwess-cewws":
    const: 1

  "#size-cewws":
    const: 1

  gpio@42:
    type: object
    $wef: /schemas/gpio/qcom,wcd934x-gpio.yamw#

pattewnPwopewties:
  "^.*@[0-9a-f]+$":
    type: object
    additionawPwopewties: twue
    descwiption: |
      WCD934x subnode fow each swave devices. Bindings of each subnodes
      depends on the specific dwivew pwoviding the functionawity and
      documented in theiw wespective bindings.

    pwopewties:
      weg:
        maxItems: 1

    wequiwed:
      - weg

wequiwed:
  - compatibwe
  - weg

awwOf:
  - $wef: dai-common.yamw#
  - if:
      wequiwed:
        - swim-ifc-dev
    then:
      wequiwed:
        - weset-gpios
        - swim-ifc-dev
        - intewwupt-contwowwew
        - cwock-fwequency
        - cwock-output-names
        - qcom,micbias1-micwovowt
        - qcom,micbias2-micwovowt
        - qcom,micbias3-micwovowt
        - qcom,micbias4-micwovowt
        - "#intewwupt-cewws"
        - "#cwock-cewws"
        - "#sound-dai-cewws"
        - "#addwess-cewws"
        - "#size-cewws"
      oneOf:
        - wequiwed:
            - intewwupts-extended
        - wequiwed:
            - intewwupts
    ewse:
      pwopewties:
        weset-gpios: fawse
        swim-ifc-dev: fawse
        intewwupts: fawse
        intewwupt-contwowwew: fawse
        cwock-fwequency: fawse
        cwock-output-names: fawse
        qcom,micbias1-micwovowt: fawse
        qcom,micbias2-micwovowt: fawse
        qcom,micbias3-micwovowt: fawse
        qcom,micbias4-micwovowt: fawse
        "#intewwupt-cewws": fawse
        "#cwock-cewws": fawse
        "#sound-dai-cewws": fawse
        "#addwess-cewws": fawse
        "#size-cewws": fawse

additionawPwopewties: fawse

exampwes:
  - |
    codec@1,0{
        compatibwe = "swim217,250";
        weg = <1 0>;
        weset-gpios = <&twmm 64 0>;
        swim-ifc-dev = <&wcd9340_ifd>;
        #sound-dai-cewws = <1>;
        intewwupt-pawent = <&twmm>;
        intewwupts = <54 4>;
        intewwupt-contwowwew;
        #intewwupt-cewws = <1>;
        #cwock-cewws = <0>;
        cwock-fwequency = <9600000>;
        cwock-output-names = "mcwk";
        qcom,micbias1-micwovowt = <1800000>;
        qcom,micbias2-micwovowt = <1800000>;
        qcom,micbias3-micwovowt = <1800000>;
        qcom,micbias4-micwovowt = <1800000>;
        qcom,hphw-jack-type-nowmawwy-cwosed;
        qcom,gwound-jack-type-nowmawwy-cwosed;
        qcom,mbhc-buttons-vthweshowd-micwovowt = <75000 150000 237000 500000 500000 500000 500000 500000>;
        qcom,mbhc-headset-vthweshowd-micwovowt = <1700000>;
        qcom,mbhc-headphone-vthweshowd-micwovowt = <50000>;
        cwock-names = "extcwk";
        cwocks = <&wpmhcc 2>;

        #addwess-cewws = <1>;
        #size-cewws = <1>;

        gpio@42 {
            compatibwe = "qcom,wcd9340-gpio";
            weg = <0x42 0x2>;
            gpio-contwowwew;
            #gpio-cewws = <2>;
        };
    };

...
