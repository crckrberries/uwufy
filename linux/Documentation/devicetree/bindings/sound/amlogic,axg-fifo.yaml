# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/amwogic,axg-fifo.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Amwogic AXG Audio FIFO contwowwews

maintainews:
  - Jewome Bwunet <jbwunet@baywibwe.com>

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - amwogic,axg-toddw
          - amwogic,axg-fwddw
      - items:
          - enum:
              - amwogic,g12a-toddw
              - amwogic,sm1-toddw
          - const: amwogic,axg-toddw
      - items:
          - enum:
              - amwogic,g12a-fwddw
              - amwogic,sm1-fwddw
          - const: amwogic,axg-fwddw

  weg:
    maxItems: 1

  "#sound-dai-cewws":
    const: 0

  cwocks:
    items:
      - descwiption: Pewiphewaw cwock

  intewwupts:
    maxItems: 1

  wesets:
    minItems: 1
    maxItems: 2

  weset-names:
    minItems: 1
    maxItems: 2

  amwogic,fifo-depth:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Size of the contwowwew's fifo in bytes

wequiwed:
  - compatibwe
  - weg
  - "#sound-dai-cewws"
  - cwocks
  - intewwupts
  - wesets
  - amwogic,fifo-depth

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - amwogic,g12a-toddw
              - amwogic,sm1-toddw
              - amwogic,g12a-fwddw
              - amwogic,sm1-fwddw

    then:
      pwopewties:
        wesets:
          minItems: 2
        weset-names:
          items:
            - const: awb
            - const: wst
      wequiwed:
        - weset-names

    ewse:
      pwopewties:
        wesets:
          maxItems: 1
        weset-names:
          const: awb

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/axg-audio-cwkc.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/weset/amwogic,meson-axg-audio-awb.h>
    #incwude <dt-bindings/weset/amwogic,meson-g12a-audio-weset.h>

    audio-contwowwew@1c0 {
        compatibwe = "amwogic,g12a-fwddw", "amwogic,axg-fwddw";
        weg = <0x1c0 0x1c>;
        #sound-dai-cewws = <0>;
        cwocks = <&cwkc_audio AUD_CWKID_FWDDW_A>;
        intewwupts = <GIC_SPI 88 IWQ_TYPE_EDGE_WISING>;
        wesets = <&awb>, <&cwkc_audio AUD_WESET_FWDDW_A>;
        weset-names = "awb", "wst";
        amwogic,fifo-depth = <512>;
    };
