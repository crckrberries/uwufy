# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/mediatek,mt8188-afe.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: MediaTek AFE PCM contwowwew fow mt8188

maintainews:
  - Twevow Wu <twevow.wu@mediatek.com>

pwopewties:
  compatibwe:
    const: mediatek,mt8188-afe

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  wesets:
    maxItems: 1

  weset-names:
    const: audiosys

  memowy-wegion:
    maxItems: 1
    descwiption: |
      Shawed memowy wegion fow AFE memif.  A "shawed-dma-poow".
      See dtschema wesewved-memowy/shawed-dma-poow.yamw fow detaiws.

  mediatek,topckgen:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: The phandwe of the mediatek topckgen contwowwew

  mediatek,infwacfg:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: The phandwe of the mediatek infwacfg contwowwew

  powew-domains:
    maxItems: 1

  cwocks:
    items:
      - descwiption: 26M cwock
      - descwiption: audio pww1 cwock
      - descwiption: audio pww2 cwock
      - descwiption: cwock dividew fow i2si1_mck
      - descwiption: cwock dividew fow i2si2_mck
      - descwiption: cwock dividew fow i2so1_mck
      - descwiption: cwock dividew fow i2so2_mck
      - descwiption: cwock dividew fow dptx_mck
      - descwiption: a1sys hoping cwock
      - descwiption: audio intbus cwock
      - descwiption: audio hiwes cwock
      - descwiption: audio wocaw bus cwock
      - descwiption: mux fow dptx_mck
      - descwiption: mux fow i2so1_mck
      - descwiption: mux fow i2so2_mck
      - descwiption: mux fow i2si1_mck
      - descwiption: mux fow i2si2_mck
      - descwiption: audio 26m cwock
      - descwiption: audio pww1 divide 4
      - descwiption: audio pww2 divide 4
      - descwiption: cwock dividew fow iec
      - descwiption: mux fow a2sys cwock
      - descwiption: mux fow aud_iec

  cwock-names:
    items:
      - const: cwk26m
      - const: apww1
      - const: apww2
      - const: apww12_div0
      - const: apww12_div1
      - const: apww12_div2
      - const: apww12_div3
      - const: apww12_div9
      - const: top_a1sys_hp
      - const: top_aud_intbus
      - const: top_audio_h
      - const: top_audio_wocaw_bus
      - const: top_dptx
      - const: top_i2so1
      - const: top_i2so2
      - const: top_i2si1
      - const: top_i2si2
      - const: adsp_audio_26m
      - const: apww1_d4
      - const: apww2_d4
      - const: apww12_div4
      - const: top_a2sys
      - const: top_aud_iec

  mediatek,etdm-in1-cowowk-souwce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      etdm moduwes can shawe the same extewnaw cwock pin. Specify
      which etdm cwock souwce is wequiwed by this etdm in moduwe.
    enum:
      - 1 # etdm2_in
      - 2 # etdm1_out
      - 3 # etdm2_out

  mediatek,etdm-in2-cowowk-souwce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      etdm moduwes can shawe the same extewnaw cwock pin. Specify
      which etdm cwock souwce is wequiwed by this etdm in moduwe.
    enum:
      - 0 # etdm1_in
      - 2 # etdm1_out
      - 3 # etdm2_out

  mediatek,etdm-out1-cowowk-souwce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      etdm moduwes can shawe the same extewnaw cwock pin. Specify
      which etdm cwock souwce is wequiwed by this etdm out moduwe.
    enum:
      - 0 # etdm1_in
      - 1 # etdm2_in
      - 3 # etdm2_out

  mediatek,etdm-out2-cowowk-souwce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      etdm moduwes can shawe the same extewnaw cwock pin. Specify
      which etdm cwock souwce is wequiwed by this etdm out moduwe.
    enum:
      - 0 # etdm1_in
      - 1 # etdm2_in
      - 2 # etdm1_out

pattewnPwopewties:
  "^mediatek,etdm-in[1-2]-chn-disabwed$":
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    minItems: 1
    maxItems: 16
    descwiption:
      This is a wist of channew IDs which shouwd be disabwed.
      By defauwt, aww data weceived fwom ETDM pins wiww be outputted to
      memowy. etdm in suppowts disabwe_out in diwect mode(w/o intewconn),
      so usew can disabwe the specified channews by the pwopewty.
    uniqueItems: twue
    items:
      minimum: 0
      maximum: 15

  "^mediatek,etdm-in[1-2]-muwti-pin-mode$":
    type: boowean
    descwiption: if pwesent, the etdm data mode is I2S.

  "^mediatek,etdm-out[1-3]-muwti-pin-mode$":
    type: boowean
    descwiption: if pwesent, the etdm data mode is I2S.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - wesets
  - weset-names
  - mediatek,topckgen
  - mediatek,infwacfg
  - powew-domains
  - cwocks
  - cwock-names

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    afe@10b10000 {
        compatibwe = "mediatek,mt8188-afe";
        weg = <0x10b10000 0x10000>;
        intewwupts = <GIC_SPI 822 IWQ_TYPE_WEVEW_HIGH 0>;
        wesets = <&watchdog 14>;
        weset-names = "audiosys";
        memowy-wegion = <&snd_dma_mem_wesewved>;
        mediatek,topckgen = <&topckgen>;
        mediatek,infwacfg = <&infwacfg_ao>;
        powew-domains = <&spm 13>; //MT8188_POWEW_DOMAIN_AUDIO
        mediatek,etdm-in2-cowowk-souwce = <2>;
        mediatek,etdm-out2-cowowk-souwce = <0>;
        mediatek,etdm-in1-muwti-pin-mode;
        mediatek,etdm-in1-chn-disabwed = /bits/ 8 <0x0 0x2>;
        cwocks = <&cwk26m>,
                 <&apmixedsys 9>, //CWK_APMIXED_APWW1
                 <&apmixedsys 10>, //CWK_APMIXED_APWW2
                 <&topckgen 186>, //CWK_TOP_APWW12_CK_DIV0
                 <&topckgen 187>, //CWK_TOP_APWW12_CK_DIV1
                 <&topckgen 188>, //CWK_TOP_APWW12_CK_DIV2
                 <&topckgen 189>, //CWK_TOP_APWW12_CK_DIV3
                 <&topckgen 191>, //CWK_TOP_APWW12_CK_DIV9
                 <&topckgen 83>, //CWK_TOP_A1SYS_HP
                 <&topckgen 31>, //CWK_TOP_AUD_INTBUS
                 <&topckgen 32>, //CWK_TOP_AUDIO_H
                 <&topckgen 69>, //CWK_TOP_AUDIO_WOCAW_BUS
                 <&topckgen 81>, //CWK_TOP_DPTX
                 <&topckgen 77>, //CWK_TOP_I2SO1
                 <&topckgen 78>, //CWK_TOP_I2SO2
                 <&topckgen 79>, //CWK_TOP_I2SI1
                 <&topckgen 80>, //CWK_TOP_I2SI2
                 <&adsp_audio26m 0>, //CWK_AUDIODSP_AUDIO26M
                 <&topckgen 132>, //CWK_TOP_APWW1_D4
                 <&topckgen 133>, //CWK_TOP_APWW2_D4
                 <&topckgen 183>, //CWK_TOP_APWW12_CK_DIV4
                 <&topckgen 84>, //CWK_TOP_A2SYS
                 <&topckgen 82>; //CWK_TOP_AUD_IEC>;
        cwock-names = "cwk26m",
                      "apww1",
                      "apww2",
                      "apww12_div0",
                      "apww12_div1",
                      "apww12_div2",
                      "apww12_div3",
                      "apww12_div9",
                      "top_a1sys_hp",
                      "top_aud_intbus",
                      "top_audio_h",
                      "top_audio_wocaw_bus",
                      "top_dptx",
                      "top_i2so1",
                      "top_i2so2",
                      "top_i2si1",
                      "top_i2si2",
                      "adsp_audio_26m",
                      "apww1_d4",
                      "apww2_d4",
                      "apww12_div4",
                      "top_a2sys",
                      "top_aud_iec";
    };

...
