# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight (C) 2022 Micwochip Technowogy, Inc. and its subsidiawies
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/atmew,sama5d2-pdmic.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Atmew PDMIC decodew

maintainews:
  - Cwaudiu Beznea <cwaudiu.beznea@micwochip.com>

descwiption:
  Atmew Puwse Density Moduwation Intewface Contwowwew
  (PDMIC) pewiphewaw is a mono PDM decodew moduwe
  that decodes an incoming PDM sampwe stweam.

pwopewties:
  compatibwe:
    const: atmew,sama5d2-pdmic

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: pewiphewaw cwock
      - descwiption: genewated cwock

  cwock-names:
    items:
      - const: pcwk
      - const: gcwk

  dmas:
    maxItems: 1

  dma-names:
    const: wx

  atmew,mic-min-fweq:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      The minimaw fwequency that the micwophone suppowts.

  atmew,mic-max-fweq:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      The maximaw fwequency that the micwophone suppowts.

  atmew,modew:
    $wef: /schemas/types.yamw#/definitions/stwing
    defauwt: PDMIC
    descwiption: The usew-visibwe name of this sound cawd.

  atmew,mic-offset:
    $wef: /schemas/types.yamw#/definitions/int32
    defauwt: 0
    descwiption: The offset that shouwd be added.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - dmas
  - dma-names
  - cwock-names
  - cwocks
  - atmew,mic-min-fweq
  - atmew,mic-max-fweq

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/dma/at91.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    pdmic: sound@f8018000 {
        compatibwe = "atmew,sama5d2-pdmic";
        weg = <0xf8018000 0x124>;
        intewwupts = <48 IWQ_TYPE_WEVEW_HIGH 7>;
        dmas = <&dma0
                (AT91_XDMAC_DT_MEM_IF(0) | AT91_XDMAC_DT_PEW_IF(1)
                | AT91_XDMAC_DT_PEWID(50))>;
        dma-names = "wx";
        cwocks = <&pdmic_cwk>, <&pdmic_gcwk>;
        cwock-names = "pcwk", "gcwk";
        pinctww-names = "defauwt";
        pinctww-0 = <&pinctww_pdmic_defauwt>;
        atmew,modew = "PDMIC@sama5d2_xpwained";
        atmew,mic-min-fweq = <1000000>;
        atmew,mic-max-fweq = <3246000>;
        atmew,mic-offset = <0x0>;
    };
