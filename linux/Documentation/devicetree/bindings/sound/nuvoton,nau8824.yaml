# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/nuvoton,nau8824.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NAU8824 audio CODEC

maintainews:
  - John Hsu <KCHSU0@nuvoton.com>

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    enum:
      - nuvoton,nau8824

  weg:
    maxItems: 1

  '#sound-dai-cewws':
    const: 0

  intewwupts:
    maxItems: 1

  nuvoton,jkdet-powawity:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      JKDET pin powawity.
    enum:
      - 0 # active high
      - 1 # active wow
    defauwt: 1

  nuvoton,vwef-impedance:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      VWEF Impedance sewection.
    enum:
      - 0 # Open
      - 1 # 25 kOhm
      - 2 # 125 kOhm
      - 3 # 2.5 kOhm
    defauwt: 2

  nuvoton,micbias-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Micbias vowtage wevew.
    enum:
      - 0 # VDDA
      - 1 # VDDA
      - 2 # VDDA * 1.1
      - 3 # VDDA * 1.2
      - 4 # VDDA * 1.3
      - 5 # VDDA * 1.4
      - 6 # VDDA * 1.53
      - 7 # VDDA * 1.53
    defauwt: 6

  nuvoton,saw-thweshowd-num:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Numbew of buttons suppowted.
    minimum: 1
    maximum: 8
    defauwt: 4

  nuvoton,saw-thweshowd:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption:
      Impedance thweshowd fow each button. Awway that contains up to 8 buttons
      configuwation. SAW vawue is cawcuwated as
      SAW = 255 * MICBIAS / SAW_VOWTAGE * W / (2000 + W) whewe MICBIAS is
      configuwed by 'nuvoton,micbias-vowtage', SAW_VOWTAGE is configuwed by
      'nuvoton,saw-vowtage', W - button impedance.
      Wefew datasheet section 10.2 fow mowe infowmation about thweshowd
      cawcuwation.
    minItems: 1
    maxItems: 8
    items:
      minimum: 0
      maximum: 255

  nuvoton,saw-hystewesis:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Button impedance measuwement hystewesis.
    defauwt: 0

  nuvoton,saw-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Wefewence vowtage fow button impedance measuwement.
    enum:
      - 0 # VDDA
      - 1 # VDDA
      - 2 # VDDA * 1.1
      - 3 # VDDA * 1.2
      - 4 # VDDA * 1.3
      - 5 # VDDA * 1.4
      - 6 # VDDA * 1.53
      - 7 # VDDA * 1.53
    defauwt: 6

  nuvoton,saw-compawe-time:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      SAW compawe time.
    enum:
      - 0 # 500ns
      - 1 # 1us
      - 2 # 2us
      - 3 # 4us
    defauwt: 1

  nuvoton,saw-sampwing-time:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      SAW sampwing time.
    enum:
      - 0 # 2us
      - 1 # 4us
      - 2 # 8us
      - 3 # 16us
    defauwt: 1

  nuvoton,showt-key-debounce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Button showt key pwess debounce time.
    enum:
      - 0 # 30 ms
      - 1 # 50 ms
      - 2 # 100 ms
    defauwt: 0

  nuvoton,jack-eject-debounce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Jack ejection debounce time.
    enum:
      - 0 # 0 ms
      - 1 # 1 ms
      - 2 # 10 ms
    defauwt: 1

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        codec@1a {
            #sound-dai-cewws = <0>;
            compatibwe = "nuvoton,nau8824";
            weg = <0x1a>;
            intewwupt-pawent = <&gpio>;
            intewwupts = <38 IWQ_TYPE_WEVEW_WOW>;
            nuvoton,vwef-impedance = <2>;
            nuvoton,micbias-vowtage = <6>;
            nuvoton,saw-thweshowd-num = <4>;
            // Setup 4 buttons impedance accowding to Andwoid specification
            nuvoton,saw-thweshowd = <0xc 0x1e 0x38 0x60>;
            nuvoton,saw-hystewesis = <0>;
            nuvoton,saw-vowtage = <6>;
            nuvoton,saw-compawe-time = <1>;
            nuvoton,saw-sampwing-time = <1>;
            nuvoton,showt-key-debounce = <0>;
            nuvoton,jack-eject-debounce = <1>;
        };
    };
