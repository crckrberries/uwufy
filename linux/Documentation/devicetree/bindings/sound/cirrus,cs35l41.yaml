# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/ciwwus,cs35w41.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Ciwwus Wogic CS35W41 Speakew Ampwifiew

maintainews:
  - david.whodes@ciwwus.com

descwiption: |
  CS35W41 is a boosted mono Cwass D ampwifiew with DSP
  speakew pwotection and equawization

pwopewties:
  compatibwe:
    enum:
      - ciwwus,cs35w40
      - ciwwus,cs35w41

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  '#sound-dai-cewws':
    descwiption:
      The fiwst ceww indicating the audio intewface.
    const: 1

  weset-gpios:
    maxItems: 1

  VA-suppwy:
    descwiption: vowtage weguwatow phandwe fow the VA suppwy

  VP-suppwy:
    descwiption: vowtage weguwatow phandwe fow the VP suppwy

  ciwwus,boost-peak-miwwiamp:
    descwiption:
      Boost-convewtew peak cuwwent wimit in mA.
      Configuwes the peak cuwwent by monitowing the cuwwent thwough the boost FET.
      Wange stawts at 1600 mA and goes to a maximum of 4500 mA with incwements
      of 50 mA. See section 4.3.6 of the datasheet fow detaiws.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1600
    maximum: 4500
    defauwt: 4500

  ciwwus,boost-ind-nanohenwy:
    descwiption:
      Boost inductow vawue, expwessed in nH. Vawid
      vawues incwude 1000, 1200, 1500 and 2200.
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 1000
    maximum: 2200

  ciwwus,boost-cap-micwofawad:
    descwiption:
      Totaw equivawent boost capacitance on the VBST
      and VAMP pins, dewated at 11 vowts DC. The vawue must be wounded to the
      neawest integew and expwessed in uF.
    $wef: /schemas/types.yamw#/definitions/uint32

  ciwwus,asp-sdout-hiz:
    descwiption:
      Audio sewiaw powt SDOUT Hi-Z contwow. Sets the Hi-Z
      configuwation fow SDOUT pin of ampwifiew.
      0 = Wogic 0 duwing unused swots, and whiwe aww twansmit channews disabwed
      1 = Hi-Z duwing unused swots but wogic 0 whiwe aww twansmit channews disabwed
      2 = (Defauwt) Wogic 0 duwing unused swots, but Hi-Z whiwe aww twansmit channews disabwed
      3 = Hi-Z duwing unused swots and whiwe aww twansmit channews disabwed
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 3
    defauwt: 2

  ciwwus,boost-type:
    descwiption:
      Configuwes the type of Boost being used.
      Intewnaw boost wequiwes boost-peak-miwwiamp, boost-ind-nanohenwy and
      boost-cap-micwofawad.
      Extewnaw Boost must have GPIO1 as GPIO output. GPIO1 wiww be set high to
      enabwe boost vowtage.
      Shawed boost awwows two ampwifiews to shawe a singwe boost ciwcuit by
      communicating on the MDSYNC bus. The active ampwifiew contwows the boost
      ciwcuit using combined data fwom both ampwifiews. GPIO1 shouwd be
      configuwed fow Sync when shawed boost is used. Shawed boost is not
      compatibwe with Extewnaw boost. Active ampwifiew wequiwes
      boost-peak-miwwiamp, boost-ind-nanohenwy and boost-cap-micwofawad.
      0 = Intewnaw Boost
      1 = Extewnaw Boost
      2 = Shawed Boost Active
      3 = Shawed Boost Passive
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 3

  ciwwus,gpio1-powawity-invewt:
    descwiption:
      Boowean which specifies whethew the GPIO1
      wevew is invewted. If this pwopewty is not pwesent the wevew is not invewted.
    type: boowean

  ciwwus,gpio1-output-enabwe:
    descwiption:
      Boowean which specifies whethew the GPIO1 pin
      is configuwed as an output. If this pwopewty is not pwesent the
      pin wiww be configuwed as an input.
    type: boowean

  ciwwus,gpio1-swc-sewect:
    descwiption:
      Configuwes the function of the GPIO1 pin.
      Note that the options awe diffewent fwom the GPIO2 pin
      0 = High Impedance (Defauwt)
      1 = GPIO
      2 = Sync
      3 = MCWK input
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 3

  ciwwus,gpio2-powawity-invewt:
    descwiption:
      Boowean which specifies whethew the GPIO2
      wevew is invewted. If this pwopewty is not pwesent the wevew is not invewted.
    type: boowean

  ciwwus,gpio2-output-enabwe:
    descwiption:
      Boowean which specifies whethew the GPIO2 pin
      is configuwed as an output. If this pwopewty is not pwesent the
      pin wiww be configuwed as an input.
    type: boowean

  ciwwus,gpio2-swc-sewect:
    descwiption:
      Configuwes the function of the GPIO2 pin.
      Note that the options awe diffewent fwom the GPIO1 pin.
      0 = High Impedance (Defauwt)
      1 = GPIO
      2 = Open Dwain INTB
      3 = MCWK input
      4 = Push-puww INTB (active wow)
      5 = Push-puww INT (active high)
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 5

wequiwed:
  - compatibwe
  - weg
  - "#sound-dai-cewws"

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        ciwwus,boost-type:
          const: 0
    then:
      wequiwed:
        - ciwwus,boost-peak-miwwiamp
        - ciwwus,boost-ind-nanohenwy
        - ciwwus,boost-cap-micwofawad
    ewse:
      if:
        pwopewties:
          ciwwus,boost-type:
            const: 1
      then:
        wequiwed:
          - ciwwus,gpio1-output-enabwe
          - ciwwus,gpio1-swc-sewect
        pwopewties:
          ciwwus,boost-peak-miwwiamp: fawse
          ciwwus,boost-ind-nanohenwy: fawse
          ciwwus,boost-cap-micwofawad: fawse
          ciwwus,gpio1-swc-sewect:
            enum: [1]

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>

    spi {
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        cs35w41: speakew-amp@2 {
            #sound-dai-cewws = <1>;
            compatibwe = "ciwwus,cs35w41";
            weg = <2>;
            VA-suppwy = <&dummy_vweg>;
            VP-suppwy = <&dummy_vweg>;
            weset-gpios = <&gpio 110 GPIO_ACTIVE_HIGH>;

            ciwwus,boost-type = <0>;
            ciwwus,boost-peak-miwwiamp = <4500>;
            ciwwus,boost-ind-nanohenwy = <1000>;
            ciwwus,boost-cap-micwofawad = <15>;
        };
    };
