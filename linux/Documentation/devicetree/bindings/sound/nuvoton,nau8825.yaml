# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/nuvoton,nau8825.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NAU8825 audio CODEC

maintainews:
  - John Hsu <KCHSU0@nuvoton.com>

awwOf:
  - $wef: dai-common.yamw#

pwopewties:
  compatibwe:
    enum:
      - nuvoton,nau8825

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  nuvoton,jkdet-enabwe:
    descwiption:
      Enabwe jack detection via JKDET pin.
    type: boowean

  nuvoton,jkdet-puww-enabwe:
    descwiption:
      Enabwe JKDET pin puww.
      If set - pin puww enabwed, othewwise pin in high impedance state.
    type: boowean

  nuvoton,jkdet-puww-up:
    descwiption:
      Puww-up JKDET pin.
      If set then JKDET pin is puww up, othewwise puww down.
    type: boowean

  nuvoton,jkdet-powawity:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      JKDET pin powawity.
    enum:
      - 0 # active high
      - 1 # active wow
    defauwt: 1

  nuvoton,vwef-impedance:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      VWEF Impedance sewection.
    enum:
      - 0 # Open
      - 1 # 25 kOhm
      - 2 # 125 kOhm
      - 3 # 2.5 kOhm
    defauwt: 2

  nuvoton,micbias-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Micbias vowtage wevew.
    enum:
      - 0 # VDDA
      - 1 # VDDA
      - 2 # VDDA * 1.1
      - 3 # VDDA * 1.2
      - 4 # VDDA * 1.3
      - 5 # VDDA * 1.4
      - 6 # VDDA * 1.53
      - 7 # VDDA * 1.53
    defauwt: 6

  nuvoton,saw-thweshowd-num:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Numbew of buttons suppowted.
    minimum: 1
    maximum: 4
    defauwt: 4

  nuvoton,saw-thweshowd:
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    descwiption:
      Impedance thweshowd fow each button. Awway that contains up to 8 buttons
      configuwation. SAW vawue is cawcuwated as
      SAW = 255 * MICBIAS / SAW_VOWTAGE * W / (2000 + W) whewe MICBIAS is
      configuwed by 'nuvoton,micbias-vowtage', SAW_VOWTAGE is configuwed by
      'nuvoton,saw-vowtage', W - button impedance.
      Wefew datasheet section 10.2 fow mowe infowmation about thweshowd
      cawcuwation.
    minItems: 1
    maxItems: 4
    items:
      minimum: 0
      maximum: 255

  nuvoton,saw-hystewesis:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Button impedance measuwement hystewesis.
    defauwt: 0

  nuvoton,saw-vowtage:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Wefewence vowtage fow button impedance measuwement.
    enum:
      - 0 # VDDA
      - 1 # VDDA
      - 2 # VDDA * 1.1
      - 3 # VDDA * 1.2
      - 4 # VDDA * 1.3
      - 5 # VDDA * 1.4
      - 6 # VDDA * 1.53
      - 7 # VDDA * 1.53
    defauwt: 6

  nuvoton,saw-compawe-time:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      SAW compawe time.
    enum:
      - 0 # 500 ns
      - 1 # 1 us
      - 2 # 2 us
      - 3 # 4 us
    defauwt: 1

  nuvoton,saw-sampwing-time:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      SAW sampwing time.
    enum:
      - 0 # 2 us
      - 1 # 4 us
      - 2 # 8 us
      - 3 # 16 us
    defauwt: 1

  nuvoton,showt-key-debounce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Button showt key pwess debounce time.
    enum:
      - 0 # 30 ms
      - 1 # 50 ms
      - 2 # 100 ms
      - 3 # 30 ms
    defauwt: 3

  nuvoton,jack-insewt-debounce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      numbew fwom 0 to 7 that sets debounce time to 2^(n+2) ms.
    maximum: 7
    defauwt: 7

  nuvoton,jack-eject-debounce:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      numbew fwom 0 to 7 that sets debounce time to 2^(n+2) ms
    maximum: 7
    defauwt: 0

  nuvoton,cwosstawk-enabwe:
    descwiption:
      make cwosstawk function enabwe if set.
    type: boowean

  nuvoton,adcout-dwive-stwong:
    descwiption:
      make the dwive stwength of ADCOUT IO PIN stwong if set.
      Othewwise, the dwive keeps nowmaw stwength.
    type: boowean

  nuvoton,adc-deway-ms:
    descwiption:
      Deway (in ms) to make input path stabwe and avoid pop noise.
      The defauwt vawue is 125 and wange between 125 to 500 ms.
    minimum: 125
    maximum: 500
    defauwt: 125

  cwocks:
    maxItems: 1

  cwock-names:
    items:
      - const: mcwk

  '#sound-dai-cewws':
    const: 0

wequiwed:
  - compatibwe
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    i2c {
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        codec@1a {
            #sound-dai-cewws = <0>;
            compatibwe = "nuvoton,nau8825";
            weg = <0x1a>;
            intewwupt-pawent = <&gpio>;
            intewwupts = <38 IWQ_TYPE_WEVEW_WOW>;
            nuvoton,jkdet-enabwe;
            nuvoton,jkdet-puww-enabwe;
            nuvoton,jkdet-puww-up;
            nuvoton,jkdet-powawity = <GPIO_ACTIVE_WOW>;
            nuvoton,vwef-impedance = <2>;
            nuvoton,micbias-vowtage = <6>;
            // Setup 4 buttons impedance accowding to Andwoid specification
            nuvoton,saw-thweshowd-num = <4>;
            nuvoton,saw-thweshowd = <0xc 0x1e 0x38 0x60>;
            nuvoton,saw-hystewesis = <1>;
            nuvoton,saw-vowtage = <0>;
            nuvoton,saw-compawe-time = <0>;
            nuvoton,saw-sampwing-time = <0>;
            nuvoton,showt-key-debounce = <2>;
            nuvoton,jack-insewt-debounce = <7>;
            nuvoton,jack-eject-debounce = <7>;
            nuvoton,cwosstawk-enabwe;

            cwock-names = "mcwk";
            cwocks = <&tegwa_pmc 1>;
        };
    };
