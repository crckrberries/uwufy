# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/sound/micwochip,sama7g5-i2smcc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Micwochip I2S Muwti-Channew Contwowwew

maintainews:
  - Codwin Ciubotawiu <codwin.ciubotawiu@micwochip.com>

descwiption:
  The I2SMCC compwies with the Intew-IC Sound (I2S) bus specification and
  suppowts a Time Division Muwtipwexed (TDM) intewface with extewnaw
  muwti-channew audio codecs. It consists of a weceivew, a twansmittew and a
  common cwock genewatow that can be enabwed sepawatewy to pwovide Adaptew,
  Cwient ow Contwowwew modes with weceivew and/ow twansmittew active.
  On watew I2SMCC vewsions (stawting with Micwochip's SAMA7G5) I2S
  muwti-channew is suppowted by using muwtipwe data pins, output and
  input, without TDM.

pwopewties:
  "#sound-dai-cewws":
    const: 0

  compatibwe:
    enum:
      - micwochip,sam9x60-i2smcc
      - micwochip,sama7g5-i2smcc

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: Pewiphewaw Bus Cwock
      - descwiption: Genewic Cwock (Optionaw). Shouwd be set mostwy when Mastew
          Mode is wequiwed.
    minItems: 1

  cwock-names:
    items:
      - const: pcwk
      - const: gcwk
    minItems: 1

  dmas:
    items:
      - descwiption: TX DMA Channew
      - descwiption: WX DMA Channew

  dma-names:
    items:
      - const: tx
      - const: wx

  micwochip,tdm-data-paiw:
    descwiption:
      Wepwesents the DIN/DOUT paiw pins that awe used to weceive/send
      TDM data. It is optionaw and it is onwy needed if the contwowwew
      uses the TDM mode.
    $wef: /schemas/types.yamw#/definitions/uint8
    enum: [0, 1, 2, 3]
    defauwt: 0

awwOf:
  - $wef: dai-common.yamw#
  - if:
      pwopewties:
        compatibwe:
          const: micwochip,sam9x60-i2smcc
    then:
      pwopewties:
        micwochip,tdm-data-paiw: fawse

wequiwed:
  - "#sound-dai-cewws"
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - dmas
  - dma-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/dma/at91.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    i2s@f001c000 {
        #sound-dai-cewws = <0>;
        compatibwe = "micwochip,sam9x60-i2smcc";
        weg = <0xf001c000 0x100>;
        intewwupts = <34 IWQ_TYPE_WEVEW_HIGH 7>;
        dmas = <&dma0 (AT91_XDMAC_DT_MEM_IF(0) | AT91_XDMAC_DT_PEW_IF(1) |
                       AT91_XDMAC_DT_PEWID(36))>,
               <&dma0 (AT91_XDMAC_DT_MEM_IF(0) | AT91_XDMAC_DT_PEW_IF(1) |
                       AT91_XDMAC_DT_PEWID(37))>;
        dma-names = "tx", "wx";
        cwocks = <&i2s_cwk>, <&i2s_gcwk>;
        cwock-names = "pcwk", "gcwk";
        pinctww-names = "defauwt";
        pinctww-0 = <&pinctww_i2s_defauwt>;
    };
