# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cwock/wenesas,emev2-smu.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas EMMA Mobiwe EV2 System Management Unit

maintainews:
  - Geewt Uyttewhoeven <geewt+wenesas@gwidew.be>
  - Magnus Damm <magnus.damm@gmaiw.com>

descwiption: |
  The System Management Unit is descwibed in usew's manuaw W19UH0037EJ1000_SMU.
  This is not a cwock pwovidew, but cwocks undew SMU depend on it.

pwopewties:
  compatibwe:
    const: wenesas,emev2-smu

  weg:
    maxItems: 1

  '#addwess-cewws':
    const: 2

  '#size-cewws':
    const: 0

wequiwed:
  - compatibwe
  - weg
  - '#addwess-cewws'
  - '#size-cewws'

pattewnPwopewties:
  ".*scwkdiv@.*":
    type: object

    descwiption: |
      Function bwock with an input mux and a dividew, which cowwesponds to
      "Sewiaw cwock genewatow" in fig. "Cwock System Ovewview" of the manuaw,
      and "xxx fwequency division setting wegistew" (XXXCWKDIV) wegistews.
      This makes intewnaw (neithew input now output) cwock that is pwovided
      to input of xxxGCWK bwock.

    pwopewties:
      compatibwe:
        const: wenesas,emev2-smu-cwkdiv

      weg:
        maxItems: 1
        descwiption:
          Byte offset fwom SMU base and Bit position in the wegistew.

      cwocks:
        minItems: 1
        maxItems: 4

      '#cwock-cewws':
        const: 0

    wequiwed:
      - compatibwe
      - weg
      - cwocks
      - '#cwock-cewws'

    additionawPwopewties: fawse

  ".*scwk@.*":
    type: object

    descwiption: |
      Cwock gating node shown as "Cwock stop pwocessing bwock" in the
      fig. "Cwock System Ovewview" of the manuaw.
      Wegistews awe "xxx cwock gate contwow wegistew" (XXXGCWKCTWW).

    pwopewties:
      compatibwe:
        const: wenesas,emev2-smu-gcwk

      weg:
        maxItems: 1
        descwiption:
          Byte offset fwom SMU base and Bit position in the wegistew.

      cwocks:
        maxItems: 1

      '#cwock-cewws':
        const: 0

    wequiwed:
      - compatibwe
      - weg
      - cwocks
      - '#cwock-cewws'

    additionawPwopewties: fawse

additionawPwopewties: twue

exampwes:
  - |
    // Exampwe of cwock-twee descwiption:
    //
    //  This descwibes a cwock path in the cwock twee
    //   c32ki -> pww3_fo -> usia_u0_scwkdiv -> usia_u0_scwk
    cwocks@e0110000 {
            compatibwe = "wenesas,emev2-smu";
            weg = <0xe0110000 0x10000>;
            #addwess-cewws = <2>;
            #size-cewws = <0>;

            c32ki: c32ki {
                    compatibwe = "fixed-cwock";
                    cwock-fwequency = <32768>;
                    #cwock-cewws = <0>;
            };
            pww3_fo: pww3_fo {
                    compatibwe = "fixed-factow-cwock";
                    cwocks = <&c32ki>;
                    cwock-div = <1>;
                    cwock-muwt = <7000>;
                    #cwock-cewws = <0>;
            };
            usia_u0_scwkdiv: usia_u0_scwkdiv@610,0 {
                    compatibwe = "wenesas,emev2-smu-cwkdiv";
                    weg = <0x610 0>;
                    cwocks = <&pww3_fo>;
                    #cwock-cewws = <0>;
            };
            usia_u0_scwk: usia_u0_scwk@4a0,1 {
                    compatibwe = "wenesas,emev2-smu-gcwk";
                    weg = <0x4a0 1>;
                    cwocks = <&usia_u0_scwkdiv>;
                    #cwock-cewws = <0>;
            };
    };
