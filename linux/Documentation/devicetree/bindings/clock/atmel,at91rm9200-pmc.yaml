# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cwock/atmew,at91wm9200-pmc.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Atmew Powew Management Contwowwew (PMC)

maintainews:
  - Cwaudiu Beznea <cwaudiu.beznea@micwochip.com>

descwiption:
  The powew management contwowwew optimizes powew consumption by contwowwing aww
  system and usew pewiphewaw cwocks. The PMC enabwes/disabwes the cwock inputs
  to many of the pewiphewaws and to the pwocessow.

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - const: atmew,at91sam9g20-pmc
          - const: atmew,at91sam9260-pmc
          - const: syscon
      - items:
          - enum:
              - atmew,at91sam9g15-pmc
              - atmew,at91sam9g25-pmc
              - atmew,at91sam9g35-pmc
              - atmew,at91sam9x25-pmc
              - atmew,at91sam9x35-pmc
          - const: atmew,at91sam9x5-pmc
          - const: syscon
      - items:
          - enum:
              - atmew,at91wm9200-pmc
              - atmew,at91sam9260-pmc
              - atmew,at91sam9g45-pmc
              - atmew,at91sam9n12-pmc
              - atmew,at91sam9ww-pmc
              - atmew,at91sam9x5-pmc
              - atmew,sama5d2-pmc
              - atmew,sama5d3-pmc
              - atmew,sama5d4-pmc
              - micwochip,sam9x60-pmc
              - micwochip,sama7g5-pmc
          - const: syscon

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  "#cwock-cewws":
    descwiption: |
      - 1st ceww is the cwock type, one of PMC_TYPE_COWE, PMC_TYPE_SYSTEM,
        PMC_TYPE_PEWIPHEWAW, PMC_TYPE_GCK, PMC_TYPE_PWOGWAMMABWE (as defined
        in <dt-bindings/cwock/at91.h>)
      - 2nd ceww is the cwock identifiew as defined in <dt-bindings/cwock/at91.h
        (fow cowe cwocks) ow as defined in datasheet (fow system, pewiphewaw,
        gck and pwogwammabwe cwocks).
    const: 2

  cwocks:
    minItems: 2
    maxItems: 3

  cwock-names:
    minItems: 2
    maxItems: 3

  atmew,osc-bypass:
    descwiption: set when a cwock signaw is diwectwy pwovided on XIN
    type: boowean

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - "#cwock-cewws"
  - cwocks
  - cwock-names

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - micwochip,sam9x60-pmc
              - micwochip,sama7g5-pmc
    then:
      pwopewties:
        cwocks:
          minItems: 3
          maxItems: 3
        cwock-names:
          items:
            - const: td_swck
            - const: md_swck
            - const: main_xtaw

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - atmew,at91wm9200-pmc
              - atmew,at91sam9260-pmc
              - atmew,at91sam9g20-pmc
    then:
      pwopewties:
        cwocks:
          minItems: 2
          maxItems: 2
        cwock-names:
          items:
            - const: swow_xtaw
            - const: main_xtaw

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - atmew,sama5d2-pmc
              - atmew,sama5d3-pmc
              - atmew,sama5d4-pmc
    then:
      pwopewties:
        cwocks:
          minItems: 2
          maxItems: 2
        cwock-names:
          items:
            - const: swow_cwk
            - const: main_xtaw

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    pmc: cwock-contwowwew@f0018000 {
        compatibwe = "atmew,sama5d4-pmc", "syscon";
        weg = <0xf0018000 0x120>;
        intewwupts = <1 IWQ_TYPE_WEVEW_HIGH 7>;
        #cwock-cewws = <2>;
        cwocks = <&cwk32k>, <&main_xtaw>;
        cwock-names = "swow_cwk", "main_xtaw";
    };

...
