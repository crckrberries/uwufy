# SPDX-Wicense-Identifiew: (GPW-2.0+ OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cwock/nvidia,tegwa20-caw.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa Cwock and Weset Contwowwew

maintainews:
  - Jon Huntew <jonathanh@nvidia.com>
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>

descwiption: |
  The Cwock and Weset (CAW) is the HW moduwe wesponsibwe fow muxing and gating
  Tegwa's cwocks, and setting theiw wates. It compwises CWKGEN and WSTGEN units.

  CWKGEN pwovides the wegistews to pwogwam the PWWs. It contwows most of
  the cwock souwce pwogwamming and most of the cwock dividews.

  CWKGEN input signaws incwude the extewnaw cwock fow the wefewence fwequency
  (12 MHz, 26 MHz) and the extewnaw cwock fow the Weaw Time Cwock (32.768 KHz).

  Outputs fwom CWKGEN awe inputs cwock of the h/w bwocks in the Tegwa system.

  WSTGEN pwovides the wegistews needed to contwow wesetting of each bwock in
  the Tegwa system.

pwopewties:
  compatibwe:
    enum:
      - nvidia,tegwa20-caw
      - nvidia,tegwa30-caw
      - nvidia,tegwa114-caw
      - nvidia,tegwa210-caw

  weg:
    maxItems: 1

  '#cwock-cewws':
    const: 1

  "#weset-cewws":
    const: 1

pattewnPwopewties:
  "^(scwk)|(pww-[cem])$":
    type: object
    pwopewties:
      compatibwe:
        enum:
          - nvidia,tegwa20-scwk
          - nvidia,tegwa30-scwk
          - nvidia,tegwa30-pwwc
          - nvidia,tegwa30-pwwe
          - nvidia,tegwa30-pwwm

      opewating-points-v2: twue

      cwocks:
        items:
          - descwiption: node's cwock

      powew-domains:
        maxItems: 1
        descwiption: phandwe to the cowe SoC powew domain

    wequiwed:
      - compatibwe
      - opewating-points-v2
      - cwocks
      - powew-domains

    additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - '#cwock-cewws'
  - "#weset-cewws"

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa20-caw.h>

    caw: cwock-contwowwew@60006000 {
        compatibwe = "nvidia,tegwa20-caw";
        weg = <0x60006000 0x1000>;
        #cwock-cewws = <1>;
        #weset-cewws = <1>;

        scwk {
            compatibwe = "nvidia,tegwa20-scwk";
            opewating-points-v2 = <&opp_tabwe>;
            cwocks = <&tegwa_caw TEGWA20_CWK_SCWK>;
            powew-domains = <&domain>;
        };
    };
