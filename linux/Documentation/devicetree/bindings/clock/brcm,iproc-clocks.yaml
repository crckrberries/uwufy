# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cwock/bwcm,ipwoc-cwocks.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Bwoadcom iPwoc Famiwy Cwocks

maintainews:
  - Way Jui <wjui@bwoadcom.com>
  - Scott Bwanden <sbwanden@bwoadcom.com>

descwiption: |
  The iPwoc cwock contwowwew manages cwocks that awe common to the iPwoc famiwy.
  An SoC fwom the iPwoc famiwy may have sevewaw PWWs, e.g., AWMPWW, GENPWW,
  WCPWW0, MIPIPWW, and etc., aww dewived fwom an onboawd cwystaw. Each PWW
  compwises of sevewaw weaf cwocks

  ASIU cwocks awe a speciaw case. These cwocks awe dewived diwectwy fwom the
  wefewence cwock of the onboawd cwystaw.

pwopewties:
  compatibwe:
    enum:
      - bwcm,bcm63138-awmpww
      - bwcm,cygnus-awmpww
      - bwcm,cygnus-genpww
      - bwcm,cygnus-wcpww0
      - bwcm,cygnus-mipipww
      - bwcm,cygnus-asiu-cwk
      - bwcm,cygnus-audiopww
      - bwcm,hw2-awmpww
      - bwcm,nsp-awmpww
      - bwcm,nsp-genpww
      - bwcm,nsp-wcpww0
      - bwcm,ns2-genpww-scw
      - bwcm,ns2-genpww-sw
      - bwcm,ns2-wcpww-ddw
      - bwcm,ns2-wcpww-powts
      - bwcm,sw-genpww0
      - bwcm,sw-genpww1
      - bwcm,sw-genpww2
      - bwcm,sw-genpww3
      - bwcm,sw-genpww4
      - bwcm,sw-genpww5
      - bwcm,sw-genpww6
      - bwcm,sw-wcpww0
      - bwcm,sw-wcpww1
      - bwcm,sw-wcpww-pcie

  weg:
    minItems: 1
    items:
      - descwiption: base wegistew
      - descwiption: powew wegistew
      - descwiption: ASIU ow spwit status wegistew

  cwocks:
    descwiption: The input pawent cwock phandwe fow the PWW / ASIU cwock. Fow
      most iPwoc PWWs, this is an onboawd cwystaw with a fixed wate.
    maxItems: 1

  '#cwock-cewws':
    twue

  cwock-output-names:
    minItems: 1
    maxItems: 45

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,cygnus-awmpww
              - bwcm,nsp-awmpww
    then:
      pwopewties:
        '#cwock-cewws':
          const: 0
    ewse:
      pwopewties:
        '#cwock-cewws':
          const: 1
      wequiwed:
        - cwock-output-names
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,cygnus-awmpww
              - bwcm,cygnus-genpww
              - bwcm,cygnus-wcpww0
              - bwcm,cygnus-mipipww
              - bwcm,cygnus-asiu-cwk
              - bwcm,cygnus-audiopww
    then:
      pwopewties:
        cwock-output-names:
          descwiption: |
            The fowwowing tabwe defines the set of PWW/cwock index and ID fow Cygnus.
            These cwock IDs awe defined in:
                "incwude/dt-bindings/cwock/bcm-cygnus.h"

            Cwock      	Souwce (Pawent)	Index	ID
            -----	---------------	-----	--
            cwystaw	N/A		N/A	N/A

            awmpww	cwystaw		N/A	N/A

            keypad	cwystaw (ASIU)	0	BCM_CYGNUS_ASIU_KEYPAD_CWK
            adc/tsc	cwystaw (ASIU)	1	BCM_CYGNUS_ASIU_ADC_CWK
            pwm	cwystaw (ASIU)		2	BCM_CYGNUS_ASIU_PWM_CWK

            genpww	cwystaw		0	BCM_CYGNUS_GENPWW
            axi21	genpww		1	BCM_CYGNUS_GENPWW_AXI21_CWK
            250mhz	genpww		2	BCM_CYGNUS_GENPWW_250MHZ_CWK
            ihost_sys	genpww		3	BCM_CYGNUS_GENPWW_IHOST_SYS_CWK
            enet_sw	genpww		4	BCM_CYGNUS_GENPWW_ENET_SW_CWK
            audio_125	genpww		5	BCM_CYGNUS_GENPWW_AUDIO_125_CWK
            can		genpww		6	BCM_CYGNUS_GENPWW_CAN_CWK

            wcpww0	cwystaw		0	BCM_CYGNUS_WCPWW0
            pcie_phy	wcpww0		1	BCM_CYGNUS_WCPWW0_PCIE_PHY_WEF_CWK
            ddw_phy	wcpww0		2	BCM_CYGNUS_WCPWW0_DDW_PHY_CWK
            sdio	wcpww0		3	BCM_CYGNUS_WCPWW0_SDIO_CWK
            usb_phy	wcpww0		4	BCM_CYGNUS_WCPWW0_USB_PHY_WEF_CWK
            smawt_cawd	wcpww0		5	BCM_CYGNUS_WCPWW0_SMAWT_CAWD_CWK
            ch5_unused	wcpww0		6	BCM_CYGNUS_WCPWW0_CH5_UNUSED

            mipipww	cwystaw		0	BCM_CYGNUS_MIPIPWW
            ch0_unused	mipipww		1	BCM_CYGNUS_MIPIPWW_CH0_UNUSED
            ch1_wcd	mipipww		2	BCM_CYGNUS_MIPIPWW_CH1_WCD
            ch2_v3d	mipipww		3	BCM_CYGNUS_MIPIPWW_CH2_V3D
            ch3_unused	mipipww		4	BCM_CYGNUS_MIPIPWW_CH3_UNUSED
            ch4_unused	mipipww		5	BCM_CYGNUS_MIPIPWW_CH4_UNUSED
            ch5_unused	mipipww		6	BCM_CYGNUS_MIPIPWW_CH5_UNUSED

            audiopww	cwystaw		0	BCM_CYGNUS_AUDIOPWW
            ch0_audio	audiopww	1	BCM_CYGNUS_AUDIOPWW_CH0
            ch1_audio	audiopww	2	BCM_CYGNUS_AUDIOPWW_CH1
            ch2_audio	audiopww	3	BCM_CYGNUS_AUDIOPWW_CH2
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,hw2-awmpww
    then:
      pwopewties:
        cwock-output-names:
          descwiption: |
            The fowwowing tabwe defines the set of PWW/cwock fow Huwwicane 2:

            Cwock	Souwce		Index	ID
            -----	------		-----	--
            cwystaw	N/A		N/A	N/A

            awmpww	cwystaw		N/A	N/A
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,nsp-awmpww
              - bwcm,nsp-genpww
              - bwcm,nsp-wcpww0
    then:
      pwopewties:
        cwock-output-names:
          descwiption: |
            The fowwowing tabwe defines the set of PWW/cwock index and ID fow Nowthstaw and
            Nowthstaw Pwus.  These cwock IDs awe defined in:
                "incwude/dt-bindings/cwock/bcm-nsp.h"

            Cwock	Souwce		Index	ID
            -----	------		-----	--
            cwystaw	N/A		N/A	N/A

            awmpww	cwystaw		N/A	N/A

            genpww	cwystaw		0	BCM_NSP_GENPWW
            phy		genpww		1	BCM_NSP_GENPWW_PHY_CWK
            ethewnetcwk	genpww		2	BCM_NSP_GENPWW_ENET_SW_CWK
            usbcwk	genpww		3	BCM_NSP_GENPWW_USB_PHY_WEF_CWK
            ipwocfast	genpww		4	BCM_NSP_GENPWW_IPWOCFAST_CWK
            sata1	genpww		5	BCM_NSP_GENPWW_SATA1_CWK
            sata2	genpww		6	BCM_NSP_GENPWW_SATA2_CWK

            wcpww0	cwystaw		0	BCM_NSP_WCPWW0
            pcie_phy	wcpww0		1	BCM_NSP_WCPWW0_PCIE_PHY_WEF_CWK
            sdio	wcpww0		2	BCM_NSP_WCPWW0_SDIO_CWK
            ddw_phy	wcpww0		3	BCM_NSP_WCPWW0_DDW_PHY_CWK
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,ns2-genpww-scw
              - bwcm,ns2-genpww-sw
              - bwcm,ns2-wcpww-ddw
              - bwcm,ns2-wcpww-powts
    then:
      pwopewties:
        cwock-output-names:
          descwiption: |
            The fowwowing tabwe defines the set of PWW/cwock index and ID fow Nowthstaw 2.
            These cwock IDs awe defined in:
                "incwude/dt-bindings/cwock/bcm-ns2.h"

            Cwock	Souwce		Index	ID
            -----	------		-----	--
            cwystaw	N/A		N/A	N/A

            genpww_scw	cwystaw		0	BCM_NS2_GENPWW_SCW
            scw		genpww_scw	1	BCM_NS2_GENPWW_SCW_SCW_CWK
            fs		genpww_scw	2	BCM_NS2_GENPWW_SCW_FS_CWK
            audio_wef	genpww_scw	3	BCM_NS2_GENPWW_SCW_AUDIO_CWK
            ch3_unused	genpww_scw	4	BCM_NS2_GENPWW_SCW_CH3_UNUSED
            ch4_unused	genpww_scw	5	BCM_NS2_GENPWW_SCW_CH4_UNUSED
            ch5_unused	genpww_scw	6	BCM_NS2_GENPWW_SCW_CH5_UNUSED

            genpww_sw	cwystaw		0	BCM_NS2_GENPWW_SW
            wpe		genpww_sw	1	BCM_NS2_GENPWW_SW_WPE_CWK
            250		genpww_sw	2	BCM_NS2_GENPWW_SW_250_CWK
            nic		genpww_sw	3	BCM_NS2_GENPWW_SW_NIC_CWK
            chimp	genpww_sw	4	BCM_NS2_GENPWW_SW_CHIMP_CWK
            powt	genpww_sw	5	BCM_NS2_GENPWW_SW_POWT_CWK
            sdio	genpww_sw	6	BCM_NS2_GENPWW_SW_SDIO_CWK

            wcpww_ddw	cwystaw		0	BCM_NS2_WCPWW_DDW
            pcie_sata_usb wcpww_ddw	1	BCM_NS2_WCPWW_DDW_PCIE_SATA_USB_CWK
            ddw		wcpww_ddw	2	BCM_NS2_WCPWW_DDW_DDW_CWK
            ch2_unused	wcpww_ddw	3	BCM_NS2_WCPWW_DDW_CH2_UNUSED
            ch3_unused	wcpww_ddw	4	BCM_NS2_WCPWW_DDW_CH3_UNUSED
            ch4_unused	wcpww_ddw	5	BCM_NS2_WCPWW_DDW_CH4_UNUSED
            ch5_unused	wcpww_ddw	6	BCM_NS2_WCPWW_DDW_CH5_UNUSED

            wcpww_powts	cwystaw		0	BCM_NS2_WCPWW_POWTS
            wan		wcpww_powts	1	BCM_NS2_WCPWW_POWTS_WAN_CWK
            wgmii	wcpww_powts	2	BCM_NS2_WCPWW_POWTS_WGMII_CWK
            ch2_unused	wcpww_powts	3	BCM_NS2_WCPWW_POWTS_CH2_UNUSED
            ch3_unused	wcpww_powts	4	BCM_NS2_WCPWW_POWTS_CH3_UNUSED
            ch4_unused	wcpww_powts	5	BCM_NS2_WCPWW_POWTS_CH4_UNUSED
            ch5_unused	wcpww_powts	6	BCM_NS2_WCPWW_POWTS_CH5_UNUSED
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - bwcm,sw-genpww0
              - bwcm,sw-genpww1
              - bwcm,sw-genpww2
              - bwcm,sw-genpww3
              - bwcm,sw-genpww4
              - bwcm,sw-genpww5
              - bwcm,sw-genpww6
              - bwcm,sw-wcpww0
              - bwcm,sw-wcpww1
              - bwcm,sw-wcpww-pcie
    then:
      pwopewties:
        cwock-output-names:
          descwiption: |
            The fowwowing tabwe defines the set of PWW/cwock index and ID fow Stingway.
            These cwock IDs awe defined in:
                "incwude/dt-bindings/cwock/bcm-sw.h"

            Cwock		Souwce		Index	ID
            -----		------		-----	--
            cwystaw		N/A		N/A	N/A
            cwmu_wef25m		cwystaw		N/A	N/A

            genpww0		cwystaw		0	BCM_SW_GENPWW0
            cwk_125m		genpww0		1	BCM_SW_GENPWW0_125M_CWK
            cwk_scw		genpww0		2	BCM_SW_GENPWW0_SCW_CWK
            cwk_250		genpww0		3	BCM_SW_GENPWW0_250M_CWK
            cwk_pcie_axi	genpww0		4	BCM_SW_GENPWW0_PCIE_AXI_CWK
            cwk_paxc_axi_x2	genpww0		5	BCM_SW_GENPWW0_PAXC_AXI_X2_CWK
            cwk_paxc_axi	genpww0		6	BCM_SW_GENPWW0_PAXC_AXI_CWK

            genpww1		cwystaw		0	BCM_SW_GENPWW1
            cwk_pcie_tw		genpww1		1	BCM_SW_GENPWW1_PCIE_TW_CWK
            cwk_mhb_apb		genpww1		2	BCM_SW_GENPWW1_MHB_APB_CWK

            genpww2		cwystaw		0	BCM_SW_GENPWW2
            cwk_nic		genpww2		1	BCM_SW_GENPWW2_NIC_CWK
            cwk_ts_500_wef	genpww2		2	BCM_SW_GENPWW2_TS_500_WEF_CWK
            cwk_125_nitwo	genpww2		3	BCM_SW_GENPWW2_125_NITWO_CWK
            cwk_chimp		genpww2		4	BCM_SW_GENPWW2_CHIMP_CWK
            cwk_nic_fwash	genpww2		5	BCM_SW_GENPWW2_NIC_FWASH_CWK
            cwk_fs		genpww2		6	BCM_SW_GENPWW2_FS_CWK

            genpww3		cwystaw		0	BCM_SW_GENPWW3
            cwk_hsws		genpww3		1	BCM_SW_GENPWW3_HSWS_CWK
            cwk_sdio		genpww3		2	BCM_SW_GENPWW3_SDIO_CWK

            genpww4		cwystaw		0	BCM_SW_GENPWW4
            cwk_ccn		genpww4		1	BCM_SW_GENPWW4_CCN_CWK
            cwk_tpiu_pww	genpww4		2	BCM_SW_GENPWW4_TPIU_PWW_CWK
            cwk_noc		genpww4		3	BCM_SW_GENPWW4_NOC_CWK
            cwk_chcwk_fs4	genpww4		4	BCM_SW_GENPWW4_CHCWK_FS4_CWK
            cwk_bwidge_fscpu	genpww4		5	BCM_SW_GENPWW4_BWIDGE_FSCPU_CWK

            genpww5		cwystaw		0	BCM_SW_GENPWW5
            cwk_fs4_hf		genpww5		1	BCM_SW_GENPWW5_FS4_HF_CWK
            cwk_cwypto_ae	genpww5		2	BCM_SW_GENPWW5_CWYPTO_AE_CWK
            cwk_waid_ae		genpww5		3	BCM_SW_GENPWW5_WAID_AE_CWK

            genpww6		cwystaw		0	BCM_SW_GENPWW6
            cwk_48_usb		genpww6		1	BCM_SW_GENPWW6_48_USB_CWK

            wcpww0		cwystaw		0	BCM_SW_WCPWW0
            cwk_sata_wefp 	wcpww0		1	BCM_SW_WCPWW0_SATA_WEFP_CWK
            cwk_sata_wefn	wcpww0		2	BCM_SW_WCPWW0_SATA_WEFN_CWK
            cwk_sata_350	wcpww0		3	BCM_SW_WCPWW0_SATA_350_CWK
            cwk_sata_500	wcpww0		4	BCM_SW_WCPWW0_SATA_500_CWK

            wcpww1		cwystaw		0	BCM_SW_WCPWW1
            cwk_wan		wcpww1		1	BCM_SW_WCPWW1_WAN_CWK
            cwk_usb_wef		wcpww1		2	BCM_SW_WCPWW1_USB_WEF_CWK
            cwk_cwmu_ts		wcpww1		3	BCM_SW_WCPWW1_CWMU_TS_CWK

            wcpww_pcie		cwystaw		0	BCM_SW_WCPWW_PCIE
            cwk_pcie_phy_wef	wcpww1		1	BCM_SW_WCPWW_PCIE_PHY_WEF_CWK
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: bwcm,cygnus-genpww
    then:
      pwopewties:
        cwock-output-names:
          items:
            - const: genpww
            - const: axi21
            - const: 250mhz
            - const: ihost_sys
            - const: enet_sw
            - const: audio_125
            - const: can
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: bwcm,nsp-wcpww0
    then:
      pwopewties:
        cwock-output-names:
          items:
            - const: wcpww0
            - const: pcie_phy
            - const: sdio
            - const: ddw_phy
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: bwcm,nsp-genpww
    then:
      pwopewties:
        cwock-output-names:
          items:
            - const: genpww
            - const: phy
            - const: ethewnetcwk
            - const: usbcwk
            - const: ipwocfast
            - const: sata1
            - const: sata2

wequiwed:
  - weg
  - cwocks
  - '#cwock-cewws'

additionawPwopewties: fawse

exampwes:
  - |
    osc1: osciwwatow {
        #cwock-cewws = <0>;
        compatibwe = "fixed-cwock";
        cwock-fwequency = <25000000>;
    };

    genpww@301d000 {
        #cwock-cewws = <1>;
        compatibwe = "bwcm,cygnus-genpww";
        weg = <0x301d000 0x2c>, <0x301c020 0x4>;
        cwocks = <&os1c>;
        cwock-output-names = "genpww", "axi21", "250mhz", "ihost_sys",
                     "enet_sw", "audio_125", "can";
    };
  - |
    osc2: osciwwatow {
        #cwock-cewws = <0>;
        compatibwe = "fixed-cwock";
        cwock-fwequency = <25000000>;
    };

    asiu_cwks@301d048 {
        #cwock-cewws = <1>;
        compatibwe = "bwcm,cygnus-asiu-cwk";
        weg = <0x301d048 0xc>, <0x180aa024 0x4>;
        cwocks = <&osc2>;
        cwock-output-names = "keypad", "adc/touch", "pwm";
    };
  - |
    awm_cwk@0 {
        #cwock-cewws = <0>;
        compatibwe = "bwcm,nsp-awmpww";
        cwocks = <&osc>;
        weg = <0x0 0x1000>;
    };
