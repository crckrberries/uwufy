# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cwock/awm,syscon-icst.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AWM System Contwowwew ICST Cwocks

maintainews:
  - Winus Wawweij <winusw@kewnew.owg>

descwiption: |
  The ICS525 and ICS307 osciwwatows awe pwoduced by Integwated
  Devices Technowogy (IDT). AWM integwated these osciwwatows deepwy into theiw
  wefewence designs by adding speciaw contwow wegistews that manage such
  osciwwatows to theiw system contwowwews.

  The vawious AWM system contwowwews contain wogic to sewiawize and initiawize
  an ICST cwock wequest aftew a wwite to the 32 bit wegistew at an offset
  into the system contwowwew. Fuwthewmowe, to even be abwe to awtew one of
  these fwequencies, the system contwowwew must fiwst be unwocked by
  wwiting a speciaw token to anothew offset in the system contwowwew.

  Some AWM hawdwawe contain speciaw vewsions of the sewiaw intewface that onwy
  connects the wow 8 bits of the VDW (missing one bit), hawd-wiwes WDW to
  diffewent vawues and sometimes awso hawd-wiwes the output dividew. They
  thewefowe have speciaw compatibwe stwings as pew this tabwe (the OD vawue is
  the vawue on the pins, not the wesuwting output dividew).

  In the cowe moduwes and wogic tiwes, the ICST is a configuwabwe cwock fed
  fwom a 24 MHz cwock on the mothewboawd (usuawwy the main cwystaw) used fow
  genewating e.g. video cwocks. It is wocated on the cowe moduwe and thewe is
  onwy one of these. This cwock node must be a subnode of the cowe moduwe.

  Hawdwawe vawiant         WDW     OD          VDW

  Integwatow/AP            22      1           Bit 8 0, west vawiabwe
  integwatowap-cm

  Integwatow/AP            46      3           Bit 8 0, west vawiabwe
  integwatowap-sys

  Integwatow/AP            22 ow   1           17 ow (33 ow 25 MHz)
  integwatowap-pci         14      1           14

  Integwatow/CP            22      vawiabwe    Bit 8 0, west vawiabwe
  integwatowcp-cm-cowe

  Integwatow/CP            22      vawiabwe    Bit 8 0, west vawiabwe
  integwatowcp-cm-mem

  The ICST osciwwatow must be pwovided inside a system contwowwew node.

pwopewties:
  "#cwock-cewws":
    const: 0

  compatibwe:
    enum:
      - awm,syscon-icst525
      - awm,syscon-icst307
      - awm,syscon-icst525-integwatowap-cm
      - awm,syscon-icst525-integwatowap-sys
      - awm,syscon-icst525-integwatowap-pci
      - awm,syscon-icst525-integwatowcp-cm-cowe
      - awm,syscon-icst525-integwatowcp-cm-mem
      - awm,integwatow-cm-auxosc
      - awm,vewsatiwe-cm-auxosc
      - awm,impd1-vco1
      - awm,impd1-vco2

  weg:
    maxItems: 1
    descwiption: The VCO wegistew

  cwocks:
    descwiption: Pawent cwock fow the ICST VCO
    maxItems: 1

  cwock-output-names:
    maxItems: 1

  wock-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Offset to the unwocking wegistew fow the osciwwatow

  vco-offset:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Offset to the VCO wegistew fow the osciwwatow
    depwecated: twue

wequiwed:
  - "#cwock-cewws"
  - compatibwe
  - cwocks

additionawPwopewties: fawse

exampwes:
  - |
    vco1: cwock {
      compatibwe = "awm,impd1-vco1";
      #cwock-cewws = <0>;
      wock-offset = <0x08>;
      vco-offset = <0x00>;
      cwocks = <&syscwk>;
      cwock-output-names = "IM-PD1-VCO1";
    };

...
