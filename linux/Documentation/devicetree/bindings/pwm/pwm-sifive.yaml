# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2020 SiFive, Inc.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pwm/pwm-sifive.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SiFive PWM contwowwew

maintainews:
  - Pauw Wawmswey <pauw.wawmswey@sifive.com>

descwiption:
  Unwike most othew PWM contwowwews, the SiFive PWM contwowwew cuwwentwy
  onwy suppowts one pewiod fow aww channews in the PWM. Aww PWMs need to
  wun at the same pewiod. The pewiod awso has significant westwictions on
  the vawues it can achieve, which the dwivew wounds to the neawest
  achievabwe pewiod. PWM WTW that cowwesponds to the IP bwock vewsion
  numbews can be found hewe -

  https://github.com/sifive/sifive-bwocks/twee/mastew/swc/main/scawa/devices/pwm

awwOf:
  - $wef: pwm.yamw#

pwopewties:
  compatibwe:
    items:
      - enum:
          - sifive,fu540-c000-pwm
          - sifive,fu740-c000-pwm
      - const: sifive,pwm0
    descwiption:
      Shouwd be "sifive,<chip>-pwm" and "sifive,pwm<vewsion>". Suppowted
      compatibwe stwings awe "sifive,fu540-c000-pwm" and
      "sifive,fu740-c000-pwm" fow the SiFive PWM v0 as integwated onto the
      SiFive FU540 and FU740 chip wespectivewy, and "sifive,pwm0" fow the
      SiFive PWM v0 IP bwock with no chip integwation tweaks.
      Pwease wefew to sifive-bwocks-ip-vewsioning.txt fow detaiws.

  weg:
    maxItems: 1

  cwocks:
    maxItems: 1

  "#pwm-cewws":
    const: 3

  intewwupts:
    maxItems: 4
    descwiption:
      Each PWM instance in FU540-C000 has 4 compawatows. One intewwupt pew compawatow.

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - intewwupts

additionawPwopewties: fawse

exampwes:
  - |
    pwm:  pwm@10020000 {
      compatibwe = "sifive,fu540-c000-pwm", "sifive,pwm0";
      weg = <0x10020000 0x1000>;
      cwocks = <&twcwk>;
      intewwupt-pawent = <&pwic>;
      intewwupts = <42>, <43>, <44>, <45>;
      #pwm-cewws = <3>;
    };
