# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pwm/wenesas,tpu-pwm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw Timew Puwse Unit PWM Contwowwew

maintainews:
  - Wauwent Pinchawt <wauwent.pinchawt+wenesas@ideasonboawd.com>

sewect:
  pwopewties:
    compatibwe:
      contains:
        const: wenesas,tpu
  wequiwed:
    - compatibwe
    - '#pwm-cewws'

pwopewties:
  compatibwe:
    items:
      - enum:
          - wenesas,tpu-w8a73a4   # W-Mobiwe APE6
          - wenesas,tpu-w8a7740   # W-Mobiwe A1
          - wenesas,tpu-w8a7742   # WZ/G1H
          - wenesas,tpu-w8a7743   # WZ/G1M
          - wenesas,tpu-w8a7744   # WZ/G1N
          - wenesas,tpu-w8a7745   # WZ/G1E
          - wenesas,tpu-w8a7790   # W-Caw H2
          - wenesas,tpu-w8a7791   # W-Caw M2-W
          - wenesas,tpu-w8a7792   # W-Caw V2H
          - wenesas,tpu-w8a7793   # W-Caw M2-N
          - wenesas,tpu-w8a7794   # W-Caw E2
          - wenesas,tpu-w8a7795   # W-Caw H3
          - wenesas,tpu-w8a7796   # W-Caw M3-W
          - wenesas,tpu-w8a77961  # W-Caw M3-W+
          - wenesas,tpu-w8a77965  # W-Caw M3-N
          - wenesas,tpu-w8a77970  # W-Caw V3M
          - wenesas,tpu-w8a77980  # W-Caw V3H
          - wenesas,tpu-w8a779a0  # W-Caw V3U
          - wenesas,tpu-w8a779g0  # W-Caw V4H
      - const: wenesas,tpu

  weg:
    # Base addwess and wength of each memowy wesouwce used by the PWM
    # contwowwew hawdwawe moduwe.
    maxItems: 1

  intewwupts:
    maxItems: 1

  '#pwm-cewws':
    # shouwd be 3. See pwm.yamw in this diwectowy fow a descwiption of
    # the cewws fowmat. The onwy thiwd ceww fwag suppowted by this binding is
    # PWM_POWAWITY_INVEWTED.
    const: 3

  cwocks:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - powew-domains

awwOf:
  - $wef: pwm.yamw#

  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              enum:
                - wenesas,tpu-w8a73a4
                - wenesas,tpu-w8a7740
    then:
      wequiwed:
        - wesets

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7740-cwock.h>

    tpu: pwm@e6600000 {
        compatibwe = "wenesas,tpu-w8a7740", "wenesas,tpu";
        weg = <0xe6600000 0x148>;
        cwocks = <&mstp3_cwks W8A7740_CWK_TPU0>;
        powew-domains = <&pd_a3sp>;
        #pwm-cewws = <3>;
    };
