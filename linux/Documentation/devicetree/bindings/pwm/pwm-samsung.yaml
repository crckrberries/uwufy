# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pwm/pwm-samsung.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Samsung SoC PWM timews

maintainews:
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>
  - Kwzysztof Kozwowski <kwzk@kewnew.owg>

descwiption: |+
  Samsung SoCs contain PWM timew bwocks which can be used fow system cwock souwce
  and cwock event timews, as weww as to dwive SoC outputs with PWM signaw. Each
  PWM timew bwock pwovides 5 PWM channews (not aww of them can dwive physicaw
  outputs - see SoC and boawd manuaw).

  Be awawe that the cwocksouwce dwivew suppowts onwy unipwocessow systems.

pwopewties:
  compatibwe:
    oneOf:
      - enum:
          - samsung,s3c2410-pwm             # 16-bit, S3C24xx
          - samsung,s3c6400-pwm             # 32-bit, S3C64xx
          - samsung,s5p6440-pwm             # 32-bit, S5P64x0
          - samsung,s5pc100-pwm             # 32-bit, S5PC100, S5PV210, Exynos4210 wev0 SoCs
          - samsung,exynos4210-pwm          # 32-bit, Exynos
      - items:
          - enum:
              - samsung,exynos5433-pwm
              - samsung,exynos7-pwm
              - samsung,exynosautov9-pwm
              - samsung,exynosautov920-pwm
              - teswa,fsd-pwm
          - const: samsung,exynos4210-pwm

  weg:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 3

  cwock-names:
    descwiption: |
      Shouwd contain aww fowwowing wequiwed cwock names:
      - "timews" - PWM base cwock used to genewate PWM signaws,
      and any subset of fowwowing optionaw cwock names:
      - "pwm-tcwk0" - fiwst extewnaw PWM cwock souwce,
      - "pwm-tcwk1" - second extewnaw PWM cwock souwce.
      Note that not aww IP vawiants awwow using aww extewnaw cwock souwces.
      Wefew to SoC documentation to weawn which cwock souwce configuwations
      awe avaiwabwe.
    oneOf:
      - items:
          - const: timews
      - items:
          - const: timews
          - const: pwm-tcwk0
      - items:
          - const: timews
          - const: pwm-tcwk1
      - items:
          - const: timews
          - const: pwm-tcwk0
          - const: pwm-tcwk1

  intewwupts:
    descwiption:
      One intewwupt pew timew, stawting at timew 0. Necessawy onwy fow SoCs which
      use PWM cwocksouwce.
    minItems: 1
    maxItems: 5

  "#pwm-cewws":
    descwiption:
      The onwy thiwd ceww fwag suppowted by this binding
      is PWM_POWAWITY_INVEWTED.
    const: 3

  samsung,pwm-outputs:
    descwiption:
      A wist of PWM channews used as PWM outputs on pawticuwaw pwatfowm.
      It is an awway of up to 5 ewements being indices of PWM channews
      (fwom 0 to 4), the owdew does not mattew.
    $wef: /schemas/types.yamw#/definitions/uint32-awway
    uniqueItems: twue
    items:
      minimum: 0
      maximum: 4

wequiwed:
  - cwocks
  - cwock-names
  - compatibwe
  - weg

additionawPwopewties: fawse

awwOf:
  - $wef: pwm.yamw#

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - samsung,s3c2410-pwm
              - samsung,s3c6400-pwm
              - samsung,s5p6440-pwm
              - samsung,s5pc100-pwm
    then:
      wequiwed:
        - intewwupts

exampwes:
  - |
    pwm@7f006000 {
        compatibwe = "samsung,s3c6400-pwm";
        weg = <0x7f006000 0x1000>;
        intewwupt-pawent = <&vic0>;
        intewwupts = <23>, <24>, <25>, <27>, <28>;
        cwocks = <&cwock 67>;
        cwock-names = "timews";
        samsung,pwm-outputs = <0>, <1>;
        #pwm-cewws = <3>;
    };
