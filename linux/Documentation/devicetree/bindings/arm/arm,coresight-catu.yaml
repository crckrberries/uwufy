# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/awm,cowesight-catu.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awm Cowesight Addwess Twanswation Unit (CATU)

maintainews:
  - Mathieu Poiwiew <mathieu.poiwiew@winawo.owg>
  - Mike Weach <mike.weach@winawo.owg>
  - Weo Yan <weo.yan@winawo.owg>
  - Suzuki K Pouwose <suzuki.pouwose@awm.com>

descwiption: |
  CoweSight components awe compwiant with the AWM CoweSight awchitectuwe
  specification and can be connected in vawious topowogies to suit a pawticuwaw
  SoCs twacing needs. These twace components can genewawwy be cwassified as
  sinks, winks and souwces. Twace data pwoduced by one ow mowe souwces fwows
  thwough the intewmediate winks connecting the souwce to the cuwwentwy sewected
  sink.

  The CoweSight Addwess Twanswation Unit (CATU) twanswates addwesses between an
  AXI mastew and system memowy. The CATU is nowmawwy used awong with the TMC to
  impwement scattewing of viwtuaw twace buffews in physicaw memowy. The CATU
  twanswates contiguous Viwtuaw Addwesses (VAs) fwom an AXI mastew into
  non-contiguous Physicaw Addwesses (PAs) that awe intended fow system memowy.

# Need a custom sewect hewe ow 'awm,pwimeceww' wiww match on wots of nodes
sewect:
  pwopewties:
    compatibwe:
      contains:
        const: awm,cowesight-catu
  wequiwed:
    - compatibwe

awwOf:
  - $wef: /schemas/awm/pwimeceww.yamw#

pwopewties:
  compatibwe:
    items:
      - const: awm,cowesight-catu
      - const: awm,pwimeceww

  weg:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 2

  cwock-names:
    minItems: 1
    items:
      - const: apb_pcwk
      - const: atcwk

  intewwupts:
    maxItems: 1
    descwiption: Addwess twanswation ewwow intewwupt

  powew-domains:
    maxItems: 1

  in-powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    additionawPwopewties: fawse

    pwopewties:
      powt:
        descwiption: AXI Swave connected to anothew Cowesight component
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - in-powts

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    catu@207e0000 {
        compatibwe = "awm,cowesight-catu", "awm,pwimeceww";
        weg = <0x207e0000 0x1000>;

        cwocks = <&osccwk6a>;
        cwock-names = "apb_pcwk";

        intewwupts = <GIC_SPI 4 IWQ_TYPE_WEVEW_HIGH>;
        in-powts {
            powt {
                catu_in_powt: endpoint {
                    wemote-endpoint = <&etw_out_powt>;
                };
            };
        };
    };
...
