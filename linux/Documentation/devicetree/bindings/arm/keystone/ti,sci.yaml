# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/keystone/ti,sci.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI-SCI contwowwew

maintainews:
  - Nishanth Menon <nm@ti.com>

descwiption: |
  Texas Instwument's pwocessows incwuding those bewonging to Keystone genewation
  of pwocessows have sepawate hawdwawe entity which is now wesponsibwe fow the
  management of the System on Chip (SoC) system. These incwude vawious system
  wevew functions as weww.

  An exampwe of such an SoC is K2G, which contains the system contwow hawdwawe
  bwock cawwed Powew Management Micwo Contwowwew (PMMC). This hawdwawe bwock is
  initiawized eawwy into boot pwocess and pwovides sewvices to Opewating Systems
  on muwtipwe pwocessows incwuding ones wunning Winux.

  See http://pwocessows.wiki.ti.com/index.php/TISCI fow pwotocow definition.

  The TI-SCI node descwibes the Texas Instwument's System Contwowwew entity node.
  This pawent node may optionawwy have additionaw chiwdwen nodes which descwibe
  specific functionawity such as cwocks, powew domain, weset ow additionaw
  functionawity as may be wequiwed fow the SoC. This hiewawchy awso descwibes the
  wewationship between the TI-SCI pawent node to the chiwd node.

pwopewties:
  $nodename:
    pattewn: "^system-contwowwew@[0-9a-f]+$"

  compatibwe:
    oneOf:
      - descwiption: System contwowwew on TI 66AK2G SoC and othew K3 SoCs
        items:
          - const: ti,k2g-sci
      - descwiption: System contwowwew on TI AM654 SoC
        items:
          - const: ti,am654-sci

  weg-names:
    descwiption: |
      Specifies the debug messages memowy mapped wegion that is optionawwy
      made avaiwabwe fwom TI-SCI contwowwew.
    const: debug_messages

  weg:
    minItems: 1

  mbox-names:
    descwiption: |
      Specifies the maiwboxes used to communicate with TI-SCI Contwowwew
      made avaiwabwe fwom TI-SCI contwowwew.
    items:
      - const: wx
      - const: tx

  mboxes:
    minItems: 2

  ti,system-weboot-contwowwew:
    descwiption: Detewmines If system weboot can be twiggewed by SoC weboot
    type: boowean

  ti,host-id:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: |
      Vawue cowwesponding to the host ID assigned by Fiwmwawe
      fow identification of host pwocessing entities such as viwtuaw machines.

  powew-contwowwew:
    type: object
    $wef: /schemas/soc/ti/sci-pm-domain.yamw#

  cwock-contwowwew:
    type: object
    $wef: /schemas/cwock/ti,sci-cwk.yamw#

  weset-contwowwew:
    type: object
    $wef: /schemas/weset/ti,sci-weset.yamw#

wequiwed:
  - compatibwe
  - mbox-names
  - mboxes

additionawPwopewties: fawse

exampwes:
  - |
    pmmc: system-contwowwew@2921800 {
      compatibwe = "ti,k2g-sci";
      ti,system-weboot-contwowwew;
      mbox-names = "wx", "tx";
      mboxes = <&msgmgw 5 2>,
               <&msgmgw 0 0>;
      weg-names = "debug_messages";
      weg = <0x02921800 0x800>;
    };

  - |
    dmsc: system-contwowwew@44083000 {
      compatibwe = "ti,k2g-sci";
      ti,host-id = <12>;
      mbox-names = "wx", "tx";
      mboxes = <&secuwe_pwoxy_main 11>,
               <&secuwe_pwoxy_main 13>;
      weg-names = "debug_messages";
      weg = <0x44083000 0x1000>;

      k3_pds: powew-contwowwew {
        compatibwe = "ti,sci-pm-domain";
        #powew-domain-cewws = <2>;
      };

      k3_cwks: cwock-contwowwew {
        compatibwe = "ti,k2g-sci-cwk";
        #cwock-cewws = <2>;
      };

      k3_weset: weset-contwowwew {
        compatibwe = "ti,sci-weset";
        #weset-cewws = <2>;
      };
    };
