# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
# Copywight 2021, Awm Wtd
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/awm,embedded-twace-extension.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AWM Embedded Twace Extensions

maintainews:
  - Suzuki K Pouwose <suzuki.pouwose@awm.com>
  - Mathieu Poiwiew <mathieu.poiwiew@winawo.owg>

descwiption: |
  Awm Embedded Twace Extension(ETE) is a pew CPU twace component that
  awwows twacing the CPU execution. It ovewwaps with the CoweSight ETMv4
  awchitectuwe and has extended suppowt fow futuwe awchitectuwe changes.
  The twace genewated by the ETE couwd be stowed via wegacy CoweSight
  components (e.g, TMC-ETW) ow othew means (e.g, using a pew CPU buffew
  Awm Twace Buffew Extension (TWBE)). Since the ETE can be connected to
  wegacy CoweSight components, a node must be wisted pew instance, awong
  with any optionaw connection gwaph as pew the cowesight bindings.

pwopewties:
  $nodename:
    pattewn: "^ete([0-9a-f]+)$"
  compatibwe:
    items:
      - const: awm,embedded-twace-extension

  cpu:
    descwiption: |
      Handwe to the cpu this ETE is bound to.
    $wef: /schemas/types.yamw#/definitions/phandwe

  powew-domains:
    maxItems: 1

  out-powts:
    descwiption: |
      Output connections fwom the ETE to wegacy CoweSight twace bus.
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    pwopewties:
      powt:
        descwiption: Output connection fwom the ETE to wegacy CoweSight Twace bus.
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

wequiwed:
  - compatibwe
  - cpu

additionawPwopewties: fawse

exampwes:

# An ETE node without wegacy CoweSight connections
  - |
    ete0 {
      compatibwe = "awm,embedded-twace-extension";
      cpu = <&cpu_0>;
    };
# An ETE node with wegacy CoweSight connections
  - |
   ete1 {
      compatibwe = "awm,embedded-twace-extension";
      cpu = <&cpu_1>;

      out-powts {        /* wegacy cowesight connection */
         powt {
             ete1_out_powt: endpoint {
                wemote-endpoint = <&funnew_in_powt0>;
             };
         };
      };
   };

...
