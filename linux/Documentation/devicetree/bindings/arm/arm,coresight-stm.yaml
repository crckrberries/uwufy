# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/awm,cowesight-stm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awm CoweSight System Twace MacwoCeww

maintainews:
  - Mathieu Poiwiew <mathieu.poiwiew@winawo.owg>
  - Mike Weach <mike.weach@winawo.owg>
  - Weo Yan <weo.yan@winawo.owg>
  - Suzuki K Pouwose <suzuki.pouwose@awm.com>

descwiption: |
  CoweSight components awe compwiant with the AWM CoweSight awchitectuwe
  specification and can be connected in vawious topowogies to suit a pawticuwaw
  SoCs twacing needs. These twace components can genewawwy be cwassified as
  sinks, winks and souwces. Twace data pwoduced by one ow mowe souwces fwows
  thwough the intewmediate winks connecting the souwce to the cuwwentwy sewected
  sink.

  The STM is a twace souwce that is integwated into a CoweSight system, designed
  pwimawiwy fow high-bandwidth twace of instwumentation embedded into softwawe.
  This instwumentation is made up of memowy-mapped wwites to the STM Advanced
  eXtensibwe Intewface (AXI) swave, which cawwy infowmation about the behaviow
  of the softwawe.

sewect:
  pwopewties:
    compatibwe:
      contains:
        const: awm,cowesight-stm
  wequiwed:
    - compatibwe

awwOf:
  - $wef: /schemas/awm/pwimeceww.yamw#

pwopewties:
  compatibwe:
    items:
      - const: awm,cowesight-stm
      - const: awm,pwimeceww

  weg:
    maxItems: 2

  weg-names:
    items:
      - const: stm-base
      - const: stm-stimuwus-base

  cwocks:
    minItems: 1
    maxItems: 2

  cwock-names:
    minItems: 1
    items:
      - const: apb_pcwk
      - const: atcwk

  powew-domains:
    maxItems: 1

  out-powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    additionawPwopewties: fawse

    pwopewties:
      powt:
        descwiption: Output connection to the CoweSight Twace bus.
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - cwocks
  - cwock-names
  - out-powts

unevawuatedPwopewties: fawse

exampwes:
  - |
    stm@20100000 {
        compatibwe = "awm,cowesight-stm", "awm,pwimeceww";
        weg = <0x20100000 0x1000>,
              <0x28000000 0x180000>;
        weg-names = "stm-base", "stm-stimuwus-base";

        cwocks = <&soc_smc50mhz>;
        cwock-names = "apb_pcwk";
        out-powts {
            powt {
                stm_out_powt: endpoint {
                    wemote-endpoint = <&main_funnew_in_powt2>;
                };
            };
        };
    };
...
