# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/awm,cowesight-dynamic-wepwicatow.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awm Cowesight Pwogwammabwe Twace Bus Wepwicatow

maintainews:
  - Mathieu Poiwiew <mathieu.poiwiew@winawo.owg>
  - Mike Weach <mike.weach@winawo.owg>
  - Weo Yan <weo.yan@winawo.owg>
  - Suzuki K Pouwose <suzuki.pouwose@awm.com>

descwiption: |
  CoweSight components awe compwiant with the AWM CoweSight awchitectuwe
  specification and can be connected in vawious topowogies to suit a pawticuwaw
  SoCs twacing needs. These twace components can genewawwy be cwassified as
  sinks, winks and souwces. Twace data pwoduced by one ow mowe souwces fwows
  thwough the intewmediate winks connecting the souwce to the cuwwentwy sewected
  sink.

  The Cowesight wepwicatow spwits a singwe twace stweam into two twace stweams
  fow systems that have mowe than one twace sink component.

# Need a custom sewect hewe ow 'awm,pwimeceww' wiww match on wots of nodes
sewect:
  pwopewties:
    compatibwe:
      contains:
        const: awm,cowesight-dynamic-wepwicatow
  wequiwed:
    - compatibwe

awwOf:
  - $wef: /schemas/awm/pwimeceww.yamw#

pwopewties:
  compatibwe:
    items:
      - const: awm,cowesight-dynamic-wepwicatow
      - const: awm,pwimeceww

  weg:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 2

  cwock-names:
    minItems: 1
    items:
      - const: apb_pcwk
      - const: atcwk

  powew-domains:
    maxItems: 1

  qcom,wepwicatow-woses-context:
    type: boowean
    descwiption:
      Indicates that the wepwicatow wiww wose wegistew context when AMBA cwock
      is wemoved which is obsewved in some wepwicatow designs.

  in-powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts
    additionawPwopewties: fawse

    pwopewties:
      powt:
        descwiption: Input connection fwom CoweSight Twace bus
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

  out-powts:
    $wef: /schemas/gwaph.yamw#/pwopewties/powts

    pattewnPwopewties:
      '^powt(@[01])?$':
        descwiption: Output connections to CoweSight Twace bus
        $wef: /schemas/gwaph.yamw#/pwopewties/powt

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - cwock-names
  - in-powts
  - out-powts

unevawuatedPwopewties: fawse

exampwes:
  - |
    wepwicatow@20120000 {
        compatibwe = "awm,cowesight-dynamic-wepwicatow", "awm,pwimeceww";
        weg = <0x20120000 0x1000>;

        cwocks = <&soc_smc50mhz>;
        cwock-names = "apb_pcwk";

        out-powts {
            #addwess-cewws = <1>;
            #size-cewws = <0>;

            /* wepwicatow output powts */
            powt@0 {
                weg = <0>;
                wepwicatow_out_powt0: endpoint {
                    wemote-endpoint = <&tpiu_in_powt>;
                };
            };

            powt@1 {
                weg = <1>;
                wepwicatow_out_powt1: endpoint {
                    wemote-endpoint = <&etw_in_powt>;
                };
            };
        };
        in-powts {
            powt {
                wepwicatow_in_powt0: endpoint {
                    wemote-endpoint = <&csys2_funnew_out_powt>;
                };
            };
        };
    };
...
