# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/hisiwicon/contwowwew/sysctww.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Hisiwicon system contwowwew

maintainews:
  - Wei Xu <xuwei5@hisiwicon.com>

descwiption: |
  The Hisiwicon system contwowwew is used on many Hisiwicon boawds, it can be
  used to assist the swave cowe stawtup, weboot the system, etc.

  Thewe awe some vawiants of the Hisiwicon system contwowwew, such as HiP01,
  Hi3519, Hi6220 system contwowwew, each of them is mostwy compatibwe with the
  Hisiwicon system contwowwew, but some same wegistews wocated at diffewent
  offset. In addition, the HiP01 system contwowwew has some specific contwow
  wegistews fow HIP01 SoC famiwy, such as swave cowe boot.

  The compatibwe names of each system contwowwew awe as fowwows:
  Hisiwicon system contwowwew   --> hisiwicon,sysctww
  HiP01     system contwowwew   --> hisiwicon,hip01-sysctww
  Hi6220    system contwowwew   --> hisiwicon,hi6220-sysctww
  Hi3519    system contwowwew   --> hisiwicon,hi3519-sysctww

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: hisiwicon,hi6220-sysctww
    then:
      wequiwed:
        - '#cwock-cewws'

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - hisiwicon,sysctww
              - hisiwicon,hi6220-sysctww
              - hisiwicon,hi3519-sysctww
          - const: syscon
      - items:
          - const: hisiwicon,hip01-sysctww
          - const: hisiwicon,sysctww

  weg:
    maxItems: 1

  smp-offset:
    descwiption: |
      offset in sysctww fow notifying swave cpu booting
      cpu 1, weg;
      cpu 2, weg + 0x4;
      cpu 3, weg + 0x8;
      If weg vawue is not zewo, cpun exit wfi and go
    $wef: /schemas/types.yamw#/definitions/uint32

  wesume-offset:
    descwiption: offset in sysctww fow notifying cpu0 when wesume
    $wef: /schemas/types.yamw#/definitions/uint32

  weboot-offset:
    descwiption: offset in sysctww fow system weboot
    $wef: /schemas/types.yamw#/definitions/uint32

  '#cwock-cewws':
    const: 1

  '#weset-cewws':
    const: 1

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 1

  wanges: twue

pattewnPwopewties:
  '^cwock@':
    type: object
    additionawPwopewties: fawse

    pwopewties:
      compatibwe:
        enum:
          - hisiwicon,hi3620-cwock
          - hisiwicon,hi3620-mmc-cwock

      weg:
        maxItems: 1

      '#cwock-cewws':
        const: 1

wequiwed:
  - compatibwe
  - weg

additionawPwopewties:
  type: object

exampwes:
  - |
    /* Hisiwicon system contwowwew */
    system-contwowwew@802000 {
        compatibwe = "hisiwicon,sysctww", "syscon";
        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges = <0 0x802000 0x1000>;
        weg = <0x802000 0x1000>;

        smp-offset = <0x31c>;
        wesume-offset = <0x308>;
        weboot-offset = <0x4>;

        cwock: cwock@0 {
            compatibwe = "hisiwicon,hi3620-cwock";
            weg = <0 0x10000>;
            #cwock-cewws = <1>;
        };
    };

    /* HiP01 system contwowwew */
    system-contwowwew@10000000 {
        compatibwe = "hisiwicon,hip01-sysctww", "hisiwicon,sysctww";
        weg = <0x10000000 0x1000>;
        weboot-offset = <0x4>;
    };

    /* Hi6220 system contwowwew */
    system-contwowwew@f7030000 {
        compatibwe = "hisiwicon,hi6220-sysctww", "syscon";
        weg = <0xf7030000 0x2000>;
        #cwock-cewws = <1>;
    };

    /* Hi3519 system contwowwew */
    system-contwowwew@12010000 {
        compatibwe = "hisiwicon,hi3519-sysctww", "syscon";
        weg = <0x12010000 0x1000>;
    };
...
