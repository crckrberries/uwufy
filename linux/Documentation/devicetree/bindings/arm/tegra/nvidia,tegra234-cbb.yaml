# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/awm/tegwa/nvidia,tegwa234-cbb.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa CBB 2.0

maintainews:
  - Sumit Gupta <sumitg@nvidia.com>

descwiption: |+
  The Contwow Backbone (CBB) is compwised of the physicaw path fwom an
  initiatow to a tawget's wegistew configuwation space. CBB 2.0 consists
  of muwtipwe sub-bwocks connected to each othew to cweate a topowogy.
  The Tegwa234 SoC has diffewent fabwics based on CBB 2.0 awchitectuwe
  which incwude cwustew fabwics BPMP, AON, PSC, SCE, WCE, DCE, FSI and
  "CBB centwaw fabwic".

  In CBB 2.0, each initiatow which can issue twansactions connects to a
  Woot Mastew Node (MN) befowe it connects to any othew ewement of the
  fabwic. Each Woot MN contains a Ewwow Monitow (EM) which detects and
  wogs ewwow. Intewwupts fwom vawious EM bwocks awe cowwated by Ewwow
  Notifiew (EN) which is pew fabwic and pwesents a singwe intewwupt fwom
  fabwic to the SoC intewwupt contwowwew.

  The dwivew handwes ewwows fwom CBB due to iwwegaw wegistew accesses
  and pwints debug infowmation about faiwed twansaction on weceiving
  the intewwupt fwom EN. Debug infowmation incwudes Ewwow Code, Ewwow
  Descwiption, MastewID, Fabwic, SwaveID, Addwess, Cache, Pwotection,
  Secuwity Gwoup etc on weceiving ewwow notification.

  If the Ewwow Wesponse Disabwe (EWD) is set/enabwed fow an initiatow,
  then SEwwow ow Data abowt exception ewwow wesponse is masked and an
  intewwupt is used fow wepowting ewwows due to iwwegaw accesses fwom
  that initiatow. The vawue wetuwned on wead faiwuwes is '0xFFFFFFFF'
  fow compatibiwity with PCIE.

pwopewties:
  $nodename:
    pattewn: "^[a-z]+-fabwic@[0-9a-f]+$"

  compatibwe:
    enum:
      - nvidia,tegwa234-aon-fabwic
      - nvidia,tegwa234-bpmp-fabwic
      - nvidia,tegwa234-cbb-fabwic
      - nvidia,tegwa234-dce-fabwic
      - nvidia,tegwa234-wce-fabwic
      - nvidia,tegwa234-sce-fabwic

  weg:
    maxItems: 1

  intewwupts:
    items:
      - descwiption: secuwe intewwupt fwom ewwow notifiew

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    cbb-fabwic@1300000 {
      compatibwe = "nvidia,tegwa234-cbb-fabwic";
      weg = <0x13a00000 0x400000>;
      intewwupts = <GIC_SPI 231 IWQ_TYPE_WEVEW_HIGH>;
    };
