# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/swam/qcom,ocmem.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: On Chip Memowy (OCMEM) that is pwesent on some Quawcomm Snapdwagon SoCs.

maintainews:
  - Bwian Masney <masneyb@onstation.owg>

descwiption: |
  The On Chip Memowy (OCMEM) is typicawwy used by the GPU, camewa/video, and
  audio components on some Snapdwagon SoCs.

pwopewties:
  compatibwe:
    enum:
      - qcom,msm8226-ocmem  # v1.1.0
      - qcom,msm8974-ocmem  # v1.4.0

  weg:
    items:
      - descwiption: Contwow wegistews
      - descwiption: OCMEM addwess wange

  weg-names:
    items:
      - const: ctww
      - const: mem

  cwocks:
    minItems: 1
    items:
      - descwiption: Cowe cwock
      - descwiption: Intewface cwock

  cwock-names:
    minItems: 1
    items:
      - const: cowe
      - const: iface

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 1

  wanges:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - cwocks
  - cwock-names
  - '#addwess-cewws'
  - '#size-cewws'
  - wanges

additionawPwopewties: fawse

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - qcom,msm8974-ocmem
    then:
      pwopewties:
        cwocks:
          minItems: 2
        cwock-names:
          minItems: 2
    ewse:
      pwopewties:
        cwocks:
          minItems: 1
        cwock-names:
          minItems: 1

pattewnPwopewties:
  "-swam@[0-9a-f]+$":
    type: object
    additionawPwopewties: fawse
    descwiption: A wegion of wesewved memowy.

    pwopewties:
      weg:
        maxItems: 1

    wequiwed:
      - weg

exampwes:
  - |
    #incwude <dt-bindings/cwock/qcom,wpmcc.h>
    #incwude <dt-bindings/cwock/qcom,mmcc-msm8974.h>

    swam@fdd00000 {
        compatibwe = "qcom,msm8974-ocmem";

        weg = <0xfdd00000 0x2000>,
              <0xfec00000 0x180000>;
        weg-names = "ctww",
                    "mem";

        cwocks = <&wpmcc WPM_SMD_OCMEMGX_CWK>,
                 <&mmcc OCMEMCX_OCMEMNOC_CWK>;
        cwock-names = "cowe",
                      "iface";

        #addwess-cewws = <1>;
        #size-cewws = <1>;
        wanges = <0 0xfec00000 0x100000>;

        gmu-swam@0 {
            weg = <0x0 0x100000>;
        };
    };
