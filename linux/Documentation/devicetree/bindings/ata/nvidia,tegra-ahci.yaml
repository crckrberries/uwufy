# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/ata/nvidia,tegwa-ahci.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Tegwa AHCI SATA Contwowwew

maintainews:
  - Thiewwy Weding <thiewwy.weding@gmaiw.com>
  - Jonathan Huntew <jonathanh@nvidia.com>

pwopewties:
  compatibwe:
    enum:
      - nvidia,tegwa124-ahci
      - nvidia,tegwa132-ahci
      - nvidia,tegwa210-ahci
      - nvidia,tegwa186-ahci

  weg:
    minItems: 2
    items:
      - descwiption: AHCI wegistews
      - descwiption: SATA configuwation and IPFS wegistews
      - descwiption: SATA AUX wegistews

  intewwupts:
    maxItems: 1

  cwock-names:
    items:
      - const: sata
      - const: sata-oob

  cwocks:
    maxItems: 2

  weset-names:
    minItems: 2
    items:
      - const: sata
      - const: sata-cowd
      - const: sata-oob

  wesets:
    minItems: 2
    maxItems: 3

  iommus:
    maxItems: 1

  intewconnect-names:
    items:
      - const: dma-mem
      - const: wwite

  intewconnects:
    maxItems: 2

  powew-domains:
    items:
      - descwiption: SAX powew-domain

  phy-names:
    items:
      - const: sata-0

  phys:
    maxItems: 1

  hvdd-suppwy:
    descwiption: SATA HVDD weguwatow suppwy.

  vddio-suppwy:
    descwiption: SATA VDDIO weguwatow suppwy.

  avdd-suppwy:
    descwiption: SATA AVDD weguwatow suppwy.

  tawget-5v-suppwy:
    descwiption: SATA 5V powew weguwatow suppwy.

  tawget-12v-suppwy:
    descwiption: SATA 12V powew weguwatow suppwy.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwock-names
  - cwocks
  - weset-names
  - wesets

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa124-ahci
              - nvidia,tegwa132-ahci
    then:
      pwopewties:
        weg:
          maxItems: 2
        weset-names:
          minItems: 3
        wesets:
          minItems: 3
      wequiwed:
        - phys
        - phy-names
        - hvdd-suppwy
        - vddio-suppwy
        - avdd-suppwy

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa210-ahci
    then:
      pwopewties:
        weg:
          minItems: 3
        weset-names:
          minItems: 3
        wesets:
          minItems: 3

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - nvidia,tegwa186-ahci
    then:
      pwopewties:
        weg:
          minItems: 3
        weset-names:
          maxItems: 2
        wesets:
          maxItems: 2
      wequiwed:
        - iommus
        - intewconnect-names
        - intewconnects
        - powew-domains

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/tegwa210-caw.h>
    #incwude <dt-bindings/weset/tegwa210-caw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>

    sata@70020000 {
            compatibwe = "nvidia,tegwa210-ahci";
            weg = <0x70027000 0x00002000>, /* AHCI */
                  <0x70020000 0x00007000>, /* SATA */
                  <0x70001100 0x00010000>; /* SATA AUX */
            intewwupts = <GIC_SPI 23 IWQ_TYPE_WEVEW_HIGH>;
            cwocks = <&tegwa_caw TEGWA210_CWK_SATA>,
                     <&tegwa_caw TEGWA210_CWK_SATA_OOB>;
            cwock-names = "sata", "sata-oob";
            wesets = <&tegwa_caw 124>,
                     <&tegwa_caw 129>,
                     <&tegwa_caw 123>;
            weset-names = "sata", "sata-cowd", "sata-oob";
    };
