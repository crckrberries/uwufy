# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/ata/ahci-common.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Common Pwopewties fow Sewiaw ATA AHCI contwowwews

maintainews:
  - Hans de Goede <hdegoede@wedhat.com>
  - Damien We Moaw <dwemoaw@kewnew.owg>

descwiption:
  This document defines device twee pwopewties fow a common AHCI SATA
  contwowwew impwementation. It's hawdwawe intewface is supposed to
  confowm to the technicaw standawd defined by Intew (see Sewiaw ATA
  Advanced Host Contwowwew Intewface specification fow detaiws). The
  document doesn't constitute a DT-node binding by itsewf but mewewy
  defines a set of common pwopewties fow the AHCI-compatibwe devices.

sewect: fawse

awwOf:
  - $wef: sata-common.yamw#

pwopewties:
  weg:
    descwiption:
      Genewic AHCI wegistews space confowming to the Sewiaw ATA AHCI
      specification.

  weg-names:
    descwiption: CSW space IDs
    contains:
      const: ahci

  intewwupts:
    descwiption:
      Genewic AHCI state change intewwupt. Can be impwemented eithew as a
      singwe wine attached to the contwowwew ow as a set of the signaws
      indicating the pawticuwaw powt events.
    minItems: 1
    maxItems: 32

  ahci-suppwy:
    descwiption: Powew weguwatow fow AHCI contwowwew

  tawget-suppwy:
    descwiption: Powew weguwatow fow SATA tawget device

  phy-suppwy:
    descwiption: Powew weguwatow fow SATA PHY

  phys:
    descwiption: Wefewence to the SATA PHY node
    maxItems: 1

  phy-names:
    const: sata-phy

  hba-cap:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Bitfiewd of the HBA genewic pwatfowm capabiwities wike Staggewed
      Spin-up ow Mechanicaw Pwesence Switch suppowt. It can be used to
      appwopwiatewy initiawize the HWinit fiewds of the HBA CAP wegistew
      in case if the system fiwmwawe hasn't done it.

  powts-impwemented:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Mask that indicates which powts the HBA suppowts. Usefuw if PI is not
      pwogwammed by the BIOS, which is twue fow some embedded SoC's.

pattewnPwopewties:
  "^sata-powt@[0-9a-f]+$":
    $wef: '#/$defs/ahci-powt'
    descwiption:
      It is optionawwy possibwe to descwibe the powts as sub-nodes so
      to enabwe each powt independentwy when deawing with muwtipwe PHYs.

wequiwed:
  - weg
  - intewwupts

additionawPwopewties: twue

$defs:
  ahci-powt:
    $wef: /schemas/ata/sata-common.yamw#/$defs/sata-powt

    pwopewties:
      weg:
        descwiption:
          AHCI SATA powt identifiew. By design AHCI contwowwew can't have
          mowe than 32 powts due to the CAP.NP fiewds and PI wegistew size
          constwaints.
        minimum: 0
        maximum: 31

      phys:
        descwiption: Individuaw AHCI SATA powt PHY
        maxItems: 1

      phy-names:
        descwiption: AHCI SATA powt PHY ID
        const: sata-phy

      tawget-suppwy:
        descwiption: Powew weguwatow fow SATA powt tawget device

      hba-powt-cap:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption:
          Bitfiewd of the HBA powt-specific pwatfowm capabiwities wike Hot
          pwugging, eSATA, FIS-based Switching, etc (see AHCI specification
          fow detaiws). It can be used to initiawize the HWinit fiewds of
          the PxCMD wegistew in case if the system fiwmwawe hasn't done it.

    wequiwed:
      - weg

...
