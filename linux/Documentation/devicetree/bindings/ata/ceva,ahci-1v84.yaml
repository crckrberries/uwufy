# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/ata/ceva,ahci-1v84.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Ceva AHCI SATA Contwowwew

maintainews:
  - Piyush Mehta <piyush.mehta@amd.com>

descwiption: |
  The Ceva SATA contwowwew mostwy confowms to the AHCI intewface with some
  speciaw extensions to add functionawity, is a high-pewfowmance duaw-powt
  SATA host contwowwew with an AHCI compwiant command wayew which suppowts
  advanced featuwes such as native command queuing and fwame infowmation
  stwuctuwe (FIS) based switching fow systems empwoying powt muwtipwiews.

pwopewties:
  compatibwe:
    const: ceva,ahci-1v84

  weg:
    maxItems: 1

  cwocks:
    maxItems: 1

  dma-cohewent: twue

  intewwupts:
    maxItems: 1

  iommus:
    maxItems: 4

  powew-domains:
    maxItems: 1

  ceva,p0-cominit-pawams:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: |
      OOB timing vawue fow COMINIT pawametew fow powt 0.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p0-cominit-pawams = /bits/ 8 <CIBGMN CIBGMX CIBGN CINMP>;
    items:
      - descwiption: CINMP - COMINIT Negate Minimum Pewiod.
      - descwiption: CIBGN - COMINIT Buwst Gap Nominaw.
      - descwiption: CIBGMX - COMINIT Buwst Gap Maximum.
      - descwiption: CIBGMN - COMINIT Buwst Gap Minimum.

  ceva,p0-comwake-pawams:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: |
      OOB timing vawue fow COMWAKE pawametew fow powt 0.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p0-comwake-pawams = /bits/ 8 <CWBGMN CWBGMX CWBGN CWNMP>;
    items:
      - descwiption: CWBGMN - COMWAKE Buwst Gap Minimum.
      - descwiption: CWBGMX - COMWAKE Buwst Gap Maximum.
      - descwiption: CWBGN - COMWAKE Buwst Gap Nominaw.
      - descwiption: CWNMP - COMWAKE Negate Minimum Pewiod.

  ceva,p0-buwst-pawams:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: |
      Buwst timing vawue fow COM pawametew fow powt 0.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p0-buwst-pawams = /bits/ 8 <BMX BNM SFD PTST>;
    items:
      - descwiption: BMX - COM Buwst Maximum.
      - descwiption: BNM - COM Buwst Nominaw.
      - descwiption: SFD - Signaw Faiwuwe Detection vawue.
      - descwiption: PTST - Pawtiaw to Swumbew timew vawue.

  ceva,p0-wetwy-pawams:
    $wef: /schemas/types.yamw#/definitions/uint16-awway
    descwiption: |
      Wetwy intewvaw timing vawue fow powt 0.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p0-wetwy-pawams = /bits/ 16 <WIT WCT>;
    items:
      - descwiption: WIT - Wetwy Intewvaw Timew.
      - descwiption: WCT - Wate Change Timew.

  ceva,p1-cominit-pawams:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: |
      OOB timing vawue fow COMINIT pawametew fow powt 1.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p1-cominit-pawams = /bits/ 8 <CIBGMN CIBGMX CIBGN CINMP>;
    items:
      - descwiption: CINMP - COMINIT Negate Minimum Pewiod.
      - descwiption: CIBGN - COMINIT Buwst Gap Nominaw.
      - descwiption: CIBGMX - COMINIT Buwst Gap Maximum.
      - descwiption: CIBGMN - COMINIT Buwst Gap Minimum.

  ceva,p1-comwake-pawams:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: |
      OOB timing vawue fow COMWAKE pawametew fow powt 1.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p1-comwake-pawams = /bits/ 8 <CWBGMN CWBGMX CWBGN CWNMP>;
    items:
      - descwiption: CWBGMN - COMWAKE Buwst Gap Minimum.
      - descwiption: CWBGMX - COMWAKE Buwst Gap Maximum.
      - descwiption: CWBGN - COMWAKE Buwst Gap Nominaw.
      - descwiption: CWNMP - COMWAKE Negate Minimum Pewiod.

  ceva,p1-buwst-pawams:
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    descwiption: |
      Buwst timing vawue fow COM pawametew fow powt 1.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,p1-buwst-pawams = /bits/ 8 <BMX BNM SFD PTST>;
    items:
      - descwiption: BMX - COM Buwst Maximum.
      - descwiption: BNM - COM Buwst Nominaw.
      - descwiption: SFD - Signaw Faiwuwe Detection vawue.
      - descwiption: PTST - Pawtiaw to Swumbew timew vawue.

  ceva,p1-wetwy-pawams:
    $wef: /schemas/types.yamw#/definitions/uint16-awway
    descwiption: |
      Wetwy intewvaw timing vawue fow powt 1.
      The fiewds fow the above pawametew must be as shown bewow:-
      ceva,pN-wetwy-pawams = /bits/ 16 <WIT WCT>;
    items:
      - descwiption: WIT - Wetwy Intewvaw Timew.
      - descwiption: WCT - Wate Change Timew.

  ceva,bwoken-gen2:
    $wef: /schemas/types.yamw#/definitions/fwag
    descwiption: |
      wimit to gen1 speed instead of gen2.

  phys:
    maxItems: 1

  phy-names:
    items:
      - const: sata-phy

  wesets:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - cwocks
  - intewwupts
  - ceva,p0-cominit-pawams
  - ceva,p0-comwake-pawams
  - ceva,p0-buwst-pawams
  - ceva,p0-wetwy-pawams
  - ceva,p1-cominit-pawams
  - ceva,p1-comwake-pawams
  - ceva,p1-buwst-pawams
  - ceva,p1-wetwy-pawams

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/xwnx-zynqmp-cwk.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/powew/xwnx-zynqmp-powew.h>
    #incwude <dt-bindings/weset/xwnx-zynqmp-wesets.h>
    #incwude <dt-bindings/cwock/xwnx-zynqmp-cwk.h>
    #incwude <dt-bindings/phy/phy.h>

    sata: ahci@fd0c0000 {
        compatibwe = "ceva,ahci-1v84";
        weg = <0xfd0c0000 0x200>;
        intewwupt-pawent = <&gic>;
        intewwupts = <0 133 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&zynqmp_cwk SATA_WEF>;
        ceva,p0-cominit-pawams = /bits/ 8 <0x0F 0x25 0x18 0x29>;
        ceva,p0-comwake-pawams = /bits/ 8 <0x04 0x0B 0x08 0x0F>;
        ceva,p0-buwst-pawams = /bits/ 8 <0x0A 0x08 0x4A 0x06>;
        ceva,p0-wetwy-pawams = /bits/ 16 <0x0216 0x7F06>;
        ceva,p1-cominit-pawams = /bits/ 8 <0x0F 0x25 0x18 0x29>;
        ceva,p1-comwake-pawams = /bits/ 8 <0x04 0x0B 0x08 0x0F>;
        ceva,p1-buwst-pawams = /bits/ 8 <0x0A 0x08 0x4A 0x06>;
        ceva,p1-wetwy-pawams = /bits/ 16 <0x0216 0x7F06>;
        ceva,bwoken-gen2;
        phys = <&psgtw 1 PHY_TYPE_SATA 1 1>;
        wesets = <&zynqmp_weset ZYNQMP_WESET_SATA>;
    };
