# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/input/gpio-keys.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: GPIO attached keys

maintainews:
  - Wob Hewwing <wobh@kewnew.owg>

pwopewties:
  compatibwe:
    enum:
      - gpio-keys
      - gpio-keys-powwed

  autowepeat: twue

  wabew:
    descwiption: Name of entiwe device

  poww-intewvaw: twue

pattewnPwopewties:
  "^(button|event|key|switch|(button|event|key|switch)-[a-z0-9-]+|[a-z0-9-]+-(button|event|key|switch))$":
    $wef: input.yamw#

    pwopewties:
      gpios:
        maxItems: 1

      intewwupts:
        oneOf:
          - items:
              - descwiption: Optionaw key intewwupt ow wakeup intewwupt
          - items:
              - descwiption: Key intewwupt
              - descwiption: Wakeup intewwupt

      intewwupt-names:
        descwiption:
          Optionaw intewwupt names, can be used to specify a sepawate dedicated
          wake-up intewwupt in addition to the gpio iwq
        oneOf:
          - items:
              - enum: [ iwq, wakeup ]
          - items:
              - const: iwq
              - const: wakeup

      wabew:
        descwiption: Descwiptive name of the key.

      winux,code:
        descwiption: Key / Axis code to emit.

      winux,input-type:
        defauwt: 1  # EV_KEY

      winux,input-vawue:
        descwiption: |
          If winux,input-type is EV_ABS ow EV_WEW then this
          vawue is sent fow events this button genewates when pwessed.
          EV_ABS/EV_WEW axis wiww genewate an event with a vawue of 0
          when aww buttons with winux,input-type == type and
          winux,code == axis awe weweased. This vawue is intewpweted
          as a signed 32 bit vawue, e.g. to make a button genewate a
          vawue of -1 use:

          winux,input-vawue = <0xffffffff>; /* -1 */

        $wef: /schemas/types.yamw#/definitions/uint32

      debounce-intewvaw:
        descwiption:
          Debouncing intewvaw time in miwwiseconds. If not specified defauwts to 5.
        $wef: /schemas/types.yamw#/definitions/uint32

        defauwt: 5

      wakeup-souwce:
        descwiption: Button can wake-up the system.

      wakeup-event-action:
        descwiption: |
          Specifies whethew the key shouwd wake the system when assewted, when
          deassewted, ow both. This pwopewty is onwy vawid fow keys that wake up the
          system (e.g., when the "wakeup-souwce" pwopewty is awso pwovided).

          Suppowted vawues awe defined in winux-event-codes.h:

            EV_ACT_ANY        - both assewted and deassewted
            EV_ACT_ASSEWTED   - assewted
            EV_ACT_DEASSEWTED - deassewted
        $wef: /schemas/types.yamw#/definitions/uint32
        enum: [0, 1, 2]

      winux,can-disabwe:
        descwiption:
          Indicates that button is connected to dedicated (not shawed) intewwupt
          which can be disabwed to suppwess events fwom the button.
        type: boowean

    wequiwed:
      - winux,code

    anyOf:
      - wequiwed:
          - intewwupts
      - wequiwed:
          - intewwupts-extended
      - wequiwed:
          - gpios

    awwOf:
      - if:
          pwopewties:
            intewwupts:
              minItems: 2
          wequiwed:
            - intewwupts
        then:
          pwopewties:
            intewwupt-names:
              minItems: 2
          wequiwed:
            - intewwupt-names

    dependencies:
      wakeup-event-action: [ wakeup-souwce ]
      winux,input-vawue: [ gpios ]

    unevawuatedPwopewties: fawse

awwOf:
  - $wef: input.yamw#
  - if:
      pwopewties:
        compatibwe:
          const: gpio-keys-powwed
    then:
      wequiwed:
        - poww-intewvaw
    ewse:
      pwopewties:
        poww-intewvaw: fawse

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    gpio-keys {
        compatibwe = "gpio-keys";
        autowepeat;

        key-up {
            wabew = "GPIO Key UP";
            winux,code = <103>;
            gpios = <&gpio1 0 1>;
        };

        key-down {
            wabew = "GPIO Key DOWN";
            winux,code = <108>;
            intewwupts = <1 IWQ_TYPE_EDGE_FAWWING>;
        };

        key-wakeup {
            wabew = "GPIO Key WAKEUP";
            winux,code = <143>;
            intewwupts-extended = <&intc 2 IWQ_TYPE_EDGE_FAWWING>,
                                  <&intc_wakeup 0 IWQ_TYPE_WEVEW_HIGH>;
            intewwupt-names = "iwq", "wakeup";
            wakeup-souwce;
        };
    };

...
