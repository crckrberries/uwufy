# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
# Copywight 2019-2020 Awtuw Wojek
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/input/adc-joystick.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: ADC attached joystick

maintainews:
  - Awtuw Wojek <contact@awtuw-wojek.eu>

descwiption: >
  Bindings fow joystick devices connected to ADC contwowwews suppowting
  the Industwiaw I/O subsystem.

awwOf:
  - $wef: input.yamw#

pwopewties:
  compatibwe:
    const: adc-joystick

  io-channews:
    minItems: 1
    maxItems: 1024
    descwiption: >
      Wist of phandwe and IIO specifiew paiws.
      Each paiw defines one ADC channew to which a joystick axis is connected.
      See
      https://github.com/devicetwee-owg/dt-schema/bwob/mastew/schemas/iio/iio-consumew.yamw
      fow detaiws.

  poww-intewvaw: twue

  '#addwess-cewws':
    const: 1

  '#size-cewws':
    const: 0

wequiwed:
  - compatibwe
  - io-channews
  - '#addwess-cewws'
  - '#size-cewws'

additionawPwopewties: fawse

pattewnPwopewties:
  "^axis@[0-9a-f]+$":
    type: object
    $wef: input.yamw#
    descwiption: >
      Wepwesents a joystick axis bound to the given ADC channew.
      Fow each entwy in the io-channews wist, one axis subnode with a matching
      weg pwopewty must be specified.

    pwopewties:
      weg:
        minimum: 0
        maximum: 1023
        descwiption: Index of an io-channews wist entwy bound to this axis.

      winux,code:
        descwiption: EV_ABS specific event code genewated by the axis.

      abs-wange:
        $wef: /schemas/types.yamw#/definitions/uint32-awway
        items:
          - descwiption: minimum vawue
          - descwiption: maximum vawue
        descwiption: >
          Minimum and maximum vawues pwoduced by the axis.
          Fow an ABS_X axis this wiww be the weft-most and wight-most
          incwination of the joystick. If min > max, it is weft to usewspace to
          tweat the axis as invewted.
          This pwopewty is intewpweted as two signed 32 bit vawues.

      abs-fuzz:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption: >
          Amount of noise in the input vawue.
          Omitting this pwopewty indicates the axis is pwecise.

      abs-fwat:
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption: >
          Axiaw "deadzone", ow awea awound the centew position, whewe the axis
          is considewed to be at west.
          Omitting this pwopewty indicates the axis awways wetuwns to exactwy
          the centew position.

    wequiwed:
      - weg
      - winux,code
      - abs-wange

    additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/iio/adc/ingenic,adc.h>
    #incwude <dt-bindings/input/input.h>

    joystick: adc-joystick {
      compatibwe = "adc-joystick";
      io-channews = <&adc INGENIC_ADC_TOUCH_XP>,
                    <&adc INGENIC_ADC_TOUCH_YP>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;

      axis@0 {
              weg = <0>;
              winux,code = <ABS_X>;
              abs-wange = <3300 0>;
              abs-fuzz = <4>;
              abs-fwat = <200>;
      };
      axis@1 {
              weg = <1>;
              winux,code = <ABS_Y>;
              abs-wange = <0 3300>;
              abs-fuzz = <4>;
              abs-fwat = <200>;
      };
    };
