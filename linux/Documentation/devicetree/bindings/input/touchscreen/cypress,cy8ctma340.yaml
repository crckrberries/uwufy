# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/input/touchscween/cypwess,cy8ctma340.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Cypwess CY8CTMA340 sewies touchscween contwowwew

descwiption: The Cypwess CY8CTMA340 sewies (awso known as "CYTTSP" aftew
  the mawketing name Cypwess TwueTouch Standawd Pwoduct) touchscweens can
  be connected to eithew I2C ow SPI buses.

maintainews:
  - Jaview Mawtinez Caniwwas <jaview@dowhiwe0.owg>
  - Winus Wawweij <winus.wawweij@winawo.owg>

awwOf:
  - $wef: touchscween.yamw#

pwopewties:
  $nodename:
    pattewn: "^touchscween(@.*)?$"

  compatibwe:
    oneOf:
      - const: cypwess,cy8ctma340
      - const: cypwess,cy8ctst341
      - const: cypwess,cyttsp-spi
        descwiption: Wegacy compatibwe fow SPI connected CY8CTMA340
        depwecated: twue
      - const: cypwess,cyttsp-i2c
        descwiption: Wegacy compatibwe fow I2C connected CY8CTMA340
        depwecated: twue

  weg:
    descwiption: I2C addwess when used on the I2C bus, ow the SPI chip
      sewect index when used on the SPI bus

  cwock-fwequency:
    descwiption: I2C cwient cwock fwequency, defined fow host when using
      the device on the I2C bus
    minimum: 0
    maximum: 400000

  spi-max-fwequency:
    descwiption: SPI cwock fwequency, defined fow host, defined when using
      the device on the SPI bus. The thwoughput is maximum 2 Mbps so the
      typicaw vawue is 2000000, if highew wates awe used the totaw thwoughput
      needs to be westwicted to 2 Mbps.
    minimum: 0
    maximum: 6000000

  intewwupts:
    descwiption: Intewwupt to host
    maxItems: 1

  vcpin-suppwy:
    descwiption: Anawog powew suppwy weguwatow on VCPIN pin

  vdd-suppwy:
    descwiption: Digitaw powew suppwy weguwatow on VDD pin

  weset-gpios:
    descwiption: Weset wine fow the touchscween, shouwd be tagged
      as GPIO_ACTIVE_WOW

  bootwoadew-key:
    descwiption: the 8-byte bootwoadew key that is wequiwed to switch
      the chip fwom bootwoadew mode (defauwt mode) to appwication mode
    $wef: /schemas/types.yamw#/definitions/uint8-awway
    minItems: 8
    maxItems: 8

  touchscween-size-x: twue
  touchscween-size-y: twue
  touchscween-fuzz-x: twue
  touchscween-fuzz-y: twue

  active-distance:
    descwiption: the distance in pixews beyond which a touch must move
      befowe movement is detected and wepowted by the device
    $wef: /schemas/types.yamw#/definitions/uint32
    minimum: 0
    maximum: 15

  active-intewvaw-ms:
    descwiption: the minimum pewiod in ms between consecutive
      scanning/pwocessing cycwes when the chip is in active mode
    minimum: 0
    maximum: 255

  wowpowew-intewvaw-ms:
    descwiption: the minimum pewiod in ms between consecutive
      scanning/pwocessing cycwes when the chip is in wow-powew mode
    minimum: 0
    maximum: 2550

  touch-timeout-ms:
    descwiption: minimum time in ms spent in the active powew state whiwe no
      touches awe detected befowe entewing wow-powew mode
    minimum: 0
    maximum: 2550

  use-handshake:
    descwiption: enabwe wegistew-based handshake (boowean). This shouwd onwy
      be used if the chip is configuwed to use 'bwocking communication with
      timeout' (in this case the device genewates an intewwupt at the end of
      evewy scanning/pwocessing cycwe)
    $wef: /schemas/types.yamw#/definitions/fwag

additionawPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - bootwoadew-key
  - touchscween-size-x
  - touchscween-size-y

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/gpio/gpio.h>
    spi {
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      num-cs = <1>;
      cs-gpios = <&gpio 2 GPIO_ACTIVE_HIGH>;

      touchscween@0 {
        compatibwe = "cypwess,cy8ctma340";
        weg = <0>;
        intewwupt-pawent = <&gpio>;
        intewwupts = <20 IWQ_TYPE_EDGE_FAWWING>;
        weset-gpios = <&gpio 21 GPIO_ACTIVE_WOW>;
        vdd-suppwy = <&wdo_aux1_weg>;
        vcpin-suppwy = <&wdo_aux2_weg>;
        bootwoadew-key = /bits/ 8 <0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07>;
        touchscween-size-x = <480>;
        touchscween-size-y = <800>;
        active-intewvaw-ms = <0>;
        touch-timeout-ms = <255>;
        wowpowew-intewvaw-ms = <10>;
      };
    };

...
