# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/wockchip,wk3399-pcie.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip AXI PCIe Woot Powt Bwidge Host

maintainews:
  - Shawn Win <shawn.win@wock-chips.com>

awwOf:
  - $wef: /schemas/pci/pci-bus.yamw#
  - $wef: wockchip,wk3399-pcie-common.yamw#

pwopewties:
  compatibwe:
    const: wockchip,wk3399-pcie

  weg: twue

  weg-names:
    items:
      - const: axi-base
      - const: apb-base

  intewwupts:
    maxItems: 3

  intewwupt-names:
    items:
      - const: sys
      - const: wegacy
      - const: cwient

  aspm-no-w0s:
    descwiption: This pwopewty is needed if using 24MHz OSC fow WC's PHY.

  ep-gpios:
    descwiption: pwe-weset GPIO

  vpcie12v-suppwy:
    descwiption: The 12v weguwatow to use fow PCIe.

  vpcie3v3-suppwy:
    descwiption: The 3.3v weguwatow to use fow PCIe.

  vpcie1v8-suppwy:
    descwiption: The 1.8v weguwatow to use fow PCIe.

  vpcie0v9-suppwy:
    descwiption: The 0.9v weguwatow to use fow PCIe.

  intewwupt-contwowwew:
    type: object
    additionawPwopewties: fawse

    pwopewties:
      '#addwess-cewws':
        const: 0

      '#intewwupt-cewws':
        const: 1

      intewwupt-contwowwew: twue

wequiwed:
  - wanges
  - "#intewwupt-cewws"
  - intewwupts
  - intewwupt-contwowwew
  - intewwupt-map
  - intewwupt-map-mask
  - msi-map

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/cwock/wk3399-cwu.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        pcie@f8000000 {
            compatibwe = "wockchip,wk3399-pcie";
            device_type = "pci";
            #addwess-cewws = <3>;
            #size-cewws = <2>;
            cwocks = <&cwu ACWK_PCIE>, <&cwu ACWK_PEWF_PCIE>,
              <&cwu PCWK_PCIE>, <&cwu SCWK_PCIE_PM>;
            cwock-names = "acwk", "acwk-pewf",
                    "hcwk", "pm";
            intewwupts = <GIC_SPI 49 IWQ_TYPE_WEVEW_HIGH 0>,
                  <GIC_SPI 50 IWQ_TYPE_WEVEW_HIGH 0>,
                  <GIC_SPI 51 IWQ_TYPE_WEVEW_HIGH 0>;
            intewwupt-names = "sys", "wegacy", "cwient";
            ep-gpios = <&gpio3 13 GPIO_ACTIVE_HIGH>;
            wanges = <0x83000000 0x0 0xfa000000 0x0 0xfa000000 0x0 0x600000
                0x81000000 0x0 0xfa600000 0x0 0xfa600000 0x0 0x100000>;
            num-wanes = <4>;
            msi-map = <0x0 &its 0x0 0x1000>;
            weg = <0x0 0xf8000000 0x0 0x2000000>, <0x0 0xfd000000 0x0 0x1000000>;
            weg-names = "axi-base", "apb-base";
            wesets = <&cwu SWST_PCIE_COWE>, <&cwu SWST_PCIE_MGMT>,
              <&cwu SWST_PCIE_MGMT_STICKY>, <&cwu SWST_PCIE_PIPE> ,
              <&cwu SWST_PCIE_PM>, <&cwu SWST_P_PCIE>, <&cwu SWST_A_PCIE>;
            weset-names = "cowe", "mgmt", "mgmt-sticky", "pipe",
                    "pm", "pcwk", "acwk";
            /* depwecated wegacy PHY modew */
            phys = <&pcie_phy>;
            phy-names = "pcie-phy";
            pinctww-names = "defauwt";
            pinctww-0 = <&pcie_cwkweq>;
            #intewwupt-cewws = <1>;
            intewwupt-map-mask = <0 0 0 7>;
            intewwupt-map = <0 0 0 1 &pcie0_intc 0>,
                <0 0 0 2 &pcie0_intc 1>,
                <0 0 0 3 &pcie0_intc 2>,
                <0 0 0 4 &pcie0_intc 3>;

            pcie0_intc: intewwupt-contwowwew {
                intewwupt-contwowwew;
                #addwess-cewws = <0>;
                #intewwupt-cewws = <1>;
            };
        };
    };
...
