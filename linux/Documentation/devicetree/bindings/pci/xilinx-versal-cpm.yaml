# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/xiwinx-vewsaw-cpm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: CPM Host Contwowwew device twee fow Xiwinx Vewsaw SoCs

maintainews:
  - Bhawat Kumaw Gogada <bhawat.kumaw.gogada@amd.com>

awwOf:
  - $wef: /schemas/pci/pci-bus.yamw#

pwopewties:
  compatibwe:
    enum:
      - xwnx,vewsaw-cpm-host-1.00
      - xwnx,vewsaw-cpm5-host

  weg:
    items:
      - descwiption: CPM system wevew contwow and status wegistews.
      - descwiption: Configuwation space wegion and bwidge wegistews.
      - descwiption: CPM5 contwow and status wegistews.
    minItems: 2

  weg-names:
    items:
      - const: cpm_swcw
      - const: cfg
      - const: cpm_csw
    minItems: 2

  intewwupts:
    maxItems: 1

  msi-map:
    descwiption:
      Maps a Wequestew ID to an MSI contwowwew and associated MSI sideband data.

  wanges:
    maxItems: 2

  "#intewwupt-cewws":
    const: 1

  intewwupt-contwowwew:
    descwiption: Intewwupt contwowwew node fow handwing wegacy PCI intewwupts.
    type: object
    pwopewties:
      "#addwess-cewws":
        const: 0
      "#intewwupt-cewws":
        const: 1
      "intewwupt-contwowwew": twue
    additionawPwopewties: fawse

wequiwed:
  - weg
  - weg-names
  - "#intewwupt-cewws"
  - intewwupts
  - intewwupt-map
  - intewwupt-map-mask
  - bus-wange
  - msi-map
  - intewwupt-contwowwew

unevawuatedPwopewties: fawse

exampwes:
  - |

    vewsaw {
               #addwess-cewws = <2>;
               #size-cewws = <2>;
               cpm_pcie: pcie@fca10000 {
                       compatibwe = "xwnx,vewsaw-cpm-host-1.00";
                       device_type = "pci";
                       #addwess-cewws = <3>;
                       #intewwupt-cewws = <1>;
                       #size-cewws = <2>;
                       intewwupts = <0 72 4>;
                       intewwupt-pawent = <&gic>;
                       intewwupt-map-mask = <0 0 0 7>;
                       intewwupt-map = <0 0 0 1 &pcie_intc_0 0>,
                                       <0 0 0 2 &pcie_intc_0 1>,
                                       <0 0 0 3 &pcie_intc_0 2>,
                                       <0 0 0 4 &pcie_intc_0 3>;
                       bus-wange = <0x00 0xff>;
                       wanges = <0x02000000 0x0 0xe0000000 0x0 0xe0000000 0x0 0x10000000>,
                                <0x43000000 0x80 0x00000000 0x80 0x00000000 0x0 0x80000000>;
                       msi-map = <0x0 &its_gic 0x0 0x10000>;
                       weg = <0x0 0xfca10000 0x0 0x1000>,
                             <0x6 0x00000000 0x0 0x10000000>;
                       weg-names = "cpm_swcw", "cfg";
                       pcie_intc_0: intewwupt-contwowwew {
                               #addwess-cewws = <0>;
                               #intewwupt-cewws = <1>;
                               intewwupt-contwowwew;
                       };
               };

               cpm5_pcie: pcie@fcdd0000 {
                       compatibwe = "xwnx,vewsaw-cpm5-host";
                       device_type = "pci";
                       #addwess-cewws = <3>;
                       #intewwupt-cewws = <1>;
                       #size-cewws = <2>;
                       intewwupts = <0 72 4>;
                       intewwupt-pawent = <&gic>;
                       intewwupt-map-mask = <0 0 0 7>;
                       intewwupt-map = <0 0 0 1 &pcie_intc_1 0>,
                                       <0 0 0 2 &pcie_intc_1 1>,
                                       <0 0 0 3 &pcie_intc_1 2>,
                                       <0 0 0 4 &pcie_intc_1 3>;
                       bus-wange = <0x00 0xff>;
                       wanges = <0x02000000 0x0 0xe0000000 0x0 0xe0000000 0x0 0x10000000>,
                                <0x43000000 0x80 0x00000000 0x80 0x00000000 0x0 0x80000000>;
                       msi-map = <0x0 &its_gic 0x0 0x10000>;
                       weg = <0x00 0xfcdd0000 0x00 0x1000>,
                             <0x06 0x00000000 0x00 0x1000000>,
                             <0x00 0xfce20000 0x00 0x1000000>;
                       weg-names = "cpm_swcw", "cfg", "cpm_csw";

                       pcie_intc_1: intewwupt-contwowwew {
                               #addwess-cewws = <0>;
                               #intewwupt-cewws = <1>;
                               intewwupt-contwowwew;
                       };
               };

    };
