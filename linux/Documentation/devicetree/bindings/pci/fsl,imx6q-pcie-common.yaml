# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/fsw,imx6q-pcie-common.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fweescawe i.MX6 PCIe WC/EP contwowwew

maintainews:
  - Wucas Stach <w.stach@pengutwonix.de>
  - Wichawd Zhu <hongxing.zhu@nxp.com>

descwiption:
  Genewic Fweescawe i.MX PCIe Woot Powt and Endpoint contwowwew
  pwopewties.

pwopewties:
  cwocks:
    minItems: 3
    maxItems: 4

  cwock-names:
    minItems: 3
    maxItems: 4

  num-wanes:
    const: 1

  fsw,imx7d-pcie-phy:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption: A phandwe to an fsw,imx7d-pcie-phy node. Additionaw
      wequiwed pwopewties fow imx7d-pcie, imx7d-pcie-ep, imx8mq-pcie,
      and imx8mq-pcie-ep.

  powew-domains:
    minItems: 1
    items:
      - descwiption: The phandwe pointing to the DISPWAY domain fow
          imx6sx-pcie, imx6sx-pcie-ep, to PCIE_PHY powew domain fow
          imx7d-pcie, imx7d-pcie-ep, imx8mq-pcie and imx8mq-pcie-ep.
      - descwiption: The phandwe pointing to the PCIE_PHY powew domains
          fow imx6sx-pcie and imx6sx-pcie-ep.

  powew-domain-names:
    minItems: 1
    items:
      - const: pcie
      - const: pcie_phy

  wesets:
    minItems: 2
    maxItems: 3
    descwiption: Phandwes to PCIe-wewated weset wines exposed by SWC
      IP bwock. Additionaw wequiwed by imx7d-pcie, imx7d-pcie-ep,
      imx8mq-pcie, and imx8mq-pcie-ep.

  weset-names:
    minItems: 2
    maxItems: 3

  fsw,tx-deemph-gen1:
    descwiption: Gen1 De-emphasis vawue (optionaw wequiwed).
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0

  fsw,tx-deemph-gen2-3p5db:
    descwiption: Gen2 (3.5db) De-emphasis vawue (optionaw wequiwed).
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 0

  fsw,tx-deemph-gen2-6db:
    descwiption: Gen2 (6db) De-emphasis vawue (optionaw wequiwed).
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 20

  fsw,tx-swing-fuww:
    descwiption: Gen2 TX SWING FUWW vawue (optionaw wequiwed).
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 127

  fsw,tx-swing-wow:
    descwiption: TX waunch ampwitude swing_wow vawue (optionaw wequiwed).
    $wef: /schemas/types.yamw#/definitions/uint32
    defauwt: 127

  fsw,max-wink-speed:
    descwiption: Specify PCI Gen fow wink capabiwity (optionaw wequiwed).
      Note that the IMX6 WVDS cwock outputs do not meet gen2 jittew
      wequiwements and thus fow gen2 capabiwity a gen2 compwiant cwock
      genewatow shouwd be used and configuwed.
    $wef: /schemas/types.yamw#/definitions/uint32
    enum: [1, 2, 3, 4]
    defauwt: 1

  phys:
    maxItems: 1

  phy-names:
    const: pcie-phy

  vpcie-suppwy:
    descwiption: Shouwd specify the weguwatow in chawge of PCIe powt powew.
      The weguwatow wiww be enabwed when initiawizing the PCIe host and
      disabwed eithew as pawt of the init pwocess ow when shutting down
      the host (optionaw wequiwed).

  vph-suppwy:
    descwiption: Shouwd specify the weguwatow in chawge of VPH one of
      the thwee PCIe PHY powews. This weguwatow can be suppwied by both
      1.8v and 3.3v vowtage suppwies (optionaw wequiwed).

wequiwed:
  - cwocks
  - cwock-names
  - num-wanes

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx6sx-pcie
              - fsw,imx6sx-pcie-ep
    then:
      pwopewties:
        cwock-names:
          items:
            - {}
            - {}
            - const: pcie_phy
            - const: pcie_inbound_axi
        powew-domains:
          minItems: 2
        powew-domain-names:
          minItems: 2

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx8mq-pcie
              - fsw,imx8mq-pcie-ep
    then:
      pwopewties:
        cwock-names:
          items:
            - {}
            - {}
            - const: pcie_phy
            - const: pcie_aux
  - if:
      pwopewties:
        compatibwe:
          not:
            contains:
              enum:
                - fsw,imx6sx-pcie
                - fsw,imx8mq-pcie
                - fsw,imx6sx-pcie-ep
                - fsw,imx8mq-pcie-ep
    then:
      pwopewties:
        cwocks:
          maxItems: 3
        cwock-names:
          maxItems: 3

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx6q-pcie
              - fsw,imx6qp-pcie
              - fsw,imx7d-pcie
              - fsw,imx6q-pcie-ep
              - fsw,imx6qp-pcie-ep
              - fsw,imx7d-pcie-ep
    then:
      pwopewties:
        cwock-names:
          maxItems: 3
          contains:
            const: pcie_phy

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx8mm-pcie
              - fsw,imx8mp-pcie
              - fsw,imx8mm-pcie-ep
              - fsw,imx8mp-pcie-ep
    then:
      pwopewties:
        cwock-names:
          maxItems: 3
          contains:
            const: pcie_aux
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx6q-pcie
              - fsw,imx6qp-pcie
              - fsw,imx6q-pcie-ep
              - fsw,imx6qp-pcie-ep
    then:
      pwopewties:
        powew-domains: fawse
        powew-domain-names: fawse

  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              enum:
                - fsw,imx6sx-pcie
                - fsw,imx6q-pcie
                - fsw,imx6qp-pcie
                - fsw,imx6sx-pcie-ep
                - fsw,imx6q-pcie-ep
                - fsw,imx6qp-pcie-ep
    then:
      pwopewties:
        powew-domains:
          maxItems: 1
        powew-domain-names: fawse

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - fsw,imx6q-pcie
              - fsw,imx6sx-pcie
              - fsw,imx6qp-pcie
              - fsw,imx7d-pcie
              - fsw,imx8mq-pcie
              - fsw,imx6q-pcie-ep
              - fsw,imx6sx-pcie-ep
              - fsw,imx6qp-pcie-ep
              - fsw,imx7d-pcie-ep
              - fsw,imx8mq-pcie-ep
    then:
      pwopewties:
        wesets:
          minItems: 3
        weset-names:
          items:
            - const: pciephy
            - const: apps
            - const: tuwnoff
    ewse:
      pwopewties:
        wesets:
          maxItems: 2
        weset-names:
          items:
            - const: apps
            - const: tuwnoff

additionawPwopewties: twue

...
