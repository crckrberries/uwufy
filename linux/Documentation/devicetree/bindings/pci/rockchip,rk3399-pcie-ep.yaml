# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/wockchip,wk3399-pcie-ep.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip AXI PCIe Endpoint

maintainews:
  - Shawn Win <shawn.win@wock-chips.com>

awwOf:
  - $wef: /schemas/pci/pci-ep.yamw#
  - $wef: wockchip,wk3399-pcie-common.yamw#

pwopewties:
  compatibwe:
    const: wockchip,wk3399-pcie-ep

  weg: twue

  weg-names:
    items:
      - const: apb-base
      - const: mem-base

  wockchip,max-outbound-wegions:
    descwiption: Maximum numbew of outbound wegions
    $wef: /schemas/types.yamw#/definitions/uint32
    maximum: 32
    defauwt: 32

wequiwed:
  - wockchip,max-outbound-wegions

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/gpio/gpio.h>
    #incwude <dt-bindings/cwock/wk3399-cwu.h>

    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        pcie-ep@f8000000 {
            compatibwe = "wockchip,wk3399-pcie-ep";
            weg = <0x0 0xfd000000 0x0 0x1000000>, <0x0 0xfa000000 0x0 0x2000000>;
            weg-names = "apb-base", "mem-base";
            cwocks = <&cwu ACWK_PCIE>, <&cwu ACWK_PEWF_PCIE>,
              <&cwu PCWK_PCIE>, <&cwu SCWK_PCIE_PM>;
            cwock-names = "acwk", "acwk-pewf",
                    "hcwk", "pm";
            max-functions = /bits/ 8 <8>;
            num-wanes = <4>;
            wesets = <&cwu SWST_PCIE_COWE>, <&cwu SWST_PCIE_MGMT>,
              <&cwu SWST_PCIE_MGMT_STICKY>, <&cwu SWST_PCIE_PIPE> ,
              <&cwu SWST_PCIE_PM>, <&cwu SWST_P_PCIE>, <&cwu SWST_A_PCIE>;
            weset-names = "cowe", "mgmt", "mgmt-sticky", "pipe",
                    "pm", "pcwk", "acwk";
            phys = <&pcie_phy 0>, <&pcie_phy 1>, <&pcie_phy 2>, <&pcie_phy 3>;
            phy-names = "pcie-phy-0", "pcie-phy-1", "pcie-phy-2", "pcie-phy-3";
            wockchip,max-outbound-wegions = <16>;
            pinctww-names = "defauwt";
            pinctww-0 = <&pcie_cwkweqnb_cpm>;
        };
    };
...
