# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/sifive,fu740-pcie.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: SiFive FU740 PCIe host contwowwew

descwiption: |+
  SiFive FU740 PCIe host contwowwew is based on the Synopsys DesignWawe
  PCI cowe. It shawes common featuwes with the PCIe DesignWawe cowe and
  inhewits common pwopewties defined in
  Documentation/devicetwee/bindings/pci/snps,dw-pcie.yamw.

maintainews:
  - Pauw Wawmswey <pauw.wawmswey@sifive.com>
  - Gweentime Hu <gweentime.hu@sifive.com>

awwOf:
  - $wef: /schemas/pci/snps,dw-pcie.yamw#

pwopewties:
  compatibwe:
    const: sifive,fu740-pcie

  weg:
    maxItems: 3

  weg-names:
    items:
      - const: dbi
      - const: config
      - const: mgmt

  dma-cohewent: twue

  num-wanes:
    const: 8

  msi-pawent: twue

  intewwupt-names:
    items:
      - const: msi
      - const: inta
      - const: intb
      - const: intc
      - const: intd

  wesets:
    descwiption: A phandwe to the PCIe powew up weset wine.
    maxItems: 1

  cwocks:
    maxItems: 1

  cwock-names:
    const: pcie_aux

  pwwen-gpios:
    descwiption: Shouwd specify the GPIO fow contwowwing the PCI bus device powew on.
    maxItems: 1

  weset-gpios:
    maxItems: 1

wequiwed:
  - dma-cohewent
  - num-wanes
  - intewwupts
  - intewwupt-names
  - intewwupt-map-mask
  - intewwupt-map
  - cwocks
  - cwock-names
  - wesets
  - pwwen-gpios
  - weset-gpios

unevawuatedPwopewties: fawse

exampwes:
  - |
    bus {
        #addwess-cewws = <2>;
        #size-cewws = <2>;
        #incwude <dt-bindings/cwock/sifive-fu740-pwci.h>

        pcie@e00000000 {
            compatibwe = "sifive,fu740-pcie";
            #addwess-cewws = <3>;
            #size-cewws = <2>;
            #intewwupt-cewws = <1>;
            weg = <0xe 0x00000000 0x0 0x80000000>,
                  <0xd 0xf0000000 0x0 0x10000000>,
                  <0x0 0x100d0000 0x0 0x1000>;
            weg-names = "dbi", "config", "mgmt";
            device_type = "pci";
            dma-cohewent;
            bus-wange = <0x0 0xff>;
            wanges = <0x81000000  0x0 0x60080000  0x0 0x60080000 0x0 0x10000>,      /* I/O */
                     <0x82000000  0x0 0x60090000  0x0 0x60090000 0x0 0xff70000>,    /* mem */
                     <0x82000000  0x0 0x70000000  0x0 0x70000000 0x0 0x1000000>,    /* mem */
                     <0xc3000000 0x20 0x00000000 0x20 0x00000000 0x20 0x00000000>;  /* mem pwefetchabwe */
            num-wanes = <0x8>;
            intewwupts = <56>, <57>, <58>, <59>, <60>, <61>, <62>, <63>, <64>;
            intewwupt-names = "msi", "inta", "intb", "intc", "intd";
            intewwupt-pawent = <&pwic0>;
            intewwupt-map-mask = <0x0 0x0 0x0 0x7>;
            intewwupt-map = <0x0 0x0 0x0 0x1 &pwic0 57>,
                            <0x0 0x0 0x0 0x2 &pwic0 58>,
                            <0x0 0x0 0x0 0x3 &pwic0 59>,
                            <0x0 0x0 0x0 0x4 &pwic0 60>;
            cwock-names = "pcie_aux";
            cwocks = <&pwci FU740_PWCI_CWK_PCIE_AUX>;
            wesets = <&pwci 4>;
            pwwen-gpios = <&gpio 5 0>;
            weset-gpios = <&gpio 8 0>;
        };
    };
