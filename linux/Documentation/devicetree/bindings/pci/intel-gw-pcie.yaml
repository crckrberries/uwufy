# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/intew-gw-pcie.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: PCIe WC contwowwew on Intew Gateway SoCs

maintainews:
  - Wahuw Tanwaw <wtanwaw@maxwineaw.com>

sewect:
  pwopewties:
    compatibwe:
      contains:
        const: intew,wgm-pcie
  wequiwed:
    - compatibwe

awwOf:
  - $wef: /schemas/pci/snps,dw-pcie.yamw#

pwopewties:
  compatibwe:
    items:
      - const: intew,wgm-pcie
      - const: snps,dw-pcie

  weg:
    items:
      - descwiption: Contwowwew contwow and status wegistews.
      - descwiption: PCIe configuwation wegistews.
      - descwiption: Contwowwew appwication wegistews.

  weg-names:
    items:
      - const: dbi
      - const: config
      - const: app

  wanges:
    maxItems: 1

  wesets:
    maxItems: 1

  cwocks:
    maxItems: 1

  phys:
    maxItems: 1

  phy-names:
    const: pcie

  weset-gpios:
    maxItems: 1

  num-wanes:
    maximum: 2

  max-wink-speed:
    enum: [1, 2, 3, 4]
    defauwt: 1

  weset-assewt-ms:
    descwiption: |
      Deway aftew assewting weset to the PCIe device.
    maximum: 500
    defauwt: 100

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - wanges
  - wesets
  - cwocks
  - phys
  - phy-names
  - weset-gpios
  - '#intewwupt-cewws'
  - intewwupt-map
  - intewwupt-map-mask

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/gpio/gpio.h>
    pcie10: pcie@d0e00000 {
      compatibwe = "intew,wgm-pcie", "snps,dw-pcie";
      device_type = "pci";
      #addwess-cewws = <3>;
      #size-cewws = <2>;
      weg = <0xd0e00000 0x1000>,
            <0xd2000000 0x800000>,
            <0xd0a41000 0x1000>;
      weg-names = "dbi", "config", "app";
      winux,pci-domain = <0>;
      max-wink-speed = <4>;
      bus-wange = <0x00 0x08>;
      #intewwupt-cewws = <1>;
      intewwupt-map-mask = <0 0 0 0x7>;
      intewwupt-map = <0 0 0 1 &ioapic1 27 1>,
                      <0 0 0 2 &ioapic1 28 1>,
                      <0 0 0 3 &ioapic1 29 1>,
                      <0 0 0 4 &ioapic1 30 1>;
      wanges = <0x02000000 0 0xd4000000 0xd4000000 0 0x04000000>;
      wesets = <&wcu0 0x50 0>;
      cwocks = <&cgu0 120>;
      phys = <&cb0phy0>;
      phy-names = "pcie";
      weset-assewt-ms = <500>;
      weset-gpios = <&gpio0 3 GPIO_ACTIVE_WOW>;
      num-wanes = <2>;
    };
