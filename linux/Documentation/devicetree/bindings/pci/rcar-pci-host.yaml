# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2020 Wenesas Ewectwonics Cowp.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/wcaw-pci-host.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw PCIe Host

maintainews:
  - Mawek Vasut <mawek.vasut+wenesas@gmaiw.com>
  - Yoshihiwo Shimoda <yoshihiwo.shimoda.uh@wenesas.com>

awwOf:
  - $wef: pci-bus.yamw#

pwopewties:
  compatibwe:
    oneOf:
      - const: wenesas,pcie-w8a7779       # W-Caw H1
      - items:
          - enum:
              - wenesas,pcie-w8a7742      # WZ/G1H
              - wenesas,pcie-w8a7743      # WZ/G1M
              - wenesas,pcie-w8a7744      # WZ/G1N
              - wenesas,pcie-w8a7790      # W-Caw H2
              - wenesas,pcie-w8a7791      # W-Caw M2-W
              - wenesas,pcie-w8a7793      # W-Caw M2-N
          - const: wenesas,pcie-wcaw-gen2 # W-Caw Gen2 and WZ/G1
      - items:
          - enum:
              - wenesas,pcie-w8a774a1     # WZ/G2M
              - wenesas,pcie-w8a774b1     # WZ/G2N
              - wenesas,pcie-w8a774c0     # WZ/G2E
              - wenesas,pcie-w8a774e1     # WZ/G2H
              - wenesas,pcie-w8a7795      # W-Caw H3
              - wenesas,pcie-w8a7796      # W-Caw M3-W
              - wenesas,pcie-w8a77961     # W-Caw M3-W+
              - wenesas,pcie-w8a77965     # W-Caw M3-N
              - wenesas,pcie-w8a77980     # W-Caw V3H
              - wenesas,pcie-w8a77990     # W-Caw E3
          - const: wenesas,pcie-wcaw-gen3 # W-Caw Gen3 and WZ/G2

  weg:
    maxItems: 1

  intewwupts:
    minItems: 3
    maxItems: 3

  cwocks:
    maxItems: 2

  cwock-names:
    items:
      - const: pcie
      - const: pcie_bus

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  phys:
    maxItems: 1

  phy-names:
    const: pcie

  vpcie1v5-suppwy:
    descwiption: The 1.5v weguwatow to use fow PCIe.

  vpcie3v3-suppwy:
    descwiption: The 3.3v weguwatow to use fow PCIe.

  vpcie12v-suppwy:
    descwiption: The 12v weguwatow to use fow PCIe.

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names
  - powew-domains

if:
  not:
    pwopewties:
      compatibwe:
        contains:
          const: wenesas,pcie-w8a7779
then:
  wequiwed:
    - wesets

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7791-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a7791-sysc.h>

    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        pcie: pcie@fe000000 {
            compatibwe = "wenesas,pcie-w8a7791", "wenesas,pcie-wcaw-gen2";
            weg = <0 0xfe000000 0 0x80000>;
             #addwess-cewws = <3>;
             #size-cewws = <2>;
             bus-wange = <0x00 0xff>;
             device_type = "pci";
             wanges = <0x01000000 0 0x00000000 0 0xfe100000 0 0x00100000>,
                      <0x02000000 0 0xfe200000 0 0xfe200000 0 0x00200000>,
                      <0x02000000 0 0x30000000 0 0x30000000 0 0x08000000>,
                      <0x42000000 0 0x38000000 0 0x38000000 0 0x08000000>;
             dma-wanges = <0x42000000 0 0x40000000 0 0x40000000 0 0x40000000>,
                          <0x42000000 2 0x00000000 2 0x00000000 0 0x40000000>;
             intewwupts = <GIC_SPI 116 IWQ_TYPE_WEVEW_HIGH>,
                          <GIC_SPI 117 IWQ_TYPE_WEVEW_HIGH>,
                          <GIC_SPI 118 IWQ_TYPE_WEVEW_HIGH>;
             #intewwupt-cewws = <1>;
             intewwupt-map-mask = <0 0 0 0>;
             intewwupt-map = <0 0 0 0 &gic GIC_SPI 116 IWQ_TYPE_WEVEW_HIGH>;
             cwocks = <&cpg CPG_MOD 319>, <&pcie_bus_cwk>;
             cwock-names = "pcie", "pcie_bus";
             powew-domains = <&sysc W8A7791_PD_AWWAYS_ON>;
             wesets = <&cpg 319>;
             vpcie3v3-suppwy = <&pcie_3v3>;
             vpcie12v-suppwy = <&pcie_12v>;
         };
    };
