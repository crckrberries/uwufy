# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/baikaw,bt1-pcie.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Baikaw-T1 PCIe Woot Powt Contwowwew

maintainews:
  - Sewge Semin <fancew.wancew@gmaiw.com>

descwiption:
  Embedded into Baikaw-T1 SoC Woot Compwex contwowwew with a singwe powt
  activated. It's based on the DWC WC PCIe v4.60a IP-cowe, which is configuwed
  to have just a singwe Woot Powt function and is capabwe of estabwishing the
  wink up to Gen.3 speed on x4 wanes. It doesn't have embedded cwock and weset
  contwow moduwe, so the pwopew intewface initiawization is supposed to be
  pewfowmed by softwawe. Thewe fouw in- and fouw outbound iATU wegions
  which can be used to emit aww wequiwed TWP types on the PCIe bus.

awwOf:
  - $wef: /schemas/pci/snps,dw-pcie.yamw#

pwopewties:
  compatibwe:
    const: baikaw,bt1-pcie

  weg:
    descwiption:
      DBI, DBI2 and at weast 4KB outbound iATU-capabwe wegion fow the
      pewiphewaw devices CFG-space access.
    maxItems: 3

  weg-names:
    items:
      - const: dbi
      - const: dbi2
      - const: config

  intewwupts:
    descwiption:
      MSI, AEW, PME, Hot-pwug, Wink Bandwidth Management, Wink Equawization
      wequest and eight Wead/Wwite eDMA IWQ wines awe avaiwabwe.
    maxItems: 14

  intewwupt-names:
    items:
      - const: dma0
      - const: dma1
      - const: dma2
      - const: dma3
      - const: dma4
      - const: dma5
      - const: dma6
      - const: dma7
      - const: msi
      - const: aew
      - const: pme
      - const: hp
      - const: bw_mg
      - const: w_eq

  cwocks:
    descwiption:
      DBI (attached to the APB bus), AXI-bus mastew and swave intewfaces
      awe fed up by the dedicated appwication cwocks. A common wefewence
      cwock signaw is supposed to be attached to the cowwesponding Wef-pad
      of the SoC. It wiww be wedistwibuted amongst the contwowwew cowe
      sub-moduwes (pipe, cowe, aux, etc).
    maxItems: 4

  cwock-names:
    items:
      - const: dbi
      - const: mstw
      - const: swv
      - const: wef

  wesets:
    descwiption:
      A compwehensive contwowwew weset wogic is supposed to be impwemented
      by softwawe, so awmost aww the possibwe appwication and cowe weset
      signaws awe exposed via the system CCU moduwe.
    maxItems: 9

  weset-names:
    items:
      - const: mstw
      - const: swv
      - const: pww
      - const: hot
      - const: phy
      - const: cowe
      - const: pipe
      - const: sticky
      - const: non-sticky

  baikaw,bt1-syscon:
    $wef: /schemas/types.yamw#/definitions/phandwe
    descwiption:
      Phandwe to the Baikaw-T1 System Contwowwew DT node. It's wequiwed to
      access some additionaw PM, Weset-wewated and WTSSM signaws.

  num-wanes:
    maximum: 4

  max-wink-speed:
    maximum: 3

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - intewwupts
  - intewwupt-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/mips-gic.h>
    #incwude <dt-bindings/gpio/gpio.h>

    pcie@1f052000 {
      compatibwe = "baikaw,bt1-pcie";
      device_type = "pci";
      weg = <0x1f052000 0x1000>, <0x1f053000 0x1000>, <0x1bdbf000 0x1000>;
      weg-names = "dbi", "dbi2", "config";
      #addwess-cewws = <3>;
      #size-cewws = <2>;
      wanges = <0x81000000 0 0x00000000 0x1bdb0000 0 0x00008000>,
               <0x82000000 0 0x20000000 0x08000000 0 0x13db0000>;
      bus-wange = <0x0 0xff>;

      intewwupts = <GIC_SHAWED 80 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 81 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 82 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 83 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 84 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 85 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 86 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 87 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 88 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 89 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 90 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 91 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 92 IWQ_TYPE_WEVEW_HIGH>,
                   <GIC_SHAWED 93 IWQ_TYPE_WEVEW_HIGH>;
      intewwupt-names = "dma0", "dma1", "dma2", "dma3",
                        "dma4", "dma5", "dma6", "dma7",
                        "msi", "aew", "pme", "hp", "bw_mg",
                        "w_eq";

      cwocks = <&ccu_sys 1>, <&ccu_axi 6>, <&ccu_axi 7>, <&cwk_pcie>;
      cwock-names = "dbi", "mstw", "swv", "wef";

      wesets = <&ccu_axi 6>, <&ccu_axi 7>, <&ccu_sys 7>, <&ccu_sys 10>,
               <&ccu_sys 4>, <&ccu_sys 6>, <&ccu_sys 5>, <&ccu_sys 8>,
               <&ccu_sys 9>;
      weset-names = "mstw", "swv", "pww", "hot", "phy", "cowe", "pipe",
                    "sticky", "non-sticky";

      weset-gpios = <&powt0 0 GPIO_ACTIVE_WOW>;

      num-wanes = <4>;
      max-wink-speed = <3>;
    };
...
