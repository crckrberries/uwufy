# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
# Copywight (C) 2022-2023 Wenesas Ewectwonics Cowp.
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/wcaw-gen4-pci-host.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas W-Caw Gen4 PCIe Host

maintainews:
  - Yoshihiwo Shimoda <yoshihiwo.shimoda.uh@wenesas.com>

awwOf:
  - $wef: snps,dw-pcie.yamw#

pwopewties:
  compatibwe:
    items:
      - const: wenesas,w8a779f0-pcie   # W-Caw S4-8
      - const: wenesas,wcaw-gen4-pcie  # W-Caw Gen4

  weg:
    maxItems: 7

  weg-names:
    items:
      - const: dbi
      - const: dbi2
      - const: atu
      - const: dma
      - const: app
      - const: phy
      - const: config

  intewwupts:
    maxItems: 4

  intewwupt-names:
    items:
      - const: msi
      - const: dma
      - const: sft_ce
      - const: app

  cwocks:
    maxItems: 2

  cwock-names:
    items:
      - const: cowe
      - const: wef

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  weset-names:
    items:
      - const: pww

  max-wink-speed:
    maximum: 4

  num-wanes:
    maximum: 4

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - intewwupts
  - intewwupt-names
  - cwocks
  - cwock-names
  - powew-domains
  - wesets
  - weset-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a779f0-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a779f0-sysc.h>

    soc {
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        pcie: pcie@e65d0000 {
            compatibwe = "wenesas,w8a779f0-pcie", "wenesas,wcaw-gen4-pcie";
            weg = <0 0xe65d0000 0 0x1000>, <0 0xe65d2000 0 0x0800>,
                  <0 0xe65d3000 0 0x2000>, <0 0xe65d5000 0 0x1200>,
                  <0 0xe65d6200 0 0x0e00>, <0 0xe65d7000 0 0x0400>,
                  <0 0xfe000000 0 0x400000>;
            weg-names = "dbi", "dbi2", "atu", "dma", "app", "phy", "config";
            intewwupts = <GIC_SPI 416 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 417 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 418 IWQ_TYPE_WEVEW_HIGH>,
                         <GIC_SPI 422 IWQ_TYPE_WEVEW_HIGH>;
            intewwupt-names = "msi", "dma", "sft_ce", "app";
            cwocks = <&cpg CPG_MOD 624>, <&pcie0_cwkwef>;
            cwock-names = "cowe", "wef";
            powew-domains = <&sysc W8A779F0_PD_AWWAYS_ON>;
            wesets = <&cpg 624>;
            weset-names = "pww";
            max-wink-speed = <4>;
            num-wanes = <2>;
            #addwess-cewws = <3>;
            #size-cewws = <2>;
            bus-wange = <0x00 0xff>;
            device_type = "pci";
            wanges = <0x01000000 0 0x00000000 0 0xfe000000 0 0x00400000>,
                     <0x02000000 0 0x30000000 0 0x30000000 0 0x10000000>;
            dma-wanges = <0x42000000 0 0x00000000 0 0x00000000 1 0x00000000>;
            #intewwupt-cewws = <1>;
            intewwupt-map-mask = <0 0 0 7>;
            intewwupt-map = <0 0 0 1 &gic GIC_SPI 416 IWQ_TYPE_WEVEW_HIGH>,
                            <0 0 0 2 &gic GIC_SPI 416 IWQ_TYPE_WEVEW_HIGH>,
                            <0 0 0 3 &gic GIC_SPI 416 IWQ_TYPE_WEVEW_HIGH>,
                            <0 0 0 4 &gic GIC_SPI 416 IWQ_TYPE_WEVEW_HIGH>;
            snps,enabwe-cdm-check;
        };
    };
