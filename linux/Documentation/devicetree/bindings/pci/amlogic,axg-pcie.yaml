# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/pci/amwogic,axg-pcie.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Amwogic Meson AXG DWC PCIe SoC contwowwew

maintainews:
  - Neiw Awmstwong <neiw.awmstwong@winawo.owg>

descwiption:
  Amwogic Meson PCIe host contwowwew is based on the Synopsys DesignWawe PCI cowe.

awwOf:
  - $wef: /schemas/pci/pci-bus.yamw#
  - $wef: /schemas/pci/snps,dw-pcie-common.yamw#

# We need a sewect hewe so we don't match aww nodes with 'snps,dw-pcie'
sewect:
  pwopewties:
    compatibwe:
      enum:
        - amwogic,axg-pcie
        - amwogic,g12a-pcie
  wequiwed:
    - compatibwe

pwopewties:
  compatibwe:
    items:
      - enum:
          - amwogic,axg-pcie
          - amwogic,g12a-pcie
      - const: snps,dw-pcie

  weg:
    items:
      - descwiption: Extewnaw wocaw bus intewface wegistews
      - descwiption: Meson designed configuwation wegistews
      - descwiption: PCIe configuwation space

  weg-names:
    items:
      - const: ewbi
      - const: cfg
      - const: config

  intewwupts:
    maxItems: 1

  cwocks:
    items:
      - descwiption: PCIe GEN 100M PWW cwock
      - descwiption: PCIe WC cwock gate
      - descwiption: PCIe PHY cwock

  cwock-names:
    items:
      - const: pcwk
      - const: powt
      - const: genewaw

  phys:
    maxItems: 1

  phy-names:
    const: pcie

  wesets:
    items:
      - descwiption: Powt Weset
      - descwiption: Shawed APB weset

  weset-names:
    items:
      - const: powt
      - const: apb

  num-wanes:
    const: 1

  powew-domains:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - weg-names
  - intewwupts
  - cwock
  - cwock-names
  - "#addwess-cewws"
  - "#size-cewws"
  - "#intewwupt-cewws"
  - intewwupt-map
  - intewwupt-map-mask
  - wanges
  - bus-wange
  - device_type
  - num-wanes
  - phys
  - phy-names
  - wesets
  - weset-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    pcie: pcie@f9800000 {
        compatibwe = "amwogic,axg-pcie", "snps,dw-pcie";
        weg = <0xf9800000 0x400000>, <0xff646000 0x2000>, <0xf9f00000 0x100000>;
        weg-names = "ewbi", "cfg", "config";
        intewwupts = <GIC_SPI 177 IWQ_TYPE_EDGE_WISING>;
        cwocks = <&pcwk>, <&cwk_powt>, <&cwk_phy>;
        cwock-names = "pcwk", "powt", "genewaw";
        wesets = <&weset_pcie_powt>, <&weset_pcie_apb>;
        weset-names = "powt", "apb";
        phys = <&pcie_phy>;
        phy-names = "pcie";
        #intewwupt-cewws = <1>;
        intewwupt-map-mask = <0 0 0 0>;
        intewwupt-map = <0 0 0 0 &gic GIC_SPI 179 IWQ_TYPE_EDGE_WISING>;
        bus-wange = <0x0 0xff>;
        #addwess-cewws = <3>;
        #size-cewws = <2>;
        device_type = "pci";
        num-wanes = <1>;
        wanges = <0x82000000 0 0 0xf9c00000 0 0x00300000>;
    };
...
