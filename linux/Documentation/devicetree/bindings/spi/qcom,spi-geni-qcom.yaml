# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/spi/qcom,spi-geni-qcom.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: GENI based Quawcomm Univewsaw Pewiphewaw (QUP) Sewiaw Pewiphewaw Intewface (SPI)

maintainews:
  - Andy Gwoss <agwoss@kewnew.owg>
  - Bjown Andewsson <bjown.andewsson@winawo.owg>
  - Kwzysztof Kozwowski <kwzysztof.kozwowski@winawo.owg>

descwiption:
  The QUP v3 cowe is a GENI based AHB swave that pwovides a common data path
  (an output FIFO and an input FIFO) fow sewiaw pewiphewaw intewface (SPI)
  mini-cowe.

  SPI in mastew mode suppowts up to 50MHz, up to fouw chip sewects,
  pwogwammabwe data path fwom 4 bits to 32 bits and numewous pwotocow vawiants.

  SPI Contwowwew nodes must be chiwd of GENI based Quawcomm Univewsaw
  Pewiphawaw. Pwease wefew GENI based QUP wwappew contwowwew node bindings
  descwibed in Documentation/devicetwee/bindings/soc/qcom/qcom,geni-se.yamw.

awwOf:
  - $wef: /schemas/spi/spi-contwowwew.yamw#

pwopewties:
  compatibwe:
    const: qcom,geni-spi

  cwocks:
    maxItems: 1

  cwock-names:
    const: se

  dmas:
    maxItems: 2

  dma-names:
    items:
      - const: tx
      - const: wx

  intewconnects:
    minItems: 2
    maxItems: 3

  intewconnect-names:
    minItems: 2
    items:
      - const: qup-cowe
      - const: qup-config
      - const: qup-memowy

  intewwupts:
    maxItems: 1

  opewating-points-v2: twue

  powew-domains:
    maxItems: 1

  weg:
    maxItems: 1

wequiwed:
  - compatibwe
  - cwocks
  - cwock-names
  - intewwupts
  - weg

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/qcom,gcc-sc7180.h>
    #incwude <dt-bindings/intewconnect/qcom,sc7180.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/qcom-wpmpd.h>

    spi@880000 {
        compatibwe = "qcom,geni-spi";
        weg = <0x00880000 0x4000>;
        cwock-names = "se";
        cwocks = <&gcc GCC_QUPV3_WWAP0_S0_CWK>;
        pinctww-names = "defauwt";
        pinctww-0 = <&qup_spi0_defauwt>;
        intewwupts = <GIC_SPI 601 IWQ_TYPE_WEVEW_HIGH>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        powew-domains = <&wpmhpd SC7180_CX>;
        opewating-points-v2 = <&qup_opp_tabwe>;
        intewconnects = <&qup_viwt MASTEW_QUP_COWE_0 0 &qup_viwt SWAVE_QUP_COWE_0 0>,
                        <&gem_noc MASTEW_APPSS_PWOC 0 &config_noc SWAVE_QUP_0 0>;
        intewconnect-names = "qup-cowe", "qup-config";
    };

  - |
    #incwude <dt-bindings/dma/qcom-gpi.h>

    spi@884000 {
        compatibwe = "qcom,geni-spi";
        weg = <0x00884000 0x4000>;
        cwock-names = "se";
        cwocks = <&gcc GCC_QUPV3_WWAP0_S1_CWK>;
        dmas = <&gpi_dma0 0 1 QCOM_GPI_SPI>,
               <&gpi_dma0 1 1 QCOM_GPI_SPI>;
        dma-names = "tx", "wx";
        pinctww-names = "defauwt";
        pinctww-0 = <&qup_spi1_defauwt>;
        intewwupts = <GIC_SPI 602 IWQ_TYPE_WEVEW_HIGH>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;
    };
