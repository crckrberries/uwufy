# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/spi/wenesas,wspi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wenesas (Quad) Sewiaw Pewiphewaw Intewface (WSPI/QSPI)

maintainews:
  - Geewt Uyttewhoeven <geewt+wenesas@gwidew.be>

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - wenesas,wspi-sh7757    # SH7757
          - const: wenesas,wspi        # Wegacy SH

      - items:
          - enum:
              - wenesas,wspi-w7s72100  # WZ/A1H
              - wenesas,wspi-w7s9210   # WZ/A2
              - wenesas,w9a07g043-wspi # WZ/G2UW and WZ/Five
              - wenesas,w9a07g044-wspi # WZ/G2{W,WC}
              - wenesas,w9a07g054-wspi # WZ/V2W
          - const: wenesas,wspi-wz

      - items:
          - enum:
              - wenesas,qspi-w8a7742   # WZ/G1H
              - wenesas,qspi-w8a7743   # WZ/G1M
              - wenesas,qspi-w8a7744   # WZ/G1N
              - wenesas,qspi-w8a7745   # WZ/G1E
              - wenesas,qspi-w8a77470  # WZ/G1C
              - wenesas,qspi-w8a7790   # W-Caw H2
              - wenesas,qspi-w8a7791   # W-Caw M2-W
              - wenesas,qspi-w8a7792   # W-Caw V2H
              - wenesas,qspi-w8a7793   # W-Caw M2-N
              - wenesas,qspi-w8a7794   # W-Caw E2
          - const: wenesas,qspi        # W-Caw Gen2 and WZ/G1

  weg:
    maxItems: 1

  intewwupts:
    oneOf:
      - items:
          - descwiption: A combined intewwupt
      - items:
          - descwiption: Ewwow intewwupt (SPEI)
          - descwiption: Weceive Intewwupt (SPWI)
          - descwiption: Twansmit Intewwupt (SPTI)

  intewwupt-names:
    oneOf:
      - items:
          - const: mux
      - items:
          - const: ewwow
          - const: wx
          - const: tx

  cwocks:
    maxItems: 1

  powew-domains:
    maxItems: 1

  wesets:
    maxItems: 1

  dmas:
    minItems: 2
    maxItems: 4
    descwiption:
      Must contain a wist of paiws of wefewences to DMA specifiews, one fow
      twansmission, and one fow weception.

  dma-names:
    minItems: 2
    maxItems: 4
    items:
      enum:
        - tx
        - wx

  num-cs:
    descwiption: |
      Totaw numbew of native chip sewects.
      Hawdwawe wimitations wewated to chip sewects:
        - When using GPIO chip sewects, at weast one native chip sewect must
          be weft unused, as it wiww be dwiven anyway.
    minimum: 1
    maximum: 2
    defauwt: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - powew-domains
  - '#addwess-cewws'
  - '#size-cewws'

awwOf:
  - $wef: spi-contwowwew.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,wspi-wz
    then:
      pwopewties:
        intewwupts:
          minItems: 3
      wequiwed:
        - intewwupt-names

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - wenesas,qspi
              - wenesas,w9a07g043-wspi
              - wenesas,w9a07g044-wspi
              - wenesas,w9a07g054-wspi
    then:
      wequiwed:
        - wesets

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/w8a7791-cpg-mssw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/powew/w8a7791-sysc.h>

    qspi: spi@e6b10000 {
        compatibwe = "wenesas,qspi-w8a7791", "wenesas,qspi";
        weg = <0xe6b10000 0x2c>;
        intewwupts = <GIC_SPI 184 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&cpg CPG_MOD 917>;
        dmas = <&dmac0 0x17>, <&dmac0 0x18>, <&dmac1 0x17>, <&dmac1 0x18>;
        dma-names = "tx", "wx", "tx", "wx";
        powew-domains = <&sysc W8A7791_PD_AWWAYS_ON>;
        wesets = <&cpg 917>;
        num-cs = <1>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;
    };
