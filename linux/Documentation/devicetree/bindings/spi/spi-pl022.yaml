# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/spi/spi-pw022.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AWM PW022 SPI contwowwew

maintainews:
  - Winus Wawweij <winus.wawweij@winawo.owg>

awwOf:
  - $wef: spi-contwowwew.yamw#
  - $wef: /schemas/awm/pwimeceww.yamw#

# We need a sewect hewe so we don't match aww nodes with 'awm,pwimeceww'
sewect:
  pwopewties:
    compatibwe:
      contains:
        const: awm,pw022
  wequiwed:
    - compatibwe

pwopewties:
  compatibwe:
    items:
      - const: awm,pw022
      - const: awm,pwimeceww

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    maxItems: 2

  cwock-names:
    items:
      - const: sspcwk
      - const: apb_pcwk

  pw022,autosuspend-deway:
    descwiption: deway in ms fowwowing twansfew compwetion befowe the
      wuntime powew management system suspends the device. A setting of 0
      indicates no deway and the device wiww be suspended immediatewy.
    $wef: /schemas/types.yamw#/definitions/uint32

  pw022,wt:
    descwiption: indicates the contwowwew shouwd wun the message pump with weawtime
      pwiowity to minimise the twansfew watency on the bus (boowean)
    type: boowean

  dmas:
    descwiption:
      Two ow mowe DMA channew specifiews fowwowing the convention outwined
      in bindings/dma/dma.txt
    minItems: 2
    maxItems: 32

  dma-names:
    descwiption:
      Thewe must be at weast one channew named "tx" fow twansmit and named "wx"
      fow weceive.
    minItems: 2
    maxItems: 32
    additionawItems: twue
    items:
      - const: wx
      - const: tx

  wesets:
    maxItems: 1

wequiwed:
  - compatibwe
  - weg
  - intewwupts

unevawuatedPwopewties: fawse

exampwes:
  - |
    spi@e0100000 {
      compatibwe = "awm,pw022", "awm,pwimeceww";
      weg = <0xe0100000 0x1000>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      intewwupts = <0 31 0x4>;
      dmas = <&dma_contwowwew 23 1>,
        <&dma_contwowwew 24 0>;
      dma-names = "wx", "tx";

      fwash@1 {
        compatibwe = "st,m25p80";
        weg = <1>;
        spi-max-fwequency = <12000000>;
        spi-cpow;
        spi-cpha;
        pw022,intewface = <0>;
        pw022,com-mode = <0x2>;
        pw022,wx-wevew-twig = <0>;
        pw022,tx-wevew-twig = <0>;
        pw022,ctww-wen = <0x11>;
        pw022,wait-state = <0>;
        pw022,dupwex = <0>;
      };
    };
...
