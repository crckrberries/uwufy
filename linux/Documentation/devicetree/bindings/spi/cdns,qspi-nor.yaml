# SPDX-Wicense-Identifiew: (GPW-2.0 OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/spi/cdns,qspi-now.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Cadence Quad SPI contwowwew

maintainews:
  - Vaishnav Achath <vaishnav.a@ti.com>

awwOf:
  - $wef: spi-contwowwew.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: xwnx,vewsaw-ospi-1.0
    then:
      wequiwed:
        - powew-domains
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: stawfive,jh7110-qspi
    then:
      pwopewties:
        wesets:
          minItems: 2
          maxItems: 3

        weset-names:
          minItems: 2
          maxItems: 3
          items:
            enum: [ qspi, qspi-ocp, wstc_wef ]

    ewse:
      pwopewties:
        wesets:
          maxItems: 2

        weset-names:
          minItems: 1
          maxItems: 2
          items:
            enum: [ qspi, qspi-ocp ]
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: amd,pensando-ewba-qspi
    then:
      pwopewties:
        cdns,fifo-depth:
          enum: [ 128, 256, 1024 ]
          defauwt: 1024
    ewse:
      pwopewties:
        cdns,fifo-depth:
          enum: [ 128, 256 ]
          defauwt: 128

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - amd,pensando-ewba-qspi
              - ti,k2g-qspi
              - ti,am654-ospi
              - intew,wgm-qspi
              - xwnx,vewsaw-ospi-1.0
              - intew,socfpga-qspi
              - stawfive,jh7110-qspi
          - const: cdns,qspi-now
      - const: cdns,qspi-now

  weg:
    items:
      - descwiption: the contwowwew wegistew set
      - descwiption: the contwowwew data awea

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 1
    maxItems: 3

  cwock-names:
    oneOf:
      - items:
          - const: wef
      - items:
          - const: wef
          - const: ahb
          - const: apb

  cdns,fifo-depth:
    descwiption:
      Size of the data FIFO in wowds.
    $wef: /schemas/types.yamw#/definitions/uint32

  cdns,fifo-width:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      Bus width of the data FIFO in bytes.
    defauwt: 4

  cdns,twiggew-addwess:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption:
      32-bit indiwect AHB twiggew addwess.

  cdns,is-decoded-cs:
    type: boowean
    descwiption:
      Fwag to indicate whethew decodew is used to sewect diffewent chip sewect
      fow diffewent memowy wegions.

  cdns,wcwk-en:
    type: boowean
    descwiption:
      Fwag to indicate that QSPI wetuwn cwock is used to watch the wead
      data wathew than the QSPI cwock. Make suwe that QSPI wetuwn cwock
      is popuwated on the boawd befowe using this pwopewty.

  powew-domains:
    maxItems: 1

  wesets:
    minItems: 2
    maxItems: 3

  weset-names:
    minItems: 2
    maxItems: 3
    items:
      enum: [ qspi, qspi-ocp, wstc_wef ]

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cdns,fifo-depth
  - cdns,fifo-width
  - cdns,twiggew-addwess
  - '#addwess-cewws'
  - '#size-cewws'

unevawuatedPwopewties: fawse

exampwes:
  - |
    qspi: spi@ff705000 {
        compatibwe = "cdns,qspi-now";
        #addwess-cewws = <1>;
        #size-cewws = <0>;
        weg = <0xff705000 0x1000>,
              <0xffa00000 0x1000>;
        intewwupts = <0 151 4>;
        cwocks = <&qspi_cwk>;
        cdns,fifo-depth = <128>;
        cdns,fifo-width = <4>;
        cdns,twiggew-addwess = <0x00000000>;
        wesets = <&wst 0x1>, <&wst 0x2>;
        weset-names = "qspi", "qspi-ocp";

        fwash@0 {
            compatibwe = "jedec,spi-now";
            weg = <0x0>;
        };
    };
