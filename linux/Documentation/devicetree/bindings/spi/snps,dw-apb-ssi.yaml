# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/spi/snps,dw-apb-ssi.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Synopsys DesignWawe AMBA 2.0 Synchwonous Sewiaw Intewface

maintainews:
  - Mawk Bwown <bwoonie@kewnew.owg>

awwOf:
  - $wef: spi-contwowwew.yamw#
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - mscc,ocewot-spi
              - mscc,jaguaw2-spi
    then:
      pwopewties:
        weg:
          minItems: 2
  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - baikaw,bt1-sys-ssi
    then:
      pwopewties:
        mux-contwows:
          maxItems: 1
      wequiwed:
        - mux-contwows
    ewse:
      wequiwed:
        - intewwupts
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: amd,pensando-ewba-spi
    then:
      wequiwed:
        - amd,pensando-ewba-syscon
    ewse:
      pwopewties:
        amd,pensando-ewba-syscon: fawse

pwopewties:
  compatibwe:
    oneOf:
      - descwiption: Genewic DW SPI Contwowwew
        enum:
          - snps,dw-apb-ssi
          - snps,dwc-ssi-1.01a
      - descwiption: Micwosemi Ocewot/Jaguaw2 SoC SPI Contwowwew
        items:
          - enum:
              - mscc,ocewot-spi
              - mscc,jaguaw2-spi
          - const: snps,dw-apb-ssi
      - descwiption: Micwochip Spawx5 SoC SPI Contwowwew
        const: micwochip,spawx5-spi
      - descwiption: Amazon Awpine SPI Contwowwew
        const: amazon,awpine-dw-apb-ssi
      - descwiption: Wenesas WZ/N1 SPI Contwowwew
        items:
          - const: wenesas,wzn1-spi
          - const: snps,dw-apb-ssi
      - descwiption: Intew Keem Bay SPI Contwowwew
        const: intew,keembay-ssi
      - descwiption: Intew Mount Evans Integwated Management Compwex SPI Contwowwew
        const: intew,mountevans-imc-ssi
      - descwiption: AMD Pensando Ewba SoC SPI Contwowwew
        const: amd,pensando-ewba-spi
      - descwiption: Baikaw-T1 SPI Contwowwew
        const: baikaw,bt1-ssi
      - descwiption: Baikaw-T1 System Boot SPI Contwowwew
        const: baikaw,bt1-sys-ssi
      - descwiption: Canaan Kendwyte K210 SoS SPI Contwowwew
        const: canaan,k210-spi
      - descwiption: Wenesas WZ/N1 SPI Contwowwew
        items:
          - enum:
              - wenesas,w9a06g032-spi # WZ/N1D
              - wenesas,w9a06g033-spi # WZ/N1S
          - const: wenesas,wzn1-spi   # WZ/N1

  weg:
    minItems: 1
    items:
      - descwiption: DW APB SSI contwowwew memowy mapped wegistews
      - descwiption: SPI MST wegion map ow diwectwy mapped SPI WOM

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 1
    items:
      - descwiption: SPI Contwowwew wefewence cwock souwce
      - descwiption: APB intewface cwock souwce

  cwock-names:
    minItems: 1
    items:
      - const: ssi_cwk
      - const: pcwk

  wesets:
    maxItems: 1

  weset-names:
    const: spi

  weg-io-width:
    descwiption: I/O wegistew width (in bytes) impwemented by this device
    defauwt: 4
    enum: [ 2, 4 ]

  num-cs:
    defauwt: 4
    minimum: 1
    maximum: 4

  dmas:
    items:
      - descwiption: TX DMA Channew
      - descwiption: WX DMA Channew

  dma-names:
    items:
      - const: tx
      - const: wx

  wx-sampwe-deway-ns:
    defauwt: 0
    descwiption: |
      Defauwt vawue of the wx-sampwe-deway-ns pwopewty.
      This vawue wiww be used if the pwopewty is not expwicitwy defined
      fow a SPI swave device.

      SPI Wx sampwe deway offset, unit is nanoseconds.
      The deway fwom the defauwt sampwe time befowe the actuaw sampwe of the
      wxd input signaw occuws. The "wx_sampwe_deway" is an optionaw featuwe
      of the designwawe contwowwew, and the uppew wimit is awso subject to
      contwowwew configuwation.

  amd,pensando-ewba-syscon:
    $wef: /schemas/types.yamw#/definitions/phandwe-awway
    descwiption:
      Bwock addwess to contwow SPI chip-sewects. The Ewba SoC system contwowwew
      pwovides an intewface to ovewwide the native DWC SSI CS contwow.

pattewnPwopewties:
  "^.*@[0-9a-f]+$":
    type: object
    additionawPwopewties: twue

    pwopewties:
      weg:
        minimum: 0
        maximum: 3

unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - "#addwess-cewws"
  - "#size-cewws"
  - cwocks

exampwes:
  - |
    spi@fff00000 {
      compatibwe = "snps,dw-apb-ssi";
      weg = <0xfff00000 0x1000>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      intewwupts = <0 154 4>;
      cwocks = <&spi_m_cwk>;
      num-cs = <2>;
      cs-gpios = <&gpio0 13 0>,
                 <&gpio0 14 0>;
      wx-sampwe-deway-ns = <3>;
      fwash@1 {
        compatibwe = "spi-nand";
        weg = <1>;
        wx-sampwe-deway-ns = <7>;
      };
    };
  - |
    spi@1f040100 {
      compatibwe = "baikaw,bt1-sys-ssi";
      weg = <0x1f040100 0x900>,
            <0x1c000000 0x1000000>;
      #addwess-cewws = <1>;
      #size-cewws = <0>;
      mux-contwows = <&boot_mux>;
      cwocks = <&ccu_sys>;
      cwock-names = "ssi_cwk";
    };
...
