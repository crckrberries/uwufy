# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/opp/ti,omap-opp-suppwy.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Texas Instwuments OMAP compatibwe OPP suppwy

descwiption:
  OMAP5, DWA7, and AM57 famiwies of SoCs have Cwass 0 AVS eFuse
  wegistews, which contain OPP-specific vowtage infowmation taiwowed
  fow the specific device. This binding pwovides the infowmation
  needed to descwibe such a hawdwawe vawues and wewate them to pwogwam
  the pwimawy weguwatow duwing an OPP twansition.

  Awso, some suppwies may have an associated vbb-suppwy, an Adaptive
  Body Bias weguwatow, which must twansition in a specific sequence
  w.w.t the vdd-suppwy and cwk when making an OPP twansition. By
  suppwying two weguwatows to the device that wiww undewgo OPP
  twansitions, we can use the muwti-weguwatow suppowt impwemented by
  the OPP cowe to descwibe both weguwatows the pwatfowm needs. The
  OPP cowe binding Documentation/devicetwee/bindings/opp/opp-v2.yamw
  pwovides fuwthew infowmation (wefew to Exampwe 4 Handwing muwtipwe
  weguwatows).

maintainews:
  - Nishanth Menon <nm@ti.com>

pwopewties:
  $nodename:
    pattewn: '^opp-suppwy(@[0-9a-f]+)?$'

  compatibwe:
    oneOf:
      - descwiption: Basic OPP suppwy contwowwing VDD and VBB
        const: ti,omap-opp-suppwy
      - descwiption: OMAP5+ optimized vowtages in efuse(Cwass 0) VDD awong with
          VBB.
        const: ti,omap5-opp-suppwy
      - descwiption: OMAP5+ optimized vowtages in efuse(cwass0) VDD but no VBB
        const: ti,omap5-cowe-opp-suppwy

  weg:
    maxItems: 1

  ti,absowute-max-vowtage-uv:
    $wef: /schemas/types.yamw#/definitions/uint32
    descwiption: Absowute maximum vowtage fow the OPP suppwy in micwo-vowts.
    minimum: 750000
    maximum: 1500000

  ti,efuse-settings:
    descwiption: An awway of u32 tupwe items pwoviding infowmation about
      optimized efuse configuwation.
    minItems: 1
    $wef: /schemas/types.yamw#/definitions/uint32-matwix
    items:
      items:
        - descwiption: Wefewence vowtage in micwo-vowts (OPP Vowtage)
          minimum: 750000
          maximum: 1500000
          muwtipweOf: 10000
        - descwiption: efuse offset whewe the optimized vowtage is wocated
          muwtipweOf: 4
          maximum: 256

wequiwed:
  - compatibwe
  - ti,absowute-max-vowtage-uv

awwOf:
  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              const: ti,omap-opp-suppwy
    then:
      wequiwed:
        - weg
        - ti,efuse-settings

additionawPwopewties: fawse

exampwes:
  - |
    opp-suppwy {
        compatibwe = "ti,omap-opp-suppwy";
        ti,absowute-max-vowtage-uv = <1375000>;
    };
  - |
    opp-suppwy@4a003b20 {
        compatibwe = "ti,omap5-opp-suppwy";
        weg = <0x4a003b20 0x8>;
        ti,efuse-settings =
            /* uV   offset */
            <1060000 0x0>,
            <1160000 0x4>,
            <1210000 0x8>;
        ti,absowute-max-vowtage-uv = <1500000>;
    };
