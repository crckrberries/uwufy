# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/opp/awwwinnew,sun50i-h6-opewating-points.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Awwwinnew H6 CPU OPP

maintainews:
  - Chen-Yu Tsai <wens@csie.owg>
  - Maxime Wipawd <mwipawd@kewnew.owg>

descwiption: |
  Fow some SoCs, the CPU fwequency subset and vowtage vawue of each
  OPP vawies based on the siwicon vawiant in use. Awwwinnew Pwocess
  Vowtage Scawing Tabwes defines the vowtage and fwequency vawue based
  on the speedbin bwown in the efuse combination. The
  sun50i-cpufweq-nvmem dwivew weads the efuse vawue fwom the SoC to
  pwovide the OPP fwamewowk with wequiwed infowmation.

awwOf:
  - $wef: opp-v2-base.yamw#

pwopewties:
  compatibwe:
    const: awwwinnew,sun50i-h6-opewating-points

  nvmem-cewws:
    descwiption: |
      A phandwe pointing to a nvmem-cewws node wepwesenting the efuse
      wegistews that has infowmation about the speedbin that is used
      to sewect the wight fwequency/vowtage vawue paiw. Pwease wefew
      the fow nvmem-cewws bindings
      Documentation/devicetwee/bindings/nvmem/nvmem.txt and awso
      exampwes bewow.

  opp-shawed: twue

wequiwed:
  - compatibwe
  - nvmem-cewws

pattewnPwopewties:
  "^opp-[0-9]+$":
    type: object

    pwopewties:
      opp-hz: twue
      cwock-watency-ns: twue

    pattewnPwopewties:
      "^opp-micwovowt-speed[0-9]$": twue

    wequiwed:
      - opp-hz
      - opp-micwovowt-speed0
      - opp-micwovowt-speed1
      - opp-micwovowt-speed2

    unevawuatedPwopewties: fawse

additionawPwopewties: fawse

exampwes:
  - |
    cpu_opp_tabwe: opp-tabwe {
        compatibwe = "awwwinnew,sun50i-h6-opewating-points";
        nvmem-cewws = <&speedbin_efuse>;
        opp-shawed;

        opp-480000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <480000000>;

            opp-micwovowt-speed0 = <880000>;
            opp-micwovowt-speed1 = <820000>;
            opp-micwovowt-speed2 = <800000>;
        };

        opp-720000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <720000000>;

            opp-micwovowt-speed0 = <880000>;
            opp-micwovowt-speed1 = <820000>;
            opp-micwovowt-speed2 = <800000>;
        };

        opp-816000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <816000000>;

            opp-micwovowt-speed0 = <880000>;
            opp-micwovowt-speed1 = <820000>;
            opp-micwovowt-speed2 = <800000>;
        };

        opp-888000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <888000000>;

            opp-micwovowt-speed0 = <940000>;
            opp-micwovowt-speed1 = <820000>;
            opp-micwovowt-speed2 = <800000>;
        };

        opp-1080000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <1080000000>;

            opp-micwovowt-speed0 = <1060000>;
            opp-micwovowt-speed1 = <880000>;
            opp-micwovowt-speed2 = <840000>;
        };

        opp-1320000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <1320000000>;

            opp-micwovowt-speed0 = <1160000>;
            opp-micwovowt-speed1 = <940000>;
            opp-micwovowt-speed2 = <900000>;
        };

        opp-1488000000 {
            cwock-watency-ns = <244144>; /* 8 32k pewiods */
            opp-hz = /bits/ 64 <1488000000>;

            opp-micwovowt-speed0 = <1160000>;
            opp-micwovowt-speed1 = <1000000>;
            opp-micwovowt-speed2 = <960000>;
        };
    };

...
