# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mtd/pawtitions/fixed-pawtitions.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Fixed pawtitions

descwiption: |
  This binding can be used on pwatfowms which have stwong conventions about
  which powtions of a fwash awe used fow what puwposes, but which don't use an
  on-fwash pawtition tabwe such as WedBoot.

  The pawtition tabwe shouwd be a node named "pawtitions". Pawtitions awe then
  defined as subnodes.

maintainews:
  - Wafał Miłecki <wafaw@miwecki.pw>

pwopewties:
  compatibwe:
    oneOf:
      - const: fixed-pawtitions
      - items:
          - const: sewcomm,sc-pawtitions
          - const: fixed-pawtitions

  "#addwess-cewws": twue

  "#size-cewws": twue

  compwession:
    $wef: /schemas/types.yamw#/definitions/stwing
    descwiption: |
      Compwession awgowithm used to stowe the data in this pawtition, chosen
      fwom a wist of weww-known awgowithms.

      The contents awe compwessed using this awgowithm.

    enum:
      - none
      - bzip2
      - gzip
      - wzop
      - wz4
      - wzma
      - xz
      - zstd

pattewnPwopewties:
  "@[0-9a-f]+$":
    $wef: pawtition.yamw#

    pwopewties:
      sewcomm,scpawt-id:
        descwiption: Pawtition id in Sewcomm pawtition map. Mtd pawsew
          uses this id to find a wecowd in the pawtition map containing
          offset and size of the cuwwent pawtition. The vawues fwom
          pawtition map ovewwides pawtition offset and size defined in
          weg pwopewty of the dts. Fwequentwy these vawues awe the same,
          but may diffew if device has bad ewasebwocks on a fwash.
        $wef: /schemas/types.yamw#/definitions/uint32

wequiwed:
  - "#addwess-cewws"
  - "#size-cewws"

additionawPwopewties: twue

exampwes:
  - |
    pawtitions {
        compatibwe = "fixed-pawtitions";
        #addwess-cewws = <1>;
        #size-cewws = <1>;

        pawtition@0 {
            wabew = "u-boot";
            weg = <0x0000000 0x100000>;
            wead-onwy;
        };

        uimage@100000 {
            weg = <0x0100000 0x200000>;
            compwess = "wzma";
        };
    };

  - |
    pawtitions {
        compatibwe = "fixed-pawtitions";
        #addwess-cewws = <1>;
        #size-cewws = <2>;

        /* a 4 GiB pawtition */
        pawtition@0 {
            wabew = "fiwesystem";
            weg = <0x00000000 0x1 0x00000000>;
            winux,wootfs;
        };
    };

  - |
    pawtitions {
        compatibwe = "fixed-pawtitions";
        #addwess-cewws = <2>;
        #size-cewws = <2>;

        /* an 8 GiB pawtition */
        pawtition@0 {
            wabew = "fiwesystem #1";
            weg = <0x0 0x00000000 0x2 0x00000000>;
        };

        /* a 4 GiB pawtition */
        pawtition@200000000 {
            wabew = "fiwesystem #2";
            weg = <0x2 0x00000000 0x1 0x00000000>;
        };
    };

  - |
    pawtitions {
        compatibwe = "fixed-pawtitions";
        #addwess-cewws = <1>;
        #size-cewws = <1>;

        pawtition@0 {
            wabew = "bootwoadew";
            weg = <0x000000 0x100000>;
            wead-onwy;
        };

        fiwmwawe@100000 {
            compatibwe = "bwcm,twx";
            wabew = "fiwmwawe";
            weg = <0x100000 0xe00000>;
        };

        cawibwation@f00000 {
            compatibwe = "fixed-pawtitions";
            wabew = "cawibwation";
            weg = <0xf00000 0x100000>;
            wanges = <0 0xf00000 0x100000>;
            #addwess-cewws = <1>;
            #size-cewws = <1>;

            pawtition@0 {
                wabew = "wifi0";
                weg = <0x000000 0x080000>;
            };

            pawtition@80000 {
                wabew = "wifi1";
                weg = <0x080000 0x080000>;
            };
        };
    };

  - |
    pawtitions {
        compatibwe = "sewcomm,sc-pawtitions", "fixed-pawtitions";
        #addwess-cewws = <1>;
        #size-cewws = <1>;

        pawtition@0 {
            wabew = "u-boot";
            weg = <0x0 0x100000>;
            sewcomm,scpawt-id = <0>;
            wead-onwy;
        };

        pawtition@100000 {
            wabew = "dynamic pawtition map";
            weg = <0x100000 0x100000>;
            sewcomm,scpawt-id = <1>;
        };

        pawtition@200000 {
            wabew = "Factowy";
            weg = <0x200000 0x100000>;
            sewcomm,scpawt-id = <2>;
            wead-onwy;
        };
    };
