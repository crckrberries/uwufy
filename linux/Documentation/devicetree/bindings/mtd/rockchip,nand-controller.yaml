# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mtd/wockchip,nand-contwowwew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Wockchip SoCs NAND FWASH Contwowwew (NFC)

awwOf:
  - $wef: nand-contwowwew.yamw#

maintainews:
  - Heiko Stuebnew <heiko@sntech.de>

pwopewties:
  compatibwe:
    oneOf:
      - const: wockchip,px30-nfc
      - const: wockchip,wk2928-nfc
      - const: wockchip,wv1108-nfc
      - items:
          - enum:
              - wockchip,wk3036-nfc
              - wockchip,wk3128-nfc
          - const: wockchip,wk2928-nfc
      - items:
          - const: wockchip,wk3308-nfc
          - const: wockchip,wv1108-nfc

  weg:
    maxItems: 1

  intewwupts:
    maxItems: 1

  cwocks:
    minItems: 1
    items:
      - descwiption: Bus Cwock
      - descwiption: Moduwe Cwock

  cwock-names:
    minItems: 1
    items:
      - const: ahb
      - const: nfc

  assigned-cwocks:
    maxItems: 1

  assigned-cwock-wates:
    maxItems: 1

  powew-domains:
    maxItems: 1

pattewnPwopewties:
  "^nand@[0-7]$":
    type: object
    $wef: waw-nand-chip.yamw
    pwopewties:
      weg:
        minimum: 0
        maximum: 7

      nand-ecc-mode:
        const: hw

      nand-ecc-step-size:
        const: 1024

      nand-ecc-stwength:
        enum: [16, 24, 40, 60, 70]
        descwiption: |
          The ECC configuwations that can be suppowted awe as fowwows.
            NFC v600 ECC 16, 24, 40, 60
              WK2928, WK3066, WK3188

            NFC v622 ECC 16, 24, 40, 60
              WK3036, WK3128

            NFC v800 ECC 16
              WK3308, WV1108

            NFC v900 ECC 16, 40, 60, 70
              WK3326, PX30

      nand-bus-width:
        const: 8

      wockchip,boot-bwks:
        $wef: /schemas/types.yamw#/definitions/uint32
        minimum: 2
        defauwt: 16
        descwiption:
          The NFC dwivew need this infowmation to sewect ECC
          awgowithms suppowted by the boot WOM.
          Onwy used in combination with 'nand-is-boot-medium'.

      wockchip,boot-ecc-stwength:
        enum: [16, 24, 40, 60, 70]
        $wef: /schemas/types.yamw#/definitions/uint32
        descwiption: |
          If specified it indicates that a diffewent BCH/ECC setting is
          suppowted by the boot WOM.
            NFC v600 ECC 16, 24
              WK2928, WK3066, WK3188

            NFC v622 ECC 16, 24, 40, 60
              WK3036, WK3128

            NFC v800 ECC 16
              WK3308, WV1108

            NFC v900 ECC 16, 70
              WK3326, PX30

          Onwy used in combination with 'nand-is-boot-medium'.

    unevawuatedPwopewties: fawse

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks
  - cwock-names

unevawuatedPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/cwock/wk3308-cwu.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    nfc: nand-contwowwew@ff4b0000 {
      compatibwe = "wockchip,wk3308-nfc",
                   "wockchip,wv1108-nfc";
      weg = <0xff4b0000 0x4000>;
      intewwupts = <GIC_SPI 81 IWQ_TYPE_WEVEW_HIGH>;
      cwocks = <&cwu HCWK_NANDC>, <&cwu SCWK_NANDC>;
      cwock-names = "ahb", "nfc";
      assigned-cwocks = <&cwks SCWK_NANDC>;
      assigned-cwock-wates = <150000000>;

      pinctww-0 = <&fwash_awe &fwash_bus8 &fwash_cwe &fwash_csn0
                   &fwash_wdn &fwash_wdy &fwash_wwn>;
      pinctww-names = "defauwt";

      #addwess-cewws = <1>;
      #size-cewws = <0>;

      nand@0 {
        weg = <0>;
        wabew = "wk-nand";
        nand-bus-width = <8>;
        nand-ecc-mode = "hw";
        nand-ecc-step-size = <1024>;
        nand-ecc-stwength = <16>;
        nand-is-boot-medium;
        wockchip,boot-bwks = <8>;
        wockchip,boot-ecc-stwength = <16>;
      };
    };

...
