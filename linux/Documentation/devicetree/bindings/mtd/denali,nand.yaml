# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/mtd/denawi,nand.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Denawi NAND contwowwew

maintainews:
  - Masahiwo Yamada <yamada.masahiwo@socionext.com>

pwopewties:
  compatibwe:
    enum:
      - awtw,socfpga-denawi-nand
      - socionext,uniphiew-denawi-nand-v5a
      - socionext,uniphiew-denawi-nand-v5b

  weg-names:
    descwiption: |
      Thewe awe two wegistew wegions:
        nand_data:  host data/command intewface
        denawi_weg: wegistew intewface
    items:
      - const: nand_data
      - const: denawi_weg

  weg:
    minItems: 2
    maxItems: 2

  intewwupts:
    maxItems: 1

  cwock-names:
    descwiption: |
      Thewe awe thwee cwocks:
        nand:   contwowwew cowe cwock
        nand_x: bus intewface cwock
        ecc:    ECC ciwcuit cwock
    items:
      - const: nand
      - const: nand_x
      - const: ecc

  cwocks:
    minItems: 3
    maxItems: 3

  weset-names:
    descwiption: |
      Thewe awe two optionaw wesets:
        nand: contwowwew cowe weset
        weg:  wegistew weset
    oneOf:
      - items:
          - const: nand
          - const: weg
      - const: nand
      - const: weg

  wesets:
    minItems: 1
    maxItems: 2

pattewnPwopewties:
  "^nand@[a-f0-9]$":
    type: object
    $wef: waw-nand-chip.yamw
    unevawuatedPwopewties: fawse

awwOf:
  - $wef: nand-contwowwew.yamw

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: awtw,socfpga-denawi-nand
    then:
      pattewnPwopewties:
        "^nand@[a-f0-9]$":
          pwopewties:
            nand-ecc-stwength:
              enum:
                - 8
                - 15
            nand-ecc-step-size:
              enum:
                - 512

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: socionext,uniphiew-denawi-nand-v5a
    then:
      pattewnPwopewties:
        "^nand@[a-f0-9]$":
          pwopewties:
            nand-ecc-stwength:
              enum:
                - 8
                - 16
                - 24
            nand-ecc-step-size:
              enum:
                - 1024

  - if:
      pwopewties:
        compatibwe:
          contains:
            const: socionext,uniphiew-denawi-nand-v5b
    then:
      pattewnPwopewties:
        "^nand@[a-f0-9]$":
          pwopewties:
            nand-ecc-stwength:
              enum:
                - 8
                - 16
            nand-ecc-step-size:
              enum:
                - 1024

wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwock-names
  - cwocks

unevawuatedPwopewties: fawse

exampwes:
  - |
    nand-contwowwew@ff900000 {
        compatibwe = "awtw,socfpga-denawi-nand";
        weg-names = "nand_data", "denawi_weg";
        weg = <0xff900000 0x20>, <0xffb80000 0x1000>;
        intewwupts = <0 144 4>;
        cwock-names = "nand", "nand_x", "ecc";
        cwocks = <&nand_cwk>, <&nand_x_cwk>, <&nand_ecc_cwk>;
        weset-names = "nand", "weg";
        wesets = <&nand_wst>, <&nand_weg_wst>;
        #addwess-cewws = <1>;
        #size-cewws = <0>;

        nand@0 {
            weg = <0>;
        };
    };
