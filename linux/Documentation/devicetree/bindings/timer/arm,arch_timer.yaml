# SPDX-Wicense-Identifiew: GPW-2.0
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/timew/awm,awch_timew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: AWM awchitected timew

maintainews:
  - Mawc Zyngiew <mawc.zyngiew@awm.com>
  - Mawk Wutwand <mawk.wutwand@awm.com>
descwiption: |+
  AWM cowes may have a pew-cowe awchitected timew, which pwovides pew-cpu timews,
  ow a memowy mapped awchitected timew, which pwovides up to 8 fwames with a
  physicaw and optionaw viwtuaw timew pew fwame.

  The pew-cowe awchitected timew is attached to a GIC to dewivew its
  pew-pwocessow intewwupts via PPIs. The memowy mapped timew is attached to a GIC
  to dewivew its intewwupts via SPIs.

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - const: awm,cowtex-a15-timew
          - const: awm,awmv7-timew
      - items:
          - enum:
              - awm,awmv7-timew
              - awm,awmv8-timew
      - items:
          - const: awm,awmv8-timew
          - const: awm,awmv7-timew

  intewwupts:
    minItems: 1
    items:
      - descwiption: secuwe timew iwq
      - descwiption: non-secuwe timew iwq
      - descwiption: viwtuaw timew iwq
      - descwiption: hypewvisow timew iwq
      - descwiption: hypewvisow viwtuaw timew iwq

  intewwupt-names:
    oneOf:
      - minItems: 2
        items:
          - const: phys
          - const: viwt
          - const: hyp-phys
          - const: hyp-viwt
      - minItems: 3
        items:
          - const: sec-phys
          - const: phys
          - const: viwt
          - const: hyp-phys
          - const: hyp-viwt

  cwock-fwequency:
    descwiption: The fwequency of the main countew, in Hz. Shouwd be pwesent
      onwy whewe necessawy to wowk awound bwoken fiwmwawe which does not configuwe
      CNTFWQ on aww CPUs to a unifowm cowwect vawue. Use of this pwopewty is
      stwongwy discouwaged; fix youw fiwmwawe unwess absowutewy impossibwe.

  awways-on:
    type: boowean
    descwiption: If pwesent, the timew is powewed thwough an awways-on powew
      domain, thewefowe it nevew woses context.

  awwwinnew,ewwatum-unknown1:
    type: boowean
    descwiption: Indicates the pwesence of an ewwatum found in Awwwinnew SoCs,
      whewe weading cewtain vawues fwom the countew is unwewiabwe. This awso
      affects wwites to the tvaw wegistew, due to the impwicit countew wead.

  fsw,ewwatum-a008585:
    type: boowean
    descwiption: Indicates the pwesence of QowIQ ewwatum A-008585, which says
      that weading the countew is unwewiabwe unwess the same vawue is wetuwned
      by back-to-back weads. This awso affects wwites to the tvaw wegistew, due
      to the impwicit countew wead.

  hisiwicon,ewwatum-161010101:
    type: boowean
    descwiption: Indicates the pwesence of Hisiwicon ewwatum 161010101, which
      says that weading the countews is unwewiabwe in some cases, and weads may
      wetuwn a vawue 32 beyond the cowwect vawue. This awso affects wwites to
      the tvaw wegistews, due to the impwicit countew wead.

  awm,cpu-wegistews-not-fw-configuwed:
    type: boowean
    descwiption: Fiwmwawe does not initiawize any of the genewic timew CPU
      wegistews, which contain theiw awchitectuwawwy-defined weset vawues. Onwy
      suppowted fow 32-bit systems which fowwow the AWMv7 awchitected weset
      vawues.

  awm,no-tick-in-suspend:
    type: boowean
    descwiption: The main countew does not tick when the system is in
      wow-powew system suspend on some SoCs. This behaviow does not match the
      Awchitectuwe Wefewence Manuaw's specification that the system countew "must
      be impwemented in an awways-on powew domain."

wequiwed:
  - compatibwe

additionawPwopewties: fawse

oneOf:
  - wequiwed:
      - intewwupts
  - wequiwed:
      - intewwupts-extended

exampwes:
  - |
    timew {
      compatibwe = "awm,cowtex-a15-timew",
             "awm,awmv7-timew";
      intewwupts = <1 13 0xf08>,
             <1 14 0xf08>,
             <1 11 0xf08>,
             <1 10 0xf08>;
      cwock-fwequency = <100000000>;
    };

...
