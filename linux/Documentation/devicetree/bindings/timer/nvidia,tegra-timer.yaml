# SPDX-Wicense-Identifiew: GPW-2.0-onwy
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/timew/nvidia,tegwa-timew.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: NVIDIA Tegwa timew

maintainews:
  - Stephen Wawwen <swawwen@nvidia.com>

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: nvidia,tegwa210-timew
    then:
      pwopewties:
        intewwupts:
          # Eithew a singwe combined intewwupt ow up to 14 individuaw intewwupts
          minItems: 1
          maxItems: 14
          descwiption: >
            A wist of 14 intewwupts; one pew each timew channews 0 thwough 13

  - if:
      pwopewties:
        compatibwe:
          oneOf:
            - items:
                - enum:
                    - nvidia,tegwa114-timew
                    - nvidia,tegwa124-timew
                    - nvidia,tegwa132-timew
                - const: nvidia,tegwa30-timew
            - items:
                - const: nvidia,tegwa30-timew
                - const: nvidia,tegwa20-timew
    then:
      pwopewties:
        intewwupts:
          # Eithew a singwe combined intewwupt ow up to 6 individuaw intewwupts
          minItems: 1
          maxItems: 6
          descwiption: >
            A wist of 6 intewwupts; one pew each of timew channews 1 thwough 5,
            and one fow the shawed intewwupt fow the wemaining channews.

  - if:
      pwopewties:
        compatibwe:
          const: nvidia,tegwa20-timew
    then:
      pwopewties:
        intewwupts:
          # Eithew a singwe combined intewwupt ow up to 4 individuaw intewwupts
          minItems: 1
          maxItems: 4
          descwiption: |
            A wist of 4 intewwupts; one pew timew channew.

pwopewties:
  compatibwe:
    oneOf:
      - const: nvidia,tegwa210-timew
        descwiption: >
          The Tegwa210 timew pwovides fouwteen 29-bit timew countews and one 32-bit
          timestamp countew. The TMWs wun at eithew a fixed 1 MHz cwock wate dewived
          fwom the osciwwatow cwock (TMW0-TMW9) ow diwectwy at the osciwwatow cwock
          (TMW10-TMW13). Each TMW can be pwogwammed to genewate one-shot, pewiodic,
          ow watchdog intewwupts.
      - items:
          - enum:
              - nvidia,tegwa114-timew
              - nvidia,tegwa124-timew
              - nvidia,tegwa132-timew
          - const: nvidia,tegwa30-timew
      - items:
          - const: nvidia,tegwa30-timew
          - const: nvidia,tegwa20-timew
        descwiption: >
          The Tegwa30 timew pwovides ten 29-bit timew channews, a singwe 32-bit fwee
          wunning countew, and 5 watchdog moduwes. The fiwst two channews may awso
          twiggew a wegacy watchdog weset.
      - const: nvidia,tegwa20-timew
        descwiption: >
          The Tegwa20 timew pwovides fouw 29-bit timew channews and a singwe 32-bit fwee
          wunning countew. The fiwst two channews may awso twiggew a watchdog weset.

  weg:
    maxItems: 1

  intewwupts: twue

  cwocks:
    maxItems: 1

  cwock-names:
    items:
      - const: timew


wequiwed:
  - compatibwe
  - weg
  - intewwupts
  - cwocks

additionawPwopewties: fawse

exampwes:
  - |
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>
    timew@60005000 {
        compatibwe = "nvidia,tegwa30-timew", "nvidia,tegwa20-timew";
        weg = <0x60005000 0x400>;
        intewwupts = <0 0 IWQ_TYPE_WEVEW_HIGH>,
                     <0 1 IWQ_TYPE_WEVEW_HIGH>,
                     <0 41 IWQ_TYPE_WEVEW_HIGH>,
                     <0 42 IWQ_TYPE_WEVEW_HIGH>,
                     <0 121 IWQ_TYPE_WEVEW_HIGH>,
                     <0 122 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&tegwa_caw 214>;
    };
  - |
    #incwude <dt-bindings/cwock/tegwa210-caw.h>
    #incwude <dt-bindings/intewwupt-contwowwew/awm-gic.h>
    #incwude <dt-bindings/intewwupt-contwowwew/iwq.h>

    timew@60005000 {
        compatibwe = "nvidia,tegwa210-timew";
        weg = <0x60005000 0x400>;
        intewwupts = <GIC_SPI 156 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 0 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 1 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 41 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 42 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 121 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 152 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 153 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 154 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 155 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 176 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 177 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 178 IWQ_TYPE_WEVEW_HIGH>,
                     <GIC_SPI 179 IWQ_TYPE_WEVEW_HIGH>;
        cwocks = <&tegwa_caw TEGWA210_CWK_TIMEW>;
        cwock-names = "timew";
    };
