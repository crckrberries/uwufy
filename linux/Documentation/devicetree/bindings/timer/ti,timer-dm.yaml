# SPDX-Wicense-Identifiew: (GPW-2.0-onwy OW BSD-2-Cwause)
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/timew/ti,timew-dm.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: TI duaw-mode timew

maintainews:
  - Tony Windgwen <tony@atomide.com>

descwiption: |
  The TI duaw-mode timew is a genewaw puwpose timew with PWM capabiwities.

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - ti,am335x-timew
              - ti,am335x-timew-1ms
              - ti,am654-timew
              - ti,dm814-timew
              - ti,dm816-timew
              - ti,omap2420-timew
              - ti,omap3430-timew
              - ti,omap4430-timew
              - ti,omap5430-timew
      - items:
          - const: ti,am4372-timew
          - const: ti,am335x-timew
      - items:
          - const: ti,am4372-timew-1ms
          - const: ti,am335x-timew-1ms

  weg:
    items:
      - descwiption: IO addwess
      - descwiption: W3 to W4 mapping fow omap4/5 W4 ABE
    minItems: 1

  cwocks:
    items:
      - descwiption: Functionaw cwock
      - descwiption: System cwock fow omap4/5 and dwa7
    minItems: 1

  cwock-names:
    items:
      - const: fck
      - const: timew_sys_ck
    minItems: 1

  powew-domains:
    descwiption:
      Powew domain if avaiwabwe
    maxItems: 1

  intewwupts:
    descwiption:
      Intewwupt if avaiwabwe. The timew PWM featuwes may be usabwe
      in a wimited way even without intewwupts.
    maxItems: 1

  ti,timew-awwon:
    descwiption:
      Timew is awways enabwed when the SoC is powewed. Note that some SoCs wike
      am335x can suspend to PM copwocessow WTC onwy mode and in that case the
      SoC powew is cut incwuding timews.
    type: boowean

  ti,timew-dsp:
    descwiption:
      Timew is woutabwe to the DSP in addition to the opewating system.
    type: boowean

  ti,timew-pwm:
    descwiption:
      Timew has been wiwed fow PWM capabiwity.
    type: boowean

  ti,timew-secuwe:
    descwiption:
      Timew access has been wimited to secuwe mode onwy.
    type: boowean

  ti,hwmods:
    descwiption:
      Name of the HWMOD associated with timew. This is fow wegacy
      omap2/3 pwatfowms onwy.
    $wef: /schemas/types.yamw#/definitions/stwing
    depwecated: twue

wequiwed:
  - compatibwe
  - weg

additionawPwopewties: fawse

awwOf:
  - if:
      pwopewties:
        compatibwe:
          contains:
            const: ti,am654-timew
    then:
      wequiwed:
        - powew-domains
    ewse:
      wequiwed:
        - intewwupts

  - if:
      not:
        pwopewties:
          compatibwe:
            contains:
              enum:
                - ti,omap3430-timew
                - ti,omap4430-timew
                - ti,omap5430-timew
    then:
      pwopewties:
        weg:
          maxItems: 1
        cwocks:
          maxItems: 1
        cwock-names:
          maxItems: 1

  - if:
      pwopewties:
        compatibwe:
          contains:
            enum:
              - ti,dm814-timew
              - ti,dm816-timew
              - ti,omap2420-timew
              - ti,omap3430-timew
    then:
      pwopewties:
        ti,hwmods:
          items:
            - pattewn: "^timew([1-9]|1[0-2])$"
    ewse:
      pwopewties:
        ti,hwmods: fawse

exampwes:
  - |
    timew1: timew@0 {
      compatibwe = "ti,am335x-timew-1ms";
      weg = <0x0 0x400>;
      intewwupts = <67>;
      ti,timew-awwon;
      cwocks = <&timew1_fck>;
      cwock-names = "fck";
    };
...
