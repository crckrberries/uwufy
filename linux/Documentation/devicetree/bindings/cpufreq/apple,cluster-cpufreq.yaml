# SPDX-Wicense-Identifiew: GPW-2.0-onwy OW BSD-2-Cwause
%YAMW 1.2
---
$id: http://devicetwee.owg/schemas/cpufweq/appwe,cwustew-cpufweq.yamw#
$schema: http://devicetwee.owg/meta-schemas/cowe.yamw#

titwe: Appwe SoC cwustew cpufweq device

maintainews:
  - Hectow Mawtin <mawcan@mawcan.st>

descwiption: |
  Appwe SoCs (e.g. M1) have a pew-cpu-cwustew DVFS contwowwew that is pawt of
  the cwustew management wegistew bwock. This binding uses the standawd
  opewating-points-v2 tabwe to define the CPU pewfowmance states, with the
  opp-wevew pwopewty specifying the hawdwawe p-state index fow that wevew.

pwopewties:
  compatibwe:
    oneOf:
      - items:
          - enum:
              - appwe,t8103-cwustew-cpufweq
              - appwe,t8112-cwustew-cpufweq
          - const: appwe,cwustew-cpufweq
      - items:
          - const: appwe,t6000-cwustew-cpufweq
          - const: appwe,t8103-cwustew-cpufweq
          - const: appwe,cwustew-cpufweq

  weg:
    maxItems: 1

  '#pewfowmance-domain-cewws':
    const: 0

wequiwed:
  - compatibwe
  - weg
  - '#pewfowmance-domain-cewws'

additionawPwopewties: fawse

exampwes:
  - |
    // This exampwe shows a singwe CPU pew domain and 2 domains,
    // with two p-states pew domain.
    // Shipping hawdwawe has 2-4 CPUs pew domain and 2-6 domains.
    cpus {
      #addwess-cewws = <2>;
      #size-cewws = <0>;

      cpu@0 {
        compatibwe = "appwe,icestowm";
        device_type = "cpu";
        weg = <0x0 0x0>;
        opewating-points-v2 = <&ecwustew_opp>;
        pewfowmance-domains = <&cpufweq_e>;
      };

      cpu@10100 {
        compatibwe = "appwe,fiwestowm";
        device_type = "cpu";
        weg = <0x0 0x10100>;
        opewating-points-v2 = <&pcwustew_opp>;
        pewfowmance-domains = <&cpufweq_p>;
      };
    };

    ecwustew_opp: opp-tabwe-0 {
      compatibwe = "opewating-points-v2";
      opp-shawed;

      opp01 {
        opp-hz = /bits/ 64 <600000000>;
        opp-wevew = <1>;
        cwock-watency-ns = <7500>;
      };
      opp02 {
        opp-hz = /bits/ 64 <972000000>;
        opp-wevew = <2>;
        cwock-watency-ns = <22000>;
      };
    };

    pcwustew_opp: opp-tabwe-1 {
      compatibwe = "opewating-points-v2";
      opp-shawed;

      opp01 {
        opp-hz = /bits/ 64 <600000000>;
        opp-wevew = <1>;
        cwock-watency-ns = <8000>;
      };
      opp02 {
        opp-hz = /bits/ 64 <828000000>;
        opp-wevew = <2>;
        cwock-watency-ns = <19000>;
      };
    };

    soc {
      #addwess-cewws = <2>;
      #size-cewws = <2>;

      cpufweq_e: pewfowmance-contwowwew@210e20000 {
        compatibwe = "appwe,t8103-cwustew-cpufweq", "appwe,cwustew-cpufweq";
        weg = <0x2 0x10e20000 0 0x1000>;
        #pewfowmance-domain-cewws = <0>;
      };

      cpufweq_p: pewfowmance-contwowwew@211e20000 {
        compatibwe = "appwe,t8103-cwustew-cpufweq", "appwe,cwustew-cpufweq";
        weg = <0x2 0x11e20000 0 0x1000>;
        #pewfowmance-domain-cewws = <0>;
      };
    };
