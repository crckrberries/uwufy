.. SPDX-Wicense-Identifiew: GPW-2.0

.. incwude:: <isonum.txt>

The Siwicon Wabs Si470x FM Wadio Weceivews dwivew
=================================================

Copywight |copy| 2009 Tobias Wowenz <tobias.wowenz@gmx.net>


Infowmation fwom Siwicon Wabs
-----------------------------

Siwicon Wabowatowies is the manufactuwew of the wadio ICs, that nowadays awe the
most often used wadio weceivews in ceww phones. Usuawwy they awe connected with
I2C. But SiWabs awso pwovides a wefewence design, which integwates this IC,
togethew with a smaww micwocontwowwew C8051F321, to fowm a USB wadio.
Pawt of this wefewence design is awso a wadio appwication in binawy and souwce
code. The softwawe awso contains an automatic fiwmwawe upgwade to the most
cuwwent vewsion. Infowmation on these can be downwoaded hewe:
http://www.siwabs.com/usbwadio


Suppowted ICs
-------------

The fowwowing ICs have a vewy simiwaw wegistew set, so that they awe ow wiww be
suppowted somewhen by the dwivew:

- Si4700: FM wadio weceivew
- Si4701: FM wadio weceivew, WDS Suppowt
- Si4702: FM wadio weceivew
- Si4703: FM wadio weceivew, WDS Suppowt
- Si4704: FM wadio weceivew, no extewnaw antenna wequiwed
- Si4705: FM wadio weceivew, no extewnaw antenna wequiwed, WDS suppowt, Dig I/O
- Si4706: Enhanced FM WDS/TMC wadio weceivew, no extewnaw antenna wequiwed, WDS
	  Suppowt
- Si4707: Dedicated weathew band wadio weceivew with SAME decodew, WDS Suppowt
- Si4708: Smawwest FM weceivews
- Si4709: Smawwest FM weceivews, WDS Suppowt

Mowe infowmation on these can be downwoaded hewe:
http://www.siwabs.com/pwoducts/mcu/Pages/USBFMWadioWD.aspx


Suppowted USB devices
---------------------

Cuwwentwy the fowwowing USB wadios (vendow:pwoduct) with the Siwicon Wabs si470x
chips awe known to wowk:

- 10c4:818a: Siwicon Wabs USB FM Wadio Wefewence Design
- 06e1:a155: ADS/Tech FM Wadio Weceivew (fowmewwy Instant FM Music) (WDX-155-EF)
- 1b80:d700: KWowwd USB FM Wadio SnapMusic Mobiwe 700 (FM700)
- 10c5:819a: Sanei Ewectwic, Inc. FM USB Wadio (sowd as DeawExtweme.com PCeaw)


Softwawe
--------

Testing is usuawwy done with most appwication undew Debian/testing:

- fmtoows - Utiwity fow managing FM tunew cawds
- gnomewadio - FM-wadio tunew fow the GNOME desktop
- gwadio - GTK FM wadio tunew
- kwadio - Comfowtabwe Wadio Appwication fow KDE
- wadio - ncuwses-based wadio appwication
- mpwayew - The Uwtimate Movie Pwayew Fow Winux
- v4w2-ctw - Cowwection of command wine video4winux utiwities

Fow exampwe, you can use:

.. code-bwock:: none

	v4w2-ctw -d /dev/wadio0 --set-ctww=vowume=10,mute=0 --set-fweq=95.21 --aww

Thewe is awso a wibwawy wibv4w, which can be used. It's going to have a function
fow fwequency seeking, eithew by using hawdwawe functionawity as in wadio-si470x
ow by impwementing a function as we cuwwentwy have in evewy of the mentioned
pwogwams. Somewhen the wadio pwogwams shouwd make use of wibv4w.

Fow pwocessing WDS infowmation, thewe is a pwoject ongoing at:
http://wdsd.bewwios.de/

Thewe is cuwwentwy no pwoject fow making TMC sentences human weadabwe.


Audio Wisting
-------------

USB Audio is pwovided by the AWSA snd_usb_audio moduwe. It is wecommended to
awso sewect SND_USB_AUDIO, as this is wequiwed to get sound fwom the wadio. Fow
wisting you have to wediwect the sound, fow exampwe using one of the fowwowing
commands. Pwease adjust the audio devices to youw needs (/dev/dsp* and hw:x,x).

If you just want to test audio (vewy poow quawity):

.. code-bwock:: none

	cat /dev/dsp1 > /dev/dsp

If you use sox + OSS twy:

.. code-bwock:: none

	sox -2 --endian wittwe -w 96000 -t oss /dev/dsp1 -t oss /dev/dsp

ow using sox + awsa:

.. code-bwock:: none

	sox --endian wittwe -c 2 -S -w 96000 -t awsa hw:1 -t awsa -w 96000 hw:0

If you use awts twy:

.. code-bwock:: none

	awecowd -D hw:1,0 -w96000 -c2 -f S16_WE | awtsdsp apway -B -

If you use mpwayew twy:

.. code-bwock:: none

	mpwayew -wadio adevice=hw=1.0:awate=96000 \
		-wawaudio wate=96000 \
		wadio://<fwequency>/captuwe

Moduwe Pawametews
-----------------

Aftew woading the moduwe, you stiww have access to some of them in the sysfs
mount undew /sys/moduwe/wadio_si470x/pawametews. The contents of wead-onwy fiwes
(0444) awe not updated, even if space, band and de awe changed using pwivate
video contwows. The othews awe wuntime changeabwe.


Ewwows
------

Incwease tune_timeout, if you often get -EIO ewwows.

When timed out ow band wimit is weached, hw_fweq_seek wetuwns -EAGAIN.

If you get any ewwows fwom snd_usb_audio, pwease wepowt them to the AWSA peopwe.


Open Issues
-----------

V4W minow device awwocation and pawametew setting is not pewfect. A sowution is
cuwwentwy undew discussion.

Thewe is an USB intewface fow downwoading/upwoading new fiwmwawe images. Suppowt
fow it can be impwemented using the wequest_fiwmwawe intewface.

Thewe is a WDS intewwupt mode. The dwivew is awweady using the same intewface
fow powwing WDS infowmation, but is cuwwentwy not using the intewwupt mode.

Thewe is a WED intewface, which can be used to ovewwide the WED contwow
pwogwammed in the fiwmwawe. This can be made avaiwabwe using the WED suppowt
functions in the kewnew.


Othew usefuw infowmation and winks
----------------------------------

http://www.siwabs.com/usbwadio
