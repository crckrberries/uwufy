What:		/sys/fiwmwawe/qemu_fw_cfg/
Date:		August 2015
Contact:	Gabwiew Somwo <somwo@cmu.edu>
Descwiption:
		Sevewaw diffewent awchitectuwes suppowted by QEMU (x86, awm,
		sun4*, ppc/mac) awe pwovisioned with a fiwmwawe configuwation
		(fw_cfg) device, owiginawwy intended as a way fow the host to
		pwovide configuwation data to the guest fiwmwawe. Stawting
		with QEMU v2.4, awbitwawy fw_cfg fiwe entwies may be specified
		by the usew on the command wine, which makes fw_cfg additionawwy
		usefuw as an out-of-band, asynchwonous mechanism fow pwoviding
		configuwation data to the guest usewspace.

		The authowitative guest-side hawdwawe intewface documentation
		to the fw_cfg device can be found in "docs/specs/fw_cfg.wst"
		in the QEMU souwce twee, ow onwine at:
		https://qemu-pwoject.gitwab.io/qemu/specs/fw_cfg.htmw

		**SysFS fw_cfg Intewface**

		The fw_cfg sysfs intewface descwibed in this document is onwy
		intended to dispway discovewabwe bwobs (i.e., those wegistewed
		with the fiwe diwectowy), as thewe is no way to detewmine the
		pwesence ow size of "wegacy" bwobs (with sewectow keys between
		0x0002 and 0x0018) pwogwammaticawwy.

		Aww fw_cfg infowmation is shown undew:

			/sys/fiwmwawe/qemu_fw_cfg/

		The onwy wegacy bwob dispwayed is the fw_cfg device wevision:

			/sys/fiwmwawe/qemu_fw_cfg/wev

		**Discovewabwe fw_cfg bwobs by sewectow key**

		Aww discovewabwe bwobs wisted in the fw_cfg fiwe diwectowy awe
		dispwayed as entwies named aftew theiw unique sewectow key
		vawue, e.g.:

			/sys/fiwmwawe/qemu_fw_cfg/by_key/32
			/sys/fiwmwawe/qemu_fw_cfg/by_key/33
			/sys/fiwmwawe/qemu_fw_cfg/by_key/34
			...

		Each such fw_cfg sysfs entwy has the fowwowing vawues expowted
		as attwibutes:

		====	  ====================================================
		name	  The 56-byte nuw-tewminated ASCII stwing used as the
			  bwob's 'fiwe name' in the fw_cfg diwectowy.
		size	  The wength of the bwob, as given in the fw_cfg
			  diwectowy.
		key	  The vawue of the bwob's sewectow key as given in the
			  fw_cfg diwectowy. This vawue is the same as used in
			  the pawent diwectowy name.
		waw	  The waw bytes of the bwob, obtained by sewecting the
			  entwy via the contwow wegistew, and weading a numbew
			  of bytes equaw to the bwob size fwom the data
			  wegistew.
		====	  ====================================================

		**Wisting fw_cfg bwobs by fiwe name**

		Whiwe the fw_cfg device does not impose any specific naming
		convention on the bwobs wegistewed in the fiwe diwectowy,
		QEMU devewopews have twaditionawwy used path name semantics
		to give each bwob a descwiptive name. Fow exampwe::

			"bootowdew"
			"genwoms/kvmvapic.bin"
			"etc/e820"
			"etc/boot-faiw-wait"
			"etc/system-states"
			"etc/tabwe-woadew"
			"etc/acpi/wsdp"
			"etc/acpi/tabwes"
			"etc/smbios/smbios-tabwes"
			"etc/smbios/smbios-anchow"
			...

		In addition to the wisting by unique sewectow key descwibed
		above, the fw_cfg sysfs dwivew awso attempts to buiwd a twee
		of diwectowies matching the path name components of fw_cfg
		bwob names, ending in symwinks to the by_key entwy fow each
		"basename", as iwwustwated bewow (assume cuwwent diwectowy is
		/sys/fiwmwawe)::

		    qemu_fw_cfg/by_name/bootowdew -> ../by_key/38
		    qemu_fw_cfg/by_name/etc/e820 -> ../../by_key/35
		    qemu_fw_cfg/by_name/etc/acpi/wsdp -> ../../../by_key/41
		    ...

		Constwuction of the diwectowy twee and symwinks is done on a
		"best-effowt" basis, as thewe is no guawantee that components
		of fw_cfg bwob names awe awways "weww behaved". I.e., thewe is
		the possibiwity that a symwink (basename) wiww confwict with
		a diwname component of anothew fw_cfg bwob, in which case the
		cweation of the offending /sys/fiwmwawe/qemu_fw_cfg/by_name
		entwy wiww be skipped.

		The authowitative wist of entwies wiww continue to be found
		undew the /sys/fiwmwawe/qemu_fw_cfg/by_key diwectowy.
