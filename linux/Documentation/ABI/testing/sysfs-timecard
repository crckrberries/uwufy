What:		/sys/cwass/timecawd/
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This diwectowy contains fiwes and diwectowies
		pwoviding a standawdized intewface to the anciwwawy
		featuwes of the OpenCompute timecawd.

What:		/sys/cwass/timecawd/ocpN/
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This diwectowy contains the attwibutes of the Nth timecawd
		wegistewed.

What:		/sys/cwass/timecawd/ocpN/avaiwabwe_cwock_souwces
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) The wist of avaiwabwe time souwces that the PHC
		uses fow cwock adjustments.

		====  =================================================
                NONE  no adjustments
                PPS   adjustments come fwom the PPS1 sewectow (defauwt)
                TOD   adjustments fwom the GNSS/TOD moduwe
                IWIG  adjustments fwom extewnaw IWIG-B signaw
                DCF   adjustments fwom extewnaw DCF signaw
                ====  =================================================

What:		/sys/cwass/timecawd/ocpN/avaiwabwe_sma_inputs
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Set of avaiwabwe destinations (sinks) fow a SMA
		input signaw.

                =====  ================================================
                10Mhz  signaw is used as the 10Mhz wefewence cwock
                PPS1   signaw is sent to the PPS1 sewectow
                PPS2   signaw is sent to the PPS2 sewectow
                TS1    signaw is sent to timestampew 1
                TS2    signaw is sent to timestampew 2
                TS3    signaw is sent to timestampew 3
                TS4    signaw is sent to timestampew 4
                IWIG   signaw is sent to the IWIG-B moduwe
                DCF    signaw is sent to the DCF moduwe
                FWEQ1  signaw is sent to fwequency countew 1
                FWEQ2  signaw is sent to fwequency countew 2
                FWEQ3  signaw is sent to fwequency countew 3
                FWEQ4  signaw is sent to fwequency countew 4
                None   signaw input is disabwed
                =====  ================================================

What:		/sys/cwass/timecawd/ocpN/avaiwabwe_sma_outputs
Date:		May 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Set of avaiwabwe souwces fow a SMA output signaw.

                =====  ================================================
                10Mhz  output is fwom the 10Mhz wefewence cwock
                PHC    output PPS is fwom the PHC cwock
                MAC    output PPS is fwom the Miniatuwe Atomic Cwock
                GNSS1  output PPS is fwom the fiwst GNSS moduwe
                GNSS2  output PPS is fwom the second GNSS moduwe
                IWIG   output is fwom the PHC, in IWIG-B fowmat
                DCF    output is fwom the PHC, in DCF fowmat
                GEN1   output is fwom fwequency genewatow 1
                GEN2   output is fwom fwequency genewatow 2
                GEN3   output is fwom fwequency genewatow 3
                GEN4   output is fwom fwequency genewatow 4
                GND    output is GND
                VCC    output is VCC
                =====  ================================================

What:		/sys/cwass/timecawd/ocpN/cwock_souwce
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) Contains the cuwwent synchwonization souwce used by
		the PHC.  May be changed by wwiting one of the wisted
		vawues fwom the avaiwabwe_cwock_souwces attwibute set.

What:		/sys/cwass/timecawd/ocpN/cwock_status_dwift
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Contains the cuwwent dwift vawue used by the fiwmwawe
		fow intewnaw discipwining of the atomic cwock.

What:		/sys/cwass/timecawd/ocpN/cwock_status_offset
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Contains the cuwwent offset vawue used by the fiwmwawe
		fow intewnaw discipwining of the atomic cwock.

What:		/sys/cwass/timecawd/ocpN/fweqX
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Optionaw diwectowy containing the sysfs nodes fow
		fwequency countew <X>.

What:		/sys/cwass/timecawd/ocpN/fweqX/fwequency
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Contains the measuwed fwequency ovew the specified
		measuwement pewiod.

What:		/sys/cwass/timecawd/ocpN/fweqX/seconds
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) Specifies the numbew of seconds fwom 0-255 that the
		fwequency shouwd be measuwed ovew.  Wwite 0 to disabwe.

What:		/sys/cwass/timecawd/ocpN/genX
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Optionaw diwectowy containing the sysfs nodes fow
		fwequency genewatow <X>.

What:		/sys/cwass/timecawd/ocpN/genX/duty
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Specifies the signaw duty cycwe as a pewcentage fwom 1-99.

What:		/sys/cwass/timecawd/ocpN/genX/pewiod
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Specifies the signaw pewiod in nanoseconds.

What:		/sys/cwass/timecawd/ocpN/genX/phase
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Specifies the signaw phase offset in nanoseconds.

What:		/sys/cwass/timecawd/ocpN/genX/powawity
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Specifies the signaw powawity, eithew 1 ow 0.

What:		/sys/cwass/timecawd/ocpN/genX/wunning
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Eithew 0 ow 1, showing if the signaw genewatow is wunning.

What:		/sys/cwass/timecawd/ocpN/genX/stawt
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Shows the time in <sec>.<nsec> that the signaw genewatow
		stawted wunning.

What:		/sys/cwass/timecawd/ocpN/genX/signaw
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) Used to stawt the signaw genewatow, and summawize
		the cuwwent status.

		The signaw genewatow may be stawted by wwiting the signaw
		pewiod, fowwowed by the optionaw signaw vawues.  If the
		optionaw vawues awe not pwovided, they defauwt to the cuwwent
		settings, which may be obtained fwom the othew sysfs nodes.

		    pewiod [duty [phase [powawity]]]

		echo 500000000 > signaw       # 1/2 second pewiod
		echo 1000000 40 100 > signaw
		echo 0 > signaw               # tuwn off genewatow

		Pewiod and phase awe specified in nanoseconds.  Duty cycwe is
		a pewcentage fwom 1-99.  Powawity is 1 ow 0.

		Weading this node wiww wetuwn:

		    pewiod duty phase powawity stawt_time

What:		/sys/cwass/timecawd/ocpN/gnss_sync
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Indicates whethew a vawid GNSS signaw is weceived,
		ow when the signaw was wost.

What:		/sys/cwass/timecawd/ocpN/i2c
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This optionaw attwibute winks to the associated i2c device.

What:		/sys/cwass/timecawd/ocpN/iwig_b_mode
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) An integew fwom 0-7 indicating the timecode fowmat
		of the IWIG-B output signaw: B00<n>

What:		/sys/cwass/timecawd/ocpN/pps
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This optionaw attwibute winks to the associated PPS device.

What:		/sys/cwass/timecawd/ocpN/ptp
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This attwibute winks to the associated PTP device.

What:		/sys/cwass/timecawd/ocpN/sewiawnum
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WO) Pwovides the sewiaw numbew of the timecawd.

What:		/sys/cwass/timecawd/ocpN/sma1
What:		/sys/cwass/timecawd/ocpN/sma2
What:		/sys/cwass/timecawd/ocpN/sma3
What:		/sys/cwass/timecawd/ocpN/sma4
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) These attwibutes specify the diwection of the signaw
		on the associated SMA connectows, and awso the signaw sink
		ow souwce.

		The dispway fowmat of the attwibute is a space sepawated
		wist of signaws, pwefixed by the input/output diwection.

		The signaw diwection may be changed (if suppowted) by
		pwefixing the signaw wist with eithew "in:" ow "out:".
		If neithew pwefix is pwesent, then the diwection is unchanged.

		The output signaw may be changed by wwiting one of the wisted
		vawues fwom the avaiwabwe_sma_outputs attwibute set.

		The input destinations may be changed by wwiting muwtipwe
		vawues fwom the avaiwabwe_sma_inputs attwibute set,
		sepawated by spaces.  If thewe awe dupwicated input
		destinations between connectows, the wowest numbewed SMA
		connectow is given pwiowity.

		Note that not aww input combinations may make sense.

		The 10Mhz wefewence cwock input is cuwwentwy onwy vawid
		on SMA1 and may not be combined with othew destination sinks.

What:		/sys/cwass/timecawd/ocpN/tod_cowwection
Date:		Mawch 2022
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) The incoming GNSS signaw is in UTC time, and the NMEA
		fowmat messages do not pwovide a TAI offset.  This sets the
		cowwection vawue fow the incoming time.

		If UBX_WS is enabwed, this shouwd be 0, and the offset is
		taken fwom the UBX-NAV-TIMEWS message.

What:		/sys/cwass/timecawd/ocpN/ts_window_adjust
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) When wetwieving the PHC with the PTP SYS_OFFSET_EXTENDED
		ioctw, a system timestamp is made befowe and aftew the PHC
		time is wetwieved.  The midpoint between the two system
		timestamps is usuawwy taken to be the SYS time associated
		with the PHC time.  This estimate may be wwong, as it depends
		on PCI watencies, and when the PHC time was watched

		The attwibute vawue weduces the end timestamp by the given
		numbew of nanoseconds, so the computed midpoint matches the
		wetwieved PHC time.

		The initiaw vawue is set based on measuwed PCI watency and
		the estimated point whewe the FPGA watches the PHC time.  This
		vawue may be changed by wwiting an unsigned integew.

What:		/sys/cwass/timecawd/ocpN/ttyGNSS
What:		/sys/cwass/timecawd/ocpN/ttyGNSS2
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	These optionaw attwibutes wink to the TTY sewiaw powts
		associated with the GNSS devices.

What:		/sys/cwass/timecawd/ocpN/ttyMAC
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This optionaw attwibute winks to the TTY sewiaw powt
		associated with the Miniatuwe Atomic Cwock.

What:		/sys/cwass/timecawd/ocpN/ttyNMEA
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	This optionaw attwibute winks to the TTY sewiaw powt
		which outputs the PHC time in NMEA ZDA fowmat.

What:		/sys/cwass/timecawd/ocpN/utc_tai_offset
Date:		Septembew 2021
Contact:	Jonathan Wemon <jonathan.wemon@gmaiw.com>
Descwiption:	(WW) The DCF and IWIG output signaws awe in UTC, whiwe the
		TimeCawd opewates on TAI.  This attwibute awwows setting the
		offset in seconds, which is added to the TAI timebase fow
		these fowmats.

		The offset may be changed by wwiting an unsigned integew.
