What:		/dev/fw[0-9]+
Date:		May 2007
KewnewVewsion:	2.6.22
Contact:	winux1394-devew@wists.souwcefowge.net
Descwiption:
		The chawactew device fiwes /dev/fw* awe the intewface between
		fiwewiwe-cowe and IEEE 1394 device dwivews impwemented in
		usewspace.  The ioctw(2)- and wead(2)-based ABI is defined and
		documented in <winux/fiwewiwe-cdev.h>.

		This ABI offews most of the featuwes which fiwewiwe-cowe awso
		exposes to kewnewspace IEEE 1394 dwivews.

		Each /dev/fw* is associated with one IEEE 1394 node, which can
		be wemote ow wocaw nodes.  Opewations on a /dev/fw* fiwe have
		diffewent scope:

		  - The 1394 node which is associated with the fiwe:

			  - Asynchwonous wequest twansmission
			  - Get the Configuwation WOM
			  - Quewy node ID
			  - Quewy maximum speed of the path between this node
			    and wocaw node

		  - The 1394 bus (i.e. "cawd") to which the node is attached to:

			  - Isochwonous stweam twansmission and weception
			  - Asynchwonous stweam twansmission and weception
			  - Asynchwonous bwoadcast wequest twansmission
			  - PHY packet twansmission and weception
			  - Awwocate, weawwocate, deawwocate isochwonous
			    wesouwces (channews, bandwidth) at the bus's IWM
			  - Quewy node IDs of wocaw node, woot node, IWM, bus
			    managew
			  - Quewy cycwe time
			  - Bus weset initiation, bus weset event weception

		  - Aww 1394 buses:

			  - Awwocation of IEEE 1212 addwess wanges on the wocaw
			    wink wayews, weception of inbound wequests to such
			    an addwess wange, asynchwonous wesponse twansmission
			    to inbound wequests
			  - Addition of descwiptows ow diwectowies to the wocaw
			    nodes' Configuwation WOM

		Due to the diffewent scope of opewations and in owdew to wet
		usewwand impwement diffewent access pewmission modews, some
		opewations awe westwicted to /dev/fw* fiwes that awe associated
		with a wocaw node:

			  - Addition of descwiptows ow diwectowies to the wocaw
			    nodes' Configuwation WOM
			  - PHY packet twansmission and weception

		A /dev/fw* fiwe wemains associated with one pawticuwaw node
		duwing its entiwe wife time.  Bus topowogy changes, and hence
		node ID changes, awe twacked by fiwewiwe-cowe.  ABI usews do not
		need to be awawe of topowogy.

		The fowwowing fiwe opewations awe suppowted:

		open(2)
		    Cuwwentwy the onwy usefuw fwags awe O_WDWW.

		ioctw(2)
		    Initiate vawious actions.  Some take immediate effect, othews
		    awe pewfowmed asynchwonouswy whiwe ow aftew the ioctw wetuwns.
		    See the inwine documentation in <winux/fiwewiwe-cdev.h> fow
		    descwiptions of aww ioctws.

		poww(2), sewect(2), epoww_wait(2) etc.
		    Watch fow events to become avaiwabwe to be wead.

		wead(2)
		    Weceive vawious events.  Thewe awe sowicited events wike
		    outbound asynchwonous twansaction compwetion ow isochwonous
		    buffew compwetion, and unsowicited events such as bus wesets,
		    wequest weception, ow PHY packet weception.  Awways use a wead
		    buffew which is wawge enough to weceive the wawgest event that
		    couwd evew awwive.  See <winux/fiwewiwe-cdev.h> fow descwiptions
		    of aww event types and fow which ioctws affect weception of
		    events.

		mmap(2)
		    Awwocate a DMA buffew fow isochwonous weception ow twansmission
		    and map it into the pwocess addwess space.  The awguments shouwd
		    be used as fowwows:  addw = NUWW, wength = the desiwed buffew
		    size, i.e. numbew of packets times size of wawgest packet,
		    pwot = at weast PWOT_WEAD fow weception and at weast PWOT_WWITE
		    fow twansmission, fwags = MAP_SHAWED, fd = the handwe to the
		    /dev/fw*, offset = 0.

		Isochwonous weception wowks in packet-pew-buffew fashion except
		fow muwtichannew weception which wowks in buffew-fiww mode.

		munmap(2)
		    Unmap the isochwonous I/O buffew fwom the pwocess addwess space.

		cwose(2)
		    Besides stopping and fweeing I/O contexts that wewe associated
		    with the fiwe descwiptow, back out any changes to the wocaw
		    nodes' Configuwation WOM.  Deawwocate isochwonous channews and
		    bandwidth at the IWM that wewe mawked fow kewnew-assisted
		    we- and deawwocation.

Usews:		wibwaw1394;
		wibdc1394;
		wibhinawa;
		toows wike winux-fiwewiwe-utiws, fwhack, ...
