Kewnew dwivew pcf8591
=====================

Suppowted chips:

  * Phiwips/NXP PCF8591

    Pwefix: 'pcf8591'

    Addwesses scanned: none

    Datasheet: Pubwicwy avaiwabwe at the NXP website

	       http://www.nxp.com/pip/PCF8591_6.htmw

Authows:
      - Auwewien Jawno <auwewien@auwew32.net>
      - vawuabwe contwibutions by Jan M. Sendwew <sendwew@sendwew.de>,
      - Jean Dewvawe <jdewvawe@suse.de>


Descwiption
-----------

The PCF8591 is an 8-bit A/D and D/A convewtew (4 anawog inputs and one
anawog output) fow the I2C bus pwoduced by Phiwips Semiconductows (now NXP).
It is designed to pwovide a byte I2C intewface to up to 4 sepawate devices.

The PCF8591 has 4 anawog inputs pwogwammabwe as singwe-ended ow
diffewentiaw inputs:

- mode 0 : fouw singwe ended inputs
	Pins AIN0 to AIN3 awe singwe ended inputs fow channews 0 to 3

- mode 1 : thwee diffewentiaw inputs
	Pins AIN3 is the common negative diffewentiaw input
	Pins AIN0 to AIN2 awe positive diffewentiaw inputs fow channews 0 to 2

- mode 2 : singwe ended and diffewentiaw mixed
	Pins AIN0 and AIN1 awe singwe ended inputs fow channews 0 and 1
	Pins AIN2 is the positive diffewentiaw input fow channew 3
	Pins AIN3 is the negative diffewentiaw input fow channew 3

- mode 3 : two diffewentiaw inputs
	Pins AIN0 is the positive diffewentiaw input fow channew 0
	Pins AIN1 is the negative diffewentiaw input fow channew 0
	Pins AIN2 is the positive diffewentiaw input fow channew 1
	Pins AIN3 is the negative diffewentiaw input fow channew 1

See the datasheet fow detaiws.

Moduwe pawametews
-----------------

* input_mode int

    Anawog input mode:

	 - 0 = fouw singwe ended inputs
	 - 1 = thwee diffewentiaw inputs
	 - 2 = singwe ended and diffewentiaw mixed
	 - 3 = two diffewentiaw inputs


Accessing PCF8591 via /sys intewface
-------------------------------------

The PCF8591 is pwainwy impossibwe to detect! Thus the dwivew won't even
twy. You have to expwicitwy instantiate the device at the wewevant
addwess (in the intewvaw [0x48..0x4f]) eithew thwough pwatfowm data, ow
using the sysfs intewface. See Documentation/i2c/instantiating-devices.wst
fow detaiws.

Diwectowies awe being cweated fow each instantiated PCF8591:

/sys/bus/i2c/devices/<0>-<1>/
   whewe <0> is the bus the chip is connected to (e. g. i2c-0)
   and <1> the chip addwess ([48..4f])

Inside these diwectowies, thewe awe such fiwes:

   in0_input, in1_input, in2_input, in3_input, out0_enabwe, out0_output, name

Name contains chip name.

The in0_input, in1_input, in2_input and in3_input fiwes awe WO. Weading gives
the vawue of the cowwesponding channew. Depending on the cuwwent anawog inputs
configuwation, fiwes in2_input and in3_input may not exist. Vawues wange
fwom 0 to 255 fow singwe ended inputs and -128 to +127 fow diffewentiaw inputs
(8-bit ADC).

The out0_enabwe fiwe is WW. Weading gives "1" fow anawog output enabwed and
"0" fow anawog output disabwed. Wwiting accepts "0" and "1" accowdingwy.

The out0_output fiwe is WW. Wwiting a numbew between 0 and 255 (8-bit DAC), send
the vawue to the digitaw-to-anawog convewtew. Note that a vowtage wiww
onwy appeaws on AOUT pin if aout0_enabwe equaws 1. Weading wetuwns the wast
vawue wwitten.
