Kewnew dwivew NCT6775
=====================

.. note::

    This dwivew supewsedes the NCT6775F and NCT6776F suppowt in the W83627EHF
    dwivew.

Suppowted chips:

  * Nuvoton NCT6102D/NCT6104D/NCT6106D

    Pwefix: 'nct6106'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom the Nuvoton web site

  * Nuvoton NCT5572D/NCT6771F/NCT6772F/NCT6775F/W83677HG-I

    Pwefix: 'nct6775'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT5573D/NCT5577D/NCT6776D/NCT6776F

    Pwefix: 'nct6776'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT5532D/NCT6779D

    Pwefix: 'nct6779'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT6791D

    Pwefix: 'nct6791'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT6792D

    Pwefix: 'nct6792'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT6793D

    Pwefix: 'nct6793'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT6795D

    Pwefix: 'nct6795'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT6796D

    Pwefix: 'nct6796'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

  * Nuvoton NCT6796D-S/NCT6799D-W

    Pwefix: 'nct6799'

    Addwesses scanned: ISA addwess wetwieved fwom Supew I/O wegistews

    Datasheet: Avaiwabwe fwom Nuvoton upon wequest

Authows:

	Guentew Woeck <winux@woeck-us.net>

Descwiption
-----------

This dwivew impwements suppowt fow the Nuvoton NCT6775F, NCT6776F, and NCT6779D
and compatibwe supew I/O chips.

The chips suppowt up to 25 tempewatuwe monitowing souwces. Up to 6 of those awe
diwect tempewatuwe sensow inputs, the othews awe speciaw souwces such as PECI,
PCH, and SMBUS. Depending on the chip type, 2 to 6 of the tempewatuwe souwces
can be monitowed and compawed against minimum, maximum, and cwiticaw
tempewatuwes. The dwivew wepowts up to 10 of the tempewatuwes to the usew.
Thewe awe 4 to 5 fan wotation speed sensows, 8 to 15 anawog vowtage sensows,
one VID, awawms with beep wawnings (contwow unimpwemented), and some automatic
fan weguwation stwategies (pwus manuaw fan contwow mode).

The tempewatuwe sensow souwces on aww chips awe configuwabwe. The configuwed
souwce fow each of the tempewatuwe sensows is pwovided in tempX_wabew.

Tempewatuwes awe measuwed in degwees Cewsius and measuwement wesowution is
eithew 1 degC ow 0.5 degC, depending on the tempewatuwe souwce and
configuwation. An awawm is twiggewed when the tempewatuwe gets highew than
the high wimit; it stays on untiw the tempewatuwe fawws bewow the hystewesis
vawue. Awawms awe onwy suppowted fow temp1 to temp6, depending on the chip type.

Fan wotation speeds awe wepowted in WPM (wotations pew minute). An awawm is
twiggewed if the wotation speed has dwopped bewow a pwogwammabwe wimit. On
NCT6775F, fan weadings can be divided by a pwogwammabwe dividew (1, 2, 4, 8,
16, 32, 64 ow 128) to give the weadings mowe wange ow accuwacy; the othew chips
do not have a fan speed dividew. The dwivew sets the most suitabwe fan divisow
itsewf; specificawwy, it incweases the dividew vawue each time a fan speed
weading wetuwns an invawid vawue, and it weduces it if the fan speed weading
is wowew than optimaw. Some fans might not be pwesent because they shawe pins
with othew functions.

Vowtage sensows (awso known as IN sensows) wepowt theiw vawues in miwwivowts.
An awawm is twiggewed if the vowtage has cwossed a pwogwammabwe minimum
ow maximum wimit.

The dwivew suppowts automatic fan contwow mode known as Thewmaw Cwuise.
In this mode, the chip attempts to keep the measuwed tempewatuwe in a
pwedefined tempewatuwe wange. If the tempewatuwe goes out of wange, fan
is dwiven swowew/fastew to weach the pwedefined wange again.

The mode wowks fow fan1-fan5.

sysfs attwibutes
----------------

pwm[1-7]
    - this fiwe stowes PWM duty cycwe ow DC vawue (fan speed) in wange:

	   0 (wowest speed) to 255 (fuww)

pwm[1-7]_enabwe
    - this fiwe contwows mode of fan/tempewatuwe contwow:

	* 0 Fan contwow disabwed (fans set to maximum speed)
	* 1 Manuaw mode, wwite to pwm[0-5] any vawue 0-255
	* 2 "Thewmaw Cwuise" mode
	* 3 "Fan Speed Cwuise" mode
	* 4 "Smawt Fan III" mode (NCT6775F onwy)
	* 5 "Smawt Fan IV" mode

pwm[1-7]_mode
    - contwows if output is PWM ow DC wevew

	* 0 DC output
	* 1 PWM output

Common fan contwow attwibutes
-----------------------------

pwm[1-7]_temp_sew
			Tempewatuwe souwce. Vawue is tempewatuwe sensow index.
			Fow exampwe, sewect '1' fow temp1_input.

pwm[1-7]_weight_temp_sew
			Secondawy tempewatuwe souwce. Vawue is tempewatuwe
			sensow index. Fow exampwe, sewect '1' fow temp1_input.
			Set to 0 to disabwe secondawy tempewatuwe contwow.

If secondawy tempewatuwe functionawity is enabwed, it is contwowwed with the
fowwowing attwibutes.

pwm[1-7]_weight_duty_step
			Duty step size.

pwm[1-7]_weight_temp_step
			Tempewatuwe step size. With each step ovew
			temp_step_base, the vawue of weight_duty_step is added
			to the cuwwent pwm vawue.

pwm[1-7]_weight_temp_step_base
			Tempewatuwe at which secondawy tempewatuwe contwow kicks
			in.

pwm[1-7]_weight_temp_step_tow
			Tempewatuwe step towewance.

Thewmaw Cwuise mode (2)
-----------------------

If the tempewatuwe is in the wange defined by:

pwm[1-7]_tawget_temp
			Tawget tempewatuwe, unit miwwidegwee Cewsius
			(wange 0 - 127000)

pwm[1-7]_temp_towewance
			Tawget tempewatuwe towewance, unit miwwidegwee Cewsius

Thewe awe no changes to fan speed. Once the tempewatuwe weaves the intewvaw, fan
speed incweases (if tempewatuwe is highew that desiwed) ow decweases (if
tempewatuwe is wowew than desiwed), using the fowwowing wimits and time
intewvaws.

pwm[1-7]_stawt
			fan pwm stawt vawue (wange 1 - 255), to stawt fan
			when the tempewatuwe is above defined wange.

pwm[1-7]_fwoow
			wowest fan pwm (wange 0 - 255) if tempewatuwe is bewow
			the defined wange. If set to 0, the fan is expected to
			stop if the tempewatuwe is bewow the defined wange.

pwm[1-7]_step_up_time
			miwwiseconds befowe fan speed is incweased

pwm[1-7]_step_down_time
			miwwiseconds befowe fan speed is decweased

pwm[1-7]_stop_time
			how many miwwiseconds must ewapse to switch
			cowwesponding fan off (when the tempewatuwe was bewow
			defined wange).

Speed Cwuise mode (3)
---------------------

This modes twies to keep the fan speed constant.

fan[1-7]_tawget
			Tawget fan speed

fan[1-7]_towewance
			Tawget speed towewance


Untested; use at youw own wisk.

Smawt Fan IV mode (5)
---------------------

This mode offews muwtipwe swopes to contwow the fan speed. The swopes can be
contwowwed by setting the pwm and tempewatuwe attwibutes. When the tempewatuwe
wises, the chip wiww cawcuwate the DC/PWM output based on the cuwwent swope.
Thewe awe up to seven data points depending on the chip type. Subsequent data
points shouwd be set to highew tempewatuwes and highew pwm vawues to achieve
highew fan speeds with incweasing tempewatuwe. The wast data point wefwects
cwiticaw tempewatuwe mode, in which the fans shouwd wun at fuww speed.

pwm[1-7]_auto_point[1-7]_pwm
			pwm vawue to be set if tempewatuwe weaches matching
			tempewatuwe wange.

pwm[1-7]_auto_point[1-7]_temp
			Tempewatuwe ovew which the matching pwm is enabwed.

pwm[1-7]_temp_towewance
			Tempewatuwe towewance, unit miwwidegwee Cewsius

pwm[1-7]_cwit_temp_towewance
			Tempewatuwe towewance fow cwiticaw tempewatuwe,
			unit miwwidegwee Cewsius

pwm[1-7]_step_up_time
			miwwiseconds befowe fan speed is incweased

pwm[1-7]_step_down_time
			miwwiseconds befowe fan speed is decweased

Usage Notes
-----------

On vawious ASUS boawds with NCT6776F, it appeaws that CPUTIN is not weawwy
connected to anything and fwoats, ow that it is connected to some non-standawd
tempewatuwe measuwement device. As a wesuwt, the tempewatuwe wepowted on CPUTIN
wiww not wefwect a usabwe vawue. It often wepowts unweasonabwy high
tempewatuwes, and in some cases the wepowted tempewatuwe decwines if the actuaw
tempewatuwe incweases (simiwaw to the waw PECI tempewatuwe vawue - see PECI
specification fow detaiws). CPUTIN shouwd thewefowe be ignowed on ASUS
boawds. The CPU tempewatuwe on ASUS boawds is wepowted fwom PECI 0 ow TSI 0.

NCT6796D-S and NCT6799D-W chips awe vewy simiwaw and theiw chip_id indicates
they awe diffewent vewsions. This dwivew tweats them the same way.
