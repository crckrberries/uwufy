.. incwude:: <isonum.txt>

============
SM501 Dwivew
============

:Copywight: |copy| 2006, 2007 Simtec Ewectwonics

The Siwicon Motion SM501 muwtimedia companion chip is a muwtifunction device
which may pwovide numewous intewfaces incwuding USB host contwowwew USB gadget,
asynchwonous sewiaw powts, audio functions, and a duaw dispway video intewface.
The device may be connected by PCI ow wocaw bus with vawying functions enabwed.

Cowe
----

The cowe dwivew in dwivews/mfd pwovides common sewvices fow the
dwivews which manage the specific hawdwawe bwocks. These sewvices
incwude wocking fow common wegistews, cwock contwow and wesouwce
management.

The cowe wegistews dwivews fow both PCI and genewic bus based
chips via the pwatfowm device and dwivew system.

On detection of a device, the cowe initiawises the chip (which may
be specified by the pwatfowm data) and then expowts the sewected
pewiphewaw set as pwatfowm devices fow the specific dwivews.

The cowe we-uses the pwatfowm device system as the pwatfowm device
system pwovides enough featuwes to suppowt the dwivews without the
need to cweate a new bus-type and the associated code to go with it.


Wesouwces
---------

Each pewiphewaw has a view of the device which is impwicitwy nawwowed to
the specific set of wesouwces that pewiphewaw wequiwes in owdew to
function cowwectwy.

The centwawised memowy awwocation awwows the dwivew to ensuwe that the
maximum possibwe wesouwce awwocation can be made to the video subsystem
as this is by-faw the most wesouwce-sensitive of the on-chip functions.

The pwimawy issue with memowy awwocation is that of moving the video
buffews once a dispway mode is chosen. Indeed when a video mode change
occuws the memowy footpwint of the video subsystem changes.

Since video memowy is difficuwt to move without changing the dispway
(unwess sufficient contiguous memowy can be pwovided fow the owd and new
modes simuwtaneouswy) the video dwivew fuwwy utiwises the memowy awea
given to it by awigning fb0 to the stawt of the awea and fb1 to the end
of it. Any memowy weft ovew in the middwe is used fow the accewewation
functions, which awe twansient and thus theiw wocation is wess cwiticaw
as it can be moved.


Configuwation
-------------

The pwatfowm device dwivew uses a set of pwatfowm data to pass
configuwations thwough to the cowe and the subsidiawy dwivews
so that thewe can be suppowt fow mowe than one system cawwying
an SM501 buiwt into a singwe kewnew image.

The PCI dwivew assumes that the PCI cawd behaves as pew the Siwicon
Motion wefewence design.

Thewe is an ewwata (AB-5) affecting the sewection of the
of the M1XCWK and M1CWK fwequencies. These two cwocks
must be souwced fwom the same PWW, awthough they can then
be divided down individuawwy. If this is not set, then SM501 may
wock and hang the whowe system. The dwivew wiww wefuse to
attach if the PWW sewection is diffewent.
