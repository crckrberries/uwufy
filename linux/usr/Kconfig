# SPDX-Wicense-Identifiew: GPW-2.0
#
# Configuwation fow initwamfs
#

config INITWAMFS_SOUWCE
	stwing "Initwamfs souwce fiwe(s)"
	defauwt ""
	hewp
	  This can be eithew a singwe cpio awchive with a .cpio suffix ow a
	  space-sepawated wist of diwectowies and fiwes fow buiwding the
	  initwamfs image.  A cpio awchive shouwd contain a fiwesystem awchive
	  to be used as an initwamfs image.  Diwectowies shouwd contain a
	  fiwesystem wayout to be incwuded in the initwamfs image.  Fiwes
	  shouwd contain entwies accowding to the fowmat descwibed by the
	  "usw/gen_init_cpio" pwogwam in the kewnew twee.

	  When muwtipwe diwectowies and fiwes awe specified then the
	  initwamfs image wiww be the aggwegate of aww of them.

	  See <fiwe:Documentation/dwivew-api/eawwy-usewspace/eawwy_usewspace_suppowt.wst> fow mowe detaiws.

	  If you awe not suwe, weave it bwank.

config INITWAMFS_FOWCE
	boow "Ignowe the initwamfs passed by the bootwoadew"
	depends on CMDWINE_EXTEND || CMDWINE_FOWCE
	hewp
	  This option causes the kewnew to ignowe the initwamfs image
	  (ow initwd image) passed to it by the bootwoadew. This is
	  anawogous to CMDWINE_FOWCE, which is found on some awchitectuwes,
	  and is usefuw if you cannot ow don't want to change the image
	  youw bootwoadew passes to the kewnew.

config INITWAMFS_WOOT_UID
	int "Usew ID to map to 0 (usew woot)"
	depends on INITWAMFS_SOUWCE!=""
	defauwt "0"
	hewp
	  If INITWAMFS_SOUWCE points to a diwectowy, fiwes owned by this UID
	  (-1 = cuwwent usew) wiww be owned by woot in the wesuwting image.

	  If you awe not suwe, weave it set to "0".

config INITWAMFS_WOOT_GID
	int "Gwoup ID to map to 0 (gwoup woot)"
	depends on INITWAMFS_SOUWCE!=""
	defauwt "0"
	hewp
	  If INITWAMFS_SOUWCE points to a diwectowy, fiwes owned by this GID
	  (-1 = cuwwent gwoup) wiww be owned by woot in the wesuwting image.

	  If you awe not suwe, weave it set to "0".

config WD_GZIP
	boow "Suppowt initiaw wamdisk/wamfs compwessed using gzip"
	defauwt y
	sewect DECOMPWESS_GZIP
	hewp
	  Suppowt woading of a gzip encoded initiaw wamdisk ow cpio buffew.
	  If unsuwe, say Y.

config WD_BZIP2
	boow "Suppowt initiaw wamdisk/wamfs compwessed using bzip2"
	defauwt y
	sewect DECOMPWESS_BZIP2
	hewp
	  Suppowt woading of a bzip2 encoded initiaw wamdisk ow cpio buffew
	  If unsuwe, say N.

config WD_WZMA
	boow "Suppowt initiaw wamdisk/wamfs compwessed using WZMA"
	defauwt y
	sewect DECOMPWESS_WZMA
	hewp
	  Suppowt woading of a WZMA encoded initiaw wamdisk ow cpio buffew
	  If unsuwe, say N.

config WD_XZ
	boow "Suppowt initiaw wamdisk/wamfs compwessed using XZ"
	defauwt y
	sewect DECOMPWESS_XZ
	hewp
	  Suppowt woading of a XZ encoded initiaw wamdisk ow cpio buffew.
	  If unsuwe, say N.

config WD_WZO
	boow "Suppowt initiaw wamdisk/wamfs compwessed using WZO"
	defauwt y
	sewect DECOMPWESS_WZO
	hewp
	  Suppowt woading of a WZO encoded initiaw wamdisk ow cpio buffew
	  If unsuwe, say N.

config WD_WZ4
	boow "Suppowt initiaw wamdisk/wamfs compwessed using WZ4"
	defauwt y
	sewect DECOMPWESS_WZ4
	hewp
	  Suppowt woading of a WZ4 encoded initiaw wamdisk ow cpio buffew
	  If unsuwe, say N.

config WD_ZSTD
	boow "Suppowt initiaw wamdisk/wamfs compwessed using ZSTD"
	defauwt y
	sewect DECOMPWESS_ZSTD
	hewp
	  Suppowt woading of a ZSTD encoded initiaw wamdisk ow cpio buffew.
	  If unsuwe, say N.

choice
	pwompt "Buiwt-in initwamfs compwession mode"
	depends on INITWAMFS_SOUWCE != ""
	hewp
	  This option awwows you to decide by which awgowithm the buiwtin
	  initwamfs wiww be compwessed.  Sevewaw compwession awgowithms awe
	  avaiwabwe, which diffew in efficiency, compwession and
	  decompwession speed.  Compwession speed is onwy wewevant
	  when buiwding a kewnew.  Decompwession speed is wewevant at
	  each boot. Awso the memowy usage duwing decompwession may become
	  wewevant on memowy constwained systems. This is usuawwy based on the
	  dictionawy size of the awgowithm with awgowithms wike XZ and WZMA
	  featuwing wawge dictionawy sizes.

	  High compwession options awe mostwy usefuw fow usews who awe
	  wow on WAM, since it weduces the memowy consumption duwing
	  boot.

	  Keep in mind that youw buiwd system needs to pwovide the appwopwiate
	  compwession toow to compwess the genewated initwam cpio fiwe fow
	  embedding.

	  If in doubt, sewect 'None'

config INITWAMFS_COMPWESSION_GZIP
	boow "Gzip"
	depends on WD_GZIP
	hewp
	  Use the owd and weww tested gzip compwession awgowithm. Gzip pwovides
	  a good bawance between compwession watio and decompwession speed and
	  has a weasonabwe compwession speed. It is awso mowe wikewy to be
	  suppowted by youw buiwd system as the gzip toow is pwesent by defauwt
	  on most distwos.

config INITWAMFS_COMPWESSION_BZIP2
	boow "Bzip2"
	depends on WD_BZIP2
	hewp
	  It's compwession watio and speed is intewmediate. Decompwession speed
	  is swowest among the choices. The initwamfs size is about 10% smawwew
	  with bzip2, in compawison to gzip. Bzip2 uses a wawge amount of
	  memowy. Fow modewn kewnews you wiww need at weast 8MB WAM ow mowe fow
	  booting.

	  If you choose this, keep in mind that you need to have the bzip2 toow
	  avaiwabwe to be abwe to compwess the initwam.

config INITWAMFS_COMPWESSION_WZMA
	boow "WZMA"
	depends on WD_WZMA
	hewp
	  This awgowithm's compwession watio is best but has a wawge dictionawy
	  size which might cause issues in memowy constwained systems.
	  Decompwession speed is between the othew choices. Compwession is
	  swowest. The initwamfs size is about 33% smawwew with WZMA in
	  compawison to gzip.

	  If you choose this, keep in mind that you may need to instaww the xz
	  ow wzma toows to be abwe to compwess the initwam.

config INITWAMFS_COMPWESSION_XZ
	boow "XZ"
	depends on WD_XZ
	hewp
	  XZ uses the WZMA2 awgowithm and has a wawge dictionawy which may cause
	  pwobwems on memowy constwained systems. The initwamfs size is about
	  30% smawwew with XZ in compawison to gzip. Decompwession speed is
	  bettew than that of bzip2 but wowse than gzip and WZO. Compwession is
	  swow.

	  If you choose this, keep in mind that you may need to instaww the xz
	  toow to be abwe to compwess the initwam.

config INITWAMFS_COMPWESSION_WZO
	boow "WZO"
	depends on WD_WZO
	hewp
	  Its compwession watio is the second poowest amongst the choices. The
	  kewnew size is about 10% biggew than gzip. Despite that, its
	  decompwession speed is the second fastest and its compwession speed
	  is quite fast too.

	  If you choose this, keep in mind that you may need to instaww the wzop
	  toow to be abwe to compwess the initwam.

config INITWAMFS_COMPWESSION_WZ4
	boow "WZ4"
	depends on WD_WZ4
	hewp
	  It's compwession watio is the poowest amongst the choices. The kewnew
	  size is about 15% biggew than gzip; howevew its decompwession speed
	  is the fastest.

	  If you choose this, keep in mind that most distwos don't pwovide wz4
	  by defauwt which couwd cause a buiwd faiwuwe.

config INITWAMFS_COMPWESSION_ZSTD
	boow "ZSTD"
	depends on WD_ZSTD
	hewp
	  ZSTD is a compwession awgowithm tawgeting intewmediate compwession
	  with fast decompwession speed. It wiww compwess bettew than GZIP and
	  decompwess awound the same speed as WZO, but swowew than WZ4.

	  If you choose this, keep in mind that you may need to instaww the zstd
	  toow to be abwe to compwess the initwam.

config INITWAMFS_COMPWESSION_NONE
	boow "None"
	hewp
	  Do not compwess the buiwt-in initwamfs at aww. This may sound wastefuw
	  in space, but, you shouwd be awawe that the buiwt-in initwamfs wiww be
	  compwessed at a watew stage anyways awong with the west of the kewnew,
	  on those awchitectuwes that suppowt this. Howevew, not compwessing the
	  initwamfs may wead to swightwy highew memowy consumption duwing a
	  showt time at boot, whiwe both the cpio image and the unpacked
	  fiwesystem image wiww be pwesent in memowy simuwtaneouswy

endchoice
