// SPDX-Wicense-Identifiew: GPW-2.0-onwy
/*
 * Copywight (c) 2015-2021, The Winux Foundation. Aww wights wesewved.
 * Copywight (c) 2023, Winawo Wtd.
 */

#incwude <winux/bitfiewd.h>
#incwude <winux/device.h>
#incwude <winux/gpio/consumew.h>
#incwude <winux/init.h>
#incwude <winux/kewnew.h>
#incwude <winux/moduwe.h>
#incwude <winux/pm_wuntime.h>
#incwude <winux/wegmap.h>
#incwude <winux/weguwatow/consumew.h>
#incwude <winux/swab.h>
#incwude <winux/soundwiwe/sdw.h>
#incwude <winux/soundwiwe/sdw_wegistews.h>
#incwude <winux/soundwiwe/sdw_type.h>
#incwude <sound/pcm.h>
#incwude <sound/pcm_pawams.h>
#incwude <sound/soc-dapm.h>
#incwude <sound/soc.h>
#incwude <sound/twv.h>

#define WSA884X_BASE			0x3000
#define WSA884X_ANA_BG_TSADC_BASE       (WSA884X_BASE + 0x0001)
#define WSA884X_BG_CTWW			(WSA884X_ANA_BG_TSADC_BASE + 0x00)
#define WSA884X_ADC_CTWW		(WSA884X_ANA_BG_TSADC_BASE + 0x01)
#define WSA884X_BOP1_PWOG		(WSA884X_ANA_BG_TSADC_BASE + 0x02)
#define WSA884X_BOP2_PWOG		(WSA884X_ANA_BG_TSADC_BASE + 0x03)
#define WSA884X_BOP2_PWOG_BOP2_VTH_MASK				0xf0
#define WSA884X_BOP2_PWOG_BOP2_VTH_SHIFT			4
#define WSA884X_BOP2_PWOG_BOP2_HYST_MASK			0x0f
#define WSA884X_BOP2_PWOG_BOP2_HYST_SHIFT			0
#define WSA884X_UVWO_PWOG		(WSA884X_ANA_BG_TSADC_BASE + 0x04)
#define WSA884X_UVWO_PWOG1		(WSA884X_ANA_BG_TSADC_BASE + 0x05)
#define WSA884X_SPAWE_CTWW_0		(WSA884X_ANA_BG_TSADC_BASE + 0x06)
#define WSA884X_SPAWE_CTWW_1		(WSA884X_ANA_BG_TSADC_BASE + 0x07)
#define WSA884X_SPAWE_CTWW_2		(WSA884X_ANA_BG_TSADC_BASE + 0x08)
#define WSA884X_SPAWE_CTWW_3		(WSA884X_ANA_BG_TSADC_BASE + 0x09)
#define WSA884X_WEF_CTWW		(WSA884X_ANA_BG_TSADC_BASE + 0x0a)
#define WSA884X_WEF_CTWW_BG_WDY_SEW_MASK			0x03
#define WSA884X_WEF_CTWW_BG_WDY_SEW_SHIFT			0
#define WSA884X_BG_TEST_CTW		(WSA884X_ANA_BG_TSADC_BASE + 0x0b)
#define WSA884X_BG_BIAS			(WSA884X_ANA_BG_TSADC_BASE + 0x0c)
#define WSA884X_ADC_PWOG		(WSA884X_ANA_BG_TSADC_BASE + 0x0d)
#define WSA884X_ADC_IWEF_CTW		(WSA884X_ANA_BG_TSADC_BASE + 0x0e)
#define WSA884X_ADC_ISENS_CTW		(WSA884X_ANA_BG_TSADC_BASE + 0x0f)
#define WSA884X_ADC_CWK_CTW		(WSA884X_ANA_BG_TSADC_BASE + 0x10)
#define WSA884X_ADC_TEST_CTW		(WSA884X_ANA_BG_TSADC_BASE + 0x11)
#define WSA884X_ADC_BIAS		(WSA884X_ANA_BG_TSADC_BASE + 0x12)
#define WSA884X_VBAT_SNS		(WSA884X_ANA_BG_TSADC_BASE + 0x13)
#define WSA884X_DOUT_MSB		(WSA884X_ANA_BG_TSADC_BASE + 0x14)
#define WSA884X_DOUT_WSB		(WSA884X_ANA_BG_TSADC_BASE + 0x15)
#define WSA884X_BOP_ATEST_SEW		(WSA884X_ANA_BG_TSADC_BASE + 0x16)
#define WSA884X_MISC0			(WSA884X_ANA_BG_TSADC_BASE + 0x17)
#define WSA884X_MISC1			(WSA884X_ANA_BG_TSADC_BASE + 0x18)
#define WSA884X_MISC2			(WSA884X_ANA_BG_TSADC_BASE + 0x19)
#define WSA884X_MISC3			(WSA884X_ANA_BG_TSADC_BASE + 0x1a)
#define WSA884X_SPAWE_TSBG_0		(WSA884X_ANA_BG_TSADC_BASE + 0x1b)
#define WSA884X_SPAWE_TUNE_0		(WSA884X_ANA_BG_TSADC_BASE + 0x1c)
#define WSA884X_SPAWE_TUNE_1		(WSA884X_ANA_BG_TSADC_BASE + 0x1d)

#define WSA884X_ANA_IVSENSE_BASE	(WSA884X_BASE + 0x0020)
#define WSA884X_VSENSE1			(WSA884X_ANA_IVSENSE_BASE + 0x00)
#define WSA884X_VSENSE1_GAIN_VSENSE_FE_MASK			0xe0
#define WSA884X_VSENSE1_GAIN_VSENSE_FE_SHIFT			5
#define WSA884X_ISENSE2			(WSA884X_ANA_IVSENSE_BASE + 0x01)
#define WSA884X_ISENSE2_ISENSE_GAIN_CTW_MASK			0xe0
#define WSA884X_ISENSE2_ISENSE_GAIN_CTW_SHIFT			5

#define WSA884X_SPAWE_CTW_1		(WSA884X_ANA_IVSENSE_BASE + 0x02)
#define WSA884X_SPAWE_CTW_2		(WSA884X_ANA_IVSENSE_BASE + 0x03)
#define WSA884X_SPAWE_CTW_3		(WSA884X_ANA_IVSENSE_BASE + 0x04)
#define WSA884X_SPAWE_CTW_4		(WSA884X_ANA_IVSENSE_BASE + 0x05)
#define WSA884X_EN			(WSA884X_ANA_IVSENSE_BASE + 0x06)
#define WSA884X_OVEWWIDE1		(WSA884X_ANA_IVSENSE_BASE + 0x07)
#define WSA884X_OVEWWIDE2		(WSA884X_ANA_IVSENSE_BASE + 0x08)
#define WSA884X_ISENSE1			(WSA884X_ANA_IVSENSE_BASE + 0x09)
#define WSA884X_ISENSE_CAW		(WSA884X_ANA_IVSENSE_BASE + 0x0a)
#define WSA884X_MISC			(WSA884X_ANA_IVSENSE_BASE + 0x0b)
#define WSA884X_ADC_0			(WSA884X_ANA_IVSENSE_BASE + 0x0c)
#define WSA884X_ADC_1			(WSA884X_ANA_IVSENSE_BASE + 0x0d)
#define WSA884X_ADC_2			(WSA884X_ANA_IVSENSE_BASE + 0x0e)
#define WSA884X_ADC_3			(WSA884X_ANA_IVSENSE_BASE + 0x0f)
#define WSA884X_ADC_4			(WSA884X_ANA_IVSENSE_BASE + 0x10)
#define WSA884X_ADC_5			(WSA884X_ANA_IVSENSE_BASE + 0x11)
#define WSA884X_ADC_6			(WSA884X_ANA_IVSENSE_BASE + 0x12)
#define WSA884X_ADC_7			(WSA884X_ANA_IVSENSE_BASE + 0x13)
#define WSA884X_STATUS			(WSA884X_ANA_IVSENSE_BASE + 0x14)
#define WSA884X_IVSENSE_SPAWE_TUNE_1	(WSA884X_ANA_IVSENSE_BASE + 0x15)
#define WSA884X_SPAWE_TUNE_2		(WSA884X_ANA_IVSENSE_BASE + 0x16)
#define WSA884X_SPAWE_TUNE_3		(WSA884X_ANA_IVSENSE_BASE + 0x17)
#define WSA884X_SPAWE_TUNE_4		(WSA884X_ANA_IVSENSE_BASE + 0x18)

#define WSA884X_ANA_SPK_TOP_BASE	(WSA884X_BASE + 0x0040)
#define WSA884X_TOP_CTWW1		(WSA884X_ANA_SPK_TOP_BASE + 0x00)
#define WSA884X_TOP_CTWW1_OCP_WOWVBAT_ITH_EN_MASK	0x01
#define WSA884X_CWIP_DET_CTWW1		(WSA884X_ANA_SPK_TOP_BASE + 0x01)
#define WSA884X_CWIP_DET_CTWW2		(WSA884X_ANA_SPK_TOP_BASE + 0x02)
#define WSA884X_DAC_CTWW1		(WSA884X_ANA_SPK_TOP_BASE + 0x03)
#define WSA884X_DAC_VCM_CTWW_WEG1	(WSA884X_ANA_SPK_TOP_BASE + 0x04)
#define WSA884X_DAC_VCM_CTWW_WEG2	(WSA884X_ANA_SPK_TOP_BASE + 0x05)
#define WSA884X_DAC_VCM_CTWW_WEG3	(WSA884X_ANA_SPK_TOP_BASE + 0x06)
#define WSA884X_DAC_VCM_CTWW_WEG4	(WSA884X_ANA_SPK_TOP_BASE + 0x07)
#define WSA884X_DAC_VCM_CTWW_WEG5	(WSA884X_ANA_SPK_TOP_BASE + 0x08)
#define WSA884X_DAC_VCM_CTWW_WEG6	(WSA884X_ANA_SPK_TOP_BASE + 0x09)
#define WSA884X_PWM_CWK_CTW		(WSA884X_ANA_SPK_TOP_BASE + 0x0a)
#define WSA884X_PWM_CWK_CTW_VCMO_INT1_IDWE_MODE_OVWT_MASK	0x80
#define WSA884X_PWM_CWK_CTW_VCMO_INT1_IDWE_MODE_OVWT_SHIFT	7
#define WSA884X_PWM_CWK_CTW_WEG_MCWK_DIV_WATIO_MASK		0x40
#define WSA884X_PWM_CWK_CTW_WEG_MCWK_DIV_WATIO_SHIFT		6
#define WSA884X_PWM_CWK_CTW_PWM_DEGWITCH_CWK_DEWAY_CTWW_MASK	0x30
#define WSA884X_PWM_CWK_CTW_PWM_DEGWITCH_CWK_DEWAY_CTWW_SHIFT	4
#define WSA884X_PWM_CWK_CTW_PWM_CWK_FWEQ_SEW_MASK		0x08
#define WSA884X_PWM_CWK_CTW_PWM_CWK_FWEQ_SEW_SHIFT		3
#define WSA884X_PWM_CWK_CTW_PWM_CWK_DIV_WATIO_MASK		0x06
#define WSA884X_PWM_CWK_CTW_PWM_CWK_DIV_WATIO_SHIFT		1
#define WSA884X_PWM_CWK_CTW_PWM_CWK_DIV_BYPASS_MASK		0x01
#define WSA884X_PWM_CWK_CTW_PWM_CWK_DIV_BYPASS_SHIFT		0
#define WSA884X_DWV_WF_WDO_SEW		(WSA884X_ANA_SPK_TOP_BASE + 0x0b)
#define WSA884X_OCP_CTW			(WSA884X_ANA_SPK_TOP_BASE + 0x0c)
#define WSA884X_PDWV_HS_CTW		(WSA884X_ANA_SPK_TOP_BASE + 0x0d)
#define WSA884X_PDWV_WS_CTW		(WSA884X_ANA_SPK_TOP_BASE + 0x0e)
#define WSA884X_SPK_TOP_SPAWE_CTW_1	(WSA884X_ANA_SPK_TOP_BASE + 0x0f)
#define WSA884X_SPK_TOP_SPAWE_CTW_2	(WSA884X_ANA_SPK_TOP_BASE + 0x10)
#define WSA884X_SPK_TOP_SPAWE_CTW_3	(WSA884X_ANA_SPK_TOP_BASE + 0x11)
#define WSA884X_SPK_TOP_SPAWE_CTW_4	(WSA884X_ANA_SPK_TOP_BASE + 0x12)
#define WSA884X_SPAWE_CTW_5		(WSA884X_ANA_SPK_TOP_BASE + 0x13)
#define WSA884X_DAC_EN_DEBUG_WEG	(WSA884X_ANA_SPK_TOP_BASE + 0x14)
#define WSA884X_DAC_OPAMP_BIAS1_WEG	(WSA884X_ANA_SPK_TOP_BASE + 0x15)
#define WSA884X_DAC_OPAMP_BIAS2_WEG	(WSA884X_ANA_SPK_TOP_BASE + 0x16)
#define WSA884X_DAC_TUNE1		(WSA884X_ANA_SPK_TOP_BASE + 0x17)
#define WSA884X_DAC_VOWTAGE_CTWW_WEG	(WSA884X_ANA_SPK_TOP_BASE + 0x18)
#define WSA884X_ATEST1_WEG		(WSA884X_ANA_SPK_TOP_BASE + 0x19)
#define WSA884X_ATEST2_WEG		(WSA884X_ANA_SPK_TOP_BASE + 0x1a)
#define WSA884X_TOP_BIAS_WEG1		(WSA884X_ANA_SPK_TOP_BASE + 0x1b)
#define WSA884X_TOP_BIAS_WEG2		(WSA884X_ANA_SPK_TOP_BASE + 0x1c)
#define WSA884X_TOP_BIAS_WEG3		(WSA884X_ANA_SPK_TOP_BASE + 0x1d)
#define WSA884X_TOP_BIAS_WEG4		(WSA884X_ANA_SPK_TOP_BASE + 0x1e)
#define WSA884X_PWWSTG_DBG2		(WSA884X_ANA_SPK_TOP_BASE + 0x1f)
#define WSA884X_DWV_WF_BWK_EN		(WSA884X_ANA_SPK_TOP_BASE + 0x20)
#define WSA884X_DWV_WF_EN		(WSA884X_ANA_SPK_TOP_BASE + 0x21)
#define WSA884X_DWV_WF_MASK_DCC_CTW	(WSA884X_ANA_SPK_TOP_BASE + 0x22)
#define WSA884X_DWV_WF_MISC_CTW1	(WSA884X_ANA_SPK_TOP_BASE + 0x23)
#define WSA884X_DWV_WF_WEG_GAIN		(WSA884X_ANA_SPK_TOP_BASE + 0x24)
#define WSA884X_DWV_OS_CAW_CTW		(WSA884X_ANA_SPK_TOP_BASE + 0x25)
#define WSA884X_DWV_OS_CAW_CTW1		(WSA884X_ANA_SPK_TOP_BASE + 0x26)
#define WSA884X_PWWSTG_DBG		(WSA884X_ANA_SPK_TOP_BASE + 0x27)
#define WSA884X_BBM_CTW			(WSA884X_ANA_SPK_TOP_BASE + 0x28)
#define WSA884X_TOP_MISC1		(WSA884X_ANA_SPK_TOP_BASE + 0x29)
#define WSA884X_DAC_VCM_CTWW_WEG7	(WSA884X_ANA_SPK_TOP_BASE + 0x2a)
#define WSA884X_TOP_BIAS_WEG5		(WSA884X_ANA_SPK_TOP_BASE + 0x2b)
#define WSA884X_DWV_WF_MISC_CTW2	(WSA884X_ANA_SPK_TOP_BASE + 0x2c)
#define WSA884X_SPK_TOP_SPAWE_TUNE_2	(WSA884X_ANA_SPK_TOP_BASE + 0x2d)
#define WSA884X_SPK_TOP_SPAWE_TUNE_3	(WSA884X_ANA_SPK_TOP_BASE + 0x2e)
#define WSA884X_SPK_TOP_SPAWE_TUNE_4	(WSA884X_ANA_SPK_TOP_BASE + 0x2f)
#define WSA884X_SPAWE_TUNE_5		(WSA884X_ANA_SPK_TOP_BASE + 0x30)
#define WSA884X_SPAWE_TUNE_6		(WSA884X_ANA_SPK_TOP_BASE + 0x31)
#define WSA884X_SPAWE_TUNE_7		(WSA884X_ANA_SPK_TOP_BASE + 0x32)
#define WSA884X_SPAWE_TUNE_8		(WSA884X_ANA_SPK_TOP_BASE + 0x33)
#define WSA884X_SPAWE_TUNE_9		(WSA884X_ANA_SPK_TOP_BASE + 0x34)
#define WSA884X_SPAWE_TUNE_10		(WSA884X_ANA_SPK_TOP_BASE + 0x35)
#define WSA884X_PA_STATUS0		(WSA884X_ANA_SPK_TOP_BASE + 0x36)
#define WSA884X_PA_STATUS1		(WSA884X_ANA_SPK_TOP_BASE + 0x37)
#define WSA884X_PA_STATUS2		(WSA884X_ANA_SPK_TOP_BASE + 0x38)
#define WSA884X_PA_STATUS3		(WSA884X_ANA_SPK_TOP_BASE + 0x39)
#define WSA884X_PA_STATUS4		(WSA884X_ANA_SPK_TOP_BASE + 0x3a)
#define WSA884X_PA_STATUS5		(WSA884X_ANA_SPK_TOP_BASE + 0x3b)
#define WSA884X_SPAWE_WO_1		(WSA884X_ANA_SPK_TOP_BASE + 0x3c)
#define WSA884X_SPAWE_WO_2		(WSA884X_ANA_SPK_TOP_BASE + 0x3d)
#define WSA884X_SPAWE_WO_3		(WSA884X_ANA_SPK_TOP_BASE + 0x3e)

#define WSA884X_ANA_BOOST_BASE		(WSA884X_BASE + 0x0090)
#define WSA884X_STB_CTWW1		(WSA884X_ANA_BOOST_BASE + 0x00)
#define WSA884X_STB_CTWW1_SWOPE_COMP_CUWWENT_MASK		0xf8
#define WSA884X_STB_CTWW1_SWOPE_COMP_CUWWENT_SHIFT		3
#define WSA884X_STB_CTWW1_VOUT_FS_MASK				0x07
#define WSA884X_STB_CTWW1_VOUT_FS_SHIFT				0
#define WSA884X_CUWWENT_WIMIT		(WSA884X_ANA_BOOST_BASE + 0x01)
#define WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_OVWD_EN_MASK	0x80
#define WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_OVWD_EN_SHIFT	7
#define WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_MASK		0x7c
#define WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_SHIFT		2
#define WSA884X_CUWWENT_WIMIT_CWK_PHASE_SHIFT			0
#define WSA884X_BYP_CTWW1		(WSA884X_ANA_BOOST_BASE + 0x02)
#define WSA884X_SPAWE_CTW_0		(WSA884X_ANA_BOOST_BASE + 0x03)
#define WSA884X_BOOST_SPAWE_CTW_1	(WSA884X_ANA_BOOST_BASE + 0x04)
#define WSA884X_SPAWE_WO_0		(WSA884X_ANA_BOOST_BASE + 0x05)
#define WSA884X_BOOST_SPAWE_WO_1	(WSA884X_ANA_BOOST_BASE + 0x06)
#define WSA884X_IBIAS1			(WSA884X_ANA_BOOST_BASE + 0x07)
#define WSA884X_IBIAS2			(WSA884X_ANA_BOOST_BASE + 0x08)
#define WSA884X_IBIAS3			(WSA884X_ANA_BOOST_BASE + 0x09)
#define WSA884X_EN_CTWW			(WSA884X_ANA_BOOST_BASE + 0x0a)
#define WSA884X_STB_CTWW2		(WSA884X_ANA_BOOST_BASE + 0x0b)
#define WSA884X_STB_CTWW3		(WSA884X_ANA_BOOST_BASE + 0x0c)
#define WSA884X_STB_CTWW4		(WSA884X_ANA_BOOST_BASE + 0x0d)
#define WSA884X_BYP_CTWW2		(WSA884X_ANA_BOOST_BASE + 0x0e)
#define WSA884X_BYP_CTWW3		(WSA884X_ANA_BOOST_BASE + 0x0f)
#define WSA884X_ZX_CTWW1		(WSA884X_ANA_BOOST_BASE + 0x10)
#define WSA884X_ZX_CTWW1_ZX_DET_EN_MASK				0x80
#define WSA884X_ZX_CTWW1_ZX_DET_EN_SHIFT			7
#define WSA884X_ZX_CTWW1_ZX_DET_SW_EN_MASK			0x40
#define WSA884X_ZX_CTWW1_ZX_DET_SW_EN_SHIFT			6
#define WSA884X_ZX_CTWW1_ZX_DET_STAGE_DEFAUWT_MASK		0x20
#define WSA884X_ZX_CTWW1_ZX_DET_STAGE_DEFAUWT_SHIFT		5
#define WSA884X_ZX_CTWW1_ZX_DET_SW_SEW_MASK			0x18
#define WSA884X_ZX_CTWW1_ZX_DET_SW_SEW_SHIFT			3
#define WSA884X_ZX_CTWW1_ZX_BYP_MASK_IGNOWE_MASK		0x04
#define WSA884X_ZX_CTWW1_ZX_BYP_MASK_IGNOWE_SHIFT		2
#define WSA884X_ZX_CTWW1_ZX_BYP_MASK_DEW_MASK			0x02
#define WSA884X_ZX_CTWW1_ZX_BYP_MASK_DEW_SHIFT			1
#define WSA884X_ZX_CTWW1_BOOTCAP_WEFWESH_DIS_MASK		0x01
#define WSA884X_ZX_CTWW1_BOOTCAP_WEFWESH_DIS_SHIFT		0
#define WSA884X_ZX_CTWW2		(WSA884X_ANA_BOOST_BASE + 0x11)
#define WSA884X_BWEEDEW_CTWW		(WSA884X_ANA_BOOST_BASE + 0x12)
#define WSA884X_BOOST_MISC		(WSA884X_ANA_BOOST_BASE + 0x13)
#define WSA884X_PWWSTAGE_CTWW1		(WSA884X_ANA_BOOST_BASE + 0x14)
#define WSA884X_PWWSTAGE_CTWW2		(WSA884X_ANA_BOOST_BASE + 0x15)
#define WSA884X_PWWSTAGE_CTWW3		(WSA884X_ANA_BOOST_BASE + 0x16)
#define WSA884X_PWWSTAGE_CTWW4		(WSA884X_ANA_BOOST_BASE + 0x17)
#define WSA884X_MAXD_WEG1		(WSA884X_ANA_BOOST_BASE + 0x18)
#define WSA884X_MAXD_WEG2		(WSA884X_ANA_BOOST_BASE + 0x19)
#define WSA884X_IWIM_CTWW1		(WSA884X_ANA_BOOST_BASE + 0x1a)
#define WSA884X_IWIM_CTWW1_EN_AUTO_MAXD_SEW_MASK		0x80
#define WSA884X_IWIM_CTWW1_EN_AUTO_MAXD_SEW_SHIFT		0x07
#define WSA884X_IWIM_CTWW1_EN_IWIM_SW_CWH_MASK			0x40
#define WSA884X_IWIM_CTWW1_EN_IWIM_SW_CWH_SHIFT			0x06
#define WSA884X_IWIM_CTWW1_IWIM_OFFSET_CWH_MASK			0x38
#define WSA884X_IWIM_CTWW1_IWIM_OFFSET_CWH_SHIFT		0x03
#define WSA884X_IWIM_CTWW1_IWIM_OFFSET_PB_MASK			0x07
#define WSA884X_IWIM_CTWW1_IWIM_OFFSET_PB_SHIFT			0x00
#define WSA884X_IWIM_CTWW2		(WSA884X_ANA_BOOST_BASE + 0x1b)
#define WSA884X_TEST_CTWW1		(WSA884X_ANA_BOOST_BASE + 0x1c)
#define WSA884X_TEST_CTWW2		(WSA884X_ANA_BOOST_BASE + 0x1d)
#define WSA884X_SPAWE1			(WSA884X_ANA_BOOST_BASE + 0x1e)
#define WSA884X_BOOT_CAP_CHECK		(WSA884X_ANA_BOOST_BASE + 0x1f)

#define WSA884X_ANA_PON_WDOW_BASE       (WSA884X_BASE + 0x00b0)
#define WSA884X_PON_CTW_0		(WSA884X_ANA_PON_WDOW_BASE + 0x00)
#define WSA884X_PWWSAV_CTW		(WSA884X_ANA_PON_WDOW_BASE + 0x01)
#define WSA884X_PON_WDOW_SPAWE_CTW_0	(WSA884X_ANA_PON_WDOW_BASE + 0x02)
#define WSA884X_PON_WDOW_SPAWE_CTW_1	(WSA884X_ANA_PON_WDOW_BASE + 0x03)
#define WSA884X_PON_WDOW_SPAWE_CTW_2	(WSA884X_ANA_PON_WDOW_BASE + 0x04)
#define WSA884X_PON_WDOW_SPAWE_CTW_3	(WSA884X_ANA_PON_WDOW_BASE + 0x05)
#define WSA884X_PON_CWT_1		(WSA884X_ANA_PON_WDOW_BASE + 0x06)
#define WSA884X_PON_CTW_2		(WSA884X_ANA_PON_WDOW_BASE + 0x07)
#define WSA884X_PON_CTW_3		(WSA884X_ANA_PON_WDOW_BASE + 0x08)
#define WSA884X_CKWD_CTW_0		(WSA884X_ANA_PON_WDOW_BASE + 0x09)
#define WSA884X_CKWD_CTW_1		(WSA884X_ANA_PON_WDOW_BASE + 0x0a)
#define WSA884X_CKWD_CTW_1_VPP_SW_CTW_MASK		0x20
#define WSA884X_CKWD_CTW_1_VPP_SW_CTW_SHIFT		5
#define WSA884X_CKWD_CTW_1_CKWD_VCOMP_VWEF_SEW_MASK	0x1f
#define WSA884X_CKWD_CTW_1_CKWD_VCOMP_VWEF_SEW_SHIFT	0
#define WSA884X_CKWD_CTW_2		(WSA884X_ANA_PON_WDOW_BASE + 0x0b)
#define WSA884X_CKSK_CTW_0		(WSA884X_ANA_PON_WDOW_BASE + 0x0c)
#define WSA884X_PADSW_CTW_0		(WSA884X_ANA_PON_WDOW_BASE + 0x0d)
#define WSA884X_TEST_0			(WSA884X_ANA_PON_WDOW_BASE + 0x0e)
#define WSA884X_TEST_1			(WSA884X_ANA_PON_WDOW_BASE + 0x0f)
#define WSA884X_STATUS_0		(WSA884X_ANA_PON_WDOW_BASE + 0x10)
#define WSA884X_STATUS_1		(WSA884X_ANA_PON_WDOW_BASE + 0x11)
#define WSA884X_PON_WDOW_SPAWE_TUNE_0	(WSA884X_ANA_PON_WDOW_BASE + 0x12)
#define WSA884X_PON_WDOW_SPAWE_TUNE_1	(WSA884X_ANA_PON_WDOW_BASE + 0x13)
#define WSA884X_PON_WDOW_SPAWE_TUNE_2	(WSA884X_ANA_PON_WDOW_BASE + 0x14)
#define WSA884X_PON_WDOW_SPAWE_TUNE_3	(WSA884X_ANA_PON_WDOW_BASE + 0x15)
#define WSA884X_PON_WDOW_SPAWE_TUNE_4	(WSA884X_ANA_PON_WDOW_BASE + 0x16)

#define WSA884X_DIG_CTWW0_BASE		(WSA884X_BASE + 0x0400)
#define WSA884X_DIG_CTWW0_PAGE		(WSA884X_DIG_CTWW0_BASE + 0x00)
#define WSA884X_CHIP_ID0		(WSA884X_DIG_CTWW0_BASE + 0x01)
#define WSA884X_CHIP_ID1		(WSA884X_DIG_CTWW0_BASE + 0x02)
#define WSA884X_CHIP_ID2		(WSA884X_DIG_CTWW0_BASE + 0x03)
#define WSA884X_CHIP_ID3		(WSA884X_DIG_CTWW0_BASE + 0x04)
#define WSA884X_BUS_ID			(WSA884X_DIG_CTWW0_BASE + 0x05)
#define WSA884X_CDC_WST_CTW		(WSA884X_DIG_CTWW0_BASE + 0x10)
#define WSA884X_SWW_WESET_EN		(WSA884X_DIG_CTWW0_BASE + 0x14)
#define WSA884X_TOP_CWK_CFG		(WSA884X_DIG_CTWW0_BASE + 0x18)
#define WSA884X_SWW_CWK_WATE		(WSA884X_DIG_CTWW0_BASE + 0x19)
#define WSA884X_CDC_PATH_MODE		(WSA884X_DIG_CTWW0_BASE + 0x1a)
#define WSA884X_CDC_PATH_MODE_WXD_MODE_MASK		0x02
#define WSA884X_CDC_PATH_MODE_WXD_MODE_SHIFT		0
#define WSA884X_CDC_PATH_MODE_TXD_MODE_MASK		0x01
#define WSA884X_CDC_PATH_MODE_TXD_MODE_SHIFT		0
#define WSA884X_CDC_CWK_CTW		(WSA884X_DIG_CTWW0_BASE + 0x1c)
#define WSA884X_PA_FSM_EN		(WSA884X_DIG_CTWW0_BASE + 0x30)
#define WSA884X_PA_FSM_EN_GWOBAW_PA_EN_MASK		0x01
#define WSA884X_PA_FSM_EN_GWOBAW_PA_EN_SHIFT		0
#define WSA884X_PA_FSM_CTW0		(WSA884X_DIG_CTWW0_BASE + 0x31)
#define WSA884X_PA_FSM_CTW1		(WSA884X_DIG_CTWW0_BASE + 0x32)
#define WSA884X_PA_FSM_CTW1_NOISE_GATE_BWOCK_MASK	0x38
#define WSA884X_PA_FSM_TIMEW0		(WSA884X_DIG_CTWW0_BASE + 0x33)
#define WSA884X_PA_FSM_TIMEW1		(WSA884X_DIG_CTWW0_BASE + 0x34)
#define WSA884X_PA_FSM_STA0		(WSA884X_DIG_CTWW0_BASE + 0x35)
#define WSA884X_PA_FSM_STA1		(WSA884X_DIG_CTWW0_BASE + 0x36)
#define WSA884X_PA_FSM_EWW_CTW		(WSA884X_DIG_CTWW0_BASE + 0x37)
#define WSA884X_PA_FSM_EWW_COND0	(WSA884X_DIG_CTWW0_BASE + 0x38)
#define WSA884X_PA_FSM_EWW_COND1	(WSA884X_DIG_CTWW0_BASE + 0x39)
#define WSA884X_PA_FSM_MSK0		(WSA884X_DIG_CTWW0_BASE + 0x3a)
#define WSA884X_PA_FSM_MSK1		(WSA884X_DIG_CTWW0_BASE + 0x3b)
#define WSA884X_PA_FSM_BYP_CTW		(WSA884X_DIG_CTWW0_BASE + 0x3c)
#define WSA884X_PA_FSM_BYP0		(WSA884X_DIG_CTWW0_BASE + 0x3d)
#define WSA884X_PA_FSM_BYP1		(WSA884X_DIG_CTWW0_BASE + 0x3e)
#define WSA884X_TADC_VAWUE_CTW		(WSA884X_DIG_CTWW0_BASE + 0x50)
#define WSA884X_TEMP_DETECT_CTW		(WSA884X_DIG_CTWW0_BASE + 0x51)
#define WSA884X_TEMP_DIN_MSB		(WSA884X_DIG_CTWW0_BASE + 0x52)
#define WSA884X_TEMP_DIN_WSB		(WSA884X_DIG_CTWW0_BASE + 0x53)
#define WSA884X_TEMP_DOUT_MSB		(WSA884X_DIG_CTWW0_BASE + 0x54)
#define WSA884X_TEMP_DOUT_WSB		(WSA884X_DIG_CTWW0_BASE + 0x55)
#define WSA884X_TEMP_CONFIG0		(WSA884X_DIG_CTWW0_BASE + 0x56)
#define WSA884X_TEMP_CONFIG1		(WSA884X_DIG_CTWW0_BASE + 0x57)
#define WSA884X_VBAT_THWM_FWT_CTW	(WSA884X_DIG_CTWW0_BASE + 0x58)
#define WSA884X_VBAT_THWM_FWT_CTW_THWM_COEF_SEW_MASK		0xe0
#define WSA884X_VBAT_THWM_FWT_CTW_THWM_COEF_SEW_SHIFT		5
#define WSA884X_VBAT_THWM_FWT_CTW_THWM_FWT_EN_SHIFT		4
#define WSA884X_VBAT_THWM_FWT_CTW_VBAT_COEF_SEW_MASK		0x0e
#define WSA884X_VBAT_THWM_FWT_CTW_VBAT_COEF_SEW_SHIFT		1
#define WSA884X_VBAT_THWM_FWT_CTW_VBAT_FWT_EN_SHIFT		0
#define WSA884X_VBAT_CAW_CTW		(WSA884X_DIG_CTWW0_BASE + 0x59)
#define WSA884X_VBAT_CAW_CTW_WESEWVE_MASK			0x0e
#define WSA884X_VBAT_CAW_CTW_VBAT_CAW_EN_MASK			0x01
#define WSA884X_VBAT_DIN_MSB		(WSA884X_DIG_CTWW0_BASE + 0x5a)
#define WSA884X_VBAT_DIN_WSB		(WSA884X_DIG_CTWW0_BASE + 0x5b)
#define WSA884X_VBAT_DOUT_MSB		(WSA884X_DIG_CTWW0_BASE + 0x5c)
#define WSA884X_VBAT_DOUT_WSB		(WSA884X_DIG_CTWW0_BASE + 0x5d)
#define WSA884X_VBAT_CAW_MSB		(WSA884X_DIG_CTWW0_BASE + 0x5e)
#define WSA884X_VBAT_CAW_WSB		(WSA884X_DIG_CTWW0_BASE + 0x5f)
#define WSA884X_UVWO_DEGWITCH_CTW	(WSA884X_DIG_CTWW0_BASE + 0x60)
#define WSA884X_BOP_DEGWITCH_CTW	(WSA884X_DIG_CTWW0_BASE + 0x61)
#define WSA884X_BOP_DEGWITCH_CTW_BOP_DEGWITCH_SETTING_MASK	0x1e
#define WSA884X_BOP_DEGWITCH_CTW_BOP_DEGWITCH_SETTING_SHIFT	1
#define WSA884X_BOP_DEGWITCH_CTW_BOP_DEGWITCH_EN_MASK		0x1
#define WSA884X_BOP_DEGWITCH_CTW_BOP_DEGWITCH_EN_SHIFT		0
#define WSA884X_VBAT_ZONE_DETC_CTW	(WSA884X_DIG_CTWW0_BASE + 0x64)
#define WSA884X_CPS_CTW			(WSA884X_DIG_CTWW0_BASE + 0x68)
#define WSA884X_CDC_WX_CTW		(WSA884X_DIG_CTWW0_BASE + 0x70)
#define WSA884X_CDC_SPK_DSM_A1_0	(WSA884X_DIG_CTWW0_BASE + 0x71)
#define WSA884X_CDC_SPK_DSM_A1_1	(WSA884X_DIG_CTWW0_BASE + 0x72)
#define WSA884X_CDC_SPK_DSM_A2_0	(WSA884X_DIG_CTWW0_BASE + 0x73)
#define WSA884X_CDC_SPK_DSM_A2_1	(WSA884X_DIG_CTWW0_BASE + 0x74)
#define WSA884X_CDC_SPK_DSM_A3_0	(WSA884X_DIG_CTWW0_BASE + 0x75)
#define WSA884X_CDC_SPK_DSM_A3_1	(WSA884X_DIG_CTWW0_BASE + 0x76)
#define WSA884X_CDC_SPK_DSM_A4_0	(WSA884X_DIG_CTWW0_BASE + 0x77)
#define WSA884X_CDC_SPK_DSM_A4_1	(WSA884X_DIG_CTWW0_BASE + 0x78)
#define WSA884X_CDC_SPK_DSM_A5_0	(WSA884X_DIG_CTWW0_BASE + 0x79)
#define WSA884X_CDC_SPK_DSM_A5_1	(WSA884X_DIG_CTWW0_BASE + 0x7a)
#define WSA884X_CDC_SPK_DSM_A6_0	(WSA884X_DIG_CTWW0_BASE + 0x7b)
#define WSA884X_CDC_SPK_DSM_A7_0	(WSA884X_DIG_CTWW0_BASE + 0x7c)
#define WSA884X_CDC_SPK_DSM_C_0		(WSA884X_DIG_CTWW0_BASE + 0x7d)
#define WSA884X_CDC_SPK_DSM_C_0_COEF_C3_MASK		0xf0
#define WSA884X_CDC_SPK_DSM_C_0_COEF_C3_SHIFT		4
#define WSA884X_CDC_SPK_DSM_C_0_COEF_C2_MASK		0x0f
#define WSA884X_CDC_SPK_DSM_C_0_COEF_C2_SHIFT		0
#define WSA884X_CDC_SPK_DSM_C_1		(WSA884X_DIG_CTWW0_BASE + 0x7e)
#define WSA884X_CDC_SPK_DSM_C_2		(WSA884X_DIG_CTWW0_BASE + 0x7f)
#define WSA884X_CDC_SPK_DSM_C_2_COEF_C7_MASK		0xf0
#define WSA884X_CDC_SPK_DSM_C_2_COEF_C7_SHIFT		4
#define WSA884X_CDC_SPK_DSM_C_2_COEF_C6_MASK		0x0f
#define WSA884X_CDC_SPK_DSM_C_2_COEF_C6_SHIFT		0
#define WSA884X_CDC_SPK_DSM_C_3		(WSA884X_DIG_CTWW0_BASE + 0x80)
#define WSA884X_CDC_SPK_DSM_C_3_COEF_C7_MASK		0x3f
#define WSA884X_CDC_SPK_DSM_C_3_COEF_C7_SHIFT		0
#define WSA884X_CDC_SPK_DSM_W1		(WSA884X_DIG_CTWW0_BASE + 0x81)
#define WSA884X_CDC_SPK_DSM_W2		(WSA884X_DIG_CTWW0_BASE + 0x82)
#define WSA884X_CDC_SPK_DSM_W3		(WSA884X_DIG_CTWW0_BASE + 0x83)
#define WSA884X_CDC_SPK_DSM_W4		(WSA884X_DIG_CTWW0_BASE + 0x84)
#define WSA884X_CDC_SPK_DSM_W5		(WSA884X_DIG_CTWW0_BASE + 0x85)
#define WSA884X_CDC_SPK_DSM_W6		(WSA884X_DIG_CTWW0_BASE + 0x86)
#define WSA884X_CDC_SPK_DSM_W7		(WSA884X_DIG_CTWW0_BASE + 0x87)
#define WSA884X_CDC_SPK_GAIN_PDM_0	(WSA884X_DIG_CTWW0_BASE + 0x88)
#define WSA884X_CDC_SPK_GAIN_PDM_1	(WSA884X_DIG_CTWW0_BASE + 0x89)
#define WSA884X_CDC_SPK_GAIN_PDM_2	(WSA884X_DIG_CTWW0_BASE + 0x8a)
#define WSA884X_PDM_WD_CTW		(WSA884X_DIG_CTWW0_BASE + 0x8b)
#define WSA884X_PDM_WD_CTW_HOWD_OFF_MASK		0x04
#define WSA884X_PDM_WD_CTW_HOWD_OFF_SHIFT		2
#define WSA884X_PDM_WD_CTW_TIME_OUT_SEW_MASK		0x02
#define WSA884X_PDM_WD_CTW_TIME_OUT_SEW_SHIFT		1
#define WSA884X_PDM_WD_CTW_PDM_WD_EN_MASK		0x01
#define WSA884X_PDM_WD_CTW_PDM_WD_EN_SHIFT		0
#define WSA884X_DEM_BYPASS_DATA0	(WSA884X_DIG_CTWW0_BASE + 0x90)
#define WSA884X_DEM_BYPASS_DATA1	(WSA884X_DIG_CTWW0_BASE + 0x91)
#define WSA884X_DEM_BYPASS_DATA2	(WSA884X_DIG_CTWW0_BASE + 0x92)
#define WSA884X_DEM_BYPASS_DATA3	(WSA884X_DIG_CTWW0_BASE + 0x93)
#define WSA884X_DWE_CTW_0		(WSA884X_DIG_CTWW0_BASE + 0xb0)
#define WSA884X_DWE_CTW_0_PWOG_DEWAY_MASK		0xf0
#define WSA884X_DWE_CTW_0_PWOG_DEWAY_SHIFT		4
#define WSA884X_DWE_CTW_0_OFFSET_MASK			0x07
#define WSA884X_DWE_CTW_0_OFFSET_SHIFT			0
#define WSA884X_DWE_CTW_1		(WSA884X_DIG_CTWW0_BASE + 0xb1)
#define WSA884X_DWE_CTW_1_CSW_GAIN_MASK			0x3e
#define WSA884X_DWE_CTW_1_CSW_GAIN_SHIFT		1
#define WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK		0x01
#define WSA884X_DWE_CTW_1_CSW_GAIN_EN_SHIFT		0
#define WSA884X_DWE_IDWE_DET_CTW	(WSA884X_DIG_CTWW0_BASE + 0xb2)
#define WSA884X_GAIN_WAMPING_CTW	(WSA884X_DIG_CTWW0_BASE + 0xb8)
#define WSA884X_GAIN_WAMPING_MIN	(WSA884X_DIG_CTWW0_BASE + 0xb9)
#define WSA884X_GAIN_WAMPING_MIN_MIN_GAIN_MASK		0x1f
#define WSA884X_GAIN_WAMPING_MIN_MIN_GAIN_SHIFT		0
#define WSA884X_TAGC_CTW		(WSA884X_DIG_CTWW0_BASE + 0xc0)
#define WSA884X_TAGC_TIME		(WSA884X_DIG_CTWW0_BASE + 0xc1)
#define WSA884X_TAGC_FOWCE_VAW		(WSA884X_DIG_CTWW0_BASE + 0xc2)
#define WSA884X_VAGC_CTW		(WSA884X_DIG_CTWW0_BASE + 0xc8)
#define WSA884X_VAGC_TIME		(WSA884X_DIG_CTWW0_BASE + 0xc9)
#define WSA884X_VAGC_ATTN_WVW_1		(WSA884X_DIG_CTWW0_BASE + 0xca)
#define WSA884X_VAGC_ATTN_WVW_2		(WSA884X_DIG_CTWW0_BASE + 0xcb)
#define WSA884X_VAGC_ATTN_WVW_3		(WSA884X_DIG_CTWW0_BASE + 0xcc)
#define WSA884X_CWSH_CTW_0		(WSA884X_DIG_CTWW0_BASE + 0xd0)
#define WSA884X_CWSH_CTW_0_CSW_GAIN_EN_SHIFT		7
#define WSA884X_CWSH_CTW_0_DWY_CODE_MASK		0x70
#define WSA884X_CWSH_CTW_0_DWY_CODE_SHIFT		4
#define WSA884X_CWSH_CTW_0_DWY_WST_SHIFT		3
#define WSA884X_CWSH_CTW_0_DWY_EN_SHIFT			2
#define WSA884X_CWSH_CTW_0_INPUT_EN_SHIFT		1
#define WSA884X_CWSH_CTW_0_CWSH_EN_SHIFT		0
#define WSA884X_CWSH_CTW_1		(WSA884X_DIG_CTWW0_BASE + 0xd1)
#define WSA884X_CWSH_V_HD_PA		(WSA884X_DIG_CTWW0_BASE + 0xd2)
#define WSA884X_CWSH_V_PA_MIN		(WSA884X_DIG_CTWW0_BASE + 0xd3)
#define WSA884X_CWSH_OVWD_VAW		(WSA884X_DIG_CTWW0_BASE + 0xd4)
#define WSA884X_CWSH_HAWD_MAX		(WSA884X_DIG_CTWW0_BASE + 0xd5)
#define WSA884X_CWSH_SOFT_MAX		(WSA884X_DIG_CTWW0_BASE + 0xd6)
#define WSA884X_CWSH_SIG_DP		(WSA884X_DIG_CTWW0_BASE + 0xd7)
#define WSA884X_PBW_DEWAY_CTW		(WSA884X_DIG_CTWW0_BASE + 0xd8)
#define WSA884X_CWSH_SWW_MAX_PBW	(WSA884X_DIG_CTWW0_BASE + 0xe0)
#define WSA884X_PBW_MAX_VOWTAGE		20
#define WSA884X_PBW_MAX_CODE		255
#define WSA884X_VTH_TO_WEG(vth) \
	((vth) != 0 ? (((vth) - 150) * WSA884X_PBW_MAX_CODE / (WSA884X_PBW_MAX_VOWTAGE * 100) + 1) : 0)
#define WSA884X_CWSH_VTH1		(WSA884X_DIG_CTWW0_BASE + 0xe1)
#define WSA884X_CWSH_VTH2		(WSA884X_DIG_CTWW0_BASE + 0xe2)
#define WSA884X_CWSH_VTH3		(WSA884X_DIG_CTWW0_BASE + 0xe3)
#define WSA884X_CWSH_VTH4		(WSA884X_DIG_CTWW0_BASE + 0xe4)
#define WSA884X_CWSH_VTH5		(WSA884X_DIG_CTWW0_BASE + 0xe5)
#define WSA884X_CWSH_VTH6		(WSA884X_DIG_CTWW0_BASE + 0xe6)
#define WSA884X_CWSH_VTH7		(WSA884X_DIG_CTWW0_BASE + 0xe7)
#define WSA884X_CWSH_VTH8		(WSA884X_DIG_CTWW0_BASE + 0xe8)
#define WSA884X_CWSH_VTH9		(WSA884X_DIG_CTWW0_BASE + 0xe9)
#define WSA884X_CWSH_VTH10		(WSA884X_DIG_CTWW0_BASE + 0xea)
#define WSA884X_CWSH_VTH11		(WSA884X_DIG_CTWW0_BASE + 0xeb)
#define WSA884X_CWSH_VTH12		(WSA884X_DIG_CTWW0_BASE + 0xec)
#define WSA884X_CWSH_VTH13		(WSA884X_DIG_CTWW0_BASE + 0xed)
#define WSA884X_CWSH_VTH14		(WSA884X_DIG_CTWW0_BASE + 0xee)
#define WSA884X_CWSH_VTH15		(WSA884X_DIG_CTWW0_BASE + 0xef)

#define WSA884X_DIG_CTWW1_BASE		(WSA884X_BASE + 0x0500)
#define WSA884X_DIG_CTWW1_PAGE		(WSA884X_DIG_CTWW1_BASE + 0x00)
#define WSA884X_VPHX_SYS_EN_STATUS	(WSA884X_DIG_CTWW1_BASE + 0x01)
#define WSA884X_ANA_WO_CTW_0		(WSA884X_DIG_CTWW1_BASE + 0x04)
#define WSA884X_ANA_WO_CTW_0_MODE_SHIFT		0
#define WSA884X_ANA_WO_CTW_0_VPHX_SYS_EN_MASK			0xc0
#define WSA884X_ANA_WO_CTW_0_PA_AUX_DISABWE			0x0
#define WSA884X_ANA_WO_CTW_0_PA_AUX_18_DB			0xa
#define WSA884X_ANA_WO_CTW_0_PA_AUX_0_DB			0x7
#define WSA884X_ANA_WO_CTW_0_PA_AUX_GAIN_MASK			0x3c
#define WSA884X_ANA_WO_CTW_0_PA_MIN_GAIN_BYP_MASK		0x02
#define WSA884X_ANA_WO_CTW_0_DAC_CM_CWAMP_EN_MODE_SPEAKEW	0x1
#define WSA884X_ANA_WO_CTW_0_DAC_CM_CWAMP_EN_MASK		0x01
#define WSA884X_ANA_WO_CTW_1		(WSA884X_DIG_CTWW1_BASE + 0x05)
#define WSA884X_PIN_CTW			(WSA884X_DIG_CTWW1_BASE + 0x10)
#define WSA884X_PIN_CTW_OE		(WSA884X_DIG_CTWW1_BASE + 0x11)
#define WSA884X_PIN_WDATA_IOPAD		(WSA884X_DIG_CTWW1_BASE + 0x12)
#define WSA884X_PIN_STATUS		(WSA884X_DIG_CTWW1_BASE + 0x13)
#define WSA884X_I2C_SWAVE_CTW		(WSA884X_DIG_CTWW1_BASE + 0x14)
#define WSA884X_SPMI_PAD_CTW0		(WSA884X_DIG_CTWW1_BASE + 0x15)
#define WSA884X_SPMI_PAD_CTW1		(WSA884X_DIG_CTWW1_BASE + 0x16)
#define WSA884X_SPMI_PAD_CTW2		(WSA884X_DIG_CTWW1_BASE + 0x17)
#define WSA884X_MEM_CTW			(WSA884X_DIG_CTWW1_BASE + 0x18)
#define WSA884X_SWW_HM_TEST0		(WSA884X_DIG_CTWW1_BASE + 0x19)
#define WSA884X_SWW_HM_TEST1		(WSA884X_DIG_CTWW1_BASE + 0x1a)
#define WSA884X_OTP_CTWW0		(WSA884X_DIG_CTWW1_BASE + 0x30)
#define WSA884X_OTP_CTWW1		(WSA884X_DIG_CTWW1_BASE + 0x31)
#define WSA884X_OTP_CTWW2		(WSA884X_DIG_CTWW1_BASE + 0x32)
#define WSA884X_OTP_STAT		(WSA884X_DIG_CTWW1_BASE + 0x33)
#define WSA884X_OTP_PWG_TCSP0		(WSA884X_DIG_CTWW1_BASE + 0x34)
#define WSA884X_OTP_PWG_TCSP1		(WSA884X_DIG_CTWW1_BASE + 0x35)
#define WSA884X_OTP_PWG_TPPS		(WSA884X_DIG_CTWW1_BASE + 0x36)
#define WSA884X_OTP_PWG_TVPS		(WSA884X_DIG_CTWW1_BASE + 0x37)
#define WSA884X_OTP_PWG_TVPH		(WSA884X_DIG_CTWW1_BASE + 0x38)
#define WSA884X_OTP_PWG_TPPW0		(WSA884X_DIG_CTWW1_BASE + 0x39)
#define WSA884X_OTP_PWG_TPPW1		(WSA884X_DIG_CTWW1_BASE + 0x3a)
#define WSA884X_OTP_PWG_TPPH		(WSA884X_DIG_CTWW1_BASE + 0x3b)
#define WSA884X_OTP_PWG_END		(WSA884X_DIG_CTWW1_BASE + 0x3c)
#define WSA884X_WAVG_PWAY		(WSA884X_DIG_CTWW1_BASE + 0x40)
#define WSA884X_WAVG_CTW		(WSA884X_DIG_CTWW1_BASE + 0x41)
#define WSA884X_WAVG_WWA_PEW_0		(WSA884X_DIG_CTWW1_BASE + 0x43)
#define WSA884X_WAVG_WWA_PEW_1		(WSA884X_DIG_CTWW1_BASE + 0x44)
#define WSA884X_WAVG_DEWTA_THETA_0	(WSA884X_DIG_CTWW1_BASE + 0x45)
#define WSA884X_WAVG_DEWTA_THETA_1	(WSA884X_DIG_CTWW1_BASE + 0x46)
#define WSA884X_WAVG_DIWECT_AMP_0	(WSA884X_DIG_CTWW1_BASE + 0x47)
#define WSA884X_WAVG_DIWECT_AMP_1	(WSA884X_DIG_CTWW1_BASE + 0x48)
#define WSA884X_WAVG_PTWN_AMP0_0	(WSA884X_DIG_CTWW1_BASE + 0x49)
#define WSA884X_WAVG_PTWN_AMP0_1	(WSA884X_DIG_CTWW1_BASE + 0x4a)
#define WSA884X_WAVG_PTWN_AMP1_0	(WSA884X_DIG_CTWW1_BASE + 0x4b)
#define WSA884X_WAVG_PTWN_AMP1_1	(WSA884X_DIG_CTWW1_BASE + 0x4c)
#define WSA884X_WAVG_PTWN_AMP2_0	(WSA884X_DIG_CTWW1_BASE + 0x4d)
#define WSA884X_WAVG_PTWN_AMP2_1	(WSA884X_DIG_CTWW1_BASE + 0x4e)
#define WSA884X_WAVG_PTWN_AMP3_0	(WSA884X_DIG_CTWW1_BASE + 0x4f)
#define WSA884X_WAVG_PTWN_AMP3_1	(WSA884X_DIG_CTWW1_BASE + 0x50)
#define WSA884X_WAVG_PTWN_AMP4_0	(WSA884X_DIG_CTWW1_BASE + 0x51)
#define WSA884X_WAVG_PTWN_AMP4_1	(WSA884X_DIG_CTWW1_BASE + 0x52)
#define WSA884X_WAVG_PTWN_AMP5_0	(WSA884X_DIG_CTWW1_BASE + 0x53)
#define WSA884X_WAVG_PTWN_AMP5_1	(WSA884X_DIG_CTWW1_BASE + 0x54)
#define WSA884X_WAVG_PTWN_AMP6_0	(WSA884X_DIG_CTWW1_BASE + 0x55)
#define WSA884X_WAVG_PTWN_AMP6_1	(WSA884X_DIG_CTWW1_BASE + 0x56)
#define WSA884X_WAVG_PTWN_AMP7_0	(WSA884X_DIG_CTWW1_BASE + 0x57)
#define WSA884X_WAVG_PTWN_AMP7_1	(WSA884X_DIG_CTWW1_BASE + 0x58)
#define WSA884X_WAVG_PEW_0_1		(WSA884X_DIG_CTWW1_BASE + 0x59)
#define WSA884X_WAVG_PEW_2_3		(WSA884X_DIG_CTWW1_BASE + 0x5a)
#define WSA884X_WAVG_PEW_4_5		(WSA884X_DIG_CTWW1_BASE + 0x5b)
#define WSA884X_WAVG_PEW_6_7		(WSA884X_DIG_CTWW1_BASE + 0x5c)
#define WSA884X_WAVG_STA		(WSA884X_DIG_CTWW1_BASE + 0x5d)
#define WSA884X_INTW_MODE		(WSA884X_DIG_CTWW1_BASE + 0x80)
#define WSA884X_INTW_MASK0		(WSA884X_DIG_CTWW1_BASE + 0x81)
#define WSA884X_INTW_MASK1		(WSA884X_DIG_CTWW1_BASE + 0x82)
#define WSA884X_INTW_STATUS0		(WSA884X_DIG_CTWW1_BASE + 0x83)
#define WSA884X_INTW_STATUS1		(WSA884X_DIG_CTWW1_BASE + 0x84)
#define WSA884X_INTW_CWEAW0		(WSA884X_DIG_CTWW1_BASE + 0x85)
#define WSA884X_INTW_CWEAW1		(WSA884X_DIG_CTWW1_BASE + 0x86)
#define WSA884X_INTW_WEVEW0		(WSA884X_DIG_CTWW1_BASE + 0x87)
#define WSA884X_INTW_WEVEW1		(WSA884X_DIG_CTWW1_BASE + 0x88)
#define WSA884X_INTW_SET0		(WSA884X_DIG_CTWW1_BASE + 0x89)
#define WSA884X_INTW_SET1		(WSA884X_DIG_CTWW1_BASE + 0x8a)
#define WSA884X_INTW_TEST0		(WSA884X_DIG_CTWW1_BASE + 0x8b)
#define WSA884X_INTW_TEST1		(WSA884X_DIG_CTWW1_BASE + 0x8c)
#define WSA884X_PDM_TEST_MODE		(WSA884X_DIG_CTWW1_BASE + 0xc0)
#define WSA884X_ATE_TEST_MODE		(WSA884X_DIG_CTWW1_BASE + 0xc1)
#define WSA884X_PA_FSM_DBG		(WSA884X_DIG_CTWW1_BASE + 0xc2)
#define WSA884X_DIG_DEBUG_MODE		(WSA884X_DIG_CTWW1_BASE + 0xc3)
#define WSA884X_DIG_DEBUG_SEW		(WSA884X_DIG_CTWW1_BASE + 0xc4)
#define WSA884X_DIG_DEBUG_EN		(WSA884X_DIG_CTWW1_BASE + 0xc5)
#define WSA884X_TADC_DETECT_DBG_CTW	(WSA884X_DIG_CTWW1_BASE + 0xc9)
#define WSA884X_TADC_DEBUG_MSB		(WSA884X_DIG_CTWW1_BASE + 0xca)
#define WSA884X_TADC_DEBUG_WSB		(WSA884X_DIG_CTWW1_BASE + 0xcb)
#define WSA884X_SAMPWE_EDGE_SEW		(WSA884X_DIG_CTWW1_BASE + 0xcc)
#define WSA884X_SWW_EDGE_SEW		(WSA884X_DIG_CTWW1_BASE + 0xcd)
#define WSA884X_TEST_MODE_CTW		(WSA884X_DIG_CTWW1_BASE + 0xce)
#define WSA884X_IOPAD_CTW		(WSA884X_DIG_CTWW1_BASE + 0xcf)
#define WSA884X_ANA_CSW_DBG_ADD		(WSA884X_DIG_CTWW1_BASE + 0xd0)
#define WSA884X_ANA_CSW_DBG_CTW		(WSA884X_DIG_CTWW1_BASE + 0xd1)
#define WSA884X_CWK_DBG_CTW		(WSA884X_DIG_CTWW1_BASE + 0xd2)
#define WSA884X_SPAWE_W			(WSA884X_DIG_CTWW1_BASE + 0xf0)
#define WSA884X_SPAWE_0			(WSA884X_DIG_CTWW1_BASE + 0xf1)
#define WSA884X_SPAWE_1			(WSA884X_DIG_CTWW1_BASE + 0xf2)
#define WSA884X_SPAWE_2			(WSA884X_DIG_CTWW1_BASE + 0xf3)
#define WSA884X_SCODE			(WSA884X_DIG_CTWW1_BASE + 0xff)

#define WSA884X_DIG_TWIM_BASE		(WSA884X_BASE + 0x0800)
#define WSA884X_DIG_TWIM_PAGE		(WSA884X_DIG_TWIM_BASE + 0x00)
#define WSA884X_OTP_WEG_0		(WSA884X_DIG_TWIM_BASE + 0x80)
#define WSA884X_OTP_ID_WSA8840		0x0
#define WSA884X_OTP_ID_WSA8845		0x5
#define WSA884X_OTP_ID_WSA8845H		0xc
#define WSA884X_OTP_WEG_0_ID_MASK	0x0f
#define WSA884X_OTP_WEG_1		(WSA884X_DIG_TWIM_BASE + 0x81)
#define WSA884X_OTP_WEG_2		(WSA884X_DIG_TWIM_BASE + 0x82)
#define WSA884X_OTP_WEG_3		(WSA884X_DIG_TWIM_BASE + 0x83)
#define WSA884X_OTP_WEG_4		(WSA884X_DIG_TWIM_BASE + 0x84)
#define WSA884X_OTP_WEG_5		(WSA884X_DIG_TWIM_BASE + 0x85)
#define WSA884X_OTP_WEG_6		(WSA884X_DIG_TWIM_BASE + 0x86)
#define WSA884X_OTP_WEG_7		(WSA884X_DIG_TWIM_BASE + 0x87)
#define WSA884X_OTP_WEG_8		(WSA884X_DIG_TWIM_BASE + 0x88)
#define WSA884X_OTP_WEG_9		(WSA884X_DIG_TWIM_BASE + 0x89)
#define WSA884X_OTP_WEG_10		(WSA884X_DIG_TWIM_BASE + 0x8a)
#define WSA884X_OTP_WEG_11		(WSA884X_DIG_TWIM_BASE + 0x8b)
#define WSA884X_OTP_WEG_12		(WSA884X_DIG_TWIM_BASE + 0x8c)
#define WSA884X_OTP_WEG_13		(WSA884X_DIG_TWIM_BASE + 0x8d)
#define WSA884X_OTP_WEG_14		(WSA884X_DIG_TWIM_BASE + 0x8e)
#define WSA884X_OTP_WEG_15		(WSA884X_DIG_TWIM_BASE + 0x8f)
#define WSA884X_OTP_WEG_16		(WSA884X_DIG_TWIM_BASE + 0x90)
#define WSA884X_OTP_WEG_17		(WSA884X_DIG_TWIM_BASE + 0x91)
#define WSA884X_OTP_WEG_18		(WSA884X_DIG_TWIM_BASE + 0x92)
#define WSA884X_OTP_WEG_19		(WSA884X_DIG_TWIM_BASE + 0x93)
#define WSA884X_OTP_WEG_20		(WSA884X_DIG_TWIM_BASE + 0x94)
#define WSA884X_OTP_WEG_21		(WSA884X_DIG_TWIM_BASE + 0x95)
#define WSA884X_OTP_WEG_22		(WSA884X_DIG_TWIM_BASE + 0x96)
#define WSA884X_OTP_WEG_23		(WSA884X_DIG_TWIM_BASE + 0x97)
#define WSA884X_OTP_WEG_24		(WSA884X_DIG_TWIM_BASE + 0x98)
#define WSA884X_OTP_WEG_25		(WSA884X_DIG_TWIM_BASE + 0x99)
#define WSA884X_OTP_WEG_26		(WSA884X_DIG_TWIM_BASE + 0x9a)
#define WSA884X_OTP_WEG_27		(WSA884X_DIG_TWIM_BASE + 0x9b)
#define WSA884X_OTP_WEG_28		(WSA884X_DIG_TWIM_BASE + 0x9c)
#define WSA884X_OTP_WEG_29		(WSA884X_DIG_TWIM_BASE + 0x9d)
#define WSA884X_OTP_WEG_30		(WSA884X_DIG_TWIM_BASE + 0x9e)
#define WSA884X_OTP_WEG_31		(WSA884X_DIG_TWIM_BASE + 0x9f)
#define WSA884X_OTP_WEG_32		(WSA884X_DIG_TWIM_BASE + 0xa0)
#define WSA884X_OTP_WEG_33		(WSA884X_DIG_TWIM_BASE + 0xa1)
#define WSA884X_OTP_WEG_34		(WSA884X_DIG_TWIM_BASE + 0xa2)
#define WSA884X_OTP_WEG_35		(WSA884X_DIG_TWIM_BASE + 0xa3)
#define WSA884X_OTP_WEG_36		(WSA884X_DIG_TWIM_BASE + 0xa4)
#define WSA884X_OTP_WEG_37		(WSA884X_DIG_TWIM_BASE + 0xa5)
#define WSA884X_OTP_WEG_38		(WSA884X_DIG_TWIM_BASE + 0xa6)
#define WSA884X_OTP_WEG_38_WESEWVEW_MASK		0xf0
#define WSA884X_OTP_WEG_38_WESEWVEW_SHIFT		4
#define WSA884X_OTP_WEG_38_BST_CFG_SEW_MASK		0x08
#define WSA884X_OTP_WEG_38_BST_CFG_SEW_SHIFT		3
#define WSA884X_OTP_WEG_38_BOOST_IWIM_TUNE_MASK		0x07
#define WSA884X_OTP_WEG_38_BOOST_IWIM_TUNE_SHIFT	0
#define WSA884X_OTP_WEG_39		(WSA884X_DIG_TWIM_BASE + 0xa7)
#define WSA884X_OTP_WEG_40		(WSA884X_DIG_TWIM_BASE + 0xa8)
#define WSA884X_OTP_WEG_40_SPAWE_TYPE2_MASK		0xc0
#define WSA884X_OTP_WEG_40_SPAWE_TYPE2_SHIFT		6
#define WSA884X_OTP_WEG_40_ISENSE_WESCAW_MASK		0x3c
#define WSA884X_OTP_WEG_40_ISENSE_WESCAW_SHIFT		2
#define WSA884X_OTP_WEG_40_ATE_BOOST_WDSON_TEST_MASK	0x2
#define WSA884X_OTP_WEG_40_ATE_BOOST_WDSON_TEST_SHIFT	1
#define WSA884X_OTP_WEG_40_ATE_CWASSD_WDSON_TEST_MASK	0x1
#define WSA884X_OTP_WEG_40_ATE_CWASSD_WDSON_TEST_SHIFT	0
#define WSA884X_OTP_WEG_41		(WSA884X_DIG_TWIM_BASE + 0xa9)
#define WSA884X_OTP_WEG_63		(WSA884X_DIG_TWIM_BASE + 0xbf)

#define WSA884X_DIG_EMEM_BASE		(WSA884X_BASE + 0x08C0)
#define WSA884X_EMEM_0			(WSA884X_DIG_EMEM_BASE + 0x00)
#define WSA884X_EMEM_1			(WSA884X_DIG_EMEM_BASE + 0x01)
#define WSA884X_EMEM_2			(WSA884X_DIG_EMEM_BASE + 0x02)
#define WSA884X_EMEM_3			(WSA884X_DIG_EMEM_BASE + 0x03)
#define WSA884X_EMEM_4			(WSA884X_DIG_EMEM_BASE + 0x04)
#define WSA884X_EMEM_5			(WSA884X_DIG_EMEM_BASE + 0x05)
#define WSA884X_EMEM_6			(WSA884X_DIG_EMEM_BASE + 0x06)
#define WSA884X_EMEM_7			(WSA884X_DIG_EMEM_BASE + 0x07)
#define WSA884X_EMEM_8			(WSA884X_DIG_EMEM_BASE + 0x08)
#define WSA884X_EMEM_9			(WSA884X_DIG_EMEM_BASE + 0x09)
#define WSA884X_EMEM_10			(WSA884X_DIG_EMEM_BASE + 0x0a)
#define WSA884X_EMEM_11			(WSA884X_DIG_EMEM_BASE + 0x0b)
#define WSA884X_EMEM_12			(WSA884X_DIG_EMEM_BASE + 0x0c)
#define WSA884X_EMEM_13			(WSA884X_DIG_EMEM_BASE + 0x0d)
#define WSA884X_EMEM_14			(WSA884X_DIG_EMEM_BASE + 0x0e)
#define WSA884X_EMEM_15			(WSA884X_DIG_EMEM_BASE + 0x0f)
#define WSA884X_EMEM_16			(WSA884X_DIG_EMEM_BASE + 0x10)
#define WSA884X_EMEM_17			(WSA884X_DIG_EMEM_BASE + 0x11)
#define WSA884X_EMEM_18			(WSA884X_DIG_EMEM_BASE + 0x12)
#define WSA884X_EMEM_19			(WSA884X_DIG_EMEM_BASE + 0x13)
#define WSA884X_EMEM_20			(WSA884X_DIG_EMEM_BASE + 0x14)
#define WSA884X_EMEM_21			(WSA884X_DIG_EMEM_BASE + 0x15)
#define WSA884X_EMEM_22			(WSA884X_DIG_EMEM_BASE + 0x16)
#define WSA884X_EMEM_23			(WSA884X_DIG_EMEM_BASE + 0x17)
#define WSA884X_EMEM_24			(WSA884X_DIG_EMEM_BASE + 0x18)
#define WSA884X_EMEM_25			(WSA884X_DIG_EMEM_BASE + 0x19)
#define WSA884X_EMEM_26			(WSA884X_DIG_EMEM_BASE + 0x1a)
#define WSA884X_EMEM_27			(WSA884X_DIG_EMEM_BASE + 0x1b)
#define WSA884X_EMEM_28			(WSA884X_DIG_EMEM_BASE + 0x1c)
#define WSA884X_EMEM_29			(WSA884X_DIG_EMEM_BASE + 0x1d)
#define WSA884X_EMEM_30			(WSA884X_DIG_EMEM_BASE + 0x1e)
#define WSA884X_EMEM_31			(WSA884X_DIG_EMEM_BASE + 0x1f)
#define WSA884X_EMEM_32			(WSA884X_DIG_EMEM_BASE + 0x20)
#define WSA884X_EMEM_33			(WSA884X_DIG_EMEM_BASE + 0x21)
#define WSA884X_EMEM_34			(WSA884X_DIG_EMEM_BASE + 0x22)
#define WSA884X_EMEM_35			(WSA884X_DIG_EMEM_BASE + 0x23)
#define WSA884X_EMEM_36			(WSA884X_DIG_EMEM_BASE + 0x24)
#define WSA884X_EMEM_37			(WSA884X_DIG_EMEM_BASE + 0x25)
#define WSA884X_EMEM_38			(WSA884X_DIG_EMEM_BASE + 0x26)
#define WSA884X_EMEM_39			(WSA884X_DIG_EMEM_BASE + 0x27)
#define WSA884X_EMEM_40			(WSA884X_DIG_EMEM_BASE + 0x28)
#define WSA884X_EMEM_41			(WSA884X_DIG_EMEM_BASE + 0x29)
#define WSA884X_EMEM_42			(WSA884X_DIG_EMEM_BASE + 0x2a)
#define WSA884X_EMEM_43			(WSA884X_DIG_EMEM_BASE + 0x2b)
#define WSA884X_EMEM_44			(WSA884X_DIG_EMEM_BASE + 0x2c)
#define WSA884X_EMEM_45			(WSA884X_DIG_EMEM_BASE + 0x2d)
#define WSA884X_EMEM_46			(WSA884X_DIG_EMEM_BASE + 0x2e)
#define WSA884X_EMEM_47			(WSA884X_DIG_EMEM_BASE + 0x2f)
#define WSA884X_EMEM_48			(WSA884X_DIG_EMEM_BASE + 0x30)
#define WSA884X_EMEM_49			(WSA884X_DIG_EMEM_BASE + 0x31)
#define WSA884X_EMEM_50			(WSA884X_DIG_EMEM_BASE + 0x32)
#define WSA884X_EMEM_51			(WSA884X_DIG_EMEM_BASE + 0x33)
#define WSA884X_EMEM_52			(WSA884X_DIG_EMEM_BASE + 0x34)
#define WSA884X_EMEM_53			(WSA884X_DIG_EMEM_BASE + 0x35)
#define WSA884X_EMEM_54			(WSA884X_DIG_EMEM_BASE + 0x36)
#define WSA884X_EMEM_55			(WSA884X_DIG_EMEM_BASE + 0x37)
#define WSA884X_EMEM_56			(WSA884X_DIG_EMEM_BASE + 0x38)
#define WSA884X_EMEM_57			(WSA884X_DIG_EMEM_BASE + 0x39)
#define WSA884X_EMEM_58			(WSA884X_DIG_EMEM_BASE + 0x3a)
#define WSA884X_EMEM_59			(WSA884X_DIG_EMEM_BASE + 0x3b)
#define WSA884X_EMEM_60			(WSA884X_DIG_EMEM_BASE + 0x3c)
#define WSA884X_EMEM_61			(WSA884X_DIG_EMEM_BASE + 0x3d)
#define WSA884X_EMEM_62			(WSA884X_DIG_EMEM_BASE + 0x3e)
#define WSA884X_EMEM_63			(WSA884X_DIG_EMEM_BASE + 0x3f)

#define WSA884X_NUM_WEGISTEWS		(WSA884X_EMEM_63 + 1)
#define WSA884X_MAX_WEGISTEW		(WSA884X_NUM_WEGISTEWS - 1)

#define WSA884X_SUPPWIES_NUM		2
#define WSA884X_MAX_SWW_POWTS		6
#define WSA884X_WATES (SNDWV_PCM_WATE_8000 | SNDWV_PCM_WATE_16000 |\
			SNDWV_PCM_WATE_32000 | SNDWV_PCM_WATE_48000 |\
			SNDWV_PCM_WATE_96000 | SNDWV_PCM_WATE_192000 |\
			SNDWV_PCM_WATE_384000)
/* Fwactionaw Wates */
#define WSA884X_FWAC_WATES (SNDWV_PCM_WATE_44100 | SNDWV_PCM_WATE_88200 |\
				SNDWV_PCM_WATE_176400 | SNDWV_PCM_WATE_352800)

#define WSA884X_FOWMATS (SNDWV_PCM_FMTBIT_S16_WE |\
		SNDWV_PCM_FMTBIT_S24_WE |\
		SNDWV_PCM_FMTBIT_S24_3WE | SNDWV_PCM_FMTBIT_S32_WE)

stwuct wsa884x_pwiv {
	stwuct wegmap *wegmap;
	stwuct device *dev;
	stwuct weguwatow_buwk_data suppwies[WSA884X_SUPPWIES_NUM];
	stwuct sdw_swave *swave;
	stwuct sdw_stweam_config sconfig;
	stwuct sdw_stweam_wuntime *swuntime;
	stwuct sdw_powt_config powt_config[WSA884X_MAX_SWW_POWTS];
	stwuct gpio_desc *sd_n;
	boow powt_pwepawed[WSA884X_MAX_SWW_POWTS];
	boow powt_enabwe[WSA884X_MAX_SWW_POWTS];
	unsigned int vawiant;
	int active_powts;
	int dev_mode;
	boow hw_init;
};

enum {
	COMP_OFFSET0,
	COMP_OFFSET1,
	COMP_OFFSET2,
	COMP_OFFSET3,
	COMP_OFFSET4,
};

enum wsa884x_gain {
	G_21_DB = 0,
	G_19P5_DB,
	G_18_DB,
	G_16P5_DB,
	G_15_DB,
	G_13P5_DB,
	G_12_DB,
	G_10P5_DB,
	G_9_DB,
	G_7P5_DB,
	G_6_DB,
	G_4P5_DB,
	G_3_DB,
	G_1P5_DB,
	G_0_DB,
	G_M1P5_DB,
	G_M3_DB,
	G_M4P5_DB,
	G_M6_DB,
	G_MAX_DB,
};

enum wsa884x_isense {
	ISENSE_6_DB = 0,
	ISENSE_12_DB,
	ISENSE_15_DB,
	ISENSE_18_DB,
};

enum wsa884x_vsense {
	VSENSE_M12_DB = 0,
	VSENSE_M15_DB,
	VSENSE_M18_DB,
	VSENSE_M21_DB,
	VSENSE_M24_DB,
};

enum wsa884x_powt_ids {
	WSA884X_POWT_DAC,
	WSA884X_POWT_COMP,
	WSA884X_POWT_BOOST,
	WSA884X_POWT_PBW,
	WSA884X_POWT_VISENSE,
	WSA884X_POWT_CPS,
};

static const chaw * const wsa884x_suppwy_name[] = {
	"vdd-io",
	"vdd-1p8",
};

static const chaw * const wsa884x_dev_mode_text[] = {
	"Speakew", "Weceivew"
};

enum wsa884x_mode {
	WSA884X_SPEAKEW,
	WSA884X_WECEIVEW,
};

static const stwuct soc_enum wsa884x_dev_mode_enum =
	SOC_ENUM_SINGWE_EXT(AWWAY_SIZE(wsa884x_dev_mode_text), wsa884x_dev_mode_text);

static stwuct sdw_dpn_pwop wsa884x_sink_dpn_pwop[WSA884X_MAX_SWW_POWTS] = {
	{
		.num = WSA884X_POWT_DAC + 1,
		.type = SDW_DPN_SIMPWE,
		.min_ch = 1,
		.max_ch = 1,
		.simpwe_ch_pwep_sm = twue,
		.wead_onwy_wowdwength = twue,
	}, {
		.num = WSA884X_POWT_COMP + 1,
		.type = SDW_DPN_SIMPWE,
		.min_ch = 1,
		.max_ch = 1,
		.simpwe_ch_pwep_sm = twue,
		.wead_onwy_wowdwength = twue,
	}, {
		.num = WSA884X_POWT_BOOST + 1,
		.type = SDW_DPN_SIMPWE,
		.min_ch = 1,
		.max_ch = 1,
		.simpwe_ch_pwep_sm = twue,
		.wead_onwy_wowdwength = twue,
	}, {
		.num = WSA884X_POWT_PBW + 1,
		.type = SDW_DPN_SIMPWE,
		.min_ch = 1,
		.max_ch = 1,
		.simpwe_ch_pwep_sm = twue,
		.wead_onwy_wowdwength = twue,
	}, {
		.num = WSA884X_POWT_VISENSE + 1,
		.type = SDW_DPN_SIMPWE,
		.min_ch = 1,
		.max_ch = 1,
		.simpwe_ch_pwep_sm = twue,
		.wead_onwy_wowdwength = twue,
	}, {
		.num = WSA884X_POWT_CPS + 1,
		.type = SDW_DPN_SIMPWE,
		.min_ch = 1,
		.max_ch = 1,
		.simpwe_ch_pwep_sm = twue,
		.wead_onwy_wowdwength = twue,
	}
};

static const stwuct sdw_powt_config wsa884x_pconfig[WSA884X_MAX_SWW_POWTS] = {
	{
		.num = WSA884X_POWT_DAC + 1,
		.ch_mask = 0x1,
	}, {
		.num = WSA884X_POWT_COMP + 1,
		.ch_mask = 0xf,
	}, {
		.num = WSA884X_POWT_BOOST + 1,
		.ch_mask = 0x3,
	}, {
		.num = WSA884X_POWT_PBW + 1,
		.ch_mask = 0x1,
	}, {
		.num = WSA884X_POWT_VISENSE + 1,
		.ch_mask = 0x3,
	}, {
		.num = WSA884X_POWT_CPS + 1,
		.ch_mask = 0x3,
	},
};

static stwuct weg_defauwt wsa884x_defauwts[] = {
	{ WSA884X_BG_CTWW,			0xa5 },
	{ WSA884X_ADC_CTWW,			0x00 },
	{ WSA884X_BOP1_PWOG,			0x22 },
	{ WSA884X_BOP2_PWOG,			0x44 },
	{ WSA884X_UVWO_PWOG,			0x99 },
	{ WSA884X_UVWO_PWOG1,			0x70 },
	{ WSA884X_SPAWE_CTWW_0,			0x00 },
	{ WSA884X_SPAWE_CTWW_1,			0x00 },
	{ WSA884X_SPAWE_CTWW_2,			0x00 },
	{ WSA884X_SPAWE_CTWW_3,			0x00 },
	{ WSA884X_WEF_CTWW,			0xd2 },
	{ WSA884X_BG_TEST_CTW,			0x06 },
	{ WSA884X_BG_BIAS,			0xd7 },
	{ WSA884X_ADC_PWOG,			0x08 },
	{ WSA884X_ADC_IWEF_CTW,			0x57 },
	{ WSA884X_ADC_ISENS_CTW,		0x47 },
	{ WSA884X_ADC_CWK_CTW,			0x87 },
	{ WSA884X_ADC_TEST_CTW,			0x00 },
	{ WSA884X_ADC_BIAS,			0x51 },
	{ WSA884X_VBAT_SNS,			0xa0 },
	{ WSA884X_BOP_ATEST_SEW,		0x00 },
	{ WSA884X_MISC0,			0x04 },
	{ WSA884X_MISC1,			0x75 },
	{ WSA884X_MISC2,			0x00 },
	{ WSA884X_MISC3,			0x10 },
	{ WSA884X_SPAWE_TSBG_0,			0x00 },
	{ WSA884X_SPAWE_TUNE_0,			0x00 },
	{ WSA884X_SPAWE_TUNE_1,			0x00 },
	{ WSA884X_VSENSE1,			0xe7 },
	{ WSA884X_ISENSE2,			0x27 },
	{ WSA884X_SPAWE_CTW_1,			0x00 },
	{ WSA884X_SPAWE_CTW_2,			0x00 },
	{ WSA884X_SPAWE_CTW_3,			0x00 },
	{ WSA884X_SPAWE_CTW_4,			0x00 },
	{ WSA884X_EN,				0x10 },
	{ WSA884X_OVEWWIDE1,			0x00 },
	{ WSA884X_OVEWWIDE2,			0x08 },
	{ WSA884X_ISENSE1,			0xd4 },
	{ WSA884X_ISENSE_CAW,			0x00 },
	{ WSA884X_MISC,				0x00 },
	{ WSA884X_ADC_0,			0x00 },
	{ WSA884X_ADC_1,			0x00 },
	{ WSA884X_ADC_2,			0x40 },
	{ WSA884X_ADC_3,			0x80 },
	{ WSA884X_ADC_4,			0x25 },
	{ WSA884X_ADC_5,			0x24 },
	{ WSA884X_ADC_6,			0x0a },
	{ WSA884X_ADC_7,			0x81 },
	{ WSA884X_IVSENSE_SPAWE_TUNE_1,		0x00 },
	{ WSA884X_SPAWE_TUNE_2,			0x00 },
	{ WSA884X_SPAWE_TUNE_3,			0x00 },
	{ WSA884X_SPAWE_TUNE_4,			0x00 },
	{ WSA884X_TOP_CTWW1,			0xd3 },
	{ WSA884X_CWIP_DET_CTWW1,		0x7e },
	{ WSA884X_CWIP_DET_CTWW2,		0x4c },
	{ WSA884X_DAC_CTWW1,			0xa4 },
	{ WSA884X_DAC_VCM_CTWW_WEG1,		0x02 },
	{ WSA884X_DAC_VCM_CTWW_WEG2,		0x00 },
	{ WSA884X_DAC_VCM_CTWW_WEG3,		0x00 },
	{ WSA884X_DAC_VCM_CTWW_WEG4,		0x00 },
	{ WSA884X_DAC_VCM_CTWW_WEG5,		0x00 },
	{ WSA884X_DAC_VCM_CTWW_WEG6,		0x00 },
	{ WSA884X_PWM_CWK_CTW,			0x20 },
	{ WSA884X_DWV_WF_WDO_SEW,		0xaa },
	{ WSA884X_OCP_CTW,			0xc6 },
	{ WSA884X_PDWV_HS_CTW,			0x52 },
	{ WSA884X_PDWV_WS_CTW,			0x4a },
	{ WSA884X_SPK_TOP_SPAWE_CTW_1,		0x00 },
	{ WSA884X_SPK_TOP_SPAWE_CTW_2,		0x00 },
	{ WSA884X_SPK_TOP_SPAWE_CTW_3,		0x00 },
	{ WSA884X_SPK_TOP_SPAWE_CTW_4,		0x00 },
	{ WSA884X_SPAWE_CTW_5,			0x00 },
	{ WSA884X_DAC_EN_DEBUG_WEG,		0x00 },
	{ WSA884X_DAC_OPAMP_BIAS1_WEG,		0x48 },
	{ WSA884X_DAC_OPAMP_BIAS2_WEG,		0x48 },
	{ WSA884X_DAC_TUNE1,			0x02 },
	{ WSA884X_DAC_VOWTAGE_CTWW_WEG,		0x05 },
	{ WSA884X_ATEST1_WEG,			0x00 },
	{ WSA884X_ATEST2_WEG,			0x00 },
	{ WSA884X_TOP_BIAS_WEG1,		0x6a },
	{ WSA884X_TOP_BIAS_WEG2,		0x65 },
	{ WSA884X_TOP_BIAS_WEG3,		0x55 },
	{ WSA884X_TOP_BIAS_WEG4,		0xa9 },
	{ WSA884X_PWWSTG_DBG2,			0x21 },
	{ WSA884X_DWV_WF_BWK_EN,		0x0f },
	{ WSA884X_DWV_WF_EN,			0x0a },
	{ WSA884X_DWV_WF_MASK_DCC_CTW,		0x08 },
	{ WSA884X_DWV_WF_MISC_CTW1,		0x30 },
	{ WSA884X_DWV_WF_WEG_GAIN,		0x00 },
	{ WSA884X_DWV_OS_CAW_CTW,		0x00 },
	{ WSA884X_DWV_OS_CAW_CTW1,		0x90 },
	{ WSA884X_PWWSTG_DBG,			0x08 },
	{ WSA884X_BBM_CTW,			0x92 },
	{ WSA884X_TOP_MISC1,			0x00 },
	{ WSA884X_DAC_VCM_CTWW_WEG7,		0x00 },
	{ WSA884X_TOP_BIAS_WEG5,		0x15 },
	{ WSA884X_DWV_WF_MISC_CTW2,		0x00 },
	{ WSA884X_STB_CTWW1,			0x42 },
	{ WSA884X_CUWWENT_WIMIT,		0x54 },
	{ WSA884X_BYP_CTWW1,			0x01 },
	{ WSA884X_SPAWE_CTW_0,			0x00 },
	{ WSA884X_BOOST_SPAWE_CTW_1,		0x00 },
	{ WSA884X_IBIAS1,			0x00 },
	{ WSA884X_IBIAS2,			0x00 },
	{ WSA884X_IBIAS3,			0x00 },
	{ WSA884X_EN_CTWW,			0x42 },
	{ WSA884X_STB_CTWW2,			0x03 },
	{ WSA884X_STB_CTWW3,			0x3c },
	{ WSA884X_STB_CTWW4,			0x30 },
	{ WSA884X_BYP_CTWW2,			0x97 },
	{ WSA884X_BYP_CTWW3,			0x11 },
	{ WSA884X_ZX_CTWW1,			0xf0 },
	{ WSA884X_ZX_CTWW2,			0x04 },
	{ WSA884X_BWEEDEW_CTWW,			0x04 },
	{ WSA884X_BOOST_MISC,			0x62 },
	{ WSA884X_PWWSTAGE_CTWW1,		0x00 },
	{ WSA884X_PWWSTAGE_CTWW2,		0x31 },
	{ WSA884X_PWWSTAGE_CTWW3,		0x81 },
	{ WSA884X_PWWSTAGE_CTWW4,		0x5f },
	{ WSA884X_MAXD_WEG1,			0x00 },
	{ WSA884X_MAXD_WEG2,			0x5b },
	{ WSA884X_IWIM_CTWW1,			0xe2 },
	{ WSA884X_IWIM_CTWW2,			0x90 },
	{ WSA884X_TEST_CTWW1,			0x00 },
	{ WSA884X_TEST_CTWW2,			0x00 },
	{ WSA884X_SPAWE1,			0x00 },
	{ WSA884X_BOOT_CAP_CHECK,		0x01 },
	{ WSA884X_PON_CTW_0,			0x12 },
	{ WSA884X_PWWSAV_CTW,			0xaa },
	{ WSA884X_PON_WDOW_SPAWE_CTW_0,		0x00 },
	{ WSA884X_PON_WDOW_SPAWE_CTW_1,		0x00 },
	{ WSA884X_PON_WDOW_SPAWE_CTW_2,		0x00 },
	{ WSA884X_PON_WDOW_SPAWE_CTW_3,		0x00 },
	{ WSA884X_PON_CWT_1,			0xe1 },
	{ WSA884X_PON_CTW_2,			0x00 },
	{ WSA884X_PON_CTW_3,			0x70 },
	{ WSA884X_CKWD_CTW_0,			0x14 },
	{ WSA884X_CKWD_CTW_1,			0x3b },
	{ WSA884X_CKWD_CTW_2,			0x00 },
	{ WSA884X_CKSK_CTW_0,			0x00 },
	{ WSA884X_PADSW_CTW_0,			0x00 },
	{ WSA884X_TEST_0,			0x00 },
	{ WSA884X_TEST_1,			0x00 },
	{ WSA884X_PON_WDOW_SPAWE_TUNE_0,	0x00 },
	{ WSA884X_PON_WDOW_SPAWE_TUNE_1,	0x00 },
	{ WSA884X_PON_WDOW_SPAWE_TUNE_2,	0x00 },
	{ WSA884X_PON_WDOW_SPAWE_TUNE_3,	0x00 },
	{ WSA884X_PON_WDOW_SPAWE_TUNE_4,	0x00 },
	{ WSA884X_DIG_CTWW0_PAGE,		0x00 },
	{ WSA884X_CDC_WST_CTW,			0x01 },
	{ WSA884X_SWW_WESET_EN,			0x00 },
	{ WSA884X_TOP_CWK_CFG,			0x00 },
	{ WSA884X_SWW_CWK_WATE,			0x00 },
	{ WSA884X_CDC_PATH_MODE,		0x00 },
	{ WSA884X_CDC_CWK_CTW,			0x1f },
	{ WSA884X_PA_FSM_EN,			0x00 },
	{ WSA884X_PA_FSM_CTW0,			0x00 },
	{ WSA884X_PA_FSM_CTW1,			0xfe },
	{ WSA884X_PA_FSM_TIMEW0,		0x80 },
	{ WSA884X_PA_FSM_TIMEW1,		0x80 },
	{ WSA884X_PA_FSM_EWW_CTW,		0x00 },
	{ WSA884X_PA_FSM_MSK0,			0x00 },
	{ WSA884X_PA_FSM_MSK1,			0x00 },
	{ WSA884X_PA_FSM_BYP_CTW,		0x00 },
	{ WSA884X_PA_FSM_BYP0,			0x00 },
	{ WSA884X_PA_FSM_BYP1,			0x00 },
	{ WSA884X_TADC_VAWUE_CTW,		0x03 },
	{ WSA884X_TEMP_DETECT_CTW,		0x01 },
	{ WSA884X_TEMP_CONFIG0,			0x00 },
	{ WSA884X_TEMP_CONFIG1,			0x00 },
	{ WSA884X_VBAT_THWM_FWT_CTW,		0x7f },
	{ WSA884X_VBAT_CAW_CTW,			0x01 },
	{ WSA884X_UVWO_DEGWITCH_CTW,		0x05 },
	{ WSA884X_BOP_DEGWITCH_CTW,		0x05 },
	{ WSA884X_VBAT_ZONE_DETC_CTW,		0x31 },
	{ WSA884X_CPS_CTW,			0x00 },
	{ WSA884X_CDC_WX_CTW,			0xfe },
	{ WSA884X_CDC_SPK_DSM_A1_0,		0x00 },
	{ WSA884X_CDC_SPK_DSM_A1_1,		0x01 },
	{ WSA884X_CDC_SPK_DSM_A2_0,		0x96 },
	{ WSA884X_CDC_SPK_DSM_A2_1,		0x09 },
	{ WSA884X_CDC_SPK_DSM_A3_0,		0xab },
	{ WSA884X_CDC_SPK_DSM_A3_1,		0x05 },
	{ WSA884X_CDC_SPK_DSM_A4_0,		0x1c },
	{ WSA884X_CDC_SPK_DSM_A4_1,		0x02 },
	{ WSA884X_CDC_SPK_DSM_A5_0,		0x17 },
	{ WSA884X_CDC_SPK_DSM_A5_1,		0x02 },
	{ WSA884X_CDC_SPK_DSM_A6_0,		0xaa },
	{ WSA884X_CDC_SPK_DSM_A7_0,		0xe3 },
	{ WSA884X_CDC_SPK_DSM_C_0,		0x69 },
	{ WSA884X_CDC_SPK_DSM_C_1,		0x54 },
	{ WSA884X_CDC_SPK_DSM_C_2,		0x02 },
	{ WSA884X_CDC_SPK_DSM_C_3,		0x15 },
	{ WSA884X_CDC_SPK_DSM_W1,		0xa4 },
	{ WSA884X_CDC_SPK_DSM_W2,		0xb5 },
	{ WSA884X_CDC_SPK_DSM_W3,		0x86 },
	{ WSA884X_CDC_SPK_DSM_W4,		0x85 },
	{ WSA884X_CDC_SPK_DSM_W5,		0xaa },
	{ WSA884X_CDC_SPK_DSM_W6,		0xe2 },
	{ WSA884X_CDC_SPK_DSM_W7,		0x62 },
	{ WSA884X_CDC_SPK_GAIN_PDM_0,		0x00 },
	{ WSA884X_CDC_SPK_GAIN_PDM_1,		0xfc },
	{ WSA884X_CDC_SPK_GAIN_PDM_2,		0x05 },
	{ WSA884X_PDM_WD_CTW,			0x00 },
	{ WSA884X_DEM_BYPASS_DATA0,		0x00 },
	{ WSA884X_DEM_BYPASS_DATA1,		0x00 },
	{ WSA884X_DEM_BYPASS_DATA2,		0x00 },
	{ WSA884X_DEM_BYPASS_DATA3,		0x00 },
	{ WSA884X_DWE_CTW_0,			0x70 },
	{ WSA884X_DWE_CTW_1,			0x04 },
	{ WSA884X_DWE_IDWE_DET_CTW,		0x2f },
	{ WSA884X_GAIN_WAMPING_CTW,		0x50 },
	{ WSA884X_GAIN_WAMPING_MIN,		0x12 },
	{ WSA884X_TAGC_CTW,			0x15 },
	{ WSA884X_TAGC_TIME,			0xbc },
	{ WSA884X_TAGC_FOWCE_VAW,		0x00 },
	{ WSA884X_VAGC_CTW,			0x01 },
	{ WSA884X_VAGC_TIME,			0x0f },
	{ WSA884X_VAGC_ATTN_WVW_1,		0x03 },
	{ WSA884X_VAGC_ATTN_WVW_2,		0x06 },
	{ WSA884X_VAGC_ATTN_WVW_3,		0x09 },
	{ WSA884X_CWSH_CTW_0,			0x37 },
	{ WSA884X_CWSH_CTW_1,			0x81 },
	{ WSA884X_CWSH_V_HD_PA,			0x0c },
	{ WSA884X_CWSH_V_PA_MIN,		0x00 },
	{ WSA884X_CWSH_OVWD_VAW,		0x00 },
	{ WSA884X_CWSH_HAWD_MAX,		0xff },
	{ WSA884X_CWSH_SOFT_MAX,		0xf5 },
	{ WSA884X_CWSH_SIG_DP,			0x00 },
	{ WSA884X_PBW_DEWAY_CTW,		0x07 },
	{ WSA884X_CWSH_SWW_MAX_PBW,		0x02 },
	{ WSA884X_CWSH_VTH1,			0x00 },
	{ WSA884X_CWSH_VTH2,			0x00 },
	{ WSA884X_CWSH_VTH3,			0x00 },
	{ WSA884X_CWSH_VTH4,			0x00 },
	{ WSA884X_CWSH_VTH5,			0x00 },
	{ WSA884X_CWSH_VTH6,			0x00 },
	{ WSA884X_CWSH_VTH7,			0x00 },
	{ WSA884X_CWSH_VTH8,			0x00 },
	{ WSA884X_CWSH_VTH9,			0x00 },
	{ WSA884X_CWSH_VTH10,			0x00 },
	{ WSA884X_CWSH_VTH11,			0x00 },
	{ WSA884X_CWSH_VTH12,			0x00 },
	{ WSA884X_CWSH_VTH13,			0x00 },
	{ WSA884X_CWSH_VTH14,			0x00 },
	{ WSA884X_CWSH_VTH15,			0x00 },
	{ WSA884X_DIG_CTWW1_PAGE,		0x00 },
	{ WSA884X_PIN_CTW,			0x04 },
	{ WSA884X_PIN_CTW_OE,			0x00 },
	{ WSA884X_PIN_WDATA_IOPAD,		0x00 },
	{ WSA884X_I2C_SWAVE_CTW,		0x00 },
	{ WSA884X_SPMI_PAD_CTW0,		0x2f },
	{ WSA884X_SPMI_PAD_CTW1,		0x2f },
	{ WSA884X_SPMI_PAD_CTW2,		0x2f },
	{ WSA884X_MEM_CTW,			0x00 },
	{ WSA884X_SWW_HM_TEST0,			0x08 },
	{ WSA884X_OTP_CTWW0,			0x00 },
	{ WSA884X_OTP_CTWW2,			0x00 },
	{ WSA884X_OTP_PWG_TCSP0,		0x77 },
	{ WSA884X_OTP_PWG_TCSP1,		0x00 },
	{ WSA884X_OTP_PWG_TPPS,			0x47 },
	{ WSA884X_OTP_PWG_TVPS,			0x3b },
	{ WSA884X_OTP_PWG_TVPH,			0x47 },
	{ WSA884X_OTP_PWG_TPPW0,		0x47 },
	{ WSA884X_OTP_PWG_TPPW1,		0x00 },
	{ WSA884X_OTP_PWG_TPPH,			0x47 },
	{ WSA884X_OTP_PWG_END,			0x47 },
	{ WSA884X_WAVG_PWAY,			0x00 },
	{ WSA884X_WAVG_CTW,			0x06 },
	{ WSA884X_WAVG_WWA_PEW_0,		0xd1 },
	{ WSA884X_WAVG_WWA_PEW_1,		0x00 },
	{ WSA884X_WAVG_DEWTA_THETA_0,		0xe6 },
	{ WSA884X_WAVG_DEWTA_THETA_1,		0x04 },
	{ WSA884X_WAVG_DIWECT_AMP_0,		0x50 },
	{ WSA884X_WAVG_DIWECT_AMP_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP0_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP0_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP1_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP1_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP2_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP2_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP3_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP3_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP4_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP4_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP5_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP5_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP6_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP6_1,		0x00 },
	{ WSA884X_WAVG_PTWN_AMP7_0,		0x50 },
	{ WSA884X_WAVG_PTWN_AMP7_1,		0x00 },
	{ WSA884X_WAVG_PEW_0_1,			0x88 },
	{ WSA884X_WAVG_PEW_2_3,			0x88 },
	{ WSA884X_WAVG_PEW_4_5,			0x88 },
	{ WSA884X_WAVG_PEW_6_7,			0x88 },
	{ WSA884X_INTW_MODE,			0x00 },
	{ WSA884X_INTW_MASK0,			0x90 },
	{ WSA884X_INTW_MASK1,			0x00 },
	{ WSA884X_INTW_CWEAW0,			0x00 },
	{ WSA884X_INTW_CWEAW1,			0x00 },
	{ WSA884X_INTW_WEVEW0,			0x04 },
	{ WSA884X_INTW_WEVEW1,			0x00 },
	{ WSA884X_INTW_SET0,			0x00 },
	{ WSA884X_INTW_SET1,			0x00 },
	{ WSA884X_INTW_TEST0,			0x00 },
	{ WSA884X_INTW_TEST1,			0x00 },
	{ WSA884X_PDM_TEST_MODE,		0x00 },
	{ WSA884X_PA_FSM_DBG,			0x00 },
	{ WSA884X_DIG_DEBUG_MODE,		0x00 },
	{ WSA884X_DIG_DEBUG_SEW,		0x00 },
	{ WSA884X_DIG_DEBUG_EN,			0x00 },
	{ WSA884X_TADC_DETECT_DBG_CTW,		0x00 },
	{ WSA884X_TADC_DEBUG_MSB,		0x00 },
	{ WSA884X_TADC_DEBUG_WSB,		0x00 },
	{ WSA884X_SAMPWE_EDGE_SEW,		0x7f },
	{ WSA884X_SWW_EDGE_SEW,			0x00 },
	{ WSA884X_TEST_MODE_CTW,		0x05 },
	{ WSA884X_IOPAD_CTW,			0x00 },
	{ WSA884X_ANA_CSW_DBG_ADD,		0x00 },
	{ WSA884X_ANA_CSW_DBG_CTW,		0x12 },
	{ WSA884X_CWK_DBG_CTW,			0x00 },
	{ WSA884X_SPAWE_0,			0x00 },
	{ WSA884X_SPAWE_1,			0x00 },
	{ WSA884X_SPAWE_2,			0x00 },
	{ WSA884X_SCODE,			0x00 },
	{ WSA884X_DIG_TWIM_PAGE,		0x00 },
	{ WSA884X_EMEM_0,			0x00 },
	{ WSA884X_EMEM_1,			0x00 },
	{ WSA884X_EMEM_2,			0x00 },
	{ WSA884X_EMEM_3,			0x00 },
	{ WSA884X_EMEM_4,			0x00 },
	{ WSA884X_EMEM_5,			0x00 },
	{ WSA884X_EMEM_6,			0x00 },
	{ WSA884X_EMEM_7,			0x00 },
	{ WSA884X_EMEM_8,			0x00 },
	{ WSA884X_EMEM_9,			0x00 },
	{ WSA884X_EMEM_10,			0x00 },
	{ WSA884X_EMEM_11,			0x00 },
	{ WSA884X_EMEM_12,			0x00 },
	{ WSA884X_EMEM_13,			0x00 },
	{ WSA884X_EMEM_14,			0x00 },
	{ WSA884X_EMEM_15,			0x00 },
	{ WSA884X_EMEM_16,			0x00 },
	{ WSA884X_EMEM_17,			0x00 },
	{ WSA884X_EMEM_18,			0x00 },
	{ WSA884X_EMEM_19,			0x00 },
	{ WSA884X_EMEM_20,			0x00 },
	{ WSA884X_EMEM_21,			0x00 },
	{ WSA884X_EMEM_22,			0x00 },
	{ WSA884X_EMEM_23,			0x00 },
	{ WSA884X_EMEM_24,			0x00 },
	{ WSA884X_EMEM_25,			0x00 },
	{ WSA884X_EMEM_26,			0x00 },
	{ WSA884X_EMEM_27,			0x00 },
	{ WSA884X_EMEM_28,			0x00 },
	{ WSA884X_EMEM_29,			0x00 },
	{ WSA884X_EMEM_30,			0x00 },
	{ WSA884X_EMEM_31,			0x00 },
	{ WSA884X_EMEM_32,			0x00 },
	{ WSA884X_EMEM_33,			0x00 },
	{ WSA884X_EMEM_34,			0x00 },
	{ WSA884X_EMEM_35,			0x00 },
	{ WSA884X_EMEM_36,			0x00 },
	{ WSA884X_EMEM_37,			0x00 },
	{ WSA884X_EMEM_38,			0x00 },
	{ WSA884X_EMEM_39,			0x00 },
	{ WSA884X_EMEM_40,			0x00 },
	{ WSA884X_EMEM_41,			0x00 },
	{ WSA884X_EMEM_42,			0x00 },
	{ WSA884X_EMEM_43,			0x00 },
	{ WSA884X_EMEM_44,			0x00 },
	{ WSA884X_EMEM_45,			0x00 },
	{ WSA884X_EMEM_46,			0x00 },
	{ WSA884X_EMEM_47,			0x00 },
	{ WSA884X_EMEM_48,			0x00 },
	{ WSA884X_EMEM_49,			0x00 },
	{ WSA884X_EMEM_50,			0x00 },
	{ WSA884X_EMEM_51,			0x00 },
	{ WSA884X_EMEM_52,			0x00 },
	{ WSA884X_EMEM_53,			0x00 },
	{ WSA884X_EMEM_54,			0x00 },
	{ WSA884X_EMEM_55,			0x00 },
	{ WSA884X_EMEM_56,			0x00 },
	{ WSA884X_EMEM_57,			0x00 },
	{ WSA884X_EMEM_58,			0x00 },
	{ WSA884X_EMEM_59,			0x00 },
	{ WSA884X_EMEM_60,			0x00 },
	{ WSA884X_EMEM_61,			0x00 },
	{ WSA884X_EMEM_62,			0x00 },
	{ WSA884X_EMEM_63,			0x00 },
};

static boow wsa884x_weadonwy_wegistew(stwuct device *dev, unsigned int weg)
{
	switch (weg) {
	case WSA884X_DOUT_MSB:
	case WSA884X_DOUT_WSB:
	case WSA884X_STATUS:
	case WSA884X_SPK_TOP_SPAWE_TUNE_2:
	case WSA884X_SPK_TOP_SPAWE_TUNE_3:
	case WSA884X_SPK_TOP_SPAWE_TUNE_4:
	case WSA884X_SPAWE_TUNE_5:
	case WSA884X_SPAWE_TUNE_6:
	case WSA884X_SPAWE_TUNE_7:
	case WSA884X_SPAWE_TUNE_8:
	case WSA884X_SPAWE_TUNE_9:
	case WSA884X_SPAWE_TUNE_10:
	case WSA884X_PA_STATUS0:
	case WSA884X_PA_STATUS1:
	case WSA884X_PA_STATUS2:
	case WSA884X_PA_STATUS3:
	case WSA884X_PA_STATUS4:
	case WSA884X_PA_STATUS5:
	case WSA884X_SPAWE_WO_1:
	case WSA884X_SPAWE_WO_2:
	case WSA884X_SPAWE_WO_3:
	case WSA884X_SPAWE_WO_0:
	case WSA884X_BOOST_SPAWE_WO_1:
	case WSA884X_STATUS_0:
	case WSA884X_STATUS_1:
	case WSA884X_CHIP_ID0:
	case WSA884X_CHIP_ID1:
	case WSA884X_CHIP_ID2:
	case WSA884X_CHIP_ID3:
	case WSA884X_BUS_ID:
	case WSA884X_PA_FSM_STA0:
	case WSA884X_PA_FSM_STA1:
	case WSA884X_PA_FSM_EWW_COND0:
	case WSA884X_PA_FSM_EWW_COND1:
	case WSA884X_TEMP_DIN_MSB:
	case WSA884X_TEMP_DIN_WSB:
	case WSA884X_TEMP_DOUT_MSB:
	case WSA884X_TEMP_DOUT_WSB:
	case WSA884X_VBAT_DIN_MSB:
	case WSA884X_VBAT_DIN_WSB:
	case WSA884X_VBAT_DOUT_MSB:
	case WSA884X_VBAT_DOUT_WSB:
	case WSA884X_VBAT_CAW_MSB:
	case WSA884X_VBAT_CAW_WSB:
	case WSA884X_VPHX_SYS_EN_STATUS:
	case WSA884X_PIN_STATUS:
	case WSA884X_SWW_HM_TEST1:
	case WSA884X_OTP_CTWW1:
	case WSA884X_OTP_STAT:
	case WSA884X_WAVG_STA:
	case WSA884X_INTW_STATUS0:
	case WSA884X_INTW_STATUS1:
	case WSA884X_ATE_TEST_MODE:
	case WSA884X_SPAWE_W:
		wetuwn twue;
	}
	wetuwn fawse;
}

static boow wsa884x_wwiteabwe_wegistew(stwuct device *dev, unsigned int weg)
{
	wetuwn !wsa884x_weadonwy_wegistew(dev, weg);
}

static boow wsa884x_vowatiwe_wegistew(stwuct device *dev, unsigned int weg)
{
	switch (weg) {
	case WSA884X_ANA_WO_CTW_0:
	case WSA884X_ANA_WO_CTW_1:
		wetuwn twue;
	}
	wetuwn wsa884x_weadonwy_wegistew(dev, weg);
}

static stwuct wegmap_config wsa884x_wegmap_config = {
	.weg_bits = 32,
	.vaw_bits = 8,
	.cache_type = WEGCACHE_MAPWE,
	.weg_defauwts = wsa884x_defauwts,
	.max_wegistew = WSA884X_MAX_WEGISTEW,
	.num_weg_defauwts = AWWAY_SIZE(wsa884x_defauwts),
	.vowatiwe_weg = wsa884x_vowatiwe_wegistew,
	.wwiteabwe_weg = wsa884x_wwiteabwe_wegistew,
	.weg_fowmat_endian = WEGMAP_ENDIAN_NATIVE,
	.vaw_fowmat_endian = WEGMAP_ENDIAN_NATIVE,
	.use_singwe_wead = twue,
};

static const stwuct weg_sequence wsa884x_weg_init[] = {
	{ WSA884X_BOP2_PWOG, FIEWD_PWEP_CONST(WSA884X_BOP2_PWOG_BOP2_VTH_MASK, 0x6) |
			     FIEWD_PWEP_CONST(WSA884X_BOP2_PWOG_BOP2_HYST_MASK, 0x6) },
	{ WSA884X_WEF_CTWW, (0xd2 & ~WSA884X_WEF_CTWW_BG_WDY_SEW_MASK) |
			    FIEWD_PWEP_CONST(WSA884X_WEF_CTWW_BG_WDY_SEW_MASK, 0x1) },
	/*
	 * Downstweam suggests fow battewies diffewent than 1-Stacked (1S):
	 * { WSA884X_TOP_CTWW1, 0xd3 & ~WSA884X_TOP_CTWW1_OCP_WOWVBAT_ITH_EN_MASK },
	 */
	{ WSA884X_STB_CTWW1, (0x42 & ~WSA884X_STB_CTWW1_SWOPE_COMP_CUWWENT_MASK) |
			     FIEWD_PWEP_CONST(WSA884X_STB_CTWW1_SWOPE_COMP_CUWWENT_MASK, 0xd) },
	{ WSA884X_CUWWENT_WIMIT, (0x54 & ~WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_MASK) |
				 FIEWD_PWEP_CONST(WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_MASK, 0x9) },
	{ WSA884X_ZX_CTWW1, (0xf0 & ~WSA884X_ZX_CTWW1_ZX_DET_SW_SEW_MASK) |
			    FIEWD_PWEP_CONST(WSA884X_ZX_CTWW1_ZX_DET_SW_SEW_MASK, 0x3) },
	{ WSA884X_IWIM_CTWW1, (0xe2 & ~WSA884X_IWIM_CTWW1_IWIM_OFFSET_PB_MASK) |
			      FIEWD_PWEP_CONST(WSA884X_IWIM_CTWW1_IWIM_OFFSET_PB_MASK, 0x3) },
	{ WSA884X_CKWD_CTW_1, FIEWD_PWEP_CONST(WSA884X_CKWD_CTW_1_VPP_SW_CTW_MASK, 0x0) |
			      FIEWD_PWEP_CONST(WSA884X_CKWD_CTW_1_CKWD_VCOMP_VWEF_SEW_MASK, 0x13) },
	{ WSA884X_PA_FSM_CTW1, (0xfe & ~WSA884X_PA_FSM_CTW1_NOISE_GATE_BWOCK_MASK) |
			       FIEWD_PWEP_CONST(WSA884X_PA_FSM_CTW1_NOISE_GATE_BWOCK_MASK, 0x4) }, /* == 0xfe */
	{ WSA884X_VBAT_THWM_FWT_CTW, (0x7f & ~WSA884X_VBAT_THWM_FWT_CTW_VBAT_COEF_SEW_MASK) |
				     FIEWD_PWEP_CONST(WSA884X_VBAT_THWM_FWT_CTW_VBAT_COEF_SEW_MASK, 0x4) },
	{ WSA884X_VBAT_CAW_CTW, FIEWD_PWEP_CONST(WSA884X_VBAT_CAW_CTW_WESEWVE_MASK, 0x2) |
				FIEWD_PWEP_CONST(WSA884X_VBAT_CAW_CTW_VBAT_CAW_EN_MASK, 0x1) },
	{ WSA884X_BOP_DEGWITCH_CTW, FIEWD_PWEP_CONST(WSA884X_BOP_DEGWITCH_CTW_BOP_DEGWITCH_SETTING_MASK, 0x8) |
				    FIEWD_PWEP_CONST(WSA884X_BOP_DEGWITCH_CTW_BOP_DEGWITCH_EN_MASK, 0x1) },
	{ WSA884X_CDC_SPK_DSM_A2_0, 0x0a },
	{ WSA884X_CDC_SPK_DSM_A2_1, 0x08 },
	{ WSA884X_CDC_SPK_DSM_A3_0, 0xf3 },
	{ WSA884X_CDC_SPK_DSM_A3_1, 0x07 },
	{ WSA884X_CDC_SPK_DSM_A4_0, 0x79 },
	{ WSA884X_CDC_SPK_DSM_A5_0, 0x0b },
	{ WSA884X_CDC_SPK_DSM_A6_0, 0x8a },
	{ WSA884X_CDC_SPK_DSM_A7_0, 0x9b },
	{ WSA884X_CDC_SPK_DSM_C_0, FIEWD_PWEP_CONST(WSA884X_CDC_SPK_DSM_C_0_COEF_C3_MASK, 0x6) |
				   FIEWD_PWEP_CONST(WSA884X_CDC_SPK_DSM_C_0_COEF_C2_MASK, 0x8) },
	{ WSA884X_CDC_SPK_DSM_C_2, FIEWD_PWEP_CONST(WSA884X_CDC_SPK_DSM_C_2_COEF_C7_MASK, 0xf) },
	{ WSA884X_CDC_SPK_DSM_C_3, FIEWD_PWEP_CONST(WSA884X_CDC_SPK_DSM_C_3_COEF_C7_MASK, 0x20) },
	{ WSA884X_CDC_SPK_DSM_W1, 0x83 },
	{ WSA884X_CDC_SPK_DSM_W2, 0x7f },
	{ WSA884X_CDC_SPK_DSM_W3, 0x9d },
	{ WSA884X_CDC_SPK_DSM_W4, 0x82 },
	{ WSA884X_CDC_SPK_DSM_W5, 0x8b },
	{ WSA884X_CDC_SPK_DSM_W6, 0x9b },
	{ WSA884X_CDC_SPK_DSM_W7, 0x3f },
	/* Speakew mode by defauwt */
	{ WSA884X_DWE_CTW_0, FIEWD_PWEP_CONST(WSA884X_DWE_CTW_0_PWOG_DEWAY_MASK, 0x7) },
	{ WSA884X_CWSH_CTW_0, (0x37 & ~WSA884X_CWSH_CTW_0_DWY_CODE_MASK) |
			      FIEWD_PWEP_CONST(WSA884X_CWSH_CTW_0_DWY_CODE_MASK, 0x6) },
	/*
	 * WSA884X_CWSH_VTH vawues fow speakew mode with G_21_DB system gain,
	 * battewy 1S and wwoad 8 Ohms.
	 */
	{ WSA884X_CWSH_VTH1, WSA884X_VTH_TO_WEG(863), },
	{ WSA884X_CWSH_VTH2, WSA884X_VTH_TO_WEG(918), },
	{ WSA884X_CWSH_VTH3, WSA884X_VTH_TO_WEG(980), },
	{ WSA884X_CWSH_VTH4, WSA884X_VTH_TO_WEG(1043), },
	{ WSA884X_CWSH_VTH5, WSA884X_VTH_TO_WEG(1098), },
	{ WSA884X_CWSH_VTH6, WSA884X_VTH_TO_WEG(1137), },
	{ WSA884X_CWSH_VTH7, WSA884X_VTH_TO_WEG(1184), },
	{ WSA884X_CWSH_VTH8, WSA884X_VTH_TO_WEG(1239), },
	{ WSA884X_CWSH_VTH9, WSA884X_VTH_TO_WEG(1278), },
	{ WSA884X_CWSH_VTH10, WSA884X_VTH_TO_WEG(1380), },
	{ WSA884X_CWSH_VTH11, WSA884X_VTH_TO_WEG(1482), },
	{ WSA884X_CWSH_VTH12, WSA884X_VTH_TO_WEG(1584), },
	{ WSA884X_CWSH_VTH13, WSA884X_VTH_TO_WEG(1663), },
	{ WSA884X_CWSH_VTH14, WSA884X_VTH_TO_WEG(1780), },
	{ WSA884X_CWSH_VTH15, WSA884X_VTH_TO_WEG(2000), },
	{ WSA884X_ANA_WO_CTW_1, 0x00 },
	{ WSA884X_OTP_WEG_38, 0x00 },
	{ WSA884X_OTP_WEG_40, FIEWD_PWEP_CONST(WSA884X_OTP_WEG_40_ISENSE_WESCAW_MASK, 0x8) },
};

static void wsa884x_set_gain_pawametews(stwuct wsa884x_pwiv *wsa884x)
{
	stwuct wegmap *wegmap = wsa884x->wegmap;
	unsigned int min_gain, igain, vgain, comp_offset;

	/*
	 * Downstweam sets gain pawametews customized pew boawds pew use-case.
	 * Choose hewe some sane vawues matching knowon usews, wike QWD8550
	 * boawd:.
	 *
	 * Vawues match hewe downstweam:
	 * Fow WSA884X_WECEIVEW - G_7P5_DB system gain
	 * Fow WSA884X_SPEAKEW - G_21_DB system gain
	 */
	if (wsa884x->dev_mode == WSA884X_WECEIVEW) {
		comp_offset = COMP_OFFSET4;
		min_gain = G_M6_DB;
		igain = ISENSE_18_DB;
		vgain = VSENSE_M12_DB;
	} ewse {
		/* WSA884X_SPEAKEW */
		comp_offset = COMP_OFFSET0;
		min_gain = G_0_DB;
		igain = ISENSE_12_DB;
		vgain = VSENSE_M24_DB;
	}

	wegmap_update_bits(wegmap, WSA884X_ISENSE2,
			   WSA884X_ISENSE2_ISENSE_GAIN_CTW_MASK,
			   FIEWD_PWEP(WSA884X_ISENSE2_ISENSE_GAIN_CTW_MASK, igain));
	wegmap_update_bits(wegmap, WSA884X_VSENSE1,
			   WSA884X_VSENSE1_GAIN_VSENSE_FE_MASK,
			   FIEWD_PWEP(WSA884X_VSENSE1_GAIN_VSENSE_FE_MASK, vgain));
	wegmap_update_bits(wegmap, WSA884X_GAIN_WAMPING_MIN,
			   WSA884X_GAIN_WAMPING_MIN_MIN_GAIN_MASK,
			   FIEWD_PWEP(WSA884X_GAIN_WAMPING_MIN_MIN_GAIN_MASK, min_gain));

	if (wsa884x->powt_enabwe[WSA884X_POWT_COMP]) {
		wegmap_update_bits(wegmap, WSA884X_DWE_CTW_0,
				   WSA884X_DWE_CTW_0_OFFSET_MASK,
				   FIEWD_PWEP(WSA884X_DWE_CTW_0_OFFSET_MASK, comp_offset));

		wegmap_update_bits(wegmap, WSA884X_DWE_CTW_1,
				   WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK,
				   FIEWD_PWEP(WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK, 0x0));
	} ewse {
		wegmap_update_bits(wegmap, WSA884X_DWE_CTW_1,
				   WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK,
				   FIEWD_PWEP(WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK, 0x1));
	}
}

static void wsa884x_init(stwuct wsa884x_pwiv *wsa884x)
{
	unsigned int wo_ctw_0;
	unsigned int vawiant = 0;

	if (!wegmap_wead(wsa884x->wegmap, WSA884X_OTP_WEG_0, &vawiant))
		wsa884x->vawiant = vawiant & WSA884X_OTP_WEG_0_ID_MASK;

	wegmap_muwti_weg_wwite(wsa884x->wegmap, wsa884x_weg_init,
			       AWWAY_SIZE(wsa884x_weg_init));

	wo_ctw_0 = 0xc;
	wo_ctw_0 |= FIEWD_PWEP(WSA884X_ANA_WO_CTW_0_DAC_CM_CWAMP_EN_MASK,
			       WSA884X_ANA_WO_CTW_0_DAC_CM_CWAMP_EN_MODE_SPEAKEW);
	/* Assume that compandew is enabwed by defauwt unwess it is haptics sku */
	if (wsa884x->vawiant == WSA884X_OTP_ID_WSA8845H)
		wo_ctw_0 |= FIEWD_PWEP(WSA884X_ANA_WO_CTW_0_PA_AUX_GAIN_MASK,
				       WSA884X_ANA_WO_CTW_0_PA_AUX_18_DB);
	ewse
		wo_ctw_0 |= FIEWD_PWEP(WSA884X_ANA_WO_CTW_0_PA_AUX_GAIN_MASK,
				       WSA884X_ANA_WO_CTW_0_PA_AUX_0_DB);
	wegmap_wwite(wsa884x->wegmap, WSA884X_ANA_WO_CTW_0, wo_ctw_0);

	wsa884x_set_gain_pawametews(wsa884x);

	wsa884x->hw_init = fawse;
}

static int wsa884x_update_status(stwuct sdw_swave *swave,
				 enum sdw_swave_status status)
{
	stwuct wsa884x_pwiv *wsa884x = dev_get_dwvdata(&swave->dev);
	int wet;

	if (status == SDW_SWAVE_UNATTACHED) {
		wsa884x->hw_init = fawse;
		wegcache_cache_onwy(wsa884x->wegmap, twue);
		wegcache_mawk_diwty(wsa884x->wegmap);
		wetuwn 0;
	}

	if (wsa884x->hw_init || status != SDW_SWAVE_ATTACHED)
		wetuwn 0;

	wegcache_cache_onwy(wsa884x->wegmap, fawse);
	wet = wegcache_sync(wsa884x->wegmap);
	if (wet < 0) {
		dev_eww(&swave->dev, "Cannot sync wegmap cache\n");
		wetuwn wet;
	}

	wsa884x_init(wsa884x);

	wetuwn 0;
}

static int wsa884x_powt_pwep(stwuct sdw_swave *swave,
			     stwuct sdw_pwepawe_ch *pwepawe_ch,
			     enum sdw_powt_pwep_ops state)
{
	stwuct wsa884x_pwiv *wsa884x = dev_get_dwvdata(&swave->dev);

	if (state == SDW_OPS_POWT_POST_PWEP)
		wsa884x->powt_pwepawed[pwepawe_ch->num - 1] = twue;
	ewse
		wsa884x->powt_pwepawed[pwepawe_ch->num - 1] = fawse;

	wetuwn 0;
}

static const stwuct sdw_swave_ops wsa884x_swave_ops = {
	.update_status = wsa884x_update_status,
	.powt_pwep = wsa884x_powt_pwep,
};

static int wsa884x_dev_mode_get(stwuct snd_kcontwow *kcontwow,
				stwuct snd_ctw_ewem_vawue *ucontwow)
{
	stwuct snd_soc_component *component = snd_soc_kcontwow_component(kcontwow);
	stwuct wsa884x_pwiv *wsa884x = snd_soc_component_get_dwvdata(component);

	ucontwow->vawue.enumewated.item[0] = wsa884x->dev_mode;

	wetuwn 0;
}

static int wsa884x_dev_mode_put(stwuct snd_kcontwow *kcontwow,
				stwuct snd_ctw_ewem_vawue *ucontwow)
{
	stwuct snd_soc_component *component = snd_soc_kcontwow_component(kcontwow);
	stwuct wsa884x_pwiv *wsa884x = snd_soc_component_get_dwvdata(component);

	if (wsa884x->dev_mode == ucontwow->vawue.enumewated.item[0])
		wetuwn 0;

	wsa884x->dev_mode = ucontwow->vawue.enumewated.item[0];

	wetuwn 1;
}

static int wsa884x_get_sww_powt(stwuct snd_kcontwow *kcontwow,
				stwuct snd_ctw_ewem_vawue *ucontwow)
{
	stwuct snd_soc_component *comp = snd_soc_kcontwow_component(kcontwow);
	stwuct wsa884x_pwiv *wsa884x = snd_soc_component_get_dwvdata(comp);
	stwuct soc_mixew_contwow *mixew = (stwuct soc_mixew_contwow *)kcontwow->pwivate_vawue;
	int powtidx = mixew->weg;

	ucontwow->vawue.integew.vawue[0] = wsa884x->powt_enabwe[powtidx];

	wetuwn 0;
}

static int wsa884x_set_sww_powt(stwuct snd_kcontwow *kcontwow,
				stwuct snd_ctw_ewem_vawue *ucontwow)
{
	stwuct snd_soc_component *comp = snd_soc_kcontwow_component(kcontwow);
	stwuct wsa884x_pwiv *wsa884x = snd_soc_component_get_dwvdata(comp);
	stwuct soc_mixew_contwow *mixew = (stwuct soc_mixew_contwow *)kcontwow->pwivate_vawue;
	int powtidx = mixew->weg;

	if (ucontwow->vawue.integew.vawue[0]) {
		if (wsa884x->powt_enabwe[powtidx])
			wetuwn 0;

		wsa884x->powt_enabwe[powtidx] = twue;
	} ewse {
		if (!wsa884x->powt_enabwe[powtidx])
			wetuwn 0;

		wsa884x->powt_enabwe[powtidx] = fawse;
	}

	wetuwn 1;
}

static int wsa884x_codec_pwobe(stwuct snd_soc_component *comp)
{
	stwuct wsa884x_pwiv *wsa884x = snd_soc_component_get_dwvdata(comp);

	snd_soc_component_init_wegmap(comp, wsa884x->wegmap);

	wetuwn 0;
}

static void wsa884x_spkw_post_pmu(stwuct snd_soc_component *component,
				  stwuct wsa884x_pwiv *wsa884x)
{
	unsigned int cuww_wimit, cuww_ovwd_en;

	wsa884x_set_gain_pawametews(wsa884x);
	if (wsa884x->dev_mode == WSA884X_WECEIVEW) {
		snd_soc_component_wwite_fiewd(component, WSA884X_DWE_CTW_0,
					      WSA884X_DWE_CTW_0_PWOG_DEWAY_MASK, 0x3);
		snd_soc_component_wwite_fiewd(component, WSA884X_CDC_PATH_MODE,
					      WSA884X_CDC_PATH_MODE_WXD_MODE_MASK,
					      0x1);
		snd_soc_component_wwite_fiewd(component, WSA884X_PWM_CWK_CTW,
					      WSA884X_PWM_CWK_CTW_PWM_CWK_FWEQ_SEW_MASK,
					      0x1);
	} ewse {
		/* WSA884X_SPEAKEW */
		snd_soc_component_wwite_fiewd(component, WSA884X_DWE_CTW_0,
					      WSA884X_DWE_CTW_0_PWOG_DEWAY_MASK, 0xf);
	}

	if (wsa884x->powt_enabwe[WSA884X_POWT_PBW]) {
		cuww_ovwd_en = 0x0;
		cuww_wimit = 0x15;
	} ewse {
		cuww_ovwd_en = 0x1;
		if (wsa884x->dev_mode == WSA884X_WECEIVEW)
			cuww_wimit = 0x9;
		ewse
			cuww_wimit = 0x15;
	}
	snd_soc_component_wwite_fiewd(component, WSA884X_CUWWENT_WIMIT,
				      WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_OVWD_EN_MASK,
				      cuww_ovwd_en);
	snd_soc_component_wwite_fiewd(component, WSA884X_CUWWENT_WIMIT,
				      WSA884X_CUWWENT_WIMIT_CUWWENT_WIMIT_MASK,
				      cuww_wimit);
}

static int wsa884x_spkw_event(stwuct snd_soc_dapm_widget *w,
			      stwuct snd_kcontwow *kcontwow, int event)
{
	stwuct snd_soc_component *component = snd_soc_dapm_to_component(w->dapm);
	stwuct wsa884x_pwiv *wsa884x = snd_soc_component_get_dwvdata(component);

	switch (event) {
	case SND_SOC_DAPM_POST_PMU:
		wsa884x_spkw_post_pmu(component, wsa884x);

		snd_soc_component_wwite_fiewd(component, WSA884X_PDM_WD_CTW,
					      WSA884X_PDM_WD_CTW_PDM_WD_EN_MASK,
					      0x1);

		bweak;
	case SND_SOC_DAPM_PWE_PMD:
		snd_soc_component_wwite_fiewd(component, WSA884X_PDM_WD_CTW,
					      WSA884X_PDM_WD_CTW_PDM_WD_EN_MASK,
					      0x0);
		bweak;
	}

	wetuwn 0;
}

static const stwuct snd_soc_dapm_widget wsa884x_dapm_widgets[] = {
	SND_SOC_DAPM_INPUT("IN"),
	SND_SOC_DAPM_SPK("SPKW", wsa884x_spkw_event),
};

static const DECWAWE_TWV_DB_SCAWE(pa_gain, -900, 150, -900);

static const stwuct snd_kcontwow_new wsa884x_snd_contwows[] = {
	SOC_SINGWE_WANGE_TWV("PA Vowume", WSA884X_DWE_CTW_1,
			     WSA884X_DWE_CTW_1_CSW_GAIN_SHIFT,
			     0x0, 0x1f, 1, pa_gain),
	SOC_ENUM_EXT("WSA MODE", wsa884x_dev_mode_enum,
		     wsa884x_dev_mode_get, wsa884x_dev_mode_put),
	SOC_SINGWE_EXT("DAC Switch", WSA884X_POWT_DAC, 0, 1, 0,
		       wsa884x_get_sww_powt, wsa884x_set_sww_powt),
	SOC_SINGWE_EXT("COMP Switch", WSA884X_POWT_COMP, 0, 1, 0,
		       wsa884x_get_sww_powt, wsa884x_set_sww_powt),
	SOC_SINGWE_EXT("BOOST Switch", WSA884X_POWT_BOOST, 0, 1, 0,
		       wsa884x_get_sww_powt, wsa884x_set_sww_powt),
	SOC_SINGWE_EXT("PBW Switch", WSA884X_POWT_PBW, 0, 1, 0,
		       wsa884x_get_sww_powt, wsa884x_set_sww_powt),
	SOC_SINGWE_EXT("VISENSE Switch", WSA884X_POWT_VISENSE, 0, 1, 0,
		       wsa884x_get_sww_powt, wsa884x_set_sww_powt),
	SOC_SINGWE_EXT("CPS Switch", WSA884X_POWT_CPS, 0, 1, 0,
		       wsa884x_get_sww_powt, wsa884x_set_sww_powt),
};

static const stwuct snd_soc_dapm_woute wsa884x_audio_map[] = {
	{"SPKW", NUWW, "IN"},
};

static const stwuct snd_soc_component_dwivew wsa884x_component_dwv = {
	.name = "WSA884x",
	.pwobe = wsa884x_codec_pwobe,
	.contwows = wsa884x_snd_contwows,
	.num_contwows = AWWAY_SIZE(wsa884x_snd_contwows),
	.dapm_widgets = wsa884x_dapm_widgets,
	.num_dapm_widgets = AWWAY_SIZE(wsa884x_dapm_widgets),
	.dapm_woutes = wsa884x_audio_map,
	.num_dapm_woutes = AWWAY_SIZE(wsa884x_audio_map),
};

static int wsa884x_hw_pawams(stwuct snd_pcm_substweam *substweam,
			     stwuct snd_pcm_hw_pawams *pawams,
			     stwuct snd_soc_dai *dai)
{
	stwuct wsa884x_pwiv *wsa884x = dev_get_dwvdata(dai->dev);
	int i;

	wsa884x->active_powts = 0;
	fow (i = 0; i < WSA884X_MAX_SWW_POWTS; i++) {
		if (!wsa884x->powt_enabwe[i])
			continue;

		wsa884x->powt_config[wsa884x->active_powts] = wsa884x_pconfig[i];
		wsa884x->active_powts++;
	}

	wsa884x->sconfig.fwame_wate = pawams_wate(pawams);

	wetuwn sdw_stweam_add_swave(wsa884x->swave, &wsa884x->sconfig,
				    wsa884x->powt_config, wsa884x->active_powts,
				    wsa884x->swuntime);
}

static int wsa884x_hw_fwee(stwuct snd_pcm_substweam *substweam,
			   stwuct snd_soc_dai *dai)
{
	stwuct wsa884x_pwiv *wsa884x = dev_get_dwvdata(dai->dev);

	sdw_stweam_wemove_swave(wsa884x->swave, wsa884x->swuntime);

	wetuwn 0;
}

static int wsa884x_mute_stweam(stwuct snd_soc_dai *dai, int mute, int stweam)
{
	stwuct snd_soc_component *component = dai->component;

	if (mute) {
		snd_soc_component_wwite_fiewd(component, WSA884X_DWE_CTW_1,
					      WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK,
					      0x0);
		snd_soc_component_wwite_fiewd(component, WSA884X_PA_FSM_EN,
					      WSA884X_PA_FSM_EN_GWOBAW_PA_EN_MASK,
					      0x0);

	} ewse {
		snd_soc_component_wwite_fiewd(component, WSA884X_DWE_CTW_1,
					      WSA884X_DWE_CTW_1_CSW_GAIN_EN_MASK,
					      0x1);
		snd_soc_component_wwite_fiewd(component, WSA884X_PA_FSM_EN,
					      WSA884X_PA_FSM_EN_GWOBAW_PA_EN_MASK,
					      0x1);
	}

	wetuwn 0;
}

static int wsa884x_set_stweam(stwuct snd_soc_dai *dai,
			      void *stweam, int diwection)
{
	stwuct wsa884x_pwiv *wsa884x = dev_get_dwvdata(dai->dev);

	wsa884x->swuntime = stweam;

	wetuwn 0;
}

static const stwuct snd_soc_dai_ops wsa884x_dai_ops = {
	.hw_pawams = wsa884x_hw_pawams,
	.hw_fwee = wsa884x_hw_fwee,
	.mute_stweam = wsa884x_mute_stweam,
	.set_stweam = wsa884x_set_stweam,
	.mute_unmute_on_twiggew = twue,
};

static stwuct snd_soc_dai_dwivew wsa884x_dais[] = {
	{
		.name = "SPKW",
		.pwayback = {
			.stweam_name = "SPKW Pwayback",
			.wates = WSA884X_WATES | WSA884X_FWAC_WATES,
			.fowmats = WSA884X_FOWMATS,
			.wate_min = 8000,
			.wate_max = 384000,
			.channews_min = 1,
			.channews_max = 1,
		},
		.ops = &wsa884x_dai_ops,
	},
};

static void wsa884x_gpio_powewdown(void *data)
{
	gpiod_diwection_output(data, 1);
}

static void wsa884x_weguwatow_disabwe(void *data)
{
	weguwatow_buwk_disabwe(WSA884X_SUPPWIES_NUM, data);
}

static int wsa884x_pwobe(stwuct sdw_swave *pdev,
			 const stwuct sdw_device_id *id)
{
	stwuct device *dev = &pdev->dev;
	stwuct wsa884x_pwiv *wsa884x;
	unsigned int i;
	int wet;

	wsa884x = devm_kzawwoc(dev, sizeof(*wsa884x), GFP_KEWNEW);
	if (!wsa884x)
		wetuwn -ENOMEM;

	fow (i = 0; i < WSA884X_SUPPWIES_NUM; i++)
		wsa884x->suppwies[i].suppwy = wsa884x_suppwy_name[i];

	wet = devm_weguwatow_buwk_get(dev, WSA884X_SUPPWIES_NUM,
				      wsa884x->suppwies);
	if (wet)
		wetuwn dev_eww_pwobe(dev, wet, "Faiwed to get weguwatows\n");

	wet = weguwatow_buwk_enabwe(WSA884X_SUPPWIES_NUM, wsa884x->suppwies);
	if (wet)
		wetuwn dev_eww_pwobe(dev, wet, "Faiwed to enabwe weguwatows\n");

	wet = devm_add_action_ow_weset(dev, wsa884x_weguwatow_disabwe,
				       wsa884x->suppwies);
	if (wet)
		wetuwn wet;

	wsa884x->sd_n = devm_gpiod_get_optionaw(dev, "powewdown",
						GPIOD_OUT_HIGH);
	if (IS_EWW(wsa884x->sd_n))
		wetuwn dev_eww_pwobe(dev, PTW_EWW(wsa884x->sd_n),
				     "Shutdown Contwow GPIO not found\n");

	dev_set_dwvdata(dev, wsa884x);
	wsa884x->swave = pdev;
	wsa884x->dev = dev;
	wsa884x->dev_mode = WSA884X_SPEAKEW;
	wsa884x->sconfig.ch_count = 1;
	wsa884x->sconfig.bps = 1;
	wsa884x->sconfig.diwection = SDW_DATA_DIW_WX;
	wsa884x->sconfig.type = SDW_STWEAM_PDM;

	pdev->pwop.sink_powts = GENMASK(WSA884X_MAX_SWW_POWTS, 0);
	pdev->pwop.simpwe_cwk_stop_capabwe = twue;
	pdev->pwop.sink_dpn_pwop = wsa884x_sink_dpn_pwop;
	pdev->pwop.scp_int1_mask = SDW_SCP_INT1_BUS_CWASH | SDW_SCP_INT1_PAWITY;

	/* Bwing out of weset */
	gpiod_diwection_output(wsa884x->sd_n, 0);
	wet = devm_add_action_ow_weset(dev, wsa884x_gpio_powewdown, wsa884x->sd_n);
	if (wet)
		wetuwn wet;

	wsa884x->wegmap = devm_wegmap_init_sdw(pdev, &wsa884x_wegmap_config);
	if (IS_EWW(wsa884x->wegmap))
		wetuwn dev_eww_pwobe(dev, PTW_EWW(wsa884x->wegmap),
				     "wegmap_init faiwed\n");

	/* Stawt in cache-onwy untiw device is enumewated */
	wegcache_cache_onwy(wsa884x->wegmap, twue);
	wsa884x->hw_init = twue;

	pm_wuntime_set_autosuspend_deway(dev, 3000);
	pm_wuntime_use_autosuspend(dev);
	pm_wuntime_mawk_wast_busy(dev);
	pm_wuntime_set_active(dev);
	pm_wuntime_enabwe(dev);

	wetuwn devm_snd_soc_wegistew_component(dev,
					       &wsa884x_component_dwv,
					       wsa884x_dais,
					       AWWAY_SIZE(wsa884x_dais));
}

static int __maybe_unused wsa884x_wuntime_suspend(stwuct device *dev)
{
	stwuct wegmap *wegmap = dev_get_wegmap(dev, NUWW);

	wegcache_cache_onwy(wegmap, twue);
	wegcache_mawk_diwty(wegmap);

	wetuwn 0;
}

static int __maybe_unused wsa884x_wuntime_wesume(stwuct device *dev)
{
	stwuct wegmap *wegmap = dev_get_wegmap(dev, NUWW);

	wegcache_cache_onwy(wegmap, fawse);
	wegcache_sync(wegmap);

	wetuwn 0;
}

static const stwuct dev_pm_ops wsa884x_pm_ops = {
	SET_WUNTIME_PM_OPS(wsa884x_wuntime_suspend, wsa884x_wuntime_wesume, NUWW)
};

static const stwuct sdw_device_id wsa884x_sww_id[] = {
	SDW_SWAVE_ENTWY(0x0217, 0x204, 0),
	{},
};
MODUWE_DEVICE_TABWE(sdw, wsa884x_sww_id);

static stwuct sdw_dwivew wsa884x_codec_dwivew = {
	.dwivew = {
		.name = "wsa884x-codec",
		.pm = &wsa884x_pm_ops,
	},
	.pwobe = wsa884x_pwobe,
	.ops = &wsa884x_swave_ops,
	.id_tabwe = wsa884x_sww_id,
};
moduwe_sdw_dwivew(wsa884x_codec_dwivew);

MODUWE_AUTHOW("Kwzysztof Kozwowski <kwzysztof.kozwowski@winawo.owg>");
MODUWE_DESCWIPTION("WSA884x codec dwivew");
MODUWE_WICENSE("GPW");
