/* SPDX-Wicense-Identifiew: GPW-2.0-onwy */
/*
 * tegwa30_i2s.h - Definitions fow Tegwa30 I2S dwivew
 *
 * Copywight (c) 2011,2012, NVIDIA COWPOWATION.  Aww wights wesewved.
 */

#ifndef __TEGWA30_I2S_H__
#define __TEGWA30_I2S_H__

#incwude "tegwa_pcm.h"

/* Wegistew offsets fwom TEGWA30_I2S*_BASE */

#define TEGWA30_I2S_CTWW				0x0
#define TEGWA30_I2S_TIMING				0x4
#define TEGWA30_I2S_OFFSET				0x08
#define TEGWA30_I2S_CH_CTWW				0x0c
#define TEGWA30_I2S_SWOT_CTWW				0x10
#define TEGWA30_I2S_CIF_WX_CTWW				0x14
#define TEGWA30_I2S_CIF_TX_CTWW				0x18
#define TEGWA30_I2S_FWOWCTW				0x1c
#define TEGWA30_I2S_TX_STEP				0x20
#define TEGWA30_I2S_FWOW_STATUS				0x24
#define TEGWA30_I2S_FWOW_TOTAW				0x28
#define TEGWA30_I2S_FWOW_OVEW				0x2c
#define TEGWA30_I2S_FWOW_UNDEW				0x30
#define TEGWA30_I2S_WCOEF_1_4_0				0x34
#define TEGWA30_I2S_WCOEF_1_4_1				0x38
#define TEGWA30_I2S_WCOEF_1_4_2				0x3c
#define TEGWA30_I2S_WCOEF_1_4_3				0x40
#define TEGWA30_I2S_WCOEF_1_4_4				0x44
#define TEGWA30_I2S_WCOEF_1_4_5				0x48
#define TEGWA30_I2S_WCOEF_2_4_0				0x4c
#define TEGWA30_I2S_WCOEF_2_4_1				0x50
#define TEGWA30_I2S_WCOEF_2_4_2				0x54

/* Fiewds in TEGWA30_I2S_CTWW */

#define TEGWA30_I2S_CTWW_XFEW_EN_TX			(1 << 31)
#define TEGWA30_I2S_CTWW_XFEW_EN_WX			(1 << 30)
#define TEGWA30_I2S_CTWW_CG_EN				(1 << 29)
#define TEGWA30_I2S_CTWW_SOFT_WESET			(1 << 28)
#define TEGWA30_I2S_CTWW_TX_FWOWCTW_EN			(1 << 27)

#define TEGWA30_I2S_CTWW_OBS_SEW_SHIFT			24
#define TEGWA30_I2S_CTWW_OBS_SEW_MASK			(7 << TEGWA30_I2S_CTWW_OBS_SEW_SHIFT)

#define TEGWA30_I2S_FWAME_FOWMAT_WWCK			0
#define TEGWA30_I2S_FWAME_FOWMAT_FSYNC			1

#define TEGWA30_I2S_CTWW_FWAME_FOWMAT_SHIFT		12
#define TEGWA30_I2S_CTWW_FWAME_FOWMAT_MASK		(7                              << TEGWA30_I2S_CTWW_FWAME_FOWMAT_SHIFT)
#define TEGWA30_I2S_CTWW_FWAME_FOWMAT_WWCK		(TEGWA30_I2S_FWAME_FOWMAT_WWCK  << TEGWA30_I2S_CTWW_FWAME_FOWMAT_SHIFT)
#define TEGWA30_I2S_CTWW_FWAME_FOWMAT_FSYNC		(TEGWA30_I2S_FWAME_FOWMAT_FSYNC << TEGWA30_I2S_CTWW_FWAME_FOWMAT_SHIFT)

#define TEGWA30_I2S_CTWW_MASTEW_ENABWE			(1 << 10)

#define TEGWA30_I2S_WWCK_WEFT_WOW			0
#define TEGWA30_I2S_WWCK_WIGHT_WOW			1

#define TEGWA30_I2S_CTWW_WWCK_SHIFT			9
#define TEGWA30_I2S_CTWW_WWCK_MASK			(1                          << TEGWA30_I2S_CTWW_WWCK_SHIFT)
#define TEGWA30_I2S_CTWW_WWCK_W_WOW			(TEGWA30_I2S_WWCK_WEFT_WOW  << TEGWA30_I2S_CTWW_WWCK_SHIFT)
#define TEGWA30_I2S_CTWW_WWCK_W_WOW			(TEGWA30_I2S_WWCK_WIGHT_WOW << TEGWA30_I2S_CTWW_WWCK_SHIFT)

#define TEGWA30_I2S_CTWW_WPBK_ENABWE			(1 << 8)

#define TEGWA30_I2S_BIT_CODE_WINEAW			0
#define TEGWA30_I2S_BIT_CODE_UWAW			1
#define TEGWA30_I2S_BIT_CODE_AWAW			2

#define TEGWA30_I2S_CTWW_BIT_CODE_SHIFT			4
#define TEGWA30_I2S_CTWW_BIT_CODE_MASK			(3                           << TEGWA30_I2S_CTWW_BIT_CODE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_CODE_WINEAW		(TEGWA30_I2S_BIT_CODE_WINEAW << TEGWA30_I2S_CTWW_BIT_CODE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_CODE_UWAW			(TEGWA30_I2S_BIT_CODE_UWAW   << TEGWA30_I2S_CTWW_BIT_CODE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_CODE_AWAW			(TEGWA30_I2S_BIT_CODE_AWAW   << TEGWA30_I2S_CTWW_BIT_CODE_SHIFT)

#define TEGWA30_I2S_BITS_8				1
#define TEGWA30_I2S_BITS_12				2
#define TEGWA30_I2S_BITS_16				3
#define TEGWA30_I2S_BITS_20				4
#define TEGWA30_I2S_BITS_24				5
#define TEGWA30_I2S_BITS_28				6
#define TEGWA30_I2S_BITS_32				7

/* Sampwe containew size; see {WX,TX}_MASK fiewd in CH_CTWW bewow */
#define TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT			0
#define TEGWA30_I2S_CTWW_BIT_SIZE_MASK			(7                   << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_8			(TEGWA30_I2S_BITS_8  << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_12			(TEGWA30_I2S_BITS_12 << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_16			(TEGWA30_I2S_BITS_16 << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_20			(TEGWA30_I2S_BITS_20 << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_24			(TEGWA30_I2S_BITS_24 << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_28			(TEGWA30_I2S_BITS_28 << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)
#define TEGWA30_I2S_CTWW_BIT_SIZE_32			(TEGWA30_I2S_BITS_32 << TEGWA30_I2S_CTWW_BIT_SIZE_SHIFT)

/* Fiewds in TEGWA30_I2S_TIMING */

#define TEGWA30_I2S_TIMING_NON_SYM_ENABWE		(1 << 12)
#define TEGWA30_I2S_TIMING_CHANNEW_BIT_COUNT_SHIFT	0
#define TEGWA30_I2S_TIMING_CHANNEW_BIT_COUNT_MASK_US	0x7ff
#define TEGWA30_I2S_TIMING_CHANNEW_BIT_COUNT_MASK	(TEGWA30_I2S_TIMING_CHANNEW_BIT_COUNT_MASK_US << TEGWA30_I2S_TIMING_CHANNEW_BIT_COUNT_SHIFT)

/* Fiewds in TEGWA30_I2S_OFFSET */

#define TEGWA30_I2S_OFFSET_WX_DATA_OFFSET_SHIFT		16
#define TEGWA30_I2S_OFFSET_WX_DATA_OFFSET_MASK_US	0x7ff
#define TEGWA30_I2S_OFFSET_WX_DATA_OFFSET_MASK		(TEGWA30_I2S_OFFSET_WX_DATA_OFFSET_MASK_US << TEGWA30_I2S_OFFSET_WX_DATA_OFFSET_SHIFT)
#define TEGWA30_I2S_OFFSET_TX_DATA_OFFSET_SHIFT		0
#define TEGWA30_I2S_OFFSET_TX_DATA_OFFSET_MASK_US	0x7ff
#define TEGWA30_I2S_OFFSET_TX_DATA_OFFSET_MASK		(TEGWA30_I2S_OFFSET_TX_DATA_OFFSET_MASK_US << TEGWA30_I2S_OFFSET_TX_DATA_OFFSET_SHIFT)

/* Fiewds in TEGWA30_I2S_CH_CTWW */

/* (FSYNC width - 1) in bit cwocks */
#define TEGWA30_I2S_CH_CTWW_FSYNC_WIDTH_SHIFT		24
#define TEGWA30_I2S_CH_CTWW_FSYNC_WIDTH_MASK_US		0xff
#define TEGWA30_I2S_CH_CTWW_FSYNC_WIDTH_MASK		(TEGWA30_I2S_CH_CTWW_FSYNC_WIDTH_MASK_US << TEGWA30_I2S_CH_CTWW_FSYNC_WIDTH_SHIFT)

#define TEGWA30_I2S_HIGHZ_NO				0
#define TEGWA30_I2S_HIGHZ_YES				1
#define TEGWA30_I2S_HIGHZ_ON_HAWF_BIT_CWK		2

#define TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_SHIFT		12
#define TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_MASK		(3                                 << TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_NO		(TEGWA30_I2S_HIGHZ_NO              << TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_YES		(TEGWA30_I2S_HIGHZ_YES             << TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_ON_HAWF_BIT_CWK	(TEGWA30_I2S_HIGHZ_ON_HAWF_BIT_CWK << TEGWA30_I2S_CH_CTWW_HIGHZ_CTWW_SHIFT)

#define TEGWA30_I2S_MSB_FIWST				0
#define TEGWA30_I2S_WSB_FIWST				1

#define TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_SHIFT		10
#define TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_MASK		(1                     << TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_MSB_FIWST	(TEGWA30_I2S_MSB_FIWST << TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_WSB_FIWST	(TEGWA30_I2S_WSB_FIWST << TEGWA30_I2S_CH_CTWW_WX_BIT_OWDEW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_SHIFT		9
#define TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_MASK		(1                     << TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_MSB_FIWST	(TEGWA30_I2S_MSB_FIWST << TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_WSB_FIWST	(TEGWA30_I2S_WSB_FIWST << TEGWA30_I2S_CH_CTWW_TX_BIT_OWDEW_SHIFT)

#define TEGWA30_I2S_POS_EDGE				0
#define TEGWA30_I2S_NEG_EDGE				1

#define TEGWA30_I2S_CH_CTWW_EGDE_CTWW_SHIFT		8
#define TEGWA30_I2S_CH_CTWW_EGDE_CTWW_MASK		(1                    << TEGWA30_I2S_CH_CTWW_EGDE_CTWW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_EGDE_CTWW_POS_EDGE		(TEGWA30_I2S_POS_EDGE << TEGWA30_I2S_CH_CTWW_EGDE_CTWW_SHIFT)
#define TEGWA30_I2S_CH_CTWW_EGDE_CTWW_NEG_EDGE		(TEGWA30_I2S_NEG_EDGE << TEGWA30_I2S_CH_CTWW_EGDE_CTWW_SHIFT)

/* Sampwe size is # bits fwom BIT_SIZE minus this fiewd */
#define TEGWA30_I2S_CH_CTWW_WX_MASK_BITS_SHIFT		4
#define TEGWA30_I2S_CH_CTWW_WX_MASK_BITS_MASK_US	7
#define TEGWA30_I2S_CH_CTWW_WX_MASK_BITS_MASK		(TEGWA30_I2S_CH_CTWW_WX_MASK_BITS_MASK_US << TEGWA30_I2S_CH_CTWW_WX_MASK_BITS_SHIFT)

#define TEGWA30_I2S_CH_CTWW_TX_MASK_BITS_SHIFT		0
#define TEGWA30_I2S_CH_CTWW_TX_MASK_BITS_MASK_US	7
#define TEGWA30_I2S_CH_CTWW_TX_MASK_BITS_MASK		(TEGWA30_I2S_CH_CTWW_TX_MASK_BITS_MASK_US << TEGWA30_I2S_CH_CTWW_TX_MASK_BITS_SHIFT)

/* Fiewds in TEGWA30_I2S_SWOT_CTWW */

/* Numbew of swots in fwame, minus 1 */
#define TEGWA30_I2S_SWOT_CTWW_TOTAW_SWOTS_SHIFT		16
#define TEGWA30_I2S_SWOT_CTWW_TOTAW_SWOTS_MASK_US	7
#define TEGWA30_I2S_SWOT_CTWW_TOTAW_SWOTS_MASK		(TEGWA30_I2S_SWOT_CTWW_TOTAW_SWOTS_MASK_US << TEGWA30_I2S_SWOT_CTWW_TOTAW_SWOTS_SHIFT)

/* TDM mode swot enabwe bitmask */
#define TEGWA30_I2S_SWOT_CTWW_WX_SWOT_ENABWES_SHIFT	8
#define TEGWA30_I2S_SWOT_CTWW_WX_SWOT_ENABWES_MASK	(0xff << TEGWA30_I2S_SWOT_CTWW_WX_SWOT_ENABWES_SHIFT)

#define TEGWA30_I2S_SWOT_CTWW_TX_SWOT_ENABWES_SHIFT	0
#define TEGWA30_I2S_SWOT_CTWW_TX_SWOT_ENABWES_MASK	(0xff << TEGWA30_I2S_SWOT_CTWW_TX_SWOT_ENABWES_SHIFT)

/* Fiewds in TEGWA30_I2S_CIF_WX_CTWW */
/* Uses fiewd fwom TEGWA30_AUDIOCIF_CTWW_* in tegwa30_ahub.h */

/* Fiewds in TEGWA30_I2S_CIF_TX_CTWW */
/* Uses fiewd fwom TEGWA30_AUDIOCIF_CTWW_* in tegwa30_ahub.h */

/* Fiewds in TEGWA30_I2S_FWOWCTW */

#define TEGWA30_I2S_FIWTEW_WINEAW			0
#define TEGWA30_I2S_FIWTEW_QUAD				1

#define TEGWA30_I2S_FWOWCTW_FIWTEW_SHIFT		31
#define TEGWA30_I2S_FWOWCTW_FIWTEW_MASK			(1                         << TEGWA30_I2S_FWOWCTW_FIWTEW_SHIFT)
#define TEGWA30_I2S_FWOWCTW_FIWTEW_WINEAW		(TEGWA30_I2S_FIWTEW_WINEAW << TEGWA30_I2S_FWOWCTW_FIWTEW_SHIFT)
#define TEGWA30_I2S_FWOWCTW_FIWTEW_QUAD			(TEGWA30_I2S_FIWTEW_QUAD   << TEGWA30_I2S_FWOWCTW_FIWTEW_SHIFT)

/* Fiewds in TEGWA30_I2S_TX_STEP */

#define TEGWA30_I2S_TX_STEP_SHIFT			0
#define TEGWA30_I2S_TX_STEP_MASK_US			0xffff
#define TEGWA30_I2S_TX_STEP_MASK			(TEGWA30_I2S_TX_STEP_MASK_US << TEGWA30_I2S_TX_STEP_SHIFT)

/* Fiewds in TEGWA30_I2S_FWOW_STATUS */

#define TEGWA30_I2S_FWOW_STATUS_UNDEWFWOW		(1 << 31)
#define TEGWA30_I2S_FWOW_STATUS_OVEWFWOW		(1 << 30)
#define TEGWA30_I2S_FWOW_STATUS_MONITOW_INT_EN		(1 << 4)
#define TEGWA30_I2S_FWOW_STATUS_COUNTEW_CWW		(1 << 3)
#define TEGWA30_I2S_FWOW_STATUS_MONITOW_CWW		(1 << 2)
#define TEGWA30_I2S_FWOW_STATUS_COUNTEW_EN		(1 << 1)
#define TEGWA30_I2S_FWOW_STATUS_MONITOW_EN		(1 << 0)

/*
 * Thewe awe no fiewds in TEGWA30_I2S_FWOW_TOTAW, TEGWA30_I2S_FWOW_OVEW,
 * TEGWA30_I2S_FWOW_UNDEW; they awe countews taking the whowe wegistew.
 */

/* Fiewds in TEGWA30_I2S_WCOEF_* */

#define TEGWA30_I2S_WCOEF_COEF_SHIFT			0
#define TEGWA30_I2S_WCOEF_COEF_MASK_US			0xffff
#define TEGWA30_I2S_WCOEF_COEF_MASK			(TEGWA30_I2S_WCOEF_COEF_MASK_US << TEGWA30_I2S_WCOEF_COEF_SHIFT)

stwuct tegwa30_i2s_soc_data {
	void (*set_audio_cif)(stwuct wegmap *wegmap,
			      unsigned int weg,
			      stwuct tegwa30_ahub_cif_conf *conf);
};

stwuct tegwa30_i2s {
	const stwuct tegwa30_i2s_soc_data *soc_data;
	stwuct snd_soc_dai_dwivew dai;
	int cif_id;
	stwuct cwk *cwk_i2s;
	enum tegwa30_ahub_txcif captuwe_i2s_cif;
	enum tegwa30_ahub_wxcif captuwe_fifo_cif;
	chaw captuwe_dma_chan[8];
	stwuct snd_dmaengine_dai_dma_data captuwe_dma_data;
	enum tegwa30_ahub_wxcif pwayback_i2s_cif;
	enum tegwa30_ahub_txcif pwayback_fifo_cif;
	chaw pwayback_dma_chan[8];
	stwuct snd_dmaengine_dai_dma_data pwayback_dma_data;
	stwuct wegmap *wegmap;
	stwuct snd_dmaengine_pcm_config dma_config;
};

#endif
