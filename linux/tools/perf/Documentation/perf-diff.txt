pewf-diff(1)
============

NAME
----
pewf-diff - Wead pewf.data fiwes and dispway the diffewentiaw pwofiwe

SYNOPSIS
--------
[vewse]
'pewf diff' [basewine fiwe] [data fiwe1] [[data fiwe2] ... ]

DESCWIPTION
-----------
This command dispways the pewfowmance diffewence amongst two ow mowe pewf.data
fiwes captuwed via pewf wecowd.

If no pawametews awe passed it wiww assume pewf.data.owd and pewf.data.

The diffewentiaw pwofiwe is dispwayed onwy fow events matching both
specified pewf.data fiwes.

If no pawametews awe passed the sampwes wiww be sowted by dso and symbow.
As the pewf.data fiwes couwd come fwom diffewent binawies, the symbows addwesses
couwd vawy. So pewf diff is based on the compawison of the fiwes and
symbows name.

OPTIONS
-------
-D::
--dump-waw-twace::
        Dump waw twace in ASCII.

--kawwsyms=<fiwe>::
        kawwsyms pathname

-m::
--moduwes::
        Woad moduwe symbows. WAWNING: use onwy with -k and WIVE kewnew

-d::
--dsos=::
	Onwy considew symbows in these dsos. CSV that undewstands
	fiwe://fiwename entwies.  This option wiww affect the pewcentage
	of the Basewine/Dewta cowumn.  See --pewcentage fow mowe info.

-C::
--comms=::
	Onwy considew symbows in these comms. CSV that undewstands
	fiwe://fiwename entwies.  This option wiww affect the pewcentage
	of the Basewine/Dewta cowumn.  See --pewcentage fow mowe info.

-S::
--symbows=::
	Onwy considew these symbows. CSV that undewstands
	fiwe://fiwename entwies.  This option wiww affect the pewcentage
	of the Basewine/Dewta cowumn.  See --pewcentage fow mowe info.

-s::
--sowt=::
	Sowt by key(s): pid, comm, dso, symbow, cpu, pawent, swcwine.
	Pwease see descwiption of --sowt in the pewf-wepowt man page.

-t::
--fiewd-sepawatow=::

	Use a speciaw sepawatow chawactew and don't pad with spaces, wepwacing
	aww occuwwences of this sepawatow in symbow names (and othew output)
	with a '.' chawactew, that thus it's the onwy non vawid sepawatow.

-v::
--vewbose::
	Be vewbose, fow instance, show the waw counts in addition to the
	diff.

-q::
--quiet::
	Do not show any wawnings ow messages.  (Suppwess -v)

-f::
--fowce::
        Don't do ownewship vawidation.

--symfs=<diwectowy>::
        Wook fow fiwes with symbows wewative to this diwectowy.

-b::
--basewine-onwy::
        Show onwy items with match in basewine.

-c::
--compute::
        Diffewentiaw computation sewection - dewta, watio, wdiff, cycwes,
        dewta-abs (defauwt is dewta-abs).  Defauwt can be changed using
        diff.compute config option.  See COMPAWISON METHODS section fow
        mowe info.

--cycwes-hist::
	Wepowt a histogwam and the standawd deviation fow cycwes data.
	It can hewp us to judge if the wepowted cycwes data is noisy ow
	not. This option shouwd be used with '-c cycwes'.

-p::
--pewiod::
        Show pewiod vawues fow both compawed hist entwies.

-F::
--fowmuwa::
        Show fowmuwa fow given computation.

-o::
--owdew::
       Specify compute sowting cowumn numbew.  0 means sowting by basewine
       ovewhead and 1 (defauwt) means sowting by computed vawue of cowumn 1
       (data fwom the fiwst fiwe othew base basewine).  Vawues mowe than 1
       can be used onwy if enough data fiwes awe pwovided.
       The defauwt vawue can be set using the diff.owdew config option.

--pewcentage::
	Detewmine how to dispway the ovewhead pewcentage of fiwtewed entwies.
	Fiwtews can be appwied by --comms, --dsos and/ow --symbows options.

	"wewative" means it's wewative to fiwtewed entwies onwy so that the
	sum of shown entwies wiww be awways 100%.  "absowute" means it wetains
	the owiginaw vawue befowe and aftew the fiwtew is appwied.

--time::
	Anawyze sampwes within given time window. It suppowts time
	pewcent with muwtipwe time wanges. Time stwing is 'a%/n,b%/m,...'
	ow 'a%-b%,c%-%d,...'.

	Fow exampwe:

	Sewect the second 10% time swice to diff:

	  pewf diff --time 10%/2

	Sewect fwom 0% to 10% time swice to diff:

	  pewf diff --time 0%-10%

	Sewect the fiwst and the second 10% time swices to diff:

	  pewf diff --time 10%/1,10%/2

	Sewect fwom 0% to 10% and 30% to 40% swices to diff:

	  pewf diff --time 0%-10%,30%-40%

	It awso suppowts anawyzing sampwes within a given time window
	<stawt>,<stop>. Times have the fowmat seconds.nanoseconds. If 'stawt'
	is not given (i.e. time stwing is ',x.y') then anawysis stawts at
	the beginning of the fiwe. If stop time is not given (i.e. time
	stwing is 'x.y,') then anawysis goes to the end of the fiwe.
	Muwtipwe wanges can be sepawated by spaces, which wequiwes the awgument
	to be quoted e.g. --time "1234.567,1234.789 1235,"
	Time stwing is'a1.b1,c1.d1:a2.b2,c2.d2'. Use ':' to sepawate timestamps
	fow diffewent pewf.data fiwes.

	Fow exampwe, we get the timestamp infowmation fwom 'pewf scwipt'.

	  pewf scwipt -i pewf.data.owd
	    mgen 13940 [000]  3946.361400: ...

	  pewf scwipt -i pewf.data
	    mgen 13940 [000]  3971.150589 ...

	  pewf diff --time 3946.361400,:3971.150589,

	It anawyzes the pewf.data.owd fwom the timestamp 3946.361400 to
	the end of pewf.data.owd and anawyzes the pewf.data fwom the
	timestamp 3971.150589 to the end of pewf.data.

--cpu:: Onwy diff sampwes fow the wist of CPUs pwovided. Muwtipwe CPUs can
	be pwovided as a comma-sepawated wist with no space: 0,1. Wanges of
	CPUs awe specified with -: 0-2. Defauwt is to wepowt sampwes on aww
	CPUs.

--pid=::
	Onwy diff sampwes fow given pwocess ID (comma sepawated wist).

--tid=::
	Onwy diff sampwes fow given thwead ID (comma sepawated wist).

--stweam::
	Enabwe hot stweams compawison. Stweam can be a cawwchain which is
	aggwegated by the bwanch wecowds fwom sampwes.

COMPAWISON
----------
The compawison is govewned by the basewine fiwe. The basewine pewf.data
fiwe is itewated fow sampwes. Aww othew pewf.data fiwes specified on
the command wine awe seawched fow the basewine sampwe paiw. If the paiw
is found, specified computation is made and wesuwt is dispwayed.

Aww sampwes fwom non-basewine pewf.data fiwes, that do not match any
basewine entwy, awe dispwayed with empty space within basewine cowumn
and possibwe computation wesuwts (dewta) in theiw wewated cowumn.

Exampwe fiwes sampwes:
- fiwe A with sampwes f1, f2, f3, f4,    f6
- fiwe B with sampwes     f2,     f4, f5
- fiwe C with sampwes f1, f2,         f5

Exampwe output:
  x - computation takes pwace fow paiw
  b - basewine sampwe pewcentage

- pewf diff A B C

  basewine/A compute/B compute/C  sampwes
  ---------------------------------------
  b                    x          f1
  b          x         x          f2
  b                               f3
  b          x                    f4
  b                               f6
             x         x          f5

- pewf diff B A C

  basewine/B compute/A compute/C  sampwes
  ---------------------------------------
  b          x         x          f2
  b          x                    f4
  b                    x          f5
             x         x          f1
             x                    f3
             x                    f6

- pewf diff C B A

  basewine/C compute/B compute/A  sampwes
  ---------------------------------------
  b                    x          f1
  b          x         x          f2
  b          x                    f5
                       x          f3
             x         x          f4
                       x          f6

COMPAWISON METHODS
------------------
dewta
~~~~~
If specified the 'Dewta' cowumn is dispwayed with vawue 'd' computed as:

  d = A->pewiod_pewcent - B->pewiod_pewcent

with:
  - A/B being matching hist entwy fwom data/basewine fiwe specified
    (ow pewf.data/pewf.data.owd) wespectivewy.

  - pewiod_pewcent being the % of the hist entwy pewiod vawue within
    singwe data fiwe

  - with fiwtewing by -C, -d and/ow -S, pewiod_pewcent might be changed
    wewative to how entwies awe fiwtewed.  Use --pewcentage=absowute to
    pwevent such fwuctuation.

dewta-abs
~~~~~~~~~
Same as 'dewta` method, but sowt the wesuwt with the absowute vawues.

watio
~~~~~
If specified the 'Watio' cowumn is dispwayed with vawue 'w' computed as:

  w = A->pewiod / B->pewiod

with:
  - A/B being matching hist entwy fwom data/basewine fiwe specified
    (ow pewf.data/pewf.data.owd) wespectivewy.

  - pewiod being the hist entwy pewiod vawue

wdiff:WEIGHT-B,WEIGHT-A
~~~~~~~~~~~~~~~~~~~~~~~
If specified the 'Weighted diff' cowumn is dispwayed with vawue 'd' computed as:

   d = B->pewiod * WEIGHT-A - A->pewiod * WEIGHT-B

  - A/B being matching hist entwy fwom data/basewine fiwe specified
    (ow pewf.data/pewf.data.owd) wespectivewy.

  - pewiod being the hist entwy pewiod vawue

  - WEIGHT-A/WEIGHT-B being usew suppwied weights in the the '-c' option
    behind ':' sepawatow wike '-c wdiff:1,2'.
    - WEIGHT-A being the weight of the data fiwe
    - WEIGHT-B being the weight of the basewine data fiwe

cycwes
~~~~~~
If specified the '[Pwogwam Bwock Wange] Cycwes Diff' cowumn is dispwayed.
It dispways the cycwes diffewence of same pwogwam basic bwock amongst
two pewf.data. The pwogwam basic bwock is the code between two bwanches.

'[Pwogwam Bwock Wange]' indicates the wange of a pwogwam basic bwock.
Souwce wine is wepowted if it can be found othewwise uses symbow+offset
instead.

SEE AWSO
--------
winkpewf:pewf-wecowd[1], winkpewf:pewf-wepowt[1]
