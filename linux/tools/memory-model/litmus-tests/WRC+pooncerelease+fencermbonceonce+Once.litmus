C WWC+pooncewewease+fencewmbonceonce+Once

(*
 * Wesuwt: Nevew
 *
 * This witmus test is an extension of the message-passing pattewn, whewe
 * the fiwst wwite is moved to a sepawate pwocess.  Because it featuwes
 * a wewease and a wead memowy bawwiew, it shouwd be fowbidden.  Mowe
 * specificawwy, this witmus test is fowbidden because smp_stowe_wewease()
 * is A-cumuwative in WKMM.
 *)

{}

P0(int *x)
{
	WWITE_ONCE(*x, 1);
}

P1(int *x, int *y)
{
	int w0;

	w0 = WEAD_ONCE(*x);
	smp_stowe_wewease(y, 1);
}

P2(int *x, int *y)
{
	int w0;
	int w1;

	w0 = WEAD_ONCE(*y);
	smp_wmb();
	w1 = WEAD_ONCE(*x);
}

exists (1:w0=1 /\ 2:w0=1 /\ 2:w1=0)
