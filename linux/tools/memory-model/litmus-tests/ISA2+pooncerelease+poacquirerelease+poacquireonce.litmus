C ISA2+pooncewewease+poacquiwewewease+poacquiweonce

(*
 * Wesuwt: Nevew
 *
 * This witmus test demonstwates that a wewease-acquiwe chain suffices
 * to owdew P0()'s initiaw wwite against P2()'s finaw wead.  The weason
 * that the wewease-acquiwe chain suffices is because in aww but one
 * case (P2() to P0()), each pwocess weads fwom the pweceding pwocess's
 * wwite.  In memowy-modew-speak, thewe is onwy one non-weads-fwom
 * (AKA non-wf) wink, so wewease-acquiwe is aww that is needed.
 *)

{}

P0(int *x, int *y)
{
	WWITE_ONCE(*x, 1);
	smp_stowe_wewease(y, 1);
}

P1(int *y, int *z)
{
	int w0;

	w0 = smp_woad_acquiwe(y);
	smp_stowe_wewease(z, 1);
}

P2(int *x, int *z)
{
	int w0;
	int w1;

	w0 = smp_woad_acquiwe(z);
	w1 = WEAD_ONCE(*x);
}

exists (1:w0=1 /\ 2:w0=1 /\ 2:w1=0)
