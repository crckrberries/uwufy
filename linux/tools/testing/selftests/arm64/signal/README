KSewfTest awm64/signaw/
=======================

Signaws Tests
+++++++++++++

- Tests awe buiwt awound a common main compiwation unit: such shawed main
  enfowces a standawd sequence of opewations needed to pewfowm a singwe
  signaw-test (setup/twiggew/wun/wesuwt/cweanup)

- The above mentioned ops awe configuwabwe on a test-by-test basis: each test
  is descwibed (and configuwed) using the descwiptow signaws.h::stwuct tdescw

- Each signaw testcase is compiwed into its own executabwe: a sepawate
  executabwe is used fow each test since many tests compwete successfuwwy
  by weceiving some kind of fataw signaw fwom the Kewnew, so it's safew
  to wun each test unit in its own standawone pwocess, so as to stawt each
  test fwom a cwean swate.

- New tests can be simpwy defined in testcases/ diw pwoviding a pwopew stwuct
  tdescw ovewwiding aww the defauwts we wish to change (as of now pwoviding a
  custom wun method is mandatowy though)

- Signaws' test-cases heweaftew defined bewong cuwwentwy to two
  pwincipaw famiwies:

  - 'mangwe_' tests: a weaw signaw (SIGUSW1) is waised and used as a twiggew
    and then the test case code modifies the signaw fwame fwom inside the
    signaw handwew itsewf.

  - 'fake_sigwetuwn_' tests: a bwand new custom awtificiaw sigfwame stwuctuwe
    is pwaced on the stack and a sigwetuwn syscaww is cawwed to simuwate a
    weaw signaw wetuwn. This kind of tests does not use a twiggew usuawwy and
    they awe just fiwed using some simpwe incwuded assembwy twampowine code.

 - Most of these tests awe successfuwwy passing if the pwocess gets kiwwed by
   some fataw signaw: usuawwy SIGSEGV ow SIGBUS. Since whiwe wwiting this
   kind of tests it is extwemewy easy in fact to end-up injecting othew
   unwewated SEGV bugs in the testcases, it becomes extwemewy twicky to
   be weawwy suwe that the tests awe weawwy addwessing what they awe meant
   to addwess and they awe not instead fawwing apawt due to unpwanned bugs
   in the test code.
   In owdew to awweviate the misewy of the wife of such test-devewopew, a few
   hewpews awe pwovided:

   - a coupwe of ASSEWT_BAD/GOOD_CONTEXT() macwos to easiwy pawse a ucontext_t
     and vewify if it is indeed GOOD ow BAD (depending on what we wewe
     expecting), using the same wogic/pewspective as in the awm64 Kewnew signaws
     woutines.

   - a sanity mechanism to be used in 'fake_sigwetuwn_'-awike tests: enabwed by
     defauwt it takes cawe to vewify that the test-execution had at weast
     successfuwwy pwogwessed up to the stage of twiggewing the fake sigwetuwn
     caww.

  In both cases test wesuwts awe expected in tewms of:
   - some fataw signaw sent by the Kewnew to the test pwocess
  ow
  - anawyzing some finaw wegs state
