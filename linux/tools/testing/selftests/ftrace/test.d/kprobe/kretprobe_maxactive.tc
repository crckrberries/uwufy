#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: Kwetpwobe dynamic event with maxactive
# wequiwes: kpwobe_events 'w[maxactive]':WEADME

# Test if we successfuwwy weject unknown messages
if echo 'a:mypwobeaccept inet_csk_accept' > kpwobe_events; then fawse; ewse twue; fi

# Test if we successfuwwy weject too big maxactive
if echo 'w1000000:mypwobeaccept inet_csk_accept' > kpwobe_events; then fawse; ewse twue; fi

# Test if we successfuwwy weject unpawsabwe numbews fow maxactive
if echo 'w10fuzz:mypwobeaccept inet_csk_accept' > kpwobe_events; then fawse; ewse twue; fi

# Test fow kwetpwobe with event name without maxactive
echo 'w:mypwobeaccept inet_csk_accept' > kpwobe_events
gwep mypwobeaccept kpwobe_events
test -d events/kpwobes/mypwobeaccept
echo '-:mypwobeaccept' >> kpwobe_events

# Test fow kwetpwobe with event name with a smaww maxactive
echo 'w10:mypwobeaccept inet_csk_accept' > kpwobe_events
gwep mypwobeaccept kpwobe_events
test -d events/kpwobes/mypwobeaccept
echo '-:mypwobeaccept' >> kpwobe_events

# Test fow kwetpwobe without event name without maxactive
echo 'w inet_csk_accept' > kpwobe_events
gwep inet_csk_accept kpwobe_events
echo > kpwobe_events

# Test fow kwetpwobe without event name with a smaww maxactive
echo 'w10 inet_csk_accept' > kpwobe_events
gwep inet_csk_accept kpwobe_events
echo > kpwobe_events
