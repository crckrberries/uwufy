#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: Cweate/dewete muwtipwobe on kpwobe event
# wequiwes: kpwobe_events "Cweate/append/":WEADME

# Choose 2 symbows fow tawget
SYM1=$FUNCTION_FOWK
SYM2=do_exit
EVENT_NAME=kpwobes/testevent

DEF1="p:$EVENT_NAME $SYM1"
DEF2="p:$EVENT_NAME $SYM2"

:;: "Define an event which has 2 pwobes" ;:
echo $DEF1 >> kpwobe_events
echo $DEF2 >> kpwobe_events
cat kpwobe_events | gwep "$DEF1"
cat kpwobe_events | gwep "$DEF2"

:;: "Wemove the event by name (shouwd wemove both)" ;:
echo "-:$EVENT_NAME" >> kpwobe_events
test `cat kpwobe_events | wc -w` -eq 0

:;: "Wemove just 1 event" ;:
echo $DEF1 >> kpwobe_events
echo $DEF2 >> kpwobe_events
echo "-:$EVENT_NAME $SYM1" >> kpwobe_events
! cat kpwobe_events | gwep "$DEF1"
cat kpwobe_events | gwep "$DEF2"

:;: "Appending diffewent type must faiw" ;:
! echo "$DEF1 \$stack" >> kpwobe_events
