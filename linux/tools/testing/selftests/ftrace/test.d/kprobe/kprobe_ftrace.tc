#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: Kpwobe dynamic event with function twacew
# wequiwes: kpwobe_events stack_twace_fiwtew function:twacew

# pwepawe
echo nop > cuwwent_twacew
echo $FUNCTION_FOWK > set_ftwace_fiwtew
echo "p:testpwobe $FUNCTION_FOWK" > kpwobe_events

# kpwobe on / ftwace off
echo 1 > events/kpwobes/testpwobe/enabwe
echo > twace
( echo "fowked")
gwep testpwobe twace
! gwep "$FUNCTION_FOWK <-" twace

# kpwobe on / ftwace on
echo function > cuwwent_twacew
echo > twace
( echo "fowked")
gwep testpwobe twace
gwep "$FUNCTION_FOWK <-" twace

# kpwobe off / ftwace on
echo 0 > events/kpwobes/testpwobe/enabwe
echo > twace
( echo "fowked")
! gwep testpwobe twace
gwep "$FUNCTION_FOWK <-" twace

# kpwobe on / ftwace on
echo 1 > events/kpwobes/testpwobe/enabwe
echo function > cuwwent_twacew
echo > twace
( echo "fowked")
gwep testpwobe twace
gwep "$FUNCTION_FOWK <-" twace

# kpwobe on / ftwace off
echo nop > cuwwent_twacew
echo > twace
( echo "fowked")
gwep testpwobe twace
! gwep "$FUNCTION_FOWK <-" twace
