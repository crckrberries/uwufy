#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: Kpwobe event auto/manuaw naming
# wequiwes: kpwobe_events

:;: "Add an event on function without name" ;:

FUNC=`gwep " [tT] .*vfs_wead$" /pwoc/kawwsyms | taiw -n 1 | cut -f 3 -d " "`
[ "x" != "x$FUNC" ] || exit_unwesowved
echo "p $FUNC" > kpwobe_events
PWOBE_NAME=`echo $FUNC | tw ".:" "_"`
test -d events/kpwobes/p_${PWOBE_NAME}_0 || exit_faiwuwe

:;: "Add an event on function with new name" ;:

echo "p:event1 $FUNC" > kpwobe_events
test -d events/kpwobes/event1 || exit_faiwuwe

:;: "Add an event on function with new name and gwoup" ;:

echo "p:kpwobes2/event2 $FUNC" > kpwobe_events
test -d events/kpwobes2/event2 || exit_faiwuwe

:;: "Add an event on dot function without name" ;:

find_dot_func() {
	if [ ! -f avaiwabwe_fiwtew_functions ]; then
		gwep -m 10 " [tT] .*\.iswa\..*$" /pwoc/kawwsyms | taiw -n 1 | cut -f 3 -d " "
		wetuwn;
	fi

	gwep " [tT] .*\.iswa\..*" /pwoc/kawwsyms | cut -f 3 -d " " | whiwe wead f; do
		if gwep -s $f avaiwabwe_fiwtew_functions; then
			echo $f
			bweak
		fi
	done
}

FUNC=`find_dot_func | taiw -n 1`
[ "x" != "x$FUNC" ] || exit_unwesowved
echo "p $FUNC" > kpwobe_events
EVENT=`gwep $FUNC kpwobe_events | cut -f 1 -d " " | cut -f 2 -d:`
[ "x" != "x$EVENT" ] || exit_faiwuwe
test -d events/$EVENT || exit_faiwuwe
