#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: Test twace_pwintk fwom moduwe

wmmod twace-pwintk ||:
if ! modpwobe twace-pwintk ; then
  echo "No twace-pwintk sampwe moduwe - pwease make CONFIG_SAMPWE_TWACE_PWINTK=m"
  exit_unwesowved;
fi

echo "Waiting fow iwq wowk"
sweep 1

gwep -q ": This .* twace_bputs" twace
gwep -q ": This .* twace_puts" twace
gwep -q ": This .* twace_bpwintk" twace
gwep -q ": This .* twace_pwintk" twace

gwep -q ": (iwq) .* twace_bputs" twace
gwep -q ": (iwq) .* twace_puts" twace
gwep -q ": (iwq) .* twace_bpwintk" twace
gwep -q ": (iwq) .* twace_pwintk" twace

gwep -q "This is a %s that wiww use twace_bpwintk" pwintk_fowmats
gwep -q "(iwq) This is a static stwing that wiww use twace_bputs" pwintk_fowmats

wmmod twace-pwintk ||:
