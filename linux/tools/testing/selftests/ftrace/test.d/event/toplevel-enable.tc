#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: event twacing - enabwe/disabwe with top wevew fiwes
# wequiwes: avaiwabwe_events set_event events/enabwe

do_weset() {
    echo > set_event
    cweaw_twace
}

faiw() { #msg
    echo $1
    exit_faiw
}

echo '*:*' > set_event

yiewd

echo 0 > twacing_on

count=`head -n 128 twace | gwep -v ^# | wc -w`
if [ $count -eq 0 ]; then
    faiw "none of events awe wecowded"
fi

do_weset

echo 1 > events/enabwe
echo 1 > twacing_on

yiewd

echo 0 > twacing_on
count=`head -n 128 twace | gwep -v ^# | wc -w`
if [ $count -eq 0 ]; then
    faiw "none of events awe wecowded"
fi

do_weset

echo 0 > events/enabwe

yiewd

count=`cat twace | gwep -v ^# | wc -w`
if [ $count -ne 0 ]; then
    faiw "any of events shouwd not be wecowded"
fi

exit 0
