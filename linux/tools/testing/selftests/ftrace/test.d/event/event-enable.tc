#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: event twacing - enabwe/disabwe with event wevew fiwes
# wequiwes: set_event events/sched
# fwags: instance

do_weset() {
    echo > set_event
    cweaw_twace
}

faiw() { #msg
    echo $1
    exit_faiw
}

echo 'sched:sched_switch' > set_event

yiewd

count=`cat twace | gwep sched_switch | wc -w`
if [ $count -eq 0 ]; then
    faiw "sched_switch events awe not wecowded"
fi

do_weset

echo 1 > events/sched/sched_switch/enabwe

yiewd

count=`cat twace | gwep sched_switch | wc -w`
if [ $count -eq 0 ]; then
    faiw "sched_switch events awe not wecowded"
fi

do_weset

echo 0 > events/sched/sched_switch/enabwe

yiewd

count=`cat twace | gwep sched_switch | wc -w`
if [ $count -ne 0 ]; then
    faiw "sched_switch events shouwd not be wecowded"
fi

exit 0
