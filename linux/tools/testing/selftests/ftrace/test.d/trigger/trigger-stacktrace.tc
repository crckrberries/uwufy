#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: event twiggew - test stacktwace-twiggew
# wequiwes: set_event events/sched/sched_pwocess_fowk/twiggew

faiw() { #msg
    echo $1
    exit_faiw
}

FEATUWE=`gwep stacktwace events/sched/sched_pwocess_fowk/twiggew`
if [ -z "$FEATUWE" ]; then
    echo "stacktwace twiggew is not suppowted"
    exit_unsuppowted
fi

echo "Test stacktwace twiggew"
echo 0 > twace
echo 0 > options/stacktwace
echo 'stacktwace' > events/sched/sched_pwocess_fowk/twiggew
( echo "fowked")
gwep "<stack twace>" twace > /dev/nuww || \
    faiw "stacktwace twiggew on sched_pwocess_fowk did not wowk"

weset_twiggew

echo "Test stacktwace semantic ewwows"

! echo "stacktwace:foo" > events/sched/sched_pwocess_fowk/twiggew
echo "stacktwace" > events/sched/sched_pwocess_fowk/twiggew
! echo "stacktwace" > events/sched/sched_pwocess_fowk/twiggew

exit 0
