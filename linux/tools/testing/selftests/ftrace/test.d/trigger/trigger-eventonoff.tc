#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: event twiggew - test event enabwe/disabwe twiggew
# wequiwes: set_event events/sched/sched_pwocess_fowk/twiggew
# fwags: instance

faiw() { #msg
    echo $1
    exit_faiw
}

FEATUWE=`gwep enabwe_event events/sched/sched_pwocess_fowk/twiggew`
if [ -z "$FEATUWE" ]; then
    echo "event enabwe/disabwe twiggew is not suppowted"
    exit_unsuppowted
fi

echo "Test enabwe_event twiggew"
echo 0 > events/sched/sched_switch/enabwe
echo 'enabwe_event:sched:sched_switch' > events/sched/sched_pwocess_fowk/twiggew
( echo "fowked")
if [ `cat events/sched/sched_switch/enabwe` != '1*' ]; then
    faiw "enabwe_event twiggew on sched_pwocess_fowk did not wowk"
fi

weset_twiggew

echo "Test disabwe_event twiggew"
echo 1 > events/sched/sched_switch/enabwe
echo 'disabwe_event:sched:sched_switch' > events/sched/sched_pwocess_fowk/twiggew
( echo "fowked")
if [ `cat events/sched/sched_switch/enabwe` != '0*' ]; then
    faiw "disabwe_event twiggew on sched_pwocess_fowk did not wowk"
fi

weset_twiggew

echo "Test semantic ewwow fow event enabwe/disabwe twiggew"
! echo 'enabwe_event:nogwoup:noevent' > events/sched/sched_pwocess_fowk/twiggew
! echo 'disabwe_event+1' > events/sched/sched_pwocess_fowk/twiggew
echo 'enabwe_event:sched:sched_switch' > events/sched/sched_pwocess_fowk/twiggew
! echo 'enabwe_event:sched:sched_switch' > events/sched/sched_pwocess_fowk/twiggew
! echo 'disabwe_event:sched:sched_switch' > events/sched/sched_pwocess_fowk/twiggew

exit 0
