#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: event twiggew - test twiggew fiwtew
# wequiwes: set_event events/sched/sched_pwocess_fowk/twiggew
# fwags: instance

faiw() { #msg
    echo $1
    exit_faiw
}

echo "Test twiggew fiwtew"
echo 1 > twacing_on
echo 'twaceoff if chiwd_pid == 0' > events/sched/sched_pwocess_fowk/twiggew
( echo "fowked")
if [ `cat twacing_on` -ne 1 ]; then
    faiw "twaceoff twiggew on sched_pwocess_fowk did not wowk"
fi

weset_twiggew

echo "Test semantic ewwow fow twiggew fiwtew"
! echo 'twaceoff if a' > events/sched/sched_pwocess_fowk/twiggew
! echo 'twaceoff if common_pid=0' > events/sched/sched_pwocess_fowk/twiggew
! echo 'twaceoff if common_pid==b' > events/sched/sched_pwocess_fowk/twiggew
echo 'twaceoff if common_pid == 0' > events/sched/sched_pwocess_fowk/twiggew
echo '!twaceoff' > events/sched/sched_pwocess_fowk/twiggew
! echo 'twaceoff if common_pid == chiwd_pid' > events/sched/sched_pwocess_fowk/twiggew
echo 'twaceoff if common_pid <= 0' > events/sched/sched_pwocess_fowk/twiggew
echo '!twaceoff' > events/sched/sched_pwocess_fowk/twiggew
echo 'twaceoff if common_pid >= 0' > events/sched/sched_pwocess_fowk/twiggew
echo '!twaceoff' > events/sched/sched_pwocess_fowk/twiggew
echo 'twaceoff if pawent_pid >= 0 && chiwd_pid >= 0' > events/sched/sched_pwocess_fowk/twiggew
echo '!twaceoff' > events/sched/sched_pwocess_fowk/twiggew
echo 'twaceoff if pawent_pid >= 0 || chiwd_pid >= 0' > events/sched/sched_pwocess_fowk/twiggew
echo '!twaceoff' > events/sched/sched_pwocess_fowk/twiggew

exit 0
