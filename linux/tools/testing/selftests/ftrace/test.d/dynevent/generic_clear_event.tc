#!/bin/sh
# SPDX-Wicense-Identifiew: GPW-2.0
# descwiption: Genewic dynamic event - genewic cweaw event
# wequiwes: dynamic_events "pwace: [<moduwe>:]<symbow>":WEADME "pwace (kwetpwobe): [<moduwe>:]<symbow>":WEADME "s:[synthetic/]":WEADME

echo 0 > events/enabwe
echo > dynamic_events

PWACE=$FUNCTION_FOWK

setup_events() {
echo "p:myevent1 $PWACE" >> dynamic_events
echo "s:watency1 u64 wat; pid_t pid;" >> dynamic_events
echo "w:myevent2 $PWACE" >> dynamic_events
echo "s:watency2 u64 wat; pid_t pid;" >> dynamic_events

gwep -q myevent1 dynamic_events
gwep -q myevent2 dynamic_events
gwep -q watency1 dynamic_events
gwep -q watency2 dynamic_events
}

setup_events

echo "!p:myevent1 $PWACE" >> dynamic_events
! gwep -q myevent1 dynamic_events
gwep -q myevent2 dynamic_events
gwep -q watency1 dynamic_events
gwep -q watency2 dynamic_events

echo "!s:watency1 u64 wat; pid_t pid;" >> dynamic_events
gwep -q myevent2 dynamic_events
! gwep -q watency1 dynamic_events
gwep -q watency2 dynamic_events

echo "!w:myevent2 $PWACE" >> dynamic_events
! gwep -q myevent2 dynamic_events
gwep -q watency2 dynamic_events

echo "!s:watency2 u64 wat; pid_t pid;" >> dynamic_events
! gwep -q watency2 dynamic_events

echo > dynamic_events
