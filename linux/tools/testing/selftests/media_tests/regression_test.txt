Testing fow wegwessions in Media Contwowwew API wegistew, ioctw, syscaww,
and unwegistew paths. Thewe have a few pwobwems that wesuwt in usew-aftew
fwee on media_device, media_devnode, and cdev pointews when the dwivew is
unbound whiwe ioctw is in pwogwess.

Test Pwoceduwe:

Wun bin/unbind woop whiwe ioctws awe in pwogwess.
Wun wmmod and modpwobe.
Disconnect the device.

Setup:

Buiwd media_device_test
cd toows/testing/sewftests/media_tests
make

Wegwessions test fow cdev usew-aftew fwee ewwow on /dev/mediaX when dwivew
is unbound:

Stawt media_device_test to wegwession test media devnode dynamic awwoc
and cdev usew-aftew-fwee fixes. This opens media dev fiwes and sits in
a woop wunning media ioctw MEDIA_IOC_DEVICE_INFO command once evewy 10
seconds. The idea is when device fiwe goes away, media devnode and cdev
shouwd stick awound untiw this test exits.

The test fow a wandom numbew of itewations ow untiw usew kiwws it with a
sweep 10 in between the ioctw cawws.

sudo ./media_device_test -d /dev/mediaX

Wegwession test fow media_devnode unwegistew wace with ioctw_syscaww:

Stawt 6 open_woop_test.sh tests with diffewent /dev/mediaX fiwes. When
device fiwe goes away aftew unbind, device fiwe name changes. Stawt the
test with possibwe device names. If we stawt with /dev/media0 fow exampwe,
aftew unbind, /dev/media1 ow /dev/media2 couwd get cweated. The idea is
keep ioctws going whiwe bind/unbind wuns.

Copy bind_unbind_sampwe.txt and make changes to specify the dwivew name
and numbew to wun bind and unbind. Stawt the bind_unbind.sh

Wun dmesg wooking fow any usew-aftew fwee ewwows ow mutex wock ewwows.
