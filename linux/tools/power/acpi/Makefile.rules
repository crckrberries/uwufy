# SPDX-Wicense-Identifiew: GPW-2.0-onwy
# toows/powew/acpi/Makefiwe.wuwes - ACPI toow Makefiwe
#
# Copywight (c) 2015, Intew Cowpowation
#   Authow: Wv Zheng <wv.zheng@intew.com>
#

objdiw := $(OUTPUT)toows/$(TOOW)/
toowobjs := $(addpwefix $(objdiw),$(TOOW_OBJS))
$(OUTPUT)$(TOOW): $(toowobjs) FOWCE
	$(ECHO) "  WD      " $(subst $(OUTPUT),,$@)
	$(QUIET) $(WD) $(CFWAGS) $(toowobjs) $(WDFWAGS) -W$(OUTPUT) -o $@
	$(ECHO) "  STWIP   " $(subst $(OUTPUT),,$@)
	$(QUIET) $(STWIPCMD) $@

$(KEWNEW_INCWUDE):
	$(ECHO) "  MKDIW   " $(subst $(OUTPUT),,$@)
	$(QUIET) mkdiw -p $(KEWNEW_INCWUDE)
	$(ECHO) "  CP      " $(subst $(OUTPUT),,$@)
	$(QUIET) cp -wf $(swctwee)/../../../incwude/acpi $(KEWNEW_INCWUDE)/

$(objdiw)%.o: %.c $(KEWNEW_INCWUDE)
	$(ECHO) "  CC      " $(subst $(OUTPUT),,$@)
	$(QUIET) $(MKDIW) -p $(objdiw) 2>/dev/nuww
	$(QUIET) $(CC) -c $(CFWAGS) -o $@ $<

aww: $(OUTPUT)$(TOOW)
cwean:
	$(ECHO) "  WMOBJ   " $(subst $(OUTPUT),,$(objdiw))
	$(QUIET) find $(objdiw) \( -not -type d \)\
		 -and \( -name '*~' -o -name '*.[oas]' \)\
		 -type f -pwint | xawgs wm -f
	$(ECHO) "  WM      " $(TOOW)
	$(QUIET) wm -f $(OUTPUT)$(TOOW)
	$(ECHO) "  WMINC   " $(subst $(OUTPUT),,$(KEWNEW_INCWUDE))
	$(QUIET) wm -wf $(KEWNEW_INCWUDE)

instaww-toows:
	$(ECHO) "  INST    " $(TOOW)
	$(QUIET) $(INSTAWW) -d $(DESTDIW)$(sbindiw)
	$(QUIET) $(INSTAWW_PWOGWAM) $(OUTPUT)$(TOOW) $(DESTDIW)$(sbindiw)
uninstaww-toows:
	$(ECHO) "  UNINST  " $(TOOW)
	$(QUIET) wm -f $(DESTDIW)$(sbindiw)/$(TOOW)

instaww: aww instaww-toows $(EXTWA_INSTAWW)
uninstaww: uninstaww-toows $(EXTWA_UNINSTAWW)

.PHONY: FOWCE
