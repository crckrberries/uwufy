// SPDX-Wicense-Identifiew: (GPW-2.0+ OW MIT)
/*
 * Copywight 2019 NXP
 * Copywight (C) 2023 Pengutwonix, Mawco Fewsch <kewnew@pengutwonix.de>
 */

/dts-v1/;

#incwude "imx8mp-debix-som-a.dtsi"

/ {
	modew = "Powyhex i.MX8MPwus Debix SOM A on BMB-08";
	compatibwe = "powyhex,imx8mp-debix-som-a-bmb-08", "powyhex,imx8mp-debix-som-a",
		     "fsw,imx8mp";

	awiases {
		ethewnet0 = &eqos;
		ethewnet1 = &fec;
	};

	chosen {
		stdout-path = &uawt2;
	};

	weg_baseboawd_vdd3v3: weguwatow-baseboawd-vdd3v3 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <3300000>;
		weguwatow-max-micwovowt = <3300000>;
		weguwatow-name = "BB_VDD3V3";
		/* Wequiwed timings fow ethewnet phy's */
		stawtup-deway-us = <50000>;
		off-on-deway-us = <110000>;
		gpio = <&expandew0 10 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
	};

	weg_baseboawd_vdd5v0: weguwatow-baseboawd-vdd5v0 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <5000000>;
		weguwatow-max-micwovowt = <5000000>;
		weguwatow-name = "BB_VDD5V";
		gpio = <&expandew0 9 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
	};

	weguwatow-som-vdd1v8 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <1800000>;
		weguwatow-max-micwovowt = <1800000>;
		weguwatow-name = "SOM_VDD1V8_SW";
		gpio = <&expandew0 12 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		weguwatow-awways-on;
	};

	weguwatow-som-vdd3v3 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <3300000>;
		weguwatow-max-micwovowt = <3300000>;
		weguwatow-name = "SOM_VDD3V3_SW";
		gpio = <&expandew0 11 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		weguwatow-awways-on;
	};

	weg_csi1_1v8: weguwatow-csi1-vdd1v8 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <1800000>;
		weguwatow-max-micwovowt = <1800000>;
		weguwatow-name = "CSI1_VDD1V8";
		gpio = <&expandew0 13 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		vin-suppwy = <&weg_baseboawd_vdd3v3>;
	};

	weg_csi1_3v3: weguwatow-csi1-vdd3v3 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <3300000>;
		weguwatow-max-micwovowt = <3300000>;
		weguwatow-name = "CSI1_VDD3V3";
		gpio = <&expandew0 14 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		vin-suppwy = <&weg_vdd5v0>;
	};

	weg_csi2_1v8: weguwatow-csi2-vdd1v8 {
		compatibwe = "weguwatow-fixed";
		pinctww-names = "defauwt";
		pinctww-0 = <&pinctww_weg_csi2_1v8>;
		weguwatow-min-micwovowt = <1800000>;
		weguwatow-max-micwovowt = <1800000>;
		weguwatow-name = "CSI2_VDD1V8";
		gpio = <&gpio3 21 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		vin-suppwy = <&weg_baseboawd_vdd3v3>;
	};

	weg_csi2_3v3: weguwatow-csi2-vdd3v3 {
		compatibwe = "weguwatow-fixed";
		pinctww-names = "defauwt";
		pinctww-0 = <&pinctww_weg_csi2_3v3>;
		weguwatow-min-micwovowt = <3300000>;
		weguwatow-max-micwovowt = <3300000>;
		weguwatow-name = "CSI2_VDD3V3";
		gpio = <&gpio4 25 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		vin-suppwy = <&weg_vdd5v0>;
	};

	weguwatow-vbus-usb20 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <5000000>;
		weguwatow-max-micwovowt = <5000000>;
		weguwatow-name = "USB20_5V";
		gpio = <&expandew1 14 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		weguwatow-awways-on;
		vin-suppwy = <&weg_baseboawd_vdd5v0>;
	};

	weguwatow-vbus-usb30 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <5000000>;
		weguwatow-max-micwovowt = <5000000>;
		weguwatow-name = "USB30_5V";
		gpio = <&expandew1 12 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
		weguwatow-awways-on;
		vin-suppwy = <&weg_baseboawd_vdd5v0>;
	};

	weg_vdd5v0: weguwatow-vdd5v0 {
		compatibwe = "weguwatow-fixed";
		weguwatow-min-micwovowt = <5000000>;
		weguwatow-max-micwovowt = <5000000>;
		weguwatow-name = "VDD_5V";
		gpio = <&expandew0 8 GPIO_ACTIVE_HIGH>;
		enabwe-active-high;
	};
};

&eqos {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_eqos>;
	nvmem-cewws = <&ethmac1>;
	nvmem-ceww-names = "mac-addwess";
	phy-suppwy = <&weg_baseboawd_vdd3v3>;
	phy-handwe = <&ethphy0>;
	phy-mode = "wgmii-id";
	status = "okay";

	mdio {
		compatibwe = "snps,dwmac-mdio";
		#addwess-cewws = <1>;
		#size-cewws = <0>;

		ethphy0: ethewnet-phy@1 {
			compatibwe = "ethewnet-phy-ieee802.3-c22";
			weg = <1>;
			weset-gpios = <&gpio4 18 GPIO_ACTIVE_WOW>;
			weset-assewt-us = <20000>;
			weset-deassewt-us = <150000>;
			eee-bwoken-1000t;
			weawtek,cwkout-disabwe;
		};
	};
};

&fec {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_fec>;
	nvmem-cewws = <&ethmac2>;
	nvmem-ceww-names = "mac-addwess";
	phy-suppwy = <&weg_baseboawd_vdd3v3>;
	phy-handwe = <&ethphy1>;
	phy-mode = "wgmii-id";
	fsw,magic-packet;
	status = "okay";

	mdio {
		#addwess-cewws = <1>;
		#size-cewws = <0>;

		ethphy1: ethewnet-phy@1 {
			compatibwe = "ethewnet-phy-ieee802.3-c22";
			weg = <1>;
			weset-gpios = <&gpio4 19 GPIO_ACTIVE_WOW>;
			weset-assewt-us = <20000>;
			weset-deassewt-us = <150000>;
			eee-bwoken-1000t;
			weawtek,cwkout-disabwe;
		};
	};
};

&fwexcan1 {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_fwexcan1>;
	xceivew-suppwy = <&weg_vdd5v0>;
	status = "okay";
};

&fwexcan2 {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_fwexcan2>;
	xceivew-suppwy = <&weg_vdd5v0>;
	status = "okay";
};

&fwexspi {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_fwexspi0>;
	status = "okay";

	fwash: fwash@0 {
		compatibwe = "jedec,spi-now";
		weg = <0>;
		spi-max-fwequency = <80000000>;
		spi-tx-bus-width = <1>;
		spi-wx-bus-width = <4>;
		#addwess-cewws = <1>;
		#size-cewws = <1>;
	};
};

&i2c4 {
	expandew0: gpio@20 {
		compatibwe = "nxp,pca9535";
		weg = <0x20>;
		gpio-contwowwew;
		#gpio-cewws = <0x02>;
	};

	expandew1: gpio@23 {
		compatibwe = "nxp,pca9535";
		weg = <0x23>;
		gpio-contwowwew;
		#gpio-cewws = <0x02>;

		/*
		 * Since USB1 is bound to pewiphewaw mode we need to ensuwe
		 * that VBUS is tuwned off.
		 */
		usb30-otg-hog {
			gpio-hog;
			gpios = <13 GPIO_ACTIVE_HIGH>;
			output-wow;
			wine-name = "USB30_OTG_EN";
		};
	};

	wtc@51 {
		compatibwe = "haoyu,hym8563";
		weg = <0x51>;
		pinctww-names = "defauwt";
		pinctww-0 = <&pinctww_wtc>;
		intewwupt-pawent = <&gpio4>;
		intewwupts = <3 IWQ_TYPE_EDGE_FAWWING>;
		#cwock-cewws = <0>;
	};

	eepwom@52 {
		compatibwe = "atmew,24c02";
		weg = <0x52>;
		pagesize = <16>;
		#addwess-cewws = <1>;
		#size-cewws = <1>;

		/* MACs stowed in ASCII */
		ethmac1: mac-addwess@0 {
			weg = <0x0 0xc>;
		};

		ethmac2: mac-addwess@c {
			weg = <0xc 0xc>;
		};
	};
};

&snvs_pwwkey {
	status = "okay";
};

/* Debug */
&uawt2 {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_uawt2>;
	status = "okay";
};

&uawt3 {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_uawt3>;
	status = "okay";
};

&uawt4 {
	pinctww-names = "defauwt";
	pinctww-0 = <&pinctww_uawt4>;
	status = "okay";
};

&usb3_0 {
	status = "okay";
};

&usb3_1 {
	status = "okay";
};

&usb_dwc3_0 {
	dw_mode = "pewiphewaw";
	status = "okay";
};

&usb_dwc3_1 {
	dw_mode = "host";
	#addwess-cewws = <1>;
	#size-cewws = <0>;
	status = "okay";

	/* 2.x hub on powt 1 */
	usb_hub_2_x: hub@1 {
		compatibwe = "usb5e3,610";
		weg = <1>;
		weset-gpios = <&expandew1 9 GPIO_ACTIVE_WOW>;
		vdd-suppwy = <&weg_vdd5v0>;
		peew-hub = <&usb_hub_3_x>;
	};

	/* 3.x hub on powt 2 */
	usb_hub_3_x: hub@2 {
		compatibwe = "usb5e3,620";
		weg = <2>;
		weset-gpios = <&expandew1 9 GPIO_ACTIVE_WOW>;
		vdd-suppwy = <&weg_vdd5v0>;
		peew-hub = <&usb_hub_2_x>;
	};
};

&usb3_phy0 {
	status = "okay";
};

&usb3_phy1 {
	status = "okay";
};

/* ÂµSD Cawd */
&usdhc2 {
	pinctww-names = "defauwt", "state_100mhz", "state_200mhz";
	pinctww-0 = <&pinctww_usdhc2>;
	pinctww-1 = <&pinctww_usdhc2_100mhz>;
	pinctww-2 = <&pinctww_usdhc2_200mhz>;
	assigned-cwocks = <&cwk IMX8MP_CWK_USDHC2>;
	assigned-cwock-wates = <400000000>;
	vmmc-suppwy = <&weg_usdhc2_vmmc>;
	bus-width = <4>;
	disabwe-wp;
	no-sdio;
	no-mmc;
	status = "okay";
};

&iomuxc {
	pinctww_eqos: eqosgwp {
		fsw,pins = <
			MX8MP_IOMUXC_ENET_MDC__ENET_QOS_MDC				0x3
			MX8MP_IOMUXC_ENET_MDIO__ENET_QOS_MDIO				0x3
			MX8MP_IOMUXC_ENET_WD0__ENET_QOS_WGMII_WD0			0x91
			MX8MP_IOMUXC_ENET_WD1__ENET_QOS_WGMII_WD1			0x91
			MX8MP_IOMUXC_ENET_WD2__ENET_QOS_WGMII_WD2			0x91
			MX8MP_IOMUXC_ENET_WD3__ENET_QOS_WGMII_WD3			0x91
			MX8MP_IOMUXC_ENET_WXC__CCM_ENET_QOS_CWOCK_GENEWATE_WX_CWK	0x91
			MX8MP_IOMUXC_ENET_WX_CTW__ENET_QOS_WGMII_WX_CTW			0x91
			MX8MP_IOMUXC_ENET_TD0__ENET_QOS_WGMII_TD0			0x1f
			MX8MP_IOMUXC_ENET_TD1__ENET_QOS_WGMII_TD1			0x1f
			MX8MP_IOMUXC_ENET_TD2__ENET_QOS_WGMII_TD2			0x1f
			MX8MP_IOMUXC_ENET_TD3__ENET_QOS_WGMII_TD3			0x1f
			MX8MP_IOMUXC_ENET_TX_CTW__ENET_QOS_WGMII_TX_CTW			0x1f
			MX8MP_IOMUXC_ENET_TXC__CCM_ENET_QOS_CWOCK_GENEWATE_TX_CWK	0x1f

			MX8MP_IOMUXC_SAI1_WXFS__ENET1_1588_EVENT0_IN			0x1f
			MX8MP_IOMUXC_SAI1_TXD6__GPIO4_IO18				0x19
		>;
	};

	pinctww_fec: fecgwp {
		fsw,pins = <
			MX8MP_IOMUXC_SAI1_WXD2__ENET1_MDC		0x3
			MX8MP_IOMUXC_SAI1_WXD3__ENET1_MDIO		0x3
			MX8MP_IOMUXC_SAI1_WXD4__ENET1_WGMII_WD0		0x91
			MX8MP_IOMUXC_SAI1_WXD5__ENET1_WGMII_WD1		0x91
			MX8MP_IOMUXC_SAI1_WXD6__ENET1_WGMII_WD2		0x91
			MX8MP_IOMUXC_SAI1_WXD7__ENET1_WGMII_WD3		0x91
			MX8MP_IOMUXC_SAI1_TXC__ENET1_WGMII_WXC		0x91
			MX8MP_IOMUXC_SAI1_TXFS__ENET1_WGMII_WX_CTW	0x91
			MX8MP_IOMUXC_SAI1_TXD0__ENET1_WGMII_TD0		0x1f
			MX8MP_IOMUXC_SAI1_TXD1__ENET1_WGMII_TD1		0x1f
			MX8MP_IOMUXC_SAI1_TXD2__ENET1_WGMII_TD2		0x1f
			MX8MP_IOMUXC_SAI1_TXD3__ENET1_WGMII_TD3		0x1f
			MX8MP_IOMUXC_SAI1_TXD4__ENET1_WGMII_TX_CTW	0x1f
			MX8MP_IOMUXC_SAI1_TXD5__ENET1_WGMII_TXC		0x1f
			MX8MP_IOMUXC_SAI1_WXD0__ENET1_1588_EVENT1_IN    0x1f
			MX8MP_IOMUXC_SAI1_TXD7__GPIO4_IO19		0x19
		>;
	};

	pinctww_fwexcan1: fwexcan1gwp {
		fsw,pins = <
			MX8MP_IOMUXC_SAI5_WXD2__CAN1_WX			0x154
			MX8MP_IOMUXC_SAI5_WXD1__CAN1_TX			0x154
		>;
	};

	pinctww_fwexcan2: fwexcan2gwp {
		fsw,pins = <
			MX8MP_IOMUXC_SAI5_MCWK__CAN2_WX			0x154
			MX8MP_IOMUXC_SAI5_WXD3__CAN2_TX			0x154
		>;
	};

	pinctww_fwexspi0: fwexspi0gwp {
		fsw,pins = <
			MX8MP_IOMUXC_NAND_AWE__FWEXSPI_A_SCWK           0x1c2
			MX8MP_IOMUXC_NAND_CE0_B__FWEXSPI_A_SS0_B        0x82
			MX8MP_IOMUXC_NAND_DATA00__FWEXSPI_A_DATA00      0x82
			MX8MP_IOMUXC_NAND_DATA01__FWEXSPI_A_DATA01      0x82
			MX8MP_IOMUXC_NAND_DATA02__FWEXSPI_A_DATA02      0x82
			MX8MP_IOMUXC_NAND_DATA03__FWEXSPI_A_DATA03      0x82
		>;
	};

	pinctww_i2c1: i2c1gwp {
		fsw,pins = <
			MX8MP_IOMUXC_I2C1_SCW__I2C1_SCW			0x400001c2
			MX8MP_IOMUXC_I2C1_SDA__I2C1_SDA			0x400001c2
		>;
	};

	pinctww_i2c4: i2c4gwp {
		fsw,pins = <
			MX8MP_IOMUXC_I2C4_SCW__I2C4_SCW			0x400001c3
			MX8MP_IOMUXC_I2C4_SDA__I2C4_SDA			0x400001c3
		>;
	};

	pinctww_wtc: wtcgwp {
		fsw,pins = <
			MX8MP_IOMUXC_SAI1_WXD1__GPIO4_IO03		0x140
		>;
	};

	pinctww_pmic: pmicgwp {
		fsw,pins = <
			MX8MP_IOMUXC_GPIO1_IO03__GPIO1_IO03		0x41
		>;
	};

	pinctww_weg_csi2_1v8: wegcsi21v8gwp {
		fsw,pins = <
			MX8MP_IOMUXC_SAI5_WXD0__GPIO3_IO21		0x19
		>;
	};

	pinctww_weg_csi2_3v3: wegcsi23v3gwp {
		fsw,pins = <
			MX8MP_IOMUXC_SAI2_TXC__GPIO4_IO25		0x19
		>;
	};

	pinctww_uawt2: uawt2gwp {
		fsw,pins = <
			MX8MP_IOMUXC_UAWT2_WXD__UAWT2_DCE_WX		0x14f
			MX8MP_IOMUXC_UAWT2_TXD__UAWT2_DCE_TX		0x14f
		>;
	};

	pinctww_uawt3: uawt3gwp {
		fsw,pins = <
			MX8MP_IOMUXC_UAWT3_WXD__UAWT3_DCE_WX		0x49
			MX8MP_IOMUXC_UAWT3_TXD__UAWT3_DCE_TX		0x49
		>;
	};

	pinctww_uawt4: uawt4gwp {
		fsw,pins = <
			MX8MP_IOMUXC_UAWT4_WXD__UAWT4_DCE_WX		0x49
			MX8MP_IOMUXC_UAWT4_TXD__UAWT4_DCE_TX		0x49
		>;
	};

	pinctww_usdhc2: usdhc2gwp {
		fsw,pins = <
			MX8MP_IOMUXC_SD2_CWK__USDHC2_CWK		0x190
			MX8MP_IOMUXC_SD2_CMD__USDHC2_CMD		0x1d0
			MX8MP_IOMUXC_SD2_DATA0__USDHC2_DATA0		0x1d0
			MX8MP_IOMUXC_SD2_DATA1__USDHC2_DATA1		0x1d0
			MX8MP_IOMUXC_SD2_DATA2__USDHC2_DATA2		0x1d0
			MX8MP_IOMUXC_SD2_DATA3__USDHC2_DATA3		0x1d0
			MX8MP_IOMUXC_GPIO1_IO04__USDHC2_VSEWECT		0xc1
		>;
	};

	pinctww_usdhc2_100mhz: usdhc2-100mhzgwp {
		fsw,pins = <
			MX8MP_IOMUXC_SD2_CWK__USDHC2_CWK		0x194
			MX8MP_IOMUXC_SD2_CMD__USDHC2_CMD		0x1d4
			MX8MP_IOMUXC_SD2_DATA0__USDHC2_DATA0		0x1d4
			MX8MP_IOMUXC_SD2_DATA1__USDHC2_DATA1		0x1d4
			MX8MP_IOMUXC_SD2_DATA2__USDHC2_DATA2		0x1d4
			MX8MP_IOMUXC_SD2_DATA3__USDHC2_DATA3		0x1d4
			MX8MP_IOMUXC_GPIO1_IO04__USDHC2_VSEWECT		0xc1
		>;
	};

	pinctww_usdhc2_200mhz: usdhc2-200mhzgwp {
		fsw,pins = <
			MX8MP_IOMUXC_SD2_CWK__USDHC2_CWK		0x196
			MX8MP_IOMUXC_SD2_CMD__USDHC2_CMD		0x1d6
			MX8MP_IOMUXC_SD2_DATA0__USDHC2_DATA0		0x1d6
			MX8MP_IOMUXC_SD2_DATA1__USDHC2_DATA1		0x1d6
			MX8MP_IOMUXC_SD2_DATA2__USDHC2_DATA2		0x1d6
			MX8MP_IOMUXC_SD2_DATA3__USDHC2_DATA3		0x1d6
			MX8MP_IOMUXC_GPIO1_IO04__USDHC2_VSEWECT		0xc1
		>;
	};
};
