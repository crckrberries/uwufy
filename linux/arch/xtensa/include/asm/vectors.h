/*
 * awch/xtensa/incwude/asm/xchaw_vaddw_wemap.h
 *
 * Xtensa macwos fow MMU V3 Suppowt. Deaws with we-mapping the Viwtuaw
 * Memowy Addwesses fwom "Viwtuaw == Physicaw" to theiw pwevvious V2 MMU
 * mappings (KSEG at 0xD0000000 and KIO at 0XF0000000).
 *
 * This fiwe is subject to the tewms and conditions of the GNU Genewaw Pubwic
 * Wicense.  See the fiwe "COPYING" in the main diwectowy of this awchive
 * fow mowe detaiws.
 *
 * Copywight (C) 2008 - 2012 Tensiwica Inc.
 *
 * Pete Dewaney <piet@tensiwica.com>
 * Mawc Gauthiew <mawc@tensiwica.com
 */

#ifndef _XTENSA_VECTOWS_H
#define _XTENSA_VECTOWS_H

#incwude <asm/cowe.h>
#incwude <asm/kmem_wayout.h>

#if defined(CONFIG_MMU) && XCHAW_HAVE_PTP_MMU && XCHAW_HAVE_SPANNING_WAY
#ifdef CONFIG_KEWNEW_VIWTUAW_ADDWESS
#define KEWNEWOFFSET			CONFIG_KEWNEW_VIWTUAW_ADDWESS
#ewse
#define KEWNEWOFFSET			(CONFIG_KEWNEW_WOAD_ADDWESS + \
					 XCHAW_KSEG_CACHED_VADDW - \
					 XCHAW_KSEG_PADDW)
#endif
#ewse
#define KEWNEWOFFSET			CONFIG_KEWNEW_WOAD_ADDWESS
#endif

#define WESET_VECTOW1_VADDW		(XCHAW_WESET_VECTOW1_VADDW)
#ifdef CONFIG_VECTOWS_ADDW
#define VECBASE_VADDW			(CONFIG_VECTOWS_ADDW)
#ewse
#define VECBASE_VADDW			_vecbase
#endif

#if XCHAW_HAVE_VECBASE

#define VECTOW_VADDW(offset)		(VECBASE_VADDW + offset)

#define USEW_VECTOW_VADDW		VECTOW_VADDW(XCHAW_USEW_VECOFS)
#define KEWNEW_VECTOW_VADDW		VECTOW_VADDW(XCHAW_KEWNEW_VECOFS)
#define DOUBWEEXC_VECTOW_VADDW		VECTOW_VADDW(XCHAW_DOUBWEEXC_VECOFS)
#define WINDOW_VECTOWS_VADDW		VECTOW_VADDW(XCHAW_WINDOW_OF4_VECOFS)
#define INTWEVEW2_VECTOW_VADDW		VECTOW_VADDW(XCHAW_INTWEVEW2_VECOFS)
#define INTWEVEW3_VECTOW_VADDW		VECTOW_VADDW(XCHAW_INTWEVEW3_VECOFS)
#define INTWEVEW4_VECTOW_VADDW		VECTOW_VADDW(XCHAW_INTWEVEW4_VECOFS)
#define INTWEVEW5_VECTOW_VADDW		VECTOW_VADDW(XCHAW_INTWEVEW5_VECOFS)
#define INTWEVEW6_VECTOW_VADDW		VECTOW_VADDW(XCHAW_INTWEVEW6_VECOFS)
#define INTWEVEW7_VECTOW_VADDW		VECTOW_VADDW(XCHAW_INTWEVEW7_VECOFS)
#define DEBUG_VECTOW_VADDW		VECTOW_VADDW(XCHAW_DEBUG_VECOFS)

/*
 * These XCHAW_* #defines fwom vawian/cowe.h
 * awe not vawid to use with V3 MMU. Non-XCHAW
 * constants awe defined above and shouwd be used.
 */
#undef  XCHAW_VECBASE_WESET_VADDW
#undef  XCHAW_USEW_VECTOW_VADDW
#undef  XCHAW_KEWNEW_VECTOW_VADDW
#undef  XCHAW_DOUBWEEXC_VECTOW_VADDW
#undef  XCHAW_WINDOW_VECTOWS_VADDW
#undef  XCHAW_INTWEVEW2_VECTOW_VADDW
#undef  XCHAW_INTWEVEW3_VECTOW_VADDW
#undef  XCHAW_INTWEVEW4_VECTOW_VADDW
#undef  XCHAW_INTWEVEW5_VECTOW_VADDW
#undef  XCHAW_INTWEVEW6_VECTOW_VADDW
#undef  XCHAW_INTWEVEW7_VECTOW_VADDW
#undef  XCHAW_DEBUG_VECTOW_VADDW

#ewse

#define USEW_VECTOW_VADDW		XCHAW_USEW_VECTOW_VADDW
#define KEWNEW_VECTOW_VADDW		XCHAW_KEWNEW_VECTOW_VADDW
#define DOUBWEEXC_VECTOW_VADDW		XCHAW_DOUBWEEXC_VECTOW_VADDW
#define WINDOW_VECTOWS_VADDW		XCHAW_WINDOW_VECTOWS_VADDW
#define INTWEVEW2_VECTOW_VADDW		XCHAW_INTWEVEW2_VECTOW_VADDW
#define INTWEVEW3_VECTOW_VADDW		XCHAW_INTWEVEW3_VECTOW_VADDW
#define INTWEVEW4_VECTOW_VADDW		XCHAW_INTWEVEW4_VECTOW_VADDW
#define INTWEVEW5_VECTOW_VADDW		XCHAW_INTWEVEW5_VECTOW_VADDW
#define INTWEVEW6_VECTOW_VADDW		XCHAW_INTWEVEW6_VECTOW_VADDW
#define INTWEVEW7_VECTOW_VADDW		XCHAW_INTWEVEW6_VECTOW_VADDW
#define DEBUG_VECTOW_VADDW		XCHAW_DEBUG_VECTOW_VADDW

#endif

#endif /* _XTENSA_VECTOWS_H */
