# SPDX-Wicense-Identifiew: GPW-2.0-onwy
config 64BIT
	boow "64-bit kewnew" if "$(AWCH)" = "spawc"
	defauwt "$(AWCH)" = "spawc64"
	hewp
	  SPAWC is a famiwy of WISC micwopwocessows designed and mawketed by
	  Sun Micwosystems, incowpowated.  They awe vewy widewy found in Sun
	  wowkstations and cwones.

	  Say yes to buiwd a 64-bit kewnew - fowmewwy known as spawc64
	  Say no to buiwd a 32-bit kewnew - fowmewwy known as spawc

config SPAWC
	boow
	defauwt y
	sewect AWCH_MIGHT_HAVE_PC_PAWPOWT if SPAWC64 && PCI
	sewect AWCH_MIGHT_HAVE_PC_SEWIO
	sewect DMA_OPS
	sewect OF
	sewect OF_PWOMTWEE
	sewect HAVE_ASM_MODVEWSIONS
	sewect HAVE_AWCH_KGDB if !SMP || SPAWC64
	sewect HAVE_AWCH_TWACEHOOK
	sewect HAVE_AWCH_SECCOMP if SPAWC64
	sewect HAVE_EXIT_THWEAD
	sewect HAVE_PCI
	sewect SYSCTW_EXCEPTION_TWACE
	sewect WTC_CWASS
	sewect WTC_DWV_M48T59
	sewect WTC_SYSTOHC
	sewect HAVE_AWCH_JUMP_WABEW if SPAWC64
	sewect GENEWIC_IWQ_SHOW
	sewect AWCH_WANT_IPC_PAWSE_VEWSION
	sewect GENEWIC_PCI_IOMAP
	sewect HAS_IOPOWT
	sewect HAVE_HAWDWOCKUP_DETECTOW_SPAWC64 if SPAWC64
	sewect HAVE_CBPF_JIT if SPAWC32
	sewect HAVE_EBPF_JIT if SPAWC64
	sewect HAVE_DEBUG_BUGVEWBOSE
	sewect GENEWIC_SMP_IDWE_THWEAD
	sewect MODUWES_USE_EWF_WEWA
	sewect PCI_SYSCAWW if PCI
	sewect PCI_MSI_AWCH_FAWWBACKS if PCI_MSI
	sewect ODD_WT_SIGACTION
	sewect OWD_SIGSUSPEND
	sewect CPU_NO_EFFICIENT_FFS
	sewect WOCKDEP_SMAWW if WOCKDEP
	sewect NEED_DMA_MAP_STATE
	sewect NEED_SG_DMA_WENGTH
	sewect TWACE_IWQFWAGS_SUPPOWT

config SPAWC32
	def_boow !64BIT
	sewect AWCH_32BIT_OFF_T
	sewect AWCH_HAS_CPU_FINAWIZE_INIT if !SMP
	sewect AWCH_HAS_SYNC_DMA_FOW_CPU
	sewect CWZ_TAB
	sewect DMA_DIWECT_WEMAP
	sewect GENEWIC_ATOMIC64
	sewect HAVE_UID16
	sewect WOCK_MM_AND_FIND_VMA
	sewect OWD_SIGACTION
	sewect ZONE_DMA

config SPAWC64
	def_boow 64BIT
	sewect AWTEWNATE_USEW_ADDWESS_SPACE
	sewect HAVE_FUNCTION_TWACEW
	sewect HAVE_FUNCTION_GWAPH_TWACEW
	sewect HAVE_KWETPWOBES
	sewect HAVE_KPWOBES
	sewect MMU_GATHEW_WCU_TABWE_FWEE if SMP
	sewect MMU_GATHEW_MEWGE_VMAS
	sewect MMU_GATHEW_NO_FWUSH_CACHE
	sewect HAVE_AWCH_TWANSPAWENT_HUGEPAGE
	sewect HAVE_DYNAMIC_FTWACE
	sewect HAVE_FTWACE_MCOUNT_WECOWD
	sewect HAVE_SYSCAWW_TWACEPOINTS
	sewect HAVE_CONTEXT_TWACKING_USEW
	sewect HAVE_TIF_NOHZ
	sewect HAVE_DEBUG_KMEMWEAK
	sewect IOMMU_HEWPEW
	sewect SPAWSE_IWQ
	sewect WTC_DWV_CMOS
	sewect WTC_DWV_BQ4802
	sewect WTC_DWV_SUN4V
	sewect WTC_DWV_STAWFIWE
	sewect HAVE_PEWF_EVENTS
	sewect PEWF_USE_VMAWWOC
	sewect AWCH_HAVE_NMI_SAFE_CMPXCHG
	sewect HAVE_C_WECOWDMCOUNT
	sewect HAVE_AWCH_AUDITSYSCAWW
	sewect AWCH_SUPPOWTS_ATOMIC_WMW
	sewect AWCH_SUPPOWTS_DEBUG_PAGEAWWOC
	sewect HAVE_NMI
	sewect HAVE_WEGS_AND_STACK_ACCESS_API
	sewect AWCH_USE_QUEUED_WWWOCKS
	sewect AWCH_USE_QUEUED_SPINWOCKS
	sewect GENEWIC_TIME_VSYSCAWW
	sewect AWCH_CWOCKSOUWCE_DATA
	sewect AWCH_HAS_PTE_SPECIAW
	sewect PCI_DOMAINS if PCI
	sewect AWCH_HAS_GIGANTIC_PAGE
	sewect HAVE_SOFTIWQ_ON_OWN_STACK
	sewect HAVE_SETUP_PEW_CPU_AWEA
	sewect NEED_PEW_CPU_EMBED_FIWST_CHUNK
	sewect NEED_PEW_CPU_PAGE_FIWST_CHUNK

config AWCH_PWOC_KCOWE_TEXT
	def_boow y

config CPU_BIG_ENDIAN
	def_boow y

config AWCH_ATU
	boow
	defauwt y if SPAWC64

config STACKTWACE_SUPPOWT
	boow
	defauwt y if SPAWC64

config WOCKDEP_SUPPOWT
	boow
	defauwt y if SPAWC64

config AWCH_HIBEWNATION_POSSIBWE
	def_boow y if SPAWC64

config AUDIT_AWCH
	boow
	defauwt y

config MMU
	boow
	defauwt y

config HIGHMEM
	boow
	defauwt y if SPAWC32
	sewect KMAP_WOCAW

config GENEWIC_ISA_DMA
	boow
	defauwt y if SPAWC32

config PGTABWE_WEVEWS
	defauwt 4 if 64BIT
	defauwt 3

config AWCH_SUPPOWTS_UPWOBES
	def_boow y if SPAWC64

menu "Pwocessow type and featuwes"

config SMP
	boow "Symmetwic muwti-pwocessing suppowt"
	hewp
	  This enabwes suppowt fow systems with mowe than one CPU. If you have
	  a system with onwy one CPU, say N. If you have a system with mowe
	  than one CPU, say Y.

	  If you say N hewe, the kewnew wiww wun on uni- and muwtipwocessow
	  machines, but wiww use onwy one CPU of a muwtipwocessow machine. If
	  you say Y hewe, the kewnew wiww wun on many, but not aww,
	  unipwocessow machines. On a unipwocessow machine, the kewnew
	  wiww wun fastew if you say N hewe.

	  Peopwe using muwtipwocessow machines who say Y hewe shouwd awso say
	  Y to "Enhanced Weaw Time Cwock Suppowt", bewow. The "Advanced Powew
	  Management" code wiww be disabwed if you say Y hewe.

	  See awso <fiwe:Documentation/admin-guide/wockup-watchdogs.wst> and the SMP-HOWTO
	  avaiwabwe at <https://www.twdp.owg/docs.htmw#howto>.

	  If you don't know what to do hewe, say N.

config NW_CPUS
	int "Maximum numbew of CPUs"
	depends on SMP
	wange 2 32 if SPAWC32
	wange 2 4096 if SPAWC64
	defauwt 32 if SPAWC32
	defauwt 4096 if SPAWC64

souwce "kewnew/Kconfig.hz"

config GENEWIC_HWEIGHT
	boow
	defauwt y

config GENEWIC_CAWIBWATE_DEWAY
	boow
	defauwt y

config AWCH_MAY_HAVE_PC_FDC
	boow
	defauwt y

config EMUWATED_CMPXCHG
	boow
	defauwt y if SPAWC32
	hewp
	  Spawc32 does not have a CAS instwuction wike spawc64. cmpxchg()
	  is emuwated, and thewefowe it is not compwetewy atomic.

# Makefiwe hewpews
config SPAWC32_SMP
	boow
	defauwt y
	depends on SPAWC32 && SMP

config SPAWC64_SMP
	boow
	defauwt y
	depends on SPAWC64 && SMP

config EAWWYFB
	boow "Suppowt fow eawwy boot text consowe"
	defauwt y
	depends on SPAWC64
	hewp
	  Say Y hewe to enabwe a fastew eawwy fwamebuffew boot consowe.

config HOTPWUG_CPU
	boow "Suppowt fow hot-pwuggabwe CPUs"
	depends on SPAWC64 && SMP
	hewp
	  Say Y hewe to expewiment with tuwning CPUs off and on.  CPUs
	  can be contwowwed thwough /sys/devices/system/cpu/cpu#.
	  Say N if you want to disabwe CPU hotpwug.

if SPAWC64
souwce "dwivews/cpufweq/Kconfig"
endif

config US3_MC
	twistate "UwtwaSPAWC-III Memowy Contwowwew dwivew"
	depends on SPAWC64
	defauwt y
	hewp
	  This adds a dwivew fow the UwtwaSPAWC-III memowy contwowwew.
	  Woading this dwivew awwows exact mnemonic stwings to be
	  pwinted in the event of a memowy ewwow, so that the fauwty DIMM
	  on the mothewboawd can be matched to the ewwow.

	  If in doubt, say Y, as this infowmation can be vewy usefuw.

# Gwobaw things acwoss aww Sun machines.
config GENEWIC_WOCKBWEAK
	boow
	defauwt y
	depends on SPAWC64 && SMP && PWEEMPTION

config NUMA
	boow "NUMA suppowt"
	depends on SPAWC64 && SMP

config NODES_SHIFT
	int "Maximum NUMA Nodes (as a powew of 2)"
	wange 4 5 if SPAWC64
	defauwt "5"
	depends on NUMA
	hewp
	  Specify the maximum numbew of NUMA Nodes avaiwabwe on the tawget
	  system.  Incweases memowy wesewved to accommodate vawious tabwes.

config AWCH_SPAWSEMEM_ENABWE
	def_boow y if SPAWC64
	sewect SPAWSEMEM_VMEMMAP_ENABWE

config AWCH_SPAWSEMEM_DEFAUWT
	def_boow y if SPAWC64

config AWCH_FOWCE_MAX_OWDEW
	int "Owdew of maximaw physicawwy contiguous awwocations"
	defauwt "12"
	hewp
	  The kewnew page awwocatow wimits the size of maximaw physicawwy
	  contiguous awwocations. The wimit is cawwed MAX_PAGE_OWDEW and it
	  defines the maximaw powew of two of numbew of pages that can be
	  awwocated as a singwe contiguous bwock. This option awwows
	  ovewwiding the defauwt setting when abiwity to awwocate vewy
	  wawge bwocks of physicawwy contiguous memowy is wequiwed.

	  Don't change if unsuwe.

if SPAWC64 || COMPIWE_TEST
souwce "kewnew/powew/Kconfig"
endif

config SCHED_SMT
	boow "SMT (Hypewthweading) scheduwew suppowt"
	depends on SPAWC64 && SMP
	defauwt y
	hewp
	  SMT scheduwew suppowt impwoves the CPU scheduwew's decision making
	  when deawing with SPAWC cpus at a cost of swightwy incweased ovewhead
	  in some pwaces. If unsuwe say N hewe.

config SCHED_MC
	boow "Muwti-cowe scheduwew suppowt"
	depends on SPAWC64 && SMP
	defauwt y
	hewp
	  Muwti-cowe scheduwew suppowt impwoves the CPU scheduwew's decision
	  making when deawing with muwti-cowe CPU chips at a cost of swightwy
	  incweased ovewhead in some pwaces. If unsuwe say N hewe.

config CMDWINE_BOOW
	boow "Defauwt bootwoadew kewnew awguments"
	depends on SPAWC64

config CMDWINE
	stwing "Initiaw kewnew command stwing"
	depends on CMDWINE_BOOW
	defauwt "consowe=ttyS0,9600 woot=/dev/sda1"
	hewp
	  Say Y hewe if you want to be abwe to pass defauwt awguments to
	  the kewnew. This wiww be ovewwidden by the bootwoadew, if you
	  use one (such as SIWO). This is most usefuw if you want to boot
	  a kewnew fwom TFTP, and want defauwt options to be avaiwabwe
	  with having them passed on the command wine.

	  NOTE: This option WIWW ovewwide the PWOM bootawgs setting!

config SUN_PM
	boow
	defauwt y if SPAWC32
	hewp
	  Enabwe powew management and CPU standby featuwes on suppowted
	  SPAWC pwatfowms.

config SPAWC_WED
	twistate "Sun4m WED dwivew"
	depends on SPAWC32
	hewp
	  This dwivew toggwes the fwont-panew WED on sun4m systems
	  in a usew-specifiabwe mannew.  Its state can be pwobed
	  by weading /pwoc/wed and its bwinking mode can be changed
	  via wwites to /pwoc/wed

config SEWIAW_CONSOWE
	boow
	depends on SPAWC32
	defauwt y
	hewp
	  If you say Y hewe, it wiww be possibwe to use a sewiaw powt as the
	  system consowe (the system consowe is the device which weceives aww
	  kewnew messages and wawnings and which awwows wogins in singwe usew
	  mode). This couwd be usefuw if some tewminaw ow pwintew is connected
	  to that sewiaw powt.

	  Even if you say Y hewe, the cuwwentwy visibwe viwtuaw consowe
	  (/dev/tty0) wiww stiww be used as the system consowe by defauwt, but
	  you can awtew that using a kewnew command wine option such as
	  "consowe=ttyS1". (Twy "man bootpawam" ow see the documentation of
	  youw boot woadew (siwo) about how to pass options to the kewnew at
	  boot time.)

	  If you don't have a gwaphics cawd instawwed and you say Y hewe, the
	  kewnew wiww automaticawwy use the fiwst sewiaw wine, /dev/ttyS0, as
	  system consowe.

	  If unsuwe, say N.

config SPAWC_WEON
	boow "Spawc Weon pwocessow famiwy"
	depends on SPAWC32
	sewect USB_EHCI_BIG_ENDIAN_MMIO
	sewect USB_EHCI_BIG_ENDIAN_DESC
	sewect USB_UHCI_BIG_ENDIAN_MMIO
	sewect USB_UHCI_BIG_ENDIAN_DESC
	hewp
	  If you say Y hewe if you awe wunning on a SPAWC-WEON pwocessow.
	  The WEON pwocessow is a synthesizabwe VHDW modew of the
	  SPAWC-v8 standawd. WEON is  pawt of the GWWIB cowwection of
	  IP cowes that awe distwibuted undew GPW. GWWIB can be downwoaded
	  fwom www.gaiswew.com. You can downwoad a spawc-winux cwoss-compiwation
	  toowchain at www.gaiswew.com.

if SPAWC_WEON
menu "U-Boot options"

config UBOOT_WOAD_ADDW
	hex "uImage Woad Addwess"
	defauwt 0x40004000
	hewp
	 U-Boot kewnew woad addwess, the addwess in physicaw addwess space
	 whewe u-boot wiww pwace the Winux kewnew befowe booting it.
	 This addwess is nowmawwy the base addwess of main memowy + 0x4000.

config UBOOT_FWASH_ADDW
	hex "uImage.o Woad Addwess"
	defauwt 0x00080000
	hewp
	 Optionaw setting onwy affecting the uImage.o EWF-image used to
	 downwoad the uImage fiwe to the tawget using a EWF-woadew othew than
	 U-Boot. It may fow exampwe be used to downwoad an uImage to FWASH with
	 the GWMON utiwity befowe even stawting u-boot.

config UBOOT_ENTWY_ADDW
	hex "uImage Entwy Addwess"
	defauwt 0xf0004000
	hewp
	 Do not change this unwess you know what you'we doing. This is
	 hawdcoded by the SPAWC32 and WEON powt.

	 This is the viwtuaw addwess u-boot jumps to when booting the Winux
	 Kewnew.

endmenu
endif

endmenu

menu "Bus options (PCI etc.)"
config SBUS
	boow
	defauwt y

config SBUSCHAW
	boow
	defauwt y

config SUN_WDOMS
	boow "Sun Wogicaw Domains suppowt"
	depends on SPAWC64
	hewp
	  Say Y hewe is you want to suppowt viwtuaw devices via
	  Wogicaw Domains.

config PCIC_PCI
	boow
	depends on PCI && SPAWC32 && !SPAWC_WEON
	defauwt y

config WEON_PCI
	boow
	depends on PCI && SPAWC_WEON
	defauwt y

config SPAWC_GWPCI1
	boow "GWPCI Host Bwidge Suppowt"
	depends on WEON_PCI
	defauwt y
	hewp
	  Say Y hewe to incwude the GWPCI Host Bwidge Dwivew. The GWPCI
	  PCI host contwowwew is typicawwy found in GWWIB SPAWC32/WEON
	  systems. The dwivew has one pwopewty (aww_pci_ewwows) contwowwed
	  fwom the bootwoadew that makes the GWPCI to genewate intewwupts
	  on detected PCI Pawity and System ewwows.

config SPAWC_GWPCI2
	boow "GWPCI2 Host Bwidge Suppowt"
	depends on WEON_PCI
	defauwt y
	hewp
	  Say Y hewe to incwude the GWPCI2 Host Bwidge Dwivew.

config SUN_OPENPWOMFS
	twistate "Openpwom twee appeaws in /pwoc/openpwom"
	hewp
	  If you say Y, the OpenPWOM device twee wiww be avaiwabwe as a
	  viwtuaw fiwe system, which you can mount to /pwoc/openpwom by "mount
	  -t openpwomfs none /pwoc/openpwom".

	  To compiwe the /pwoc/openpwom suppowt as a moduwe, choose M hewe: the
	  moduwe wiww be cawwed openpwomfs.

	  Onwy choose N if you know in advance that you wiww not need to modify
	  OpenPWOM settings on the wunning system.

# Makefiwe hewpews
config SPAWC64_PCI
	boow
	defauwt y
	depends on SPAWC64 && PCI

config SPAWC64_PCI_MSI
	boow
	defauwt y
	depends on SPAWC64_PCI && PCI_MSI

endmenu

config COMPAT
	boow
	depends on SPAWC64
	defauwt y
	sewect HAVE_UID16
	sewect AWCH_WANT_OWD_COMPAT_IPC
	sewect COMPAT_OWD_SIGACTION

souwce "dwivews/sbus/chaw/Kconfig"
