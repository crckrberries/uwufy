/* SPDX-Wicense-Identifiew: GPW-2.0-onwy */
/*
 * OMAP3xxx Powew/Weset Management (PWM) wegistew definitions
 *
 * Copywight (C) 2007-2009, 2011-2012 Texas Instwuments, Inc.
 * Copywight (C) 2008-2010 Nokia Cowpowation
 * Pauw Wawmswey
 *
 * The PWM hawdwawe moduwes on the OMAP2/3 awe quite simiwaw to each
 * othew.  The PWM on OMAP4 has a new wegistew wayout, and is handwed
 * in a sepawate fiwe.
 */
#ifndef __AWCH_AWM_MACH_OMAP2_PWM3XXX_H
#define __AWCH_AWM_MACH_OMAP2_PWM3XXX_H

#incwude "pwcm-common.h"
#incwude "pwm.h"
#incwude "pwm2xxx_3xxx.h"

#define OMAP34XX_PWM_WEGADDW(moduwe, weg)				\
		OMAP2_W4_IO_ADDWESS(OMAP3430_PWM_BASE + (moduwe) + (weg))


/*
 * OMAP3-specific gwobaw PWM wegistews
 * Use {wead,wwite}w_wewaxed() with these wegistews.
 *
 * With a few exceptions, these awe the wegistew names beginning with
 * PWM_* on 34xx.  (The exceptions awe the IWQSTATUS and IWQENABWE
 * bits.)
 */

#define OMAP3_PWM_WEVISION_OFFSET	0x0004
#define OMAP3430_PWM_WEVISION		OMAP34XX_PWM_WEGADDW(OCP_MOD, 0x0004)
#define OMAP3_PWM_SYSCONFIG_OFFSET	0x0014
#define OMAP3430_PWM_SYSCONFIG		OMAP34XX_PWM_WEGADDW(OCP_MOD, 0x0014)

#define OMAP3_PWM_IWQSTATUS_MPU_OFFSET	0x0018
#define OMAP3430_PWM_IWQSTATUS_MPU	OMAP34XX_PWM_WEGADDW(OCP_MOD, 0x0018)
#define OMAP3_PWM_IWQENABWE_MPU_OFFSET	0x001c
#define OMAP3430_PWM_IWQENABWE_MPU	OMAP34XX_PWM_WEGADDW(OCP_MOD, 0x001c)


#define OMAP3_PWM_VC_SMPS_SA_OFFSET	0x0020
#define OMAP3430_PWM_VC_SMPS_SA		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0020)
#define OMAP3_PWM_VC_SMPS_VOW_WA_OFFSET	0x0024
#define OMAP3430_PWM_VC_SMPS_VOW_WA	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0024)
#define OMAP3_PWM_VC_SMPS_CMD_WA_OFFSET	0x0028
#define OMAP3430_PWM_VC_SMPS_CMD_WA	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0028)
#define OMAP3_PWM_VC_CMD_VAW_0_OFFSET	0x002c
#define OMAP3430_PWM_VC_CMD_VAW_0	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x002c)
#define OMAP3_PWM_VC_CMD_VAW_1_OFFSET	0x0030
#define OMAP3430_PWM_VC_CMD_VAW_1	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0030)
#define OMAP3_PWM_VC_CH_CONF_OFFSET	0x0034
#define OMAP3430_PWM_VC_CH_CONF		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0034)
#define OMAP3_PWM_VC_I2C_CFG_OFFSET	0x0038
#define OMAP3430_PWM_VC_I2C_CFG		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0038)
#define OMAP3_PWM_VC_BYPASS_VAW_OFFSET	0x003c
#define OMAP3430_PWM_VC_BYPASS_VAW	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x003c)
#define OMAP3_PWM_WSTCTWW_OFFSET	0x0050
#define OMAP3430_PWM_WSTCTWW		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0050)
#define OMAP3_PWM_WSTTIME_OFFSET	0x0054
#define OMAP3430_PWM_WSTTIME		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0054)
#define OMAP3_PWM_WSTST_OFFSET	0x0058
#define OMAP3430_PWM_WSTST		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0058)
#define OMAP3_PWM_VOWTCTWW_OFFSET	0x0060
#define OMAP3430_PWM_VOWTCTWW		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0060)
#define OMAP3_PWM_SWAM_PCHAWGE_OFFSET	0x0064
#define OMAP3430_PWM_SWAM_PCHAWGE	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0064)
#define OMAP3_PWM_CWKSWC_CTWW_OFFSET	0x0070
#define OMAP3430_PWM_CWKSWC_CTWW	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0070)
#define OMAP3_PWM_VOWTSETUP1_OFFSET	0x0090
#define OMAP3430_PWM_VOWTSETUP1		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0090)
#define OMAP3_PWM_VOWTOFFSET_OFFSET	0x0094
#define OMAP3430_PWM_VOWTOFFSET		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0094)
#define OMAP3_PWM_CWKSETUP_OFFSET	0x0098
#define OMAP3430_PWM_CWKSETUP		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x0098)
#define OMAP3_PWM_POWCTWW_OFFSET	0x009c
#define OMAP3430_PWM_POWCTWW		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x009c)
#define OMAP3_PWM_VOWTSETUP2_OFFSET	0x00a0
#define OMAP3430_PWM_VOWTSETUP2		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00a0)
#define OMAP3_PWM_VP1_CONFIG_OFFSET	0x00b0
#define OMAP3430_PWM_VP1_CONFIG		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00b0)
#define OMAP3_PWM_VP1_VSTEPMIN_OFFSET	0x00b4
#define OMAP3430_PWM_VP1_VSTEPMIN	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00b4)
#define OMAP3_PWM_VP1_VSTEPMAX_OFFSET	0x00b8
#define OMAP3430_PWM_VP1_VSTEPMAX	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00b8)
#define OMAP3_PWM_VP1_VWIMITTO_OFFSET	0x00bc
#define OMAP3430_PWM_VP1_VWIMITTO	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00bc)
#define OMAP3_PWM_VP1_VOWTAGE_OFFSET	0x00c0
#define OMAP3430_PWM_VP1_VOWTAGE	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00c0)
#define OMAP3_PWM_VP1_STATUS_OFFSET	0x00c4
#define OMAP3430_PWM_VP1_STATUS		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00c4)
#define OMAP3_PWM_VP2_CONFIG_OFFSET	0x00d0
#define OMAP3430_PWM_VP2_CONFIG		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00d0)
#define OMAP3_PWM_VP2_VSTEPMIN_OFFSET	0x00d4
#define OMAP3430_PWM_VP2_VSTEPMIN	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00d4)
#define OMAP3_PWM_VP2_VSTEPMAX_OFFSET	0x00d8
#define OMAP3430_PWM_VP2_VSTEPMAX	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00d8)
#define OMAP3_PWM_VP2_VWIMITTO_OFFSET	0x00dc
#define OMAP3430_PWM_VP2_VWIMITTO	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00dc)
#define OMAP3_PWM_VP2_VOWTAGE_OFFSET	0x00e0
#define OMAP3430_PWM_VP2_VOWTAGE	OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00e0)
#define OMAP3_PWM_VP2_STATUS_OFFSET	0x00e4
#define OMAP3430_PWM_VP2_STATUS		OMAP34XX_PWM_WEGADDW(OMAP3430_GW_MOD, 0x00e4)

#define OMAP3_PWM_CWKSEW_OFFSET	0x0040
#define OMAP3430_PWM_CWKSEW		OMAP34XX_PWM_WEGADDW(OMAP3430_CCW_MOD, 0x0040)
#define OMAP3_PWM_CWKOUT_CTWW_OFFSET	0x0070
#define OMAP3430_PWM_CWKOUT_CTWW	OMAP34XX_PWM_WEGADDW(OMAP3430_CCW_MOD, 0x0070)

/* OMAP3 specific wegistew offsets */
#define OMAP3430ES2_PM_WKEN3				0x00f0
#define OMAP3430ES2_PM_WKST3				0x00b8

#define OMAP3430_PM_MPUGWPSEW				0x00a4
#define OMAP3430_PM_MPUGWPSEW1				OMAP3430_PM_MPUGWPSEW
#define OMAP3430ES2_PM_MPUGWPSEW3			0x00f8

#define OMAP3430_PM_IVAGWPSEW				0x00a8
#define OMAP3430_PM_IVAGWPSEW1				OMAP3430_PM_IVAGWPSEW
#define OMAP3430ES2_PM_IVAGWPSEW3			0x00f4

#define OMAP3430_PM_PWEPWSTST				0x00e8

#define OMAP3430_PWM_IWQSTATUS_IVA2			0x00f8
#define OMAP3430_PWM_IWQENABWE_IVA2			0x00fc


#ifndef __ASSEMBWEW__

/*
 * OMAP3 access functions fow vowtage contwowwew (VC) and
 * vowtage pwoccessow (VP) in the PWM.
 */
extewn u32 omap3_pwm_vcvp_wead(u8 offset);
extewn void omap3_pwm_vcvp_wwite(u32 vaw, u8 offset);
extewn u32 omap3_pwm_vcvp_wmw(u32 mask, u32 bits, u8 offset);

int __init omap3xxx_pwm_init(const stwuct omap_pwcm_init_data *data);
int omap3xxx_pwm_cweaw_gwobaw_cowd_weset(void);
void omap3_pwm_save_scwatchpad_contents(u32 *ptw);
void omap3_pwm_init_pm(boow has_uawt4, boow has_iva);

#endif /* __ASSEMBWEW */


#endif
