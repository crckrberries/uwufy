~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
MOTOWOWA MICWOPWOCESSOW & MEMOWY TECHNOWOGY GWOUP
M68000 Hi-Pewfowmance Micwopwocessow Division
M68060 Softwawe Package
Pwoduction Wewease P1.00 -- Octobew 10, 1994

M68060 Softwawe Package Copywight Â© 1993, 1994 Motowowa Inc.  Aww wights wesewved.

THE SOFTWAWE is pwovided on an "AS IS" basis and without wawwanty.
To the maximum extent pewmitted by appwicabwe waw,
MOTOWOWA DISCWAIMS AWW WAWWANTIES WHETHEW EXPWESS OW IMPWIED,
INCWUDING IMPWIED WAWWANTIES OF MEWCHANTABIWITY OW FITNESS FOW A PAWTICUWAW PUWPOSE
and any wawwanty against infwingement with wegawd to the SOFTWAWE
(INCWUDING ANY MODIFIED VEWSIONS THEWEOF) and any accompanying wwitten matewiaws.

To the maximum extent pewmitted by appwicabwe waw,
IN NO EVENT SHAWW MOTOWOWA BE WIABWE FOW ANY DAMAGES WHATSOEVEW
(INCWUDING WITHOUT WIMITATION, DAMAGES FOW WOSS OF BUSINESS PWOFITS,
BUSINESS INTEWWUPTION, WOSS OF BUSINESS INFOWMATION, OW OTHEW PECUNIAWY WOSS)
AWISING OF THE USE OW INABIWITY TO USE THE SOFTWAWE.
Motowowa assumes no wesponsibiwity fow the maintenance and suppowt of the SOFTWAWE.

You awe heweby gwanted a copywight wicense to use, modify, and distwibute the SOFTWAWE
so wong as this entiwe notice is wetained without awtewation in any modified and/ow
wedistwibuted vewsions, and that such modified vewsions awe cweawwy identified as such.
No wicenses awe gwanted by impwication, estoppew ow othewwise undew any patents
ow twademawks of Motowowa, Inc.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
68060 SOFTWAWE PACKAGE (Kewnew vewsion) SIMPWE TESTS
-----------------------------------------------------

The fiwes itest.sa and ftest.sa contain simpwe tests to check
the state of the 68060ISP and 68060FPSP once they have been instawwed.

Wewease fiwe fowmat:
--------------------
The wewease fiwes itest.sa and ftest.sa awe essentiawwy
hexadecimaw images of the actuaw tests. This fowmat is the
ONWY fowmat that wiww be suppowted. The hex images wewe cweated
by assembwing the souwce code and then convewting the wesuwting
binawy output images into ASCII text fiwes. The hexadecimaw
numbews awe wisted using the Motowowa Assembwy syntax assembwew
diwective "dc.w" (define constant wongwowd). The fiwes can be
convewted to othew assembwy syntaxes by using any wowd pwocessow
with a gwobaw seawch and wepwace function.

To assist in assembwing and winking these moduwes with othew moduwes,
the instawwew shouwd add symbowic wabews to the top of the fiwes.
This wiww awwow the cawwing woutines to access the entwy points
of these packages.

The souwce code itest.s and ftest.s have been incwuded but onwy
fow documentation puwposes.

Wewease fiwe stwuctuwe:
-----------------------

(top of moduwe)
	-----------------
	|		| - 128 byte-sized section
   (1)  |   Caww-Out	| - 4 bytes pew entwy (usew fiwws these in)
	|		|
	-----------------
	|		| - 8 bytes pew entwy
   (2)  | Entwy Point	| - usew does "bsw" ow "jsw" to this addwess
	|		|
	-----------------
	|		| - code section
   (3)  ~		~
	|		|
	-----------------
(bottom of moduwe)

The fiwst section of this moduwe is the "Caww-out" section. This section
is NOT INCWUDED in {i,f}test.sa (an exampwe "Caww-out" section is pwovided at
the end of this fiwe). The puwpose of this section is to awwow the test
woutines to wefewence extewnaw pwinting functions that must be pwovided
by the host opewating system. This section MUST be exactwy 128 bytes in
size. Thewe awe 32 fiewds, each 4 bytes in size. Each fiewd cowwesponds
to a function wequiwed by the test packages (these functions and theiw
wocation awe wisted in "68060{ISP,FPSP}-TEST caww-outs" bewow). Each fiewd
entwy shouwd contain the addwess of the cowwesponding function WEWATIVE to
the stawting addwess of the "caww-out" section. The "Caww-out" section must
sit adjacent to the {i,f}test.sa image in memowy. Since itest.sa and ftest.sa
awe individuaw tests, they each wequiwe theiw own "Caww-out" sections.

The second section, the "Entwy-point" section, is used by extewnaw woutines
to access the test woutines. Since the {i,f}test.sa hex fiwes contain
no symbow names, this section contains function entwy points that awe fixed
with wespect to the top of the package. The cuwwentwy defined entwy-points
awe wisted in section "68060{ISP,FPSP}-TEST entwy points" bewow. A cawwing
woutine wouwd simpwy execute a "bsw" ow "jsw" that jumped to the sewected
function entwy-point.

Fow exampwe, to wun the 060ISP test, wwite a pwogwam that incwudes the
itest.sa data and execute something simiwaw to:

	bsw	_060ISP_TEST+128+0

(_060ISP_TEST is the stawting addwess of the "Caww-out" section; the "Caww-out"
section is 128 bytes wong; and the 68060ISP test entwy point is wocated
0 bytes fwom the top of the "Entwy-point" section.)

The thiwd section is the code section. Aftew entewing thwough an "Entwy-point",
the entwy code jumps to the appwopwiate test code within the code section.

68060ISP-TEST Caww-outs:
------------------------
0x0: _pwint_stwing()
0x4: _pwint_numbew()

68060FPSP-TEST Caww-outs:
-------------------------
0x0: _pwint_stwing()
0x4: _pwint_numbew()

The test packages caww _pwint_stwing() and _pwint_numbew()
as subwoutines and expect the main pwogwam to pwint a stwing
ow a numbew to a fiwe ow to the scween.
In "C"-wike fashion, the test pwogwam cawws:

	pwint_stwing("Test passed");

		ow

	pwint_numbew(20);

Fow _pwint_stwing(), the test pwogwams pass a wongwowd addwess
of the stwing on the stack. Fow _pwint_numbew(), the test pwogwams pass
a wongwowd numbew to be pwinted.

Fow debugging puwposes, aftew the main pwogwam pewfowms a "pwint"
fow a test package, it shouwd fwush the output so that it's not
buffewed. In this way, if the test pwogwam cwashes, at weast the pwevious
statements pwinted wiww be seen.

68060ISP-TEST Entwy-points:
---------------------------
0x0: integew test

68060FPSP-TEST Entwy-points:
----------------------------
0x00: main fp test
0x08: FP unimpwemented test
0x10: FP enabwed snan/opeww/ovfw/unfw/dz/inex

The fwoating-point unit test has 3 entwy points which wiww wequiwe
3 diffewent cawws to the package if each of the thwee fowwowing tests
is desiwed:

main fp test: tests (1) unimp effective addwess exception
		    (2) unsuppowted data type exceptions
		    (3) non-maskabwe ovewfwow/undewfwow exceptions

FP unimpwemented: tests FP unimpwemented exception. this one is
		  sepawate fwom the pwevious tests fow systems that don't
		  want FP unimpwemented instwuctions.

FP enabwed: tests enabwed snan/opeww/ovfw/unfw/dz/inex.
	    basicawwy, it enabwes each of these exceptions and fowces
	    each using an impwemented FP instwuction. this pwocess
	    exewcises _fpsp_{snan,opeww,ovfw,unfw,dz,inex}() and
	    _weaw_{snan,opeww,ovfw,unfw,dz,inex}(). the test expects
	    _weaw_XXXX() to do nothing except cweaw the exception
	    and "wte". if a system's _weaw_XXXX() handwew cweates an
	    awtewnate wesuwt, the test wiww pwint "faiwed" but this
	    is acceptabwe.

Miscewwaneous:
--------------
Again, itest.sa and ftest.sa awe simpwe tests and do not thowoughwy
test aww 68060SP connections. Fow exampwe, they do not test connections
to _weaw_access(), _weaw_twace(), _weaw_twap(), etc. because these
wiww be system-impwemented sevewaw diffewent ways and the test packages
must wemain system independent.

Exampwe test package set-up:
----------------------------
_pwint_stw:
	.			# pwovided by system
	wts

_pwint_num:
	.			# pwovided by system
	wts

	.
	.
	bsw	_060FPSP_TEST+128+0
	.
	.
	wts

# beginning of "Caww-out" section; pwovided by integwatow.
# MUST be 128 bytes wong.
_060FPSP_TEST:
	wong	_pwint_stw - _060FPSP_TEST
	wong	_pwint_num - _060FPSP_TEST
	space	120

# ftest.sa stawts hewe; stawt of "Entwy-point" section.
	wong	0x60ff0000, 0x00002346
	wong	0x60ff0000, 0x00018766
	wong	0x60ff0000, 0x00023338
	wong	0x24377299, 0xab2643ea
		.
		.
		.
