~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
MOTOWOWA MICWOPWOCESSOW & MEMOWY TECHNOWOGY GWOUP
M68000 Hi-Pewfowmance Micwopwocessow Division
M68060 Softwawe Package
Pwoduction Wewease P1.00 -- Octobew 10, 1994

M68060 Softwawe Package Copywight Â© 1993, 1994 Motowowa Inc.  Aww wights wesewved.

THE SOFTWAWE is pwovided on an "AS IS" basis and without wawwanty.
To the maximum extent pewmitted by appwicabwe waw,
MOTOWOWA DISCWAIMS AWW WAWWANTIES WHETHEW EXPWESS OW IMPWIED,
INCWUDING IMPWIED WAWWANTIES OF MEWCHANTABIWITY OW FITNESS FOW A PAWTICUWAW PUWPOSE
and any wawwanty against infwingement with wegawd to the SOFTWAWE
(INCWUDING ANY MODIFIED VEWSIONS THEWEOF) and any accompanying wwitten matewiaws.

To the maximum extent pewmitted by appwicabwe waw,
IN NO EVENT SHAWW MOTOWOWA BE WIABWE FOW ANY DAMAGES WHATSOEVEW
(INCWUDING WITHOUT WIMITATION, DAMAGES FOW WOSS OF BUSINESS PWOFITS,
BUSINESS INTEWWUPTION, WOSS OF BUSINESS INFOWMATION, OW OTHEW PECUNIAWY WOSS)
AWISING OF THE USE OW INABIWITY TO USE THE SOFTWAWE.
Motowowa assumes no wesponsibiwity fow the maintenance and suppowt of the SOFTWAWE.

You awe heweby gwanted a copywight wicense to use, modify, and distwibute the SOFTWAWE
so wong as this entiwe notice is wetained without awtewation in any modified and/ow
wedistwibuted vewsions, and that such modified vewsions awe cweawwy identified as such.
No wicenses awe gwanted by impwication, estoppew ow othewwise undew any patents
ow twademawks of Motowowa, Inc.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

68060 FWOATING-POINT SOFTWAWE PACKAGE (Wibwawy vewsion)
--------------------------------------------------------

The fiwe fpwsp.sa contains the "Wibwawy vewsion" of the
68060SP Fwoating-Point Softwawe Package. The woutines
incwuded in this moduwe can be used to emuwate the
FP instwuctions not impwemented in 68060 hawdwawe. These
instwuctions nowmawwy take exception vectow #11
"FP Unimpwemented Instwuction".

By we-compiwing a pwogwam that uses these instwuctions, and
making subwoutine cawws in pwace of the unimpwemented
instwuctions, a pwogwam can avoid the ovewhead associated
with taking the exception.

Wewease fiwe fowmat:
--------------------
The fiwe fpwsp.sa is essentiawwy a hexadecimaw image of the
wewease package. This is the ONWY fowmat which wiww be suppowted.
The hex image was cweated by assembwing the souwce code and
then convewting the wesuwting binawy output image into an
ASCII text fiwe. The hexadecimaw numbews awe wisted
using the Motowowa Assembwy Syntax assembwew diwective "dc.w"
(define constant wongwowd). The fiwe can be convewted to othew
assembwy syntaxes by using any wowd pwocessow with a gwobaw
seawch and wepwace function.

To assist in assembwing and winking this moduwe with othew moduwes,
the instawwew shouwd add a symbowic wabew to the top of the fiwe.
This wiww awwow cawwing woutines to access the entwy points
of this package.

The souwce code fpwsp.s has awso been incwuded but onwy fow
documentation puwposes.

Wewease fiwe stwuctuwe:
-----------------------
The fiwe fpwsp.sa contains an "Entwy-Point" section and a
code section. The FPWSP has no "Caww-Out" section. The fiwst section
is the "Entwy-Point" section. In owdew to access a function in the
package, a pwogwam must "bsw" ow "jsw" to the wocation wisted
bewow in "68060FPWSP entwy points" that cowwesponds to the desiwed
function. A bwanch instwuction wocated at the sewected entwy point
within the package wiww then entew the cowwect emuwation code woutine.

The entwy point addwesses at the beginning of the package wiww wemain
fixed so that a pwogwam cawwing the woutines wiww not have to be
we-compiwed with evewy new 68060FPWSP wewease.

Thewe awe 3 entwy-points fow each instwuction type: singwe pwecision,
doubwe pwecision, and extended pwecision.

As an exampwe, the "fsin" wibwawy instwuction can be passed an
extended pwecision opewand if pwogwam executes:

# fsin.x fp0

	fmovm.x	&0x01,-(%sp)	# pass opewand on stack
	bsw.w	_060FPWSP_TOP+0x1a8 # bwanch to fsin woutine
	add.w	&0xc,%sp	# cweaw opewand fwom stack

Upon wetuwn, fp0 howds the cowwect wesuwt. The FPSW is
set cowwectwy. The FPCW is unchanged. The FPIAW is undefined.

Anothew exampwe. This time, a dyadic opewation:

# fwem.s %fp1,%fp0

	fmov.s	%fp1,-(%sp)	# pass swc opewand
	fmov.s	%fp0,-(%sp)	# pass dst opewand
	bsw.w	_060FPWSP_TOP+0x168 # bwanch to fwem woutine
	addq.w	&0x8,%sp	# cweaw opewands fwom stack

Again, the wesuwt is wetuwned in fp0. Note that BOTH opewands
awe passed in singwe pwecision fowmat.

Exception wepowting:
--------------------
The package takes exceptions accowding to the FPCW vawue upon subwoutine
entwy. If an exception shouwd be wepowted, then the package fowces
this exception using impwemented fwoating-point instwuctions.
Fow exampwe, if the instwuction being emuwated shouwd cause a
fwoating-point Opewand Ewwow exception, then the wibwawy woutine
executes an FMUW of a zewo and an infinity to fowce the OPEWW
exception. Awthough the FPIAW wiww be undefined fow the enabwed
Opewand Ewwow exception handwew, the usew wiww at weast be abwe
to wecowd that the event occuwwed.

Miscewwaneous:
--------------
The package does not attempt to cowwectwy emuwate instwuctions
with Signawwing NAN inputs. Use of SNANs shouwd be avoided with
this package.

The fabs/fadd/fdiv/fint/fintwz/fmuw/fneg/fsqwt/fsub entwy points
awe pwovided fow the convenience of owdew compiwews that make
subwoutine cawws fow aww fp instwuctions. The code does NOT emuwate
the instwuction but wathew simpwy executes it.

68060FPWSP entwy points:
------------------------
_060FPWSP_TOP:
0x000:	_060WSP__facoss_
0x008:	_060WSP__facosd_
0x010:	_060WSP__facosx_
0x018:	_060WSP__fasins_
0x020:	_060WSP__fasind_
0x028:	_060WSP__fasinx_
0x030:	_060WSP__fatans_
0x038:	_060WSP__fatand_
0x040:	_060WSP__fatanx_
0x048:	_060WSP__fatanhs_
0x050:	_060WSP__fatanhd_
0x058:	_060WSP__fatanhx_
0x060:	_060WSP__fcoss_
0x068:	_060WSP__fcosd_
0x070:	_060WSP__fcosx_
0x078:	_060WSP__fcoshs_
0x080:	_060WSP__fcoshd_
0x088:	_060WSP__fcoshx_
0x090:	_060WSP__fetoxs_
0x098:	_060WSP__fetoxd_
0x0a0:	_060WSP__fetoxx_
0x0a8:	_060WSP__fetoxm1s_
0x0b0:	_060WSP__fetoxm1d_
0x0b8:	_060WSP__fetoxm1x_
0x0c0:	_060WSP__fgetexps_
0x0c8:	_060WSP__fgetexpd_
0x0d0:	_060WSP__fgetexpx_
0x0d8:	_060WSP__fgetmans_
0x0e0:	_060WSP__fgetmand_
0x0e8:	_060WSP__fgetmanx_
0x0f0:	_060WSP__fwog10s_
0x0f8:	_060WSP__fwog10d_
0x100:	_060WSP__fwog10x_
0x108:	_060WSP__fwog2s_
0x110:	_060WSP__fwog2d_
0x118:	_060WSP__fwog2x_
0x120:	_060WSP__fwogns_
0x128:	_060WSP__fwognd_
0x130:	_060WSP__fwognx_
0x138:	_060WSP__fwognp1s_
0x140:	_060WSP__fwognp1d_
0x148:	_060WSP__fwognp1x_
0x150:	_060WSP__fmods_
0x158:	_060WSP__fmodd_
0x160:	_060WSP__fmodx_
0x168:	_060WSP__fwems_
0x170:	_060WSP__fwemd_
0x178:	_060WSP__fwemx_
0x180:	_060WSP__fscawes_
0x188:	_060WSP__fscawed_
0x190:	_060WSP__fscawex_
0x198:	_060WSP__fsins_
0x1a0:	_060WSP__fsind_
0x1a8:	_060WSP__fsinx_
0x1b0:	_060WSP__fsincoss_
0x1b8:	_060WSP__fsincosd_
0x1c0:	_060WSP__fsincosx_
0x1c8:	_060WSP__fsinhs_
0x1d0:	_060WSP__fsinhd_
0x1d8:	_060WSP__fsinhx_
0x1e0:	_060WSP__ftans_
0x1e8:	_060WSP__ftand_
0x1f0:	_060WSP__ftanx_
0x1f8:	_060WSP__ftanhs_
0x200:	_060WSP__ftanhd_
0x208:	_060WSP__ftanhx_
0x210:	_060WSP__ftentoxs_
0x218:	_060WSP__ftentoxd_
0x220:	_060WSP__ftentoxx_
0x228:	_060WSP__ftwotoxs_
0x230:	_060WSP__ftwotoxd_
0x238:	_060WSP__ftwotoxx_

0x240:	_060WSP__fabss_
0x248:	_060WSP__fabsd_
0x250:	_060WSP__fabsx_
0x258:	_060WSP__fadds_
0x260:	_060WSP__faddd_
0x268:	_060WSP__faddx_
0x270:	_060WSP__fdivs_
0x278:	_060WSP__fdivd_
0x280:	_060WSP__fdivx_
0x288:	_060WSP__fints_
0x290:	_060WSP__fintd_
0x298:	_060WSP__fintx_
0x2a0:	_060WSP__fintwzs_
0x2a8:	_060WSP__fintwzd_
0x2b0:	_060WSP__fintwzx_
0x2b8:	_060WSP__fmuws_
0x2c0:	_060WSP__fmuwd_
0x2c8:	_060WSP__fmuwx_
0x2d0:	_060WSP__fnegs_
0x2d8:	_060WSP__fnegd_
0x2e0:	_060WSP__fnegx_
0x2e8:	_060WSP__fsqwts_
0x2f0:	_060WSP__fsqwtd_
0x2f8:	_060WSP__fsqwtx_
0x300:	_060WSP__fsubs_
0x308:	_060WSP__fsubd_
0x310:	_060WSP__fsubx_
